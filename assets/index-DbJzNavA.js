var nw=Object.defineProperty;var iw=(c,m,p)=>m in c?nw(c,m,{enumerable:!0,configurable:!0,writable:!0,value:p}):c[m]=p;var zm=(c,m,p)=>iw(c,typeof m!="symbol"?m+"":m,p);function ow(c,m){for(var p=0;p<m.length;p++){const T=m[p];if(typeof T!="string"&&!Array.isArray(T)){for(const P in T)if(P!=="default"&&!(P in c)){const O=Object.getOwnPropertyDescriptor(T,P);O&&Object.defineProperty(c,P,O.get?O:{enumerable:!0,get:()=>T[P]})}}}return Object.freeze(Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}))}(function(){const m=document.createElement("link").relList;if(m&&m.supports&&m.supports("modulepreload"))return;for(const P of document.querySelectorAll('link[rel="modulepreload"]'))T(P);new MutationObserver(P=>{for(const O of P)if(O.type==="childList")for(const M of O.addedNodes)M.tagName==="LINK"&&M.rel==="modulepreload"&&T(M)}).observe(document,{childList:!0,subtree:!0});function p(P){const O={};return P.integrity&&(O.integrity=P.integrity),P.referrerPolicy&&(O.referrerPolicy=P.referrerPolicy),P.crossOrigin==="use-credentials"?O.credentials="include":P.crossOrigin==="anonymous"?O.credentials="omit":O.credentials="same-origin",O}function T(P){if(P.ep)return;P.ep=!0;const O=p(P);fetch(P.href,O)}})();var Dg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function py(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var Hy={exports:{}},Lm={},qy={exports:{}},Qn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nv;function sw(){if(Nv)return Qn;Nv=1;var c=Symbol.for("react.element"),m=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),M=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),Y=Symbol.for("react.memo"),ve=Symbol.for("react.lazy"),de=Symbol.iterator;function Te(Oe){return Oe===null||typeof Oe!="object"?null:(Oe=de&&Oe[de]||Oe["@@iterator"],typeof Oe=="function"?Oe:null)}var le={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},we=Object.assign,xe={};function Ze(Oe,ct,Ut){this.props=Oe,this.context=ct,this.refs=xe,this.updater=Ut||le}Ze.prototype.isReactComponent={},Ze.prototype.setState=function(Oe,ct){if(typeof Oe!="object"&&typeof Oe!="function"&&Oe!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Oe,ct,"setState")},Ze.prototype.forceUpdate=function(Oe){this.updater.enqueueForceUpdate(this,Oe,"forceUpdate")};function mt(){}mt.prototype=Ze.prototype;function kt(Oe,ct,Ut){this.props=Oe,this.context=ct,this.refs=xe,this.updater=Ut||le}var Tt=kt.prototype=new mt;Tt.constructor=kt,we(Tt,Ze.prototype),Tt.isPureReactComponent=!0;var Je=Array.isArray,Qe=Object.prototype.hasOwnProperty,nt={current:null},yt={key:!0,ref:!0,__self:!0,__source:!0};function ze(Oe,ct,Ut){var ur,At={},ir=null,Sr=null;if(ct!=null)for(ur in ct.ref!==void 0&&(Sr=ct.ref),ct.key!==void 0&&(ir=""+ct.key),ct)Qe.call(ct,ur)&&!yt.hasOwnProperty(ur)&&(At[ur]=ct[ur]);var fr=arguments.length-2;if(fr===1)At.children=Ut;else if(1<fr){for(var pr=Array(fr),Qr=0;Qr<fr;Qr++)pr[Qr]=arguments[Qr+2];At.children=pr}if(Oe&&Oe.defaultProps)for(ur in fr=Oe.defaultProps,fr)At[ur]===void 0&&(At[ur]=fr[ur]);return{$$typeof:c,type:Oe,key:ir,ref:Sr,props:At,_owner:nt.current}}function $e(Oe,ct){return{$$typeof:c,type:Oe.type,key:ct,ref:Oe.ref,props:Oe.props,_owner:Oe._owner}}function re(Oe){return typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===c}function it(Oe){var ct={"=":"=0",":":"=2"};return"$"+Oe.replace(/[=:]/g,function(Ut){return ct[Ut]})}var st=/\/+/g;function zt(Oe,ct){return typeof Oe=="object"&&Oe!==null&&Oe.key!=null?it(""+Oe.key):ct.toString(36)}function tr(Oe,ct,Ut,ur,At){var ir=typeof Oe;(ir==="undefined"||ir==="boolean")&&(Oe=null);var Sr=!1;if(Oe===null)Sr=!0;else switch(ir){case"string":case"number":Sr=!0;break;case"object":switch(Oe.$$typeof){case c:case m:Sr=!0}}if(Sr)return Sr=Oe,At=At(Sr),Oe=ur===""?"."+zt(Sr,0):ur,Je(At)?(Ut="",Oe!=null&&(Ut=Oe.replace(st,"$&/")+"/"),tr(At,ct,Ut,"",function(Qr){return Qr})):At!=null&&(re(At)&&(At=$e(At,Ut+(!At.key||Sr&&Sr.key===At.key?"":(""+At.key).replace(st,"$&/")+"/")+Oe)),ct.push(At)),1;if(Sr=0,ur=ur===""?".":ur+":",Je(Oe))for(var fr=0;fr<Oe.length;fr++){ir=Oe[fr];var pr=ur+zt(ir,fr);Sr+=tr(ir,ct,Ut,pr,At)}else if(pr=Te(Oe),typeof pr=="function")for(Oe=pr.call(Oe),fr=0;!(ir=Oe.next()).done;)ir=ir.value,pr=ur+zt(ir,fr++),Sr+=tr(ir,ct,Ut,pr,At);else if(ir==="object")throw ct=String(Oe),Error("Objects are not valid as a React child (found: "+(ct==="[object Object]"?"object with keys {"+Object.keys(Oe).join(", ")+"}":ct)+"). If you meant to render a collection of children, use an array instead.");return Sr}function Cr(Oe,ct,Ut){if(Oe==null)return Oe;var ur=[],At=0;return tr(Oe,ur,"","",function(ir){return ct.call(Ut,ir,At++)}),ur}function xr(Oe){if(Oe._status===-1){var ct=Oe._result;ct=ct(),ct.then(function(Ut){(Oe._status===0||Oe._status===-1)&&(Oe._status=1,Oe._result=Ut)},function(Ut){(Oe._status===0||Oe._status===-1)&&(Oe._status=2,Oe._result=Ut)}),Oe._status===-1&&(Oe._status=0,Oe._result=ct)}if(Oe._status===1)return Oe._result.default;throw Oe._result}var or={current:null},xt={transition:null},Pt={ReactCurrentDispatcher:or,ReactCurrentBatchConfig:xt,ReactCurrentOwner:nt};function Wt(){throw Error("act(...) is not supported in production builds of React.")}return Qn.Children={map:Cr,forEach:function(Oe,ct,Ut){Cr(Oe,function(){ct.apply(this,arguments)},Ut)},count:function(Oe){var ct=0;return Cr(Oe,function(){ct++}),ct},toArray:function(Oe){return Cr(Oe,function(ct){return ct})||[]},only:function(Oe){if(!re(Oe))throw Error("React.Children.only expected to receive a single React element child.");return Oe}},Qn.Component=Ze,Qn.Fragment=p,Qn.Profiler=P,Qn.PureComponent=kt,Qn.StrictMode=T,Qn.Suspense=J,Qn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pt,Qn.act=Wt,Qn.cloneElement=function(Oe,ct,Ut){if(Oe==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Oe+".");var ur=we({},Oe.props),At=Oe.key,ir=Oe.ref,Sr=Oe._owner;if(ct!=null){if(ct.ref!==void 0&&(ir=ct.ref,Sr=nt.current),ct.key!==void 0&&(At=""+ct.key),Oe.type&&Oe.type.defaultProps)var fr=Oe.type.defaultProps;for(pr in ct)Qe.call(ct,pr)&&!yt.hasOwnProperty(pr)&&(ur[pr]=ct[pr]===void 0&&fr!==void 0?fr[pr]:ct[pr])}var pr=arguments.length-2;if(pr===1)ur.children=Ut;else if(1<pr){fr=Array(pr);for(var Qr=0;Qr<pr;Qr++)fr[Qr]=arguments[Qr+2];ur.children=fr}return{$$typeof:c,type:Oe.type,key:At,ref:ir,props:ur,_owner:Sr}},Qn.createContext=function(Oe){return Oe={$$typeof:M,_currentValue:Oe,_currentValue2:Oe,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Oe.Provider={$$typeof:O,_context:Oe},Oe.Consumer=Oe},Qn.createElement=ze,Qn.createFactory=function(Oe){var ct=ze.bind(null,Oe);return ct.type=Oe,ct},Qn.createRef=function(){return{current:null}},Qn.forwardRef=function(Oe){return{$$typeof:u,render:Oe}},Qn.isValidElement=re,Qn.lazy=function(Oe){return{$$typeof:ve,_payload:{_status:-1,_result:Oe},_init:xr}},Qn.memo=function(Oe,ct){return{$$typeof:Y,type:Oe,compare:ct===void 0?null:ct}},Qn.startTransition=function(Oe){var ct=xt.transition;xt.transition={};try{Oe()}finally{xt.transition=ct}},Qn.unstable_act=Wt,Qn.useCallback=function(Oe,ct){return or.current.useCallback(Oe,ct)},Qn.useContext=function(Oe){return or.current.useContext(Oe)},Qn.useDebugValue=function(){},Qn.useDeferredValue=function(Oe){return or.current.useDeferredValue(Oe)},Qn.useEffect=function(Oe,ct){return or.current.useEffect(Oe,ct)},Qn.useId=function(){return or.current.useId()},Qn.useImperativeHandle=function(Oe,ct,Ut){return or.current.useImperativeHandle(Oe,ct,Ut)},Qn.useInsertionEffect=function(Oe,ct){return or.current.useInsertionEffect(Oe,ct)},Qn.useLayoutEffect=function(Oe,ct){return or.current.useLayoutEffect(Oe,ct)},Qn.useMemo=function(Oe,ct){return or.current.useMemo(Oe,ct)},Qn.useReducer=function(Oe,ct,Ut){return or.current.useReducer(Oe,ct,Ut)},Qn.useRef=function(Oe){return or.current.useRef(Oe)},Qn.useState=function(Oe){return or.current.useState(Oe)},Qn.useSyncExternalStore=function(Oe,ct,Ut){return or.current.useSyncExternalStore(Oe,ct,Ut)},Qn.useTransition=function(){return or.current.useTransition()},Qn.version="18.3.1",Qn}var $v;function eg(){return $v||($v=1,qy.exports=sw()),qy.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jv;function aw(){if(jv)return Lm;jv=1;var c=eg(),m=Symbol.for("react.element"),p=Symbol.for("react.fragment"),T=Object.prototype.hasOwnProperty,P=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,O={key:!0,ref:!0,__self:!0,__source:!0};function M(u,J,Y){var ve,de={},Te=null,le=null;Y!==void 0&&(Te=""+Y),J.key!==void 0&&(Te=""+J.key),J.ref!==void 0&&(le=J.ref);for(ve in J)T.call(J,ve)&&!O.hasOwnProperty(ve)&&(de[ve]=J[ve]);if(u&&u.defaultProps)for(ve in J=u.defaultProps,J)de[ve]===void 0&&(de[ve]=J[ve]);return{$$typeof:m,type:u,key:Te,ref:le,props:de,_owner:P.current}}return Lm.Fragment=p,Lm.jsx=M,Lm.jsxs=M,Lm}var Uv;function lw(){return Uv||(Uv=1,Hy.exports=aw()),Hy.exports}var _r=lw(),Og={},Ky={exports:{}},Nu={},Xy={exports:{}},Yy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vv;function uw(){return Vv||(Vv=1,function(c){function m(xt,Pt){var Wt=xt.length;xt.push(Pt);e:for(;0<Wt;){var Oe=Wt-1>>>1,ct=xt[Oe];if(0<P(ct,Pt))xt[Oe]=Pt,xt[Wt]=ct,Wt=Oe;else break e}}function p(xt){return xt.length===0?null:xt[0]}function T(xt){if(xt.length===0)return null;var Pt=xt[0],Wt=xt.pop();if(Wt!==Pt){xt[0]=Wt;e:for(var Oe=0,ct=xt.length,Ut=ct>>>1;Oe<Ut;){var ur=2*(Oe+1)-1,At=xt[ur],ir=ur+1,Sr=xt[ir];if(0>P(At,Wt))ir<ct&&0>P(Sr,At)?(xt[Oe]=Sr,xt[ir]=Wt,Oe=ir):(xt[Oe]=At,xt[ur]=Wt,Oe=ur);else if(ir<ct&&0>P(Sr,Wt))xt[Oe]=Sr,xt[ir]=Wt,Oe=ir;else break e}}return Pt}function P(xt,Pt){var Wt=xt.sortIndex-Pt.sortIndex;return Wt!==0?Wt:xt.id-Pt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var O=performance;c.unstable_now=function(){return O.now()}}else{var M=Date,u=M.now();c.unstable_now=function(){return M.now()-u}}var J=[],Y=[],ve=1,de=null,Te=3,le=!1,we=!1,xe=!1,Ze=typeof setTimeout=="function"?setTimeout:null,mt=typeof clearTimeout=="function"?clearTimeout:null,kt=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Tt(xt){for(var Pt=p(Y);Pt!==null;){if(Pt.callback===null)T(Y);else if(Pt.startTime<=xt)T(Y),Pt.sortIndex=Pt.expirationTime,m(J,Pt);else break;Pt=p(Y)}}function Je(xt){if(xe=!1,Tt(xt),!we)if(p(J)!==null)we=!0,xr(Qe);else{var Pt=p(Y);Pt!==null&&or(Je,Pt.startTime-xt)}}function Qe(xt,Pt){we=!1,xe&&(xe=!1,mt(ze),ze=-1),le=!0;var Wt=Te;try{for(Tt(Pt),de=p(J);de!==null&&(!(de.expirationTime>Pt)||xt&&!it());){var Oe=de.callback;if(typeof Oe=="function"){de.callback=null,Te=de.priorityLevel;var ct=Oe(de.expirationTime<=Pt);Pt=c.unstable_now(),typeof ct=="function"?de.callback=ct:de===p(J)&&T(J),Tt(Pt)}else T(J);de=p(J)}if(de!==null)var Ut=!0;else{var ur=p(Y);ur!==null&&or(Je,ur.startTime-Pt),Ut=!1}return Ut}finally{de=null,Te=Wt,le=!1}}var nt=!1,yt=null,ze=-1,$e=5,re=-1;function it(){return!(c.unstable_now()-re<$e)}function st(){if(yt!==null){var xt=c.unstable_now();re=xt;var Pt=!0;try{Pt=yt(!0,xt)}finally{Pt?zt():(nt=!1,yt=null)}}else nt=!1}var zt;if(typeof kt=="function")zt=function(){kt(st)};else if(typeof MessageChannel<"u"){var tr=new MessageChannel,Cr=tr.port2;tr.port1.onmessage=st,zt=function(){Cr.postMessage(null)}}else zt=function(){Ze(st,0)};function xr(xt){yt=xt,nt||(nt=!0,zt())}function or(xt,Pt){ze=Ze(function(){xt(c.unstable_now())},Pt)}c.unstable_IdlePriority=5,c.unstable_ImmediatePriority=1,c.unstable_LowPriority=4,c.unstable_NormalPriority=3,c.unstable_Profiling=null,c.unstable_UserBlockingPriority=2,c.unstable_cancelCallback=function(xt){xt.callback=null},c.unstable_continueExecution=function(){we||le||(we=!0,xr(Qe))},c.unstable_forceFrameRate=function(xt){0>xt||125<xt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$e=0<xt?Math.floor(1e3/xt):5},c.unstable_getCurrentPriorityLevel=function(){return Te},c.unstable_getFirstCallbackNode=function(){return p(J)},c.unstable_next=function(xt){switch(Te){case 1:case 2:case 3:var Pt=3;break;default:Pt=Te}var Wt=Te;Te=Pt;try{return xt()}finally{Te=Wt}},c.unstable_pauseExecution=function(){},c.unstable_requestPaint=function(){},c.unstable_runWithPriority=function(xt,Pt){switch(xt){case 1:case 2:case 3:case 4:case 5:break;default:xt=3}var Wt=Te;Te=xt;try{return Pt()}finally{Te=Wt}},c.unstable_scheduleCallback=function(xt,Pt,Wt){var Oe=c.unstable_now();switch(typeof Wt=="object"&&Wt!==null?(Wt=Wt.delay,Wt=typeof Wt=="number"&&0<Wt?Oe+Wt:Oe):Wt=Oe,xt){case 1:var ct=-1;break;case 2:ct=250;break;case 5:ct=1073741823;break;case 4:ct=1e4;break;default:ct=5e3}return ct=Wt+ct,xt={id:ve++,callback:Pt,priorityLevel:xt,startTime:Wt,expirationTime:ct,sortIndex:-1},Wt>Oe?(xt.sortIndex=Wt,m(Y,xt),p(J)===null&&xt===p(Y)&&(xe?(mt(ze),ze=-1):xe=!0,or(Je,Wt-Oe))):(xt.sortIndex=ct,m(J,xt),we||le||(we=!0,xr(Qe))),xt},c.unstable_shouldYield=it,c.unstable_wrapCallback=function(xt){var Pt=Te;return function(){var Wt=Te;Te=Pt;try{return xt.apply(this,arguments)}finally{Te=Wt}}}}(Yy)),Yy}var Zv;function cw(){return Zv||(Zv=1,Xy.exports=uw()),Xy.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gv;function hw(){if(Gv)return Nu;Gv=1;var c=eg(),m=cw();function p(o){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+o,x=1;x<arguments.length;x++)l+="&args[]="+encodeURIComponent(arguments[x]);return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var T=new Set,P={};function O(o,l){M(o,l),M(o+"Capture",l)}function M(o,l){for(P[o]=l,o=0;o<l.length;o++)T.add(l[o])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),J=Object.prototype.hasOwnProperty,Y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ve={},de={};function Te(o){return J.call(de,o)?!0:J.call(ve,o)?!1:Y.test(o)?de[o]=!0:(ve[o]=!0,!1)}function le(o,l,x,C){if(x!==null&&x.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return C?!1:x!==null?!x.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function we(o,l,x,C){if(l===null||typeof l>"u"||le(o,l,x,C))return!0;if(C)return!1;if(x!==null)switch(x.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function xe(o,l,x,C,z,U,oe){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=C,this.attributeNamespace=z,this.mustUseProperty=x,this.propertyName=o,this.type=l,this.sanitizeURL=U,this.removeEmptyString=oe}var Ze={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){Ze[o]=new xe(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var l=o[0];Ze[l]=new xe(l,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){Ze[o]=new xe(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){Ze[o]=new xe(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){Ze[o]=new xe(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){Ze[o]=new xe(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){Ze[o]=new xe(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){Ze[o]=new xe(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){Ze[o]=new xe(o,5,!1,o.toLowerCase(),null,!1,!1)});var mt=/[\-:]([a-z])/g;function kt(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var l=o.replace(mt,kt);Ze[l]=new xe(l,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var l=o.replace(mt,kt);Ze[l]=new xe(l,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var l=o.replace(mt,kt);Ze[l]=new xe(l,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){Ze[o]=new xe(o,1,!1,o.toLowerCase(),null,!1,!1)}),Ze.xlinkHref=new xe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){Ze[o]=new xe(o,1,!1,o.toLowerCase(),null,!0,!0)});function Tt(o,l,x,C){var z=Ze.hasOwnProperty(l)?Ze[l]:null;(z!==null?z.type!==0:C||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(we(l,x,z,C)&&(x=null),C||z===null?Te(l)&&(x===null?o.removeAttribute(l):o.setAttribute(l,""+x)):z.mustUseProperty?o[z.propertyName]=x===null?z.type===3?!1:"":x:(l=z.attributeName,C=z.attributeNamespace,x===null?o.removeAttribute(l):(z=z.type,x=z===3||z===4&&x===!0?"":""+x,C?o.setAttributeNS(C,l,x):o.setAttribute(l,x))))}var Je=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Qe=Symbol.for("react.element"),nt=Symbol.for("react.portal"),yt=Symbol.for("react.fragment"),ze=Symbol.for("react.strict_mode"),$e=Symbol.for("react.profiler"),re=Symbol.for("react.provider"),it=Symbol.for("react.context"),st=Symbol.for("react.forward_ref"),zt=Symbol.for("react.suspense"),tr=Symbol.for("react.suspense_list"),Cr=Symbol.for("react.memo"),xr=Symbol.for("react.lazy"),or=Symbol.for("react.offscreen"),xt=Symbol.iterator;function Pt(o){return o===null||typeof o!="object"?null:(o=xt&&o[xt]||o["@@iterator"],typeof o=="function"?o:null)}var Wt=Object.assign,Oe;function ct(o){if(Oe===void 0)try{throw Error()}catch(x){var l=x.stack.trim().match(/\n( *(at )?)/);Oe=l&&l[1]||""}return`
`+Oe+o}var Ut=!1;function ur(o,l){if(!o||Ut)return"";Ut=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(Et){var C=Et}Reflect.construct(o,[],l)}else{try{l.call()}catch(Et){C=Et}o.call(l.prototype)}else{try{throw Error()}catch(Et){C=Et}o()}}catch(Et){if(Et&&C&&typeof Et.stack=="string"){for(var z=Et.stack.split(`
`),U=C.stack.split(`
`),oe=z.length-1,Ae=U.length-1;1<=oe&&0<=Ae&&z[oe]!==U[Ae];)Ae--;for(;1<=oe&&0<=Ae;oe--,Ae--)if(z[oe]!==U[Ae]){if(oe!==1||Ae!==1)do if(oe--,Ae--,0>Ae||z[oe]!==U[Ae]){var Ge=`
`+z[oe].replace(" at new "," at ");return o.displayName&&Ge.includes("<anonymous>")&&(Ge=Ge.replace("<anonymous>",o.displayName)),Ge}while(1<=oe&&0<=Ae);break}}}finally{Ut=!1,Error.prepareStackTrace=x}return(o=o?o.displayName||o.name:"")?ct(o):""}function At(o){switch(o.tag){case 5:return ct(o.type);case 16:return ct("Lazy");case 13:return ct("Suspense");case 19:return ct("SuspenseList");case 0:case 2:case 15:return o=ur(o.type,!1),o;case 11:return o=ur(o.type.render,!1),o;case 1:return o=ur(o.type,!0),o;default:return""}}function ir(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case yt:return"Fragment";case nt:return"Portal";case $e:return"Profiler";case ze:return"StrictMode";case zt:return"Suspense";case tr:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case it:return(o.displayName||"Context")+".Consumer";case re:return(o._context.displayName||"Context")+".Provider";case st:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case Cr:return l=o.displayName||null,l!==null?l:ir(o.type)||"Memo";case xr:l=o._payload,o=o._init;try{return ir(o(l))}catch{}}return null}function Sr(o){var l=o.type;switch(o.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=l.render,o=o.displayName||o.name||"",l.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ir(l);case 8:return l===ze?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function fr(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function pr(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Qr(o){var l=pr(o)?"checked":"value",x=Object.getOwnPropertyDescriptor(o.constructor.prototype,l),C=""+o[l];if(!o.hasOwnProperty(l)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var z=x.get,U=x.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return z.call(this)},set:function(oe){C=""+oe,U.call(this,oe)}}),Object.defineProperty(o,l,{enumerable:x.enumerable}),{getValue:function(){return C},setValue:function(oe){C=""+oe},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function Tr(o){o._valueTracker||(o._valueTracker=Qr(o))}function tn(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var x=l.getValue(),C="";return o&&(C=pr(o)?o.checked?"true":"false":o.value),o=C,o!==x?(l.setValue(o),!0):!1}function $r(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function br(o,l){var x=l.checked;return Wt({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:x??o._wrapperState.initialChecked})}function nn(o,l){var x=l.defaultValue==null?"":l.defaultValue,C=l.checked!=null?l.checked:l.defaultChecked;x=fr(l.value!=null?l.value:x),o._wrapperState={initialChecked:C,initialValue:x,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function Hr(o,l){l=l.checked,l!=null&&Tt(o,"checked",l,!1)}function dn(o,l){Hr(o,l);var x=fr(l.value),C=l.type;if(x!=null)C==="number"?(x===0&&o.value===""||o.value!=x)&&(o.value=""+x):o.value!==""+x&&(o.value=""+x);else if(C==="submit"||C==="reset"){o.removeAttribute("value");return}l.hasOwnProperty("value")?bn(o,l.type,x):l.hasOwnProperty("defaultValue")&&bn(o,l.type,fr(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(o.defaultChecked=!!l.defaultChecked)}function on(o,l,x){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var C=l.type;if(!(C!=="submit"&&C!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+o._wrapperState.initialValue,x||l===o.value||(o.value=l),o.defaultValue=l}x=o.name,x!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,x!==""&&(o.name=x)}function bn(o,l,x){(l!=="number"||$r(o.ownerDocument)!==o)&&(x==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+x&&(o.defaultValue=""+x))}var sn=Array.isArray;function kn(o,l,x,C){if(o=o.options,l){l={};for(var z=0;z<x.length;z++)l["$"+x[z]]=!0;for(x=0;x<o.length;x++)z=l.hasOwnProperty("$"+o[x].value),o[x].selected!==z&&(o[x].selected=z),z&&C&&(o[x].defaultSelected=!0)}else{for(x=""+fr(x),l=null,z=0;z<o.length;z++){if(o[z].value===x){o[z].selected=!0,C&&(o[z].defaultSelected=!0);return}l!==null||o[z].disabled||(l=o[z])}l!==null&&(l.selected=!0)}}function wr(o,l){if(l.dangerouslySetInnerHTML!=null)throw Error(p(91));return Wt({},l,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function Un(o,l){var x=l.value;if(x==null){if(x=l.children,l=l.defaultValue,x!=null){if(l!=null)throw Error(p(92));if(sn(x)){if(1<x.length)throw Error(p(93));x=x[0]}l=x}l==null&&(l=""),x=l}o._wrapperState={initialValue:fr(x)}}function Wn(o,l){var x=fr(l.value),C=fr(l.defaultValue);x!=null&&(x=""+x,x!==o.value&&(o.value=x),l.defaultValue==null&&o.defaultValue!==x&&(o.defaultValue=x)),C!=null&&(o.defaultValue=""+C)}function Si(o){var l=o.textContent;l===o._wrapperState.initialValue&&l!==""&&l!==null&&(o.value=l)}function Jn(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hn(o,l){return o==null||o==="http://www.w3.org/1999/xhtml"?Jn(l):o==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var Bn,Ji=function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,x,C,z){MSApp.execUnsafeLocalFunction(function(){return o(l,x,C,z)})}:o}(function(o,l){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=l;else{for(Bn=Bn||document.createElement("div"),Bn.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=Bn.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;l.firstChild;)o.appendChild(l.firstChild)}});function Gi(o,l){if(l){var x=o.firstChild;if(x&&x===o.lastChild&&x.nodeType===3){x.nodeValue=l;return}}o.textContent=l}var Vi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ei=["Webkit","ms","Moz","O"];Object.keys(Vi).forEach(function(o){ei.forEach(function(l){l=l+o.charAt(0).toUpperCase()+o.substring(1),Vi[l]=Vi[o]})});function ii(o,l,x){return l==null||typeof l=="boolean"||l===""?"":x||typeof l!="number"||l===0||Vi.hasOwnProperty(o)&&Vi[o]?(""+l).trim():l+"px"}function mo(o,l){o=o.style;for(var x in l)if(l.hasOwnProperty(x)){var C=x.indexOf("--")===0,z=ii(x,l[x],C);x==="float"&&(x="cssFloat"),C?o.setProperty(x,z):o[x]=z}}var et=Wt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function se(o,l){if(l){if(et[o]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(p(137,o));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(p(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(p(61))}if(l.style!=null&&typeof l.style!="object")throw Error(p(62))}}function ae(o,l){if(o.indexOf("-")===-1)return typeof l.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ge=null;function Ie(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Ue=null,fe=null,qe=null;function We(o){if(o=Ho(o)){if(typeof Ue!="function")throw Error(p(280));var l=o.stateNode;l&&(l=eu(l),Ue(o.stateNode,o.type,l))}}function rt(o){fe?qe?qe.push(o):qe=[o]:fe=o}function dt(){if(fe){var o=fe,l=qe;if(qe=fe=null,We(o),l)for(o=0;o<l.length;o++)We(l[o])}}function Xe(o,l){return o(l)}function Lt(){}var Xt=!1;function cr(o,l,x){if(Xt)return o(l,x);Xt=!0;try{return Xe(o,l,x)}finally{Xt=!1,(fe!==null||qe!==null)&&(Lt(),dt())}}function Mr(o,l){var x=o.stateNode;if(x===null)return null;var C=eu(x);if(C===null)return null;x=C[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(C=!C.disabled)||(o=o.type,C=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!C;break e;default:o=!1}if(o)return null;if(x&&typeof x!="function")throw Error(p(231,l,typeof x));return x}var qr=!1;if(u)try{var Nr={};Object.defineProperty(Nr,"passive",{get:function(){qr=!0}}),window.addEventListener("test",Nr,Nr),window.removeEventListener("test",Nr,Nr)}catch{qr=!1}function St(o,l,x,C,z,U,oe,Ae,Ge){var Et=Array.prototype.slice.call(arguments,3);try{l.apply(x,Et)}catch(Yt){this.onError(Yt)}}var wn=!1,yn=null,Sn=!1,Fr=null,Ot={onError:function(o){wn=!0,yn=o}};function Or(o,l,x,C,z,U,oe,Ae,Ge){wn=!1,yn=null,St.apply(Ot,arguments)}function rn(o,l,x,C,z,U,oe,Ae,Ge){if(Or.apply(this,arguments),wn){if(wn){var Et=yn;wn=!1,yn=null}else throw Error(p(198));Sn||(Sn=!0,Fr=Et)}}function Vn(o){var l=o,x=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(x=l.return),o=l.return;while(o)}return l.tag===3?x:null}function Zn(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function Po(o){if(Vn(o)!==o)throw Error(p(188))}function un(o){var l=o.alternate;if(!l){if(l=Vn(o),l===null)throw Error(p(188));return l!==o?null:o}for(var x=o,C=l;;){var z=x.return;if(z===null)break;var U=z.alternate;if(U===null){if(C=z.return,C!==null){x=C;continue}break}if(z.child===U.child){for(U=z.child;U;){if(U===x)return Po(z),o;if(U===C)return Po(z),l;U=U.sibling}throw Error(p(188))}if(x.return!==C.return)x=z,C=U;else{for(var oe=!1,Ae=z.child;Ae;){if(Ae===x){oe=!0,x=z,C=U;break}if(Ae===C){oe=!0,C=z,x=U;break}Ae=Ae.sibling}if(!oe){for(Ae=U.child;Ae;){if(Ae===x){oe=!0,x=U,C=z;break}if(Ae===C){oe=!0,C=U,x=z;break}Ae=Ae.sibling}if(!oe)throw Error(p(189))}}if(x.alternate!==C)throw Error(p(190))}if(x.tag!==3)throw Error(p(188));return x.stateNode.current===x?o:l}function Ys(o){return o=un(o),o!==null?Qs(o):null}function Qs(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var l=Qs(o);if(l!==null)return l;o=o.sibling}return null}var Ps=m.unstable_scheduleCallback,el=m.unstable_cancelCallback,Zo=m.unstable_shouldYield,La=m.unstable_requestPaint,cn=m.unstable_now,li=m.unstable_getCurrentPriorityLevel,qn=m.unstable_ImmediatePriority,Da=m.unstable_UserBlockingPriority,is=m.unstable_NormalPriority,Kl=m.unstable_LowPriority,Do=m.unstable_IdlePriority,eo=null,os=null;function tl(o){if(os&&typeof os.onCommitFiberRoot=="function")try{os.onCommitFiberRoot(eo,o,void 0,(o.current.flags&128)===128)}catch{}}var go=Math.clz32?Math.clz32:pu,ga=Math.log,Xl=Math.LN2;function pu(o){return o>>>=0,o===0?32:31-(ga(o)/Xl|0)|0}var ya=64,Yl=4194304;function Oa(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function Es(o,l){var x=o.pendingLanes;if(x===0)return 0;var C=0,z=o.suspendedLanes,U=o.pingedLanes,oe=x&268435455;if(oe!==0){var Ae=oe&~z;Ae!==0?C=Oa(Ae):(U&=oe,U!==0&&(C=Oa(U)))}else oe=x&~z,oe!==0?C=Oa(oe):U!==0&&(C=Oa(U));if(C===0)return 0;if(l!==0&&l!==C&&(l&z)===0&&(z=C&-C,U=l&-l,z>=U||z===16&&(U&4194240)!==0))return l;if((C&4)!==0&&(C|=x&16),l=o.entangledLanes,l!==0)for(o=o.entanglements,l&=C;0<l;)x=31-go(l),z=1<<x,C|=o[x],l&=~z;return C}function B(o,l){switch(o){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Q(o,l){for(var x=o.suspendedLanes,C=o.pingedLanes,z=o.expirationTimes,U=o.pendingLanes;0<U;){var oe=31-go(U),Ae=1<<oe,Ge=z[oe];Ge===-1?((Ae&x)===0||(Ae&C)!==0)&&(z[oe]=B(Ae,l)):Ge<=l&&(o.expiredLanes|=Ae),U&=~Ae}}function he(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function Ee(){var o=ya;return ya<<=1,(ya&4194240)===0&&(ya=64),o}function gt(o){for(var l=[],x=0;31>x;x++)l.push(o);return l}function ut(o,l,x){o.pendingLanes|=l,l!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,l=31-go(l),o[l]=x}function Dt(o,l){var x=o.pendingLanes&~l;o.pendingLanes=l,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=l,o.mutableReadLanes&=l,o.entangledLanes&=l,l=o.entanglements;var C=o.eventTimes;for(o=o.expirationTimes;0<x;){var z=31-go(x),U=1<<z;l[z]=0,C[z]=-1,o[z]=-1,x&=~U}}function sr(o,l){var x=o.entangledLanes|=l;for(o=o.entanglements;x;){var C=31-go(x),z=1<<C;z&l|o[C]&l&&(o[C]|=l),x&=~z}}var mr=0;function kr(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var yr,Nn,yi,to,Jr,ss=!1,Eo=[],Io=null,ui=null,ci=null,Dn=new Map,Pi=new Map,On=[],mu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Oo(o,l){switch(o){case"focusin":case"focusout":Io=null;break;case"dragenter":case"dragleave":ui=null;break;case"mouseover":case"mouseout":ci=null;break;case"pointerover":case"pointerout":Dn.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pi.delete(l.pointerId)}}function ro(o,l,x,C,z,U){return o===null||o.nativeEvent!==U?(o={blockedOn:l,domEventName:x,eventSystemFlags:C,nativeEvent:U,targetContainers:[z]},l!==null&&(l=Ho(l),l!==null&&Nn(l)),o):(o.eventSystemFlags|=C,l=o.targetContainers,z!==null&&l.indexOf(z)===-1&&l.push(z),o)}function as(o,l,x,C,z){switch(l){case"focusin":return Io=ro(Io,o,l,x,C,z),!0;case"dragenter":return ui=ro(ui,o,l,x,C,z),!0;case"mouseover":return ci=ro(ci,o,l,x,C,z),!0;case"pointerover":var U=z.pointerId;return Dn.set(U,ro(Dn.get(U)||null,o,l,x,C,z)),!0;case"gotpointercapture":return U=z.pointerId,Pi.set(U,ro(Pi.get(U)||null,o,l,x,C,z)),!0}return!1}function ls(o){var l=dl(o.target);if(l!==null){var x=Vn(l);if(x!==null){if(l=x.tag,l===13){if(l=Zn(x),l!==null){o.blockedOn=l,Jr(o.priority,function(){yi(x)});return}}else if(l===3&&x.stateNode.current.memoizedState.isDehydrated){o.blockedOn=x.tag===3?x.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Ln(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var x=_a(o.domEventName,o.eventSystemFlags,l[0],o.nativeEvent);if(x===null){x=o.nativeEvent;var C=new x.constructor(x.type,x);ge=C,x.target.dispatchEvent(C),ge=null}else return l=Ho(x),l!==null&&Nn(l),o.blockedOn=x,!1;l.shift()}return!0}function hi(o,l,x){Ln(o)&&x.delete(l)}function Lr(){ss=!1,Io!==null&&Ln(Io)&&(Io=null),ui!==null&&Ln(ui)&&(ui=null),ci!==null&&Ln(ci)&&(ci=null),Dn.forEach(hi),Pi.forEach(hi)}function gr(o,l){o.blockedOn===l&&(o.blockedOn=null,ss||(ss=!0,m.unstable_scheduleCallback(m.unstable_NormalPriority,Lr)))}function Pn(o){function l(z){return gr(z,o)}if(0<Eo.length){gr(Eo[0],o);for(var x=1;x<Eo.length;x++){var C=Eo[x];C.blockedOn===o&&(C.blockedOn=null)}}for(Io!==null&&gr(Io,o),ui!==null&&gr(ui,o),ci!==null&&gr(ci,o),Dn.forEach(l),Pi.forEach(l),x=0;x<On.length;x++)C=On[x],C.blockedOn===o&&(C.blockedOn=null);for(;0<On.length&&(x=On[0],x.blockedOn===null);)ls(x),x.blockedOn===null&&On.shift()}var Kr=Je.ReactCurrentBatchConfig,us=!0;function no(o,l,x,C){var z=mr,U=Kr.transition;Kr.transition=null;try{mr=1,gu(o,l,x,C)}finally{mr=z,Kr.transition=U}}function rl(o,l,x,C){var z=mr,U=Kr.transition;Kr.transition=null;try{mr=4,gu(o,l,x,C)}finally{mr=z,Kr.transition=U}}function gu(o,l,x,C){if(us){var z=_a(o,l,x,C);if(z===null)jc(o,l,C,Fa,x),Oo(o,C);else if(as(z,o,l,x,C))C.stopPropagation();else if(Oo(o,C),l&4&&-1<mu.indexOf(o)){for(;z!==null;){var U=Ho(z);if(U!==null&&yr(U),U=_a(o,l,x,C),U===null&&jc(o,l,C,Fa,x),U===z)break;z=U}z!==null&&C.stopPropagation()}else jc(o,l,C,null,x)}}var Fa=null;function _a(o,l,x,C){if(Fa=null,o=Ie(C),o=dl(o),o!==null)if(l=Vn(o),l===null)o=null;else if(x=l.tag,x===13){if(o=Zn(l),o!==null)return o;o=null}else if(x===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null);return Fa=o,null}function Ql(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(li()){case qn:return 1;case Da:return 4;case is:case Kl:return 16;case Do:return 536870912;default:return 16}default:return 16}}var di=null,nl=null,cs=null;function il(){if(cs)return cs;var o,l=nl,x=l.length,C,z="value"in di?di.value:di.textContent,U=z.length;for(o=0;o<x&&l[o]===z[o];o++);var oe=x-o;for(C=1;C<=oe&&l[x-C]===z[U-C];C++);return cs=z.slice(o,1<C?1-C:void 0)}function _i(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function Fi(){return!0}function Ba(){return!1}function Ai(o){function l(x,C,z,U,oe){this._reactName=x,this._targetInst=z,this.type=C,this.nativeEvent=U,this.target=oe,this.currentTarget=null;for(var Ae in o)o.hasOwnProperty(Ae)&&(x=o[Ae],this[Ae]=x?x(U):U[Ae]);return this.isDefaultPrevented=(U.defaultPrevented!=null?U.defaultPrevented:U.returnValue===!1)?Fi:Ba,this.isPropagationStopped=Ba,this}return Wt(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var x=this.nativeEvent;x&&(x.preventDefault?x.preventDefault():typeof x.returnValue!="unknown"&&(x.returnValue=!1),this.isDefaultPrevented=Fi)},stopPropagation:function(){var x=this.nativeEvent;x&&(x.stopPropagation?x.stopPropagation():typeof x.cancelBubble!="unknown"&&(x.cancelBubble=!0),this.isPropagationStopped=Fi)},persist:function(){},isPersistent:Fi}),l}var Ei={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},va=Ai(Ei),ol=Wt({},Ei,{view:0,detail:0}),Vu=Ai(ol),yo,Bi,Ri,hs=Wt({},ol,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ms,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Ri&&(Ri&&o.type==="mousemove"?(yo=o.screenX-Ri.screenX,Bi=o.screenY-Ri.screenY):Bi=yo=0,Ri=o),yo)},movementY:function(o){return"movementY"in o?o.movementY:Bi}}),Na=Ai(hs),Is=Wt({},hs,{dataTransfer:0}),Mo=Ai(Is),Zi=Wt({},ol,{relatedTarget:0}),Kn=Ai(Zi),$a=Wt({},Ei,{animationName:0,elapsedTime:0,pseudoElement:0}),Zu=Ai($a),Bh=Wt({},Ei,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),yu=Ai(Bh),Nh=Wt({},Ei,{data:0}),_u=Ai(Nh),sl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Al={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ja(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=Al[o])?!!l[o]:!1}function Ms(){return ja}var Gu=Wt({},ol,{key:function(o){if(o.key){var l=sl[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=_i(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?kl[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ms,charCode:function(o){return o.type==="keypress"?_i(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?_i(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Wu=Ai(Gu),$=Wt({},hs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),q=Ai($),ue=Wt({},ol,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ms}),Pe=Ai(ue),_t=Wt({},Ei,{propertyName:0,elapsedTime:0,pseudoElement:0}),ot=Ai(_t),Nt=Wt({},hs,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),ar=Ai(Nt),Br=[9,13,27,32],pn=u&&"CompositionEvent"in window,Xr=null;u&&"documentMode"in document&&(Xr=document.documentMode);var fi=u&&"TextEvent"in window&&!Xr,Fo=u&&(!pn||Xr&&8<Xr&&11>=Xr),ks=" ",ds=!1;function Js(o,l){switch(o){case"keyup":return Br.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zc(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var al=!1;function ll(o,l){switch(o){case"compositionend":return zc(l);case"keypress":return l.which!==32?null:(ds=!0,ks);case"textInput":return o=l.data,o===ks&&ds?null:o;default:return null}}function uf(o,l){if(al)return o==="compositionend"||!pn&&Js(o,l)?(o=il(),cs=nl=di=null,al=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Fo&&l.locale!=="ko"?null:l.data;default:return null}}var $h={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jh(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!$h[o.type]:l==="textarea"}function Id(o,l,x,C){rt(C),l=Cu(l,"onChange"),0<l.length&&(x=new va("onChange","change",null,x,C),o.push({event:x,listeners:l}))}var ea=null,Jl=null;function cf(o){Ad(o,0)}function Lc(o){var l=gn(o);if(tn(l))return o}function hf(o,l){if(o==="change")return l}var Tn=!1;if(u){var io;if(u){var Dc="oninput"in document;if(!Dc){var Uh=document.createElement("div");Uh.setAttribute("oninput","return;"),Dc=typeof Uh.oninput=="function"}io=Dc}else io=!1;Tn=io&&(!document.documentMode||9<document.documentMode)}function Vh(){ea&&(ea.detachEvent("onpropertychange",Md),Jl=ea=null)}function Md(o){if(o.propertyName==="value"&&Lc(Jl)){var l=[];Id(l,Jl,o,Ie(o)),cr(cf,l)}}function kd(o,l,x){o==="focusin"?(Vh(),ea=l,Jl=x,ea.attachEvent("onpropertychange",Md)):o==="focusout"&&Vh()}function Hu(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Lc(Jl)}function vu(o,l){if(o==="click")return Lc(l)}function tt(o,l){if(o==="input"||o==="change")return Lc(l)}function Bt(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var wt=typeof Object.is=="function"?Object.is:Bt;function Ir(o,l){if(wt(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var x=Object.keys(o),C=Object.keys(l);if(x.length!==C.length)return!1;for(C=0;C<x.length;C++){var z=x[C];if(!J.call(l,z)||!wt(o[z],l[z]))return!1}return!0}function mn(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Xn(o,l){var x=mn(o);o=0;for(var C;x;){if(x.nodeType===3){if(C=o+x.textContent.length,o<=l&&C>=l)return{node:x,offset:l-o};o=C}e:{for(;x;){if(x.nextSibling){x=x.nextSibling;break e}x=x.parentNode}x=void 0}x=mn(x)}}function oo(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?oo(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function ti(){for(var o=window,l=$r();l instanceof o.HTMLIFrameElement;){try{var x=typeof l.contentWindow.location.href=="string"}catch{x=!1}if(x)o=l.contentWindow;else break;l=$r(o.document)}return l}function xu(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}function Zh(o){var l=ti(),x=o.focusedElem,C=o.selectionRange;if(l!==x&&x&&x.ownerDocument&&oo(x.ownerDocument.documentElement,x)){if(C!==null&&xu(x)){if(l=C.start,o=C.end,o===void 0&&(o=l),"selectionStart"in x)x.selectionStart=l,x.selectionEnd=Math.min(o,x.value.length);else if(o=(l=x.ownerDocument||document)&&l.defaultView||window,o.getSelection){o=o.getSelection();var z=x.textContent.length,U=Math.min(C.start,z);C=C.end===void 0?U:Math.min(C.end,z),!o.extend&&U>C&&(z=C,C=U,U=z),z=Xn(x,U);var oe=Xn(x,C);z&&oe&&(o.rangeCount!==1||o.anchorNode!==z.node||o.anchorOffset!==z.offset||o.focusNode!==oe.node||o.focusOffset!==oe.offset)&&(l=l.createRange(),l.setStart(z.node,z.offset),o.removeAllRanges(),U>C?(o.addRange(l),o.extend(oe.node,oe.offset)):(l.setEnd(oe.node,oe.offset),o.addRange(l)))}}for(l=[],o=x;o=o.parentNode;)o.nodeType===1&&l.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<l.length;x++)o=l[x],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var ta=u&&"documentMode"in document&&11>=document.documentMode,As=null,Oc=null,Rs=null,Go=!1;function Fc(o,l,x){var C=x.window===x?x.document:x.nodeType===9?x:x.ownerDocument;Go||As==null||As!==$r(C)||(C=As,"selectionStart"in C&&xu(C)?C={start:C.selectionStart,end:C.selectionEnd}:(C=(C.ownerDocument&&C.ownerDocument.defaultView||window).getSelection(),C={anchorNode:C.anchorNode,anchorOffset:C.anchorOffset,focusNode:C.focusNode,focusOffset:C.focusOffset}),Rs&&Ir(Rs,C)||(Rs=C,C=Cu(Oc,"onSelect"),0<C.length&&(l=new va("onSelect","select",null,l,x),o.push({event:l,listeners:C}),l.target=As)))}function Gn(o,l){var x={};return x[o.toLowerCase()]=l.toLowerCase(),x["Webkit"+o]="webkit"+l,x["Moz"+o]="moz"+l,x}var bu={animationend:Gn("Animation","AnimationEnd"),animationiteration:Gn("Animation","AnimationIteration"),animationstart:Gn("Animation","AnimationStart"),transitionend:Gn("Transition","TransitionEnd")},Rl={},wu={};u&&(wu=document.createElement("div").style,"AnimationEvent"in window||(delete bu.animationend.animation,delete bu.animationiteration.animation,delete bu.animationstart.animation),"TransitionEvent"in window||delete bu.transitionend.transition);function qu(o){if(Rl[o])return Rl[o];if(!bu[o])return o;var l=bu[o],x;for(x in l)if(l.hasOwnProperty(x)&&x in wu)return Rl[o]=l[x];return o}var Bc=qu("animationend"),dh=qu("animationiteration"),Su=qu("animationstart"),ra=qu("transitionend"),zl=new Map,Gh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function na(o,l){zl.set(o,l),O(l,[o])}for(var xn=0;xn<Gh.length;xn++){var Ku=Gh[xn],Xu=Ku.toLowerCase(),Wh=Ku[0].toUpperCase()+Ku.slice(1);na(Xu,"on"+Wh)}na(Bc,"onAnimationEnd"),na(dh,"onAnimationIteration"),na(Su,"onAnimationStart"),na("dblclick","onDoubleClick"),na("focusin","onFocus"),na("focusout","onBlur"),na(ra,"onTransitionEnd"),M("onMouseEnter",["mouseout","mouseover"]),M("onMouseLeave",["mouseout","mouseover"]),M("onPointerEnter",["pointerout","pointerover"]),M("onPointerLeave",["pointerout","pointerover"]),O("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),O("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),O("onBeforeInput",["compositionend","keypress","textInput","paste"]),O("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),O("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),O("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yu=new Set("cancel close invalid load scroll toggle".split(" ").concat(xa));function fh(o,l,x){var C=o.type||"unknown-event";o.currentTarget=x,rn(C,l,void 0,o),o.currentTarget=null}function Ad(o,l){l=(l&4)!==0;for(var x=0;x<o.length;x++){var C=o[x],z=C.event;C=C.listeners;e:{var U=void 0;if(l)for(var oe=C.length-1;0<=oe;oe--){var Ae=C[oe],Ge=Ae.instance,Et=Ae.currentTarget;if(Ae=Ae.listener,Ge!==U&&z.isPropagationStopped())break e;fh(z,Ae,Et),U=Ge}else for(oe=0;oe<C.length;oe++){if(Ae=C[oe],Ge=Ae.instance,Et=Ae.currentTarget,Ae=Ae.listener,Ge!==U&&z.isPropagationStopped())break e;fh(z,Ae,Et),U=Ge}}}if(Sn)throw o=Fr,Sn=!1,Fr=null,o}function zi(o,l){var x=l[Mu];x===void 0&&(x=l[Mu]=new Set);var C=o+"__bubble";x.has(C)||($c(l,o,2,!1),x.add(C))}function Nc(o,l,x){var C=0;l&&(C|=4),$c(x,o,C,l)}var ul="_reactListening"+Math.random().toString(36).slice(2);function cl(o){if(!o[ul]){o[ul]=!0,T.forEach(function(x){x!=="selectionchange"&&(Yu.has(x)||Nc(x,!1,o),Nc(x,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[ul]||(l[ul]=!0,Nc("selectionchange",!1,l))}}function $c(o,l,x,C){switch(Ql(l)){case 1:var z=no;break;case 4:z=rl;break;default:z=gu}x=z.bind(null,l,x,o),z=void 0,!qr||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(z=!0),C?z!==void 0?o.addEventListener(l,x,{capture:!0,passive:z}):o.addEventListener(l,x,!0):z!==void 0?o.addEventListener(l,x,{passive:z}):o.addEventListener(l,x,!1)}function jc(o,l,x,C,z){var U=C;if((l&1)===0&&(l&2)===0&&C!==null)e:for(;;){if(C===null)return;var oe=C.tag;if(oe===3||oe===4){var Ae=C.stateNode.containerInfo;if(Ae===z||Ae.nodeType===8&&Ae.parentNode===z)break;if(oe===4)for(oe=C.return;oe!==null;){var Ge=oe.tag;if((Ge===3||Ge===4)&&(Ge=oe.stateNode.containerInfo,Ge===z||Ge.nodeType===8&&Ge.parentNode===z))return;oe=oe.return}for(;Ae!==null;){if(oe=dl(Ae),oe===null)return;if(Ge=oe.tag,Ge===5||Ge===6){C=U=oe;continue e}Ae=Ae.parentNode}}C=C.return}cr(function(){var Et=U,Yt=Ie(x),nr=[];e:{var Qt=zl.get(o);if(Qt!==void 0){var Pr=va,Dr=o;switch(o){case"keypress":if(_i(x)===0)break e;case"keydown":case"keyup":Pr=Wu;break;case"focusin":Dr="focus",Pr=Kn;break;case"focusout":Dr="blur",Pr=Kn;break;case"beforeblur":case"afterblur":Pr=Kn;break;case"click":if(x.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Pr=Na;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Pr=Mo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Pr=Pe;break;case Bc:case dh:case Su:Pr=Zu;break;case ra:Pr=ot;break;case"scroll":Pr=Vu;break;case"wheel":Pr=ar;break;case"copy":case"cut":case"paste":Pr=yu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Pr=q}var jr=(l&4)!==0,ho=!jr&&o==="scroll",ft=jr?Qt!==null?Qt+"Capture":null:Qt;jr=[];for(var Ke=Et,vt;Ke!==null;){vt=Ke;var hr=vt.stateNode;if(vt.tag===5&&hr!==null&&(vt=hr,ft!==null&&(hr=Mr(Ke,ft),hr!=null&&jr.push(Tu(Ke,hr,vt)))),ho)break;Ke=Ke.return}0<jr.length&&(Qt=new Pr(Qt,Dr,null,x,Yt),nr.push({event:Qt,listeners:jr}))}}if((l&7)===0){e:{if(Qt=o==="mouseover"||o==="pointerover",Pr=o==="mouseout"||o==="pointerout",Qt&&x!==ge&&(Dr=x.relatedTarget||x.fromElement)&&(dl(Dr)||Dr[zs]))break e;if((Pr||Qt)&&(Qt=Yt.window===Yt?Yt:(Qt=Yt.ownerDocument)?Qt.defaultView||Qt.parentWindow:window,Pr?(Dr=x.relatedTarget||x.toElement,Pr=Et,Dr=Dr?dl(Dr):null,Dr!==null&&(ho=Vn(Dr),Dr!==ho||Dr.tag!==5&&Dr.tag!==6)&&(Dr=null)):(Pr=null,Dr=Et),Pr!==Dr)){if(jr=Na,hr="onMouseLeave",ft="onMouseEnter",Ke="mouse",(o==="pointerout"||o==="pointerover")&&(jr=q,hr="onPointerLeave",ft="onPointerEnter",Ke="pointer"),ho=Pr==null?Qt:gn(Pr),vt=Dr==null?Qt:gn(Dr),Qt=new jr(hr,Ke+"leave",Pr,x,Yt),Qt.target=ho,Qt.relatedTarget=vt,hr=null,dl(Yt)===Et&&(jr=new jr(ft,Ke+"enter",Dr,x,Yt),jr.target=vt,jr.relatedTarget=ho,hr=jr),ho=hr,Pr&&Dr)t:{for(jr=Pr,ft=Dr,Ke=0,vt=jr;vt;vt=Ll(vt))Ke++;for(vt=0,hr=ft;hr;hr=Ll(hr))vt++;for(;0<Ke-vt;)jr=Ll(jr),Ke--;for(;0<vt-Ke;)ft=Ll(ft),vt--;for(;Ke--;){if(jr===ft||ft!==null&&jr===ft.alternate)break t;jr=Ll(jr),ft=Ll(ft)}jr=null}else jr=null;Pr!==null&&Ni(nr,Qt,Pr,jr,!1),Dr!==null&&ho!==null&&Ni(nr,ho,Dr,jr,!0)}}e:{if(Qt=Et?gn(Et):window,Pr=Qt.nodeName&&Qt.nodeName.toLowerCase(),Pr==="select"||Pr==="input"&&Qt.type==="file")var Vr=hf;else if(jh(Qt))if(Tn)Vr=tt;else{Vr=Hu;var ln=kd}else(Pr=Qt.nodeName)&&Pr.toLowerCase()==="input"&&(Qt.type==="checkbox"||Qt.type==="radio")&&(Vr=vu);if(Vr&&(Vr=Vr(o,Et))){Id(nr,Vr,x,Yt);break e}ln&&ln(o,Qt,Et),o==="focusout"&&(ln=Qt._wrapperState)&&ln.controlled&&Qt.type==="number"&&bn(Qt,"number",Qt.value)}switch(ln=Et?gn(Et):window,o){case"focusin":(jh(ln)||ln.contentEditable==="true")&&(As=ln,Oc=Et,Rs=null);break;case"focusout":Rs=Oc=As=null;break;case"mousedown":Go=!0;break;case"contextmenu":case"mouseup":case"dragend":Go=!1,Fc(nr,x,Yt);break;case"selectionchange":if(ta)break;case"keydown":case"keyup":Fc(nr,x,Yt)}var Yr;if(pn)e:{switch(o){case"compositionstart":var fn="onCompositionStart";break e;case"compositionend":fn="onCompositionEnd";break e;case"compositionupdate":fn="onCompositionUpdate";break e}fn=void 0}else al?Js(o,x)&&(fn="onCompositionEnd"):o==="keydown"&&x.keyCode===229&&(fn="onCompositionStart");fn&&(Fo&&x.locale!=="ko"&&(al||fn!=="onCompositionStart"?fn==="onCompositionEnd"&&al&&(Yr=il()):(di=Yt,nl="value"in di?di.value:di.textContent,al=!0)),ln=Cu(Et,fn),0<ln.length&&(fn=new _u(fn,o,null,x,Yt),nr.push({event:fn,listeners:ln}),Yr?fn.data=Yr:(Yr=zc(x),Yr!==null&&(fn.data=Yr)))),(Yr=fi?ll(o,x):uf(o,x))&&(Et=Cu(Et,"onBeforeInput"),0<Et.length&&(Yt=new _u("onBeforeInput","beforeinput",null,x,Yt),nr.push({event:Yt,listeners:Et}),Yt.data=Yr))}Ad(nr,l)})}function Tu(o,l,x){return{instance:o,listener:l,currentTarget:x}}function Cu(o,l){for(var x=l+"Capture",C=[];o!==null;){var z=o,U=z.stateNode;z.tag===5&&U!==null&&(z=U,U=Mr(o,x),U!=null&&C.unshift(Tu(o,U,z)),U=Mr(o,l),U!=null&&C.push(Tu(o,U,z))),o=o.return}return C}function Ll(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function Ni(o,l,x,C,z){for(var U=l._reactName,oe=[];x!==null&&x!==C;){var Ae=x,Ge=Ae.alternate,Et=Ae.stateNode;if(Ge!==null&&Ge===C)break;Ae.tag===5&&Et!==null&&(Ae=Et,z?(Ge=Mr(x,U),Ge!=null&&oe.unshift(Tu(x,Ge,Ae))):z||(Ge=Mr(x,U),Ge!=null&&oe.push(Tu(x,Ge,Ae)))),x=x.return}oe.length!==0&&o.push({event:l,listeners:oe})}var Bo=/\r\n?/g,ph=/\u0000|\uFFFD/g;function mh(o){return(typeof o=="string"?o:""+o).replace(Bo,`
`).replace(ph,"")}function Uc(o,l,x){if(l=mh(l),mh(o)!==l&&x)throw Error(p(425))}function Qu(){}var Ju=null,Pu=null;function Vc(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var hl=typeof setTimeout=="function"?setTimeout:void 0,Eu=typeof clearTimeout=="function"?clearTimeout:void 0,ec=typeof Promise=="function"?Promise:void 0,Iu=typeof queueMicrotask=="function"?queueMicrotask:typeof ec<"u"?function(o){return ec.resolve(null).then(o).catch(Ti)}:hl;function Ti(o){setTimeout(function(){throw o})}function Dl(o,l){var x=l,C=0;do{var z=x.nextSibling;if(o.removeChild(x),z&&z.nodeType===8)if(x=z.data,x==="/$"){if(C===0){o.removeChild(z),Pn(l);return}C--}else x!=="$"&&x!=="$?"&&x!=="$!"||C++;x=z}while(x);Pn(l)}function _o(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return o}function Hh(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var x=o.data;if(x==="$"||x==="$!"||x==="$?"){if(l===0)return o;l--}else x==="/$"&&l++}o=o.previousSibling}return null}var Ol=Math.random().toString(36).slice(2),Ua="__reactFiber$"+Ol,Wo="__reactProps$"+Ol,zs="__reactContainer$"+Ol,Mu="__reactEvents$"+Ol,ce="__reactListeners$"+Ol,tc="__reactHandles$"+Ol;function dl(o){var l=o[Ua];if(l)return l;for(var x=o.parentNode;x;){if(l=x[zs]||x[Ua]){if(x=l.alternate,l.child!==null||x!==null&&x.child!==null)for(o=Hh(o);o!==null;){if(x=o[Ua])return x;o=Hh(o)}return l}o=x,x=o.parentNode}return null}function Ho(o){return o=o[Ua]||o[zs],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function gn(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(p(33))}function eu(o){return o[Wo]||null}var so=[],fl=-1;function fs(o){return{current:o}}function Ii(o){0>fl||(o.current=so[fl],so[fl]=null,fl--)}function Ci(o,l){fl++,so[fl]=o.current,o.current=l}var ba={},No=fs(ba),qo=fs(!1),ps=ba;function pl(o,l){var x=o.type.contextTypes;if(!x)return ba;var C=o.stateNode;if(C&&C.__reactInternalMemoizedUnmaskedChildContext===l)return C.__reactInternalMemoizedMaskedChildContext;var z={},U;for(U in x)z[U]=l[U];return C&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=l,o.__reactInternalMemoizedMaskedChildContext=z),z}function Ls(o){return o=o.childContextTypes,o!=null}function ko(){Ii(qo),Ii(No)}function Va(o,l,x){if(No.current!==ba)throw Error(p(168));Ci(No,l),Ci(qo,x)}function rc(o,l,x){var C=o.stateNode;if(l=l.childContextTypes,typeof C.getChildContext!="function")return x;C=C.getChildContext();for(var z in C)if(!(z in l))throw Error(p(108,Sr(o)||"Unknown",z));return Wt({},x,C)}function Wi(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||ba,ps=No.current,Ci(No,o),Ci(qo,qo.current),!0}function nc(o,l,x){var C=o.stateNode;if(!C)throw Error(p(169));x?(o=rc(o,l,ps),C.__reactInternalMemoizedMergedChildContext=o,Ii(qo),Ii(No),Ci(No,o)):Ii(qo),Ci(qo,x)}var Za=null,qh=!1,gh=!1;function yh(o){Za===null?Za=[o]:Za.push(o)}function tu(o){qh=!0,yh(o)}function wa(){if(!gh&&Za!==null){gh=!0;var o=0,l=mr;try{var x=Za;for(mr=1;o<x.length;o++){var C=x[o];do C=C(!0);while(C!==null)}Za=null,qh=!1}catch(z){throw Za!==null&&(Za=Za.slice(o+1)),Ps(qn,wa),z}finally{mr=l,gh=!1}}return null}var Ds=[],lr=0,ic=null,oc=0,Sa=[],Ko=0,ml=null,Ga=1,hn="";function Fl(o,l){Ds[lr++]=oc,Ds[lr++]=ic,ic=o,oc=l}function df(o,l,x){Sa[Ko++]=Ga,Sa[Ko++]=hn,Sa[Ko++]=ml,ml=o;var C=Ga;o=hn;var z=32-go(C)-1;C&=~(1<<z),x+=1;var U=32-go(l)+z;if(30<U){var oe=z-z%5;U=(C&(1<<oe)-1).toString(32),C>>=oe,z-=oe,Ga=1<<32-go(l)+z|x<<z|C,hn=U+o}else Ga=1<<U|x<<z|C,hn=o}function sc(o){o.return!==null&&(Fl(o,1),df(o,1,0))}function ku(o){for(;o===ic;)ic=Ds[--lr],Ds[lr]=null,oc=Ds[--lr],Ds[lr]=null;for(;o===ml;)ml=Sa[--Ko],Sa[Ko]=null,hn=Sa[--Ko],Sa[Ko]=null,Ga=Sa[--Ko],Sa[Ko]=null}var Xo=null,Os=null,vi=!1,Fs=null;function Bl(o,l){var x=Ya(5,null,null,0);x.elementType="DELETED",x.stateNode=l,x.return=o,l=o.deletions,l===null?(o.deletions=[x],o.flags|=16):l.push(x)}function ac(o,l){switch(o.tag){case 5:var x=o.type;return l=l.nodeType!==1||x.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(o.stateNode=l,Xo=o,Os=_o(l.firstChild),!0):!1;case 6:return l=o.pendingProps===""||l.nodeType!==3?null:l,l!==null?(o.stateNode=l,Xo=o,Os=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(x=ml!==null?{id:Ga,overflow:hn}:null,o.memoizedState={dehydrated:l,treeContext:x,retryLane:1073741824},x=Ya(18,null,null,0),x.stateNode=l,x.return=o,o.child=x,Xo=o,Os=null,!0):!1;default:return!1}}function ru(o){return(o.mode&1)!==0&&(o.flags&128)===0}function ia(o){if(vi){var l=Os;if(l){var x=l;if(!ac(o,l)){if(ru(o))throw Error(p(418));l=_o(x.nextSibling);var C=Xo;l&&ac(o,l)?Bl(C,x):(o.flags=o.flags&-4097|2,vi=!1,Xo=o)}}else{if(ru(o))throw Error(p(418));o.flags=o.flags&-4097|2,vi=!1,Xo=o}}}function Nl(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;Xo=o}function oi(o){if(o!==Xo)return!1;if(!vi)return Nl(o),vi=!0,!1;var l;if((l=o.tag!==3)&&!(l=o.tag!==5)&&(l=o.type,l=l!=="head"&&l!=="body"&&!Vc(o.type,o.memoizedProps)),l&&(l=Os)){if(ru(o))throw lc(),Error(p(418));for(;l;)Bl(o,l),l=_o(l.nextSibling)}if(Nl(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(p(317));e:{for(o=o.nextSibling,l=0;o;){if(o.nodeType===8){var x=o.data;if(x==="/$"){if(l===0){Os=_o(o.nextSibling);break e}l--}else x!=="$"&&x!=="$!"&&x!=="$?"||l++}o=o.nextSibling}Os=null}}else Os=Xo?_o(o.stateNode.nextSibling):null;return!0}function lc(){for(var o=Os;o;)o=_o(o.nextSibling)}function Wa(){Os=Xo=null,vi=!1}function gl(o){Fs===null?Fs=[o]:Fs.push(o)}var Rd=Je.ReactCurrentBatchConfig;function Zc(o,l,x){if(o=x.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(x._owner){if(x=x._owner,x){if(x.tag!==1)throw Error(p(309));var C=x.stateNode}if(!C)throw Error(p(147,o));var z=C,U=""+o;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===U?l.ref:(l=function(oe){var Ae=z.refs;oe===null?delete Ae[U]:Ae[U]=oe},l._stringRef=U,l)}if(typeof o!="string")throw Error(p(284));if(!x._owner)throw Error(p(290,o))}return o}function uc(o,l){throw o=Object.prototype.toString.call(l),Error(p(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o))}function ms(o){var l=o._init;return l(o._payload)}function Gc(o){function l(ft,Ke){if(o){var vt=ft.deletions;vt===null?(ft.deletions=[Ke],ft.flags|=16):vt.push(Ke)}}function x(ft,Ke){if(!o)return null;for(;Ke!==null;)l(ft,Ke),Ke=Ke.sibling;return null}function C(ft,Ke){for(ft=new Map;Ke!==null;)Ke.key!==null?ft.set(Ke.key,Ke):ft.set(Ke.index,Ke),Ke=Ke.sibling;return ft}function z(ft,Ke){return ft=Sl(ft,Ke),ft.index=0,ft.sibling=null,ft}function U(ft,Ke,vt){return ft.index=vt,o?(vt=ft.alternate,vt!==null?(vt=vt.index,vt<Ke?(ft.flags|=2,Ke):vt):(ft.flags|=2,Ke)):(ft.flags|=1048576,Ke)}function oe(ft){return o&&ft.alternate===null&&(ft.flags|=2),ft}function Ae(ft,Ke,vt,hr){return Ke===null||Ke.tag!==6?(Ke=sp(vt,ft.mode,hr),Ke.return=ft,Ke):(Ke=z(Ke,vt),Ke.return=ft,Ke)}function Ge(ft,Ke,vt,hr){var Vr=vt.type;return Vr===yt?Yt(ft,Ke,vt.props.children,hr,vt.key):Ke!==null&&(Ke.elementType===Vr||typeof Vr=="object"&&Vr!==null&&Vr.$$typeof===xr&&ms(Vr)===Ke.type)?(hr=z(Ke,vt.props),hr.ref=Zc(ft,Ke,vt),hr.return=ft,hr):(hr=pd(vt.type,vt.key,vt.props,null,ft.mode,hr),hr.ref=Zc(ft,Ke,vt),hr.return=ft,hr)}function Et(ft,Ke,vt,hr){return Ke===null||Ke.tag!==4||Ke.stateNode.containerInfo!==vt.containerInfo||Ke.stateNode.implementation!==vt.implementation?(Ke=ap(vt,ft.mode,hr),Ke.return=ft,Ke):(Ke=z(Ke,vt.children||[]),Ke.return=ft,Ke)}function Yt(ft,Ke,vt,hr,Vr){return Ke===null||Ke.tag!==7?(Ke=Ih(vt,ft.mode,hr,Vr),Ke.return=ft,Ke):(Ke=z(Ke,vt),Ke.return=ft,Ke)}function nr(ft,Ke,vt){if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number")return Ke=sp(""+Ke,ft.mode,vt),Ke.return=ft,Ke;if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case Qe:return vt=pd(Ke.type,Ke.key,Ke.props,null,ft.mode,vt),vt.ref=Zc(ft,null,Ke),vt.return=ft,vt;case nt:return Ke=ap(Ke,ft.mode,vt),Ke.return=ft,Ke;case xr:var hr=Ke._init;return nr(ft,hr(Ke._payload),vt)}if(sn(Ke)||Pt(Ke))return Ke=Ih(Ke,ft.mode,vt,null),Ke.return=ft,Ke;uc(ft,Ke)}return null}function Qt(ft,Ke,vt,hr){var Vr=Ke!==null?Ke.key:null;if(typeof vt=="string"&&vt!==""||typeof vt=="number")return Vr!==null?null:Ae(ft,Ke,""+vt,hr);if(typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case Qe:return vt.key===Vr?Ge(ft,Ke,vt,hr):null;case nt:return vt.key===Vr?Et(ft,Ke,vt,hr):null;case xr:return Vr=vt._init,Qt(ft,Ke,Vr(vt._payload),hr)}if(sn(vt)||Pt(vt))return Vr!==null?null:Yt(ft,Ke,vt,hr,null);uc(ft,vt)}return null}function Pr(ft,Ke,vt,hr,Vr){if(typeof hr=="string"&&hr!==""||typeof hr=="number")return ft=ft.get(vt)||null,Ae(Ke,ft,""+hr,Vr);if(typeof hr=="object"&&hr!==null){switch(hr.$$typeof){case Qe:return ft=ft.get(hr.key===null?vt:hr.key)||null,Ge(Ke,ft,hr,Vr);case nt:return ft=ft.get(hr.key===null?vt:hr.key)||null,Et(Ke,ft,hr,Vr);case xr:var ln=hr._init;return Pr(ft,Ke,vt,ln(hr._payload),Vr)}if(sn(hr)||Pt(hr))return ft=ft.get(vt)||null,Yt(Ke,ft,hr,Vr,null);uc(Ke,hr)}return null}function Dr(ft,Ke,vt,hr){for(var Vr=null,ln=null,Yr=Ke,fn=Ke=0,_s=null;Yr!==null&&fn<vt.length;fn++){Yr.index>fn?(_s=Yr,Yr=null):_s=Yr.sibling;var ai=Qt(ft,Yr,vt[fn],hr);if(ai===null){Yr===null&&(Yr=_s);break}o&&Yr&&ai.alternate===null&&l(ft,Yr),Ke=U(ai,Ke,fn),ln===null?Vr=ai:ln.sibling=ai,ln=ai,Yr=_s}if(fn===vt.length)return x(ft,Yr),vi&&Fl(ft,fn),Vr;if(Yr===null){for(;fn<vt.length;fn++)Yr=nr(ft,vt[fn],hr),Yr!==null&&(Ke=U(Yr,Ke,fn),ln===null?Vr=Yr:ln.sibling=Yr,ln=Yr);return vi&&Fl(ft,fn),Vr}for(Yr=C(ft,Yr);fn<vt.length;fn++)_s=Pr(Yr,ft,fn,vt[fn],hr),_s!==null&&(o&&_s.alternate!==null&&Yr.delete(_s.key===null?fn:_s.key),Ke=U(_s,Ke,fn),ln===null?Vr=_s:ln.sibling=_s,ln=_s);return o&&Yr.forEach(function(vc){return l(ft,vc)}),vi&&Fl(ft,fn),Vr}function jr(ft,Ke,vt,hr){var Vr=Pt(vt);if(typeof Vr!="function")throw Error(p(150));if(vt=Vr.call(vt),vt==null)throw Error(p(151));for(var ln=Vr=null,Yr=Ke,fn=Ke=0,_s=null,ai=vt.next();Yr!==null&&!ai.done;fn++,ai=vt.next()){Yr.index>fn?(_s=Yr,Yr=null):_s=Yr.sibling;var vc=Qt(ft,Yr,ai.value,hr);if(vc===null){Yr===null&&(Yr=_s);break}o&&Yr&&vc.alternate===null&&l(ft,Yr),Ke=U(vc,Ke,fn),ln===null?Vr=vc:ln.sibling=vc,ln=vc,Yr=_s}if(ai.done)return x(ft,Yr),vi&&Fl(ft,fn),Vr;if(Yr===null){for(;!ai.done;fn++,ai=vt.next())ai=nr(ft,ai.value,hr),ai!==null&&(Ke=U(ai,Ke,fn),ln===null?Vr=ai:ln.sibling=ai,ln=ai);return vi&&Fl(ft,fn),Vr}for(Yr=C(ft,Yr);!ai.done;fn++,ai=vt.next())ai=Pr(Yr,ft,fn,ai.value,hr),ai!==null&&(o&&ai.alternate!==null&&Yr.delete(ai.key===null?fn:ai.key),Ke=U(ai,Ke,fn),ln===null?Vr=ai:ln.sibling=ai,ln=ai);return o&&Yr.forEach(function(pm){return l(ft,pm)}),vi&&Fl(ft,fn),Vr}function ho(ft,Ke,vt,hr){if(typeof vt=="object"&&vt!==null&&vt.type===yt&&vt.key===null&&(vt=vt.props.children),typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case Qe:e:{for(var Vr=vt.key,ln=Ke;ln!==null;){if(ln.key===Vr){if(Vr=vt.type,Vr===yt){if(ln.tag===7){x(ft,ln.sibling),Ke=z(ln,vt.props.children),Ke.return=ft,ft=Ke;break e}}else if(ln.elementType===Vr||typeof Vr=="object"&&Vr!==null&&Vr.$$typeof===xr&&ms(Vr)===ln.type){x(ft,ln.sibling),Ke=z(ln,vt.props),Ke.ref=Zc(ft,ln,vt),Ke.return=ft,ft=Ke;break e}x(ft,ln);break}else l(ft,ln);ln=ln.sibling}vt.type===yt?(Ke=Ih(vt.props.children,ft.mode,hr,vt.key),Ke.return=ft,ft=Ke):(hr=pd(vt.type,vt.key,vt.props,null,ft.mode,hr),hr.ref=Zc(ft,Ke,vt),hr.return=ft,ft=hr)}return oe(ft);case nt:e:{for(ln=vt.key;Ke!==null;){if(Ke.key===ln)if(Ke.tag===4&&Ke.stateNode.containerInfo===vt.containerInfo&&Ke.stateNode.implementation===vt.implementation){x(ft,Ke.sibling),Ke=z(Ke,vt.children||[]),Ke.return=ft,ft=Ke;break e}else{x(ft,Ke);break}else l(ft,Ke);Ke=Ke.sibling}Ke=ap(vt,ft.mode,hr),Ke.return=ft,ft=Ke}return oe(ft);case xr:return ln=vt._init,ho(ft,Ke,ln(vt._payload),hr)}if(sn(vt))return Dr(ft,Ke,vt,hr);if(Pt(vt))return jr(ft,Ke,vt,hr);uc(ft,vt)}return typeof vt=="string"&&vt!==""||typeof vt=="number"?(vt=""+vt,Ke!==null&&Ke.tag===6?(x(ft,Ke.sibling),Ke=z(Ke,vt),Ke.return=ft,ft=Ke):(x(ft,Ke),Ke=sp(vt,ft.mode,hr),Ke.return=ft,ft=Ke),oe(ft)):x(ft,Ke)}return ho}var dr=Gc(!0),Ur=Gc(!1),nu=fs(null),Bs=null,$l=null,Li=null;function yl(){Li=$l=Bs=null}function Ns(o){var l=nu.current;Ii(nu),o._currentValue=l}function $o(o,l,x){for(;o!==null;){var C=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,C!==null&&(C.childLanes|=l)):C!==null&&(C.childLanes&l)!==l&&(C.childLanes|=l),o===x)break;o=o.return}}function oa(o,l){Bs=o,Li=$l=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&l)!==0&&(Ma=!0),o.firstContext=null)}function $n(o){var l=o._currentValue;if(Li!==o)if(o={context:o,memoizedValue:l,next:null},$l===null){if(Bs===null)throw Error(p(308));$l=o,Bs.dependencies={lanes:0,firstContext:o}}else $l=$l.next=o;return l}var si=null;function Au(o){si===null?si=[o]:si.push(o)}function Ru(o,l,x,C){var z=l.interleaved;return z===null?(x.next=x,Au(l)):(x.next=z.next,z.next=x),l.interleaved=x,Ta(o,C)}function Ta(o,l){o.lanes|=l;var x=o.alternate;for(x!==null&&(x.lanes|=l),x=o,o=o.return;o!==null;)o.childLanes|=l,x=o.alternate,x!==null&&(x.childLanes|=l),x=o,o=o.return;return x.tag===3?x.stateNode:null}var jo=!1;function Wc(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Kh(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function sa(o,l){return{eventTime:o,lane:l,tag:0,payload:null,callback:null,next:null}}function aa(o,l,x){var C=o.updateQueue;if(C===null)return null;if(C=C.shared,(Yn&2)!==0){var z=C.pending;return z===null?l.next=l:(l.next=z.next,z.next=l),C.pending=l,Ta(o,x)}return z=C.interleaved,z===null?(l.next=l,Au(C)):(l.next=z.next,z.next=l),C.interleaved=l,Ta(o,x)}function g(o,l,x){if(l=l.updateQueue,l!==null&&(l=l.shared,(x&4194240)!==0)){var C=l.lanes;C&=o.pendingLanes,x|=C,l.lanes=x,sr(o,x)}}function e(o,l){var x=o.updateQueue,C=o.alternate;if(C!==null&&(C=C.updateQueue,x===C)){var z=null,U=null;if(x=x.firstBaseUpdate,x!==null){do{var oe={eventTime:x.eventTime,lane:x.lane,tag:x.tag,payload:x.payload,callback:x.callback,next:null};U===null?z=U=oe:U=U.next=oe,x=x.next}while(x!==null);U===null?z=U=l:U=U.next=l}else z=U=l;x={baseState:C.baseState,firstBaseUpdate:z,lastBaseUpdate:U,shared:C.shared,effects:C.effects},o.updateQueue=x;return}o=x.lastBaseUpdate,o===null?x.firstBaseUpdate=l:o.next=l,x.lastBaseUpdate=l}function r(o,l,x,C){var z=o.updateQueue;jo=!1;var U=z.firstBaseUpdate,oe=z.lastBaseUpdate,Ae=z.shared.pending;if(Ae!==null){z.shared.pending=null;var Ge=Ae,Et=Ge.next;Ge.next=null,oe===null?U=Et:oe.next=Et,oe=Ge;var Yt=o.alternate;Yt!==null&&(Yt=Yt.updateQueue,Ae=Yt.lastBaseUpdate,Ae!==oe&&(Ae===null?Yt.firstBaseUpdate=Et:Ae.next=Et,Yt.lastBaseUpdate=Ge))}if(U!==null){var nr=z.baseState;oe=0,Yt=Et=Ge=null,Ae=U;do{var Qt=Ae.lane,Pr=Ae.eventTime;if((C&Qt)===Qt){Yt!==null&&(Yt=Yt.next={eventTime:Pr,lane:0,tag:Ae.tag,payload:Ae.payload,callback:Ae.callback,next:null});e:{var Dr=o,jr=Ae;switch(Qt=l,Pr=x,jr.tag){case 1:if(Dr=jr.payload,typeof Dr=="function"){nr=Dr.call(Pr,nr,Qt);break e}nr=Dr;break e;case 3:Dr.flags=Dr.flags&-65537|128;case 0:if(Dr=jr.payload,Qt=typeof Dr=="function"?Dr.call(Pr,nr,Qt):Dr,Qt==null)break e;nr=Wt({},nr,Qt);break e;case 2:jo=!0}}Ae.callback!==null&&Ae.lane!==0&&(o.flags|=64,Qt=z.effects,Qt===null?z.effects=[Ae]:Qt.push(Ae))}else Pr={eventTime:Pr,lane:Qt,tag:Ae.tag,payload:Ae.payload,callback:Ae.callback,next:null},Yt===null?(Et=Yt=Pr,Ge=nr):Yt=Yt.next=Pr,oe|=Qt;if(Ae=Ae.next,Ae===null){if(Ae=z.shared.pending,Ae===null)break;Qt=Ae,Ae=Qt.next,Qt.next=null,z.lastBaseUpdate=Qt,z.shared.pending=null}}while(!0);if(Yt===null&&(Ge=nr),z.baseState=Ge,z.firstBaseUpdate=Et,z.lastBaseUpdate=Yt,l=z.shared.interleaved,l!==null){z=l;do oe|=z.lane,z=z.next;while(z!==l)}else U===null&&(z.shared.lanes=0);Xc|=oe,o.lanes=oe,o.memoizedState=nr}}function a(o,l,x){if(o=l.effects,l.effects=null,o!==null)for(l=0;l<o.length;l++){var C=o[l],z=C.callback;if(z!==null){if(C.callback=null,C=x,typeof z!="function")throw Error(p(191,z));z.call(C)}}}var d={},y=fs(d),w=fs(d),E=fs(d);function A(o){if(o===d)throw Error(p(174));return o}function D(o,l){switch(Ci(E,l),Ci(w,o),Ci(y,d),o=l.nodeType,o){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:Hn(null,"");break;default:o=o===8?l.parentNode:l,l=o.namespaceURI||null,o=o.tagName,l=Hn(l,o)}Ii(y),Ci(y,l)}function N(){Ii(y),Ii(w),Ii(E)}function G(o){A(E.current);var l=A(y.current),x=Hn(l,o.type);l!==x&&(Ci(w,o),Ci(y,x))}function Z(o){w.current===o&&(Ii(y),Ii(w))}var X=fs(0);function ne(o){for(var l=o;l!==null;){if(l.tag===13){var x=l.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||x.data==="$?"||x.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var be=[];function _e(){for(var o=0;o<be.length;o++)be[o]._workInProgressVersionPrimary=null;be.length=0}var Se=Je.ReactCurrentDispatcher,ke=Je.ReactCurrentBatchConfig,Le=0,Me=null,De=null,Ne=null,je=!1,at=!1,It=0,Ye=0;function ht(){throw Error(p(321))}function Ct(o,l){if(l===null)return!1;for(var x=0;x<l.length&&x<o.length;x++)if(!wt(o[x],l[x]))return!1;return!0}function Jt(o,l,x,C,z,U){if(Le=U,Me=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Se.current=o===null||o.memoizedState===null?Ha:Ia,o=x(C,z),at){U=0;do{if(at=!1,It=0,25<=U)throw Error(p(301));U+=1,Ne=De=null,l.updateQueue=null,Se.current=Yo,o=x(C,z)}while(at)}if(Se.current=zu,l=De!==null&&De.next!==null,Le=0,Ne=De=Me=null,je=!1,l)throw Error(p(300));return o}function er(){var o=It!==0;return It=0,o}function Ft(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ne===null?Me.memoizedState=Ne=o:Ne=Ne.next=o,Ne}function vr(){if(De===null){var o=Me.alternate;o=o!==null?o.memoizedState:null}else o=De.next;var l=Ne===null?Me.memoizedState:Ne.next;if(l!==null)Ne=l,De=o;else{if(o===null)throw Error(p(310));De=o,o={memoizedState:De.memoizedState,baseState:De.baseState,baseQueue:De.baseQueue,queue:De.queue,next:null},Ne===null?Me.memoizedState=Ne=o:Ne=Ne.next=o}return Ne}function Zr(o,l){return typeof l=="function"?l(o):l}function En(o){var l=vr(),x=l.queue;if(x===null)throw Error(p(311));x.lastRenderedReducer=o;var C=De,z=C.baseQueue,U=x.pending;if(U!==null){if(z!==null){var oe=z.next;z.next=U.next,U.next=oe}C.baseQueue=z=U,x.pending=null}if(z!==null){U=z.next,C=C.baseState;var Ae=oe=null,Ge=null,Et=U;do{var Yt=Et.lane;if((Le&Yt)===Yt)Ge!==null&&(Ge=Ge.next={lane:0,action:Et.action,hasEagerState:Et.hasEagerState,eagerState:Et.eagerState,next:null}),C=Et.hasEagerState?Et.eagerState:o(C,Et.action);else{var nr={lane:Yt,action:Et.action,hasEagerState:Et.hasEagerState,eagerState:Et.eagerState,next:null};Ge===null?(Ae=Ge=nr,oe=C):Ge=Ge.next=nr,Me.lanes|=Yt,Xc|=Yt}Et=Et.next}while(Et!==null&&Et!==U);Ge===null?oe=C:Ge.next=Ae,wt(C,l.memoizedState)||(Ma=!0),l.memoizedState=C,l.baseState=oe,l.baseQueue=Ge,x.lastRenderedState=C}if(o=x.interleaved,o!==null){z=o;do U=z.lane,Me.lanes|=U,Xc|=U,z=z.next;while(z!==o)}else z===null&&(x.lanes=0);return[l.memoizedState,x.dispatch]}function pi(o){var l=vr(),x=l.queue;if(x===null)throw Error(p(311));x.lastRenderedReducer=o;var C=x.dispatch,z=x.pending,U=l.memoizedState;if(z!==null){x.pending=null;var oe=z=z.next;do U=o(U,oe.action),oe=oe.next;while(oe!==z);wt(U,l.memoizedState)||(Ma=!0),l.memoizedState=U,l.baseQueue===null&&(l.baseState=U),x.lastRenderedState=U}return[U,C]}function ri(){}function Mi(o,l){var x=Me,C=vr(),z=l(),U=!wt(C.memoizedState,z);if(U&&(C.memoizedState=z,Ma=!0),C=C.queue,ua(Cn.bind(null,x,C,o),[o]),C.getSnapshot!==l||U||Ne!==null&&Ne.memoizedState.tag&1){if(x.flags|=2048,An(9,In.bind(null,x,C,z,l),void 0,null),bo===null)throw Error(p(349));(Le&30)!==0||ki(x,l,z)}return z}function ki(o,l,x){o.flags|=16384,o={getSnapshot:l,value:x},l=Me.updateQueue,l===null?(l={lastEffect:null,stores:null},Me.updateQueue=l,l.stores=[o]):(x=l.stores,x===null?l.stores=[o]:x.push(o))}function In(o,l,x,C){l.value=x,l.getSnapshot=C,Hi(l)&&vo(o)}function Cn(o,l,x){return x(function(){Hi(l)&&vo(o)})}function Hi(o){var l=o.getSnapshot;o=o.value;try{var x=l();return!wt(o,x)}catch{return!0}}function vo(o){var l=Ta(o,1);l!==null&&Hl(l,o,1,-1)}function ao(o){var l=Ft();return typeof o=="function"&&(o=o()),l.memoizedState=l.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zr,lastRenderedState:o},l.queue=o,o=o.dispatch=zd.bind(null,Me,o),[l.memoizedState,o]}function An(o,l,x,C){return o={tag:o,create:l,destroy:x,deps:C,next:null},l=Me.updateQueue,l===null?(l={lastEffect:null,stores:null},Me.updateQueue=l,l.lastEffect=o.next=o):(x=l.lastEffect,x===null?l.lastEffect=o.next=o:(C=x.next,x.next=o,o.next=C,l.lastEffect=o)),o}function _l(){return vr().memoizedState}function la(o,l,x,C){var z=Ft();Me.flags|=o,z.memoizedState=An(1|l,x,void 0,C===void 0?null:C)}function Ca(o,l,x,C){var z=vr();C=C===void 0?null:C;var U=void 0;if(De!==null){var oe=De.memoizedState;if(U=oe.destroy,C!==null&&Ct(C,oe.deps)){z.memoizedState=An(l,x,U,C);return}}Me.flags|=o,z.memoizedState=An(1|l,x,U,C)}function jl(o,l){return la(8390656,8,o,l)}function ua(o,l){return Ca(2048,8,o,l)}function iu(o,l){return Ca(4,2,o,l)}function $s(o,l){return Ca(4,4,o,l)}function js(o,l){if(typeof l=="function")return o=o(),l(o),function(){l(null)};if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function Ul(o,l,x){return x=x!=null?x.concat([o]):null,Ca(4,4,js.bind(null,l,o),x)}function Pa(){}function ou(o,l){var x=vr();l=l===void 0?null:l;var C=x.memoizedState;return C!==null&&l!==null&&Ct(l,C[1])?C[0]:(x.memoizedState=[o,l],o)}function lo(o,l){var x=vr();l=l===void 0?null:l;var C=x.memoizedState;return C!==null&&l!==null&&Ct(l,C[1])?C[0]:(o=o(),x.memoizedState=[o,l],o)}function uo(o,l,x){return(Le&21)===0?(o.baseState&&(o.baseState=!1,Ma=!0),o.memoizedState=x):(wt(x,l)||(x=Ee(),Me.lanes|=x,Xc|=x,o.baseState=!0),l)}function gs(o,l){var x=mr;mr=x!==0&&4>x?x:4,o(!0);var C=ke.transition;ke.transition={};try{o(!1),l()}finally{mr=x,ke.transition=C}}function xi(){return vr().memoizedState}function Xh(o,l,x){var C=Qc(o);if(x={lane:C,action:x,hasEagerState:!1,eagerState:null,next:null},Yh(o))Us(l,x);else if(x=Ru(o,l,x,C),x!==null){var z=Aa();Hl(x,o,C,z),Ea(x,l,C)}}function zd(o,l,x){var C=Qc(o),z={lane:C,action:x,hasEagerState:!1,eagerState:null,next:null};if(Yh(o))Us(l,z);else{var U=o.alternate;if(o.lanes===0&&(U===null||U.lanes===0)&&(U=l.lastRenderedReducer,U!==null))try{var oe=l.lastRenderedState,Ae=U(oe,x);if(z.hasEagerState=!0,z.eagerState=Ae,wt(Ae,oe)){var Ge=l.interleaved;Ge===null?(z.next=z,Au(l)):(z.next=Ge.next,Ge.next=z),l.interleaved=z;return}}catch{}finally{}x=Ru(o,l,z,C),x!==null&&(z=Aa(),Hl(x,o,C,z),Ea(x,l,C))}}function Yh(o){var l=o.alternate;return o===Me||l!==null&&l===Me}function Us(o,l){at=je=!0;var x=o.pending;x===null?l.next=l:(l.next=x.next,x.next=l),o.pending=l}function Ea(o,l,x){if((x&4194240)!==0){var C=l.lanes;C&=o.pendingLanes,x|=C,l.lanes=x,sr(o,x)}}var zu={readContext:$n,useCallback:ht,useContext:ht,useEffect:ht,useImperativeHandle:ht,useInsertionEffect:ht,useLayoutEffect:ht,useMemo:ht,useReducer:ht,useRef:ht,useState:ht,useDebugValue:ht,useDeferredValue:ht,useTransition:ht,useMutableSource:ht,useSyncExternalStore:ht,useId:ht,unstable_isNewReconciler:!1},Ha={readContext:$n,useCallback:function(o,l){return Ft().memoizedState=[o,l===void 0?null:l],o},useContext:$n,useEffect:jl,useImperativeHandle:function(o,l,x){return x=x!=null?x.concat([o]):null,la(4194308,4,js.bind(null,l,o),x)},useLayoutEffect:function(o,l){return la(4194308,4,o,l)},useInsertionEffect:function(o,l){return la(4,2,o,l)},useMemo:function(o,l){var x=Ft();return l=l===void 0?null:l,o=o(),x.memoizedState=[o,l],o},useReducer:function(o,l,x){var C=Ft();return l=x!==void 0?x(l):l,C.memoizedState=C.baseState=l,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:l},C.queue=o,o=o.dispatch=Xh.bind(null,Me,o),[C.memoizedState,o]},useRef:function(o){var l=Ft();return o={current:o},l.memoizedState=o},useState:ao,useDebugValue:Pa,useDeferredValue:function(o){return Ft().memoizedState=o},useTransition:function(){var o=ao(!1),l=o[0];return o=gs.bind(null,o[1]),Ft().memoizedState=o,[l,o]},useMutableSource:function(){},useSyncExternalStore:function(o,l,x){var C=Me,z=Ft();if(vi){if(x===void 0)throw Error(p(407));x=x()}else{if(x=l(),bo===null)throw Error(p(349));(Le&30)!==0||ki(C,l,x)}z.memoizedState=x;var U={value:x,getSnapshot:l};return z.queue=U,jl(Cn.bind(null,C,U,o),[o]),C.flags|=2048,An(9,In.bind(null,C,U,x,l),void 0,null),x},useId:function(){var o=Ft(),l=bo.identifierPrefix;if(vi){var x=hn,C=Ga;x=(C&~(1<<32-go(C)-1)).toString(32)+x,l=":"+l+"R"+x,x=It++,0<x&&(l+="H"+x.toString(32)),l+=":"}else x=Ye++,l=":"+l+"r"+x.toString(32)+":";return o.memoizedState=l},unstable_isNewReconciler:!1},Ia={readContext:$n,useCallback:ou,useContext:$n,useEffect:ua,useImperativeHandle:Ul,useInsertionEffect:iu,useLayoutEffect:$s,useMemo:lo,useReducer:En,useRef:_l,useState:function(){return En(Zr)},useDebugValue:Pa,useDeferredValue:function(o){var l=vr();return uo(l,De.memoizedState,o)},useTransition:function(){var o=En(Zr)[0],l=vr().memoizedState;return[o,l]},useMutableSource:ri,useSyncExternalStore:Mi,useId:xi,unstable_isNewReconciler:!1},Yo={readContext:$n,useCallback:ou,useContext:$n,useEffect:ua,useImperativeHandle:Ul,useInsertionEffect:iu,useLayoutEffect:$s,useMemo:lo,useReducer:pi,useRef:_l,useState:function(){return pi(Zr)},useDebugValue:Pa,useDeferredValue:function(o){var l=vr();return De===null?l.memoizedState=o:uo(l,De.memoizedState,o)},useTransition:function(){var o=pi(Zr)[0],l=vr().memoizedState;return[o,l]},useMutableSource:ri,useSyncExternalStore:Mi,useId:xi,unstable_isNewReconciler:!1};function xo(o,l){if(o&&o.defaultProps){l=Wt({},l),o=o.defaultProps;for(var x in o)l[x]===void 0&&(l[x]=o[x]);return l}return l}function cc(o,l,x,C){l=o.memoizedState,x=x(C,l),x=x==null?l:Wt({},l,x),o.memoizedState=x,o.lanes===0&&(o.updateQueue.baseState=x)}var vl={isMounted:function(o){return(o=o._reactInternals)?Vn(o)===o:!1},enqueueSetState:function(o,l,x){o=o._reactInternals;var C=Aa(),z=Qc(o),U=sa(C,z);U.payload=l,x!=null&&(U.callback=x),l=aa(o,U,z),l!==null&&(Hl(l,o,z,C),g(l,o,z))},enqueueReplaceState:function(o,l,x){o=o._reactInternals;var C=Aa(),z=Qc(o),U=sa(C,z);U.tag=1,U.payload=l,x!=null&&(U.callback=x),l=aa(o,U,z),l!==null&&(Hl(l,o,z,C),g(l,o,z))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var x=Aa(),C=Qc(o),z=sa(x,C);z.tag=2,l!=null&&(z.callback=l),l=aa(o,z,C),l!==null&&(Hl(l,o,C,x),g(l,o,C))}};function _h(o,l,x,C,z,U,oe){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(C,U,oe):l.prototype&&l.prototype.isPureReactComponent?!Ir(x,C)||!Ir(z,U):!0}function Hc(o,l,x){var C=!1,z=ba,U=l.contextType;return typeof U=="object"&&U!==null?U=$n(U):(z=Ls(l)?ps:No.current,C=l.contextTypes,U=(C=C!=null)?pl(o,z):ba),l=new l(x,U),o.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=vl,o.stateNode=l,l._reactInternals=o,C&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=z,o.__reactInternalMemoizedMaskedChildContext=U),l}function qc(o,l,x,C){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(x,C),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(x,C),l.state!==o&&vl.enqueueReplaceState(l,l.state,null)}function ff(o,l,x,C){var z=o.stateNode;z.props=x,z.state=o.memoizedState,z.refs={},Wc(o);var U=l.contextType;typeof U=="object"&&U!==null?z.context=$n(U):(U=Ls(l)?ps:No.current,z.context=pl(o,U)),z.state=o.memoizedState,U=l.getDerivedStateFromProps,typeof U=="function"&&(cc(o,l,U,x),z.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof z.getSnapshotBeforeUpdate=="function"||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(l=z.state,typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount(),l!==z.state&&vl.enqueueReplaceState(z,z.state,null),r(o,x,z,C),z.state=o.memoizedState),typeof z.componentDidMount=="function"&&(o.flags|=4194308)}function xl(o,l){try{var x="",C=l;do x+=At(C),C=C.return;while(C);var z=x}catch(U){z=`
Error generating stack: `+U.message+`
`+U.stack}return{value:o,source:l,stack:z,digest:null}}function Lu(o,l,x){return{value:o,source:null,stack:x??null,digest:l??null}}function vh(o,l){try{console.error(l.value)}catch(x){setTimeout(function(){throw x})}}var Tp=typeof WeakMap=="function"?WeakMap:Map;function xh(o,l,x){x=sa(-1,x),x.tag=3,x.payload={element:null};var C=l.value;return x.callback=function(){Gd||(Gd=!0,dd=C),vh(o,l)},x}function Ld(o,l,x){x=sa(-1,x),x.tag=3;var C=o.type.getDerivedStateFromError;if(typeof C=="function"){var z=l.value;x.payload=function(){return C(z)},x.callback=function(){vh(o,l)}}var U=o.stateNode;return U!==null&&typeof U.componentDidCatch=="function"&&(x.callback=function(){vh(o,l),typeof C!="function"&&(mc===null?mc=new Set([this]):mc.add(this));var oe=l.stack;this.componentDidCatch(l.value,{componentStack:oe!==null?oe:""})}),x}function Dd(o,l,x){var C=o.pingCache;if(C===null){C=o.pingCache=new Tp;var z=new Set;C.set(l,z)}else z=C.get(l),z===void 0&&(z=new Set,C.set(l,z));z.has(x)||(z.add(x),o=fm.bind(null,o,l,x),l.then(o,o))}function Gf(o){do{var l;if((l=o.tag===13)&&(l=o.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return o;o=o.return}while(o!==null);return null}function Wf(o,l,x,C,z){return(o.mode&1)===0?(o===l?o.flags|=65536:(o.flags|=128,x.flags|=131072,x.flags&=-52805,x.tag===1&&(x.alternate===null?x.tag=17:(l=sa(-1,1),l.tag=2,aa(x,l,1))),x.lanes|=1),o):(o.flags|=65536,o.lanes=z,o)}var Qh=Je.ReactCurrentOwner,Ma=!1;function Qo(o,l,x,C){l.child=o===null?Ur(l,null,x,C):dr(l,o.child,x,C)}function Hf(o,l,x,C,z){x=x.render;var U=l.ref;return oa(l,z),C=Jt(o,l,x,C,U,z),x=er(),o!==null&&!Ma?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~z,Zl(o,l,z)):(vi&&x&&sc(l),l.flags|=1,Qo(o,l,C,z),l.child)}function pf(o,l,x,C,z){if(o===null){var U=x.type;return typeof U=="function"&&!Cf(U)&&U.defaultProps===void 0&&x.compare===null&&x.defaultProps===void 0?(l.tag=15,l.type=U,ca(o,l,U,C,z)):(o=pd(x.type,null,C,l,l.mode,z),o.ref=l.ref,o.return=l,l.child=o)}if(U=o.child,(o.lanes&z)===0){var oe=U.memoizedProps;if(x=x.compare,x=x!==null?x:Ir,x(oe,C)&&o.ref===l.ref)return Zl(o,l,z)}return l.flags|=1,o=Sl(U,C),o.ref=l.ref,o.return=l,l.child=o}function ca(o,l,x,C,z){if(o!==null){var U=o.memoizedProps;if(Ir(U,C)&&o.ref===l.ref)if(Ma=!1,l.pendingProps=C=U,(o.lanes&z)!==0)(o.flags&131072)!==0&&(Ma=!0);else return l.lanes=o.lanes,Zl(o,l,z)}return Jh(o,l,x,C,z)}function qf(o,l,x){var C=l.pendingProps,z=C.children,U=o!==null?o.memoizedState:null;if(C.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ci(ud,Xa),Xa|=x;else{if((x&1073741824)===0)return o=U!==null?U.baseLanes|x:x,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:o,cachePool:null,transitions:null},l.updateQueue=null,Ci(ud,Xa),Xa|=o,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},C=U!==null?U.baseLanes:x,Ci(ud,Xa),Xa|=C}else U!==null?(C=U.baseLanes|x,l.memoizedState=null):C=x,Ci(ud,Xa),Xa|=C;return Qo(o,l,z,x),l.child}function bh(o,l){var x=l.ref;(o===null&&x!==null||o!==null&&o.ref!==x)&&(l.flags|=512,l.flags|=2097152)}function Jh(o,l,x,C,z){var U=Ls(x)?ps:No.current;return U=pl(l,U),oa(l,z),x=Jt(o,l,x,C,U,z),C=er(),o!==null&&!Ma?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~z,Zl(o,l,z)):(vi&&C&&sc(l),l.flags|=1,Qo(o,l,x,z),l.child)}function ed(o,l,x,C,z){if(Ls(x)){var U=!0;Wi(l)}else U=!1;if(oa(l,z),l.stateNode===null)ha(o,l),Hc(l,x,C),ff(l,x,C,z),C=!0;else if(o===null){var oe=l.stateNode,Ae=l.memoizedProps;oe.props=Ae;var Ge=oe.context,Et=x.contextType;typeof Et=="object"&&Et!==null?Et=$n(Et):(Et=Ls(x)?ps:No.current,Et=pl(l,Et));var Yt=x.getDerivedStateFromProps,nr=typeof Yt=="function"||typeof oe.getSnapshotBeforeUpdate=="function";nr||typeof oe.UNSAFE_componentWillReceiveProps!="function"&&typeof oe.componentWillReceiveProps!="function"||(Ae!==C||Ge!==Et)&&qc(l,oe,C,Et),jo=!1;var Qt=l.memoizedState;oe.state=Qt,r(l,C,oe,z),Ge=l.memoizedState,Ae!==C||Qt!==Ge||qo.current||jo?(typeof Yt=="function"&&(cc(l,x,Yt,C),Ge=l.memoizedState),(Ae=jo||_h(l,x,Ae,C,Qt,Ge,Et))?(nr||typeof oe.UNSAFE_componentWillMount!="function"&&typeof oe.componentWillMount!="function"||(typeof oe.componentWillMount=="function"&&oe.componentWillMount(),typeof oe.UNSAFE_componentWillMount=="function"&&oe.UNSAFE_componentWillMount()),typeof oe.componentDidMount=="function"&&(l.flags|=4194308)):(typeof oe.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=C,l.memoizedState=Ge),oe.props=C,oe.state=Ge,oe.context=Et,C=Ae):(typeof oe.componentDidMount=="function"&&(l.flags|=4194308),C=!1)}else{oe=l.stateNode,Kh(o,l),Ae=l.memoizedProps,Et=l.type===l.elementType?Ae:xo(l.type,Ae),oe.props=Et,nr=l.pendingProps,Qt=oe.context,Ge=x.contextType,typeof Ge=="object"&&Ge!==null?Ge=$n(Ge):(Ge=Ls(x)?ps:No.current,Ge=pl(l,Ge));var Pr=x.getDerivedStateFromProps;(Yt=typeof Pr=="function"||typeof oe.getSnapshotBeforeUpdate=="function")||typeof oe.UNSAFE_componentWillReceiveProps!="function"&&typeof oe.componentWillReceiveProps!="function"||(Ae!==nr||Qt!==Ge)&&qc(l,oe,C,Ge),jo=!1,Qt=l.memoizedState,oe.state=Qt,r(l,C,oe,z);var Dr=l.memoizedState;Ae!==nr||Qt!==Dr||qo.current||jo?(typeof Pr=="function"&&(cc(l,x,Pr,C),Dr=l.memoizedState),(Et=jo||_h(l,x,Et,C,Qt,Dr,Ge)||!1)?(Yt||typeof oe.UNSAFE_componentWillUpdate!="function"&&typeof oe.componentWillUpdate!="function"||(typeof oe.componentWillUpdate=="function"&&oe.componentWillUpdate(C,Dr,Ge),typeof oe.UNSAFE_componentWillUpdate=="function"&&oe.UNSAFE_componentWillUpdate(C,Dr,Ge)),typeof oe.componentDidUpdate=="function"&&(l.flags|=4),typeof oe.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof oe.componentDidUpdate!="function"||Ae===o.memoizedProps&&Qt===o.memoizedState||(l.flags|=4),typeof oe.getSnapshotBeforeUpdate!="function"||Ae===o.memoizedProps&&Qt===o.memoizedState||(l.flags|=1024),l.memoizedProps=C,l.memoizedState=Dr),oe.props=C,oe.state=Dr,oe.context=Ge,C=Et):(typeof oe.componentDidUpdate!="function"||Ae===o.memoizedProps&&Qt===o.memoizedState||(l.flags|=4),typeof oe.getSnapshotBeforeUpdate!="function"||Ae===o.memoizedProps&&Qt===o.memoizedState||(l.flags|=1024),C=!1)}return mf(o,l,x,C,U,z)}function mf(o,l,x,C,z,U){bh(o,l);var oe=(l.flags&128)!==0;if(!C&&!oe)return z&&nc(l,x,!1),Zl(o,l,U);C=l.stateNode,Qh.current=l;var Ae=oe&&typeof x.getDerivedStateFromError!="function"?null:C.render();return l.flags|=1,o!==null&&oe?(l.child=dr(l,o.child,null,U),l.child=dr(l,null,Ae,U)):Qo(o,l,Ae,U),l.memoizedState=C.state,z&&nc(l,x,!0),l.child}function Kf(o){var l=o.stateNode;l.pendingContext?Va(o,l.pendingContext,l.pendingContext!==l.context):l.context&&Va(o,l.context,!1),D(o,l.containerInfo)}function Du(o,l,x,C,z){return Wa(),gl(z),l.flags|=256,Qo(o,l,x,C),l.child}var Od={dehydrated:null,treeContext:null,retryLane:0};function td(o){return{baseLanes:o,cachePool:null,transitions:null}}function Fd(o,l,x){var C=l.pendingProps,z=X.current,U=!1,oe=(l.flags&128)!==0,Ae;if((Ae=oe)||(Ae=o!==null&&o.memoizedState===null?!1:(z&2)!==0),Ae?(U=!0,l.flags&=-129):(o===null||o.memoizedState!==null)&&(z|=1),Ci(X,z&1),o===null)return ia(l),o=l.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((l.mode&1)===0?l.lanes=1:o.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(oe=C.children,o=C.fallback,U?(C=l.mode,U=l.child,oe={mode:"hidden",children:oe},(C&1)===0&&U!==null?(U.childLanes=0,U.pendingProps=oe):U=Pf(oe,C,0,null),o=Ih(o,C,x,null),U.return=l,o.return=l,U.sibling=o,l.child=U,l.child.memoizedState=td(x),l.memoizedState=Od,o):wh(l,oe));if(z=o.memoizedState,z!==null&&(Ae=z.dehydrated,Ae!==null))return an(o,l,oe,C,Ae,z,x);if(U){U=C.fallback,oe=l.mode,z=o.child,Ae=z.sibling;var Ge={mode:"hidden",children:C.children};return(oe&1)===0&&l.child!==z?(C=l.child,C.childLanes=0,C.pendingProps=Ge,l.deletions=null):(C=Sl(z,Ge),C.subtreeFlags=z.subtreeFlags&14680064),Ae!==null?U=Sl(Ae,U):(U=Ih(U,oe,x,null),U.flags|=2),U.return=l,C.return=l,C.sibling=U,l.child=C,C=U,U=l.child,oe=o.child.memoizedState,oe=oe===null?td(x):{baseLanes:oe.baseLanes|x,cachePool:null,transitions:oe.transitions},U.memoizedState=oe,U.childLanes=o.childLanes&~x,l.memoizedState=Od,C}return U=o.child,o=U.sibling,C=Sl(U,{mode:"visible",children:C.children}),(l.mode&1)===0&&(C.lanes=x),C.return=l,C.sibling=null,o!==null&&(x=l.deletions,x===null?(l.deletions=[o],l.flags|=16):x.push(o)),l.child=C,l.memoizedState=null,C}function wh(o,l){return l=Pf({mode:"visible",children:l},o.mode,0,null),l.return=o,o.child=l}function hc(o,l,x,C){return C!==null&&gl(C),dr(l,o.child,null,x),o=wh(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function an(o,l,x,C,z,U,oe){if(x)return l.flags&256?(l.flags&=-257,C=Lu(Error(p(422))),hc(o,l,oe,C)):l.memoizedState!==null?(l.child=o.child,l.flags|=128,null):(U=C.fallback,z=l.mode,C=Pf({mode:"visible",children:C.children},z,0,null),U=Ih(U,z,oe,null),U.flags|=2,C.return=l,U.return=l,C.sibling=U,l.child=C,(l.mode&1)!==0&&dr(l,o.child,null,oe),l.child.memoizedState=td(oe),l.memoizedState=Od,U);if((l.mode&1)===0)return hc(o,l,oe,null);if(z.data==="$!"){if(C=z.nextSibling&&z.nextSibling.dataset,C)var Ae=C.dgst;return C=Ae,U=Error(p(419)),C=Lu(U,C,void 0),hc(o,l,oe,C)}if(Ae=(oe&o.childLanes)!==0,Ma||Ae){if(C=bo,C!==null){switch(oe&-oe){case 4:z=2;break;case 16:z=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:z=32;break;case 536870912:z=268435456;break;default:z=0}z=(z&(C.suspendedLanes|oe))!==0?0:z,z!==0&&z!==U.retryLane&&(U.retryLane=z,Ta(o,z),Hl(C,o,z,-1))}return wf(),C=Lu(Error(p(421))),hc(o,l,oe,C)}return z.data==="$?"?(l.flags|=128,l.child=o.child,l=Yd.bind(null,o),z._reactRetry=l,null):(o=U.treeContext,Os=_o(z.nextSibling),Xo=l,vi=!0,Fs=null,o!==null&&(Sa[Ko++]=Ga,Sa[Ko++]=hn,Sa[Ko++]=ml,Ga=o.id,hn=o.overflow,ml=l),l=wh(l,C.children),l.flags|=4096,l)}function rd(o,l,x){o.lanes|=l;var C=o.alternate;C!==null&&(C.lanes|=l),$o(o.return,l,x)}function Sh(o,l,x,C,z){var U=o.memoizedState;U===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:C,tail:x,tailMode:z}:(U.isBackwards=l,U.rendering=null,U.renderingStartTime=0,U.last=C,U.tail=x,U.tailMode=z)}function Vl(o,l,x){var C=l.pendingProps,z=C.revealOrder,U=C.tail;if(Qo(o,l,C.children,x),C=X.current,(C&2)!==0)C=C&1|2,l.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&rd(o,x,l);else if(o.tag===19)rd(o,x,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}C&=1}if(Ci(X,C),(l.mode&1)===0)l.memoizedState=null;else switch(z){case"forwards":for(x=l.child,z=null;x!==null;)o=x.alternate,o!==null&&ne(o)===null&&(z=x),x=x.sibling;x=z,x===null?(z=l.child,l.child=null):(z=x.sibling,x.sibling=null),Sh(l,!1,z,x,U);break;case"backwards":for(x=null,z=l.child,l.child=null;z!==null;){if(o=z.alternate,o!==null&&ne(o)===null){l.child=z;break}o=z.sibling,z.sibling=x,x=z,z=o}Sh(l,!0,x,null,U);break;case"together":Sh(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function ha(o,l){(l.mode&1)===0&&o!==null&&(o.alternate=null,l.alternate=null,l.flags|=2)}function Zl(o,l,x){if(o!==null&&(l.dependencies=o.dependencies),Xc|=l.lanes,(x&l.childLanes)===0)return null;if(o!==null&&l.child!==o.child)throw Error(p(153));if(l.child!==null){for(o=l.child,x=Sl(o,o.pendingProps),l.child=x,x.return=l;o.sibling!==null;)o=o.sibling,x=x.sibling=Sl(o,o.pendingProps),x.return=l;x.sibling=null}return l.child}function gf(o,l,x){switch(l.tag){case 3:Kf(l),Wa();break;case 5:G(l);break;case 1:Ls(l.type)&&Wi(l);break;case 4:D(l,l.stateNode.containerInfo);break;case 10:var C=l.type._context,z=l.memoizedProps.value;Ci(nu,C._currentValue),C._currentValue=z;break;case 13:if(C=l.memoizedState,C!==null)return C.dehydrated!==null?(Ci(X,X.current&1),l.flags|=128,null):(x&l.child.childLanes)!==0?Fd(o,l,x):(Ci(X,X.current&1),o=Zl(o,l,x),o!==null?o.sibling:null);Ci(X,X.current&1);break;case 19:if(C=(x&l.childLanes)!==0,(o.flags&128)!==0){if(C)return Vl(o,l,x);l.flags|=128}if(z=l.memoizedState,z!==null&&(z.rendering=null,z.tail=null,z.lastEffect=null),Ci(X,X.current),C)break;return null;case 22:case 23:return l.lanes=0,qf(o,l,x)}return Zl(o,l,x)}var Vs,yf,Cp,Xf;Vs=function(o,l){for(var x=l.child;x!==null;){if(x.tag===5||x.tag===6)o.appendChild(x.stateNode);else if(x.tag!==4&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===l)break;for(;x.sibling===null;){if(x.return===null||x.return===l)return;x=x.return}x.sibling.return=x.return,x=x.sibling}},yf=function(){},Cp=function(o,l,x,C){var z=o.memoizedProps;if(z!==C){o=l.stateNode,A(y.current);var U=null;switch(x){case"input":z=br(o,z),C=br(o,C),U=[];break;case"select":z=Wt({},z,{value:void 0}),C=Wt({},C,{value:void 0}),U=[];break;case"textarea":z=wr(o,z),C=wr(o,C),U=[];break;default:typeof z.onClick!="function"&&typeof C.onClick=="function"&&(o.onclick=Qu)}se(x,C);var oe;x=null;for(Et in z)if(!C.hasOwnProperty(Et)&&z.hasOwnProperty(Et)&&z[Et]!=null)if(Et==="style"){var Ae=z[Et];for(oe in Ae)Ae.hasOwnProperty(oe)&&(x||(x={}),x[oe]="")}else Et!=="dangerouslySetInnerHTML"&&Et!=="children"&&Et!=="suppressContentEditableWarning"&&Et!=="suppressHydrationWarning"&&Et!=="autoFocus"&&(P.hasOwnProperty(Et)?U||(U=[]):(U=U||[]).push(Et,null));for(Et in C){var Ge=C[Et];if(Ae=z!=null?z[Et]:void 0,C.hasOwnProperty(Et)&&Ge!==Ae&&(Ge!=null||Ae!=null))if(Et==="style")if(Ae){for(oe in Ae)!Ae.hasOwnProperty(oe)||Ge&&Ge.hasOwnProperty(oe)||(x||(x={}),x[oe]="");for(oe in Ge)Ge.hasOwnProperty(oe)&&Ae[oe]!==Ge[oe]&&(x||(x={}),x[oe]=Ge[oe])}else x||(U||(U=[]),U.push(Et,x)),x=Ge;else Et==="dangerouslySetInnerHTML"?(Ge=Ge?Ge.__html:void 0,Ae=Ae?Ae.__html:void 0,Ge!=null&&Ae!==Ge&&(U=U||[]).push(Et,Ge)):Et==="children"?typeof Ge!="string"&&typeof Ge!="number"||(U=U||[]).push(Et,""+Ge):Et!=="suppressContentEditableWarning"&&Et!=="suppressHydrationWarning"&&(P.hasOwnProperty(Et)?(Ge!=null&&Et==="onScroll"&&zi("scroll",o),U||Ae===Ge||(U=[])):(U=U||[]).push(Et,Ge))}x&&(U=U||[]).push("style",x);var Et=U;(l.updateQueue=Et)&&(l.flags|=4)}},Xf=function(o,l,x,C){x!==C&&(l.flags|=4)};function Bd(o,l){if(!vi)switch(o.tailMode){case"hidden":l=o.tail;for(var x=null;l!==null;)l.alternate!==null&&(x=l),l=l.sibling;x===null?o.tail=null:x.sibling=null;break;case"collapsed":x=o.tail;for(var C=null;x!==null;)x.alternate!==null&&(C=x),x=x.sibling;C===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:C.sibling=null}}function Zs(o){var l=o.alternate!==null&&o.alternate.child===o.child,x=0,C=0;if(l)for(var z=o.child;z!==null;)x|=z.lanes|z.childLanes,C|=z.subtreeFlags&14680064,C|=z.flags&14680064,z.return=o,z=z.sibling;else for(z=o.child;z!==null;)x|=z.lanes|z.childLanes,C|=z.subtreeFlags,C|=z.flags,z.return=o,z=z.sibling;return o.subtreeFlags|=C,o.childLanes=x,l}function Yf(o,l,x){var C=l.pendingProps;switch(ku(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zs(l),null;case 1:return Ls(l.type)&&ko(),Zs(l),null;case 3:return C=l.stateNode,N(),Ii(qo),Ii(No),_e(),C.pendingContext&&(C.context=C.pendingContext,C.pendingContext=null),(o===null||o.child===null)&&(oi(l)?l.flags|=4:o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Fs!==null&&(Ch(Fs),Fs=null))),yf(o,l),Zs(l),null;case 5:Z(l);var z=A(E.current);if(x=l.type,o!==null&&l.stateNode!=null)Cp(o,l,x,C,z),o.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!C){if(l.stateNode===null)throw Error(p(166));return Zs(l),null}if(o=A(y.current),oi(l)){C=l.stateNode,x=l.type;var U=l.memoizedProps;switch(C[Ua]=l,C[Wo]=U,o=(l.mode&1)!==0,x){case"dialog":zi("cancel",C),zi("close",C);break;case"iframe":case"object":case"embed":zi("load",C);break;case"video":case"audio":for(z=0;z<xa.length;z++)zi(xa[z],C);break;case"source":zi("error",C);break;case"img":case"image":case"link":zi("error",C),zi("load",C);break;case"details":zi("toggle",C);break;case"input":nn(C,U),zi("invalid",C);break;case"select":C._wrapperState={wasMultiple:!!U.multiple},zi("invalid",C);break;case"textarea":Un(C,U),zi("invalid",C)}se(x,U),z=null;for(var oe in U)if(U.hasOwnProperty(oe)){var Ae=U[oe];oe==="children"?typeof Ae=="string"?C.textContent!==Ae&&(U.suppressHydrationWarning!==!0&&Uc(C.textContent,Ae,o),z=["children",Ae]):typeof Ae=="number"&&C.textContent!==""+Ae&&(U.suppressHydrationWarning!==!0&&Uc(C.textContent,Ae,o),z=["children",""+Ae]):P.hasOwnProperty(oe)&&Ae!=null&&oe==="onScroll"&&zi("scroll",C)}switch(x){case"input":Tr(C),on(C,U,!0);break;case"textarea":Tr(C),Si(C);break;case"select":case"option":break;default:typeof U.onClick=="function"&&(C.onclick=Qu)}C=z,l.updateQueue=C,C!==null&&(l.flags|=4)}else{oe=z.nodeType===9?z:z.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=Jn(x)),o==="http://www.w3.org/1999/xhtml"?x==="script"?(o=oe.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof C.is=="string"?o=oe.createElement(x,{is:C.is}):(o=oe.createElement(x),x==="select"&&(oe=o,C.multiple?oe.multiple=!0:C.size&&(oe.size=C.size))):o=oe.createElementNS(o,x),o[Ua]=l,o[Wo]=C,Vs(o,l,!1,!1),l.stateNode=o;e:{switch(oe=ae(x,C),x){case"dialog":zi("cancel",o),zi("close",o),z=C;break;case"iframe":case"object":case"embed":zi("load",o),z=C;break;case"video":case"audio":for(z=0;z<xa.length;z++)zi(xa[z],o);z=C;break;case"source":zi("error",o),z=C;break;case"img":case"image":case"link":zi("error",o),zi("load",o),z=C;break;case"details":zi("toggle",o),z=C;break;case"input":nn(o,C),z=br(o,C),zi("invalid",o);break;case"option":z=C;break;case"select":o._wrapperState={wasMultiple:!!C.multiple},z=Wt({},C,{value:void 0}),zi("invalid",o);break;case"textarea":Un(o,C),z=wr(o,C),zi("invalid",o);break;default:z=C}se(x,z),Ae=z;for(U in Ae)if(Ae.hasOwnProperty(U)){var Ge=Ae[U];U==="style"?mo(o,Ge):U==="dangerouslySetInnerHTML"?(Ge=Ge?Ge.__html:void 0,Ge!=null&&Ji(o,Ge)):U==="children"?typeof Ge=="string"?(x!=="textarea"||Ge!=="")&&Gi(o,Ge):typeof Ge=="number"&&Gi(o,""+Ge):U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&U!=="autoFocus"&&(P.hasOwnProperty(U)?Ge!=null&&U==="onScroll"&&zi("scroll",o):Ge!=null&&Tt(o,U,Ge,oe))}switch(x){case"input":Tr(o),on(o,C,!1);break;case"textarea":Tr(o),Si(o);break;case"option":C.value!=null&&o.setAttribute("value",""+fr(C.value));break;case"select":o.multiple=!!C.multiple,U=C.value,U!=null?kn(o,!!C.multiple,U,!1):C.defaultValue!=null&&kn(o,!!C.multiple,C.defaultValue,!0);break;default:typeof z.onClick=="function"&&(o.onclick=Qu)}switch(x){case"button":case"input":case"select":case"textarea":C=!!C.autoFocus;break e;case"img":C=!0;break e;default:C=!1}}C&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Zs(l),null;case 6:if(o&&l.stateNode!=null)Xf(o,l,o.memoizedProps,C);else{if(typeof C!="string"&&l.stateNode===null)throw Error(p(166));if(x=A(E.current),A(y.current),oi(l)){if(C=l.stateNode,x=l.memoizedProps,C[Ua]=l,(U=C.nodeValue!==x)&&(o=Xo,o!==null))switch(o.tag){case 3:Uc(C.nodeValue,x,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&Uc(C.nodeValue,x,(o.mode&1)!==0)}U&&(l.flags|=4)}else C=(x.nodeType===9?x:x.ownerDocument).createTextNode(C),C[Ua]=l,l.stateNode=C}return Zs(l),null;case 13:if(Ii(X),C=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(vi&&Os!==null&&(l.mode&1)!==0&&(l.flags&128)===0)lc(),Wa(),l.flags|=98560,U=!1;else if(U=oi(l),C!==null&&C.dehydrated!==null){if(o===null){if(!U)throw Error(p(318));if(U=l.memoizedState,U=U!==null?U.dehydrated:null,!U)throw Error(p(317));U[Ua]=l}else Wa(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Zs(l),U=!1}else Fs!==null&&(Ch(Fs),Fs=null),U=!0;if(!U)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=x,l):(C=C!==null,C!==(o!==null&&o.memoizedState!==null)&&C&&(l.child.flags|=8192,(l.mode&1)!==0&&(o===null||(X.current&1)!==0?es===0&&(es=3):wf())),l.updateQueue!==null&&(l.flags|=4),Zs(l),null);case 4:return N(),yf(o,l),o===null&&cl(l.stateNode.containerInfo),Zs(l),null;case 10:return Ns(l.type._context),Zs(l),null;case 17:return Ls(l.type)&&ko(),Zs(l),null;case 19:if(Ii(X),U=l.memoizedState,U===null)return Zs(l),null;if(C=(l.flags&128)!==0,oe=U.rendering,oe===null)if(C)Bd(U,!1);else{if(es!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(oe=ne(o),oe!==null){for(l.flags|=128,Bd(U,!1),C=oe.updateQueue,C!==null&&(l.updateQueue=C,l.flags|=4),l.subtreeFlags=0,C=x,x=l.child;x!==null;)U=x,o=C,U.flags&=14680066,oe=U.alternate,oe===null?(U.childLanes=0,U.lanes=o,U.child=null,U.subtreeFlags=0,U.memoizedProps=null,U.memoizedState=null,U.updateQueue=null,U.dependencies=null,U.stateNode=null):(U.childLanes=oe.childLanes,U.lanes=oe.lanes,U.child=oe.child,U.subtreeFlags=0,U.deletions=null,U.memoizedProps=oe.memoizedProps,U.memoizedState=oe.memoizedState,U.updateQueue=oe.updateQueue,U.type=oe.type,o=oe.dependencies,U.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),x=x.sibling;return Ci(X,X.current&1|2),l.child}o=o.sibling}U.tail!==null&&cn()>pc&&(l.flags|=128,C=!0,Bd(U,!1),l.lanes=4194304)}else{if(!C)if(o=ne(oe),o!==null){if(l.flags|=128,C=!0,x=o.updateQueue,x!==null&&(l.updateQueue=x,l.flags|=4),Bd(U,!0),U.tail===null&&U.tailMode==="hidden"&&!oe.alternate&&!vi)return Zs(l),null}else 2*cn()-U.renderingStartTime>pc&&x!==1073741824&&(l.flags|=128,C=!0,Bd(U,!1),l.lanes=4194304);U.isBackwards?(oe.sibling=l.child,l.child=oe):(x=U.last,x!==null?x.sibling=oe:l.child=oe,U.last=oe)}return U.tail!==null?(l=U.tail,U.rendering=l,U.tail=l.sibling,U.renderingStartTime=cn(),l.sibling=null,x=X.current,Ci(X,C?x&1|2:x&1),l):(Zs(l),null);case 22:case 23:return np(),C=l.memoizedState!==null,o!==null&&o.memoizedState!==null!==C&&(l.flags|=8192),C&&(l.mode&1)!==0?(Xa&1073741824)!==0&&(Zs(l),l.subtreeFlags&6&&(l.flags|=8192)):Zs(l),null;case 24:return null;case 25:return null}throw Error(p(156,l.tag))}function Qf(o,l){switch(ku(l),l.tag){case 1:return Ls(l.type)&&ko(),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return N(),Ii(qo),Ii(No),_e(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 5:return Z(l),null;case 13:if(Ii(X),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(p(340));Wa()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return Ii(X),null;case 4:return N(),null;case 10:return Ns(l.type._context),null;case 22:case 23:return np(),null;case 24:return null;default:return null}}var Nd=!1,bi=!1,Jo=typeof WeakSet=="function"?WeakSet:Set,zr=null;function nd(o,l){var x=o.ref;if(x!==null)if(typeof x=="function")try{x(null)}catch(C){qi(o,l,C)}else x.current=null}function $d(o,l,x){try{x()}catch(C){qi(o,l,C)}}var Pp=!1;function cm(o,l){if(Ju=us,o=ti(),xu(o)){if("selectionStart"in o)var x={start:o.selectionStart,end:o.selectionEnd};else e:{x=(x=o.ownerDocument)&&x.defaultView||window;var C=x.getSelection&&x.getSelection();if(C&&C.rangeCount!==0){x=C.anchorNode;var z=C.anchorOffset,U=C.focusNode;C=C.focusOffset;try{x.nodeType,U.nodeType}catch{x=null;break e}var oe=0,Ae=-1,Ge=-1,Et=0,Yt=0,nr=o,Qt=null;t:for(;;){for(var Pr;nr!==x||z!==0&&nr.nodeType!==3||(Ae=oe+z),nr!==U||C!==0&&nr.nodeType!==3||(Ge=oe+C),nr.nodeType===3&&(oe+=nr.nodeValue.length),(Pr=nr.firstChild)!==null;)Qt=nr,nr=Pr;for(;;){if(nr===o)break t;if(Qt===x&&++Et===z&&(Ae=oe),Qt===U&&++Yt===C&&(Ge=oe),(Pr=nr.nextSibling)!==null)break;nr=Qt,Qt=nr.parentNode}nr=Pr}x=Ae===-1||Ge===-1?null:{start:Ae,end:Ge}}else x=null}x=x||{start:0,end:0}}else x=null;for(Pu={focusedElem:o,selectionRange:x},us=!1,zr=l;zr!==null;)if(l=zr,o=l.child,(l.subtreeFlags&1028)!==0&&o!==null)o.return=l,zr=o;else for(;zr!==null;){l=zr;try{var Dr=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(Dr!==null){var jr=Dr.memoizedProps,ho=Dr.memoizedState,ft=l.stateNode,Ke=ft.getSnapshotBeforeUpdate(l.elementType===l.type?jr:xo(l.type,jr),ho);ft.__reactInternalSnapshotBeforeUpdate=Ke}break;case 3:var vt=l.stateNode.containerInfo;vt.nodeType===1?vt.textContent="":vt.nodeType===9&&vt.documentElement&&vt.removeChild(vt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163))}}catch(hr){qi(l,l.return,hr)}if(o=l.sibling,o!==null){o.return=l.return,zr=o;break}zr=l.return}return Dr=Pp,Pp=!1,Dr}function dc(o,l,x){var C=l.updateQueue;if(C=C!==null?C.lastEffect:null,C!==null){var z=C=C.next;do{if((z.tag&o)===o){var U=z.destroy;z.destroy=void 0,U!==void 0&&$d(l,x,U)}z=z.next}while(z!==C)}}function jd(o,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var x=l=l.next;do{if((x.tag&o)===o){var C=x.create;x.destroy=C()}x=x.next}while(x!==l)}}function id(o){var l=o.ref;if(l!==null){var x=o.stateNode;switch(o.tag){case 5:o=x;break;default:o=x}typeof l=="function"?l(o):l.current=o}}function Ep(o){var l=o.alternate;l!==null&&(o.alternate=null,Ep(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&(delete l[Ua],delete l[Wo],delete l[Mu],delete l[ce],delete l[tc])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function Jf(o){return o.tag===5||o.tag===3||o.tag===4}function od(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Jf(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function ep(o,l,x){var C=o.tag;if(C===5||C===6)o=o.stateNode,l?x.nodeType===8?x.parentNode.insertBefore(o,l):x.insertBefore(o,l):(x.nodeType===8?(l=x.parentNode,l.insertBefore(o,x)):(l=x,l.appendChild(o)),x=x._reactRootContainer,x!=null||l.onclick!==null||(l.onclick=Qu));else if(C!==4&&(o=o.child,o!==null))for(ep(o,l,x),o=o.sibling;o!==null;)ep(o,l,x),o=o.sibling}function $i(o,l,x){var C=o.tag;if(C===5||C===6)o=o.stateNode,l?x.insertBefore(o,l):x.appendChild(o);else if(C!==4&&(o=o.child,o!==null))for($i(o,l,x),o=o.sibling;o!==null;)$i(o,l,x),o=o.sibling}var co=null,Gl=!1;function bl(o,l,x){for(x=x.child;x!==null;)sd(o,l,x),x=x.sibling}function sd(o,l,x){if(os&&typeof os.onCommitFiberUnmount=="function")try{os.onCommitFiberUnmount(eo,x)}catch{}switch(x.tag){case 5:bi||nd(x,l);case 6:var C=co,z=Gl;co=null,bl(o,l,x),co=C,Gl=z,co!==null&&(Gl?(o=co,x=x.stateNode,o.nodeType===8?o.parentNode.removeChild(x):o.removeChild(x)):co.removeChild(x.stateNode));break;case 18:co!==null&&(Gl?(o=co,x=x.stateNode,o.nodeType===8?Dl(o.parentNode,x):o.nodeType===1&&Dl(o,x),Pn(o)):Dl(co,x.stateNode));break;case 4:C=co,z=Gl,co=x.stateNode.containerInfo,Gl=!0,bl(o,l,x),co=C,Gl=z;break;case 0:case 11:case 14:case 15:if(!bi&&(C=x.updateQueue,C!==null&&(C=C.lastEffect,C!==null))){z=C=C.next;do{var U=z,oe=U.destroy;U=U.tag,oe!==void 0&&((U&2)!==0||(U&4)!==0)&&$d(x,l,oe),z=z.next}while(z!==C)}bl(o,l,x);break;case 1:if(!bi&&(nd(x,l),C=x.stateNode,typeof C.componentWillUnmount=="function"))try{C.props=x.memoizedProps,C.state=x.memoizedState,C.componentWillUnmount()}catch(Ae){qi(x,l,Ae)}bl(o,l,x);break;case 21:bl(o,l,x);break;case 22:x.mode&1?(bi=(C=bi)||x.memoizedState!==null,bl(o,l,x),bi=C):bl(o,l,x);break;default:bl(o,l,x)}}function Ou(o){var l=o.updateQueue;if(l!==null){o.updateQueue=null;var x=o.stateNode;x===null&&(x=o.stateNode=new Jo),l.forEach(function(C){var z=Lp.bind(null,o,C);x.has(C)||(x.add(C),C.then(z,z))})}}function qa(o,l){var x=l.deletions;if(x!==null)for(var C=0;C<x.length;C++){var z=x[C];try{var U=o,oe=l,Ae=oe;e:for(;Ae!==null;){switch(Ae.tag){case 5:co=Ae.stateNode,Gl=!1;break e;case 3:co=Ae.stateNode.containerInfo,Gl=!0;break e;case 4:co=Ae.stateNode.containerInfo,Gl=!0;break e}Ae=Ae.return}if(co===null)throw Error(p(160));sd(U,oe,z),co=null,Gl=!1;var Ge=z.alternate;Ge!==null&&(Ge.return=null),z.return=null}catch(Et){qi(z,l,Et)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)_f(l,o),l=l.sibling}function _f(o,l){var x=o.alternate,C=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(qa(l,o),ka(o),C&4){try{dc(3,o,o.return),jd(3,o)}catch(jr){qi(o,o.return,jr)}try{dc(5,o,o.return)}catch(jr){qi(o,o.return,jr)}}break;case 1:qa(l,o),ka(o),C&512&&x!==null&&nd(x,x.return);break;case 5:if(qa(l,o),ka(o),C&512&&x!==null&&nd(x,x.return),o.flags&32){var z=o.stateNode;try{Gi(z,"")}catch(jr){qi(o,o.return,jr)}}if(C&4&&(z=o.stateNode,z!=null)){var U=o.memoizedProps,oe=x!==null?x.memoizedProps:U,Ae=o.type,Ge=o.updateQueue;if(o.updateQueue=null,Ge!==null)try{Ae==="input"&&U.type==="radio"&&U.name!=null&&Hr(z,U),ae(Ae,oe);var Et=ae(Ae,U);for(oe=0;oe<Ge.length;oe+=2){var Yt=Ge[oe],nr=Ge[oe+1];Yt==="style"?mo(z,nr):Yt==="dangerouslySetInnerHTML"?Ji(z,nr):Yt==="children"?Gi(z,nr):Tt(z,Yt,nr,Et)}switch(Ae){case"input":dn(z,U);break;case"textarea":Wn(z,U);break;case"select":var Qt=z._wrapperState.wasMultiple;z._wrapperState.wasMultiple=!!U.multiple;var Pr=U.value;Pr!=null?kn(z,!!U.multiple,Pr,!1):Qt!==!!U.multiple&&(U.defaultValue!=null?kn(z,!!U.multiple,U.defaultValue,!0):kn(z,!!U.multiple,U.multiple?[]:"",!1))}z[Wo]=U}catch(jr){qi(o,o.return,jr)}}break;case 6:if(qa(l,o),ka(o),C&4){if(o.stateNode===null)throw Error(p(162));z=o.stateNode,U=o.memoizedProps;try{z.nodeValue=U}catch(jr){qi(o,o.return,jr)}}break;case 3:if(qa(l,o),ka(o),C&4&&x!==null&&x.memoizedState.isDehydrated)try{Pn(l.containerInfo)}catch(jr){qi(o,o.return,jr)}break;case 4:qa(l,o),ka(o);break;case 13:qa(l,o),ka(o),z=o.child,z.flags&8192&&(U=z.memoizedState!==null,z.stateNode.isHidden=U,!U||z.alternate!==null&&z.alternate.memoizedState!==null||(vf=cn())),C&4&&Ou(o);break;case 22:if(Yt=x!==null&&x.memoizedState!==null,o.mode&1?(bi=(Et=bi)||Yt,qa(l,o),bi=Et):qa(l,o),ka(o),C&8192){if(Et=o.memoizedState!==null,(o.stateNode.isHidden=Et)&&!Yt&&(o.mode&1)!==0)for(zr=o,Yt=o.child;Yt!==null;){for(nr=zr=Yt;zr!==null;){switch(Qt=zr,Pr=Qt.child,Qt.tag){case 0:case 11:case 14:case 15:dc(4,Qt,Qt.return);break;case 1:nd(Qt,Qt.return);var Dr=Qt.stateNode;if(typeof Dr.componentWillUnmount=="function"){C=Qt,x=Qt.return;try{l=C,Dr.props=l.memoizedProps,Dr.state=l.memoizedState,Dr.componentWillUnmount()}catch(jr){qi(C,x,jr)}}break;case 5:nd(Qt,Qt.return);break;case 22:if(Qt.memoizedState!==null){wl(nr);continue}}Pr!==null?(Pr.return=Qt,zr=Pr):wl(nr)}Yt=Yt.sibling}e:for(Yt=null,nr=o;;){if(nr.tag===5){if(Yt===null){Yt=nr;try{z=nr.stateNode,Et?(U=z.style,typeof U.setProperty=="function"?U.setProperty("display","none","important"):U.display="none"):(Ae=nr.stateNode,Ge=nr.memoizedProps.style,oe=Ge!=null&&Ge.hasOwnProperty("display")?Ge.display:null,Ae.style.display=ii("display",oe))}catch(jr){qi(o,o.return,jr)}}}else if(nr.tag===6){if(Yt===null)try{nr.stateNode.nodeValue=Et?"":nr.memoizedProps}catch(jr){qi(o,o.return,jr)}}else if((nr.tag!==22&&nr.tag!==23||nr.memoizedState===null||nr===o)&&nr.child!==null){nr.child.return=nr,nr=nr.child;continue}if(nr===o)break e;for(;nr.sibling===null;){if(nr.return===null||nr.return===o)break e;Yt===nr&&(Yt=null),nr=nr.return}Yt===nr&&(Yt=null),nr.sibling.return=nr.return,nr=nr.sibling}}break;case 19:qa(l,o),ka(o),C&4&&Ou(o);break;case 21:break;default:qa(l,o),ka(o)}}function ka(o){var l=o.flags;if(l&2){try{e:{for(var x=o.return;x!==null;){if(Jf(x)){var C=x;break e}x=x.return}throw Error(p(160))}switch(C.tag){case 5:var z=C.stateNode;C.flags&32&&(Gi(z,""),C.flags&=-33);var U=od(o);$i(o,U,z);break;case 3:case 4:var oe=C.stateNode.containerInfo,Ae=od(o);ep(o,Ae,oe);break;default:throw Error(p(161))}}catch(Ge){qi(o,o.return,Ge)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function ad(o,l,x){zr=o,Kc(o)}function Kc(o,l,x){for(var C=(o.mode&1)!==0;zr!==null;){var z=zr,U=z.child;if(z.tag===22&&C){var oe=z.memoizedState!==null||Nd;if(!oe){var Ae=z.alternate,Ge=Ae!==null&&Ae.memoizedState!==null||bi;Ae=Nd;var Et=bi;if(Nd=oe,(bi=Ge)&&!Et)for(zr=z;zr!==null;)oe=zr,Ge=oe.child,oe.tag===22&&oe.memoizedState!==null?ld(z):Ge!==null?(Ge.return=oe,zr=Ge):ld(z);for(;U!==null;)zr=U,Kc(U),U=U.sibling;zr=z,Nd=Ae,bi=Et}Ka(o)}else(z.subtreeFlags&8772)!==0&&U!==null?(U.return=z,zr=U):Ka(o)}}function Ka(o){for(;zr!==null;){var l=zr;if((l.flags&8772)!==0){var x=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:bi||jd(5,l);break;case 1:var C=l.stateNode;if(l.flags&4&&!bi)if(x===null)C.componentDidMount();else{var z=l.elementType===l.type?x.memoizedProps:xo(l.type,x.memoizedProps);C.componentDidUpdate(z,x.memoizedState,C.__reactInternalSnapshotBeforeUpdate)}var U=l.updateQueue;U!==null&&a(l,U,C);break;case 3:var oe=l.updateQueue;if(oe!==null){if(x=null,l.child!==null)switch(l.child.tag){case 5:x=l.child.stateNode;break;case 1:x=l.child.stateNode}a(l,oe,x)}break;case 5:var Ae=l.stateNode;if(x===null&&l.flags&4){x=Ae;var Ge=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":Ge.autoFocus&&x.focus();break;case"img":Ge.src&&(x.src=Ge.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var Et=l.alternate;if(Et!==null){var Yt=Et.memoizedState;if(Yt!==null){var nr=Yt.dehydrated;nr!==null&&Pn(nr)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p(163))}bi||l.flags&512&&id(l)}catch(Qt){qi(l,l.return,Qt)}}if(l===o){zr=null;break}if(x=l.sibling,x!==null){x.return=l.return,zr=x;break}zr=l.return}}function wl(o){for(;zr!==null;){var l=zr;if(l===o){zr=null;break}var x=l.sibling;if(x!==null){x.return=l.return,zr=x;break}zr=l.return}}function ld(o){for(;zr!==null;){var l=zr;try{switch(l.tag){case 0:case 11:case 15:var x=l.return;try{jd(4,l)}catch(Ge){qi(l,x,Ge)}break;case 1:var C=l.stateNode;if(typeof C.componentDidMount=="function"){var z=l.return;try{C.componentDidMount()}catch(Ge){qi(l,z,Ge)}}var U=l.return;try{id(l)}catch(Ge){qi(l,U,Ge)}break;case 5:var oe=l.return;try{id(l)}catch(Ge){qi(l,oe,Ge)}}}catch(Ge){qi(l,l.return,Ge)}if(l===o){zr=null;break}var Ae=l.sibling;if(Ae!==null){Ae.return=l.return,zr=Ae;break}zr=l.return}}var Ip=Math.ceil,Ud=Je.ReactCurrentDispatcher,fc=Je.ReactCurrentOwner,Wl=Je.ReactCurrentBatchConfig,Yn=0,bo=null,wo=null,ys=0,Xa=0,ud=fs(0),es=0,Vd=null,Xc=0,Zd=0,cd=0,hd=null,da=null,vf=0,pc=1/0,Fu=null,Gd=!1,dd=null,mc=null,Wd=!1,gc=null,ts=0,Hd=0,qd=null,Yc=-1,Th=0;function Aa(){return(Yn&6)!==0?cn():Yc!==-1?Yc:Yc=cn()}function Qc(o){return(o.mode&1)===0?1:(Yn&2)!==0&&ys!==0?ys&-ys:Rd.transition!==null?(Th===0&&(Th=Ee()),Th):(o=mr,o!==0||(o=window.event,o=o===void 0?16:Ql(o.type)),o)}function Hl(o,l,x,C){if(50<Hd)throw Hd=0,qd=null,Error(p(185));ut(o,x,C),((Yn&2)===0||o!==bo)&&(o===bo&&((Yn&2)===0&&(Zd|=x),es===4&&Jc(o,ys)),Ra(o,C),x===1&&Yn===0&&(l.mode&1)===0&&(pc=cn()+500,qh&&wa()))}function Ra(o,l){var x=o.callbackNode;Q(o,l);var C=Es(o,o===bo?ys:0);if(C===0)x!==null&&el(x),o.callbackNode=null,o.callbackPriority=0;else if(l=C&-C,o.callbackPriority!==l){if(x!=null&&el(x),l===1)o.tag===0?tu(kp.bind(null,o)):yh(kp.bind(null,o)),Iu(function(){(Yn&6)===0&&wa()}),x=null;else{switch(kr(C)){case 1:x=qn;break;case 4:x=Da;break;case 16:x=is;break;case 536870912:x=Do;break;default:x=is}x=op(x,xf.bind(null,o))}o.callbackPriority=l,o.callbackNode=x}}function xf(o,l){if(Yc=-1,Th=0,(Yn&6)!==0)throw Error(p(327));var x=o.callbackNode;if(fd()&&o.callbackNode!==x)return null;var C=Es(o,o===bo?ys:0);if(C===0)return null;if((C&30)!==0||(C&o.expiredLanes)!==0||l)l=Kd(o,C);else{l=C;var z=Yn;Yn|=2;var U=bf();(bo!==o||ys!==l)&&(Fu=null,pc=cn()+500,Eh(o,l));do try{hm();break}catch(Ae){ip(o,Ae)}while(!0);yl(),Ud.current=U,Yn=z,wo!==null?l=0:(bo=null,ys=0,l=es)}if(l!==0){if(l===2&&(z=he(o),z!==0&&(C=z,l=tp(o,z))),l===1)throw x=Vd,Eh(o,0),Jc(o,C),Ra(o,cn()),x;if(l===6)Jc(o,C);else{if(z=o.current.alternate,(C&30)===0&&!Mp(z)&&(l=Kd(o,C),l===2&&(U=he(o),U!==0&&(C=U,l=tp(o,U))),l===1))throw x=Vd,Eh(o,0),Jc(o,C),Ra(o,cn()),x;switch(o.finishedWork=z,o.finishedLanes=C,l){case 0:case 1:throw Error(p(345));case 2:eh(o,da,Fu);break;case 3:if(Jc(o,C),(C&130023424)===C&&(l=vf+500-cn(),10<l)){if(Es(o,0)!==0)break;if(z=o.suspendedLanes,(z&C)!==C){Aa(),o.pingedLanes|=o.suspendedLanes&z;break}o.timeoutHandle=hl(eh.bind(null,o,da,Fu),l);break}eh(o,da,Fu);break;case 4:if(Jc(o,C),(C&4194240)===C)break;for(l=o.eventTimes,z=-1;0<C;){var oe=31-go(C);U=1<<oe,oe=l[oe],oe>z&&(z=oe),C&=~U}if(C=z,C=cn()-C,C=(120>C?120:480>C?480:1080>C?1080:1920>C?1920:3e3>C?3e3:4320>C?4320:1960*Ip(C/1960))-C,10<C){o.timeoutHandle=hl(eh.bind(null,o,da,Fu),C);break}eh(o,da,Fu);break;case 5:eh(o,da,Fu);break;default:throw Error(p(329))}}}return Ra(o,cn()),o.callbackNode===x?xf.bind(null,o):null}function tp(o,l){var x=hd;return o.current.memoizedState.isDehydrated&&(Eh(o,l).flags|=256),o=Kd(o,l),o!==2&&(l=da,da=x,l!==null&&Ch(l)),o}function Ch(o){da===null?da=o:da.push.apply(da,o)}function Mp(o){for(var l=o;;){if(l.flags&16384){var x=l.updateQueue;if(x!==null&&(x=x.stores,x!==null))for(var C=0;C<x.length;C++){var z=x[C],U=z.getSnapshot;z=z.value;try{if(!wt(U(),z))return!1}catch{return!1}}}if(x=l.child,l.subtreeFlags&16384&&x!==null)x.return=l,l=x;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Jc(o,l){for(l&=~cd,l&=~Zd,o.suspendedLanes|=l,o.pingedLanes&=~l,o=o.expirationTimes;0<l;){var x=31-go(l),C=1<<x;o[x]=-1,l&=~C}}function kp(o){if((Yn&6)!==0)throw Error(p(327));fd();var l=Es(o,0);if((l&1)===0)return Ra(o,cn()),null;var x=Kd(o,l);if(o.tag!==0&&x===2){var C=he(o);C!==0&&(l=C,x=tp(o,C))}if(x===1)throw x=Vd,Eh(o,0),Jc(o,l),Ra(o,cn()),x;if(x===6)throw Error(p(345));return o.finishedWork=o.current.alternate,o.finishedLanes=l,eh(o,da,Fu),Ra(o,cn()),null}function rp(o,l){var x=Yn;Yn|=1;try{return o(l)}finally{Yn=x,Yn===0&&(pc=cn()+500,qh&&wa())}}function Ph(o){gc!==null&&gc.tag===0&&(Yn&6)===0&&fd();var l=Yn;Yn|=1;var x=Wl.transition,C=mr;try{if(Wl.transition=null,mr=1,o)return o()}finally{mr=C,Wl.transition=x,Yn=l,(Yn&6)===0&&wa()}}function np(){Xa=ud.current,Ii(ud)}function Eh(o,l){o.finishedWork=null,o.finishedLanes=0;var x=o.timeoutHandle;if(x!==-1&&(o.timeoutHandle=-1,Eu(x)),wo!==null)for(x=wo.return;x!==null;){var C=x;switch(ku(C),C.tag){case 1:C=C.type.childContextTypes,C!=null&&ko();break;case 3:N(),Ii(qo),Ii(No),_e();break;case 5:Z(C);break;case 4:N();break;case 13:Ii(X);break;case 19:Ii(X);break;case 10:Ns(C.type._context);break;case 22:case 23:np()}x=x.return}if(bo=o,wo=o=Sl(o.current,null),ys=Xa=l,es=0,Vd=null,cd=Zd=Xc=0,da=hd=null,si!==null){for(l=0;l<si.length;l++)if(x=si[l],C=x.interleaved,C!==null){x.interleaved=null;var z=C.next,U=x.pending;if(U!==null){var oe=U.next;U.next=z,C.next=oe}x.pending=C}si=null}return o}function ip(o,l){do{var x=wo;try{if(yl(),Se.current=zu,je){for(var C=Me.memoizedState;C!==null;){var z=C.queue;z!==null&&(z.pending=null),C=C.next}je=!1}if(Le=0,Ne=De=Me=null,at=!1,It=0,fc.current=null,x===null||x.return===null){es=1,Vd=l,wo=null;break}e:{var U=o,oe=x.return,Ae=x,Ge=l;if(l=ys,Ae.flags|=32768,Ge!==null&&typeof Ge=="object"&&typeof Ge.then=="function"){var Et=Ge,Yt=Ae,nr=Yt.tag;if((Yt.mode&1)===0&&(nr===0||nr===11||nr===15)){var Qt=Yt.alternate;Qt?(Yt.updateQueue=Qt.updateQueue,Yt.memoizedState=Qt.memoizedState,Yt.lanes=Qt.lanes):(Yt.updateQueue=null,Yt.memoizedState=null)}var Pr=Gf(oe);if(Pr!==null){Pr.flags&=-257,Wf(Pr,oe,Ae,U,l),Pr.mode&1&&Dd(U,Et,l),l=Pr,Ge=Et;var Dr=l.updateQueue;if(Dr===null){var jr=new Set;jr.add(Ge),l.updateQueue=jr}else Dr.add(Ge);break e}else{if((l&1)===0){Dd(U,Et,l),wf();break e}Ge=Error(p(426))}}else if(vi&&Ae.mode&1){var ho=Gf(oe);if(ho!==null){(ho.flags&65536)===0&&(ho.flags|=256),Wf(ho,oe,Ae,U,l),gl(xl(Ge,Ae));break e}}U=Ge=xl(Ge,Ae),es!==4&&(es=2),hd===null?hd=[U]:hd.push(U),U=oe;do{switch(U.tag){case 3:U.flags|=65536,l&=-l,U.lanes|=l;var ft=xh(U,Ge,l);e(U,ft);break e;case 1:Ae=Ge;var Ke=U.type,vt=U.stateNode;if((U.flags&128)===0&&(typeof Ke.getDerivedStateFromError=="function"||vt!==null&&typeof vt.componentDidCatch=="function"&&(mc===null||!mc.has(vt)))){U.flags|=65536,l&=-l,U.lanes|=l;var hr=Ld(U,Ae,l);e(U,hr);break e}}U=U.return}while(U!==null)}Rp(x)}catch(Vr){l=Vr,wo===x&&x!==null&&(wo=x=x.return);continue}break}while(!0)}function bf(){var o=Ud.current;return Ud.current=zu,o===null?zu:o}function wf(){(es===0||es===3||es===2)&&(es=4),bo===null||(Xc&268435455)===0&&(Zd&268435455)===0||Jc(bo,ys)}function Kd(o,l){var x=Yn;Yn|=2;var C=bf();(bo!==o||ys!==l)&&(Fu=null,Eh(o,l));do try{Ap();break}catch(z){ip(o,z)}while(!0);if(yl(),Yn=x,Ud.current=C,wo!==null)throw Error(p(261));return bo=null,ys=0,es}function Ap(){for(;wo!==null;)Xd(wo)}function hm(){for(;wo!==null&&!Zo();)Xd(wo)}function Xd(o){var l=Tf(o.alternate,o,Xa);o.memoizedProps=o.pendingProps,l===null?Rp(o):wo=l,fc.current=null}function Rp(o){var l=o;do{var x=l.alternate;if(o=l.return,(l.flags&32768)===0){if(x=Yf(x,l,Xa),x!==null){wo=x;return}}else{if(x=Qf(x,l),x!==null){x.flags&=32767,wo=x;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{es=6,wo=null;return}}if(l=l.sibling,l!==null){wo=l;return}wo=l=o}while(l!==null);es===0&&(es=5)}function eh(o,l,x){var C=mr,z=Wl.transition;try{Wl.transition=null,mr=1,dm(o,l,x,C)}finally{Wl.transition=z,mr=C}return null}function dm(o,l,x,C){do fd();while(gc!==null);if((Yn&6)!==0)throw Error(p(327));x=o.finishedWork;var z=o.finishedLanes;if(x===null)return null;if(o.finishedWork=null,o.finishedLanes=0,x===o.current)throw Error(p(177));o.callbackNode=null,o.callbackPriority=0;var U=x.lanes|x.childLanes;if(Dt(o,U),o===bo&&(wo=bo=null,ys=0),(x.subtreeFlags&2064)===0&&(x.flags&2064)===0||Wd||(Wd=!0,op(is,function(){return fd(),null})),U=(x.flags&15990)!==0,(x.subtreeFlags&15990)!==0||U){U=Wl.transition,Wl.transition=null;var oe=mr;mr=1;var Ae=Yn;Yn|=4,fc.current=null,cm(o,x),_f(x,o),Zh(Pu),us=!!Ju,Pu=Ju=null,o.current=x,ad(x),La(),Yn=Ae,mr=oe,Wl.transition=U}else o.current=x;if(Wd&&(Wd=!1,gc=o,ts=z),U=o.pendingLanes,U===0&&(mc=null),tl(x.stateNode),Ra(o,cn()),l!==null)for(C=o.onRecoverableError,x=0;x<l.length;x++)z=l[x],C(z.value,{componentStack:z.stack,digest:z.digest});if(Gd)throw Gd=!1,o=dd,dd=null,o;return(ts&1)!==0&&o.tag!==0&&fd(),U=o.pendingLanes,(U&1)!==0?o===qd?Hd++:(Hd=0,qd=o):Hd=0,wa(),null}function fd(){if(gc!==null){var o=kr(ts),l=Wl.transition,x=mr;try{if(Wl.transition=null,mr=16>o?16:o,gc===null)var C=!1;else{if(o=gc,gc=null,ts=0,(Yn&6)!==0)throw Error(p(331));var z=Yn;for(Yn|=4,zr=o.current;zr!==null;){var U=zr,oe=U.child;if((zr.flags&16)!==0){var Ae=U.deletions;if(Ae!==null){for(var Ge=0;Ge<Ae.length;Ge++){var Et=Ae[Ge];for(zr=Et;zr!==null;){var Yt=zr;switch(Yt.tag){case 0:case 11:case 15:dc(8,Yt,U)}var nr=Yt.child;if(nr!==null)nr.return=Yt,zr=nr;else for(;zr!==null;){Yt=zr;var Qt=Yt.sibling,Pr=Yt.return;if(Ep(Yt),Yt===Et){zr=null;break}if(Qt!==null){Qt.return=Pr,zr=Qt;break}zr=Pr}}}var Dr=U.alternate;if(Dr!==null){var jr=Dr.child;if(jr!==null){Dr.child=null;do{var ho=jr.sibling;jr.sibling=null,jr=ho}while(jr!==null)}}zr=U}}if((U.subtreeFlags&2064)!==0&&oe!==null)oe.return=U,zr=oe;else e:for(;zr!==null;){if(U=zr,(U.flags&2048)!==0)switch(U.tag){case 0:case 11:case 15:dc(9,U,U.return)}var ft=U.sibling;if(ft!==null){ft.return=U.return,zr=ft;break e}zr=U.return}}var Ke=o.current;for(zr=Ke;zr!==null;){oe=zr;var vt=oe.child;if((oe.subtreeFlags&2064)!==0&&vt!==null)vt.return=oe,zr=vt;else e:for(oe=Ke;zr!==null;){if(Ae=zr,(Ae.flags&2048)!==0)try{switch(Ae.tag){case 0:case 11:case 15:jd(9,Ae)}}catch(Vr){qi(Ae,Ae.return,Vr)}if(Ae===oe){zr=null;break e}var hr=Ae.sibling;if(hr!==null){hr.return=Ae.return,zr=hr;break e}zr=Ae.return}}if(Yn=z,wa(),os&&typeof os.onPostCommitFiberRoot=="function")try{os.onPostCommitFiberRoot(eo,o)}catch{}C=!0}return C}finally{mr=x,Wl.transition=l}}return!1}function Sf(o,l,x){l=xl(x,l),l=xh(o,l,1),o=aa(o,l,1),l=Aa(),o!==null&&(ut(o,1,l),Ra(o,l))}function qi(o,l,x){if(o.tag===3)Sf(o,o,x);else for(;l!==null;){if(l.tag===3){Sf(l,o,x);break}else if(l.tag===1){var C=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof C.componentDidCatch=="function"&&(mc===null||!mc.has(C))){o=xl(x,o),o=Ld(l,o,1),l=aa(l,o,1),o=Aa(),l!==null&&(ut(l,1,o),Ra(l,o));break}}l=l.return}}function fm(o,l,x){var C=o.pingCache;C!==null&&C.delete(l),l=Aa(),o.pingedLanes|=o.suspendedLanes&x,bo===o&&(ys&x)===x&&(es===4||es===3&&(ys&130023424)===ys&&500>cn()-vf?Eh(o,0):cd|=x),Ra(o,l)}function zp(o,l){l===0&&((o.mode&1)===0?l=1:(l=Yl,Yl<<=1,(Yl&130023424)===0&&(Yl=4194304)));var x=Aa();o=Ta(o,l),o!==null&&(ut(o,l,x),Ra(o,x))}function Yd(o){var l=o.memoizedState,x=0;l!==null&&(x=l.retryLane),zp(o,x)}function Lp(o,l){var x=0;switch(o.tag){case 13:var C=o.stateNode,z=o.memoizedState;z!==null&&(x=z.retryLane);break;case 19:C=o.stateNode;break;default:throw Error(p(314))}C!==null&&C.delete(l),zp(o,x)}var Tf;Tf=function(o,l,x){if(o!==null)if(o.memoizedProps!==l.pendingProps||qo.current)Ma=!0;else{if((o.lanes&x)===0&&(l.flags&128)===0)return Ma=!1,gf(o,l,x);Ma=(o.flags&131072)!==0}else Ma=!1,vi&&(l.flags&1048576)!==0&&df(l,oc,l.index);switch(l.lanes=0,l.tag){case 2:var C=l.type;ha(o,l),o=l.pendingProps;var z=pl(l,No.current);oa(l,x),z=Jt(null,l,C,o,z,x);var U=er();return l.flags|=1,typeof z=="object"&&z!==null&&typeof z.render=="function"&&z.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,Ls(C)?(U=!0,Wi(l)):U=!1,l.memoizedState=z.state!==null&&z.state!==void 0?z.state:null,Wc(l),z.updater=vl,l.stateNode=z,z._reactInternals=l,ff(l,C,o,x),l=mf(null,l,C,!0,U,x)):(l.tag=0,vi&&U&&sc(l),Qo(null,l,z,x),l=l.child),l;case 16:C=l.elementType;e:{switch(ha(o,l),o=l.pendingProps,z=C._init,C=z(C._payload),l.type=C,z=l.tag=Dp(C),o=xo(C,o),z){case 0:l=Jh(null,l,C,o,x);break e;case 1:l=ed(null,l,C,o,x);break e;case 11:l=Hf(null,l,C,o,x);break e;case 14:l=pf(null,l,C,xo(C.type,o),x);break e}throw Error(p(306,C,""))}return l;case 0:return C=l.type,z=l.pendingProps,z=l.elementType===C?z:xo(C,z),Jh(o,l,C,z,x);case 1:return C=l.type,z=l.pendingProps,z=l.elementType===C?z:xo(C,z),ed(o,l,C,z,x);case 3:e:{if(Kf(l),o===null)throw Error(p(387));C=l.pendingProps,U=l.memoizedState,z=U.element,Kh(o,l),r(l,C,null,x);var oe=l.memoizedState;if(C=oe.element,U.isDehydrated)if(U={element:C,isDehydrated:!1,cache:oe.cache,pendingSuspenseBoundaries:oe.pendingSuspenseBoundaries,transitions:oe.transitions},l.updateQueue.baseState=U,l.memoizedState=U,l.flags&256){z=xl(Error(p(423)),l),l=Du(o,l,C,x,z);break e}else if(C!==z){z=xl(Error(p(424)),l),l=Du(o,l,C,x,z);break e}else for(Os=_o(l.stateNode.containerInfo.firstChild),Xo=l,vi=!0,Fs=null,x=Ur(l,null,C,x),l.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(Wa(),C===z){l=Zl(o,l,x);break e}Qo(o,l,C,x)}l=l.child}return l;case 5:return G(l),o===null&&ia(l),C=l.type,z=l.pendingProps,U=o!==null?o.memoizedProps:null,oe=z.children,Vc(C,z)?oe=null:U!==null&&Vc(C,U)&&(l.flags|=32),bh(o,l),Qo(o,l,oe,x),l.child;case 6:return o===null&&ia(l),null;case 13:return Fd(o,l,x);case 4:return D(l,l.stateNode.containerInfo),C=l.pendingProps,o===null?l.child=dr(l,null,C,x):Qo(o,l,C,x),l.child;case 11:return C=l.type,z=l.pendingProps,z=l.elementType===C?z:xo(C,z),Hf(o,l,C,z,x);case 7:return Qo(o,l,l.pendingProps,x),l.child;case 8:return Qo(o,l,l.pendingProps.children,x),l.child;case 12:return Qo(o,l,l.pendingProps.children,x),l.child;case 10:e:{if(C=l.type._context,z=l.pendingProps,U=l.memoizedProps,oe=z.value,Ci(nu,C._currentValue),C._currentValue=oe,U!==null)if(wt(U.value,oe)){if(U.children===z.children&&!qo.current){l=Zl(o,l,x);break e}}else for(U=l.child,U!==null&&(U.return=l);U!==null;){var Ae=U.dependencies;if(Ae!==null){oe=U.child;for(var Ge=Ae.firstContext;Ge!==null;){if(Ge.context===C){if(U.tag===1){Ge=sa(-1,x&-x),Ge.tag=2;var Et=U.updateQueue;if(Et!==null){Et=Et.shared;var Yt=Et.pending;Yt===null?Ge.next=Ge:(Ge.next=Yt.next,Yt.next=Ge),Et.pending=Ge}}U.lanes|=x,Ge=U.alternate,Ge!==null&&(Ge.lanes|=x),$o(U.return,x,l),Ae.lanes|=x;break}Ge=Ge.next}}else if(U.tag===10)oe=U.type===l.type?null:U.child;else if(U.tag===18){if(oe=U.return,oe===null)throw Error(p(341));oe.lanes|=x,Ae=oe.alternate,Ae!==null&&(Ae.lanes|=x),$o(oe,x,l),oe=U.sibling}else oe=U.child;if(oe!==null)oe.return=U;else for(oe=U;oe!==null;){if(oe===l){oe=null;break}if(U=oe.sibling,U!==null){U.return=oe.return,oe=U;break}oe=oe.return}U=oe}Qo(o,l,z.children,x),l=l.child}return l;case 9:return z=l.type,C=l.pendingProps.children,oa(l,x),z=$n(z),C=C(z),l.flags|=1,Qo(o,l,C,x),l.child;case 14:return C=l.type,z=xo(C,l.pendingProps),z=xo(C.type,z),pf(o,l,C,z,x);case 15:return ca(o,l,l.type,l.pendingProps,x);case 17:return C=l.type,z=l.pendingProps,z=l.elementType===C?z:xo(C,z),ha(o,l),l.tag=1,Ls(C)?(o=!0,Wi(l)):o=!1,oa(l,x),Hc(l,C,z),ff(l,C,z,x),mf(null,l,C,!0,o,x);case 19:return Vl(o,l,x);case 22:return qf(o,l,x)}throw Error(p(156,l.tag))};function op(o,l){return Ps(o,l)}function Ao(o,l,x,C){this.tag=o,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=C,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ya(o,l,x,C){return new Ao(o,l,x,C)}function Cf(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Dp(o){if(typeof o=="function")return Cf(o)?1:0;if(o!=null){if(o=o.$$typeof,o===st)return 11;if(o===Cr)return 14}return 2}function Sl(o,l){var x=o.alternate;return x===null?(x=Ya(o.tag,l,o.key,o.mode),x.elementType=o.elementType,x.type=o.type,x.stateNode=o.stateNode,x.alternate=o,o.alternate=x):(x.pendingProps=l,x.type=o.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=o.flags&14680064,x.childLanes=o.childLanes,x.lanes=o.lanes,x.child=o.child,x.memoizedProps=o.memoizedProps,x.memoizedState=o.memoizedState,x.updateQueue=o.updateQueue,l=o.dependencies,x.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},x.sibling=o.sibling,x.index=o.index,x.ref=o.ref,x}function pd(o,l,x,C,z,U){var oe=2;if(C=o,typeof o=="function")Cf(o)&&(oe=1);else if(typeof o=="string")oe=5;else e:switch(o){case yt:return Ih(x.children,z,U,l);case ze:oe=8,z|=8;break;case $e:return o=Ya(12,x,l,z|2),o.elementType=$e,o.lanes=U,o;case zt:return o=Ya(13,x,l,z),o.elementType=zt,o.lanes=U,o;case tr:return o=Ya(19,x,l,z),o.elementType=tr,o.lanes=U,o;case or:return Pf(x,z,U,l);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case re:oe=10;break e;case it:oe=9;break e;case st:oe=11;break e;case Cr:oe=14;break e;case xr:oe=16,C=null;break e}throw Error(p(130,o==null?o:typeof o,""))}return l=Ya(oe,x,l,z),l.elementType=o,l.type=C,l.lanes=U,l}function Ih(o,l,x,C){return o=Ya(7,o,C,l),o.lanes=x,o}function Pf(o,l,x,C){return o=Ya(22,o,C,l),o.elementType=or,o.lanes=x,o.stateNode={isHidden:!1},o}function sp(o,l,x){return o=Ya(6,o,null,l),o.lanes=x,o}function ap(o,l,x){return l=Ya(4,o.children!==null?o.children:[],o.key,l),l.lanes=x,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}function Op(o,l,x,C,z){this.tag=l,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=C,this.onRecoverableError=z,this.mutableSourceEagerHydrationData=null}function Gs(o,l,x,C,z,U,oe,Ae,Ge){return o=new Op(o,l,x,Ae,Ge),l===1?(l=1,U===!0&&(l|=8)):l=0,U=Ya(3,null,null,l),o.current=U,U.stateNode=o,U.memoizedState={element:C,isDehydrated:x,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wc(U),o}function lp(o,l,x){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:nt,key:C==null?null:""+C,children:o,containerInfo:l,implementation:x}}function up(o){if(!o)return ba;o=o._reactInternals;e:{if(Vn(o)!==o||o.tag!==1)throw Error(p(170));var l=o;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(Ls(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(p(171))}if(o.tag===1){var x=o.type;if(Ls(x))return rc(o,x,l)}return l}function yc(o,l,x,C,z,U,oe,Ae,Ge){return o=Gs(x,C,!0,o,z,U,oe,Ae,Ge),o.context=up(null),x=o.current,C=Aa(),z=Qc(x),U=sa(C,z),U.callback=l??null,aa(x,U,z),o.current.lanes=z,ut(o,z,C),Ra(o,C),o}function Mh(o,l,x,C){var z=l.current,U=Aa(),oe=Qc(z);return x=up(x),l.context===null?l.context=x:l.pendingContext=x,l=sa(U,oe),l.payload={element:o},C=C===void 0?null:C,C!==null&&(l.callback=C),o=aa(z,l,oe),o!==null&&(Hl(o,z,oe,U),g(o,z,oe)),oe}function th(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function kh(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var x=o.retryLane;o.retryLane=x!==0&&x<l?x:l}}function md(o,l){kh(o,l),(o=o.alternate)&&kh(o,l)}function Ef(){return null}var Fp=typeof reportError=="function"?reportError:function(o){console.error(o)};function If(o){this._internalRoot=o}gd.prototype.render=If.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(p(409));Mh(o,l,null,null)},gd.prototype.unmount=If.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;Ph(function(){Mh(null,o,null,null)}),l[zs]=null}};function gd(o){this._internalRoot=o}gd.prototype.unstable_scheduleHydration=function(o){if(o){var l=to();o={blockedOn:null,target:o,priority:l};for(var x=0;x<On.length&&l!==0&&l<On[x].priority;x++);On.splice(x,0,o),x===0&&ls(o)}};function Mf(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function kf(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function cp(){}function Bp(o,l,x,C,z){if(z){if(typeof C=="function"){var U=C;C=function(){var Et=th(oe);U.call(Et)}}var oe=yc(l,C,o,0,null,!1,!1,"",cp);return o._reactRootContainer=oe,o[zs]=oe.current,cl(o.nodeType===8?o.parentNode:o),Ph(),oe}for(;z=o.lastChild;)o.removeChild(z);if(typeof C=="function"){var Ae=C;C=function(){var Et=th(Ge);Ae.call(Et)}}var Ge=Gs(o,0,!1,null,null,!1,!1,"",cp);return o._reactRootContainer=Ge,o[zs]=Ge.current,cl(o.nodeType===8?o.parentNode:o),Ph(function(){Mh(l,Ge,x,C)}),Ge}function _c(o,l,x,C,z){var U=x._reactRootContainer;if(U){var oe=U;if(typeof z=="function"){var Ae=z;z=function(){var Ge=th(oe);Ae.call(Ge)}}Mh(l,oe,o,z)}else oe=Bp(x,l,o,z,C);return th(oe)}yr=function(o){switch(o.tag){case 3:var l=o.stateNode;if(l.current.memoizedState.isDehydrated){var x=Oa(l.pendingLanes);x!==0&&(sr(l,x|1),Ra(l,cn()),(Yn&6)===0&&(pc=cn()+500,wa()))}break;case 13:Ph(function(){var C=Ta(o,1);if(C!==null){var z=Aa();Hl(C,o,1,z)}}),md(o,1)}},Nn=function(o){if(o.tag===13){var l=Ta(o,134217728);if(l!==null){var x=Aa();Hl(l,o,134217728,x)}md(o,134217728)}},yi=function(o){if(o.tag===13){var l=Qc(o),x=Ta(o,l);if(x!==null){var C=Aa();Hl(x,o,l,C)}md(o,l)}},to=function(){return mr},Jr=function(o,l){var x=mr;try{return mr=o,l()}finally{mr=x}},Ue=function(o,l,x){switch(l){case"input":if(dn(o,x),l=x.name,x.type==="radio"&&l!=null){for(x=o;x.parentNode;)x=x.parentNode;for(x=x.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<x.length;l++){var C=x[l];if(C!==o&&C.form===o.form){var z=eu(C);if(!z)throw Error(p(90));tn(C),dn(C,z)}}}break;case"textarea":Wn(o,x);break;case"select":l=x.value,l!=null&&kn(o,!!x.multiple,l,!1)}},Xe=rp,Lt=Ph;var hp={usingClientEntryPoint:!1,Events:[Ho,gn,eu,rt,dt,rp]},Qd={findFiberByHostInstance:dl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Np={bundleType:Qd.bundleType,version:Qd.version,rendererPackageName:Qd.rendererPackageName,rendererConfig:Qd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Je.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=Ys(o),o===null?null:o.stateNode},findFiberByHostInstance:Qd.findFiberByHostInstance||Ef,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Af=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Af.isDisabled&&Af.supportsFiber)try{eo=Af.inject(Np),os=Af}catch{}}return Nu.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hp,Nu.createPortal=function(o,l){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Mf(l))throw Error(p(200));return lp(o,l,null,x)},Nu.createRoot=function(o,l){if(!Mf(o))throw Error(p(299));var x=!1,C="",z=Fp;return l!=null&&(l.unstable_strictMode===!0&&(x=!0),l.identifierPrefix!==void 0&&(C=l.identifierPrefix),l.onRecoverableError!==void 0&&(z=l.onRecoverableError)),l=Gs(o,1,!1,null,null,x,!1,C,z),o[zs]=l.current,cl(o.nodeType===8?o.parentNode:o),new If(l)},Nu.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(p(188)):(o=Object.keys(o).join(","),Error(p(268,o)));return o=Ys(l),o=o===null?null:o.stateNode,o},Nu.flushSync=function(o){return Ph(o)},Nu.hydrate=function(o,l,x){if(!kf(l))throw Error(p(200));return _c(null,o,l,!0,x)},Nu.hydrateRoot=function(o,l,x){if(!Mf(o))throw Error(p(405));var C=x!=null&&x.hydratedSources||null,z=!1,U="",oe=Fp;if(x!=null&&(x.unstable_strictMode===!0&&(z=!0),x.identifierPrefix!==void 0&&(U=x.identifierPrefix),x.onRecoverableError!==void 0&&(oe=x.onRecoverableError)),l=yc(l,null,o,1,x??null,z,!1,U,oe),o[zs]=l.current,cl(o),C)for(o=0;o<C.length;o++)x=C[o],z=x._getVersion,z=z(x._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[x,z]:l.mutableSourceEagerHydrationData.push(x,z);return new gd(l)},Nu.render=function(o,l,x){if(!kf(l))throw Error(p(200));return _c(null,o,l,!1,x)},Nu.unmountComponentAtNode=function(o){if(!kf(o))throw Error(p(40));return o._reactRootContainer?(Ph(function(){_c(null,null,o,!1,function(){o._reactRootContainer=null,o[zs]=null})}),!0):!1},Nu.unstable_batchedUpdates=rp,Nu.unstable_renderSubtreeIntoContainer=function(o,l,x,C){if(!kf(x))throw Error(p(200));if(o==null||o._reactInternals===void 0)throw Error(p(38));return _c(o,l,x,!1,C)},Nu.version="18.3.1-next-f1338f8080-20240426",Nu}var Wv;function dw(){if(Wv)return Ky.exports;Wv=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(m){console.error(m)}}return c(),Ky.exports=hw(),Ky.exports}var Hv;function fw(){if(Hv)return Og;Hv=1;var c=dw();return Og.createRoot=c.createRoot,Og.hydrateRoot=c.hydrateRoot,Og}var Nx=fw();const pw=py(Nx);var Zt=eg();const fu=py(Zt),M_=ow({__proto__:null,default:fu},[Zt]);var Qy={exports:{}},Jy,qv;function mw(){if(qv)return Jy;qv=1;var c="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Jy=c,Jy}var e_,Kv;function gw(){if(Kv)return e_;Kv=1;var c=mw();function m(){}function p(){}return p.resetWarningCache=m,e_=function(){function T(M,u,J,Y,ve,de){if(de!==c){var Te=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw Te.name="Invariant Violation",Te}}T.isRequired=T;function P(){return T}var O={array:T,bigint:T,bool:T,func:T,number:T,object:T,string:T,symbol:T,any:T,arrayOf:P,element:T,elementType:T,instanceOf:P,node:T,objectOf:P,oneOf:P,oneOfType:P,shape:P,exact:P,checkPropTypes:p,resetWarningCache:m};return O.PropTypes=O,O},e_}var Xv;function yw(){return Xv||(Xv=1,Qy.exports=gw()()),Qy.exports}var _w=yw();const Fn=py(_w);var Yv=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),vw=new Uint8Array(16);function xw(){if(!Yv)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Yv(vw)}var $x=[];for(var Fg=0;Fg<256;++Fg)$x[Fg]=(Fg+256).toString(16).substr(1);function bw(c,m){var p=0,T=$x;return[T[c[p++]],T[c[p++]],T[c[p++]],T[c[p++]],"-",T[c[p++]],T[c[p++]],"-",T[c[p++]],T[c[p++]],"-",T[c[p++]],T[c[p++]],"-",T[c[p++]],T[c[p++]],T[c[p++]],T[c[p++]],T[c[p++]],T[c[p++]]].join("")}function ww(c,m,p){var T=m&&p||0;typeof c=="string"&&(m=c==="binary"?new Array(16):null,c=null),c=c||{};var P=c.random||(c.rng||xw)();if(P[6]=P[6]&15|64,P[8]=P[8]&63|128,m)for(var O=0;O<16;++O)m[T+O]=P[O];return m||bw(P)}function Qv(c,m){var p=Object.keys(c);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(c);m&&(T=T.filter(function(P){return Object.getOwnPropertyDescriptor(c,P).enumerable})),p.push.apply(p,T)}return p}function k_(c){for(var m=1;m<arguments.length;m++){var p=arguments[m]!=null?arguments[m]:{};m%2?Qv(Object(p),!0).forEach(function(T){Gm(c,T,p[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(p)):Qv(Object(p)).forEach(function(T){Object.defineProperty(c,T,Object.getOwnPropertyDescriptor(p,T))})}return c}function Sw(c,m){if(!(c instanceof m))throw new TypeError("Cannot call a class as a function")}function Jv(c,m){for(var p=0;p<m.length;p++){var T=m[p];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(c,T.key,T)}}function Tw(c,m,p){return m&&Jv(c.prototype,m),p&&Jv(c,p),Object.defineProperty(c,"prototype",{writable:!1}),c}function Gm(c,m,p){return m in c?Object.defineProperty(c,m,{value:p,enumerable:!0,configurable:!0,writable:!0}):c[m]=p,c}function iy(){return iy=Object.assign?Object.assign.bind():function(c){for(var m=1;m<arguments.length;m++){var p=arguments[m];for(var T in p)Object.prototype.hasOwnProperty.call(p,T)&&(c[T]=p[T])}return c},iy.apply(this,arguments)}function Cw(c,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(m&&m.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),Object.defineProperty(c,"prototype",{writable:!1}),m&&A_(c,m)}function oy(c){return oy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(p){return p.__proto__||Object.getPrototypeOf(p)},oy(c)}function A_(c,m){return A_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(T,P){return T.__proto__=P,T},A_(c,m)}function Pw(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ew(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function Iw(c,m){if(m&&(typeof m=="object"||typeof m=="function"))return m;if(m!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ew(c)}function Mw(c){var m=Pw();return function(){var T=oy(c),P;if(m){var O=oy(this).constructor;P=Reflect.construct(T,arguments,O)}else P=T.apply(this,arguments);return Iw(this,P)}}function kw(c,m){if(c){if(typeof c=="string")return e0(c,m);var p=Object.prototype.toString.call(c).slice(8,-1);if(p==="Object"&&c.constructor&&(p=c.constructor.name),p==="Map"||p==="Set")return Array.from(c);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return e0(c,m)}}function e0(c,m){(m==null||m>c.length)&&(m=c.length);for(var p=0,T=new Array(m);p<m;p++)T[p]=c[p];return T}function Aw(c,m){var p=typeof Symbol<"u"&&c[Symbol.iterator]||c["@@iterator"];if(!p){if(Array.isArray(c)||(p=kw(c))||m){p&&(c=p);var T=0,P=function(){};return{s:P,n:function(){return T>=c.length?{done:!0}:{done:!1,value:c[T++]}},e:function(J){throw J},f:P}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var O=!0,M=!1,u;return{s:function(){p=p.call(c)},n:function(){var J=p.next();return O=J.done,J},e:function(J){M=!0,u=J},f:function(){try{!O&&p.return!=null&&p.return()}finally{if(M)throw u}}}}var t0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Bg=function(c){return c&&c.Math==Math&&c},af=Bg(typeof globalThis=="object"&&globalThis)||Bg(typeof window=="object"&&window)||Bg(typeof self=="object"&&self)||Bg(typeof t0=="object"&&t0)||function(){return this}()||Function("return this")(),ov={},lf=function(c){try{return!!c()}catch{return!0}},Rw=lf,Zf=!Rw(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),zw=lf,sv=!zw(function(){var c=(function(){}).bind();return typeof c!="function"||c.hasOwnProperty("prototype")}),Lw=sv,Ng=Function.prototype.call,av=Lw?Ng.bind(Ng):function(){return Ng.apply(Ng,arguments)},jx={},Ux={}.propertyIsEnumerable,Vx=Object.getOwnPropertyDescriptor,Dw=Vx&&!Ux.call({1:2},1);jx.f=Dw?function(m){var p=Vx(this,m);return!!p&&p.enumerable}:Ux;var Zx=function(c,m){return{enumerable:!(c&1),configurable:!(c&2),writable:!(c&4),value:m}},Gx=sv,Wx=Function.prototype,R_=Wx.call,Ow=Gx&&Wx.bind.bind(R_,R_),Hx=function(c){return Gx?Ow(c):function(){return R_.apply(c,arguments)}},qx=Hx,Fw=qx({}.toString),Bw=qx("".slice),my=function(c){return Bw(Fw(c),8,-1)},Nw=my,$w=Hx,Ed=function(c){if(Nw(c)==="Function")return $w(c)},jw=Ed,Uw=lf,Vw=my,t_=Object,Zw=jw("".split),Kx=Uw(function(){return!t_("z").propertyIsEnumerable(0)})?function(c){return Vw(c)=="String"?Zw(c,""):t_(c)}:t_,Xx=function(c){return c==null},Gw=Xx,Ww=TypeError,Yx=function(c){if(Gw(c))throw Ww("Can't call method on "+c);return c},Hw=Kx,qw=Yx,gy=function(c){return Hw(qw(c))},z_=typeof document=="object"&&document.all,Kw=typeof z_>"u"&&z_!==void 0,Qx={all:z_,IS_HTMLDDA:Kw},Jx=Qx,Xw=Jx.all,lh=Jx.IS_HTMLDDA?function(c){return typeof c=="function"||c===Xw}:function(c){return typeof c=="function"},r0=lh,e1=Qx,Yw=e1.all,tg=e1.IS_HTMLDDA?function(c){return typeof c=="object"?c!==null:r0(c)||c===Yw}:function(c){return typeof c=="object"?c!==null:r0(c)},r_=af,Qw=lh,Jw=function(c){return Qw(c)?c:void 0},rg=function(c,m){return arguments.length<2?Jw(r_[c]):r_[c]&&r_[c][m]},e2=Ed,t2=e2({}.isPrototypeOf),r2=rg,n2=r2("navigator","userAgent")||"",t1=af,n_=n2,n0=t1.process,i0=t1.Deno,o0=n0&&n0.versions||i0&&i0.version,s0=o0&&o0.v8,Fh,sy;s0&&(Fh=s0.split("."),sy=Fh[0]>0&&Fh[0]<4?1:+(Fh[0]+Fh[1]));!sy&&n_&&(Fh=n_.match(/Edge\/(\d+)/),(!Fh||Fh[1]>=74)&&(Fh=n_.match(/Chrome\/(\d+)/),Fh&&(sy=+Fh[1])));var i2=sy,a0=i2,o2=lf,r1=!!Object.getOwnPropertySymbols&&!o2(function(){var c=Symbol();return!String(c)||!(Object(c)instanceof Symbol)||!Symbol.sham&&a0&&a0<41}),s2=r1,n1=s2&&!Symbol.sham&&typeof Symbol.iterator=="symbol",a2=rg,l2=lh,u2=t2,c2=n1,h2=Object,i1=c2?function(c){return typeof c=="symbol"}:function(c){var m=a2("Symbol");return l2(m)&&u2(m.prototype,h2(c))},d2=String,f2=function(c){try{return d2(c)}catch{return"Object"}},p2=lh,m2=f2,g2=TypeError,o1=function(c){if(p2(c))return c;throw g2(m2(c)+" is not a function")},y2=o1,_2=Xx,v2=function(c,m){var p=c[m];return _2(p)?void 0:y2(p)},i_=av,o_=lh,s_=tg,x2=TypeError,b2=function(c,m){var p,T;if(m==="string"&&o_(p=c.toString)&&!s_(T=i_(p,c))||o_(p=c.valueOf)&&!s_(T=i_(p,c))||m!=="string"&&o_(p=c.toString)&&!s_(T=i_(p,c)))return T;throw x2("Can't convert object to primitive value")},lv={exports:{}},l0=af,w2=Object.defineProperty,uv=function(c,m){try{w2(l0,c,{value:m,configurable:!0,writable:!0})}catch{l0[c]=m}return m},S2=af,T2=uv,u0="__core-js_shared__",C2=S2[u0]||T2(u0,{}),cv=C2,c0=cv;(lv.exports=function(c,m){return c0[c]||(c0[c]=m!==void 0?m:{})})("versions",[]).push({version:"3.25.5",mode:"global",copyright:" 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.5/LICENSE",source:"https://github.com/zloirock/core-js"});var P2=Yx,E2=Object,s1=function(c){return E2(P2(c))},I2=Ed,M2=s1,k2=I2({}.hasOwnProperty),Sp=Object.hasOwn||function(m,p){return k2(M2(m),p)},A2=Ed,R2=0,z2=Math.random(),L2=A2(1 .toString),a1=function(c){return"Symbol("+(c===void 0?"":c)+")_"+L2(++R2+z2,36)},D2=af,O2=lv.exports,h0=Sp,F2=a1,d0=r1,l1=n1,Gp=O2("wks"),bp=D2.Symbol,f0=bp&&bp.for,B2=l1?bp:bp&&bp.withoutSetter||F2,ng=function(c){if(!h0(Gp,c)||!(d0||typeof Gp[c]=="string")){var m="Symbol."+c;d0&&h0(bp,c)?Gp[c]=bp[c]:l1&&f0?Gp[c]=f0(m):Gp[c]=B2(m)}return Gp[c]},N2=av,p0=tg,m0=i1,$2=v2,j2=b2,U2=ng,V2=TypeError,Z2=U2("toPrimitive"),G2=function(c,m){if(!p0(c)||m0(c))return c;var p=$2(c,Z2),T;if(p){if(m===void 0&&(m="default"),T=N2(p,c,m),!p0(T)||m0(T))return T;throw V2("Can't convert object to primitive value")}return m===void 0&&(m="number"),j2(c,m)},W2=G2,H2=i1,u1=function(c){var m=W2(c,"string");return H2(m)?m:m+""},q2=af,g0=tg,L_=q2.document,K2=g0(L_)&&g0(L_.createElement),c1=function(c){return K2?L_.createElement(c):{}},X2=Zf,Y2=lf,Q2=c1,h1=!X2&&!Y2(function(){return Object.defineProperty(Q2("div"),"a",{get:function(){return 7}}).a!=7}),J2=Zf,eS=av,tS=jx,rS=Zx,nS=gy,iS=u1,oS=Sp,sS=h1,y0=Object.getOwnPropertyDescriptor;ov.f=J2?y0:function(m,p){if(m=nS(m),p=iS(p),sS)try{return y0(m,p)}catch{}if(oS(m,p))return rS(!eS(tS.f,m,p),m[p])};var am={},aS=Zf,lS=lf,d1=aS&&lS(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),uS=tg,cS=String,hS=TypeError,yy=function(c){if(uS(c))return c;throw hS(cS(c)+" is not an object")},dS=Zf,fS=h1,pS=d1,$g=yy,_0=u1,mS=TypeError,a_=Object.defineProperty,gS=Object.getOwnPropertyDescriptor,l_="enumerable",u_="configurable",c_="writable";am.f=dS?pS?function(m,p,T){if($g(m),p=_0(p),$g(T),typeof m=="function"&&p==="prototype"&&"value"in T&&c_ in T&&!T[c_]){var P=gS(m,p);P&&P[c_]&&(m[p]=T.value,T={configurable:u_ in T?T[u_]:P[u_],enumerable:l_ in T?T[l_]:P[l_],writable:!1})}return a_(m,p,T)}:a_:function(m,p,T){if($g(m),p=_0(p),$g(T),fS)try{return a_(m,p,T)}catch{}if("get"in T||"set"in T)throw mS("Accessors not supported");return"value"in T&&(m[p]=T.value),m};var yS=Zf,_S=am,vS=Zx,f1=yS?function(c,m,p){return _S.f(c,m,vS(1,p))}:function(c,m,p){return c[m]=p,c},p1={exports:{}},D_=Zf,xS=Sp,m1=Function.prototype,bS=D_&&Object.getOwnPropertyDescriptor,wS=xS(m1,"name"),SS=wS&&(!D_||D_&&bS(m1,"name").configurable),TS={CONFIGURABLE:SS},CS=Ed,PS=lh,O_=cv,ES=CS(Function.toString);PS(O_.inspectSource)||(O_.inspectSource=function(c){return ES(c)});var g1=O_.inspectSource,IS=af,MS=lh,v0=IS.WeakMap,kS=MS(v0)&&/native code/.test(String(v0)),AS=lv.exports,RS=a1,x0=AS("keys"),y1=function(c){return x0[c]||(x0[c]=RS(c))},hv={},zS=kS,_1=af,LS=f1,h_=Sp,d_=cv,DS=y1,OS=hv,b0="Object already initialized",w0=_1.TypeError,FS=_1.WeakMap,F_,ay,B_,BS=function(c){return B_(c)?ay(c):F_(c,{})};if(zS||d_.state){var bd=d_.state||(d_.state=new FS);bd.get=bd.get,bd.has=bd.has,bd.set=bd.set,F_=function(c,m){if(bd.has(c))throw w0(b0);return m.facade=c,bd.set(c,m),m},ay=function(c){return bd.get(c)||{}},B_=function(c){return bd.has(c)}}else{var Wp=DS("state");OS[Wp]=!0,F_=function(c,m){if(h_(c,Wp))throw w0(b0);return m.facade=c,LS(c,Wp,m),m},ay=function(c){return h_(c,Wp)?c[Wp]:{}},B_=function(c){return h_(c,Wp)}}var NS={get:ay,enforce:BS},$S=lf,jS=lh,jg=Sp,N_=Zf,US=TS.CONFIGURABLE,VS=g1,v1=NS,ZS=v1.enforce,GS=v1.get,Hg=Object.defineProperty,WS=N_&&!$S(function(){return Hg(function(){},"length",{value:8}).length!==8}),HS=String(String).split("String"),qS=p1.exports=function(c,m,p){String(m).slice(0,7)==="Symbol("&&(m="["+String(m).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),p&&p.getter&&(m="get "+m),p&&p.setter&&(m="set "+m),(!jg(c,"name")||US&&c.name!==m)&&(N_?Hg(c,"name",{value:m,configurable:!0}):c.name=m),WS&&p&&jg(p,"arity")&&c.length!==p.arity&&Hg(c,"length",{value:p.arity});try{p&&jg(p,"constructor")&&p.constructor?N_&&Hg(c,"prototype",{writable:!1}):c.prototype&&(c.prototype=void 0)}catch{}var T=ZS(c);return jg(T,"source")||(T.source=HS.join(typeof m=="string"?m:"")),c};Function.prototype.toString=qS(function(){return jS(this)&&GS(this).source||VS(this)},"toString");var KS=lh,XS=am,YS=p1.exports,QS=uv,JS=function(c,m,p,T){T||(T={});var P=T.enumerable,O=T.name!==void 0?T.name:m;if(KS(p)&&YS(p,O,T),T.global)P?c[m]=p:QS(m,p);else{try{T.unsafe?c[m]&&(P=!0):delete c[m]}catch{}P?c[m]=p:XS.f(c,m,{value:p,enumerable:!1,configurable:!T.nonConfigurable,writable:!T.nonWritable})}return c},x1={},eT=Math.ceil,tT=Math.floor,rT=Math.trunc||function(m){var p=+m;return(p>0?tT:eT)(p)},nT=rT,b1=function(c){var m=+c;return m!==m||m===0?0:nT(m)},iT=b1,oT=Math.max,sT=Math.min,aT=function(c,m){var p=iT(c);return p<0?oT(p+m,0):sT(p,m)},lT=b1,uT=Math.min,cT=function(c){return c>0?uT(lT(c),9007199254740991):0},hT=cT,w1=function(c){return hT(c.length)},dT=gy,fT=aT,pT=w1,mT=function(c){return function(m,p,T){var P=dT(m),O=pT(P),M=fT(T,O),u;if(c&&p!=p){for(;O>M;)if(u=P[M++],u!=u)return!0}else for(;O>M;M++)if((c||M in P)&&P[M]===p)return c||M||0;return!c&&-1}},gT={indexOf:mT(!1)},yT=Ed,f_=Sp,_T=gy,vT=gT.indexOf,xT=hv,S0=yT([].push),S1=function(c,m){var p=_T(c),T=0,P=[],O;for(O in p)!f_(xT,O)&&f_(p,O)&&S0(P,O);for(;m.length>T;)f_(p,O=m[T++])&&(~vT(P,O)||S0(P,O));return P},dv=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],bT=S1,wT=dv,ST=wT.concat("length","prototype");x1.f=Object.getOwnPropertyNames||function(m){return bT(m,ST)};var T1={};T1.f=Object.getOwnPropertySymbols;var TT=rg,CT=Ed,PT=x1,ET=T1,IT=yy,MT=CT([].concat),kT=TT("Reflect","ownKeys")||function(m){var p=PT.f(IT(m)),T=ET.f;return T?MT(p,T(m)):p},T0=Sp,AT=kT,RT=ov,zT=am,LT=function(c,m,p){for(var T=AT(m),P=zT.f,O=RT.f,M=0;M<T.length;M++){var u=T[M];!T0(c,u)&&!(p&&T0(p,u))&&P(c,u,O(m,u))}},DT=lf,OT=lh,FT=/#|\.prototype\./,ig=function(c,m){var p=NT[BT(c)];return p==jT?!0:p==$T?!1:OT(m)?DT(m):!!m},BT=ig.normalize=function(c){return String(c).replace(FT,".").toLowerCase()},NT=ig.data={},$T=ig.NATIVE="N",jT=ig.POLYFILL="P",UT=ig,p_=af,VT=ov.f,ZT=f1,GT=JS,WT=uv,HT=LT,qT=UT,KT=function(c,m){var p=c.target,T=c.global,P=c.stat,O,M,u,J,Y,ve;if(T?M=p_:P?M=p_[p]||WT(p,{}):M=(p_[p]||{}).prototype,M)for(u in m){if(Y=m[u],c.dontCallGetSet?(ve=VT(M,u),J=ve&&ve.value):J=M[u],O=qT(T?u:p+(P?".":"#")+u,c.forced),!O&&J!==void 0){if(typeof Y==typeof J)continue;HT(Y,J)}(c.sham||J&&J.sham)&&ZT(Y,"sham",!0),GT(M,u,Y,c)}},C0=Ed,XT=o1,YT=sv,QT=C0(C0.bind),JT=function(c,m){return XT(c),m===void 0?c:YT?QT(c,m):function(){return c.apply(m,arguments)}},eC=my,tC=Array.isArray||function(m){return eC(m)=="Array"},rC=ng,nC=rC("toStringTag"),C1={};C1[nC]="z";var iC=String(C1)==="[object z]",oC=iC,sC=lh,qg=my,aC=ng,lC=aC("toStringTag"),uC=Object,cC=qg(function(){return arguments}())=="Arguments",hC=function(c,m){try{return c[m]}catch{}},dC=oC?qg:function(c){var m,p,T;return c===void 0?"Undefined":c===null?"Null":typeof(p=hC(m=uC(c),lC))=="string"?p:cC?qg(m):(T=qg(m))=="Object"&&sC(m.callee)?"Arguments":T},fC=Ed,pC=lf,P1=lh,mC=dC,gC=rg,yC=g1,E1=function(){},_C=[],I1=gC("Reflect","construct"),fv=/^\s*(?:class|function)\b/,vC=fC(fv.exec),xC=!fv.exec(E1),Dm=function(m){if(!P1(m))return!1;try{return I1(E1,_C,m),!0}catch{return!1}},M1=function(m){if(!P1(m))return!1;switch(mC(m)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return xC||!!vC(fv,yC(m))}catch{return!0}};M1.sham=!0;var bC=!I1||pC(function(){var c;return Dm(Dm.call)||!Dm(Object)||!Dm(function(){c=!0})||c})?M1:Dm,P0=tC,wC=bC,SC=tg,TC=ng,CC=TC("species"),E0=Array,PC=function(c){var m;return P0(c)&&(m=c.constructor,wC(m)&&(m===E0||P0(m.prototype))?m=void 0:SC(m)&&(m=m[CC],m===null&&(m=void 0))),m===void 0?E0:m},EC=PC,IC=function(c,m){return new(EC(c))(m===0?0:m)},MC=JT,kC=Ed,AC=Kx,RC=s1,zC=w1,LC=IC,I0=kC([].push),DC=function(c){var m=c==1,p=c==2,T=c==3,P=c==4,O=c==6,M=c==7,u=c==5||O;return function(J,Y,ve,de){for(var Te=RC(J),le=AC(Te),we=MC(Y,ve),xe=zC(le),Ze=0,mt=de||LC,kt=m?mt(J,xe):p||M?mt(J,0):void 0,Tt,Je;xe>Ze;Ze++)if((u||Ze in le)&&(Tt=le[Ze],Je=we(Tt,Ze,Te),c))if(m)kt[Ze]=Je;else if(Je)switch(c){case 3:return!0;case 5:return Tt;case 6:return Ze;case 2:I0(kt,Tt)}else switch(c){case 4:return!1;case 7:I0(kt,Tt)}return O?-1:T||P?P:kt}},OC={find:DC(5)},k1={},FC=S1,BC=dv,NC=Object.keys||function(m){return FC(m,BC)},$C=Zf,jC=d1,UC=am,VC=yy,ZC=gy,GC=NC;k1.f=$C&&!jC?Object.defineProperties:function(m,p){VC(m);for(var T=ZC(p),P=GC(p),O=P.length,M=0,u;O>M;)UC.f(m,u=P[M++],T[u]);return m};var WC=rg,HC=WC("document","documentElement"),qC=yy,KC=k1,M0=dv,XC=hv,YC=HC,QC=c1,JC=y1,k0=">",A0="<",$_="prototype",j_="script",A1=JC("IE_PROTO"),m_=function(){},R1=function(c){return A0+j_+k0+c+A0+"/"+j_+k0},R0=function(c){c.write(R1("")),c.close();var m=c.parentWindow.Object;return c=null,m},eP=function(){var c=QC("iframe"),m="java"+j_+":",p;return c.style.display="none",YC.appendChild(c),c.src=String(m),p=c.contentWindow.document,p.open(),p.write(R1("document.F=Object")),p.close(),p.F},Ug,Kg=function(){try{Ug=new ActiveXObject("htmlfile")}catch{}Kg=typeof document<"u"?document.domain&&Ug?R0(Ug):eP():R0(Ug);for(var c=M0.length;c--;)delete Kg[$_][M0[c]];return Kg()};XC[A1]=!0;var tP=Object.create||function(m,p){var T;return m!==null?(m_[$_]=qC(m),T=new m_,m_[$_]=null,T[A1]=m):T=Kg(),p===void 0?T:KC.f(T,p)},rP=ng,nP=tP,iP=am.f,U_=rP("unscopables"),V_=Array.prototype;V_[U_]==null&&iP(V_,U_,{configurable:!0,value:nP(null)});var oP=function(c){V_[U_][c]=!0},sP=KT,aP=OC.find,lP=oP,Z_="find",z1=!0;Z_ in[]&&Array(1)[Z_](function(){z1=!1});sP({target:"Array",proto:!0,forced:z1},{find:function(m){return aP(this,m,arguments.length>1?arguments[1]:void 0)}});lP(Z_);var ih={GLOBAL:{HIDE:"__react_tooltip_hide_event",REBUILD:"__react_tooltip_rebuild_event",SHOW:"__react_tooltip_show_event"}},g_=function(m,p){var T;typeof window.CustomEvent=="function"?T=new window.CustomEvent(m,{detail:p}):(T=document.createEvent("Event"),T.initEvent(m,!1,!0,p)),window.dispatchEvent(T)};function uP(c){c.hide=function(m){g_(ih.GLOBAL.HIDE,{target:m})},c.rebuild=function(){g_(ih.GLOBAL.REBUILD)},c.show=function(m){g_(ih.GLOBAL.SHOW,{target:m})},c.prototype.globalRebuild=function(){this.mount&&(this.unbindListener(),this.bindListener())},c.prototype.globalShow=function(m){if(this.mount){var p=m&&m.detail&&m.detail.target&&!0||!1;this.showTooltip({currentTarget:p&&m.detail.target},!0)}},c.prototype.globalHide=function(m){if(this.mount){var p=m&&m.detail&&m.detail.target&&!0||!1;this.hideTooltip({currentTarget:p&&m.detail.target},p)}}}function cP(c){c.prototype.bindWindowEvents=function(m){window.removeEventListener(ih.GLOBAL.HIDE,this.globalHide),window.addEventListener(ih.GLOBAL.HIDE,this.globalHide,!1),window.removeEventListener(ih.GLOBAL.REBUILD,this.globalRebuild),window.addEventListener(ih.GLOBAL.REBUILD,this.globalRebuild,!1),window.removeEventListener(ih.GLOBAL.SHOW,this.globalShow),window.addEventListener(ih.GLOBAL.SHOW,this.globalShow,!1),m&&(window.removeEventListener("resize",this.onWindowResize),window.addEventListener("resize",this.onWindowResize,!1))},c.prototype.unbindWindowEvents=function(){window.removeEventListener(ih.GLOBAL.HIDE,this.globalHide),window.removeEventListener(ih.GLOBAL.REBUILD,this.globalRebuild),window.removeEventListener(ih.GLOBAL.SHOW,this.globalShow),window.removeEventListener("resize",this.onWindowResize)},c.prototype.onWindowResize=function(){this.mount&&this.hideTooltip()}}var L1=function(m,p){var T=this.state.show,P=this.props.id,O=this.isCapture(p.currentTarget),M=p.currentTarget.getAttribute("currentItem");O||p.stopPropagation(),T&&M==="true"?m||this.hideTooltip(p):(p.currentTarget.setAttribute("currentItem","true"),hP(p.currentTarget,this.getTargetArray(P)),this.showTooltip(p))},hP=function(m,p){for(var T=0;T<p.length;T++)m!==p[T]?p[T].setAttribute("currentItem","false"):p[T].setAttribute("currentItem","true")},y_={id:"9b69f92e-d3fe-498b-b1b4-c5e63a51b0cf",set:function(m,p,T){if(this.id in m){var P=m[this.id];P[p]=T}else Object.defineProperty(m,this.id,{configurable:!0,value:Gm({},p,T)})},get:function(m,p){var T=m[this.id];if(T!==void 0)return T[p]}};function dP(c){c.prototype.isCustomEvent=function(m){var p=this.state.event;return p||!!m.getAttribute("data-event")},c.prototype.customBindListener=function(m){var p=this,T=this.state,P=T.event,O=T.eventOff,M=m.getAttribute("data-event")||P,u=m.getAttribute("data-event-off")||O;M.split(" ").forEach(function(J){m.removeEventListener(J,y_.get(m,J));var Y=L1.bind(p,u);y_.set(m,J,Y),m.addEventListener(J,Y,!1)}),u&&u.split(" ").forEach(function(J){m.removeEventListener(J,p.hideTooltip),m.addEventListener(J,p.hideTooltip,!1)})},c.prototype.customUnbindListener=function(m){var p=this.state,T=p.event,P=p.eventOff,O=T||m.getAttribute("data-event"),M=P||m.getAttribute("data-event-off");m.removeEventListener(O,y_.get(m,T)),M&&m.removeEventListener(M,this.hideTooltip)}}function fP(c){c.prototype.isCapture=function(m){return m&&m.getAttribute("data-iscapture")==="true"||this.props.isCapture||!1}}function pP(c){c.prototype.getEffect=function(m){var p=m.getAttribute("data-effect");return p||this.props.effect||"float"}}var mP=function(m){var p={};for(var T in m)typeof m[T]=="function"?p[T]=m[T].bind(m):p[T]=m[T];return p},Om=function(m,p,T){for(var P=p.respectEffect,O=P===void 0?!1:P,M=p.customEvent,u=M===void 0?!1:M,J=this.props.id,Y=null,ve,de=T.target,Te;Y===null&&de!==null;)Te=de,Y=de.getAttribute("data-tip")||null,ve=de.getAttribute("data-for")||null,de=de.parentElement;if(de=Te||T.target,!(this.isCustomEvent(de)&&!u)){var le=J==null&&ve==null||ve===J;if(Y!=null&&(!O||this.getEffect(de)==="float")&&le){var we=mP(T);we.currentTarget=de,m(we)}}},z0=function(m,p){var T={};return m.forEach(function(P){var O=P.getAttribute(p);O&&O.split(" ").forEach(function(M){return T[M]=!0})}),T},L0=function(){return document.getElementsByTagName("body")[0]};function gP(c){c.prototype.isBodyMode=function(){return!!this.props.bodyMode},c.prototype.bindBodyListener=function(m){var p=this,T=this.state,P=T.event,O=T.eventOff,M=T.possibleCustomEvents,u=T.possibleCustomEventsOff,J=L0(),Y=z0(m,"data-event"),ve=z0(m,"data-event-off");P!=null&&(Y[P]=!0),O!=null&&(ve[O]=!0),M.split(" ").forEach(function(xe){return Y[xe]=!0}),u.split(" ").forEach(function(xe){return ve[xe]=!0}),this.unbindBodyListener(J);var de=this.bodyModeListeners={};P==null&&(de.mouseover=Om.bind(this,this.showTooltip,{}),de.mousemove=Om.bind(this,this.updateTooltip,{respectEffect:!0}),de.mouseout=Om.bind(this,this.hideTooltip,{}));for(var Te in Y)de[Te]=Om.bind(this,function(xe){var Ze=xe.currentTarget.getAttribute("data-event-off")||O;L1.call(p,Ze,xe)},{customEvent:!0});for(var le in ve)de[le]=Om.bind(this,this.hideTooltip,{customEvent:!0});for(var we in de)J.addEventListener(we,de[we])},c.prototype.unbindBodyListener=function(m){m=m||L0();var p=this.bodyModeListeners;for(var T in p)m.removeEventListener(T,p[T])}}var yP=function(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver};function _P(c){c.prototype.bindRemovalTracker=function(){var m=this,p=yP();if(p!=null){var T=new p(function(P){for(var O=0;O<P.length;O++)for(var M=P[O],u=0;u<M.removedNodes.length;u++){var J=M.removedNodes[u];if(J===m.state.currentTarget){m.hideTooltip();return}}});T.observe(window.document,{childList:!0,subtree:!0}),this.removalTracker=T}},c.prototype.unbindRemovalTracker=function(){this.removalTracker&&(this.removalTracker.disconnect(),this.removalTracker=null)}}function D0(c,m,p,T,P,O,M){var u=G_(p),J=u.width,Y=u.height,ve=G_(m),de=ve.width,Te=ve.height,le=vP(c,m,O),we=le.mouseX,xe=le.mouseY,Ze=xP(O,de,Te,J,Y),mt=bP(M),kt=mt.extraOffsetX,Tt=mt.extraOffsetY,Je=window.innerWidth,Qe=window.innerHeight,nt=wP(p),yt=nt.parentTop,ze=nt.parentLeft,$e=function(At){var ir=Ze[At].l;return we+ir+kt},re=function(At){var ir=Ze[At].r;return we+ir+kt},it=function(At){var ir=Ze[At].t;return xe+ir+Tt},st=function(At){var ir=Ze[At].b;return xe+ir+Tt},zt=function(At){return $e(At)<0},tr=function(At){return re(At)>Je},Cr=function(At){return it(At)<0},xr=function(At){return st(At)>Qe},or=function(At){return zt(At)||tr(At)||Cr(At)||xr(At)},xt=function(At){return!or(At)},Pt={top:xt("top"),bottom:xt("bottom"),left:xt("left"),right:xt("right")};function Wt(){var ur=P.split(",").concat(T,["top","bottom","left","right"]),At=Aw(ur),ir;try{for(At.s();!(ir=At.n()).done;){var Sr=ir.value;if(Pt[Sr])return Sr}}catch(fr){At.e(fr)}finally{At.f()}return T}var Oe=Wt(),ct=!1,Ut;return Oe&&Oe!==T&&(ct=!0,Ut=Oe),ct?{isNewState:!0,newState:{place:Ut}}:{isNewState:!1,position:{left:parseInt($e(T)-ze,10),top:parseInt(it(T)-yt,10)}}}var G_=function(m){var p=m.getBoundingClientRect(),T=p.height,P=p.width;return{height:parseInt(T,10),width:parseInt(P,10)}},vP=function(m,p,T){var P=p.getBoundingClientRect(),O=P.top,M=P.left,u=G_(p),J=u.width,Y=u.height;return T==="float"?{mouseX:m.clientX,mouseY:m.clientY}:{mouseX:M+J/2,mouseY:O+Y/2}},xP=function(m,p,T,P,O){var M,u,J,Y,ve=3,de=2,Te=12;return m==="float"?(M={l:-(P/2),r:P/2,t:-(O+ve+de),b:-3},J={l:-(P/2),r:P/2,t:ve+Te,b:O+ve+de+Te},Y={l:-(P+ve+de),r:-3,t:-(O/2),b:O/2},u={l:ve,r:P+ve+de,t:-(O/2),b:O/2}):m==="solid"&&(M={l:-(P/2),r:P/2,t:-(T/2+O+de),b:-(T/2)},J={l:-(P/2),r:P/2,t:T/2,b:T/2+O+de},Y={l:-(P+p/2+de),r:-(p/2),t:-(O/2),b:O/2},u={l:p/2,r:P+p/2+de,t:-(O/2),b:O/2}),{top:M,bottom:J,left:Y,right:u}},bP=function(m){var p=0,T=0;Object.prototype.toString.apply(m)==="[object String]"&&(m=JSON.parse(m.toString().replace(/'/g,'"')));for(var P in m)P==="top"?T-=parseInt(m[P],10):P==="bottom"?T+=parseInt(m[P],10):P==="left"?p-=parseInt(m[P],10):P==="right"&&(p+=parseInt(m[P],10));return{extraOffsetX:p,extraOffsetY:T}},wP=function(m){for(var p=m;p;){var T=window.getComputedStyle(p);if(T.getPropertyValue("transform")!=="none"||T.getPropertyValue("will-change")==="transform")break;p=p.parentElement}var P=p&&p.getBoundingClientRect().top||0,O=p&&p.getBoundingClientRect().left||0;return{parentTop:P,parentLeft:O}};function O0(c,m,p,T){if(m)return m;if(p!=null)return p;if(p===null)return null;var P=/<br\s*\/?>/;return!T||T==="false"||!P.test(c)?c:c.split(P).map(function(O,M){return fu.createElement("span",{key:M,className:"multi-line"},O)})}function F0(c){var m={};return Object.keys(c).filter(function(p){return/(^aria-\w+$|^role$)/.test(p)}).forEach(function(p){m[p]=c[p]}),m}function __(c){var m=c.length;return c.hasOwnProperty?Array.prototype.slice.call(c):new Array(m).fill().map(function(p){return c[p]})}function SP(){return"t"+ww()}var TP=`.__react_component_tooltip {
  border-radius: 3px;
  display: inline-block;
  font-size: 13px;
  left: -999em;
  opacity: 0;
  position: fixed;
  pointer-events: none;
  transition: opacity 0.3s ease-out;
  top: -999em;
  visibility: hidden;
  z-index: 999;
}
.__react_component_tooltip.allow_hover, .__react_component_tooltip.allow_click {
  pointer-events: auto;
}
.__react_component_tooltip::before, .__react_component_tooltip::after {
  content: "";
  width: 0;
  height: 0;
  position: absolute;
}
.__react_component_tooltip.show {
  opacity: 0.9;
  margin-top: 0;
  margin-left: 0;
  visibility: visible;
}
.__react_component_tooltip.place-top::before {
  bottom: 0;
  left: 50%;
  margin-left: -11px;
}
.__react_component_tooltip.place-bottom::before {
  top: 0;
  left: 50%;
  margin-left: -11px;
}
.__react_component_tooltip.place-left::before {
  right: 0;
  top: 50%;
  margin-top: -9px;
}
.__react_component_tooltip.place-right::before {
  left: 0;
  top: 50%;
  margin-top: -9px;
}
.__react_component_tooltip .multi-line {
  display: block;
  padding: 2px 0;
  text-align: center;
}`,B0={dark:{text:"#fff",background:"#222",border:"transparent",arrow:"#222"},success:{text:"#fff",background:"#8DC572",border:"transparent",arrow:"#8DC572"},warning:{text:"#fff",background:"#F0AD4E",border:"transparent",arrow:"#F0AD4E"},error:{text:"#fff",background:"#BE6464",border:"transparent",arrow:"#BE6464"},info:{text:"#fff",background:"#337AB7",border:"transparent",arrow:"#337AB7"},light:{text:"#222",background:"#fff",border:"transparent",arrow:"#fff"}};function CP(c){return B0[c]?k_({},B0[c]):void 0}var PP="8px 21px",EP={tooltip:3,arrow:0};function IP(c,m,p,T,P,O){return MP(c,kP(m,p,T),P,O)}function MP(c,m){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:PP,T=arguments.length>3&&arguments[3]!==void 0?arguments[3]:EP,P=m.text,O=m.background,M=m.border,u=m.arrow,J=T.arrow,Y=T.tooltip;return`
  	.`.concat(c,` {
	    color: `).concat(P,`;
	    background: `).concat(O,`;
	    border: 1px solid `).concat(M,`;
	    border-radius: `).concat(Y,`px;
	    padding: `).concat(p,`;
  	}

  	.`).concat(c,`.place-top {
        margin-top: -10px;
    }
    .`).concat(c,`.place-top::before {
        content: "";
        background-color: inherit;
        position: absolute;
        z-index: 2;
        width: 20px;
        height: 12px;
    }
    .`).concat(c,`.place-top::after {
        content: "";
        position: absolute;
        width: 10px;
        height: 10px;
        border-top-right-radius: `).concat(J,`px;
        border: 1px solid `).concat(M,`;
        background-color: `).concat(u,`;
        z-index: -2;
        bottom: -6px;
        left: 50%;
        margin-left: -6px;
        transform: rotate(135deg);
    }

    .`).concat(c,`.place-bottom {
        margin-top: 10px;
    }
    .`).concat(c,`.place-bottom::before {
        content: "";
        background-color: inherit;
        position: absolute;
        z-index: -1;
        width: 18px;
        height: 10px;
    }
    .`).concat(c,`.place-bottom::after {
        content: "";
        position: absolute;
        width: 10px;
        height: 10px;
        border-top-right-radius: `).concat(J,`px;
        border: 1px solid `).concat(M,`;
        background-color: `).concat(u,`;
        z-index: -2;
        top: -6px;
        left: 50%;
        margin-left: -6px;
        transform: rotate(45deg);
    }

    .`).concat(c,`.place-left {
        margin-left: -10px;
    }
    .`).concat(c,`.place-left::before {
        content: "";
        background-color: inherit;
        position: absolute;
        z-index: -1;
        width: 10px;
        height: 18px;
    }
    .`).concat(c,`.place-left::after {
        content: "";
        position: absolute;
        width: 10px;
        height: 10px;
        border-top-right-radius: `).concat(J,`px;
        border: 1px solid `).concat(M,`;
        background-color: `).concat(u,`;
        z-index: -2;
        right: -6px;
        top: 50%;
        margin-top: -6px;
        transform: rotate(45deg);
    }

    .`).concat(c,`.place-right {
        margin-left: 10px;
    }
    .`).concat(c,`.place-right::before {
        content: "";
        background-color: inherit;
        position: absolute;
        z-index: -1;
        width: 10px;
        height: 18px;
    }
    .`).concat(c,`.place-right::after {
        content: "";
        position: absolute;
        width: 10px;
        height: 10px;
        border-top-right-radius: `).concat(J,`px;
        border: 1px solid `).concat(M,`;
        background-color: `).concat(u,`;
        z-index: -2;
        left: -6px;
        top: 50%;
        margin-top: -6px;
        transform: rotate(-135deg);
    }
  `)}function kP(c,m,p){var T=c.text,P=c.background,O=c.border,M=c.arrow?c.arrow:c.background,u=CP(m);return T&&(u.text=T),P&&(u.background=P),p&&(O?u.border=O:u.border=m==="light"?"black":"white"),M&&(u.arrow=M),u}var $u,Fm,AP=uP($u=cP($u=dP($u=fP($u=pP($u=gP($u=_P($u=(Fm=function(c){Cw(p,c);var m=Mw(p);function p(T){var P;return Sw(this,p),P=m.call(this,T),P.state={uuid:T.uuid||SP(),place:T.place||"top",desiredPlace:T.place||"top",type:T.type||"dark",effect:T.effect||"float",show:!1,border:!1,borderClass:"border",customColors:{},customRadius:{},offset:{},padding:T.padding,extraClass:"",html:!1,delayHide:0,delayShow:0,event:T.event||null,eventOff:T.eventOff||null,currentEvent:null,currentTarget:null,ariaProps:F0(T),isEmptyTip:!1,disable:!1,possibleCustomEvents:T.possibleCustomEvents||"",possibleCustomEventsOff:T.possibleCustomEventsOff||"",originTooltip:null,isMultiline:!1},P.bind(["showTooltip","updateTooltip","hideTooltip","hideTooltipOnScroll","getTooltipContent","globalRebuild","globalShow","globalHide","onWindowResize","mouseOnToolTip"]),P.mount=!0,P.delayShowLoop=null,P.delayHideLoop=null,P.delayReshow=null,P.intervalUpdateContent=null,P}return Tw(p,[{key:"bind",value:function(P){var O=this;P.forEach(function(M){O[M]=O[M].bind(O)})}},{key:"componentDidMount",value:function(){var P=this.props;P.insecure;var O=P.resizeHide,M=P.disableInternalStyle;this.mount=!0,this.bindListener(),this.bindWindowEvents(O),M||this.injectStyles()}},{key:"componentWillUnmount",value:function(){this.mount=!1,this.clearTimer(),this.unbindListener(),this.removeScrollListener(this.state.currentTarget),this.unbindWindowEvents()}},{key:"injectStyles",value:function(){var P=this.tooltipRef;if(P){for(var O=P.parentNode;O.parentNode;)O=O.parentNode;var M;switch(O.constructor.name){case"Document":case"HTMLDocument":case void 0:M=O.head;break;case"ShadowRoot":default:M=O;break}if(!M.querySelector("style[data-react-tooltip]")){var u=document.createElement("style");u.textContent=TP,u.setAttribute("data-react-tooltip","true"),M.appendChild(u)}}}},{key:"mouseOnToolTip",value:function(){var P=this.state.show;return P&&this.tooltipRef?(this.tooltipRef.matches||(this.tooltipRef.msMatchesSelector?this.tooltipRef.matches=this.tooltipRef.msMatchesSelector:this.tooltipRef.matches=this.tooltipRef.mozMatchesSelector),this.tooltipRef.matches(":hover")):!1}},{key:"getTargetArray",value:function(P){var O=[],M;if(!P)M="[data-tip]:not([data-for])";else{var u=P.replace(/\\/g,"\\\\").replace(/"/g,'\\"');M='[data-tip][data-for="'.concat(u,'"]')}return __(document.getElementsByTagName("*")).filter(function(J){return J.shadowRoot}).forEach(function(J){O=O.concat(__(J.shadowRoot.querySelectorAll(M)))}),O.concat(__(document.querySelectorAll(M)))}},{key:"bindListener",value:function(){var P=this,O=this.props,M=O.id,u=O.globalEventOff,J=O.isCapture,Y=this.getTargetArray(M);Y.forEach(function(ve){ve.getAttribute("currentItem")===null&&ve.setAttribute("currentItem","false"),P.unbindBasicListener(ve),P.isCustomEvent(ve)&&P.customUnbindListener(ve)}),this.isBodyMode()?this.bindBodyListener(Y):Y.forEach(function(ve){var de=P.isCapture(ve),Te=P.getEffect(ve);if(P.isCustomEvent(ve)){P.customBindListener(ve);return}ve.addEventListener("mouseenter",P.showTooltip,de),ve.addEventListener("focus",P.showTooltip,de),Te==="float"&&ve.addEventListener("mousemove",P.updateTooltip,de),ve.addEventListener("mouseleave",P.hideTooltip,de),ve.addEventListener("blur",P.hideTooltip,de)}),u&&(window.removeEventListener(u,this.hideTooltip),window.addEventListener(u,this.hideTooltip,J)),this.bindRemovalTracker()}},{key:"unbindListener",value:function(){var P=this,O=this.props,M=O.id,u=O.globalEventOff;if(this.isBodyMode())this.unbindBodyListener();else{var J=this.getTargetArray(M);J.forEach(function(Y){P.unbindBasicListener(Y),P.isCustomEvent(Y)&&P.customUnbindListener(Y)})}u&&window.removeEventListener(u,this.hideTooltip),this.unbindRemovalTracker()}},{key:"unbindBasicListener",value:function(P){var O=this.isCapture(P);P.removeEventListener("mouseenter",this.showTooltip,O),P.removeEventListener("mousemove",this.updateTooltip,O),P.removeEventListener("mouseleave",this.hideTooltip,O)}},{key:"getTooltipContent",value:function(){var P=this.props,O=P.getContent,M=P.children,u;return O&&(Array.isArray(O)?u=O[0]&&O[0](this.state.originTooltip):u=O(this.state.originTooltip)),O0(this.state.originTooltip,M,u,this.state.isMultiline)}},{key:"isEmptyTip",value:function(P){return typeof P=="string"&&P===""||P===null}},{key:"showTooltip",value:function(P,O){if(this.tooltipRef){if(O){var M=this.getTargetArray(this.props.id),u=M.some(function(ze){return ze===P.currentTarget});if(!u)return}var J=this.props,Y=J.multiline,ve=J.getContent,de=P.currentTarget.getAttribute("data-tip"),Te=P.currentTarget.getAttribute("data-multiline")||Y||!1,le=P instanceof window.FocusEvent||O,we=!0;P.currentTarget.getAttribute("data-scroll-hide")?we=P.currentTarget.getAttribute("data-scroll-hide")==="true":this.props.scrollHide!=null&&(we=this.props.scrollHide),P&&P.currentTarget&&P.currentTarget.setAttribute&&P.currentTarget.setAttribute("aria-describedby",this.props.id||this.state.uuid);var xe=P.currentTarget.getAttribute("data-place")||this.props.place||"top",Ze=le&&"solid"||this.getEffect(P.currentTarget),mt=P.currentTarget.getAttribute("data-offset")||this.props.offset||{},kt=D0(P,P.currentTarget,this.tooltipRef,xe.split(",")[0],xe,Ze,mt);kt.position&&this.props.overridePosition&&(kt.position=this.props.overridePosition(kt.position,P,P.currentTarget,this.tooltipRef,xe,xe,Ze,mt));var Tt=kt.isNewState?kt.newState.place:xe.split(",")[0];this.clearTimer();var Je=P.currentTarget,Qe=this.state.show?Je.getAttribute("data-delay-update")||this.props.delayUpdate:0,nt=this,yt=function(){nt.setState({originTooltip:de,isMultiline:Te,desiredPlace:xe,place:Tt,type:Je.getAttribute("data-type")||nt.props.type||"dark",customColors:{text:Je.getAttribute("data-text-color")||nt.props.textColor||null,background:Je.getAttribute("data-background-color")||nt.props.backgroundColor||null,border:Je.getAttribute("data-border-color")||nt.props.borderColor||null,arrow:Je.getAttribute("data-arrow-color")||nt.props.arrowColor||null},customRadius:{tooltip:Je.getAttribute("data-tooltip-radius")||nt.props.tooltipRadius||"3",arrow:Je.getAttribute("data-arrow-radius")||nt.props.arrowRadius||"0"},effect:Ze,offset:mt,padding:Je.getAttribute("data-padding")||nt.props.padding,html:(Je.getAttribute("data-html")?Je.getAttribute("data-html")==="true":nt.props.html)||!1,delayShow:Je.getAttribute("data-delay-show")||nt.props.delayShow||0,delayHide:Je.getAttribute("data-delay-hide")||nt.props.delayHide||0,delayUpdate:Je.getAttribute("data-delay-update")||nt.props.delayUpdate||0,border:(Je.getAttribute("data-border")?Je.getAttribute("data-border")==="true":nt.props.border)||!1,borderClass:Je.getAttribute("data-border-class")||nt.props.borderClass||"border",extraClass:Je.getAttribute("data-class")||nt.props.class||nt.props.className||"",disable:(Je.getAttribute("data-tip-disable")?Je.getAttribute("data-tip-disable")==="true":nt.props.disable)||!1,currentTarget:Je},function(){we&&nt.addScrollListener(nt.state.currentTarget),nt.updateTooltip(P),ve&&Array.isArray(ve)&&(nt.intervalUpdateContent=setInterval(function(){if(nt.mount){var $e=nt.props.getContent,re=O0(de,"",$e[0](),Te),it=nt.isEmptyTip(re);nt.setState({isEmptyTip:it}),nt.updatePosition()}},ve[1]))})};Qe?this.delayReshow=setTimeout(yt,Qe):yt()}}},{key:"updateTooltip",value:function(P){var O=this,M=this.state,u=M.delayShow,J=M.disable,Y=this.props,ve=Y.afterShow,de=Y.disable,Te=this.getTooltipContent(),le=P.currentTarget||P.target;if(!this.mouseOnToolTip()&&!(this.isEmptyTip(Te)||J||de)){var we=this.state.show?0:parseInt(u,10),xe=function(){if(Array.isArray(Te)&&Te.length>0||Te){var mt=!O.state.show;O.setState({currentEvent:P,currentTarget:le,show:!0},function(){O.updatePosition(function(){mt&&ve&&ve(P)})})}};this.delayShowLoop&&clearTimeout(this.delayShowLoop),we?this.delayShowLoop=setTimeout(xe,we):(this.delayShowLoop=null,xe())}}},{key:"listenForTooltipExit",value:function(){var P=this.state.show;P&&this.tooltipRef&&this.tooltipRef.addEventListener("mouseleave",this.hideTooltip)}},{key:"removeListenerForTooltipExit",value:function(){var P=this.state.show;P&&this.tooltipRef&&this.tooltipRef.removeEventListener("mouseleave",this.hideTooltip)}},{key:"hideTooltip",value:function(P,O){var M=this,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{isScroll:!1},J=this.state.disable,Y=u.isScroll,ve=Y?0:this.state.delayHide,de=this.props,Te=de.afterHide,le=de.disable,we=this.getTooltipContent();if(this.mount&&!(this.isEmptyTip(we)||J||le)){if(O){var xe=this.getTargetArray(this.props.id),Ze=xe.some(function(kt){return kt===P.currentTarget});if(!Ze||!this.state.show)return}P&&P.currentTarget&&P.currentTarget.removeAttribute&&P.currentTarget.removeAttribute("aria-describedby");var mt=function(){var Tt=M.state.show;if(M.mouseOnToolTip()){M.listenForTooltipExit();return}M.removeListenerForTooltipExit(),M.setState({show:!1},function(){M.removeScrollListener(M.state.currentTarget),Tt&&Te&&Te(P)})};this.clearTimer(),ve?this.delayHideLoop=setTimeout(mt,parseInt(ve,10)):mt()}}},{key:"hideTooltipOnScroll",value:function(P,O){this.hideTooltip(P,O,{isScroll:!0})}},{key:"addScrollListener",value:function(P){var O=this.isCapture(P);window.addEventListener("scroll",this.hideTooltipOnScroll,O)}},{key:"removeScrollListener",value:function(P){var O=this.isCapture(P);window.removeEventListener("scroll",this.hideTooltipOnScroll,O)}},{key:"updatePosition",value:function(P){var O=this,M=this.state,u=M.currentEvent,J=M.currentTarget,Y=M.place,ve=M.desiredPlace,de=M.effect,Te=M.offset,le=this.tooltipRef,we=D0(u,J,le,Y,ve,de,Te);if(we.position&&this.props.overridePosition&&(we.position=this.props.overridePosition(we.position,u,J,le,Y,ve,de,Te)),we.isNewState)return this.setState(we.newState,function(){O.updatePosition(P)});P&&typeof P=="function"&&P(),le.style.left=we.position.left+"px",le.style.top=we.position.top+"px"}},{key:"clearTimer",value:function(){this.delayShowLoop&&(clearTimeout(this.delayShowLoop),this.delayShowLoop=null),this.delayHideLoop&&(clearTimeout(this.delayHideLoop),this.delayHideLoop=null),this.delayReshow&&(clearTimeout(this.delayReshow),this.delayReshow=null),this.intervalUpdateContent&&(clearInterval(this.intervalUpdateContent),this.intervalUpdateContent=null)}},{key:"hasCustomColors",value:function(){var P=this;return!!(Object.keys(this.state.customColors).find(function(O){return O!=="border"&&P.state.customColors[O]})||this.state.border&&this.state.customColors.border)}},{key:"render",value:function(){var P=this,O=this.state,M=O.extraClass,u=O.html,J=O.ariaProps,Y=O.disable,ve=O.uuid,de=this.getTooltipContent(),Te=this.isEmptyTip(de),le=this.props.disableInternalStyle?"":IP(this.state.uuid,this.state.customColors,this.state.type,this.state.border,this.state.padding,this.state.customRadius),we="__react_component_tooltip"+" ".concat(this.state.uuid)+(this.state.show&&!Y&&!Te?" show":"")+(this.state.border?" "+this.state.borderClass:"")+" place-".concat(this.state.place)+" type-".concat(this.hasCustomColors()?"custom":this.state.type)+(this.props.delayUpdate?" allow_hover":"")+(this.props.clickable?" allow_click":""),xe=this.props.wrapper;p.supportedWrappers.indexOf(xe)<0&&(xe=p.defaultProps.wrapper);var Ze=[we,M].filter(Boolean).join(" ");if(u){var mt="".concat(de).concat(le?`
<style aria-hidden="true">`.concat(le,"</style>"):"");return fu.createElement(xe,iy({className:"".concat(Ze),id:this.props.id||ve,ref:function(Tt){return P.tooltipRef=Tt}},J,{"data-id":"tooltip",dangerouslySetInnerHTML:{__html:mt}}))}else return fu.createElement(xe,iy({className:"".concat(Ze),id:this.props.id||ve},J,{ref:function(Tt){return P.tooltipRef=Tt},"data-id":"tooltip"}),le&&fu.createElement("style",{dangerouslySetInnerHTML:{__html:le},"aria-hidden":"true"}),de)}}],[{key:"propTypes",get:function(){return{uuid:Fn.string,children:Fn.any,place:Fn.string,type:Fn.string,effect:Fn.string,offset:Fn.object,padding:Fn.string,multiline:Fn.bool,border:Fn.bool,borderClass:Fn.string,textColor:Fn.string,backgroundColor:Fn.string,borderColor:Fn.string,arrowColor:Fn.string,arrowRadius:Fn.string,tooltipRadius:Fn.string,insecure:Fn.bool,class:Fn.string,className:Fn.string,id:Fn.string,html:Fn.bool,delayHide:Fn.number,delayUpdate:Fn.number,delayShow:Fn.number,event:Fn.string,eventOff:Fn.string,isCapture:Fn.bool,globalEventOff:Fn.string,getContent:Fn.any,afterShow:Fn.func,afterHide:Fn.func,overridePosition:Fn.func,disable:Fn.bool,scrollHide:Fn.bool,resizeHide:Fn.bool,wrapper:Fn.string,bodyMode:Fn.bool,possibleCustomEvents:Fn.string,possibleCustomEventsOff:Fn.string,clickable:Fn.bool,disableInternalStyle:Fn.bool}}},{key:"getDerivedStateFromProps",value:function(P,O){var M=O.ariaProps,u=F0(P),J=Object.keys(u).some(function(Y){return u[Y]!==M[Y]});return J?k_(k_({},O),{},{ariaProps:u}):null}}]),p}(fu.Component),Gm(Fm,"defaultProps",{insecure:!0,resizeHide:!0,wrapper:"div",clickable:!1}),Gm(Fm,"supportedWrappers",["div","span"]),Gm(Fm,"displayName","ReactTooltip"),Fm))||$u)||$u)||$u)||$u)||$u)||$u)||$u,Xg={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.5.0/LICENSE.txt
 */var RP=Xg.exports,N0;function zP(){return N0||(N0=1,function(c,m){(function(p,T){c.exports=T()})(RP,function(){var p={},T={};function P(M,u,J){if(T[M]=J,M==="index"){var Y="var sharedModule = {}; ("+T.shared+")(sharedModule); ("+T.worker+")(sharedModule);",ve={};return T.shared(ve),T.index(p,ve),typeof window<"u"&&p.setWorkerUrl(window.URL.createObjectURL(new Blob([Y],{type:"text/javascript"}))),p}}P("shared",["exports"],function(M){function u(i,t,n,s){return new(n||(n=Promise))(function(f,v){function b(R){try{k(s.next(R))}catch(F){v(F)}}function S(R){try{k(s.throw(R))}catch(F){v(F)}}function k(R){var F;R.done?f(R.value):(F=R.value,F instanceof n?F:new n(function(j){j(F)})).then(b,S)}k((s=s.apply(i,t||[])).next())})}function J(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Y,ve;function de(){if(ve)return Y;function i(t,n){this.x=t,this.y=n}return ve=1,Y=i,i.prototype={clone:function(){return new i(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,n){return this.clone()._rotateAround(t,n)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var n=t.x-this.x,s=t.y-this.y;return n*n+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,n){return Math.atan2(this.x*n-this.y*t,this.x*t+this.y*n)},_matMult:function(t){var n=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=n,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var n=Math.cos(t),s=Math.sin(t),f=s*this.x+n*this.y;return this.x=n*this.x-s*this.y,this.y=f,this},_rotateAround:function(t,n){var s=Math.cos(t),f=Math.sin(t),v=n.y+f*(this.x-n.x)+s*(this.y-n.y);return this.x=n.x+s*(this.x-n.x)-f*(this.y-n.y),this.y=v,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},i.convert=function(t){return t instanceof i?t:Array.isArray(t)?new i(t[0],t[1]):t},Y}typeof SuppressedError=="function"&&SuppressedError;var Te,le,we=J(de()),xe=function(){if(le)return Te;function i(t,n,s,f){this.cx=3*t,this.bx=3*(s-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(f-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=n,this.p2x=s,this.p2y=f}return le=1,Te=i,i.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,n){if(n===void 0&&(n=1e-6),t<0)return 0;if(t>1)return 1;for(var s=t,f=0;f<8;f++){var v=this.sampleCurveX(s)-t;if(Math.abs(v)<n)return s;var b=this.sampleCurveDerivativeX(s);if(Math.abs(b)<1e-6)break;s-=v/b}var S=0,k=1;for(s=t,f=0;f<20&&(v=this.sampleCurveX(s),!(Math.abs(v-t)<n));f++)t>v?S=s:k=s,s=.5*(k-S)+S;return s},solve:function(t,n){return this.sampleCurveY(this.solveCurveX(t,n))}},Te}(),Ze=J(xe);let mt,kt;function Tt(){return mt==null&&(mt=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),mt}function Je(){if(kt==null&&(kt=!1,Tt())){const t=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(t){for(let s=0;s<5*5;s++){const f=4*s;t.fillStyle=`rgb(${f},${f+1},${f+2})`,t.fillRect(s%5,Math.floor(s/5),1,1)}const n=t.getImageData(0,0,5,5).data;for(let s=0;s<5*5*4;s++)if(s%4!=3&&n[s]!==s){kt=!0;break}}}return kt||!1}var Qe=1e-6,nt=typeof Float32Array<"u"?Float32Array:Array;function yt(){var i=new nt(9);return nt!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[5]=0,i[6]=0,i[7]=0),i[0]=1,i[4]=1,i[8]=1,i}function ze(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function $e(){var i=new nt(3);return nt!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0),i}function re(i){return Math.hypot(i[0],i[1],i[2])}function it(i,t,n){var s=new nt(3);return s[0]=i,s[1]=t,s[2]=n,s}Math.hypot||(Math.hypot=function(){for(var i=0,t=arguments.length;t--;)i+=arguments[t]*arguments[t];return Math.sqrt(i)});var st,zt=re;function tr(i,t,n){var s=t[0],f=t[1],v=t[2],b=t[3];return i[0]=n[0]*s+n[4]*f+n[8]*v+n[12]*b,i[1]=n[1]*s+n[5]*f+n[9]*v+n[13]*b,i[2]=n[2]*s+n[6]*f+n[10]*v+n[14]*b,i[3]=n[3]*s+n[7]*f+n[11]*v+n[15]*b,i}function Cr(){var i=new nt(4);return nt!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0),i[3]=1,i}function xr(){var i=new nt(2);return nt!=Float32Array&&(i[0]=0,i[1]=0),i}function or(i,t){var n=new nt(2);return n[0]=i,n[1]=t,n}$e(),st=new nt(4),nt!=Float32Array&&(st[0]=0,st[1]=0,st[2]=0,st[3]=0),$e(),it(1,0,0),it(0,1,0),Cr(),Cr(),yt(),xr();const xt=8192;function Pt(i,t,n){return t*(xt/(i.tileSize*Math.pow(2,n-i.tileID.overscaledZ)))}function Wt(i,t){return(i%t+t)%t}function Oe(i,t,n){return i*(1-n)+t*n}function ct(i){if(i<=0)return 0;if(i>=1)return 1;const t=i*i,n=t*i;return 4*(i<.5?n:3*(i-t)+n-.75)}function Ut(i,t,n,s){const f=new Ze(i,t,n,s);return v=>f.solve(v)}const ur=Ut(.25,.1,.25,1);function At(i,t,n){return Math.min(n,Math.max(t,i))}function ir(i,t,n){const s=n-t,f=((i-t)%s+s)%s+t;return f===t?n:f}function Sr(i,...t){for(const n of t)for(const s in n)i[s]=n[s];return i}let fr=1;function pr(i,t,n){const s={};for(const f in i)s[f]=t.call(this,i[f],f,i);return s}function Qr(i,t,n){const s={};for(const f in i)t.call(this,i[f],f,i)&&(s[f]=i[f]);return s}function Tr(i){return Array.isArray(i)?i.map(Tr):typeof i=="object"&&i?pr(i,Tr):i}const tn={};function $r(i){tn[i]||(typeof console<"u"&&console.warn(i),tn[i]=!0)}function br(i,t,n){return(n.y-i.y)*(t.x-i.x)>(t.y-i.y)*(n.x-i.x)}function nn(i){return typeof WorkerGlobalScope<"u"&&i!==void 0&&i instanceof WorkerGlobalScope}let Hr=null;function dn(i){return typeof ImageBitmap<"u"&&i instanceof ImageBitmap}const on="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function bn(i,t,n,s,f){return u(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const v=new VideoFrame(i,{timestamp:0});try{const b=v==null?void 0:v.format;if(!b||!b.startsWith("BGR")&&!b.startsWith("RGB"))throw new Error(`Unrecognized format ${b}`);const S=b.startsWith("BGR"),k=new Uint8ClampedArray(s*f*4);if(yield v.copyTo(k,function(R,F,j,W,K){const ee=4*Math.max(1,0),ie=(Math.max(0,j)-j)*W*4+ee,me=4*W,Ce=Math.max(0,F),Ve=Math.max(0,j);return{rect:{x:Ce,y:Ve,width:Math.min(R.width,F+W)-Ce,height:Math.min(R.height,j+K)-Ve},layout:[{offset:ie,stride:me}]}}(i,t,n,s,f)),S)for(let R=0;R<k.length;R+=4){const F=k[R];k[R]=k[R+2],k[R+2]=F}return k}finally{v.close()}})}let sn,kn;function wr(i,t,n,s){return i.addEventListener(t,n,s),{unsubscribe:()=>{i.removeEventListener(t,n,s)}}}function Un(i){return i*Math.PI/180}function Wn(i){return i/Math.PI*180}const Si={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},Jn={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},Hn="AbortError";function Bn(){return new Error(Hn)}const Ji={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Gi(i){return Ji.REGISTERED_PROTOCOLS[i.substring(0,i.indexOf("://"))]}const Vi="global-dispatcher";class ei extends Error{constructor(t,n,s,f){super(`AJAXError: ${n} (${t}): ${s}`),this.status=t,this.statusText=n,this.url=s,this.body=f}}const ii=()=>nn(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,mo=function(i,t){if(/:\/\//.test(i.url)&&!/^https?:|^file:/.test(i.url)){const s=Gi(i.url);if(s)return s(i,t);if(nn(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:i,targetMapId:Vi},t)}if(!(/^file:/.test(n=i.url)||/^file:/.test(ii())&&!/^\w+:/.test(n))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(s,f){return u(this,void 0,void 0,function*(){const v=new Request(s.url,{method:s.method||"GET",body:s.body,credentials:s.credentials,headers:s.headers,cache:s.cache,referrer:ii(),signal:f.signal});let b,S;s.type!=="json"||v.headers.has("Accept")||v.headers.set("Accept","application/json");try{b=yield fetch(v)}catch(R){throw new ei(0,R.message,s.url,new Blob)}if(!b.ok){const R=yield b.blob();throw new ei(b.status,b.statusText,s.url,R)}S=s.type==="arrayBuffer"||s.type==="image"?b.arrayBuffer():s.type==="json"?b.json():b.text();const k=yield S;if(f.signal.aborted)throw Bn();return{data:k,cacheControl:b.headers.get("Cache-Control"),expires:b.headers.get("Expires")}})}(i,t);if(nn(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:i,mustQueue:!0,targetMapId:Vi},t)}var n;return function(s,f){return new Promise((v,b)=>{var S;const k=new XMLHttpRequest;k.open(s.method||"GET",s.url,!0),s.type!=="arrayBuffer"&&s.type!=="image"||(k.responseType="arraybuffer");for(const R in s.headers)k.setRequestHeader(R,s.headers[R]);s.type==="json"&&(k.responseType="text",!((S=s.headers)===null||S===void 0)&&S.Accept||k.setRequestHeader("Accept","application/json")),k.withCredentials=s.credentials==="include",k.onerror=()=>{b(new Error(k.statusText))},k.onload=()=>{if(!f.signal.aborted)if((k.status>=200&&k.status<300||k.status===0)&&k.response!==null){let R=k.response;if(s.type==="json")try{R=JSON.parse(k.response)}catch(F){return void b(F)}v({data:R,cacheControl:k.getResponseHeader("Cache-Control"),expires:k.getResponseHeader("Expires")})}else{const R=new Blob([k.response],{type:k.getResponseHeader("Content-Type")});b(new ei(k.status,k.statusText,s.url,R))}},f.signal.addEventListener("abort",()=>{k.abort(),b(Bn())}),k.send(s.body)})}(i,t)};function et(i){if(!i||i.indexOf("://")<=0||i.indexOf("data:image/")===0||i.indexOf("blob:")===0)return!0;const t=new URL(i),n=window.location;return t.protocol===n.protocol&&t.host===n.host}function se(i,t,n){n[i]&&n[i].indexOf(t)!==-1||(n[i]=n[i]||[],n[i].push(t))}function ae(i,t,n){if(n&&n[i]){const s=n[i].indexOf(t);s!==-1&&n[i].splice(s,1)}}class ge{constructor(t,n={}){Sr(this,n),this.type=t}}class Ie extends ge{constructor(t,n={}){super("error",Sr({error:t},n))}}class Ue{on(t,n){return this._listeners=this._listeners||{},se(t,n,this._listeners),{unsubscribe:()=>{this.off(t,n)}}}off(t,n){return ae(t,n,this._listeners),ae(t,n,this._oneTimeListeners),this}once(t,n){return n?(this._oneTimeListeners=this._oneTimeListeners||{},se(t,n,this._oneTimeListeners),this):new Promise(s=>this.once(t,s))}fire(t,n){typeof t=="string"&&(t=new ge(t,n||{}));const s=t.type;if(this.listens(s)){t.target=this;const f=this._listeners&&this._listeners[s]?this._listeners[s].slice():[];for(const S of f)S.call(this,t);const v=this._oneTimeListeners&&this._oneTimeListeners[s]?this._oneTimeListeners[s].slice():[];for(const S of v)ae(s,S,this._oneTimeListeners),S.call(this,t);const b=this._eventedParent;b&&(Sr(t,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),b.fire(t))}else t instanceof Ie&&console.error(t.error);return this}listens(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)}setEventedParent(t,n){return this._eventedParent=t,this._eventedParentData=n,this}}var fe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const qe=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function We(i,t){const n={};for(const s in i)s!=="ref"&&(n[s]=i[s]);return qe.forEach(s=>{s in t&&(n[s]=t[s])}),n}function rt(i,t){if(Array.isArray(i)){if(!Array.isArray(t)||i.length!==t.length)return!1;for(let n=0;n<i.length;n++)if(!rt(i[n],t[n]))return!1;return!0}if(typeof i=="object"&&i!==null&&t!==null){if(typeof t!="object"||Object.keys(i).length!==Object.keys(t).length)return!1;for(const n in i)if(!rt(i[n],t[n]))return!1;return!0}return i===t}function dt(i,t){i.push(t)}function Xe(i,t,n){dt(n,{command:"addSource",args:[i,t[i]]})}function Lt(i,t,n){dt(t,{command:"removeSource",args:[i]}),n[i]=!0}function Xt(i,t,n,s){Lt(i,n,s),Xe(i,t,n)}function cr(i,t,n){let s;for(s in i[n])if(Object.prototype.hasOwnProperty.call(i[n],s)&&s!=="data"&&!rt(i[n][s],t[n][s]))return!1;for(s in t[n])if(Object.prototype.hasOwnProperty.call(t[n],s)&&s!=="data"&&!rt(i[n][s],t[n][s]))return!1;return!0}function Mr(i,t,n,s,f,v){i=i||{},t=t||{};for(const b in i)Object.prototype.hasOwnProperty.call(i,b)&&(rt(i[b],t[b])||n.push({command:v,args:[s,b,t[b],f]}));for(const b in t)Object.prototype.hasOwnProperty.call(t,b)&&!Object.prototype.hasOwnProperty.call(i,b)&&(rt(i[b],t[b])||n.push({command:v,args:[s,b,t[b],f]}))}function qr(i){return i.id}function Nr(i,t){return i[t.id]=t,i}class St{constructor(t,n,s,f){this.message=(t?`${t}: `:"")+s,f&&(this.identifier=f),n!=null&&n.__line__&&(this.line=n.__line__)}}function wn(i,...t){for(const n of t)for(const s in n)i[s]=n[s];return i}class yn extends Error{constructor(t,n){super(n),this.message=n,this.key=t}}class Sn{constructor(t,n=[]){this.parent=t,this.bindings={};for(const[s,f]of n)this.bindings[s]=f}concat(t){return new Sn(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const Fr={kind:"null"},Ot={kind:"number"},Or={kind:"string"},rn={kind:"boolean"},Vn={kind:"color"},Zn={kind:"projectionDefinition"},Po={kind:"object"},un={kind:"value"},Ys={kind:"collator"},Qs={kind:"formatted"},Ps={kind:"padding"},el={kind:"colorArray"},Zo={kind:"numberArray"},La={kind:"resolvedImage"},cn={kind:"variableAnchorOffsetCollection"};function li(i,t){return{kind:"array",itemType:i,N:t}}function qn(i){if(i.kind==="array"){const t=qn(i.itemType);return typeof i.N=="number"?`array<${t}, ${i.N}>`:i.itemType.kind==="value"?"array":`array<${t}>`}return i.kind}const Da=[Fr,Ot,Or,rn,Vn,Zn,Qs,Po,li(un),Ps,Zo,el,La,cn];function is(i,t){if(t.kind==="error")return null;if(i.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!is(i.itemType,t.itemType))&&(typeof i.N!="number"||i.N===t.N))return null}else{if(i.kind===t.kind)return null;if(i.kind==="value"){for(const n of Da)if(!is(n,t))return null}}return`Expected ${qn(i)} but found ${qn(t)} instead.`}function Kl(i,t){return t.some(n=>n.kind===i.kind)}function Do(i,t){return t.some(n=>n==="null"?i===null:n==="array"?Array.isArray(i):n==="object"?i&&!Array.isArray(i)&&typeof i=="object":n===typeof i)}function eo(i,t){return i.kind==="array"&&t.kind==="array"?i.itemType.kind===t.itemType.kind&&typeof i.N=="number":i.kind===t.kind}const os=.96422,tl=.82521,go=4/29,ga=6/29,Xl=3*ga*ga,pu=ga*ga*ga,ya=Math.PI/180,Yl=180/Math.PI;function Oa(i){return(i%=360)<0&&(i+=360),i}function Es([i,t,n,s]){let f,v;const b=Q((.2225045*(i=B(i))+.7168786*(t=B(t))+.0606169*(n=B(n)))/1);i===t&&t===n?f=v=b:(f=Q((.4360747*i+.3850649*t+.1430804*n)/os),v=Q((.0139322*i+.0971045*t+.7141733*n)/tl));const S=116*b-16;return[S<0?0:S,500*(f-b),200*(b-v),s]}function B(i){return i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function Q(i){return i>pu?Math.pow(i,1/3):i/Xl+go}function he([i,t,n,s]){let f=(i+16)/116,v=isNaN(t)?f:f+t/500,b=isNaN(n)?f:f-n/200;return f=1*gt(f),v=os*gt(v),b=tl*gt(b),[Ee(3.1338561*v-1.6168667*f-.4906146*b),Ee(-.9787684*v+1.9161415*f+.033454*b),Ee(.0719453*v-.2289914*f+1.4052427*b),s]}function Ee(i){return(i=i<=.00304?12.92*i:1.055*Math.pow(i,1/2.4)-.055)<0?0:i>1?1:i}function gt(i){return i>ga?i*i*i:Xl*(i-go)}const ut=Object.hasOwn||function(i,t){return Object.prototype.hasOwnProperty.call(i,t)};function Dt(i,t){return ut(i,t)?i[t]:void 0}function sr(i){return parseInt(i.padEnd(2,i),16)/255}function mr(i,t){return kr(t?i/100:i,0,1)}function kr(i,t,n){return Math.min(Math.max(t,i),n)}function yr(i){return!i.some(Number.isNaN)}const Nn={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function yi(i,t,n){return i+n*(t-i)}function to(i,t,n){return i.map((s,f)=>yi(s,t[f],n))}class Jr{constructor(t,n,s,f=1,v=!0){this.r=t,this.g=n,this.b=s,this.a=f,v||(this.r*=f,this.g*=f,this.b*=f,f||this.overwriteGetter("rgb",[t,n,s,f]))}static parse(t){if(t instanceof Jr)return t;if(typeof t!="string")return;const n=function(s){if((s=s.toLowerCase().trim())==="transparent")return[0,0,0,0];const f=Dt(Nn,s);if(f){const[b,S,k]=f;return[b/255,S/255,k/255,1]}if(s.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(s)){const b=s.length<6?1:2;let S=1;return[sr(s.slice(S,S+=b)),sr(s.slice(S,S+=b)),sr(s.slice(S,S+=b)),sr(s.slice(S,S+b)||"ff")]}if(s.startsWith("rgb")){const b=s.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(b){const[S,k,R,F,j,W,K,ee,ie,me,Ce,Ve]=b,Re=[F||" ",K||" ",me].join("");if(Re==="  "||Re==="  /"||Re===",,"||Re===",,,"){const H=[R,W,ie].join(""),pe=H==="%%%"?100:H===""?255:0;if(pe){const Fe=[kr(+k/pe,0,1),kr(+j/pe,0,1),kr(+ee/pe,0,1),Ce?mr(+Ce,Ve):1];if(yr(Fe))return Fe}}return}}const v=s.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[b,S,k,R,F,j,W,K,ee]=v,ie=[k||" ",F||" ",W].join("");if(ie==="  "||ie==="  /"||ie===",,"||ie===",,,"){const me=[+S,kr(+R,0,100),kr(+j,0,100),K?mr(+K,ee):1];if(yr(me))return function([Ce,Ve,Re,H]){function pe(Fe){const pt=(Fe+Ce/30)%12,jt=Ve*Math.min(Re,1-Re);return Re-jt*Math.max(-1,Math.min(pt-3,9-pt,1))}return Ce=Oa(Ce),Ve/=100,Re/=100,[pe(0),pe(8),pe(4),H]}(me)}}}(t);return n?new Jr(...n,!1):void 0}get rgb(){const{r:t,g:n,b:s,a:f}=this,v=f||1/0;return this.overwriteGetter("rgb",[t/v,n/v,s/v,f])}get hcl(){return this.overwriteGetter("hcl",function(t){const[n,s,f,v]=Es(t),b=Math.sqrt(s*s+f*f);return[Math.round(1e4*b)?Oa(Math.atan2(f,s)*Yl):NaN,b,n,v]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Es(this.rgb))}overwriteGetter(t,n){return Object.defineProperty(this,t,{value:n}),n}toString(){const[t,n,s,f]=this.rgb;return`rgba(${[t,n,s].map(v=>Math.round(255*v)).join(",")},${f})`}static interpolate(t,n,s,f="rgb"){switch(f){case"rgb":{const[v,b,S,k]=to(t.rgb,n.rgb,s);return new Jr(v,b,S,k,!1)}case"hcl":{const[v,b,S,k]=t.hcl,[R,F,j,W]=n.hcl;let K,ee;if(isNaN(v)||isNaN(R))isNaN(v)?isNaN(R)?K=NaN:(K=R,S!==1&&S!==0||(ee=F)):(K=v,j!==1&&j!==0||(ee=b));else{let Re=R-v;R>v&&Re>180?Re-=360:R<v&&v-R>180&&(Re+=360),K=v+s*Re}const[ie,me,Ce,Ve]=function([Re,H,pe,Fe]){return Re=isNaN(Re)?0:Re*ya,he([pe,Math.cos(Re)*H,Math.sin(Re)*H,Fe])}([K,ee??yi(b,F,s),yi(S,j,s),yi(k,W,s)]);return new Jr(ie,me,Ce,Ve,!1)}case"lab":{const[v,b,S,k]=he(to(t.lab,n.lab,s));return new Jr(v,b,S,k,!1)}}}}Jr.black=new Jr(0,0,0,1),Jr.white=new Jr(1,1,1,1),Jr.transparent=new Jr(0,0,0,0),Jr.red=new Jr(1,0,0,1);class ss{constructor(t,n,s){this.sensitivity=t?n?"variant":"case":n?"accent":"base",this.locale=s,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,n){return this.collator.compare(t,n)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const Eo=["bottom","center","top"];class Io{constructor(t,n,s,f,v,b){this.text=t,this.image=n,this.scale=s,this.fontStack=f,this.textColor=v,this.verticalAlign=b}}class ui{constructor(t){this.sections=t}static fromString(t){return new ui([new Io(t,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(t=>t.text.length!==0||t.image&&t.image.name.length!==0)}static factory(t){return t instanceof ui?t:ui.fromString(t)}toString(){return this.sections.length===0?"":this.sections.map(t=>t.text).join("")}}class ci{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof ci)return t;if(typeof t=="number")return new ci([t,t,t,t]);if(Array.isArray(t)&&!(t.length<1||t.length>4)){for(const n of t)if(typeof n!="number")return;switch(t.length){case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]]}return new ci(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,n,s){return new ci(to(t.values,n.values,s))}}class Dn{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof Dn)return t;if(typeof t=="number")return new Dn([t]);if(Array.isArray(t)){for(const n of t)if(typeof n!="number")return;return new Dn(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,n,s){return new Dn(to(t.values,n.values,s))}}class Pi{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof Pi)return t;if(typeof t=="string"){const s=Jr.parse(t);return s?new Pi([s]):void 0}if(!Array.isArray(t))return;const n=[];for(const s of t){if(typeof s!="string")return;const f=Jr.parse(s);if(!f)return;n.push(f)}return new Pi(n)}toString(){return JSON.stringify(this.values)}static interpolate(t,n,s,f="rgb"){const v=[];if(t.values.length!=n.values.length)throw new Error(`colorArray: Arrays have mismatched length (${t.values.length} vs. ${n.values.length}), cannot interpolate.`);for(let b=0;b<t.values.length;b++)v.push(Jr.interpolate(t.values[b],n.values[b],s,f));return new Pi(v)}}class On extends Error{constructor(t){super(t),this.name="RuntimeError"}toJSON(){return this.message}}const mu=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Oo{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof Oo)return t;if(Array.isArray(t)&&!(t.length<1)&&t.length%2==0){for(let n=0;n<t.length;n+=2){const s=t[n],f=t[n+1];if(typeof s!="string"||!mu.has(s)||!Array.isArray(f)||f.length!==2||typeof f[0]!="number"||typeof f[1]!="number")return}return new Oo(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,n,s){const f=t.values,v=n.values;if(f.length!==v.length)throw new On(`Cannot interpolate values of different length. from: ${t.toString()}, to: ${n.toString()}`);const b=[];for(let S=0;S<f.length;S+=2){if(f[S]!==v[S])throw new On(`Cannot interpolate values containing mismatched anchors. from[${S}]: ${f[S]}, to[${S}]: ${v[S]}`);b.push(f[S]);const[k,R]=f[S+1],[F,j]=v[S+1];b.push([yi(k,F,s),yi(R,j,s)])}return new Oo(b)}}class ro{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new ro({name:t,available:!1}):null}}class as{constructor(t,n,s){this.from=t,this.to=n,this.transition=s}static interpolate(t,n,s){return new as(t,n,s)}static parse(t){return t instanceof as?t:Array.isArray(t)&&t.length===3&&typeof t[0]=="string"&&typeof t[1]=="string"&&typeof t[2]=="number"?new as(t[0],t[1],t[2]):typeof t=="object"&&typeof t.from=="string"&&typeof t.to=="string"&&typeof t.transition=="number"?new as(t.from,t.to,t.transition):typeof t=="string"?new as(t,t,1):void 0}}function ls(i,t,n,s){return typeof i=="number"&&i>=0&&i<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof n=="number"&&n>=0&&n<=255?s===void 0||typeof s=="number"&&s>=0&&s<=1?null:`Invalid rgba value [${[i,t,n,s].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof s=="number"?[i,t,n,s]:[i,t,n]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ln(i){if(i===null||typeof i=="string"||typeof i=="boolean"||typeof i=="number"||i instanceof as||i instanceof Jr||i instanceof ss||i instanceof ui||i instanceof ci||i instanceof Dn||i instanceof Pi||i instanceof Oo||i instanceof ro)return!0;if(Array.isArray(i)){for(const t of i)if(!Ln(t))return!1;return!0}if(typeof i=="object"){for(const t in i)if(!Ln(i[t]))return!1;return!0}return!1}function hi(i){if(i===null)return Fr;if(typeof i=="string")return Or;if(typeof i=="boolean")return rn;if(typeof i=="number")return Ot;if(i instanceof Jr)return Vn;if(i instanceof as)return Zn;if(i instanceof ss)return Ys;if(i instanceof ui)return Qs;if(i instanceof ci)return Ps;if(i instanceof Dn)return Zo;if(i instanceof Pi)return el;if(i instanceof Oo)return cn;if(i instanceof ro)return La;if(Array.isArray(i)){const t=i.length;let n;for(const s of i){const f=hi(s);if(n){if(n===f)continue;n=un;break}n=f}return li(n||un,t)}return Po}function Lr(i){const t=typeof i;return i===null?"":t==="string"||t==="number"||t==="boolean"?String(i):i instanceof Jr||i instanceof as||i instanceof ui||i instanceof ci||i instanceof Dn||i instanceof Pi||i instanceof Oo||i instanceof ro?i.toString():JSON.stringify(i)}class gr{constructor(t,n){this.type=t,this.value=n}static parse(t,n){if(t.length!==2)return n.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!Ln(t[1]))return n.error("invalid value");const s=t[1];let f=hi(s);const v=n.expectedType;return f.kind!=="array"||f.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(f=v),new gr(f,s)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Pn={string:Or,number:Ot,boolean:rn,object:Po};class Kr{constructor(t,n){this.type=t,this.args=n}static parse(t,n){if(t.length<2)return n.error("Expected at least one argument.");let s,f=1;const v=t[0];if(v==="array"){let S,k;if(t.length>2){const R=t[1];if(typeof R!="string"||!(R in Pn)||R==="object")return n.error('The item type argument of "array" must be one of string, number, boolean',1);S=Pn[R],f++}else S=un;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return n.error('The length argument to "array" must be a positive integer literal',2);k=t[2],f++}s=li(S,k)}else{if(!Pn[v])throw new Error(`Types doesn't contain name = ${v}`);s=Pn[v]}const b=[];for(;f<t.length;f++){const S=n.parse(t[f],f,un);if(!S)return null;b.push(S)}return new Kr(s,b)}evaluate(t){for(let n=0;n<this.args.length;n++){const s=this.args[n].evaluate(t);if(!is(this.type,hi(s)))return s;if(n===this.args.length-1)throw new On(`Expected value to be of type ${qn(this.type)}, but found ${qn(hi(s))} instead.`)}throw new Error}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const us={"to-boolean":rn,"to-color":Vn,"to-number":Ot,"to-string":Or};class no{constructor(t,n){this.type=t,this.args=n}static parse(t,n){if(t.length<2)return n.error("Expected at least one argument.");const s=t[0];if(!us[s])throw new Error(`Can't parse ${s} as it is not part of the known types`);if((s==="to-boolean"||s==="to-string")&&t.length!==2)return n.error("Expected one argument.");const f=us[s],v=[];for(let b=1;b<t.length;b++){const S=n.parse(t[b],b,un);if(!S)return null;v.push(S)}return new no(f,v)}evaluate(t){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(t);case"color":{let n,s;for(const f of this.args){if(n=f.evaluate(t),s=null,n instanceof Jr)return n;if(typeof n=="string"){const v=t.parseColor(n);if(v)return v}else if(Array.isArray(n)&&(s=n.length<3||n.length>4?`Invalid rgba value ${JSON.stringify(n)}: expected an array containing either three or four numeric values.`:ls(n[0],n[1],n[2],n[3]),!s))return new Jr(n[0]/255,n[1]/255,n[2]/255,n[3])}throw new On(s||`Could not parse color from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"padding":{let n;for(const s of this.args){n=s.evaluate(t);const f=ci.parse(n);if(f)return f}throw new On(`Could not parse padding from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"numberArray":{let n;for(const s of this.args){n=s.evaluate(t);const f=Dn.parse(n);if(f)return f}throw new On(`Could not parse numberArray from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"colorArray":{let n;for(const s of this.args){n=s.evaluate(t);const f=Pi.parse(n);if(f)return f}throw new On(`Could not parse colorArray from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"variableAnchorOffsetCollection":{let n;for(const s of this.args){n=s.evaluate(t);const f=Oo.parse(n);if(f)return f}throw new On(`Could not parse variableAnchorOffsetCollection from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"number":{let n=null;for(const s of this.args){if(n=s.evaluate(t),n===null)return 0;const f=Number(n);if(!isNaN(f))return f}throw new On(`Could not convert ${JSON.stringify(n)} to number.`)}case"formatted":return ui.fromString(Lr(this.args[0].evaluate(t)));case"resolvedImage":return ro.fromString(Lr(this.args[0].evaluate(t)));case"projectionDefinition":return this.args[0].evaluate(t);default:return Lr(this.args[0].evaluate(t))}}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const rl=["Unknown","Point","LineString","Polygon"];class gu{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?rl[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let n=this._parseColorCache.get(t);return n||(n=Jr.parse(t),this._parseColorCache.set(t,n)),n}}class Fa{constructor(t,n,s=[],f,v=new Sn,b=[]){this.registry=t,this.path=s,this.key=s.map(S=>`[${S}]`).join(""),this.scope=v,this.errors=b,this.expectedType=f,this._isConstant=n}parse(t,n,s,f,v={}){return n?this.concat(n,s,f)._parse(t,v):this._parse(t,v)}_parse(t,n){function s(f,v,b){return b==="assert"?new Kr(v,[f]):b==="coerce"?new no(v,[f]):f}if(t!==null&&typeof t!="string"&&typeof t!="boolean"&&typeof t!="number"||(t=["literal",t]),Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const f=t[0];if(typeof f!="string")return this.error(`Expression name must be a string, but found ${typeof f} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[f];if(v){let b=v.parse(t,this);if(!b)return null;if(this.expectedType){const S=this.expectedType,k=b.type;if(S.kind!=="string"&&S.kind!=="number"&&S.kind!=="boolean"&&S.kind!=="object"&&S.kind!=="array"||k.kind!=="value"){if(S.kind==="projectionDefinition"&&["string","array"].includes(k.kind)||["color","formatted","resolvedImage"].includes(S.kind)&&["value","string"].includes(k.kind)||["padding","numberArray"].includes(S.kind)&&["value","number","array"].includes(k.kind)||S.kind==="colorArray"&&["value","string","array"].includes(k.kind)||S.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(k.kind))b=s(b,S,n.typeAnnotation||"coerce");else if(this.checkSubtype(S,k))return null}else b=s(b,S,n.typeAnnotation||"assert")}if(!(b instanceof gr)&&b.type.kind!=="resolvedImage"&&this._isConstant(b)){const S=new gu;try{b=new gr(b.type,b.evaluate(S))}catch(k){return this.error(k.message),null}}return b}return this.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(t===void 0?"'undefined' value invalid. Use null instead.":typeof t=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,n,s){const f=typeof t=="number"?this.path.concat(t):this.path,v=s?this.scope.concat(s):this.scope;return new Fa(this.registry,this._isConstant,f,n||null,v,this.errors)}error(t,...n){const s=`${this.key}${n.map(f=>`[${f}]`).join("")}`;this.errors.push(new yn(s,t))}checkSubtype(t,n){const s=is(t,n);return s&&this.error(s),s}}class _a{constructor(t,n){this.type=n.type,this.bindings=[].concat(t),this.result=n}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const n of this.bindings)t(n[1]);t(this.result)}static parse(t,n){if(t.length<4)return n.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const s=[];for(let v=1;v<t.length-1;v+=2){const b=t[v];if(typeof b!="string")return n.error(`Expected string, but found ${typeof b} instead.`,v);if(/[^a-zA-Z0-9_]/.test(b))return n.error("Variable names must contain only alphanumeric characters or '_'.",v);const S=n.parse(t[v+1],v+1);if(!S)return null;s.push([b,S])}const f=n.parse(t[t.length-1],t.length-1,n.expectedType,s);return f?new _a(s,f):null}outputDefined(){return this.result.outputDefined()}}class Ql{constructor(t,n){this.type=n.type,this.name=t,this.boundExpression=n}static parse(t,n){if(t.length!==2||typeof t[1]!="string")return n.error("'var' expression requires exactly one string literal argument.");const s=t[1];return n.scope.has(s)?new Ql(s,n.scope.get(s)):n.error(`Unknown variable "${s}". Make sure "${s}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}}class di{constructor(t,n,s){this.type=t,this.index=n,this.input=s}static parse(t,n){if(t.length!==3)return n.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const s=n.parse(t[1],1,Ot),f=n.parse(t[2],2,li(n.expectedType||un));return s&&f?new di(f.type.itemType,s,f):null}evaluate(t){const n=this.index.evaluate(t),s=this.input.evaluate(t);if(n<0)throw new On(`Array index out of bounds: ${n} < 0.`);if(n>=s.length)throw new On(`Array index out of bounds: ${n} > ${s.length-1}.`);if(n!==Math.floor(n))throw new On(`Array index must be an integer, but found ${n} instead.`);return s[n]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}}class nl{constructor(t,n){this.type=rn,this.needle=t,this.haystack=n}static parse(t,n){if(t.length!==3)return n.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const s=n.parse(t[1],1,un),f=n.parse(t[2],2,un);return s&&f?Kl(s.type,[rn,Or,Ot,Fr,un])?new nl(s,f):n.error(`Expected first argument to be of type boolean, string, number or null, but found ${qn(s.type)} instead`):null}evaluate(t){const n=this.needle.evaluate(t),s=this.haystack.evaluate(t);if(!s)return!1;if(!Do(n,["boolean","string","number","null"]))throw new On(`Expected first argument to be of type boolean, string, number or null, but found ${qn(hi(n))} instead.`);if(!Do(s,["string","array"]))throw new On(`Expected second argument to be of type array or string, but found ${qn(hi(s))} instead.`);return s.indexOf(n)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}}class cs{constructor(t,n,s){this.type=Ot,this.needle=t,this.haystack=n,this.fromIndex=s}static parse(t,n){if(t.length<=2||t.length>=5)return n.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const s=n.parse(t[1],1,un),f=n.parse(t[2],2,un);if(!s||!f)return null;if(!Kl(s.type,[rn,Or,Ot,Fr,un]))return n.error(`Expected first argument to be of type boolean, string, number or null, but found ${qn(s.type)} instead`);if(t.length===4){const v=n.parse(t[3],3,Ot);return v?new cs(s,f,v):null}return new cs(s,f)}evaluate(t){const n=this.needle.evaluate(t),s=this.haystack.evaluate(t);if(!Do(n,["boolean","string","number","null"]))throw new On(`Expected first argument to be of type boolean, string, number or null, but found ${qn(hi(n))} instead.`);let f;if(this.fromIndex&&(f=this.fromIndex.evaluate(t)),Do(s,["string"])){const v=s.indexOf(n,f);return v===-1?-1:[...s.slice(0,v)].length}if(Do(s,["array"]))return s.indexOf(n,f);throw new On(`Expected second argument to be of type array or string, but found ${qn(hi(s))} instead.`)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}}class il{constructor(t,n,s,f,v,b){this.inputType=t,this.type=n,this.input=s,this.cases=f,this.outputs=v,this.otherwise=b}static parse(t,n){if(t.length<5)return n.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return n.error("Expected an even number of arguments.");let s,f;n.expectedType&&n.expectedType.kind!=="value"&&(f=n.expectedType);const v={},b=[];for(let R=2;R<t.length-1;R+=2){let F=t[R];const j=t[R+1];Array.isArray(F)||(F=[F]);const W=n.concat(R);if(F.length===0)return W.error("Expected at least one branch label.");for(const ee of F){if(typeof ee!="number"&&typeof ee!="string")return W.error("Branch labels must be numbers or strings.");if(typeof ee=="number"&&Math.abs(ee)>Number.MAX_SAFE_INTEGER)return W.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ee=="number"&&Math.floor(ee)!==ee)return W.error("Numeric branch labels must be integer values.");if(s){if(W.checkSubtype(s,hi(ee)))return null}else s=hi(ee);if(v[String(ee)]!==void 0)return W.error("Branch labels must be unique.");v[String(ee)]=b.length}const K=n.parse(j,R,f);if(!K)return null;f=f||K.type,b.push(K)}const S=n.parse(t[1],1,un);if(!S)return null;const k=n.parse(t[t.length-1],t.length-1,f);return k?S.type.kind!=="value"&&n.concat(1).checkSubtype(s,S.type)?null:new il(s,f,S,v,b,k):null}evaluate(t){const n=this.input.evaluate(t);return(hi(n)===this.inputType&&this.outputs[this.cases[n]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}}class _i{constructor(t,n,s){this.type=t,this.branches=n,this.otherwise=s}static parse(t,n){if(t.length<4)return n.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return n.error("Expected an odd number of arguments.");let s;n.expectedType&&n.expectedType.kind!=="value"&&(s=n.expectedType);const f=[];for(let b=1;b<t.length-1;b+=2){const S=n.parse(t[b],b,rn);if(!S)return null;const k=n.parse(t[b+1],b+1,s);if(!k)return null;f.push([S,k]),s=s||k.type}const v=n.parse(t[t.length-1],t.length-1,s);if(!v)return null;if(!s)throw new Error("Can't infer output type");return new _i(s,f,v)}evaluate(t){for(const[n,s]of this.branches)if(n.evaluate(t))return s.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[n,s]of this.branches)t(n),t(s);t(this.otherwise)}outputDefined(){return this.branches.every(([t,n])=>n.outputDefined())&&this.otherwise.outputDefined()}}class Fi{constructor(t,n,s,f){this.type=t,this.input=n,this.beginIndex=s,this.endIndex=f}static parse(t,n){if(t.length<=2||t.length>=5)return n.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const s=n.parse(t[1],1,un),f=n.parse(t[2],2,Ot);if(!s||!f)return null;if(!Kl(s.type,[li(un),Or,un]))return n.error(`Expected first argument to be of type array or string, but found ${qn(s.type)} instead`);if(t.length===4){const v=n.parse(t[3],3,Ot);return v?new Fi(s.type,s,f,v):null}return new Fi(s.type,s,f)}evaluate(t){const n=this.input.evaluate(t),s=this.beginIndex.evaluate(t);let f;if(this.endIndex&&(f=this.endIndex.evaluate(t)),Do(n,["string"]))return[...n].slice(s,f).join("");if(Do(n,["array"]))return n.slice(s,f);throw new On(`Expected first argument to be of type array or string, but found ${qn(hi(n))} instead.`)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}}function Ba(i,t){const n=i.length-1;let s,f,v=0,b=n,S=0;for(;v<=b;)if(S=Math.floor((v+b)/2),s=i[S],f=i[S+1],s<=t){if(S===n||t<f)return S;v=S+1}else{if(!(s>t))throw new On("Input is not a number.");b=S-1}return 0}class Ai{constructor(t,n,s){this.type=t,this.input=n,this.labels=[],this.outputs=[];for(const[f,v]of s)this.labels.push(f),this.outputs.push(v)}static parse(t,n){if(t.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return n.error("Expected an even number of arguments.");const s=n.parse(t[1],1,Ot);if(!s)return null;const f=[];let v=null;n.expectedType&&n.expectedType.kind!=="value"&&(v=n.expectedType);for(let b=1;b<t.length;b+=2){const S=b===1?-1/0:t[b],k=t[b+1],R=b,F=b+1;if(typeof S!="number")return n.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',R);if(f.length&&f[f.length-1][0]>=S)return n.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',R);const j=n.parse(k,F,v);if(!j)return null;v=v||j.type,f.push([S,j])}return new Ai(v,s,f)}evaluate(t){const n=this.labels,s=this.outputs;if(n.length===1)return s[0].evaluate(t);const f=this.input.evaluate(t);if(f<=n[0])return s[0].evaluate(t);const v=n.length;return f>=n[v-1]?s[v-1].evaluate(t):s[Ba(n,f)].evaluate(t)}eachChild(t){t(this.input);for(const n of this.outputs)t(n)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function Ei(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var va,ol,Vu=function(){if(ol)return va;function i(t,n,s,f){this.cx=3*t,this.bx=3*(s-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(f-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=n,this.p2x=s,this.p2y=f}return ol=1,va=i,i.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,n){if(n===void 0&&(n=1e-6),t<0)return 0;if(t>1)return 1;for(var s=t,f=0;f<8;f++){var v=this.sampleCurveX(s)-t;if(Math.abs(v)<n)return s;var b=this.sampleCurveDerivativeX(s);if(Math.abs(b)<1e-6)break;s-=v/b}var S=0,k=1;for(s=t,f=0;f<20&&(v=this.sampleCurveX(s),!(Math.abs(v-t)<n));f++)t>v?S=s:k=s,s=.5*(k-S)+S;return s},solve:function(t,n){return this.sampleCurveY(this.solveCurveX(t,n))}},va}(),yo=Ei(Vu);class Bi{constructor(t,n,s,f,v){this.type=t,this.operator=n,this.interpolation=s,this.input=f,this.labels=[],this.outputs=[];for(const[b,S]of v)this.labels.push(b),this.outputs.push(S)}static interpolationFactor(t,n,s,f){let v=0;if(t.name==="exponential")v=Ri(n,t.base,s,f);else if(t.name==="linear")v=Ri(n,1,s,f);else if(t.name==="cubic-bezier"){const b=t.controlPoints;v=new yo(b[0],b[1],b[2],b[3]).solve(Ri(n,1,s,f))}return v}static parse(t,n){let[s,f,v,...b]=t;if(!Array.isArray(f)||f.length===0)return n.error("Expected an interpolation type expression.",1);if(f[0]==="linear")f={name:"linear"};else if(f[0]==="exponential"){const R=f[1];if(typeof R!="number")return n.error("Exponential interpolation requires a numeric base.",1,1);f={name:"exponential",base:R}}else{if(f[0]!=="cubic-bezier")return n.error(`Unknown interpolation type ${String(f[0])}`,1,0);{const R=f.slice(1);if(R.length!==4||R.some(F=>typeof F!="number"||F<0||F>1))return n.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);f={name:"cubic-bezier",controlPoints:R}}}if(t.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return n.error("Expected an even number of arguments.");if(v=n.parse(v,2,Ot),!v)return null;const S=[];let k=null;s!=="interpolate-hcl"&&s!=="interpolate-lab"||n.expectedType==el?n.expectedType&&n.expectedType.kind!=="value"&&(k=n.expectedType):k=Vn;for(let R=0;R<b.length;R+=2){const F=b[R],j=b[R+1],W=R+3,K=R+4;if(typeof F!="number")return n.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',W);if(S.length&&S[S.length-1][0]>=F)return n.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',W);const ee=n.parse(j,K,k);if(!ee)return null;k=k||ee.type,S.push([F,ee])}return eo(k,Ot)||eo(k,Zn)||eo(k,Vn)||eo(k,Ps)||eo(k,Zo)||eo(k,el)||eo(k,cn)||eo(k,li(Ot))?new Bi(k,s,f,v,S):n.error(`Type ${qn(k)} is not interpolatable.`)}evaluate(t){const n=this.labels,s=this.outputs;if(n.length===1)return s[0].evaluate(t);const f=this.input.evaluate(t);if(f<=n[0])return s[0].evaluate(t);const v=n.length;if(f>=n[v-1])return s[v-1].evaluate(t);const b=Ba(n,f),S=Bi.interpolationFactor(this.interpolation,f,n[b],n[b+1]),k=s[b].evaluate(t),R=s[b+1].evaluate(t);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return yi(k,R,S);case"color":return Jr.interpolate(k,R,S);case"padding":return ci.interpolate(k,R,S);case"colorArray":return Pi.interpolate(k,R,S);case"numberArray":return Dn.interpolate(k,R,S);case"variableAnchorOffsetCollection":return Oo.interpolate(k,R,S);case"array":return to(k,R,S);case"projectionDefinition":return as.interpolate(k,R,S)}case"interpolate-hcl":switch(this.type.kind){case"color":return Jr.interpolate(k,R,S,"hcl");case"colorArray":return Pi.interpolate(k,R,S,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return Jr.interpolate(k,R,S,"lab");case"colorArray":return Pi.interpolate(k,R,S,"lab")}}}eachChild(t){t(this.input);for(const n of this.outputs)t(n)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function Ri(i,t,n,s){const f=s-n,v=i-n;return f===0?0:t===1?v/f:(Math.pow(t,v)-1)/(Math.pow(t,f)-1)}const hs={color:Jr.interpolate,number:yi,padding:ci.interpolate,numberArray:Dn.interpolate,colorArray:Pi.interpolate,variableAnchorOffsetCollection:Oo.interpolate,array:to};class Na{constructor(t,n){this.type=t,this.args=n}static parse(t,n){if(t.length<2)return n.error("Expected at least one argument.");let s=null;const f=n.expectedType;f&&f.kind!=="value"&&(s=f);const v=[];for(const S of t.slice(1)){const k=n.parse(S,1+v.length,s,void 0,{typeAnnotation:"omit"});if(!k)return null;s=s||k.type,v.push(k)}if(!s)throw new Error("No output type");const b=f&&v.some(S=>is(f,S.type));return new Na(b?un:s,v)}evaluate(t){let n,s=null,f=0;for(const v of this.args)if(f++,s=v.evaluate(t),s&&s instanceof ro&&!s.available&&(n||(n=s.name),s=null,f===this.args.length&&(s=n)),s!==null)break;return s}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}function Is(i,t){return i==="=="||i==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function Mo(i,t,n,s){return s.compare(t,n)===0}function Zi(i,t,n){const s=i!=="=="&&i!=="!=";return class D1{constructor(v,b,S){this.type=rn,this.lhs=v,this.rhs=b,this.collator=S,this.hasUntypedArgument=v.type.kind==="value"||b.type.kind==="value"}static parse(v,b){if(v.length!==3&&v.length!==4)return b.error("Expected two or three arguments.");const S=v[0];let k=b.parse(v[1],1,un);if(!k)return null;if(!Is(S,k.type))return b.concat(1).error(`"${S}" comparisons are not supported for type '${qn(k.type)}'.`);let R=b.parse(v[2],2,un);if(!R)return null;if(!Is(S,R.type))return b.concat(2).error(`"${S}" comparisons are not supported for type '${qn(R.type)}'.`);if(k.type.kind!==R.type.kind&&k.type.kind!=="value"&&R.type.kind!=="value")return b.error(`Cannot compare types '${qn(k.type)}' and '${qn(R.type)}'.`);s&&(k.type.kind==="value"&&R.type.kind!=="value"?k=new Kr(R.type,[k]):k.type.kind!=="value"&&R.type.kind==="value"&&(R=new Kr(k.type,[R])));let F=null;if(v.length===4){if(k.type.kind!=="string"&&R.type.kind!=="string"&&k.type.kind!=="value"&&R.type.kind!=="value")return b.error("Cannot use collator to compare non-string types.");if(F=b.parse(v[3],3,Ys),!F)return null}return new D1(k,R,F)}evaluate(v){const b=this.lhs.evaluate(v),S=this.rhs.evaluate(v);if(s&&this.hasUntypedArgument){const k=hi(b),R=hi(S);if(k.kind!==R.kind||k.kind!=="string"&&k.kind!=="number")throw new On(`Expected arguments for "${i}" to be (string, string) or (number, number), but found (${k.kind}, ${R.kind}) instead.`)}if(this.collator&&!s&&this.hasUntypedArgument){const k=hi(b),R=hi(S);if(k.kind!=="string"||R.kind!=="string")return t(v,b,S)}return this.collator?n(v,b,S,this.collator.evaluate(v)):t(v,b,S)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}}}const Kn=Zi("==",function(i,t,n){return t===n},Mo),$a=Zi("!=",function(i,t,n){return t!==n},function(i,t,n,s){return!Mo(0,t,n,s)}),Zu=Zi("<",function(i,t,n){return t<n},function(i,t,n,s){return s.compare(t,n)<0}),Bh=Zi(">",function(i,t,n){return t>n},function(i,t,n,s){return s.compare(t,n)>0}),yu=Zi("<=",function(i,t,n){return t<=n},function(i,t,n,s){return s.compare(t,n)<=0}),Nh=Zi(">=",function(i,t,n){return t>=n},function(i,t,n,s){return s.compare(t,n)>=0});class _u{constructor(t,n,s){this.type=Ys,this.locale=s,this.caseSensitive=t,this.diacriticSensitive=n}static parse(t,n){if(t.length!==2)return n.error("Expected one argument.");const s=t[1];if(typeof s!="object"||Array.isArray(s))return n.error("Collator options argument must be an object.");const f=n.parse(s["case-sensitive"]!==void 0&&s["case-sensitive"],1,rn);if(!f)return null;const v=n.parse(s["diacritic-sensitive"]!==void 0&&s["diacritic-sensitive"],1,rn);if(!v)return null;let b=null;return s.locale&&(b=n.parse(s.locale,1,Or),!b)?null:new _u(f,v,b)}evaluate(t){return new ss(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}}class sl{constructor(t,n,s,f,v){this.type=Or,this.number=t,this.locale=n,this.currency=s,this.minFractionDigits=f,this.maxFractionDigits=v}static parse(t,n){if(t.length!==3)return n.error("Expected two arguments.");const s=n.parse(t[1],1,Ot);if(!s)return null;const f=t[2];if(typeof f!="object"||Array.isArray(f))return n.error("NumberFormat options argument must be an object.");let v=null;if(f.locale&&(v=n.parse(f.locale,1,Or),!v))return null;let b=null;if(f.currency&&(b=n.parse(f.currency,1,Or),!b))return null;let S=null;if(f["min-fraction-digits"]&&(S=n.parse(f["min-fraction-digits"],1,Ot),!S))return null;let k=null;return f["max-fraction-digits"]&&(k=n.parse(f["max-fraction-digits"],1,Ot),!k)?null:new sl(s,v,b,S,k)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}}class kl{constructor(t){this.type=Qs,this.sections=t}static parse(t,n){if(t.length<2)return n.error("Expected at least one argument.");const s=t[1];if(!Array.isArray(s)&&typeof s=="object")return n.error("First argument must be an image or text section.");const f=[];let v=!1;for(let b=1;b<=t.length-1;++b){const S=t[b];if(v&&typeof S=="object"&&!Array.isArray(S)){v=!1;let k=null;if(S["font-scale"]&&(k=n.parse(S["font-scale"],1,Ot),!k))return null;let R=null;if(S["text-font"]&&(R=n.parse(S["text-font"],1,li(Or)),!R))return null;let F=null;if(S["text-color"]&&(F=n.parse(S["text-color"],1,Vn),!F))return null;let j=null;if(S["vertical-align"]){if(typeof S["vertical-align"]=="string"&&!Eo.includes(S["vertical-align"]))return n.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${S["vertical-align"]}' instead.`);if(j=n.parse(S["vertical-align"],1,Or),!j)return null}const W=f[f.length-1];W.scale=k,W.font=R,W.textColor=F,W.verticalAlign=j}else{const k=n.parse(t[b],1,un);if(!k)return null;const R=k.type.kind;if(R!=="string"&&R!=="value"&&R!=="null"&&R!=="resolvedImage")return n.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,f.push({content:k,scale:null,font:null,textColor:null,verticalAlign:null})}}return new kl(f)}evaluate(t){return new ui(this.sections.map(n=>{const s=n.content.evaluate(t);return hi(s)===La?new Io("",s,null,null,null,n.verticalAlign?n.verticalAlign.evaluate(t):null):new Io(Lr(s),null,n.scale?n.scale.evaluate(t):null,n.font?n.font.evaluate(t).join(","):null,n.textColor?n.textColor.evaluate(t):null,n.verticalAlign?n.verticalAlign.evaluate(t):null)}))}eachChild(t){for(const n of this.sections)t(n.content),n.scale&&t(n.scale),n.font&&t(n.font),n.textColor&&t(n.textColor),n.verticalAlign&&t(n.verticalAlign)}outputDefined(){return!1}}class Al{constructor(t){this.type=La,this.input=t}static parse(t,n){if(t.length!==2)return n.error("Expected two arguments.");const s=n.parse(t[1],1,Or);return s?new Al(s):n.error("No image name provided.")}evaluate(t){const n=this.input.evaluate(t),s=ro.fromString(n);return s&&t.availableImages&&(s.available=t.availableImages.indexOf(n)>-1),s}eachChild(t){t(this.input)}outputDefined(){return!1}}class ja{constructor(t){this.type=Ot,this.input=t}static parse(t,n){if(t.length!==2)return n.error(`Expected 1 argument, but found ${t.length-1} instead.`);const s=n.parse(t[1],1);return s?s.type.kind!=="array"&&s.type.kind!=="string"&&s.type.kind!=="value"?n.error(`Expected argument of type string or array, but found ${qn(s.type)} instead.`):new ja(s):null}evaluate(t){const n=this.input.evaluate(t);if(typeof n=="string")return[...n].length;if(Array.isArray(n))return n.length;throw new On(`Expected value to be of type string or array, but found ${qn(hi(n))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}}const Ms=8192;function Gu(i,t){const n=(180+i[0])/360,s=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i[1]*Math.PI/360)))/360,f=Math.pow(2,t.z);return[Math.round(n*f*Ms),Math.round(s*f*Ms)]}function Wu(i,t){const n=Math.pow(2,t.z);return[(f=(i[0]/Ms+t.x)/n,360*f-180),(s=(i[1]/Ms+t.y)/n,360/Math.PI*Math.atan(Math.exp((180-360*s)*Math.PI/180))-90)];var s,f}function $(i,t){i[0]=Math.min(i[0],t[0]),i[1]=Math.min(i[1],t[1]),i[2]=Math.max(i[2],t[0]),i[3]=Math.max(i[3],t[1])}function q(i,t){return!(i[0]<=t[0]||i[2]>=t[2]||i[1]<=t[1]||i[3]>=t[3])}function ue(i,t,n){const s=i[0]-t[0],f=i[1]-t[1],v=i[0]-n[0],b=i[1]-n[1];return s*b-v*f==0&&s*v<=0&&f*b<=0}function Pe(i,t,n,s){return(f=[s[0]-n[0],s[1]-n[1]])[0]*(v=[t[0]-i[0],t[1]-i[1]])[1]-f[1]*v[0]!=0&&!(!pn(i,t,n,s)||!pn(n,s,i,t));var f,v}function _t(i,t,n){for(const s of n)for(let f=0;f<s.length-1;++f)if(Pe(i,t,s[f],s[f+1]))return!0;return!1}function ot(i,t,n=!1){let s=!1;for(const S of t)for(let k=0;k<S.length-1;k++){if(ue(i,S[k],S[k+1]))return n;(v=S[k])[1]>(f=i)[1]!=(b=S[k+1])[1]>f[1]&&f[0]<(b[0]-v[0])*(f[1]-v[1])/(b[1]-v[1])+v[0]&&(s=!s)}var f,v,b;return s}function Nt(i,t){for(const n of t)if(ot(i,n))return!0;return!1}function ar(i,t){for(const n of i)if(!ot(n,t))return!1;for(let n=0;n<i.length-1;++n)if(_t(i[n],i[n+1],t))return!1;return!0}function Br(i,t){for(const n of t)if(ar(i,n))return!0;return!1}function pn(i,t,n,s){const f=s[0]-n[0],v=s[1]-n[1],b=(i[0]-n[0])*v-f*(i[1]-n[1]),S=(t[0]-n[0])*v-f*(t[1]-n[1]);return b>0&&S<0||b<0&&S>0}function Xr(i,t,n){const s=[];for(let f=0;f<i.length;f++){const v=[];for(let b=0;b<i[f].length;b++){const S=Gu(i[f][b],n);$(t,S),v.push(S)}s.push(v)}return s}function fi(i,t,n){const s=[];for(let f=0;f<i.length;f++){const v=Xr(i[f],t,n);s.push(v)}return s}function Fo(i,t,n,s){if(i[0]<n[0]||i[0]>n[2]){const f=.5*s;let v=i[0]-n[0]>f?-s:n[0]-i[0]>f?s:0;v===0&&(v=i[0]-n[2]>f?-s:n[2]-i[0]>f?s:0),i[0]+=v}$(t,i)}function ks(i,t,n,s){const f=Math.pow(2,s.z)*Ms,v=[s.x*Ms,s.y*Ms],b=[];for(const S of i)for(const k of S){const R=[k.x+v[0],k.y+v[1]];Fo(R,t,n,f),b.push(R)}return b}function ds(i,t,n,s){const f=Math.pow(2,s.z)*Ms,v=[s.x*Ms,s.y*Ms],b=[];for(const k of i){const R=[];for(const F of k){const j=[F.x+v[0],F.y+v[1]];$(t,j),R.push(j)}b.push(R)}if(t[2]-t[0]<=f/2){(S=t)[0]=S[1]=1/0,S[2]=S[3]=-1/0;for(const k of b)for(const R of k)Fo(R,t,n,f)}var S;return b}class Js{constructor(t,n){this.type=rn,this.geojson=t,this.geometries=n}static parse(t,n){if(t.length!==2)return n.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Ln(t[1])){const s=t[1];if(s.type==="FeatureCollection"){const f=[];for(const v of s.features){const{type:b,coordinates:S}=v.geometry;b==="Polygon"&&f.push(S),b==="MultiPolygon"&&f.push(...S)}if(f.length)return new Js(s,{type:"MultiPolygon",coordinates:f})}else if(s.type==="Feature"){const f=s.geometry.type;if(f==="Polygon"||f==="MultiPolygon")return new Js(s,s.geometry)}else if(s.type==="Polygon"||s.type==="MultiPolygon")return new Js(s,s)}return n.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return function(n,s){const f=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],b=n.canonicalID();if(s.type==="Polygon"){const S=Xr(s.coordinates,v,b),k=ks(n.geometry(),f,v,b);if(!q(f,v))return!1;for(const R of k)if(!ot(R,S))return!1}if(s.type==="MultiPolygon"){const S=fi(s.coordinates,v,b),k=ks(n.geometry(),f,v,b);if(!q(f,v))return!1;for(const R of k)if(!Nt(R,S))return!1}return!0}(t,this.geometries);if(t.geometryType()==="LineString")return function(n,s){const f=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],b=n.canonicalID();if(s.type==="Polygon"){const S=Xr(s.coordinates,v,b),k=ds(n.geometry(),f,v,b);if(!q(f,v))return!1;for(const R of k)if(!ar(R,S))return!1}if(s.type==="MultiPolygon"){const S=fi(s.coordinates,v,b),k=ds(n.geometry(),f,v,b);if(!q(f,v))return!1;for(const R of k)if(!Br(R,S))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let zc=class{constructor(i=[],t=(n,s)=>n<s?-1:n>s?1:0){if(this.data=i,this.length=this.data.length,this.compare=t,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(i){this.data.push(i),this._up(this.length++)}pop(){if(this.length===0)return;const i=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),i}peek(){return this.data[0]}_up(i){const{data:t,compare:n}=this,s=t[i];for(;i>0;){const f=i-1>>1,v=t[f];if(n(s,v)>=0)break;t[i]=v,i=f}t[i]=s}_down(i){const{data:t,compare:n}=this,s=this.length>>1,f=t[i];for(;i<s;){let v=1+(i<<1);const b=v+1;if(b<this.length&&n(t[b],t[v])<0&&(v=b),n(t[v],f)>=0)break;t[i]=t[v],i=v}t[i]=f}};function al(i,t,n=0,s=i.length-1,f=uf){for(;s>n;){if(s-n>600){const k=s-n+1,R=t-n+1,F=Math.log(k),j=.5*Math.exp(2*F/3),W=.5*Math.sqrt(F*j*(k-j)/k)*(R-k/2<0?-1:1);al(i,t,Math.max(n,Math.floor(t-R*j/k+W)),Math.min(s,Math.floor(t+(k-R)*j/k+W)),f)}const v=i[t];let b=n,S=s;for(ll(i,n,t),f(i[s],v)>0&&ll(i,n,s);b<S;){for(ll(i,b,S),b++,S--;f(i[b],v)<0;)b++;for(;f(i[S],v)>0;)S--}f(i[n],v)===0?ll(i,n,S):(S++,ll(i,S,s)),S<=t&&(n=S+1),t<=S&&(s=S-1)}}function ll(i,t,n){const s=i[t];i[t]=i[n],i[n]=s}function uf(i,t){return i<t?-1:i>t?1:0}function $h(i,t){if(i.length<=1)return[i];const n=[];let s,f;for(const v of i){const b=Id(v);b!==0&&(v.area=Math.abs(b),f===void 0&&(f=b<0),f===b<0?(s&&n.push(s),s=[v]):s.push(v))}if(s&&n.push(s),t>1)for(let v=0;v<n.length;v++)n[v].length<=t||(al(n[v],t,1,n[v].length-1,jh),n[v]=n[v].slice(0,t));return n}function jh(i,t){return t.area-i.area}function Id(i){let t=0;for(let n,s,f=0,v=i.length,b=v-1;f<v;b=f++)n=i[f],s=i[b],t+=(s.x-n.x)*(n.y+s.y);return t}const ea=1/298.257223563,Jl=ea*(2-ea),cf=Math.PI/180;class Lc{constructor(t){const n=6378.137*cf*1e3,s=Math.cos(t*cf),f=1/(1-Jl*(1-s*s)),v=Math.sqrt(f);this.kx=n*v*s,this.ky=n*v*f*(1-Jl)}distance(t,n){const s=this.wrap(t[0]-n[0])*this.kx,f=(t[1]-n[1])*this.ky;return Math.sqrt(s*s+f*f)}pointOnLine(t,n){let s,f,v,b,S=1/0;for(let k=0;k<t.length-1;k++){let R=t[k][0],F=t[k][1],j=this.wrap(t[k+1][0]-R)*this.kx,W=(t[k+1][1]-F)*this.ky,K=0;j===0&&W===0||(K=(this.wrap(n[0]-R)*this.kx*j+(n[1]-F)*this.ky*W)/(j*j+W*W),K>1?(R=t[k+1][0],F=t[k+1][1]):K>0&&(R+=j/this.kx*K,F+=W/this.ky*K)),j=this.wrap(n[0]-R)*this.kx,W=(n[1]-F)*this.ky;const ee=j*j+W*W;ee<S&&(S=ee,s=R,f=F,v=k,b=K)}return{point:[s,f],index:v,t:Math.max(0,Math.min(1,b))}}wrap(t){for(;t<-180;)t+=360;for(;t>180;)t-=360;return t}}function hf(i,t){return t[0]-i[0]}function Tn(i){return i[1]-i[0]+1}function io(i,t){return i[1]>=i[0]&&i[1]<t}function Dc(i,t){if(i[0]>i[1])return[null,null];const n=Tn(i);if(t){if(n===2)return[i,null];const f=Math.floor(n/2);return[[i[0],i[0]+f],[i[0]+f,i[1]]]}if(n===1)return[i,null];const s=Math.floor(n/2)-1;return[[i[0],i[0]+s],[i[0]+s+1,i[1]]]}function Uh(i,t){if(!io(t,i.length))return[1/0,1/0,-1/0,-1/0];const n=[1/0,1/0,-1/0,-1/0];for(let s=t[0];s<=t[1];++s)$(n,i[s]);return n}function Vh(i){const t=[1/0,1/0,-1/0,-1/0];for(const n of i)for(const s of n)$(t,s);return t}function Md(i){return i[0]!==-1/0&&i[1]!==-1/0&&i[2]!==1/0&&i[3]!==1/0}function kd(i,t,n){if(!Md(i)||!Md(t))return NaN;let s=0,f=0;return i[2]<t[0]&&(s=t[0]-i[2]),i[0]>t[2]&&(s=i[0]-t[2]),i[1]>t[3]&&(f=i[1]-t[3]),i[3]<t[1]&&(f=t[1]-i[3]),n.distance([0,0],[s,f])}function Hu(i,t,n){const s=n.pointOnLine(t,i);return n.distance(i,s.point)}function vu(i,t,n,s,f){const v=Math.min(Hu(i,[n,s],f),Hu(t,[n,s],f)),b=Math.min(Hu(n,[i,t],f),Hu(s,[i,t],f));return Math.min(v,b)}function tt(i,t,n,s,f){if(!io(t,i.length)||!io(s,n.length))return 1/0;let v=1/0;for(let b=t[0];b<t[1];++b){const S=i[b],k=i[b+1];for(let R=s[0];R<s[1];++R){const F=n[R],j=n[R+1];if(Pe(S,k,F,j))return 0;v=Math.min(v,vu(S,k,F,j,f))}}return v}function Bt(i,t,n,s,f){if(!io(t,i.length)||!io(s,n.length))return NaN;let v=1/0;for(let b=t[0];b<=t[1];++b)for(let S=s[0];S<=s[1];++S)if(v=Math.min(v,f.distance(i[b],n[S])),v===0)return v;return v}function wt(i,t,n){if(ot(i,t,!0))return 0;let s=1/0;for(const f of t){const v=f[0],b=f[f.length-1];if(v!==b&&(s=Math.min(s,Hu(i,[b,v],n)),s===0))return s;const S=n.pointOnLine(f,i);if(s=Math.min(s,n.distance(i,S.point)),s===0)return s}return s}function Ir(i,t,n,s){if(!io(t,i.length))return NaN;for(let v=t[0];v<=t[1];++v)if(ot(i[v],n,!0))return 0;let f=1/0;for(let v=t[0];v<t[1];++v){const b=i[v],S=i[v+1];for(const k of n)for(let R=0,F=k.length,j=F-1;R<F;j=R++){const W=k[j],K=k[R];if(Pe(b,S,W,K))return 0;f=Math.min(f,vu(b,S,W,K,s))}}return f}function mn(i,t){for(const n of i)for(const s of n)if(ot(s,t,!0))return!0;return!1}function Xn(i,t,n,s=1/0){const f=Vh(i),v=Vh(t);if(s!==1/0&&kd(f,v,n)>=s)return s;if(q(f,v)){if(mn(i,t))return 0}else if(mn(t,i))return 0;let b=1/0;for(const S of i)for(let k=0,R=S.length,F=R-1;k<R;F=k++){const j=S[F],W=S[k];for(const K of t)for(let ee=0,ie=K.length,me=ie-1;ee<ie;me=ee++){const Ce=K[me],Ve=K[ee];if(Pe(j,W,Ce,Ve))return 0;b=Math.min(b,vu(j,W,Ce,Ve,n))}}return b}function oo(i,t,n,s,f,v){if(!v)return;const b=kd(Uh(s,v),f,n);b<t&&i.push([b,v,[0,0]])}function ti(i,t,n,s,f,v,b){if(!v||!b)return;const S=kd(Uh(s,v),Uh(f,b),n);S<t&&i.push([S,v,b])}function xu(i,t,n,s,f=1/0){let v=Math.min(s.distance(i[0],n[0][0]),f);if(v===0)return v;const b=new zc([[0,[0,i.length-1],[0,0]]],hf),S=Vh(n);for(;b.length>0;){const k=b.pop();if(k[0]>=v)continue;const R=k[1],F=t?50:100;if(Tn(R)<=F){if(!io(R,i.length))return NaN;if(t){const j=Ir(i,R,n,s);if(isNaN(j)||j===0)return j;v=Math.min(v,j)}else for(let j=R[0];j<=R[1];++j){const W=wt(i[j],n,s);if(v=Math.min(v,W),v===0)return 0}}else{const j=Dc(R,t);oo(b,v,s,i,S,j[0]),oo(b,v,s,i,S,j[1])}}return v}function Zh(i,t,n,s,f,v=1/0){let b=Math.min(v,f.distance(i[0],n[0]));if(b===0)return b;const S=new zc([[0,[0,i.length-1],[0,n.length-1]]],hf);for(;S.length>0;){const k=S.pop();if(k[0]>=b)continue;const R=k[1],F=k[2],j=t?50:100,W=s?50:100;if(Tn(R)<=j&&Tn(F)<=W){if(!io(R,i.length)&&io(F,n.length))return NaN;let K;if(t&&s)K=tt(i,R,n,F,f),b=Math.min(b,K);else if(t&&!s){const ee=i.slice(R[0],R[1]+1);for(let ie=F[0];ie<=F[1];++ie)if(K=Hu(n[ie],ee,f),b=Math.min(b,K),b===0)return b}else if(!t&&s){const ee=n.slice(F[0],F[1]+1);for(let ie=R[0];ie<=R[1];++ie)if(K=Hu(i[ie],ee,f),b=Math.min(b,K),b===0)return b}else K=Bt(i,R,n,F,f),b=Math.min(b,K)}else{const K=Dc(R,t),ee=Dc(F,s);ti(S,b,f,i,n,K[0],ee[0]),ti(S,b,f,i,n,K[0],ee[1]),ti(S,b,f,i,n,K[1],ee[0]),ti(S,b,f,i,n,K[1],ee[1])}}return b}function ta(i){return i.type==="MultiPolygon"?i.coordinates.map(t=>({type:"Polygon",coordinates:t})):i.type==="MultiLineString"?i.coordinates.map(t=>({type:"LineString",coordinates:t})):i.type==="MultiPoint"?i.coordinates.map(t=>({type:"Point",coordinates:t})):[i]}class As{constructor(t,n){this.type=Ot,this.geojson=t,this.geometries=n}static parse(t,n){if(t.length!==2)return n.error(`'distance' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Ln(t[1])){const s=t[1];if(s.type==="FeatureCollection")return new As(s,s.features.map(f=>ta(f.geometry)).flat());if(s.type==="Feature")return new As(s,ta(s.geometry));if("type"in s&&"coordinates"in s)return new As(s,ta(s))}return n.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return function(n,s){const f=n.geometry(),v=f.flat().map(k=>Wu([k.x,k.y],n.canonical));if(f.length===0)return NaN;const b=new Lc(v[0][1]);let S=1/0;for(const k of s){switch(k.type){case"Point":S=Math.min(S,Zh(v,!1,[k.coordinates],!1,b,S));break;case"LineString":S=Math.min(S,Zh(v,!1,k.coordinates,!0,b,S));break;case"Polygon":S=Math.min(S,xu(v,!1,k.coordinates,b,S))}if(S===0)return S}return S}(t,this.geometries);if(t.geometryType()==="LineString")return function(n,s){const f=n.geometry(),v=f.flat().map(k=>Wu([k.x,k.y],n.canonical));if(f.length===0)return NaN;const b=new Lc(v[0][1]);let S=1/0;for(const k of s){switch(k.type){case"Point":S=Math.min(S,Zh(v,!0,[k.coordinates],!1,b,S));break;case"LineString":S=Math.min(S,Zh(v,!0,k.coordinates,!0,b,S));break;case"Polygon":S=Math.min(S,xu(v,!0,k.coordinates,b,S))}if(S===0)return S}return S}(t,this.geometries);if(t.geometryType()==="Polygon")return function(n,s){const f=n.geometry();if(f.length===0||f[0].length===0)return NaN;const v=$h(f,0).map(k=>k.map(R=>R.map(F=>Wu([F.x,F.y],n.canonical)))),b=new Lc(v[0][0][0][1]);let S=1/0;for(const k of s)for(const R of v){switch(k.type){case"Point":S=Math.min(S,xu([k.coordinates],!1,R,b,S));break;case"LineString":S=Math.min(S,xu(k.coordinates,!0,R,b,S));break;case"Polygon":S=Math.min(S,Xn(R,k.coordinates,b,S))}if(S===0)return S}return S}(t,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class Oc{constructor(t){this.type=un,this.key=t}static parse(t,n){if(t.length!==2)return n.error(`Expected 1 argument, but found ${t.length-1} instead.`);const s=t[1];return s==null?n.error("Global state property must be defined."):typeof s!="string"?n.error(`Global state property must be string, but found ${typeof t[1]} instead.`):new Oc(s)}evaluate(t){var n;const s=(n=t.globals)===null||n===void 0?void 0:n.globalState;return s&&Object.keys(s).length!==0?Dt(s,this.key):null}eachChild(){}outputDefined(){return!1}}const Rs={"==":Kn,"!=":$a,">":Bh,"<":Zu,">=":Nh,"<=":yu,array:Kr,at:di,boolean:Kr,case:_i,coalesce:Na,collator:_u,format:kl,image:Al,in:nl,"index-of":cs,interpolate:Bi,"interpolate-hcl":Bi,"interpolate-lab":Bi,length:ja,let:_a,literal:gr,match:il,number:Kr,"number-format":sl,object:Kr,slice:Fi,step:Ai,string:Kr,"to-boolean":no,"to-color":no,"to-number":no,"to-string":no,var:Ql,within:Js,distance:As,"global-state":Oc};class Go{constructor(t,n,s,f){this.name=t,this.type=n,this._evaluate=s,this.args=f}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}static parse(t,n){const s=t[0],f=Go.definitions[s];if(!f)return n.error(`Unknown expression "${s}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(f)?f[0]:f.type,b=Array.isArray(f)?[[f[1],f[2]]]:f.overloads,S=b.filter(([R])=>!Array.isArray(R)||R.length===t.length-1);let k=null;for(const[R,F]of S){k=new Fa(n.registry,wu,n.path,null,n.scope);const j=[];let W=!1;for(let K=1;K<t.length;K++){const ee=t[K],ie=Array.isArray(R)?R[K-1]:R.type,me=k.parse(ee,1+j.length,ie);if(!me){W=!0;break}j.push(me)}if(!W)if(Array.isArray(R)&&R.length!==j.length)k.error(`Expected ${R.length} arguments, but found ${j.length} instead.`);else{for(let K=0;K<j.length;K++){const ee=Array.isArray(R)?R[K]:R.type,ie=j[K];k.concat(K+1).checkSubtype(ee,ie.type)}if(k.errors.length===0)return new Go(s,v,F,j)}}if(S.length===1)n.errors.push(...k.errors);else{const R=(S.length?S:b).map(([j])=>{return W=j,Array.isArray(W)?`(${W.map(qn).join(", ")})`:`(${qn(W.type)}...)`;var W}).join(" | "),F=[];for(let j=1;j<t.length;j++){const W=n.parse(t[j],1+F.length);if(!W)return null;F.push(qn(W.type))}n.error(`Expected arguments of type ${R}, but found (${F.join(", ")}) instead.`)}return null}static register(t,n){Go.definitions=n;for(const s in n)t[s]=Go}}function Fc(i,[t,n,s,f]){t=t.evaluate(i),n=n.evaluate(i),s=s.evaluate(i);const v=f?f.evaluate(i):1,b=ls(t,n,s,v);if(b)throw new On(b);return new Jr(t/255,n/255,s/255,v,!1)}function Gn(i,t){return i in t}function bu(i,t){const n=t[i];return n===void 0?null:n}function Rl(i){return{type:i}}function wu(i){if(i instanceof Ql)return wu(i.boundExpression);if(i instanceof Go&&i.name==="error"||i instanceof _u||i instanceof Js||i instanceof As||i instanceof Oc)return!1;const t=i instanceof no||i instanceof Kr;let n=!0;return i.eachChild(s=>{n=t?n&&wu(s):n&&s instanceof gr}),!!n&&qu(i)&&dh(i,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function qu(i){if(i instanceof Go&&(i.name==="get"&&i.args.length===1||i.name==="feature-state"||i.name==="has"&&i.args.length===1||i.name==="properties"||i.name==="geometry-type"||i.name==="id"||/^filter-/.test(i.name))||i instanceof Js||i instanceof As)return!1;let t=!0;return i.eachChild(n=>{t&&!qu(n)&&(t=!1)}),t}function Bc(i){if(i instanceof Go&&i.name==="feature-state")return!1;let t=!0;return i.eachChild(n=>{t&&!Bc(n)&&(t=!1)}),t}function dh(i,t){if(i instanceof Go&&t.indexOf(i.name)>=0)return!1;let n=!0;return i.eachChild(s=>{n&&!dh(s,t)&&(n=!1)}),n}function Su(i){return{result:"success",value:i}}function ra(i){return{result:"error",value:i}}function zl(i){return i["property-type"]==="data-driven"||i["property-type"]==="cross-faded-data-driven"}function Gh(i){return!!i.expression&&i.expression.parameters.indexOf("zoom")>-1}function na(i){return!!i.expression&&i.expression.interpolated}function xn(i){return i instanceof Number?"number":i instanceof String?"string":i instanceof Boolean?"boolean":Array.isArray(i)?"array":i===null?"null":typeof i}function Ku(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)&&hi(i)===Po}function Xu(i){return i}function Wh(i,t){const n=i.stops&&typeof i.stops[0][0]=="object",s=n||!(n||i.property!==void 0),f=i.type||(na(t)?"exponential":"interval"),v=function(F){switch(F.type){case"color":return Jr.parse;case"padding":return ci.parse;case"numberArray":return Dn.parse;case"colorArray":return Pi.parse;default:return null}}(t);if(v&&((i=wn({},i)).stops&&(i.stops=i.stops.map(F=>[F[0],v(F[1])])),i.default=v(i.default?i.default:t.default)),i.colorSpace&&(b=i.colorSpace)!=="rgb"&&b!=="hcl"&&b!=="lab")throw new Error(`Unknown color space: "${i.colorSpace}"`);var b;const S=function(F){switch(F){case"exponential":return Ad;case"interval":return fh;case"categorical":return Yu;case"identity":return zi;default:throw new Error(`Unknown function type "${F}"`)}}(f);let k,R;if(f==="categorical"){k=Object.create(null);for(const F of i.stops)k[F[0]]=F[1];R=typeof i.stops[0][0]}if(n){const F={},j=[];for(let ee=0;ee<i.stops.length;ee++){const ie=i.stops[ee],me=ie[0].zoom;F[me]===void 0&&(F[me]={zoom:me,type:i.type,property:i.property,default:i.default,stops:[]},j.push(me)),F[me].stops.push([ie[0].value,ie[1]])}const W=[];for(const ee of j)W.push([F[ee].zoom,Wh(F[ee],t)]);const K={name:"linear"};return{kind:"composite",interpolationType:K,interpolationFactor:Bi.interpolationFactor.bind(void 0,K),zoomStops:W.map(ee=>ee[0]),evaluate:({zoom:ee},ie)=>Ad({stops:W,base:i.base},t,ee).evaluate(ee,ie)}}if(s){const F=f==="exponential"?{name:"exponential",base:i.base!==void 0?i.base:1}:null;return{kind:"camera",interpolationType:F,interpolationFactor:Bi.interpolationFactor.bind(void 0,F),zoomStops:i.stops.map(j=>j[0]),evaluate:({zoom:j})=>S(i,t,j,k,R)}}return{kind:"source",evaluate(F,j){const W=j&&j.properties?j.properties[i.property]:void 0;return W===void 0?xa(i.default,t.default):S(i,t,W,k,R)}}}function xa(i,t,n){return i!==void 0?i:t!==void 0?t:n!==void 0?n:void 0}function Yu(i,t,n,s,f){return xa(typeof n===f?s[n]:void 0,i.default,t.default)}function fh(i,t,n){if(xn(n)!=="number")return xa(i.default,t.default);const s=i.stops.length;if(s===1||n<=i.stops[0][0])return i.stops[0][1];if(n>=i.stops[s-1][0])return i.stops[s-1][1];const f=Ba(i.stops.map(v=>v[0]),n);return i.stops[f][1]}function Ad(i,t,n){const s=i.base!==void 0?i.base:1;if(xn(n)!=="number")return xa(i.default,t.default);const f=i.stops.length;if(f===1||n<=i.stops[0][0])return i.stops[0][1];if(n>=i.stops[f-1][0])return i.stops[f-1][1];const v=Ba(i.stops.map(F=>F[0]),n),b=function(F,j,W,K){const ee=K-W,ie=F-W;return ee===0?0:j===1?ie/ee:(Math.pow(j,ie)-1)/(Math.pow(j,ee)-1)}(n,s,i.stops[v][0],i.stops[v+1][0]),S=i.stops[v][1],k=i.stops[v+1][1],R=hs[t.type]||Xu;return typeof S.evaluate=="function"?{evaluate(...F){const j=S.evaluate.apply(void 0,F),W=k.evaluate.apply(void 0,F);if(j!==void 0&&W!==void 0)return R(j,W,b,i.colorSpace)}}:R(S,k,b,i.colorSpace)}function zi(i,t,n){switch(t.type){case"color":n=Jr.parse(n);break;case"formatted":n=ui.fromString(n.toString());break;case"resolvedImage":n=ro.fromString(n.toString());break;case"padding":n=ci.parse(n);break;case"colorArray":n=Pi.parse(n);break;case"numberArray":n=Dn.parse(n);break;default:xn(n)===t.type||t.type==="enum"&&t.values[n]||(n=void 0)}return xa(n,i.default,t.default)}Go.register(Rs,{error:[{kind:"error"},[Or],(i,[t])=>{throw new On(t.evaluate(i))}],typeof:[Or,[un],(i,[t])=>qn(hi(t.evaluate(i)))],"to-rgba":[li(Ot,4),[Vn],(i,[t])=>{const[n,s,f,v]=t.evaluate(i).rgb;return[255*n,255*s,255*f,v]}],rgb:[Vn,[Ot,Ot,Ot],Fc],rgba:[Vn,[Ot,Ot,Ot,Ot],Fc],has:{type:rn,overloads:[[[Or],(i,[t])=>Gn(t.evaluate(i),i.properties())],[[Or,Po],(i,[t,n])=>Gn(t.evaluate(i),n.evaluate(i))]]},get:{type:un,overloads:[[[Or],(i,[t])=>bu(t.evaluate(i),i.properties())],[[Or,Po],(i,[t,n])=>bu(t.evaluate(i),n.evaluate(i))]]},"feature-state":[un,[Or],(i,[t])=>bu(t.evaluate(i),i.featureState||{})],properties:[Po,[],i=>i.properties()],"geometry-type":[Or,[],i=>i.geometryType()],id:[un,[],i=>i.id()],zoom:[Ot,[],i=>i.globals.zoom],"heatmap-density":[Ot,[],i=>i.globals.heatmapDensity||0],"line-progress":[Ot,[],i=>i.globals.lineProgress||0],accumulated:[un,[],i=>i.globals.accumulated===void 0?null:i.globals.accumulated],"+":[Ot,Rl(Ot),(i,t)=>{let n=0;for(const s of t)n+=s.evaluate(i);return n}],"*":[Ot,Rl(Ot),(i,t)=>{let n=1;for(const s of t)n*=s.evaluate(i);return n}],"-":{type:Ot,overloads:[[[Ot,Ot],(i,[t,n])=>t.evaluate(i)-n.evaluate(i)],[[Ot],(i,[t])=>-t.evaluate(i)]]},"/":[Ot,[Ot,Ot],(i,[t,n])=>t.evaluate(i)/n.evaluate(i)],"%":[Ot,[Ot,Ot],(i,[t,n])=>t.evaluate(i)%n.evaluate(i)],ln2:[Ot,[],()=>Math.LN2],pi:[Ot,[],()=>Math.PI],e:[Ot,[],()=>Math.E],"^":[Ot,[Ot,Ot],(i,[t,n])=>Math.pow(t.evaluate(i),n.evaluate(i))],sqrt:[Ot,[Ot],(i,[t])=>Math.sqrt(t.evaluate(i))],log10:[Ot,[Ot],(i,[t])=>Math.log(t.evaluate(i))/Math.LN10],ln:[Ot,[Ot],(i,[t])=>Math.log(t.evaluate(i))],log2:[Ot,[Ot],(i,[t])=>Math.log(t.evaluate(i))/Math.LN2],sin:[Ot,[Ot],(i,[t])=>Math.sin(t.evaluate(i))],cos:[Ot,[Ot],(i,[t])=>Math.cos(t.evaluate(i))],tan:[Ot,[Ot],(i,[t])=>Math.tan(t.evaluate(i))],asin:[Ot,[Ot],(i,[t])=>Math.asin(t.evaluate(i))],acos:[Ot,[Ot],(i,[t])=>Math.acos(t.evaluate(i))],atan:[Ot,[Ot],(i,[t])=>Math.atan(t.evaluate(i))],min:[Ot,Rl(Ot),(i,t)=>Math.min(...t.map(n=>n.evaluate(i)))],max:[Ot,Rl(Ot),(i,t)=>Math.max(...t.map(n=>n.evaluate(i)))],abs:[Ot,[Ot],(i,[t])=>Math.abs(t.evaluate(i))],round:[Ot,[Ot],(i,[t])=>{const n=t.evaluate(i);return n<0?-Math.round(-n):Math.round(n)}],floor:[Ot,[Ot],(i,[t])=>Math.floor(t.evaluate(i))],ceil:[Ot,[Ot],(i,[t])=>Math.ceil(t.evaluate(i))],"filter-==":[rn,[Or,un],(i,[t,n])=>i.properties()[t.value]===n.value],"filter-id-==":[rn,[un],(i,[t])=>i.id()===t.value],"filter-type-==":[rn,[Or],(i,[t])=>i.geometryType()===t.value],"filter-<":[rn,[Or,un],(i,[t,n])=>{const s=i.properties()[t.value],f=n.value;return typeof s==typeof f&&s<f}],"filter-id-<":[rn,[un],(i,[t])=>{const n=i.id(),s=t.value;return typeof n==typeof s&&n<s}],"filter->":[rn,[Or,un],(i,[t,n])=>{const s=i.properties()[t.value],f=n.value;return typeof s==typeof f&&s>f}],"filter-id->":[rn,[un],(i,[t])=>{const n=i.id(),s=t.value;return typeof n==typeof s&&n>s}],"filter-<=":[rn,[Or,un],(i,[t,n])=>{const s=i.properties()[t.value],f=n.value;return typeof s==typeof f&&s<=f}],"filter-id-<=":[rn,[un],(i,[t])=>{const n=i.id(),s=t.value;return typeof n==typeof s&&n<=s}],"filter->=":[rn,[Or,un],(i,[t,n])=>{const s=i.properties()[t.value],f=n.value;return typeof s==typeof f&&s>=f}],"filter-id->=":[rn,[un],(i,[t])=>{const n=i.id(),s=t.value;return typeof n==typeof s&&n>=s}],"filter-has":[rn,[un],(i,[t])=>t.value in i.properties()],"filter-has-id":[rn,[],i=>i.id()!==null&&i.id()!==void 0],"filter-type-in":[rn,[li(Or)],(i,[t])=>t.value.indexOf(i.geometryType())>=0],"filter-id-in":[rn,[li(un)],(i,[t])=>t.value.indexOf(i.id())>=0],"filter-in-small":[rn,[Or,li(un)],(i,[t,n])=>n.value.indexOf(i.properties()[t.value])>=0],"filter-in-large":[rn,[Or,li(un)],(i,[t,n])=>function(s,f,v,b){for(;v<=b;){const S=v+b>>1;if(f[S]===s)return!0;f[S]>s?b=S-1:v=S+1}return!1}(i.properties()[t.value],n.value,0,n.value.length-1)],all:{type:rn,overloads:[[[rn,rn],(i,[t,n])=>t.evaluate(i)&&n.evaluate(i)],[Rl(rn),(i,t)=>{for(const n of t)if(!n.evaluate(i))return!1;return!0}]]},any:{type:rn,overloads:[[[rn,rn],(i,[t,n])=>t.evaluate(i)||n.evaluate(i)],[Rl(rn),(i,t)=>{for(const n of t)if(n.evaluate(i))return!0;return!1}]]},"!":[rn,[rn],(i,[t])=>!t.evaluate(i)],"is-supported-script":[rn,[Or],(i,[t])=>{const n=i.globals&&i.globals.isSupportedScript;return!n||n(t.evaluate(i))}],upcase:[Or,[Or],(i,[t])=>t.evaluate(i).toUpperCase()],downcase:[Or,[Or],(i,[t])=>t.evaluate(i).toLowerCase()],concat:[Or,Rl(un),(i,t)=>t.map(n=>Lr(n.evaluate(i))).join("")],"resolved-locale":[Or,[Ys],(i,[t])=>t.evaluate(i).resolvedLocale()]});class Nc{constructor(t,n){this.expression=t,this._warningHistory={},this._evaluator=new gu,this._defaultValue=n?function(s){if(s.type==="color"&&Ku(s.default))return new Jr(0,0,0,0);switch(s.type){case"color":return Jr.parse(s.default)||null;case"padding":return ci.parse(s.default)||null;case"numberArray":return Dn.parse(s.default)||null;case"colorArray":return Pi.parse(s.default)||null;case"variableAnchorOffsetCollection":return Oo.parse(s.default)||null;case"projectionDefinition":return as.parse(s.default)||null;default:return s.default===void 0?null:s.default}}(n):null,this._enumValues=n&&n.type==="enum"?n.values:null}evaluateWithoutErrorHandling(t,n,s,f,v,b){return this._evaluator.globals=t,this._evaluator.feature=n,this._evaluator.featureState=s,this._evaluator.canonical=f,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=b,this.expression.evaluate(this._evaluator)}evaluate(t,n,s,f,v,b){this._evaluator.globals=t,this._evaluator.feature=n||null,this._evaluator.featureState=s||null,this._evaluator.canonical=f,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=b||null;try{const S=this.expression.evaluate(this._evaluator);if(S==null||typeof S=="number"&&S!=S)return this._defaultValue;if(this._enumValues&&!(S in this._enumValues))throw new On(`Expected value to be one of ${Object.keys(this._enumValues).map(k=>JSON.stringify(k)).join(", ")}, but found ${JSON.stringify(S)} instead.`);return S}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}}}function ul(i){return Array.isArray(i)&&i.length>0&&typeof i[0]=="string"&&i[0]in Rs}function cl(i,t){const n=new Fa(Rs,wu,[],t?function(f){const v={color:Vn,string:Or,number:Ot,enum:Or,boolean:rn,formatted:Qs,padding:Ps,numberArray:Zo,colorArray:el,projectionDefinition:Zn,resolvedImage:La,variableAnchorOffsetCollection:cn};return f.type==="array"?li(v[f.value]||un,f.length):v[f.type]}(t):void 0),s=n.parse(i,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return s?Su(new Nc(s,t)):ra(n.errors)}class $c{constructor(t,n){this.kind=t,this._styleExpression=n,this.isStateDependent=t!=="constant"&&!Bc(n.expression)}evaluateWithoutErrorHandling(t,n,s,f,v,b){return this._styleExpression.evaluateWithoutErrorHandling(t,n,s,f,v,b)}evaluate(t,n,s,f,v,b){return this._styleExpression.evaluate(t,n,s,f,v,b)}}class jc{constructor(t,n,s,f){this.kind=t,this.zoomStops=s,this._styleExpression=n,this.isStateDependent=t!=="camera"&&!Bc(n.expression),this.interpolationType=f}evaluateWithoutErrorHandling(t,n,s,f,v,b){return this._styleExpression.evaluateWithoutErrorHandling(t,n,s,f,v,b)}evaluate(t,n,s,f,v,b){return this._styleExpression.evaluate(t,n,s,f,v,b)}interpolationFactor(t,n,s){return this.interpolationType?Bi.interpolationFactor(this.interpolationType,t,n,s):0}}function Tu(i,t){const n=cl(i,t);if(n.result==="error")return n;const s=n.value.expression,f=qu(s);if(!f&&!zl(t))return ra([new yn("","data expressions not supported")]);const v=dh(s,["zoom"]);if(!v&&!Gh(t))return ra([new yn("","zoom expressions not supported")]);const b=Ll(s);return b||v?b instanceof yn?ra([b]):b instanceof Bi&&!na(t)?ra([new yn("",'"interpolate" expressions cannot be used with this property')]):Su(b?new jc(f?"camera":"composite",n.value,b.labels,b instanceof Bi?b.interpolation:void 0):new $c(f?"constant":"source",n.value)):ra([new yn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Cu{constructor(t,n){this._parameters=t,this._specification=n,wn(this,Wh(this._parameters,this._specification))}static deserialize(t){return new Cu(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function Ll(i){let t=null;if(i instanceof _a)t=Ll(i.result);else if(i instanceof Na){for(const n of i.args)if(t=Ll(n),t)break}else(i instanceof Ai||i instanceof Bi)&&i.input instanceof Go&&i.input.name==="zoom"&&(t=i);return t instanceof yn||i.eachChild(n=>{const s=Ll(n);s instanceof yn?t=s:!t&&s?t=new yn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&s&&t!==s&&(t=new yn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}function Ni(i){if(i===!0||i===!1)return!0;if(!Array.isArray(i)||i.length===0)return!1;switch(i[0]){case"has":return i.length>=2&&i[1]!=="$id"&&i[1]!=="$type";case"in":return i.length>=3&&(typeof i[1]!="string"||Array.isArray(i[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return i.length!==3||Array.isArray(i[1])||Array.isArray(i[2]);case"any":case"all":for(const t of i.slice(1))if(!Ni(t)&&typeof t!="boolean")return!1;return!0;default:return!0}}const Bo={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ph(i){if(i==null)return{filter:()=>!0,needGeometry:!1};Ni(i)||(i=Qu(i));const t=cl(i,Bo);if(t.result==="error")throw new Error(t.value.map(n=>`${n.key}: ${n.message}`).join(", "));return{filter:(n,s,f)=>t.value.evaluate(n,s,{},f),needGeometry:Uc(i)}}function mh(i,t){return i<t?-1:i>t?1:0}function Uc(i){if(!Array.isArray(i))return!1;if(i[0]==="within"||i[0]==="distance")return!0;for(let t=1;t<i.length;t++)if(Uc(i[t]))return!0;return!1}function Qu(i){if(!i)return!0;const t=i[0];return i.length<=1?t!=="any":t==="=="?Ju(i[1],i[2],"=="):t==="!="?hl(Ju(i[1],i[2],"==")):t==="<"||t===">"||t==="<="||t===">="?Ju(i[1],i[2],t):t==="any"?(n=i.slice(1),["any"].concat(n.map(Qu))):t==="all"?["all"].concat(i.slice(1).map(Qu)):t==="none"?["all"].concat(i.slice(1).map(Qu).map(hl)):t==="in"?Pu(i[1],i.slice(2)):t==="!in"?hl(Pu(i[1],i.slice(2))):t==="has"?Vc(i[1]):t!=="!has"||hl(Vc(i[1]));var n}function Ju(i,t,n){switch(i){case"$type":return[`filter-type-${n}`,t];case"$id":return[`filter-id-${n}`,t];default:return[`filter-${n}`,i,t]}}function Pu(i,t){if(t.length===0)return!1;switch(i){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(n=>typeof n!=typeof t[0])?["filter-in-large",i,["literal",t.sort(mh)]]:["filter-in-small",i,["literal",t]]}}function Vc(i){switch(i){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",i]}}function hl(i){return["!",i]}function Eu(i){const t=typeof i;if(t==="number"||t==="boolean"||t==="string"||i==null)return JSON.stringify(i);if(Array.isArray(i)){let f="[";for(const v of i)f+=`${Eu(v)},`;return`${f}]`}const n=Object.keys(i).sort();let s="{";for(let f=0;f<n.length;f++)s+=`${JSON.stringify(n[f])}:${Eu(i[n[f]])},`;return`${s}}`}function ec(i){let t="";for(const n of qe)t+=`/${Eu(i[n])}`;return t}function Iu(i){const t=i.value;return t?[new St(i.key,t,"constants have been deprecated as of v8")]:[]}function Ti(i){return i instanceof Number||i instanceof String||i instanceof Boolean?i.valueOf():i}function Dl(i){if(Array.isArray(i))return i.map(Dl);if(i instanceof Object&&!(i instanceof Number||i instanceof String||i instanceof Boolean)){const t={};for(const n in i)t[n]=Dl(i[n]);return t}return Ti(i)}function _o(i){const t=i.key,n=i.value,s=i.valueSpec||{},f=i.objectElementValidators||{},v=i.style,b=i.styleSpec,S=i.validateSpec;let k=[];const R=xn(n);if(R!=="object")return[new St(t,n,`object expected, ${R} found`)];for(const F in n){const j=F.split(".")[0],W=Dt(s,j)||s["*"];let K;if(Dt(f,j))K=f[j];else if(Dt(s,j))K=S;else if(f["*"])K=f["*"];else{if(!s["*"]){k.push(new St(t,n[F],`unknown property "${F}"`));continue}K=S}k=k.concat(K({key:(t&&`${t}.`)+F,value:n[F],valueSpec:W,style:v,styleSpec:b,object:n,objectKey:F,validateSpec:S},n))}for(const F in s)f[F]||s[F].required&&s[F].default===void 0&&n[F]===void 0&&k.push(new St(t,n,`missing required property "${F}"`));return k}function Hh(i){const t=i.value,n=i.valueSpec,s=i.style,f=i.styleSpec,v=i.key,b=i.arrayElementValidator||i.validateSpec;if(xn(t)!=="array")return[new St(v,t,`array expected, ${xn(t)} found`)];if(n.length&&t.length!==n.length)return[new St(v,t,`array length ${n.length} expected, length ${t.length} found`)];if(n["min-length"]&&t.length<n["min-length"])return[new St(v,t,`array length at least ${n["min-length"]} expected, length ${t.length} found`)];let S={type:n.value,values:n.values};f.$version<7&&(S.function=n.function),xn(n.value)==="object"&&(S=n.value);let k=[];for(let R=0;R<t.length;R++)k=k.concat(b({array:t,arrayIndex:R,value:t[R],valueSpec:S,validateSpec:i.validateSpec,style:s,styleSpec:f,key:`${v}[${R}]`}));return k}function Ol(i){const t=i.key,n=i.value,s=i.valueSpec;let f=xn(n);return f==="number"&&n!=n&&(f="NaN"),f!=="number"?[new St(t,n,`number expected, ${f} found`)]:"minimum"in s&&n<s.minimum?[new St(t,n,`${n} is less than the minimum value ${s.minimum}`)]:"maximum"in s&&n>s.maximum?[new St(t,n,`${n} is greater than the maximum value ${s.maximum}`)]:[]}function Ua(i){const t=i.valueSpec,n=Ti(i.value.type);let s,f,v,b={};const S=n!=="categorical"&&i.value.property===void 0,k=!S,R=xn(i.value.stops)==="array"&&xn(i.value.stops[0])==="array"&&xn(i.value.stops[0][0])==="object",F=_o({key:i.key,value:i.value,valueSpec:i.styleSpec.function,validateSpec:i.validateSpec,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{stops:function(K){if(n==="identity")return[new St(K.key,K.value,'identity function may not have a "stops" property')];let ee=[];const ie=K.value;return ee=ee.concat(Hh({key:K.key,value:ie,valueSpec:K.valueSpec,validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec,arrayElementValidator:j})),xn(ie)==="array"&&ie.length===0&&ee.push(new St(K.key,ie,"array must have at least one stop")),ee},default:function(K){return K.validateSpec({key:K.key,value:K.value,valueSpec:t,validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec})}}});return n==="identity"&&S&&F.push(new St(i.key,i.value,'missing required property "property"')),n==="identity"||i.value.stops||F.push(new St(i.key,i.value,'missing required property "stops"')),n==="exponential"&&i.valueSpec.expression&&!na(i.valueSpec)&&F.push(new St(i.key,i.value,"exponential functions not supported")),i.styleSpec.$version>=8&&(k&&!zl(i.valueSpec)?F.push(new St(i.key,i.value,"property functions not supported")):S&&!Gh(i.valueSpec)&&F.push(new St(i.key,i.value,"zoom functions not supported"))),n!=="categorical"&&!R||i.value.property!==void 0||F.push(new St(i.key,i.value,'"property" property is required')),F;function j(K){let ee=[];const ie=K.value,me=K.key;if(xn(ie)!=="array")return[new St(me,ie,`array expected, ${xn(ie)} found`)];if(ie.length!==2)return[new St(me,ie,`array length 2 expected, length ${ie.length} found`)];if(R){if(xn(ie[0])!=="object")return[new St(me,ie,`object expected, ${xn(ie[0])} found`)];if(ie[0].zoom===void 0)return[new St(me,ie,"object stop key must have zoom")];if(ie[0].value===void 0)return[new St(me,ie,"object stop key must have value")];if(v&&v>Ti(ie[0].zoom))return[new St(me,ie[0].zoom,"stop zoom values must appear in ascending order")];Ti(ie[0].zoom)!==v&&(v=Ti(ie[0].zoom),f=void 0,b={}),ee=ee.concat(_o({key:`${me}[0]`,value:ie[0],valueSpec:{zoom:{}},validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec,objectElementValidators:{zoom:Ol,value:W}}))}else ee=ee.concat(W({key:`${me}[0]`,value:ie[0],validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec},ie));return ul(Dl(ie[1]))?ee.concat([new St(`${me}[1]`,ie[1],"expressions are not allowed in function stops.")]):ee.concat(K.validateSpec({key:`${me}[1]`,value:ie[1],valueSpec:t,validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec}))}function W(K,ee){const ie=xn(K.value),me=Ti(K.value),Ce=K.value!==null?K.value:ee;if(s){if(ie!==s)return[new St(K.key,Ce,`${ie} stop domain type must match previous stop domain type ${s}`)]}else s=ie;if(ie!=="number"&&ie!=="string"&&ie!=="boolean")return[new St(K.key,Ce,"stop domain value must be a number, string, or boolean")];if(ie!=="number"&&n!=="categorical"){let Ve=`number expected, ${ie} found`;return zl(t)&&n===void 0&&(Ve+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new St(K.key,Ce,Ve)]}return n!=="categorical"||ie!=="number"||isFinite(me)&&Math.floor(me)===me?n!=="categorical"&&ie==="number"&&f!==void 0&&me<f?[new St(K.key,Ce,"stop domain values must appear in ascending order")]:(f=me,n==="categorical"&&me in b?[new St(K.key,Ce,"stop domain values must be unique")]:(b[me]=!0,[])):[new St(K.key,Ce,`integer expected, found ${me}`)]}}function Wo(i){const t=(i.expressionContext==="property"?Tu:cl)(Dl(i.value),i.valueSpec);if(t.result==="error")return t.value.map(s=>new St(`${i.key}${s.key}`,i.value,s.message));const n=t.value.expression||t.value._styleExpression.expression;if(i.expressionContext==="property"&&i.propertyKey==="text-font"&&!n.outputDefined())return[new St(i.key,i.value,`Invalid data expression for "${i.propertyKey}". Output values must be contained as literals within the expression.`)];if(i.expressionContext==="property"&&i.propertyType==="layout"&&!Bc(n))return[new St(i.key,i.value,'"feature-state" data expressions are not supported with layout properties.')];if(i.expressionContext==="filter"&&!Bc(n))return[new St(i.key,i.value,'"feature-state" data expressions are not supported with filters.')];if(i.expressionContext&&i.expressionContext.indexOf("cluster")===0){if(!dh(n,["zoom","feature-state"]))return[new St(i.key,i.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(i.expressionContext==="cluster-initial"&&!qu(n))return[new St(i.key,i.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function zs(i){const t=i.key,n=i.value,s=xn(n);return s!=="string"?[new St(t,n,`color expected, ${s} found`)]:Jr.parse(String(n))?[]:[new St(t,n,`color expected, "${n}" found`)]}function Mu(i){const t=i.key,n=i.value,s=i.valueSpec,f=[];return Array.isArray(s.values)?s.values.indexOf(Ti(n))===-1&&f.push(new St(t,n,`expected one of [${s.values.join(", ")}], ${JSON.stringify(n)} found`)):Object.keys(s.values).indexOf(Ti(n))===-1&&f.push(new St(t,n,`expected one of [${Object.keys(s.values).join(", ")}], ${JSON.stringify(n)} found`)),f}function ce(i){return Ni(Dl(i.value))?Wo(wn({},i,{expressionContext:"filter",valueSpec:{value:"boolean"}})):tc(i)}function tc(i){const t=i.value,n=i.key;if(xn(t)!=="array")return[new St(n,t,`array expected, ${xn(t)} found`)];const s=i.styleSpec;let f,v=[];if(t.length<1)return[new St(n,t,"filter array must have at least 1 element")];switch(v=v.concat(Mu({key:`${n}[0]`,value:t[0],valueSpec:s.filter_operator,style:i.style,styleSpec:i.styleSpec})),Ti(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&Ti(t[1])==="$type"&&v.push(new St(n,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":t.length!==3&&v.push(new St(n,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(f=xn(t[1]),f!=="string"&&v.push(new St(`${n}[1]`,t[1],`string expected, ${f} found`)));for(let b=2;b<t.length;b++)f=xn(t[b]),Ti(t[1])==="$type"?v=v.concat(Mu({key:`${n}[${b}]`,value:t[b],valueSpec:s.geometry_type,style:i.style,styleSpec:i.styleSpec})):f!=="string"&&f!=="number"&&f!=="boolean"&&v.push(new St(`${n}[${b}]`,t[b],`string, number, or boolean expected, ${f} found`));break;case"any":case"all":case"none":for(let b=1;b<t.length;b++)v=v.concat(tc({key:`${n}[${b}]`,value:t[b],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":f=xn(t[1]),t.length!==2?v.push(new St(n,t,`filter array for "${t[0]}" operator must have 2 elements`)):f!=="string"&&v.push(new St(`${n}[1]`,t[1],`string expected, ${f} found`))}return v}function dl(i,t){const n=i.key,s=i.validateSpec,f=i.style,v=i.styleSpec,b=i.value,S=i.objectKey,k=v[`${t}_${i.layerType}`];if(!k)return[];const R=S.match(/^(.*)-transition$/);if(t==="paint"&&R&&k[R[1]]&&k[R[1]].transition)return s({key:n,value:b,valueSpec:v.transition,style:f,styleSpec:v});const F=i.valueSpec||k[S];if(!F)return[new St(n,b,`unknown property "${S}"`)];let j;if(xn(b)==="string"&&zl(F)&&!F.tokens&&(j=/^{([^}]+)}$/.exec(b)))return[new St(n,b,`"${S}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(j[1])} }\`.`)];const W=[];return i.layerType==="symbol"&&(S==="text-field"&&f&&!f.glyphs&&W.push(new St(n,b,'use of "text-field" requires a style "glyphs" property')),S==="text-font"&&Ku(Dl(b))&&Ti(b.type)==="identity"&&W.push(new St(n,b,'"text-font" does not support identity functions'))),W.concat(s({key:i.key,value:b,valueSpec:F,style:f,styleSpec:v,expressionContext:"property",propertyType:t,propertyKey:S}))}function Ho(i){return dl(i,"paint")}function gn(i){return dl(i,"layout")}function eu(i){let t=[];const n=i.value,s=i.key,f=i.style,v=i.styleSpec;if(xn(n)!=="object")return[new St(s,n,`object expected, ${xn(n)} found`)];n.type||n.ref||t.push(new St(s,n,'either "type" or "ref" is required'));let b=Ti(n.type);const S=Ti(n.ref);if(n.id){const k=Ti(n.id);for(let R=0;R<i.arrayIndex;R++){const F=f.layers[R];Ti(F.id)===k&&t.push(new St(s,n.id,`duplicate layer id "${n.id}", previously used at line ${F.id.__line__}`))}}if("ref"in n){let k;["type","source","source-layer","filter","layout"].forEach(R=>{R in n&&t.push(new St(s,n[R],`"${R}" is prohibited for ref layers`))}),f.layers.forEach(R=>{Ti(R.id)===S&&(k=R)}),k?k.ref?t.push(new St(s,n.ref,"ref cannot reference another ref layer")):b=Ti(k.type):t.push(new St(s,n.ref,`ref layer "${S}" not found`))}else if(b!=="background")if(n.source){const k=f.sources&&f.sources[n.source],R=k&&Ti(k.type);k?R==="vector"&&b==="raster"?t.push(new St(s,n.source,`layer "${n.id}" requires a raster source`)):R!=="raster-dem"&&b==="hillshade"?t.push(new St(s,n.source,`layer "${n.id}" requires a raster-dem source`)):R==="raster"&&b!=="raster"?t.push(new St(s,n.source,`layer "${n.id}" requires a vector source`)):R!=="vector"||n["source-layer"]?R==="raster-dem"&&b!=="hillshade"?t.push(new St(s,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):b!=="line"||!n.paint||!n.paint["line-gradient"]||R==="geojson"&&k.lineMetrics||t.push(new St(s,n,`layer "${n.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new St(s,n,`layer "${n.id}" must specify a "source-layer"`)):t.push(new St(s,n.source,`source "${n.source}" not found`))}else t.push(new St(s,n,'missing required property "source"'));return t=t.concat(_o({key:s,value:n,valueSpec:v.layer,style:i.style,styleSpec:i.styleSpec,validateSpec:i.validateSpec,objectElementValidators:{"*":()=>[],type:()=>i.validateSpec({key:`${s}.type`,value:n.type,valueSpec:v.layer.type,style:i.style,styleSpec:i.styleSpec,validateSpec:i.validateSpec,object:n,objectKey:"type"}),filter:ce,layout:k=>_o({layer:n,key:k.key,value:k.value,style:k.style,styleSpec:k.styleSpec,validateSpec:k.validateSpec,objectElementValidators:{"*":R=>gn(wn({layerType:b},R))}}),paint:k=>_o({layer:n,key:k.key,value:k.value,style:k.style,styleSpec:k.styleSpec,validateSpec:k.validateSpec,objectElementValidators:{"*":R=>Ho(wn({layerType:b},R))}})}})),t}function so(i){const t=i.value,n=i.key,s=xn(t);return s!=="string"?[new St(n,t,`string expected, ${s} found`)]:[]}const fl={promoteId:function({key:i,value:t}){if(xn(t)==="string")return so({key:i,value:t});{const n=[];for(const s in t)n.push(...so({key:`${i}.${s}`,value:t[s]}));return n}}};function fs(i){const t=i.value,n=i.key,s=i.styleSpec,f=i.style,v=i.validateSpec;if(!t.type)return[new St(n,t,'"type" is required')];const b=Ti(t.type);let S;switch(b){case"vector":case"raster":return S=_o({key:n,value:t,valueSpec:s[`source_${b.replace("-","_")}`],style:i.style,styleSpec:s,objectElementValidators:fl,validateSpec:v}),S;case"raster-dem":return S=function(k){var R;const F=(R=k.sourceName)!==null&&R!==void 0?R:"",j=k.value,W=k.styleSpec,K=W.source_raster_dem,ee=k.style;let ie=[];const me=xn(j);if(j===void 0)return ie;if(me!=="object")return ie.push(new St("source_raster_dem",j,`object expected, ${me} found`)),ie;const Ce=Ti(j.encoding)==="custom",Ve=["redFactor","greenFactor","blueFactor","baseShift"],Re=k.value.encoding?`"${k.value.encoding}"`:"Default";for(const H in j)!Ce&&Ve.includes(H)?ie.push(new St(H,j[H],`In "${F}": "${H}" is only valid when "encoding" is set to "custom". ${Re} encoding found`)):K[H]?ie=ie.concat(k.validateSpec({key:H,value:j[H],valueSpec:K[H],validateSpec:k.validateSpec,style:ee,styleSpec:W})):ie.push(new St(H,j[H],`unknown property "${H}"`));return ie}({sourceName:n,value:t,style:i.style,styleSpec:s,validateSpec:v}),S;case"geojson":if(S=_o({key:n,value:t,valueSpec:s.source_geojson,style:f,styleSpec:s,validateSpec:v,objectElementValidators:fl}),t.cluster)for(const k in t.clusterProperties){const[R,F]=t.clusterProperties[k],j=typeof R=="string"?[R,["accumulated"],["get",k]]:R;S.push(...Wo({key:`${n}.${k}.map`,value:F,expressionContext:"cluster-map"})),S.push(...Wo({key:`${n}.${k}.reduce`,value:j,expressionContext:"cluster-reduce"}))}return S;case"video":return _o({key:n,value:t,valueSpec:s.source_video,style:f,validateSpec:v,styleSpec:s});case"image":return _o({key:n,value:t,valueSpec:s.source_image,style:f,validateSpec:v,styleSpec:s});case"canvas":return[new St(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Mu({key:`${n}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Ii(i){const t=i.value,n=i.styleSpec,s=n.light,f=i.style;let v=[];const b=xn(t);if(t===void 0)return v;if(b!=="object")return v=v.concat([new St("light",t,`object expected, ${b} found`)]),v;for(const S in t){const k=S.match(/^(.*)-transition$/);v=v.concat(k&&s[k[1]]&&s[k[1]].transition?i.validateSpec({key:S,value:t[S],valueSpec:n.transition,validateSpec:i.validateSpec,style:f,styleSpec:n}):s[S]?i.validateSpec({key:S,value:t[S],valueSpec:s[S],validateSpec:i.validateSpec,style:f,styleSpec:n}):[new St(S,t[S],`unknown property "${S}"`)])}return v}function Ci(i){const t=i.value,n=i.styleSpec,s=n.sky,f=i.style,v=xn(t);if(t===void 0)return[];if(v!=="object")return[new St("sky",t,`object expected, ${v} found`)];let b=[];for(const S in t)b=b.concat(s[S]?i.validateSpec({key:S,value:t[S],valueSpec:s[S],style:f,styleSpec:n}):[new St(S,t[S],`unknown property "${S}"`)]);return b}function ba(i){const t=i.value,n=i.styleSpec,s=n.terrain,f=i.style;let v=[];const b=xn(t);if(t===void 0)return v;if(b!=="object")return v=v.concat([new St("terrain",t,`object expected, ${b} found`)]),v;for(const S in t)v=v.concat(s[S]?i.validateSpec({key:S,value:t[S],valueSpec:s[S],validateSpec:i.validateSpec,style:f,styleSpec:n}):[new St(S,t[S],`unknown property "${S}"`)]);return v}function No(i){let t=[];const n=i.value,s=i.key;if(Array.isArray(n)){const f=[],v=[];for(const b in n)n[b].id&&f.includes(n[b].id)&&t.push(new St(s,n,`all the sprites' ids must be unique, but ${n[b].id} is duplicated`)),f.push(n[b].id),n[b].url&&v.includes(n[b].url)&&t.push(new St(s,n,`all the sprites' URLs must be unique, but ${n[b].url} is duplicated`)),v.push(n[b].url),t=t.concat(_o({key:`${s}[${b}]`,value:n[b],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:i.validateSpec}));return t}return so({key:s,value:n})}function qo(i){return t=i.value,t&&t.constructor===Object?[]:[new St(i.key,i.value,`object expected, ${xn(i.value)} found`)];var t}const ps={"*":()=>[],array:Hh,boolean:function(i){const t=i.value,n=i.key,s=xn(t);return s!=="boolean"?[new St(n,t,`boolean expected, ${s} found`)]:[]},number:Ol,color:zs,constants:Iu,enum:Mu,filter:ce,function:Ua,layer:eu,object:_o,source:fs,light:Ii,sky:Ci,terrain:ba,projection:function(i){const t=i.value,n=i.styleSpec,s=n.projection,f=i.style,v=xn(t);if(t===void 0)return[];if(v!=="object")return[new St("projection",t,`object expected, ${v} found`)];let b=[];for(const S in t)b=b.concat(s[S]?i.validateSpec({key:S,value:t[S],valueSpec:s[S],style:f,styleSpec:n}):[new St(S,t[S],`unknown property "${S}"`)]);return b},projectionDefinition:function(i){const t=i.key;let n=i.value;n=n instanceof String?n.valueOf():n;const s=xn(n);return s!=="array"||function(f){return Array.isArray(f)&&f.length===3&&typeof f[0]=="string"&&typeof f[1]=="string"&&typeof f[2]=="number"}(n)||function(f){return!!["interpolate","step","literal"].includes(f[0])}(n)?["array","string"].includes(s)?[]:[new St(t,n,`projection expected, invalid type "${s}" found`)]:[new St(t,n,`projection expected, invalid array ${JSON.stringify(n)} found`)]},string:so,formatted:function(i){return so(i).length===0?[]:Wo(i)},resolvedImage:function(i){return so(i).length===0?[]:Wo(i)},padding:function(i){const t=i.key,n=i.value;if(xn(n)==="array"){if(n.length<1||n.length>4)return[new St(t,n,`padding requires 1 to 4 values; ${n.length} values found`)];const s={type:"number"};let f=[];for(let v=0;v<n.length;v++)f=f.concat(i.validateSpec({key:`${t}[${v}]`,value:n[v],validateSpec:i.validateSpec,valueSpec:s}));return f}return Ol({key:t,value:n,valueSpec:{}})},numberArray:function(i){const t=i.key,n=i.value;if(xn(n)==="array"){const s={type:"number"};if(n.length<1)return[new St(t,n,"array length at least 1 expected, length 0 found")];let f=[];for(let v=0;v<n.length;v++)f=f.concat(i.validateSpec({key:`${t}[${v}]`,value:n[v],validateSpec:i.validateSpec,valueSpec:s}));return f}return Ol({key:t,value:n,valueSpec:{}})},colorArray:function(i){const t=i.key,n=i.value;if(xn(n)==="array"){if(n.length<1)return[new St(t,n,"array length at least 1 expected, length 0 found")];let s=[];for(let f=0;f<n.length;f++)s=s.concat(zs({key:`${t}[${f}]`,value:n[f]}));return s}return zs({key:t,value:n})},variableAnchorOffsetCollection:function(i){const t=i.key,n=i.value,s=xn(n),f=i.styleSpec;if(s!=="array"||n.length<1||n.length%2!=0)return[new St(t,n,"variableAnchorOffsetCollection requires a non-empty array of even length")];let v=[];for(let b=0;b<n.length;b+=2)v=v.concat(Mu({key:`${t}[${b}]`,value:n[b],valueSpec:f.layout_symbol["text-anchor"]})),v=v.concat(Hh({key:`${t}[${b+1}]`,value:n[b+1],valueSpec:{length:2,value:"number"},validateSpec:i.validateSpec,style:i.style,styleSpec:f}));return v},sprite:No,state:qo};function pl(i){const t=i.value,n=i.valueSpec,s=i.styleSpec;return i.validateSpec=pl,n.expression&&Ku(Ti(t))?Ua(i):n.expression&&ul(Dl(t))?Wo(i):n.type&&ps[n.type]?ps[n.type](i):_o(wn({},i,{valueSpec:n.type?s[n.type]:n}))}function Ls(i){const t=i.value,n=i.key,s=so(i);return s.length||(t.indexOf("{fontstack}")===-1&&s.push(new St(n,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&s.push(new St(n,t,'"glyphs" url must include a "{range}" token'))),s}function ko(i,t=fe){let n=[];return n=n.concat(pl({key:"",value:i,valueSpec:t.$root,styleSpec:t,style:i,validateSpec:pl,objectElementValidators:{glyphs:Ls,"*":()=>[]}})),i.constants&&(n=n.concat(Iu({key:"constants",value:i.constants}))),rc(n)}function Va(i){return function(t){return i({...t,validateSpec:pl})}}function rc(i){return[].concat(i).sort((t,n)=>t.line-n.line)}function Wi(i){return function(...t){return rc(i.apply(this,t))}}ko.source=Wi(Va(fs)),ko.sprite=Wi(Va(No)),ko.glyphs=Wi(Va(Ls)),ko.light=Wi(Va(Ii)),ko.sky=Wi(Va(Ci)),ko.terrain=Wi(Va(ba)),ko.state=Wi(Va(qo)),ko.layer=Wi(Va(eu)),ko.filter=Wi(Va(ce)),ko.paintProperty=Wi(Va(Ho)),ko.layoutProperty=Wi(Va(gn));const nc=ko,Za=nc.light,qh=nc.sky,gh=nc.paintProperty,yh=nc.layoutProperty;function tu(i,t){let n=!1;if(t&&t.length)for(const s of t)i.fire(new Ie(new Error(s.message))),n=!0;return n}class wa{constructor(t,n,s){const f=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;const b=new Int32Array(this.arrayBuffer);t=b[0],this.d=(n=b[1])+2*(s=b[2]);for(let k=0;k<this.d*this.d;k++){const R=b[3+k],F=b[3+k+1];f.push(R===F?null:b.subarray(R,F))}const S=b[3+f.length+1];this.keys=b.subarray(b[3+f.length],S),this.bboxes=b.subarray(S),this.insert=this._insertReadonly}else{this.d=n+2*s;for(let b=0;b<this.d*this.d;b++)f.push([]);this.keys=[],this.bboxes=[]}this.n=n,this.extent=t,this.padding=s,this.scale=n/t,this.uid=0;const v=s/n*t;this.min=-v,this.max=t+v}insert(t,n,s,f,v){this._forEachCell(n,s,f,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(t),this.bboxes.push(n),this.bboxes.push(s),this.bboxes.push(f),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(t,n,s,f,v,b){this.cells[v].push(b)}query(t,n,s,f,v){const b=this.min,S=this.max;if(t<=b&&n<=b&&S<=s&&S<=f&&!v)return Array.prototype.slice.call(this.keys);{const k=[];return this._forEachCell(t,n,s,f,this._queryCell,k,{},v),k}}_queryCell(t,n,s,f,v,b,S,k){const R=this.cells[v];if(R!==null){const F=this.keys,j=this.bboxes;for(let W=0;W<R.length;W++){const K=R[W];if(S[K]===void 0){const ee=4*K;(k?k(j[ee+0],j[ee+1],j[ee+2],j[ee+3]):t<=j[ee+2]&&n<=j[ee+3]&&s>=j[ee+0]&&f>=j[ee+1])?(S[K]=!0,b.push(F[K])):S[K]=!1}}}}_forEachCell(t,n,s,f,v,b,S,k){const R=this._convertToCellCoord(t),F=this._convertToCellCoord(n),j=this._convertToCellCoord(s),W=this._convertToCellCoord(f);for(let K=R;K<=j;K++)for(let ee=F;ee<=W;ee++){const ie=this.d*ee+K;if((!k||k(this._convertFromCellCoord(K),this._convertFromCellCoord(ee),this._convertFromCellCoord(K+1),this._convertFromCellCoord(ee+1)))&&v.call(this,t,n,s,f,ie,b,S,k))return}}_convertFromCellCoord(t){return(t-this.padding)/this.scale}_convertToCellCoord(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const t=this.cells,n=3+this.cells.length+1+1;let s=0;for(let b=0;b<this.cells.length;b++)s+=this.cells[b].length;const f=new Int32Array(n+s+this.keys.length+this.bboxes.length);f[0]=this.extent,f[1]=this.n,f[2]=this.padding;let v=n;for(let b=0;b<t.length;b++){const S=t[b];f[3+b]=v,f.set(S,v),v+=S.length}return f[3+t.length]=v,f.set(this.keys,v),v+=this.keys.length,f[3+t.length+1]=v,f.set(this.bboxes,v),v+=this.bboxes.length,f.buffer}static serialize(t,n){const s=t.toArrayBuffer();return n&&n.push(s),{buffer:s}}static deserialize(t){return new wa(t.buffer)}}const Ds={};function lr(i,t,n={}){if(Ds[i])throw new Error(`${i} is already registered.`);Object.defineProperty(t,"_classRegistryKey",{value:i,writeable:!1}),Ds[i]={klass:t,omit:n.omit||[],shallow:n.shallow||[]}}lr("Object",Object),lr("TransferableGridIndex",wa),lr("Color",Jr),lr("Error",Error),lr("AJAXError",ei),lr("ResolvedImage",ro),lr("StylePropertyFunction",Cu),lr("StyleExpression",Nc,{omit:["_evaluator"]}),lr("ZoomDependentExpression",jc),lr("ZoomConstantExpression",$c),lr("CompoundExpression",Go,{omit:["_evaluate"]});for(const i in Rs)Rs[i]._classRegistryKey||lr(`Expression_${i}`,Rs[i]);function ic(i){return i&&typeof ArrayBuffer<"u"&&(i instanceof ArrayBuffer||i.constructor&&i.constructor.name==="ArrayBuffer")}function oc(i){return i.$name||i.constructor._classRegistryKey}function Sa(i){return!function(t){if(t===null||typeof t!="object")return!1;const n=oc(t);return!(!n||n==="Object")}(i)&&(i==null||typeof i=="boolean"||typeof i=="number"||typeof i=="string"||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp||i instanceof Blob||i instanceof Error||ic(i)||dn(i)||ArrayBuffer.isView(i)||i instanceof ImageData)}function Ko(i,t){if(Sa(i))return(ic(i)||dn(i))&&t&&t.push(i),ArrayBuffer.isView(i)&&t&&t.push(i.buffer),i instanceof ImageData&&t&&t.push(i.data.buffer),i;if(Array.isArray(i)){const v=[];for(const b of i)v.push(Ko(b,t));return v}if(typeof i!="object")throw new Error("can't serialize object of type "+typeof i);const n=oc(i);if(!n)throw new Error(`can't serialize object of unregistered class ${i.constructor.name}`);if(!Ds[n])throw new Error(`${n} is not registered.`);const{klass:s}=Ds[n],f=s.serialize?s.serialize(i,t):{};if(s.serialize){if(t&&f===t[t.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const v in i){if(!i.hasOwnProperty(v)||Ds[n].omit.indexOf(v)>=0)continue;const b=i[v];f[v]=Ds[n].shallow.indexOf(v)>=0?b:Ko(b,t)}i instanceof Error&&(f.message=i.message)}if(f.$name)throw new Error("$name property is reserved for worker serialization logic.");return n!=="Object"&&(f.$name=n),f}function ml(i){if(Sa(i))return i;if(Array.isArray(i))return i.map(ml);if(typeof i!="object")throw new Error("can't deserialize object of type "+typeof i);const t=oc(i)||"Object";if(!Ds[t])throw new Error(`can't deserialize unregistered class ${t}`);const{klass:n}=Ds[t];if(!n)throw new Error(`can't deserialize unregistered class ${t}`);if(n.deserialize)return n.deserialize(i);const s=Object.create(n.prototype);for(const f of Object.keys(i)){if(f==="$name")continue;const v=i[f];s[f]=Ds[t].shallow.indexOf(f)>=0?v:ml(v)}return s}class Ga{constructor(){this.first=!0}update(t,n){const s=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=s,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=s,!0):(this.lastFloorZoom>s?(this.lastIntegerZoom=s+1,this.lastIntegerZoomTime=n):this.lastFloorZoom<s&&(this.lastIntegerZoom=s,this.lastIntegerZoomTime=n),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=s,!0))}}const hn={"Latin-1 Supplement":i=>i>=128&&i<=255,"Hangul Jamo":i=>i>=4352&&i<=4607,Khmer:i=>i>=6016&&i<=6143,"General Punctuation":i=>i>=8192&&i<=8303,"Letterlike Symbols":i=>i>=8448&&i<=8527,"Number Forms":i=>i>=8528&&i<=8591,"Miscellaneous Technical":i=>i>=8960&&i<=9215,"Control Pictures":i=>i>=9216&&i<=9279,"Optical Character Recognition":i=>i>=9280&&i<=9311,"Enclosed Alphanumerics":i=>i>=9312&&i<=9471,"Geometric Shapes":i=>i>=9632&&i<=9727,"Miscellaneous Symbols":i=>i>=9728&&i<=9983,"Miscellaneous Symbols and Arrows":i=>i>=11008&&i<=11263,"Ideographic Description Characters":i=>i>=12272&&i<=12287,"CJK Symbols and Punctuation":i=>i>=12288&&i<=12351,Hiragana:i=>i>=12352&&i<=12447,Katakana:i=>i>=12448&&i<=12543,Kanbun:i=>i>=12688&&i<=12703,"CJK Strokes":i=>i>=12736&&i<=12783,"Enclosed CJK Letters and Months":i=>i>=12800&&i<=13055,"CJK Compatibility":i=>i>=13056&&i<=13311,"Yijing Hexagram Symbols":i=>i>=19904&&i<=19967,"CJK Unified Ideographs":i=>i>=19968&&i<=40959,"Hangul Syllables":i=>i>=44032&&i<=55215,"Private Use Area":i=>i>=57344&&i<=63743,"Vertical Forms":i=>i>=65040&&i<=65055,"CJK Compatibility Forms":i=>i>=65072&&i<=65103,"Small Form Variants":i=>i>=65104&&i<=65135,"Halfwidth and Fullwidth Forms":i=>i>=65280&&i<=65519};function Fl(i){for(const t of i)if(vi(t.charCodeAt(0)))return!0;return!1}function df(i){for(const t of i)if(!Xo(t.charCodeAt(0)))return!1;return!0}function sc(i){const t=i.map(n=>{try{return new RegExp(`\\p{sc=${n}}`,"u").source}catch{return null}}).filter(n=>n);return new RegExp(t.join("|"),"u")}const ku=sc(["Arab","Dupl","Mong","Ougr","Syrc"]);function Xo(i){return!ku.test(String.fromCodePoint(i))}const Os=sc(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function vi(i){return!(i!==746&&i!==747&&(i<4352||!(hn["CJK Compatibility Forms"](i)&&!(i>=65097&&i<=65103)||hn["CJK Compatibility"](i)||hn["CJK Strokes"](i)||!(!hn["CJK Symbols and Punctuation"](i)||i>=12296&&i<=12305||i>=12308&&i<=12319||i===12336)||hn["Enclosed CJK Letters and Months"](i)||hn["Ideographic Description Characters"](i)||hn.Kanbun(i)||hn.Katakana(i)&&i!==12540||!(!hn["Halfwidth and Fullwidth Forms"](i)||i===65288||i===65289||i===65293||i>=65306&&i<=65310||i===65339||i===65341||i===65343||i>=65371&&i<=65503||i===65507||i>=65512&&i<=65519)||!(!hn["Small Form Variants"](i)||i>=65112&&i<=65118||i>=65123&&i<=65126)||hn["Vertical Forms"](i)||hn["Yijing Hexagram Symbols"](i)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(i))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(i))||Os.test(String.fromCodePoint(i)))))}function Fs(i){return!(vi(i)||function(t){return!!(hn["Latin-1 Supplement"](t)&&(t===167||t===169||t===174||t===177||t===188||t===189||t===190||t===215||t===247)||hn["General Punctuation"](t)&&(t===8214||t===8224||t===8225||t===8240||t===8241||t===8251||t===8252||t===8258||t===8263||t===8264||t===8265||t===8273)||hn["Letterlike Symbols"](t)||hn["Number Forms"](t)||hn["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||t===9003||t>=9085&&t<=9114||t>=9150&&t<=9165||t===9167||t>=9169&&t<=9179||t>=9186&&t<=9215)||hn["Control Pictures"](t)&&t!==9251||hn["Optical Character Recognition"](t)||hn["Enclosed Alphanumerics"](t)||hn["Geometric Shapes"](t)||hn["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||hn["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||hn["CJK Symbols and Punctuation"](t)||hn.Katakana(t)||hn["Private Use Area"](t)||hn["CJK Compatibility Forms"](t)||hn["Small Form Variants"](t)||hn["Halfwidth and Fullwidth Forms"](t)||t===8734||t===8756||t===8757||t>=9984&&t<=10087||t>=10102&&t<=10131||t===65532||t===65533)}(i))}const Bl=sc(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function ac(i){return Bl.test(String.fromCodePoint(i))}function ru(i,t){return!(!t&&ac(i)||i>=2304&&i<=3583||i>=3840&&i<=4255||hn.Khmer(i))}function ia(i){for(const t of i)if(ac(t.charCodeAt(0)))return!0;return!1}const Nl=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(i){this.pluginStatus=i.pluginStatus,this.pluginURL=i.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(i){if(Nl.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=i.applyArabicShaping,this.processBidirectionalText=i.processBidirectionalText,this.processStyledBidirectionalText=i.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(i,t){return u(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(i.pluginStatus!=="loading")return this.setState(i),i;const n=i.pluginURL,s=new Promise(v=>{this.loadScriptResolve=v});t(n);const f=new Promise(v=>setTimeout(()=>v(),this.TIMEOUT));if(yield Promise.race([s,f]),this.isParsed()){const v={pluginStatus:"loaded",pluginURL:n};return this.setState(v),v}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${n}`)})}};class oi{constructor(t,n){this.zoom=t,n?(this.now=n.now,this.fadeDuration=n.fadeDuration,this.zoomHistory=n.zoomHistory,this.transition=n.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ga,this.transition={})}isSupportedScript(t){return function(n,s){for(const f of n)if(!ru(f.charCodeAt(0),s))return!1;return!0}(t,Nl.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const t=this.zoom,n=t-Math.floor(t),s=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:n+(1-n)*s}:{fromScale:.5,toScale:1,t:1-(1-s)*n}}}class lc{constructor(t,n){this.property=t,this.value=n,this.expression=function(s,f){if(Ku(s))return new Cu(s,f);if(ul(s)){const v=Tu(s,f);if(v.result==="error")throw new Error(v.value.map(b=>`${b.key}: ${b.message}`).join(", "));return v.value}{let v=s;return f.type==="color"&&typeof s=="string"?v=Jr.parse(s):f.type!=="padding"||typeof s!="number"&&!Array.isArray(s)?f.type!=="numberArray"||typeof s!="number"&&!Array.isArray(s)?f.type!=="colorArray"||typeof s!="string"&&!Array.isArray(s)?f.type==="variableAnchorOffsetCollection"&&Array.isArray(s)?v=Oo.parse(s):f.type==="projectionDefinition"&&typeof s=="string"&&(v=as.parse(s)):v=Pi.parse(s):v=Dn.parse(s):v=ci.parse(s),{kind:"constant",evaluate:()=>v}}}(n===void 0?t.specification.default:n,t.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(t,n,s){return this.property.possiblyEvaluate(this,t,n,s)}}class Wa{constructor(t){this.property=t,this.value=new lc(t,void 0)}transitioned(t,n){return new Rd(this.property,this.value,n,Sr({},t.transition,this.transition),t.now)}untransitioned(){return new Rd(this.property,this.value,null,{},0)}}class gl{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return Tr(this._values[t].value.value)}setValue(t,n){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new Wa(this._values[t].property)),this._values[t].value=new lc(this._values[t].property,n===null?void 0:Tr(n))}getTransition(t){return Tr(this._values[t].transition)}setTransition(t,n){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new Wa(this._values[t].property)),this._values[t].transition=Tr(n)||void 0}serialize(){const t={};for(const n of Object.keys(this._values)){const s=this.getValue(n);s!==void 0&&(t[n]=s);const f=this.getTransition(n);f!==void 0&&(t[`${n}-transition`]=f)}return t}transitioned(t,n){const s=new Zc(this._properties);for(const f of Object.keys(this._values))s._values[f]=this._values[f].transitioned(t,n._values[f]);return s}untransitioned(){const t=new Zc(this._properties);for(const n of Object.keys(this._values))t._values[n]=this._values[n].untransitioned();return t}}class Rd{constructor(t,n,s,f,v){this.property=t,this.value=n,this.begin=v+f.delay||0,this.end=this.begin+f.duration||0,t.specification.transition&&(f.delay||f.duration)&&(this.prior=s)}possiblyEvaluate(t,n,s){const f=t.now||0,v=this.value.possiblyEvaluate(t,n,s),b=this.prior;if(b){if(f>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(f<this.begin)return b.possiblyEvaluate(t,n,s);{const S=(f-this.begin)/(this.end-this.begin);return this.property.interpolate(b.possiblyEvaluate(t,n,s),v,ct(S))}}return v}}class Zc{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,n,s){const f=new Gc(this._properties);for(const v of Object.keys(this._values))f._values[v]=this._values[v].possiblyEvaluate(t,n,s);return f}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class uc{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}hasValue(t){return this._values[t].value!==void 0}getValue(t){return Tr(this._values[t].value)}setValue(t,n){this._values[t]=new lc(this._values[t].property,n===null?void 0:Tr(n))}serialize(){const t={};for(const n of Object.keys(this._values)){const s=this.getValue(n);s!==void 0&&(t[n]=s)}return t}possiblyEvaluate(t,n,s){const f=new Gc(this._properties);for(const v of Object.keys(this._values))f._values[v]=this._values[v].possiblyEvaluate(t,n,s);return f}}class ms{constructor(t,n,s){this.property=t,this.value=n,this.parameters=s}isConstant(){return this.value.kind==="constant"}constantOr(t){return this.value.kind==="constant"?this.value.value:t}evaluate(t,n,s,f){return this.property.evaluate(this.value,this.parameters,t,n,s,f)}}class Gc{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class dr{constructor(t){this.specification=t}possiblyEvaluate(t,n){if(t.isDataDriven())throw new Error("Value should not be data driven");return t.expression.evaluate(n)}interpolate(t,n,s){const f=hs[this.specification.type];return f?f(t,n,s):t}}class Ur{constructor(t,n){this.specification=t,this.overrides=n}possiblyEvaluate(t,n,s,f){return new ms(this,t.expression.kind==="constant"||t.expression.kind==="camera"?{kind:"constant",value:t.expression.evaluate(n,null,{},s,f)}:t.expression,n)}interpolate(t,n,s){if(t.value.kind!=="constant"||n.value.kind!=="constant")return t;if(t.value.value===void 0||n.value.value===void 0)return new ms(this,{kind:"constant",value:void 0},t.parameters);const f=hs[this.specification.type];if(f){const v=f(t.value.value,n.value.value,s);return new ms(this,{kind:"constant",value:v},t.parameters)}return t}evaluate(t,n,s,f,v,b){return t.kind==="constant"?t.value:t.evaluate(n,s,f,v,b)}}class nu extends Ur{possiblyEvaluate(t,n,s,f){if(t.value===void 0)return new ms(this,{kind:"constant",value:void 0},n);if(t.expression.kind==="constant"){const v=t.expression.evaluate(n,null,{},s,f),b=t.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,S=this._calculate(b,b,b,n);return new ms(this,{kind:"constant",value:S},n)}if(t.expression.kind==="camera"){const v=this._calculate(t.expression.evaluate({zoom:n.zoom-1}),t.expression.evaluate({zoom:n.zoom}),t.expression.evaluate({zoom:n.zoom+1}),n);return new ms(this,{kind:"constant",value:v},n)}return new ms(this,t.expression,n)}evaluate(t,n,s,f,v,b){if(t.kind==="source"){const S=t.evaluate(n,s,f,v,b);return this._calculate(S,S,S,n)}return t.kind==="composite"?this._calculate(t.evaluate({zoom:Math.floor(n.zoom)-1},s,f),t.evaluate({zoom:Math.floor(n.zoom)},s,f),t.evaluate({zoom:Math.floor(n.zoom)+1},s,f),n):t.value}_calculate(t,n,s,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:t,to:n}:{from:s,to:n}}interpolate(t){return t}}class Bs{constructor(t){this.specification=t}possiblyEvaluate(t,n,s,f){if(t.value!==void 0){if(t.expression.kind==="constant"){const v=t.expression.evaluate(n,null,{},s,f);return this._calculate(v,v,v,n)}return this._calculate(t.expression.evaluate(new oi(Math.floor(n.zoom-1),n)),t.expression.evaluate(new oi(Math.floor(n.zoom),n)),t.expression.evaluate(new oi(Math.floor(n.zoom+1),n)),n)}}_calculate(t,n,s,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:t,to:n}:{from:s,to:n}}interpolate(t){return t}}class $l{constructor(t){this.specification=t}possiblyEvaluate(t,n,s,f){return!!t.expression.evaluate(n,null,{},s,f)}interpolate(){return!1}}class Li{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const n in t){const s=t[n];s.specification.overridable&&this.overridableProperties.push(n);const f=this.defaultPropertyValues[n]=new lc(s,void 0),v=this.defaultTransitionablePropertyValues[n]=new Wa(s);this.defaultTransitioningPropertyValues[n]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[n]=f.possiblyEvaluate({})}}}lr("DataDrivenProperty",Ur),lr("DataConstantProperty",dr),lr("CrossFadedDataDrivenProperty",nu),lr("CrossFadedProperty",Bs),lr("ColorRampProperty",$l);const yl="-transition";class Ns extends Ue{constructor(t,n){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1},t.type!=="custom"&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,t.type!=="background"&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),n.layout&&(this._unevaluatedLayout=new uc(n.layout)),n.paint)){this._transitionablePaint=new gl(n.paint);for(const s in t.paint)this.setPaintProperty(s,t.paint[s],{validate:!1});for(const s in t.layout)this.setLayoutProperty(s,t.layout[s],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Gc(n.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return t==="visibility"?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,n,s={}){n!=null&&this._validate(yh,`layers.${this.id}.layout.${t}`,t,n,s)||(t!=="visibility"?this._unevaluatedLayout.setValue(t,n):this.visibility=n)}getPaintProperty(t){return t.endsWith(yl)?this._transitionablePaint.getTransition(t.slice(0,-11)):this._transitionablePaint.getValue(t)}setPaintProperty(t,n,s={}){if(n!=null&&this._validate(gh,`layers.${this.id}.paint.${t}`,t,n,s))return!1;if(t.endsWith(yl))return this._transitionablePaint.setTransition(t.slice(0,-11),n||void 0),!1;{const f=this._transitionablePaint._values[t],v=f.property.specification["property-type"]==="cross-faded-data-driven",b=f.value.isDataDriven(),S=f.value;this._transitionablePaint.setValue(t,n),this._handleSpecialPaintPropertyUpdate(t);const k=this._transitionablePaint._values[t].value;return k.isDataDriven()||b||v||this._handleOverridablePaintPropertyUpdate(t,S,k)}}_handleSpecialPaintPropertyUpdate(t){}_handleOverridablePaintPropertyUpdate(t,n,s){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||this.visibility==="none"}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,n){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,n)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,n)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),Qr(t,(n,s)=>!(n===void 0||s==="layout"&&!Object.keys(n).length||s==="paint"&&!Object.keys(n).length))}_validate(t,n,s,f,v={}){return(!v||v.validate!==!1)&&tu(this,t.call(nc,{key:n,layerType:this.type,objectKey:s,value:f,styleSpec:fe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const n=this.paint.get(t);if(n instanceof ms&&zl(n.property.specification)&&(n.value.kind==="source"||n.value.kind==="composite")&&n.value.isStateDependent)return!0}return!1}}const $o={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class oa{constructor(t,n){this._structArray=t,this._pos1=n*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class $n{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,n){return t._trim(),n&&(t.isTransferred=!0,n.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const n=Object.create(this.prototype);return n.arrayBuffer=t.arrayBuffer,n.length=t.length,n.capacity=t.arrayBuffer.byteLength/n.bytesPerElement,n._refreshViews(),n}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const n=this.uint8;this._refreshViews(),n&&this.uint8.set(n)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function si(i,t=1){let n=0,s=0;return{members:i.map(f=>{const v=$o[f.type].BYTES_PER_ELEMENT,b=n=Au(n,Math.max(t,v)),S=f.components||1;return s=Math.max(s,v),n+=v*S,{name:f.name,type:f.type,components:S,offset:b}}),size:Au(n,Math.max(s,t)),alignment:t}}function Au(i,t){return Math.ceil(i/t)*t}class Ru extends $n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,n){const s=this.length;return this.resize(s+1),this.emplace(s,t,n)}emplace(t,n,s){const f=2*t;return this.int16[f+0]=n,this.int16[f+1]=s,t}}Ru.prototype.bytesPerElement=4,lr("StructArrayLayout2i4",Ru);class Ta extends $n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,n,s){const f=this.length;return this.resize(f+1),this.emplace(f,t,n,s)}emplace(t,n,s,f){const v=3*t;return this.int16[v+0]=n,this.int16[v+1]=s,this.int16[v+2]=f,t}}Ta.prototype.bytesPerElement=6,lr("StructArrayLayout3i6",Ta);class jo extends $n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,n,s,f){const v=this.length;return this.resize(v+1),this.emplace(v,t,n,s,f)}emplace(t,n,s,f,v){const b=4*t;return this.int16[b+0]=n,this.int16[b+1]=s,this.int16[b+2]=f,this.int16[b+3]=v,t}}jo.prototype.bytesPerElement=8,lr("StructArrayLayout4i8",jo);class Wc extends $n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,n,s,f,v,b){const S=this.length;return this.resize(S+1),this.emplace(S,t,n,s,f,v,b)}emplace(t,n,s,f,v,b,S){const k=6*t;return this.int16[k+0]=n,this.int16[k+1]=s,this.int16[k+2]=f,this.int16[k+3]=v,this.int16[k+4]=b,this.int16[k+5]=S,t}}Wc.prototype.bytesPerElement=12,lr("StructArrayLayout2i4i12",Wc);class Kh extends $n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,n,s,f,v,b){const S=this.length;return this.resize(S+1),this.emplace(S,t,n,s,f,v,b)}emplace(t,n,s,f,v,b,S){const k=4*t,R=8*t;return this.int16[k+0]=n,this.int16[k+1]=s,this.uint8[R+4]=f,this.uint8[R+5]=v,this.uint8[R+6]=b,this.uint8[R+7]=S,t}}Kh.prototype.bytesPerElement=8,lr("StructArrayLayout2i4ub8",Kh);class sa extends $n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,n){const s=this.length;return this.resize(s+1),this.emplace(s,t,n)}emplace(t,n,s){const f=2*t;return this.float32[f+0]=n,this.float32[f+1]=s,t}}sa.prototype.bytesPerElement=8,lr("StructArrayLayout2f8",sa);class aa extends $n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,n,s,f,v,b,S,k,R,F){const j=this.length;return this.resize(j+1),this.emplace(j,t,n,s,f,v,b,S,k,R,F)}emplace(t,n,s,f,v,b,S,k,R,F,j){const W=10*t;return this.uint16[W+0]=n,this.uint16[W+1]=s,this.uint16[W+2]=f,this.uint16[W+3]=v,this.uint16[W+4]=b,this.uint16[W+5]=S,this.uint16[W+6]=k,this.uint16[W+7]=R,this.uint16[W+8]=F,this.uint16[W+9]=j,t}}aa.prototype.bytesPerElement=20,lr("StructArrayLayout10ui20",aa);class g extends $n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,n,s,f,v,b,S,k,R,F,j,W){const K=this.length;return this.resize(K+1),this.emplace(K,t,n,s,f,v,b,S,k,R,F,j,W)}emplace(t,n,s,f,v,b,S,k,R,F,j,W,K){const ee=12*t;return this.int16[ee+0]=n,this.int16[ee+1]=s,this.int16[ee+2]=f,this.int16[ee+3]=v,this.uint16[ee+4]=b,this.uint16[ee+5]=S,this.uint16[ee+6]=k,this.uint16[ee+7]=R,this.int16[ee+8]=F,this.int16[ee+9]=j,this.int16[ee+10]=W,this.int16[ee+11]=K,t}}g.prototype.bytesPerElement=24,lr("StructArrayLayout4i4ui4i24",g);class e extends $n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,n,s){const f=this.length;return this.resize(f+1),this.emplace(f,t,n,s)}emplace(t,n,s,f){const v=3*t;return this.float32[v+0]=n,this.float32[v+1]=s,this.float32[v+2]=f,t}}e.prototype.bytesPerElement=12,lr("StructArrayLayout3f12",e);class r extends $n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const n=this.length;return this.resize(n+1),this.emplace(n,t)}emplace(t,n){return this.uint32[1*t+0]=n,t}}r.prototype.bytesPerElement=4,lr("StructArrayLayout1ul4",r);class a extends $n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,n,s,f,v,b,S,k,R){const F=this.length;return this.resize(F+1),this.emplace(F,t,n,s,f,v,b,S,k,R)}emplace(t,n,s,f,v,b,S,k,R,F){const j=10*t,W=5*t;return this.int16[j+0]=n,this.int16[j+1]=s,this.int16[j+2]=f,this.int16[j+3]=v,this.int16[j+4]=b,this.int16[j+5]=S,this.uint32[W+3]=k,this.uint16[j+8]=R,this.uint16[j+9]=F,t}}a.prototype.bytesPerElement=20,lr("StructArrayLayout6i1ul2ui20",a);class d extends $n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,n,s,f,v,b){const S=this.length;return this.resize(S+1),this.emplace(S,t,n,s,f,v,b)}emplace(t,n,s,f,v,b,S){const k=6*t;return this.int16[k+0]=n,this.int16[k+1]=s,this.int16[k+2]=f,this.int16[k+3]=v,this.int16[k+4]=b,this.int16[k+5]=S,t}}d.prototype.bytesPerElement=12,lr("StructArrayLayout2i2i2i12",d);class y extends $n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,n,s,f,v){const b=this.length;return this.resize(b+1),this.emplace(b,t,n,s,f,v)}emplace(t,n,s,f,v,b){const S=4*t,k=8*t;return this.float32[S+0]=n,this.float32[S+1]=s,this.float32[S+2]=f,this.int16[k+6]=v,this.int16[k+7]=b,t}}y.prototype.bytesPerElement=16,lr("StructArrayLayout2f1f2i16",y);class w extends $n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,n,s,f,v,b){const S=this.length;return this.resize(S+1),this.emplace(S,t,n,s,f,v,b)}emplace(t,n,s,f,v,b,S){const k=16*t,R=4*t,F=8*t;return this.uint8[k+0]=n,this.uint8[k+1]=s,this.float32[R+1]=f,this.float32[R+2]=v,this.int16[F+6]=b,this.int16[F+7]=S,t}}w.prototype.bytesPerElement=16,lr("StructArrayLayout2ub2f2i16",w);class E extends $n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,n,s){const f=this.length;return this.resize(f+1),this.emplace(f,t,n,s)}emplace(t,n,s,f){const v=3*t;return this.uint16[v+0]=n,this.uint16[v+1]=s,this.uint16[v+2]=f,t}}E.prototype.bytesPerElement=6,lr("StructArrayLayout3ui6",E);class A extends $n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,n,s,f,v,b,S,k,R,F,j,W,K,ee,ie,me,Ce){const Ve=this.length;return this.resize(Ve+1),this.emplace(Ve,t,n,s,f,v,b,S,k,R,F,j,W,K,ee,ie,me,Ce)}emplace(t,n,s,f,v,b,S,k,R,F,j,W,K,ee,ie,me,Ce,Ve){const Re=24*t,H=12*t,pe=48*t;return this.int16[Re+0]=n,this.int16[Re+1]=s,this.uint16[Re+2]=f,this.uint16[Re+3]=v,this.uint32[H+2]=b,this.uint32[H+3]=S,this.uint32[H+4]=k,this.uint16[Re+10]=R,this.uint16[Re+11]=F,this.uint16[Re+12]=j,this.float32[H+7]=W,this.float32[H+8]=K,this.uint8[pe+36]=ee,this.uint8[pe+37]=ie,this.uint8[pe+38]=me,this.uint32[H+10]=Ce,this.int16[Re+22]=Ve,t}}A.prototype.bytesPerElement=48,lr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",A);class D extends $n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,n,s,f,v,b,S,k,R,F,j,W,K,ee,ie,me,Ce,Ve,Re,H,pe,Fe,pt,jt,bt,Mt,Kt,Vt){const qt=this.length;return this.resize(qt+1),this.emplace(qt,t,n,s,f,v,b,S,k,R,F,j,W,K,ee,ie,me,Ce,Ve,Re,H,pe,Fe,pt,jt,bt,Mt,Kt,Vt)}emplace(t,n,s,f,v,b,S,k,R,F,j,W,K,ee,ie,me,Ce,Ve,Re,H,pe,Fe,pt,jt,bt,Mt,Kt,Vt,qt){const Rt=32*t,Er=16*t;return this.int16[Rt+0]=n,this.int16[Rt+1]=s,this.int16[Rt+2]=f,this.int16[Rt+3]=v,this.int16[Rt+4]=b,this.int16[Rt+5]=S,this.int16[Rt+6]=k,this.int16[Rt+7]=R,this.uint16[Rt+8]=F,this.uint16[Rt+9]=j,this.uint16[Rt+10]=W,this.uint16[Rt+11]=K,this.uint16[Rt+12]=ee,this.uint16[Rt+13]=ie,this.uint16[Rt+14]=me,this.uint16[Rt+15]=Ce,this.uint16[Rt+16]=Ve,this.uint16[Rt+17]=Re,this.uint16[Rt+18]=H,this.uint16[Rt+19]=pe,this.uint16[Rt+20]=Fe,this.uint16[Rt+21]=pt,this.uint16[Rt+22]=jt,this.uint32[Er+12]=bt,this.float32[Er+13]=Mt,this.float32[Er+14]=Kt,this.uint16[Rt+30]=Vt,this.uint16[Rt+31]=qt,t}}D.prototype.bytesPerElement=64,lr("StructArrayLayout8i15ui1ul2f2ui64",D);class N extends $n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const n=this.length;return this.resize(n+1),this.emplace(n,t)}emplace(t,n){return this.float32[1*t+0]=n,t}}N.prototype.bytesPerElement=4,lr("StructArrayLayout1f4",N);class G extends $n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,n,s){const f=this.length;return this.resize(f+1),this.emplace(f,t,n,s)}emplace(t,n,s,f){const v=3*t;return this.uint16[6*t+0]=n,this.float32[v+1]=s,this.float32[v+2]=f,t}}G.prototype.bytesPerElement=12,lr("StructArrayLayout1ui2f12",G);class Z extends $n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,n,s){const f=this.length;return this.resize(f+1),this.emplace(f,t,n,s)}emplace(t,n,s,f){const v=4*t;return this.uint32[2*t+0]=n,this.uint16[v+2]=s,this.uint16[v+3]=f,t}}Z.prototype.bytesPerElement=8,lr("StructArrayLayout1ul2ui8",Z);class X extends $n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,n){const s=this.length;return this.resize(s+1),this.emplace(s,t,n)}emplace(t,n,s){const f=2*t;return this.uint16[f+0]=n,this.uint16[f+1]=s,t}}X.prototype.bytesPerElement=4,lr("StructArrayLayout2ui4",X);class ne extends $n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const n=this.length;return this.resize(n+1),this.emplace(n,t)}emplace(t,n){return this.uint16[1*t+0]=n,t}}ne.prototype.bytesPerElement=2,lr("StructArrayLayout1ui2",ne);class be extends $n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,n,s,f){const v=this.length;return this.resize(v+1),this.emplace(v,t,n,s,f)}emplace(t,n,s,f,v){const b=4*t;return this.float32[b+0]=n,this.float32[b+1]=s,this.float32[b+2]=f,this.float32[b+3]=v,t}}be.prototype.bytesPerElement=16,lr("StructArrayLayout4f16",be);class _e extends oa{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new we(this.anchorPointX,this.anchorPointY)}}_e.prototype.size=20;class Se extends a{get(t){return new _e(this,t)}}lr("CollisionBoxArray",Se);class ke extends oa{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(t){this._structArray.uint8[this._pos1+37]=t}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(t){this._structArray.uint8[this._pos1+38]=t}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(t){this._structArray.uint32[this._pos4+10]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}ke.prototype.size=48;class Le extends A{get(t){return new ke(this,t)}}lr("PlacedSymbolArray",Le);class Me extends oa{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(t){this._structArray.uint32[this._pos4+12]=t}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Me.prototype.size=64;class De extends D{get(t){return new Me(this,t)}}lr("SymbolInstanceArray",De);class Ne extends N{getoffsetX(t){return this.float32[1*t+0]}}lr("GlyphOffsetArray",Ne);class je extends Ta{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}lr("SymbolLineVertexArray",je);class at extends oa{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}at.prototype.size=12;class It extends G{get(t){return new at(this,t)}}lr("TextAnchorOffsetArray",It);class Ye extends oa{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Ye.prototype.size=8;class ht extends Z{get(t){return new Ye(this,t)}}lr("FeatureIndexArray",ht);class Ct extends Ru{}class Jt extends Ru{}class er extends Ru{}class Ft extends Wc{}class vr extends Kh{}class Zr extends sa{}class En extends aa{}class pi extends g{}class ri extends e{}class Mi extends r{}class ki extends d{}class In extends w{}class Cn extends E{}class Hi extends X{}const vo=si([{name:"a_pos",components:2,type:"Int16"}],4),{members:ao}=vo;class An{constructor(t=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=t}prepareSegment(t,n,s,f){const v=this.segments[this.segments.length-1];return t>An.MAX_VERTEX_ARRAY_LENGTH&&$r(`Max vertices per segment is ${An.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${An.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!v||v.vertexLength+t>An.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==f?this.createNewSegment(n,s,f):v}createNewSegment(t,n,s){const f={vertexOffset:t.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0,vaos:{}};return s!==void 0&&(f.sortKey=s),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(f),f}getOrCreateLatestSegment(t,n,s){return this.prepareSegment(0,t,n,s)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const t of this.segments)for(const n in t.vaos)t.vaos[n].destroy()}static simpleSegment(t,n,s,f){return new An([{vertexOffset:t,primitiveOffset:n,vertexLength:s,primitiveLength:f,vaos:{},sortKey:0}])}}function _l(i,t){return 256*(i=At(Math.floor(i),0,255))+At(Math.floor(t),0,255)}An.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,lr("SegmentVector",An);const la=si([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Ca,jl,ua,iu={exports:{}},$s={exports:{}},js={exports:{}},Ul=function(){if(ua)return iu.exports;ua=1;var i=(Ca||(Ca=1,$s.exports=function(n,s){var f,v,b,S,k,R,F,j;for(v=n.length-(f=3&n.length),b=s,k=3432918353,R=461845907,j=0;j<v;)F=255&n.charCodeAt(j)|(255&n.charCodeAt(++j))<<8|(255&n.charCodeAt(++j))<<16|(255&n.charCodeAt(++j))<<24,++j,b=27492+(65535&(S=5*(65535&(b=(b^=F=(65535&(F=(F=(65535&F)*k+(((F>>>16)*k&65535)<<16)&4294967295)<<15|F>>>17))*R+(((F>>>16)*R&65535)<<16)&4294967295)<<13|b>>>19))+((5*(b>>>16)&65535)<<16)&4294967295))+((58964+(S>>>16)&65535)<<16);switch(F=0,f){case 3:F^=(255&n.charCodeAt(j+2))<<16;case 2:F^=(255&n.charCodeAt(j+1))<<8;case 1:b^=F=(65535&(F=(F=(65535&(F^=255&n.charCodeAt(j)))*k+(((F>>>16)*k&65535)<<16)&4294967295)<<15|F>>>17))*R+(((F>>>16)*R&65535)<<16)&4294967295}return b^=n.length,b=2246822507*(65535&(b^=b>>>16))+((2246822507*(b>>>16)&65535)<<16)&4294967295,b=3266489909*(65535&(b^=b>>>13))+((3266489909*(b>>>16)&65535)<<16)&4294967295,(b^=b>>>16)>>>0}),$s.exports),t=(jl||(jl=1,js.exports=function(n,s){for(var f,v=n.length,b=s^v,S=0;v>=4;)f=1540483477*(65535&(f=255&n.charCodeAt(S)|(255&n.charCodeAt(++S))<<8|(255&n.charCodeAt(++S))<<16|(255&n.charCodeAt(++S))<<24))+((1540483477*(f>>>16)&65535)<<16),b=1540483477*(65535&b)+((1540483477*(b>>>16)&65535)<<16)^(f=1540483477*(65535&(f^=f>>>24))+((1540483477*(f>>>16)&65535)<<16)),v-=4,++S;switch(v){case 3:b^=(255&n.charCodeAt(S+2))<<16;case 2:b^=(255&n.charCodeAt(S+1))<<8;case 1:b=1540483477*(65535&(b^=255&n.charCodeAt(S)))+((1540483477*(b>>>16)&65535)<<16)}return b=1540483477*(65535&(b^=b>>>13))+((1540483477*(b>>>16)&65535)<<16),(b^=b>>>15)>>>0}),js.exports);return iu.exports=i,iu.exports.murmur3=i,iu.exports.murmur2=t,iu.exports}(),Pa=J(Ul);class ou{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,n,s,f){this.ids.push(lo(t)),this.positions.push(n,s,f)}getPositions(t){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const n=lo(t);let s=0,f=this.ids.length-1;for(;s<f;){const b=s+f>>1;this.ids[b]>=n?f=b:s=b+1}const v=[];for(;this.ids[s]===n;)v.push({index:this.positions[3*s],start:this.positions[3*s+1],end:this.positions[3*s+2]}),s++;return v}static serialize(t,n){const s=new Float64Array(t.ids),f=new Uint32Array(t.positions);return uo(s,f,0,s.length-1),n&&n.push(s.buffer,f.buffer),{ids:s,positions:f}}static deserialize(t){const n=new ou;return n.ids=t.ids,n.positions=t.positions,n.indexed=!0,n}}function lo(i){const t=+i;return!isNaN(t)&&t<=Number.MAX_SAFE_INTEGER?t:Pa(String(i))}function uo(i,t,n,s){for(;n<s;){const f=i[n+s>>1];let v=n-1,b=s+1;for(;;){do v++;while(i[v]<f);do b--;while(i[b]>f);if(v>=b)break;gs(i,v,b),gs(t,3*v,3*b),gs(t,3*v+1,3*b+1),gs(t,3*v+2,3*b+2)}b-n<s-b?(uo(i,t,n,b),n=b+1):(uo(i,t,b+1,s),s=b)}}function gs(i,t,n){const s=i[t];i[t]=i[n],i[n]=s}lr("FeaturePositionMap",ou);class xi{constructor(t,n){this.gl=t.gl,this.location=n}}class Xh extends xi{constructor(t,n){super(t,n),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}class zd extends xi{constructor(t,n){super(t,n),this.current=[0,0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}class Yh extends xi{constructor(t,n){super(t,n),this.current=Jr.transparent}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}const Us=new Float32Array(16);function Ea(i){return[_l(255*i.r,255*i.g),_l(255*i.b,255*i.a)]}class zu{constructor(t,n,s){this.value=t,this.uniformNames=n.map(f=>`u_${f}`),this.type=s}setUniform(t,n,s){t.set(s.constantOr(this.value))}getBinding(t,n,s){return this.type==="color"?new Yh(t,n):new Xh(t,n)}}class Ha{constructor(t,n){this.uniformNames=n.map(s=>`u_${s}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,n){this.pixelRatioFrom=n.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=n.tlbr,this.patternTo=t.tlbr}setUniform(t,n,s,f){const v=f==="u_pattern_to"?this.patternTo:f==="u_pattern_from"?this.patternFrom:f==="u_pixel_ratio_to"?this.pixelRatioTo:f==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&t.set(v)}getBinding(t,n,s){return s.substr(0,9)==="u_pattern"?new zd(t,n):new Xh(t,n)}}class Ia{constructor(t,n,s,f){this.expression=t,this.type=s,this.maxValue=0,this.paintVertexAttributes=n.map(v=>({name:`a_${v}`,type:"Float32",components:s==="color"?2:1,offset:0})),this.paintVertexArray=new f}populatePaintArray(t,n,s,f,v){const b=this.paintVertexArray.length,S=this.expression.evaluate(new oi(0),n,{},f,[],v);this.paintVertexArray.resize(t),this._setPaintValue(b,t,S)}updatePaintArray(t,n,s,f){const v=this.expression.evaluate({zoom:0},s,f);this._setPaintValue(t,n,v)}_setPaintValue(t,n,s){if(this.type==="color"){const f=Ea(s);for(let v=t;v<n;v++)this.paintVertexArray.emplace(v,f[0],f[1])}else{for(let f=t;f<n;f++)this.paintVertexArray.emplace(f,s);this.maxValue=Math.max(this.maxValue,Math.abs(s))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Yo{constructor(t,n,s,f,v,b){this.expression=t,this.uniformNames=n.map(S=>`u_${S}_t`),this.type=s,this.useIntegerZoom=f,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=n.map(S=>({name:`a_${S}`,type:"Float32",components:s==="color"?4:2,offset:0})),this.paintVertexArray=new b}populatePaintArray(t,n,s,f,v){const b=this.expression.evaluate(new oi(this.zoom),n,{},f,[],v),S=this.expression.evaluate(new oi(this.zoom+1),n,{},f,[],v),k=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(k,t,b,S)}updatePaintArray(t,n,s,f){const v=this.expression.evaluate({zoom:this.zoom},s,f),b=this.expression.evaluate({zoom:this.zoom+1},s,f);this._setPaintValue(t,n,v,b)}_setPaintValue(t,n,s,f){if(this.type==="color"){const v=Ea(s),b=Ea(f);for(let S=t;S<n;S++)this.paintVertexArray.emplace(S,v[0],v[1],b[0],b[1])}else{for(let v=t;v<n;v++)this.paintVertexArray.emplace(v,s,f);this.maxValue=Math.max(this.maxValue,Math.abs(s),Math.abs(f))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,n){const s=this.useIntegerZoom?Math.floor(n.zoom):n.zoom,f=At(this.expression.interpolationFactor(s,this.zoom,this.zoom+1),0,1);t.set(f)}getBinding(t,n,s){return new Xh(t,n)}}class xo{constructor(t,n,s,f,v,b){this.expression=t,this.type=n,this.useIntegerZoom=s,this.zoom=f,this.layerId=b,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(t,n,s){const f=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(f,t,n.patterns&&n.patterns[this.layerId],s)}updatePaintArray(t,n,s,f,v){this._setPaintValues(t,n,s.patterns&&s.patterns[this.layerId],v)}_setPaintValues(t,n,s,f){if(!f||!s)return;const{min:v,mid:b,max:S}=s,k=f[v],R=f[b],F=f[S];if(k&&R&&F)for(let j=t;j<n;j++)this.zoomInPaintVertexArray.emplace(j,R.tl[0],R.tl[1],R.br[0],R.br[1],k.tl[0],k.tl[1],k.br[0],k.br[1],R.pixelRatio,k.pixelRatio),this.zoomOutPaintVertexArray.emplace(j,R.tl[0],R.tl[1],R.br[0],R.br[1],F.tl[0],F.tl[1],F.br[0],F.br[1],R.pixelRatio,F.pixelRatio)}upload(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,la.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,la.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class cc{constructor(t,n,s){this.binders={},this._buffers=[];const f=[];for(const v in t.paint._values){if(!s(v))continue;const b=t.paint.get(v);if(!(b instanceof ms&&zl(b.property.specification)))continue;const S=_h(v,t.type),k=b.value,R=b.property.specification.type,F=b.property.useIntegerZoom,j=b.property.specification["property-type"],W=j==="cross-faded"||j==="cross-faded-data-driven";if(k.kind==="constant")this.binders[v]=W?new Ha(k.value,S):new zu(k.value,S,R),f.push(`/u_${v}`);else if(k.kind==="source"||W){const K=Hc(v,R,"source");this.binders[v]=W?new xo(k,R,F,n,K,t.id):new Ia(k,S,R,K),f.push(`/a_${v}`)}else{const K=Hc(v,R,"composite");this.binders[v]=new Yo(k,S,R,F,n,K),f.push(`/z_${v}`)}}this.cacheKey=f.sort().join("")}getMaxValue(t){const n=this.binders[t];return n instanceof Ia||n instanceof Yo?n.maxValue:0}populatePaintArrays(t,n,s,f,v){for(const b in this.binders){const S=this.binders[b];(S instanceof Ia||S instanceof Yo||S instanceof xo)&&S.populatePaintArray(t,n,s,f,v)}}setConstantPatternPositions(t,n){for(const s in this.binders){const f=this.binders[s];f instanceof Ha&&f.setConstantPatternPositions(t,n)}}updatePaintArrays(t,n,s,f,v){let b=!1;for(const S in t){const k=n.getPositions(S);for(const R of k){const F=s.feature(R.index);for(const j in this.binders){const W=this.binders[j];if((W instanceof Ia||W instanceof Yo||W instanceof xo)&&W.expression.isStateDependent===!0){const K=f.paint.get(j);W.expression=K.value,W.updatePaintArray(R.start,R.end,F,t[S],v),b=!0}}}}return b}defines(){const t=[];for(const n in this.binders){const s=this.binders[n];(s instanceof zu||s instanceof Ha)&&t.push(...s.uniformNames.map(f=>`#define HAS_UNIFORM_${f}`))}return t}getBinderAttributes(){const t=[];for(const n in this.binders){const s=this.binders[n];if(s instanceof Ia||s instanceof Yo)for(let f=0;f<s.paintVertexAttributes.length;f++)t.push(s.paintVertexAttributes[f].name);else if(s instanceof xo)for(let f=0;f<la.members.length;f++)t.push(la.members[f].name)}return t}getBinderUniforms(){const t=[];for(const n in this.binders){const s=this.binders[n];if(s instanceof zu||s instanceof Ha||s instanceof Yo)for(const f of s.uniformNames)t.push(f)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,n){const s=[];for(const f in this.binders){const v=this.binders[f];if(v instanceof zu||v instanceof Ha||v instanceof Yo){for(const b of v.uniformNames)if(n[b]){const S=v.getBinding(t,n[b],b);s.push({name:b,property:f,binding:S})}}}return s}setUniforms(t,n,s,f){for(const{name:v,property:b,binding:S}of n)this.binders[b].setUniform(S,f,s.get(b),v)}updatePaintBuffers(t){this._buffers=[];for(const n in this.binders){const s=this.binders[n];if(t&&s instanceof xo){const f=t.fromScale===2?s.zoomInPaintVertexBuffer:s.zoomOutPaintVertexBuffer;f&&this._buffers.push(f)}else(s instanceof Ia||s instanceof Yo)&&s.paintVertexBuffer&&this._buffers.push(s.paintVertexBuffer)}}upload(t){for(const n in this.binders){const s=this.binders[n];(s instanceof Ia||s instanceof Yo||s instanceof xo)&&s.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const n=this.binders[t];(n instanceof Ia||n instanceof Yo||n instanceof xo)&&n.destroy()}}}class vl{constructor(t,n,s=()=>!0){this.programConfigurations={};for(const f of t)this.programConfigurations[f.id]=new cc(f,n,s);this.needsUpload=!1,this._featureMap=new ou,this._bufferOffset=0}populatePaintArrays(t,n,s,f,v,b){for(const S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(t,n,f,v,b);n.id!==void 0&&this._featureMap.add(n.id,s,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,n,s,f){for(const v of s)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(t,this._featureMap,n,v,f)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const n in this.programConfigurations)this.programConfigurations[n].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}function _h(i,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[i]||[i.replace(`${t}-`,"").replace(/-/g,"_")]}function Hc(i,t,n){const s={color:{source:sa,composite:be},number:{source:N,composite:sa}},f=function(v){return{"line-pattern":{source:En,composite:En},"fill-pattern":{source:En,composite:En},"fill-extrusion-pattern":{source:En,composite:En}}[v]}(i);return f&&f[n]||s[t][n]}lr("ConstantBinder",zu),lr("CrossFadedConstantBinder",Ha),lr("SourceExpressionBinder",Ia),lr("CrossFadedCompositeBinder",xo),lr("CompositeExpressionBinder",Yo),lr("ProgramConfiguration",cc,{omit:["_buffers"]}),lr("ProgramConfigurationSet",vl);const qc=Math.pow(2,14)-1,ff=-qc-1;function xl(i){const t=xt/i.extent,n=i.loadGeometry();for(let s=0;s<n.length;s++){const f=n[s];for(let v=0;v<f.length;v++){const b=f[v],S=Math.round(b.x*t),k=Math.round(b.y*t);b.x=At(S,ff,qc),b.y=At(k,ff,qc),(S<b.x||S>b.x+1||k<b.y||k>b.y+1)&&$r("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return n}function Lu(i,t){return{type:i.type,id:i.id,properties:i.properties,geometry:t?xl(i):[]}}const vh=-32768;function Tp(i,t,n,s,f){i.emplaceBack(vh+8*t+s,vh+8*n+f)}class xh{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(n=>n.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Jt,this.indexArray=new Cn,this.segments=new An,this.programConfigurations=new vl(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id)}populate(t,n,s){const f=this.layers[0],v=[];let b=null,S=!1,k=f.type==="heatmap";if(f.type==="circle"){const F=f;b=F.layout.get("circle-sort-key"),S=!b.isConstant(),k=k||F.paint.get("circle-pitch-alignment")==="map"}const R=k?n.subdivisionGranularity.circle:1;for(const{feature:F,id:j,index:W,sourceLayerIndex:K}of t){const ee=this.layers[0]._featureFilter.needGeometry,ie=Lu(F,ee);if(!this.layers[0]._featureFilter.filter(new oi(this.zoom),ie,s))continue;const me=S?b.evaluate(ie,{},s):void 0,Ce={id:j,properties:F.properties,type:F.type,sourceLayerIndex:K,index:W,geometry:ee?ie.geometry:xl(F),patterns:{},sortKey:me};v.push(Ce)}S&&v.sort((F,j)=>F.sortKey-j.sortKey);for(const F of v){const{geometry:j,index:W,sourceLayerIndex:K}=F,ee=t[W].feature;this.addFeature(F,j,W,s,R),n.featureIndex.insert(ee,j,W,K,this.index)}}update(t,n,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,n,this.stateDependentLayers,s)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ao),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,n,s,f,v=1){let b;switch(v){case 1:b=[0,7];break;case 3:b=[0,2,5,7];break;case 5:b=[0,1,3,4,6,7];break;case 7:b=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${v}; valid values are 1, 3, 5, 7.`)}const S=b.length;for(const k of n)for(const R of k){const F=R.x,j=R.y;if(F<0||F>=xt||j<0||j>=xt)continue;const W=this.segments.prepareSegment(S*S,this.layoutVertexArray,this.indexArray,t.sortKey),K=W.vertexLength;for(let ee=0;ee<S;ee++)for(let ie=0;ie<S;ie++)Tp(this.layoutVertexArray,F,j,b[ie],b[ee]);for(let ee=0;ee<S-1;ee++)for(let ie=0;ie<S-1;ie++){const me=K+ee*S+ie,Ce=K+(ee+1)*S+ie;this.indexArray.emplaceBack(me,Ce+1,me+1),this.indexArray.emplaceBack(me,Ce,Ce+1)}W.vertexLength+=S*S,W.primitiveLength+=(S-1)*(S-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,s,{},f)}}function Ld(i,t){for(let n=0;n<i.length;n++)if(ca(t,i[n]))return!0;for(let n=0;n<t.length;n++)if(ca(i,t[n]))return!0;return!!Qh(i,t)}function Dd(i,t,n){return!!ca(i,t)||!!Qo(t,i,n)}function Gf(i,t){if(i.length===1)return pf(t,i[0]);for(let n=0;n<t.length;n++){const s=t[n];for(let f=0;f<s.length;f++)if(ca(i,s[f]))return!0}for(let n=0;n<i.length;n++)if(pf(t,i[n]))return!0;for(let n=0;n<t.length;n++)if(Qh(i,t[n]))return!0;return!1}function Wf(i,t,n){if(i.length>1){if(Qh(i,t))return!0;for(let s=0;s<t.length;s++)if(Qo(t[s],i,n))return!0}for(let s=0;s<i.length;s++)if(Qo(i[s],t,n))return!0;return!1}function Qh(i,t){if(i.length===0||t.length===0)return!1;for(let n=0;n<i.length-1;n++){const s=i[n],f=i[n+1];for(let v=0;v<t.length-1;v++)if(Ma(s,f,t[v],t[v+1]))return!0}return!1}function Ma(i,t,n,s){return br(i,n,s)!==br(t,n,s)&&br(i,t,n)!==br(i,t,s)}function Qo(i,t,n){const s=n*n;if(t.length===1)return i.distSqr(t[0])<s;for(let f=1;f<t.length;f++)if(Hf(i,t[f-1],t[f])<s)return!0;return!1}function Hf(i,t,n){const s=t.distSqr(n);if(s===0)return i.distSqr(t);const f=((i.x-t.x)*(n.x-t.x)+(i.y-t.y)*(n.y-t.y))/s;return i.distSqr(f<0?t:f>1?n:n.sub(t)._mult(f)._add(t))}function pf(i,t){for(let n=0;n<i.length;n++)if(ca(i[n],t))return!0;return!1}function ca(i,t){let n=!1;for(let s=0,f=i.length-1;s<i.length;f=s++){const v=i[s],b=i[f];v.y>t.y!=b.y>t.y&&t.x<(b.x-v.x)*(t.y-v.y)/(b.y-v.y)+v.x&&(n=!n)}return n}function qf(i,t,n){const s=n[0],f=n[2];if(i.x<s.x&&t.x<s.x||i.x>f.x&&t.x>f.x||i.y<s.y&&t.y<s.y||i.y>f.y&&t.y>f.y)return!1;const v=br(i,t,n[0]);return v!==br(i,t,n[1])||v!==br(i,t,n[2])||v!==br(i,t,n[3])}function bh(i,t,n){const s=t.paint.get(i).value;return s.kind==="constant"?s.value:n.programConfigurations.get(t.id).getMaxValue(i)}function Jh(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function ed(i,t,n,s,f){if(!t[0]&&!t[1])return i;const v=we.convert(t)._mult(f);n==="viewport"&&v._rotate(-s);const b=[];for(let S=0;S<i.length;S++)b.push(i[S].sub(v));return b}let mf,Kf;lr("CircleBucket",xh,{omit:["layers"]});var Du={get paint(){return Kf=Kf||new Li({"circle-radius":new Ur(fe.paint_circle["circle-radius"]),"circle-color":new Ur(fe.paint_circle["circle-color"]),"circle-blur":new Ur(fe.paint_circle["circle-blur"]),"circle-opacity":new Ur(fe.paint_circle["circle-opacity"]),"circle-translate":new dr(fe.paint_circle["circle-translate"]),"circle-translate-anchor":new dr(fe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new dr(fe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new dr(fe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ur(fe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ur(fe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ur(fe.paint_circle["circle-stroke-opacity"])})},get layout(){return mf=mf||new Li({"circle-sort-key":new Ur(fe.layout_circle["circle-sort-key"])})}};class Od extends Ns{constructor(t){super(t,Du)}createBucket(t){return new xh(t)}queryRadius(t){const n=t;return bh("circle-radius",this,n)+bh("circle-stroke-width",this,n)+Jh(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:t,feature:n,featureState:s,geometry:f,transform:v,pixelsToTileUnits:b,unwrappedTileID:S,getElevation:k}){const R=ed(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-v.bearingInRadians,b),F=this.paint.get("circle-radius").evaluate(n,s)+this.paint.get("circle-stroke-width").evaluate(n,s),j=this.paint.get("circle-pitch-alignment")==="map",W=j?R:function(ee,ie,me,Ce){return ee.map(Ve=>td(Ve,ie,me,Ce))}(R,v,S,k),K=j?F*b:F;for(const ee of f)for(const ie of ee){const me=j?ie:td(ie,v,S,k);let Ce=K;const Ve=v.projectTileCoordinates(ie.x,ie.y,S,k).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ce*=Ve/v.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ce*=v.cameraToCenterDistance/Ve),Dd(W,me,Ce))return!0}return!1}}function td(i,t,n,s){const f=t.projectTileCoordinates(i.x,i.y,n,s).point;return new we((.5*f.x+.5)*t.width,(.5*-f.y+.5)*t.height)}class Fd extends xh{}let wh;lr("HeatmapBucket",Fd,{omit:["layers"]});var hc={get paint(){return wh=wh||new Li({"heatmap-radius":new Ur(fe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ur(fe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new dr(fe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new $l(fe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new dr(fe.paint_heatmap["heatmap-opacity"])})}};function an(i,{width:t,height:n},s,f){if(f){if(f instanceof Uint8ClampedArray)f=new Uint8Array(f.buffer);else if(f.length!==t*n*s)throw new RangeError(`mismatched image size. expected: ${f.length} but got: ${t*n*s}`)}else f=new Uint8Array(t*n*s);return i.width=t,i.height=n,i.data=f,i}function rd(i,{width:t,height:n},s){if(t===i.width&&n===i.height)return;const f=an({},{width:t,height:n},s);Sh(i,f,{x:0,y:0},{x:0,y:0},{width:Math.min(i.width,t),height:Math.min(i.height,n)},s),i.width=t,i.height=n,i.data=f.data}function Sh(i,t,n,s,f,v){if(f.width===0||f.height===0)return t;if(f.width>i.width||f.height>i.height||n.x>i.width-f.width||n.y>i.height-f.height)throw new RangeError("out of range source coordinates for image copy");if(f.width>t.width||f.height>t.height||s.x>t.width-f.width||s.y>t.height-f.height)throw new RangeError("out of range destination coordinates for image copy");const b=i.data,S=t.data;if(b===S)throw new Error("srcData equals dstData, so image is already copied");for(let k=0;k<f.height;k++){const R=((n.y+k)*i.width+n.x)*v,F=((s.y+k)*t.width+s.x)*v;for(let j=0;j<f.width*v;j++)S[F+j]=b[R+j]}return t}class Vl{constructor(t,n){an(this,t,1,n)}resize(t){rd(this,t,1)}clone(){return new Vl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,n,s,f,v){Sh(t,n,s,f,v,1)}}class ha{constructor(t,n){an(this,t,4,n)}resize(t){rd(this,t,4)}replace(t,n){n?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new ha({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,n,s,f,v){Sh(t,n,s,f,v,4)}}function Zl(i){const t={},n=i.resolution||256,s=i.clips?i.clips.length:1,f=i.image||new ha({width:n,height:s});if(Math.log(n)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${n}`);const v=(b,S,k)=>{t[i.evaluationKey]=k;const R=i.expression.evaluate(t);f.data[b+S+0]=Math.floor(255*R.r/R.a),f.data[b+S+1]=Math.floor(255*R.g/R.a),f.data[b+S+2]=Math.floor(255*R.b/R.a),f.data[b+S+3]=Math.floor(255*R.a)};if(i.clips)for(let b=0,S=0;b<s;++b,S+=4*n)for(let k=0,R=0;k<n;k++,R+=4){const F=k/(n-1),{start:j,end:W}=i.clips[b];v(S,R,j*(1-F)+W*F)}else for(let b=0,S=0;b<n;b++,S+=4)v(0,S,b/(n-1));return f}lr("AlphaImage",Vl),lr("RGBAImage",ha);const gf="big-fb";class Vs extends Ns{createBucket(t){return new Fd(t)}constructor(t){super(t,hc),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){t==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Zl({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(gf)&&this.heatmapFbos.delete(gf)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let yf;var Cp={get paint(){return yf=yf||new Li({"hillshade-illumination-direction":new dr(fe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new dr(fe.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new dr(fe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new dr(fe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new dr(fe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new dr(fe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new dr(fe.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new dr(fe.paint_hillshade["hillshade-method"])})}};class Xf extends Ns{constructor(t){super(t,Cp),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let t=this.paint.get("hillshade-illumination-direction").values,n=this.paint.get("hillshade-illumination-altitude").values,s=this.paint.get("hillshade-highlight-color").values,f=this.paint.get("hillshade-shadow-color").values;const v=Math.max(t.length,n.length,s.length,f.length);t=t.concat(Array(v-t.length).fill(t.at(-1))),n=n.concat(Array(v-n.length).fill(n.at(-1))),s=s.concat(Array(v-s.length).fill(s.at(-1))),f=f.concat(Array(v-f.length).fill(f.at(-1)));const b=n.map(Un);return{directionRadians:t.map(Un),altitudeRadians:b,shadowColor:f,highlightColor:s}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const Bd=si([{name:"a_pos",components:2,type:"Int16"}],4),{members:Zs}=Bd;function Yf(i,t,n){const s=n.patternDependencies;let f=!1;for(const v of t){const b=v.paint.get(`${i}-pattern`);b.isConstant()||(f=!0);const S=b.constantOr(null);S&&(f=!0,s[S.to]=!0,s[S.from]=!0)}return f}function Qf(i,t,n,s,f){const v=f.patternDependencies;for(const b of t){const S=b.paint.get(`${i}-pattern`).value;if(S.kind!=="constant"){let k=S.evaluate({zoom:s-1},n,{},f.availableImages),R=S.evaluate({zoom:s},n,{},f.availableImages),F=S.evaluate({zoom:s+1},n,{},f.availableImages);k=k&&k.name?k.name:k,R=R&&R.name?R.name:R,F=F&&F.name?F.name:F,v[k]=!0,v[R]=!0,v[F]=!0,n.patterns[b.id]={min:k,mid:R,max:F}}}return n}function Nd(i,t,n,s,f){let v;if(f===function(b,S,k,R){let F=0;for(let j=S,W=k-R;j<k;j+=R)F+=(b[W]-b[j])*(b[j+1]+b[W+1]),W=j;return F}(i,t,n,s)>0)for(let b=t;b<n;b+=s)v=_f(b/s|0,i[b],i[b+1],v);else for(let b=n-s;b>=t;b-=s)v=_f(b/s|0,i[b],i[b+1],v);return v&&co(v,v.next)&&(ka(v),v=v.next),v}function bi(i,t){if(!i)return i;t||(t=i);let n,s=i;do if(n=!1,s.steiner||!co(s,s.next)&&$i(s.prev,s,s.next)!==0)s=s.next;else{if(ka(s),s=t=s.prev,s===s.next)break;n=!0}while(n||s!==t);return t}function Jo(i,t,n,s,f,v,b){if(!i)return;!b&&v&&function(k,R,F,j){let W=k;do W.z===0&&(W.z=id(W.x,W.y,R,F,j)),W.prevZ=W.prev,W.nextZ=W.next,W=W.next;while(W!==k);W.prevZ.nextZ=null,W.prevZ=null,function(K){let ee,ie=1;do{let me,Ce=K;K=null;let Ve=null;for(ee=0;Ce;){ee++;let Re=Ce,H=0;for(let Fe=0;Fe<ie&&(H++,Re=Re.nextZ,Re);Fe++);let pe=ie;for(;H>0||pe>0&&Re;)H!==0&&(pe===0||!Re||Ce.z<=Re.z)?(me=Ce,Ce=Ce.nextZ,H--):(me=Re,Re=Re.nextZ,pe--),Ve?Ve.nextZ=me:K=me,me.prevZ=Ve,Ve=me;Ce=Re}Ve.nextZ=null,ie*=2}while(ee>1)}(W)}(i,s,f,v);let S=i;for(;i.prev!==i.next;){const k=i.prev,R=i.next;if(v?nd(i,s,f,v):zr(i))t.push(k.i,i.i,R.i),ka(i),i=R.next,S=R.next;else if((i=R)===S){b?b===1?Jo(i=$d(bi(i),t),t,n,s,f,v,2):b===2&&Pp(i,t,n,s,f,v):Jo(bi(i),t,n,s,f,v,1);break}}}function zr(i){const t=i.prev,n=i,s=i.next;if($i(t,n,s)>=0)return!1;const f=t.x,v=n.x,b=s.x,S=t.y,k=n.y,R=s.y,F=Math.min(f,v,b),j=Math.min(S,k,R),W=Math.max(f,v,b),K=Math.max(S,k,R);let ee=s.next;for(;ee!==t;){if(ee.x>=F&&ee.x<=W&&ee.y>=j&&ee.y<=K&&od(f,S,v,k,b,R,ee.x,ee.y)&&$i(ee.prev,ee,ee.next)>=0)return!1;ee=ee.next}return!0}function nd(i,t,n,s){const f=i.prev,v=i,b=i.next;if($i(f,v,b)>=0)return!1;const S=f.x,k=v.x,R=b.x,F=f.y,j=v.y,W=b.y,K=Math.min(S,k,R),ee=Math.min(F,j,W),ie=Math.max(S,k,R),me=Math.max(F,j,W),Ce=id(K,ee,t,n,s),Ve=id(ie,me,t,n,s);let Re=i.prevZ,H=i.nextZ;for(;Re&&Re.z>=Ce&&H&&H.z<=Ve;){if(Re.x>=K&&Re.x<=ie&&Re.y>=ee&&Re.y<=me&&Re!==f&&Re!==b&&od(S,F,k,j,R,W,Re.x,Re.y)&&$i(Re.prev,Re,Re.next)>=0||(Re=Re.prevZ,H.x>=K&&H.x<=ie&&H.y>=ee&&H.y<=me&&H!==f&&H!==b&&od(S,F,k,j,R,W,H.x,H.y)&&$i(H.prev,H,H.next)>=0))return!1;H=H.nextZ}for(;Re&&Re.z>=Ce;){if(Re.x>=K&&Re.x<=ie&&Re.y>=ee&&Re.y<=me&&Re!==f&&Re!==b&&od(S,F,k,j,R,W,Re.x,Re.y)&&$i(Re.prev,Re,Re.next)>=0)return!1;Re=Re.prevZ}for(;H&&H.z<=Ve;){if(H.x>=K&&H.x<=ie&&H.y>=ee&&H.y<=me&&H!==f&&H!==b&&od(S,F,k,j,R,W,H.x,H.y)&&$i(H.prev,H,H.next)>=0)return!1;H=H.nextZ}return!0}function $d(i,t){let n=i;do{const s=n.prev,f=n.next.next;!co(s,f)&&Gl(s,n,n.next,f)&&Ou(s,f)&&Ou(f,s)&&(t.push(s.i,n.i,f.i),ka(n),ka(n.next),n=i=f),n=n.next}while(n!==i);return bi(n)}function Pp(i,t,n,s,f,v){let b=i;do{let S=b.next.next;for(;S!==b.prev;){if(b.i!==S.i&&ep(b,S)){let k=qa(b,S);return b=bi(b,b.next),k=bi(k,k.next),Jo(b,t,n,s,f,v,0),void Jo(k,t,n,s,f,v,0)}S=S.next}b=b.next}while(b!==i)}function cm(i,t){let n=i.x-t.x;return n===0&&(n=i.y-t.y,n===0)&&(n=(i.next.y-i.y)/(i.next.x-i.x)-(t.next.y-t.y)/(t.next.x-t.x)),n}function dc(i,t){const n=function(f,v){let b=v;const S=f.x,k=f.y;let R,F=-1/0;if(co(f,b))return b;do{if(co(f,b.next))return b.next;if(k<=b.y&&k>=b.next.y&&b.next.y!==b.y){const ie=b.x+(k-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if(ie<=S&&ie>F&&(F=ie,R=b.x<b.next.x?b:b.next,ie===S))return R}b=b.next}while(b!==v);if(!R)return null;const j=R,W=R.x,K=R.y;let ee=1/0;b=R;do{if(S>=b.x&&b.x>=W&&S!==b.x&&Jf(k<K?S:F,k,W,K,k<K?F:S,k,b.x,b.y)){const ie=Math.abs(k-b.y)/(S-b.x);Ou(b,f)&&(ie<ee||ie===ee&&(b.x>R.x||b.x===R.x&&jd(R,b)))&&(R=b,ee=ie)}b=b.next}while(b!==j);return R}(i,t);if(!n)return t;const s=qa(n,i);return bi(s,s.next),bi(n,n.next)}function jd(i,t){return $i(i.prev,i,t.prev)<0&&$i(t.next,i,i.next)<0}function id(i,t,n,s,f){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-n)*f|0)|i<<8))|i<<4))|i<<2))|i<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-s)*f|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Ep(i){let t=i,n=i;do(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next;while(t!==i);return n}function Jf(i,t,n,s,f,v,b,S){return(f-b)*(t-S)>=(i-b)*(v-S)&&(i-b)*(s-S)>=(n-b)*(t-S)&&(n-b)*(v-S)>=(f-b)*(s-S)}function od(i,t,n,s,f,v,b,S){return!(i===b&&t===S)&&Jf(i,t,n,s,f,v,b,S)}function ep(i,t){return i.next.i!==t.i&&i.prev.i!==t.i&&!function(n,s){let f=n;do{if(f.i!==n.i&&f.next.i!==n.i&&f.i!==s.i&&f.next.i!==s.i&&Gl(f,f.next,n,s))return!0;f=f.next}while(f!==n);return!1}(i,t)&&(Ou(i,t)&&Ou(t,i)&&function(n,s){let f=n,v=!1;const b=(n.x+s.x)/2,S=(n.y+s.y)/2;do f.y>S!=f.next.y>S&&f.next.y!==f.y&&b<(f.next.x-f.x)*(S-f.y)/(f.next.y-f.y)+f.x&&(v=!v),f=f.next;while(f!==n);return v}(i,t)&&($i(i.prev,i,t.prev)||$i(i,t.prev,t))||co(i,t)&&$i(i.prev,i,i.next)>0&&$i(t.prev,t,t.next)>0)}function $i(i,t,n){return(t.y-i.y)*(n.x-t.x)-(t.x-i.x)*(n.y-t.y)}function co(i,t){return i.x===t.x&&i.y===t.y}function Gl(i,t,n,s){const f=sd($i(i,t,n)),v=sd($i(i,t,s)),b=sd($i(n,s,i)),S=sd($i(n,s,t));return f!==v&&b!==S||!(f!==0||!bl(i,n,t))||!(v!==0||!bl(i,s,t))||!(b!==0||!bl(n,i,s))||!(S!==0||!bl(n,t,s))}function bl(i,t,n){return t.x<=Math.max(i.x,n.x)&&t.x>=Math.min(i.x,n.x)&&t.y<=Math.max(i.y,n.y)&&t.y>=Math.min(i.y,n.y)}function sd(i){return i>0?1:i<0?-1:0}function Ou(i,t){return $i(i.prev,i,i.next)<0?$i(i,t,i.next)>=0&&$i(i,i.prev,t)>=0:$i(i,t,i.prev)<0||$i(i,i.next,t)<0}function qa(i,t){const n=ad(i.i,i.x,i.y),s=ad(t.i,t.x,t.y),f=i.next,v=t.prev;return i.next=t,t.prev=i,n.next=f,f.prev=n,s.next=n,n.prev=s,v.next=s,s.prev=v,s}function _f(i,t,n,s){const f=ad(i,t,n);return s?(f.next=s.next,f.prev=s,s.next.prev=f,s.next=f):(f.prev=f,f.next=f),f}function ka(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function ad(i,t,n){return{i,x:t,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Kc{constructor(t,n){if(n>t)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=t,this._minGranularity=n}getGranularityForZoomLevel(t){return Math.max(Math.floor(this._baseZoomGranularity/(1<<t)),this._minGranularity,1)}}class Ka{constructor(t){this.fill=t.fill,this.line=t.line,this.tile=t.tile,this.stencil=t.stencil,this.circle=t.circle}}Ka.noSubdivision=new Ka({fill:new Kc(0,0),line:new Kc(0,0),tile:new Kc(0,0),stencil:new Kc(0,0),circle:1}),lr("SubdivisionGranularityExpression",Kc),lr("SubdivisionGranularitySetting",Ka);const wl=-32768,ld=32767;class Ip{constructor(t,n){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=t,this._granularityCellSize=xt/t,this._canonical=n}_getKey(t,n){return(t+=32768)<<16|(n+=32768)<<0}_vertexToIndex(t,n){if(t<-32768||n<-32768||t>32767||n>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const s=0|Math.round(t),f=0|Math.round(n),v=this._getKey(s,f);if(this._vertexDictionary.has(v))return this._vertexDictionary.get(v);const b=this._vertexBuffer.length/2;return this._vertexDictionary.set(v,b),this._vertexBuffer.push(s,f),b}_subdivideTrianglesScanline(t){if(this._granularity<2)return function(f,v){const b=[];for(let S=0;S<v.length;S+=3){const k=v[S],R=v[S+1],F=v[S+2],j=f[2*k],W=f[2*k+1];(f[2*R]-j)*(f[2*F+1]-W)-(f[2*R+1]-W)*(f[2*F]-j)>0?(b.push(k),b.push(F),b.push(R)):(b.push(k),b.push(R),b.push(F))}return b}(this._vertexBuffer,t);const n=[],s=t.length;for(let f=0;f<s;f+=3){const v=[t[f+0],t[f+1],t[f+2]],b=[this._vertexBuffer[2*t[f+0]+0],this._vertexBuffer[2*t[f+0]+1],this._vertexBuffer[2*t[f+1]+0],this._vertexBuffer[2*t[f+1]+1],this._vertexBuffer[2*t[f+2]+0],this._vertexBuffer[2*t[f+2]+1]];let S=1/0,k=1/0,R=-1/0,F=-1/0;for(let ie=0;ie<3;ie++){const me=b[2*ie],Ce=b[2*ie+1];S=Math.min(S,me),R=Math.max(R,me),k=Math.min(k,Ce),F=Math.max(F,Ce)}if(S===R||k===F)continue;const j=Math.floor(S/this._granularityCellSize),W=Math.ceil(R/this._granularityCellSize),K=Math.floor(k/this._granularityCellSize),ee=Math.ceil(F/this._granularityCellSize);if(j!==W||K!==ee)for(let ie=K;ie<ee;ie++){const me=this._scanlineGenerateVertexRingForCellRow(ie,b,v);Wl(this._vertexBuffer,me,n)}else n.push(...v)}return n}_scanlineGenerateVertexRingForCellRow(t,n,s){const f=t*this._granularityCellSize,v=f+this._granularityCellSize,b=[];for(let S=0;S<3;S++){const k=n[2*S],R=n[2*S+1],F=n[2*(S+1)%6],j=n[(2*(S+1)+1)%6],W=n[2*(S+2)%6],K=n[(2*(S+2)+1)%6],ee=F-k,ie=j-R,me=ee===0,Ce=ie===0,Ve=(f-R)/ie,Re=(v-R)/ie,H=Math.min(Ve,Re),pe=Math.max(Ve,Re);if(!Ce&&(H>=1||pe<=0)||Ce&&(R<f||R>v)){j>=f&&j<=v&&b.push(s[(S+1)%3]);continue}!Ce&&H>0&&b.push(this._vertexToIndex(k+ee*H,R+ie*H));const Fe=k+ee*Math.max(H,0),pt=k+ee*Math.min(pe,1);me||this._generateIntraEdgeVertices(b,k,R,F,j,Fe,pt),!Ce&&pe<1&&b.push(this._vertexToIndex(k+ee*pe,R+ie*pe)),(Ce||j>=f&&j<=v)&&b.push(s[(S+1)%3]),!Ce&&(j<=f||j>=v)&&this._generateInterEdgeVertices(b,k,R,F,j,W,K,pt,f,v)}return b}_generateIntraEdgeVertices(t,n,s,f,v,b,S){const k=f-n,R=v-s,F=R===0,j=F?Math.min(n,f):Math.min(b,S),W=F?Math.max(n,f):Math.max(b,S),K=Math.floor(j/this._granularityCellSize)+1,ee=Math.ceil(W/this._granularityCellSize)-1;if(F?n<f:b<S)for(let ie=K;ie<=ee;ie++){const me=ie*this._granularityCellSize;t.push(this._vertexToIndex(me,s+R*(me-n)/k))}else for(let ie=ee;ie>=K;ie--){const me=ie*this._granularityCellSize;t.push(this._vertexToIndex(me,s+R*(me-n)/k))}}_generateInterEdgeVertices(t,n,s,f,v,b,S,k,R,F){const j=v-s,W=b-f,K=S-v,ee=(R-v)/K,ie=(F-v)/K,me=Math.min(ee,ie),Ce=Math.max(ee,ie),Ve=f+W*me;let Re=Math.floor(Math.min(Ve,k)/this._granularityCellSize)+1,H=Math.ceil(Math.max(Ve,k)/this._granularityCellSize)-1,pe=k<Ve;const Fe=K===0;if(Fe&&(S===R||S===F))return;if(Fe||me>=1||Ce<=0){const jt=s-S,bt=b+(n-b)*Math.min((R-S)/jt,(F-S)/jt);Re=Math.floor(Math.min(bt,k)/this._granularityCellSize)+1,H=Math.ceil(Math.max(bt,k)/this._granularityCellSize)-1,pe=k<bt}const pt=j>0?F:R;if(pe)for(let jt=Re;jt<=H;jt++)t.push(this._vertexToIndex(jt*this._granularityCellSize,pt));else for(let jt=H;jt>=Re;jt--)t.push(this._vertexToIndex(jt*this._granularityCellSize,pt))}_generateOutline(t){const n=[];for(const s of t){const f=fc(s,this._granularity,!0),v=this._pointArrayToIndices(f),b=[];for(let S=1;S<v.length;S++)b.push(v[S-1]),b.push(v[S]);n.push(b)}return n}_handlePoles(t){let n=!1,s=!1;this._canonical&&(this._canonical.y===0&&(n=!0),this._canonical.y===(1<<this._canonical.z)-1&&(s=!0)),(n||s)&&this._fillPoles(t,n,s)}_ensureNoPoleVertices(){const t=this._vertexBuffer;for(let n=0;n<t.length;n+=2){const s=t[n+1];s===wl&&(t[n+1]=-32767),s===ld&&(t[n+1]=32766)}}_generatePoleQuad(t,n,s,f,v,b){f>v!=(b===wl)?(t.push(n),t.push(s),t.push(this._vertexToIndex(f,b)),t.push(s),t.push(this._vertexToIndex(v,b)),t.push(this._vertexToIndex(f,b))):(t.push(s),t.push(n),t.push(this._vertexToIndex(f,b)),t.push(this._vertexToIndex(v,b)),t.push(s),t.push(this._vertexToIndex(f,b)))}_fillPoles(t,n,s){const f=this._vertexBuffer,v=xt,b=t.length;for(let S=2;S<b;S+=3){const k=t[S-2],R=t[S-1],F=t[S],j=f[2*k],W=f[2*k+1],K=f[2*R],ee=f[2*R+1],ie=f[2*F],me=f[2*F+1];n&&(W===0&&ee===0&&this._generatePoleQuad(t,k,R,j,K,wl),ee===0&&me===0&&this._generatePoleQuad(t,R,F,K,ie,wl),me===0&&W===0&&this._generatePoleQuad(t,F,k,ie,j,wl)),s&&(W===v&&ee===v&&this._generatePoleQuad(t,k,R,j,K,ld),ee===v&&me===v&&this._generatePoleQuad(t,R,F,K,ie,ld),me===v&&W===v&&this._generatePoleQuad(t,F,k,ie,j,ld))}}_initializeVertices(t){for(let n=0;n<t.length;n+=2)this._vertexToIndex(t[n],t[n+1])}subdividePolygonInternal(t,n){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:s,holeIndices:f}=function(S){const k=[],R=[];for(const F of S)if(F.length!==0){F!==S[0]&&k.push(R.length/2);for(let j=0;j<F.length;j++)R.push(F[j].x),R.push(F[j].y)}return{flattened:R,holeIndices:k}}(t);let v;this._initializeVertices(s);try{const S=function(R,F,j=2){const W=F&&F.length,K=W?F[0]*j:R.length;let ee=Nd(R,0,K,j,!0);const ie=[];if(!ee||ee.next===ee.prev)return ie;let me,Ce,Ve;if(W&&(ee=function(Re,H,pe,Fe){const pt=[];for(let jt=0,bt=H.length;jt<bt;jt++){const Mt=Nd(Re,H[jt]*Fe,jt<bt-1?H[jt+1]*Fe:Re.length,Fe,!1);Mt===Mt.next&&(Mt.steiner=!0),pt.push(Ep(Mt))}pt.sort(cm);for(let jt=0;jt<pt.length;jt++)pe=dc(pt[jt],pe);return pe}(R,F,ee,j)),R.length>80*j){me=1/0,Ce=1/0;let Re=-1/0,H=-1/0;for(let pe=j;pe<K;pe+=j){const Fe=R[pe],pt=R[pe+1];Fe<me&&(me=Fe),pt<Ce&&(Ce=pt),Fe>Re&&(Re=Fe),pt>H&&(H=pt)}Ve=Math.max(Re-me,H-Ce),Ve=Ve!==0?32767/Ve:0}return Jo(ee,ie,j,me,Ce,Ve,0),ie}(s,f),k=this._convertIndices(s,S);v=this._subdivideTrianglesScanline(k)}catch(S){console.error(S)}let b=[];return n&&(b=this._generateOutline(t)),this._ensureNoPoleVertices(),this._handlePoles(v),{verticesFlattened:this._vertexBuffer,indicesTriangles:v,indicesLineList:b}}_convertIndices(t,n){const s=[];for(let f=0;f<n.length;f++)s.push(this._vertexToIndex(t[2*n[f]],t[2*n[f]+1]));return s}_pointArrayToIndices(t){const n=[];for(let s=0;s<t.length;s++){const f=t[s];n.push(this._vertexToIndex(f.x,f.y))}return n}}function Ud(i,t,n,s=!0){return new Ip(n,t).subdividePolygonInternal(i,s)}function fc(i,t,n=!1){if(!i||i.length<1)return[];if(i.length<2)return[];const s=i[0],f=i[i.length-1],v=n&&(s.x!==f.x||s.y!==f.y);if(t<2)return v?[...i,i[0]]:[...i];const b=Math.floor(xt/t),S=[];S.push(new we(i[0].x,i[0].y));const k=i.length,R=v?k:k-1;for(let F=0;F<R;F++){const j=i[F],W=F<k-1?i[F+1]:i[0],K=j.x,ee=j.y,ie=W.x,me=W.y,Ce=K!==ie,Ve=ee!==me;if(!Ce&&!Ve)continue;const Re=ie-K,H=me-ee,pe=Math.abs(Re),Fe=Math.abs(H);let pt=K,jt=ee;for(;;){const Mt=Re>0?(Math.floor(pt/b)+1)*b:(Math.ceil(pt/b)-1)*b,Kt=H>0?(Math.floor(jt/b)+1)*b:(Math.ceil(jt/b)-1)*b,Vt=Math.abs(pt-Mt),qt=Math.abs(jt-Kt),Rt=Math.abs(pt-ie),Er=Math.abs(jt-me),Wr=Ce?Vt/pe:Number.POSITIVE_INFINITY,Gr=Ve?qt/Fe:Number.POSITIVE_INFINITY;if((Rt<=Vt||!Ce)&&(Er<=qt||!Ve))break;if(Wr<Gr&&Ce||!Ve){pt=Mt,jt+=H*Wr;const Rr=new we(pt,Math.round(jt));S[S.length-1].x===Rr.x&&S[S.length-1].y===Rr.y||S.push(Rr)}else{pt+=Re*Gr,jt=Kt;const Rr=new we(Math.round(pt),jt);S[S.length-1].x===Rr.x&&S[S.length-1].y===Rr.y||S.push(Rr)}}const bt=new we(ie,me);S[S.length-1].x===bt.x&&S[S.length-1].y===bt.y||S.push(bt)}return S}function Wl(i,t,n){if(t.length===0)throw new Error("Subdivision vertex ring is empty.");let s=0,f=i[2*t[0]];for(let k=1;k<t.length;k++){const R=i[2*t[k]];R<f&&(f=R,s=k)}const v=t.length;let b=s,S=(b+1)%v;for(;;){const k=b-1>=0?b-1:v-1,R=(S+1)%v,F=i[2*t[k]],j=i[2*t[R]],W=i[2*t[b]],K=i[2*t[b]+1],ee=i[2*t[S]+1];let ie=!1;if(F<j)ie=!0;else if(F>j)ie=!1;else{const me=ee-K,Ce=-(i[2*t[S]]-W),Ve=K<ee?1:-1;((F-W)*me+(i[2*t[k]+1]-K)*Ce)*Ve>((j-W)*me+(i[2*t[R]+1]-K)*Ce)*Ve&&(ie=!0)}if(ie){const me=t[k],Ce=t[b],Ve=t[S];me!==Ce&&me!==Ve&&Ce!==Ve&&n.push(Ve,Ce,me),b--,b<0&&(b=v-1)}else{const me=t[R],Ce=t[b],Ve=t[S];me!==Ce&&me!==Ve&&Ce!==Ve&&n.push(Ve,Ce,me),S++,S>=v&&(S=0)}if(k===R)break}}function Yn(i,t,n,s,f,v,b,S,k){const R=f.length/2,F=b&&S&&k;if(R<An.MAX_VERTEX_ARRAY_LENGTH){const j=t.prepareSegment(R,n,s),W=j.vertexLength;for(let ie=0;ie<v.length;ie+=3)s.emplaceBack(W+v[ie],W+v[ie+1],W+v[ie+2]);let K,ee;j.vertexLength+=R,j.primitiveLength+=v.length/3,F&&(ee=b.prepareSegment(R,n,S),K=ee.vertexLength,ee.vertexLength+=R);for(let ie=0;ie<f.length;ie+=2)i(f[ie],f[ie+1]);if(F)for(let ie=0;ie<k.length;ie++){const me=k[ie];for(let Ce=1;Ce<me.length;Ce+=2)S.emplaceBack(K+me[Ce-1],K+me[Ce]);ee.primitiveLength+=me.length/2}}else(function(j,W,K,ee,ie,me){const Ce=[];for(let Fe=0;Fe<ee.length/2;Fe++)Ce.push(-1);const Ve={count:0};let Re=0,H=j.getOrCreateLatestSegment(W,K),pe=H.vertexLength;for(let Fe=2;Fe<ie.length;Fe+=3){const pt=ie[Fe-2],jt=ie[Fe-1],bt=ie[Fe];let Mt=Ce[pt]<Re,Kt=Ce[jt]<Re,Vt=Ce[bt]<Re;H.vertexLength+((Mt?1:0)+(Kt?1:0)+(Vt?1:0))>An.MAX_VERTEX_ARRAY_LENGTH&&(H=j.createNewSegment(W,K),Re=Ve.count,Mt=!0,Kt=!0,Vt=!0,pe=0);const qt=bo(Ce,ee,me,Ve,pt,Mt,H),Rt=bo(Ce,ee,me,Ve,jt,Kt,H),Er=bo(Ce,ee,me,Ve,bt,Vt,H);K.emplaceBack(pe+qt-Re,pe+Rt-Re,pe+Er-Re),H.primitiveLength++}})(t,n,s,f,v,i),F&&function(j,W,K,ee,ie,me){const Ce=[];for(let Fe=0;Fe<ee.length/2;Fe++)Ce.push(-1);const Ve={count:0};let Re=0,H=j.getOrCreateLatestSegment(W,K),pe=H.vertexLength;for(let Fe=0;Fe<ie.length;Fe++){const pt=ie[Fe];for(let jt=1;jt<ie[Fe].length;jt+=2){const bt=pt[jt-1],Mt=pt[jt];let Kt=Ce[bt]<Re,Vt=Ce[Mt]<Re;H.vertexLength+((Kt?1:0)+(Vt?1:0))>An.MAX_VERTEX_ARRAY_LENGTH&&(H=j.createNewSegment(W,K),Re=Ve.count,Kt=!0,Vt=!0,pe=0);const qt=bo(Ce,ee,me,Ve,bt,Kt,H),Rt=bo(Ce,ee,me,Ve,Mt,Vt,H);K.emplaceBack(pe+qt-Re,pe+Rt-Re),H.primitiveLength++}}}(b,n,S,f,k,i),t.forceNewSegmentOnNextPrepare(),b==null||b.forceNewSegmentOnNextPrepare()}function bo(i,t,n,s,f,v,b){if(v){const S=s.count;return n(t[2*f],t[2*f+1]),i[f]=s.count,s.count++,b.vertexLength++,S}return i[f]}class wo{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(n=>n.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new er,this.indexArray=new Cn,this.indexArray2=new Hi,this.programConfigurations=new vl(t.layers,t.zoom),this.segments=new An,this.segments2=new An,this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id)}populate(t,n,s){this.hasPattern=Yf("fill",this.layers,n);const f=this.layers[0].layout.get("fill-sort-key"),v=!f.isConstant(),b=[];for(const{feature:S,id:k,index:R,sourceLayerIndex:F}of t){const j=this.layers[0]._featureFilter.needGeometry,W=Lu(S,j);if(!this.layers[0]._featureFilter.filter(new oi(this.zoom),W,s))continue;const K=v?f.evaluate(W,{},s,n.availableImages):void 0,ee={id:k,properties:S.properties,type:S.type,sourceLayerIndex:F,index:R,geometry:j?W.geometry:xl(S),patterns:{},sortKey:K};b.push(ee)}v&&b.sort((S,k)=>S.sortKey-k.sortKey);for(const S of b){const{geometry:k,index:R,sourceLayerIndex:F}=S;if(this.hasPattern){const j=Qf("fill",this.layers,S,this.zoom,n);this.patternFeatures.push(j)}else this.addFeature(S,k,R,s,{},n.subdivisionGranularity);n.featureIndex.insert(t[R].feature,k,R,F,this.index)}}update(t,n,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,n,this.stateDependentLayers,s)}addFeatures(t,n,s){for(const f of this.patternFeatures)this.addFeature(f,f.geometry,f.index,n,s,t.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Zs),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,n,s,f,v,b){for(const S of $h(n,500)){const k=Ud(S,f,b.fill.getGranularityForZoomLevel(f.z)),R=this.layoutVertexArray;Yn((F,j)=>{R.emplaceBack(F,j)},this.segments,this.layoutVertexArray,this.indexArray,k.verticesFlattened,k.indicesTriangles,this.segments2,this.indexArray2,k.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,s,v,f)}}let ys,Xa;lr("FillBucket",wo,{omit:["layers","patternFeatures"]});var ud={get paint(){return Xa=Xa||new Li({"fill-antialias":new dr(fe.paint_fill["fill-antialias"]),"fill-opacity":new Ur(fe.paint_fill["fill-opacity"]),"fill-color":new Ur(fe.paint_fill["fill-color"]),"fill-outline-color":new Ur(fe.paint_fill["fill-outline-color"]),"fill-translate":new dr(fe.paint_fill["fill-translate"]),"fill-translate-anchor":new dr(fe.paint_fill["fill-translate-anchor"]),"fill-pattern":new nu(fe.paint_fill["fill-pattern"])})},get layout(){return ys=ys||new Li({"fill-sort-key":new Ur(fe.layout_fill["fill-sort-key"])})}};class es extends Ns{constructor(t){super(t,ud)}recalculate(t,n){super.recalculate(t,n);const s=this.paint._values["fill-outline-color"];s.value.kind==="constant"&&s.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new wo(t)}queryRadius(){return Jh(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:t,geometry:n,transform:s,pixelsToTileUnits:f}){return Gf(ed(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-s.bearingInRadians,f),n)}isTileClipped(){return!0}}const Vd=si([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Xc=si([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Zd}=Vd;var cd,hd,da,vf,pc,Fu,Gd,dd={};function mc(){if(hd)return cd;hd=1;var i=de();function t(f,v,b,S,k){this.properties={},this.extent=b,this.type=0,this._pbf=f,this._geometry=-1,this._keys=S,this._values=k,f.readFields(n,this,v)}function n(f,v,b){f==1?v.id=b.readVarint():f==2?function(S,k){for(var R=S.readVarint()+S.pos;S.pos<R;){var F=k._keys[S.readVarint()],j=k._values[S.readVarint()];k.properties[F]=j}}(b,v):f==3?v.type=b.readVarint():f==4&&(v._geometry=b.pos)}function s(f){for(var v,b,S=0,k=0,R=f.length,F=R-1;k<R;F=k++)S+=((b=f[F]).x-(v=f[k]).x)*(v.y+b.y);return S}return cd=t,t.types=["Unknown","Point","LineString","Polygon"],t.prototype.loadGeometry=function(){var f=this._pbf;f.pos=this._geometry;for(var v,b=f.readVarint()+f.pos,S=1,k=0,R=0,F=0,j=[];f.pos<b;){if(k<=0){var W=f.readVarint();S=7&W,k=W>>3}if(k--,S===1||S===2)R+=f.readSVarint(),F+=f.readSVarint(),S===1&&(v&&j.push(v),v=[]),v.push(new i(R,F));else{if(S!==7)throw new Error("unknown command "+S);v&&v.push(v[0].clone())}}return v&&j.push(v),j},t.prototype.bbox=function(){var f=this._pbf;f.pos=this._geometry;for(var v=f.readVarint()+f.pos,b=1,S=0,k=0,R=0,F=1/0,j=-1/0,W=1/0,K=-1/0;f.pos<v;){if(S<=0){var ee=f.readVarint();b=7&ee,S=ee>>3}if(S--,b===1||b===2)(k+=f.readSVarint())<F&&(F=k),k>j&&(j=k),(R+=f.readSVarint())<W&&(W=R),R>K&&(K=R);else if(b!==7)throw new Error("unknown command "+b)}return[F,W,j,K]},t.prototype.toGeoJSON=function(f,v,b){var S,k,R=this.extent*Math.pow(2,b),F=this.extent*f,j=this.extent*v,W=this.loadGeometry(),K=t.types[this.type];function ee(Ce){for(var Ve=0;Ve<Ce.length;Ve++){var Re=Ce[Ve];Ce[Ve]=[360*(Re.x+F)/R-180,360/Math.PI*Math.atan(Math.exp((180-360*(Re.y+j)/R)*Math.PI/180))-90]}}switch(this.type){case 1:var ie=[];for(S=0;S<W.length;S++)ie[S]=W[S][0];ee(W=ie);break;case 2:for(S=0;S<W.length;S++)ee(W[S]);break;case 3:for(W=function(Ce){var Ve=Ce.length;if(Ve<=1)return[Ce];for(var Re,H,pe=[],Fe=0;Fe<Ve;Fe++){var pt=s(Ce[Fe]);pt!==0&&(H===void 0&&(H=pt<0),H===pt<0?(Re&&pe.push(Re),Re=[Ce[Fe]]):Re.push(Ce[Fe]))}return Re&&pe.push(Re),pe}(W),S=0;S<W.length;S++)for(k=0;k<W[S].length;k++)ee(W[S][k])}W.length===1?W=W[0]:K="Multi"+K;var me={type:"Feature",geometry:{type:K,coordinates:W},properties:this.properties};return"id"in this&&(me.id=this.id),me},cd}function Wd(){if(vf)return da;vf=1;var i=mc();function t(s,f){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=s,this._keys=[],this._values=[],this._features=[],s.readFields(n,this,f),this.length=this._features.length}function n(s,f,v){s===15?f.version=v.readVarint():s===1?f.name=v.readString():s===5?f.extent=v.readVarint():s===2?f._features.push(v.pos):s===3?f._keys.push(v.readString()):s===4&&f._values.push(function(b){for(var S=null,k=b.readVarint()+b.pos;b.pos<k;){var R=b.readVarint()>>3;S=R===1?b.readString():R===2?b.readFloat():R===3?b.readDouble():R===4?b.readVarint64():R===5?b.readVarint():R===6?b.readSVarint():R===7?b.readBoolean():null}return S}(v))}return da=t,t.prototype.feature=function(s){if(s<0||s>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[s];var f=this._pbf.readVarint()+this._pbf.pos;return new i(this._pbf,f,this.extent,this._keys,this._values)},da}function gc(){return Gd||(Gd=1,dd.VectorTile=function(){if(Fu)return pc;Fu=1;var i=Wd();function t(n,s,f){if(n===3){var v=new i(f,f.readVarint()+f.pos);v.length&&(s[v.name]=v)}}return pc=function(n,s){this.layers=n.readFields(t,{},s)},pc}(),dd.VectorTileFeature=mc(),dd.VectorTileLayer=Wd()),dd}var ts=J(gc());const Hd=ts.VectorTileFeature.types,qd=Math.pow(2,13);function Yc(i,t,n,s,f,v,b,S){i.emplaceBack(t,n,2*Math.floor(s*qd)+b,f*qd*2,v*qd*2,Math.round(S))}class Th{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(n=>n.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Ft,this.centroidVertexArray=new Ct,this.indexArray=new Cn,this.programConfigurations=new vl(t.layers,t.zoom),this.segments=new An,this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id)}populate(t,n,s){this.features=[],this.hasPattern=Yf("fill-extrusion",this.layers,n);for(const{feature:f,id:v,index:b,sourceLayerIndex:S}of t){const k=this.layers[0]._featureFilter.needGeometry,R=Lu(f,k);if(!this.layers[0]._featureFilter.filter(new oi(this.zoom),R,s))continue;const F={id:v,sourceLayerIndex:S,index:b,geometry:k?R.geometry:xl(f),properties:f.properties,type:f.type,patterns:{}};this.hasPattern?this.features.push(Qf("fill-extrusion",this.layers,F,this.zoom,n)):this.addFeature(F,F.geometry,b,s,{},n.subdivisionGranularity),n.featureIndex.insert(f,F.geometry,b,S,this.index,!0)}}addFeatures(t,n,s){for(const f of this.features){const{geometry:v}=f;this.addFeature(f,v,f.index,n,s,t.subdivisionGranularity)}}update(t,n,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,n,this.stateDependentLayers,s)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Zd),this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,Xc.members,!0),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(t,n,s,f,v,b){for(const S of $h(n,500)){const k={x:0,y:0,sampleCount:0},R=this.layoutVertexArray.length;this.processPolygon(k,f,t,S,b);const F=this.layoutVertexArray.length-R,j=Math.floor(k.x/k.sampleCount),W=Math.floor(k.y/k.sampleCount);for(let K=0;K<F;K++)this.centroidVertexArray.emplaceBack(j,W)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,s,v,f)}processPolygon(t,n,s,f,v){if(f.length<1||Hl(f[0]))return;for(const j of f)j.length!==0&&Aa(t,j);const b={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},S=v.fill.getGranularityForZoomLevel(n.z),k=Hd[s.type]==="Polygon";for(const j of f){if(j.length===0||Hl(j))continue;const W=fc(j,S,k);this._generateSideFaces(W,b)}if(!k)return;const R=Ud(f,n,S,!1),F=this.layoutVertexArray;Yn((j,W)=>{Yc(F,j,W,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,R.verticesFlattened,R.indicesTriangles)}_generateSideFaces(t,n){let s=0;for(let f=1;f<t.length;f++){const v=t[f],b=t[f-1];if(Qc(v,b))continue;n.segment.vertexLength+4>An.MAX_VERTEX_ARRAY_LENGTH&&(n.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const S=v.sub(b)._perp()._unit(),k=b.dist(v);s+k>32768&&(s=0),Yc(this.layoutVertexArray,v.x,v.y,S.x,S.y,0,0,s),Yc(this.layoutVertexArray,v.x,v.y,S.x,S.y,0,1,s),s+=k,Yc(this.layoutVertexArray,b.x,b.y,S.x,S.y,0,0,s),Yc(this.layoutVertexArray,b.x,b.y,S.x,S.y,0,1,s);const R=n.segment.vertexLength;this.indexArray.emplaceBack(R,R+2,R+1),this.indexArray.emplaceBack(R+1,R+2,R+3),n.segment.vertexLength+=4,n.segment.primitiveLength+=2}}}function Aa(i,t){for(let n=0;n<t.length;n++){const s=t[n];n===t.length-1&&t[0].x===s.x&&t[0].y===s.y||(i.x+=s.x,i.y+=s.y,i.sampleCount++)}}function Qc(i,t){return i.x===t.x&&(i.x<0||i.x>xt)||i.y===t.y&&(i.y<0||i.y>xt)}function Hl(i){return i.every(t=>t.x<0)||i.every(t=>t.x>xt)||i.every(t=>t.y<0)||i.every(t=>t.y>xt)}let Ra;lr("FillExtrusionBucket",Th,{omit:["layers","features"]});var xf={get paint(){return Ra=Ra||new Li({"fill-extrusion-opacity":new dr(fe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ur(fe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new dr(fe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new dr(fe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new nu(fe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ur(fe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ur(fe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new dr(fe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class tp extends Ns{constructor(t){super(t,xf)}createBucket(t){return new Th(t)}queryRadius(){return Jh(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:t,feature:n,featureState:s,geometry:f,transform:v,pixelsToTileUnits:b,pixelPosMatrix:S}){const k=ed(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-v.bearingInRadians,b),R=this.paint.get("fill-extrusion-height").evaluate(n,s),F=this.paint.get("fill-extrusion-base").evaluate(n,s),j=function(K,ee,ie){const me=[];for(const Ce of K){const Ve=[Ce.x,Ce.y,0,1];tr(Ve,Ve,ee),me.push(new we(Ve[0]/Ve[3],Ve[1]/Ve[3]))}return me}(k,S),W=function(K,ee,ie,me){const Ce=[],Ve=[],Re=me[8]*ee,H=me[9]*ee,pe=me[10]*ee,Fe=me[11]*ee,pt=me[8]*ie,jt=me[9]*ie,bt=me[10]*ie,Mt=me[11]*ie;for(const Kt of K){const Vt=[],qt=[];for(const Rt of Kt){const Er=Rt.x,Wr=Rt.y,Gr=me[0]*Er+me[4]*Wr+me[12],Rr=me[1]*Er+me[5]*Wr+me[13],Rn=me[2]*Er+me[6]*Wr+me[14],Ki=me[3]*Er+me[7]*Wr+me[15],rs=Rn+pe,pa=Ki+Fe,lu=Gr+pt,Cl=Rr+jt,Ws=Rn+bt,Xi=Ki+Mt,xs=new we((Gr+Re)/pa,(Rr+H)/pa);xs.z=rs/pa,Vt.push(xs);const Hs=new we(lu/Xi,Cl/Xi);Hs.z=Ws/Xi,qt.push(Hs)}Ce.push(Vt),Ve.push(qt)}return[Ce,Ve]}(f,F,R,S);return function(K,ee,ie){let me=1/0;Gf(ie,ee)&&(me=Mp(ie,ee[0]));for(let Ce=0;Ce<ee.length;Ce++){const Ve=ee[Ce],Re=K[Ce];for(let H=0;H<Ve.length-1;H++){const pe=Ve[H],Fe=[pe,Ve[H+1],Re[H+1],Re[H],pe];Ld(ie,Fe)&&(me=Math.min(me,Mp(ie,Fe)))}}return me!==1/0&&me}(W[0],W[1],j)}}function Ch(i,t){return i.x*t.x+i.y*t.y}function Mp(i,t){if(i.length===1){let n=0;const s=t[n++];let f;for(;!f||s.equals(f);)if(f=t[n++],!f)return 1/0;for(;n<t.length;n++){const v=t[n],b=i[0],S=f.sub(s),k=v.sub(s),R=b.sub(s),F=Ch(S,S),j=Ch(S,k),W=Ch(k,k),K=Ch(R,S),ee=Ch(R,k),ie=F*W-j*j,me=(W*K-j*ee)/ie,Ce=(F*ee-j*K)/ie,Ve=s.z*(1-me-Ce)+f.z*me+v.z*Ce;if(isFinite(Ve))return Ve}return 1/0}{let n=1/0;for(const s of t)n=Math.min(n,s.z);return n}}const Jc=si([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:kp}=Jc,rp=si([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Ph}=rp,np=ts.VectorTileFeature.types,Eh=Math.cos(Math.PI/180*37.5),ip=Math.pow(2,14)/.5;class bf{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(n=>n.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(n=>{this.gradients[n.id]={}}),this.layoutVertexArray=new vr,this.layoutVertexArray2=new Zr,this.indexArray=new Cn,this.programConfigurations=new vl(t.layers,t.zoom),this.segments=new An,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id)}populate(t,n,s){this.hasPattern=Yf("line",this.layers,n);const f=this.layers[0].layout.get("line-sort-key"),v=!f.isConstant(),b=[];for(const{feature:S,id:k,index:R,sourceLayerIndex:F}of t){const j=this.layers[0]._featureFilter.needGeometry,W=Lu(S,j);if(!this.layers[0]._featureFilter.filter(new oi(this.zoom),W,s))continue;const K=v?f.evaluate(W,{},s):void 0,ee={id:k,properties:S.properties,type:S.type,sourceLayerIndex:F,index:R,geometry:j?W.geometry:xl(S),patterns:{},sortKey:K};b.push(ee)}v&&b.sort((S,k)=>S.sortKey-k.sortKey);for(const S of b){const{geometry:k,index:R,sourceLayerIndex:F}=S;if(this.hasPattern){const j=Qf("line",this.layers,S,this.zoom,n);this.patternFeatures.push(j)}else this.addFeature(S,k,R,s,{},n.subdivisionGranularity);n.featureIndex.insert(t[R].feature,k,R,F,this.index)}}update(t,n,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,n,this.stateDependentLayers,s)}addFeatures(t,n,s){for(const f of this.patternFeatures)this.addFeature(f,f.geometry,f.index,n,s,t.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,Ph)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,kp),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,n,s,f,v,b){const S=this.layers[0].layout,k=S.get("line-join").evaluate(t,{}),R=S.get("line-cap"),F=S.get("line-miter-limit"),j=S.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const W of n)this.addLine(W,t,k,R,F,j,f,b);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,s,v,f)}addLine(t,n,s,f,v,b,S,k){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,t=fc(t,S?k.line.getGranularityForZoomLevel(S.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Re=0;Re<t.length-1;Re++)this.totalDistance+=t[Re].dist(t[Re+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const R=np[n.type]==="Polygon";let F=t.length;for(;F>=2&&t[F-1].equals(t[F-2]);)F--;let j=0;for(;j<F-1&&t[j].equals(t[j+1]);)j++;if(F<(R?3:2))return;s==="bevel"&&(v=1.05);const W=this.overscaling<=16?15*xt/(512*this.overscaling):0,K=this.segments.prepareSegment(10*F,this.layoutVertexArray,this.indexArray);let ee,ie,me,Ce,Ve;this.e1=this.e2=-1,R&&(ee=t[F-2],Ve=t[j].sub(ee)._unit()._perp());for(let Re=j;Re<F;Re++){if(me=Re===F-1?R?t[j+1]:void 0:t[Re+1],me&&t[Re].equals(me))continue;Ve&&(Ce=Ve),ee&&(ie=ee),ee=t[Re],Ve=me?me.sub(ee)._unit()._perp():Ce,Ce=Ce||Ve;let H=Ce.add(Ve);H.x===0&&H.y===0||H._unit();const pe=Ce.x*Ve.x+Ce.y*Ve.y,Fe=H.x*Ve.x+H.y*Ve.y,pt=Fe!==0?1/Fe:1/0,jt=2*Math.sqrt(2-2*Fe),bt=Fe<Eh&&ie&&me,Mt=Ce.x*Ve.y-Ce.y*Ve.x>0;if(bt&&Re>j){const qt=ee.dist(ie);if(qt>2*W){const Rt=ee.sub(ee.sub(ie)._mult(W/qt)._round());this.updateDistance(ie,Rt),this.addCurrentVertex(Rt,Ce,0,0,K),ie=Rt}}const Kt=ie&&me;let Vt=Kt?s:R?"butt":f;if(Kt&&Vt==="round"&&(pt<b?Vt="miter":pt<=2&&(Vt="fakeround")),Vt==="miter"&&pt>v&&(Vt="bevel"),Vt==="bevel"&&(pt>2&&(Vt="flipbevel"),pt<v&&(Vt="miter")),ie&&this.updateDistance(ie,ee),Vt==="miter")H._mult(pt),this.addCurrentVertex(ee,H,0,0,K);else if(Vt==="flipbevel"){if(pt>100)H=Ve.mult(-1);else{const qt=pt*Ce.add(Ve).mag()/Ce.sub(Ve).mag();H._perp()._mult(qt*(Mt?-1:1))}this.addCurrentVertex(ee,H,0,0,K),this.addCurrentVertex(ee,H.mult(-1),0,0,K)}else if(Vt==="bevel"||Vt==="fakeround"){const qt=-Math.sqrt(pt*pt-1),Rt=Mt?qt:0,Er=Mt?0:qt;if(ie&&this.addCurrentVertex(ee,Ce,Rt,Er,K),Vt==="fakeround"){const Wr=Math.round(180*jt/Math.PI/20);for(let Gr=1;Gr<Wr;Gr++){let Rr=Gr/Wr;if(Rr!==.5){const Ki=Rr-.5;Rr+=Rr*Ki*(Rr-1)*((1.0904+pe*(pe*(3.55645-1.43519*pe)-3.2452))*Ki*Ki+(.848013+pe*(.215638*pe-1.06021)))}const Rn=Ve.sub(Ce)._mult(Rr)._add(Ce)._unit()._mult(Mt?-1:1);this.addHalfVertex(ee,Rn.x,Rn.y,!1,Mt,0,K)}}me&&this.addCurrentVertex(ee,Ve,-Rt,-Er,K)}else if(Vt==="butt")this.addCurrentVertex(ee,H,0,0,K);else if(Vt==="square"){const qt=ie?1:-1;this.addCurrentVertex(ee,H,qt,qt,K)}else Vt==="round"&&(ie&&(this.addCurrentVertex(ee,Ce,0,0,K),this.addCurrentVertex(ee,Ce,1,1,K,!0)),me&&(this.addCurrentVertex(ee,Ve,-1,-1,K,!0),this.addCurrentVertex(ee,Ve,0,0,K)));if(bt&&Re<F-1){const qt=ee.dist(me);if(qt>2*W){const Rt=ee.add(me.sub(ee)._mult(W/qt)._round());this.updateDistance(ee,Rt),this.addCurrentVertex(Rt,Ve,0,0,K),ee=Rt}}}}addCurrentVertex(t,n,s,f,v,b=!1){const S=n.y*f-n.x,k=-n.y-n.x*f;this.addHalfVertex(t,n.x+n.y*s,n.y-n.x*s,b,!1,s,v),this.addHalfVertex(t,S,k,b,!0,-f,v),this.distance>ip/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(t,n,s,f,v,b))}addHalfVertex({x:t,y:n},s,f,v,b,S,k){const R=.5*(this.lineClips?this.scaledDistance*(ip-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t<<1)+(v?1:0),(n<<1)+(b?1:0),Math.round(63*s)+128,Math.round(63*f)+128,1+(S===0?0:S<0?-1:1)|(63&R)<<2,R>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const F=k.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,F,this.e2),k.primitiveLength++),b?this.e2=F:this.e1=F}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(t,n){this.distance+=t.dist(n),this.updateScaledDistance()}}let wf,Kd;lr("LineBucket",bf,{omit:["layers","patternFeatures"]});var Ap={get paint(){return Kd=Kd||new Li({"line-opacity":new Ur(fe.paint_line["line-opacity"]),"line-color":new Ur(fe.paint_line["line-color"]),"line-translate":new dr(fe.paint_line["line-translate"]),"line-translate-anchor":new dr(fe.paint_line["line-translate-anchor"]),"line-width":new Ur(fe.paint_line["line-width"]),"line-gap-width":new Ur(fe.paint_line["line-gap-width"]),"line-offset":new Ur(fe.paint_line["line-offset"]),"line-blur":new Ur(fe.paint_line["line-blur"]),"line-dasharray":new Bs(fe.paint_line["line-dasharray"]),"line-pattern":new nu(fe.paint_line["line-pattern"]),"line-gradient":new $l(fe.paint_line["line-gradient"])})},get layout(){return wf=wf||new Li({"line-cap":new dr(fe.layout_line["line-cap"]),"line-join":new Ur(fe.layout_line["line-join"]),"line-miter-limit":new dr(fe.layout_line["line-miter-limit"]),"line-round-limit":new dr(fe.layout_line["line-round-limit"]),"line-sort-key":new Ur(fe.layout_line["line-sort-key"])})}};class hm extends Ur{possiblyEvaluate(t,n){return n=new oi(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),super.possiblyEvaluate(t,n)}evaluate(t,n,s,f){return n=Sr({},n,{zoom:Math.floor(n.zoom)}),super.evaluate(t,n,s,f)}}let Xd;class Rp extends Ns{constructor(t){super(t,Ap),this.gradientVersion=0,Xd||(Xd=new hm(Ap.paint.properties["line-width"].specification),Xd.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(t){if(t==="line-gradient"){const n=this.gradientExpression();this.stepInterpolant=!!function(s){return s._styleExpression!==void 0}(n)&&n._styleExpression.expression instanceof Ai,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(t,n){super.recalculate(t,n),this.paint._values["line-floorwidth"]=Xd.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new bf(t)}queryRadius(t){const n=t,s=eh(bh("line-width",this,n),bh("line-gap-width",this,n)),f=bh("line-offset",this,n);return s/2+Math.abs(f)+Jh(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:t,feature:n,featureState:s,geometry:f,transform:v,pixelsToTileUnits:b}){const S=ed(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-v.bearingInRadians,b),k=b/2*eh(this.paint.get("line-width").evaluate(n,s),this.paint.get("line-gap-width").evaluate(n,s)),R=this.paint.get("line-offset").evaluate(n,s);return R&&(f=function(F,j){const W=[];for(let K=0;K<F.length;K++){const ee=F[K],ie=[];for(let me=0;me<ee.length;me++){const Ce=ee[me-1],Ve=ee[me],Re=ee[me+1],H=me===0?new we(0,0):Ve.sub(Ce)._unit()._perp(),pe=me===ee.length-1?new we(0,0):Re.sub(Ve)._unit()._perp(),Fe=H._add(pe)._unit(),pt=Fe.x*pe.x+Fe.y*pe.y;pt!==0&&Fe._mult(1/pt),ie.push(Fe._mult(j)._add(Ve))}W.push(ie)}return W}(f,R*b)),function(F,j,W){for(let K=0;K<j.length;K++){const ee=j[K];if(F.length>=3){for(let ie=0;ie<ee.length;ie++)if(ca(F,ee[ie]))return!0}if(Wf(F,ee,W))return!0}return!1}(S,f,k)}isTileClipped(){return!0}}function eh(i,t){return t>0?t+2*i:i}const dm=si([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),fd=si([{name:"a_projected_pos",components:3,type:"Float32"}],4);si([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Sf=si([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);si([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const qi=si([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),fm=si([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function zp(i,t,n){return i.sections.forEach(s=>{s.text=function(f,v,b){const S=v.layout.get("text-transform").evaluate(b,{});return S==="uppercase"?f=f.toLocaleUpperCase():S==="lowercase"&&(f=f.toLocaleLowerCase()),Nl.applyArabicShaping&&(f=Nl.applyArabicShaping(f)),f}(s.text,t,n)}),i}si([{name:"triangle",components:3,type:"Uint16"}]),si([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),si([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),si([{type:"Float32",name:"offsetX"}]),si([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),si([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Yd={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var Lp,Tf,op,Ao=24,Ya={};function Cf(){return Lp||(Lp=1,Ya.read=function(i,t,n,s,f){var v,b,S=8*f-s-1,k=(1<<S)-1,R=k>>1,F=-7,j=n?f-1:0,W=n?-1:1,K=i[t+j];for(j+=W,v=K&(1<<-F)-1,K>>=-F,F+=S;F>0;v=256*v+i[t+j],j+=W,F-=8);for(b=v&(1<<-F)-1,v>>=-F,F+=s;F>0;b=256*b+i[t+j],j+=W,F-=8);if(v===0)v=1-R;else{if(v===k)return b?NaN:1/0*(K?-1:1);b+=Math.pow(2,s),v-=R}return(K?-1:1)*b*Math.pow(2,v-s)},Ya.write=function(i,t,n,s,f,v){var b,S,k,R=8*v-f-1,F=(1<<R)-1,j=F>>1,W=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,K=s?0:v-1,ee=s?1:-1,ie=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(S=isNaN(t)?1:0,b=F):(b=Math.floor(Math.log(t)/Math.LN2),t*(k=Math.pow(2,-b))<1&&(b--,k*=2),(t+=b+j>=1?W/k:W*Math.pow(2,1-j))*k>=2&&(b++,k/=2),b+j>=F?(S=0,b=F):b+j>=1?(S=(t*k-1)*Math.pow(2,f),b+=j):(S=t*Math.pow(2,j-1)*Math.pow(2,f),b=0));f>=8;i[n+K]=255&S,K+=ee,S/=256,f-=8);for(b=b<<f|S,R+=f;R>0;i[n+K]=255&b,K+=ee,b/=256,R-=8);i[n+K-ee]|=128*ie}),Ya}function Dp(){if(op)return Tf;op=1,Tf=t;var i=Cf();function t(H){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(H)?H:new Uint8Array(H||0),this.pos=0,this.type=0,this.length=this.buf.length}t.Varint=0,t.Fixed64=1,t.Bytes=2,t.Fixed32=5;var n=4294967296,s=1/n,f=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function v(H){return H.type===t.Bytes?H.readVarint()+H.pos:H.pos+1}function b(H,pe,Fe){return Fe?4294967296*pe+(H>>>0):4294967296*(pe>>>0)+(H>>>0)}function S(H,pe,Fe){var pt=pe<=16383?1:pe<=2097151?2:pe<=268435455?3:Math.floor(Math.log(pe)/(7*Math.LN2));Fe.realloc(pt);for(var jt=Fe.pos-1;jt>=H;jt--)Fe.buf[jt+pt]=Fe.buf[jt]}function k(H,pe){for(var Fe=0;Fe<H.length;Fe++)pe.writeVarint(H[Fe])}function R(H,pe){for(var Fe=0;Fe<H.length;Fe++)pe.writeSVarint(H[Fe])}function F(H,pe){for(var Fe=0;Fe<H.length;Fe++)pe.writeFloat(H[Fe])}function j(H,pe){for(var Fe=0;Fe<H.length;Fe++)pe.writeDouble(H[Fe])}function W(H,pe){for(var Fe=0;Fe<H.length;Fe++)pe.writeBoolean(H[Fe])}function K(H,pe){for(var Fe=0;Fe<H.length;Fe++)pe.writeFixed32(H[Fe])}function ee(H,pe){for(var Fe=0;Fe<H.length;Fe++)pe.writeSFixed32(H[Fe])}function ie(H,pe){for(var Fe=0;Fe<H.length;Fe++)pe.writeFixed64(H[Fe])}function me(H,pe){for(var Fe=0;Fe<H.length;Fe++)pe.writeSFixed64(H[Fe])}function Ce(H,pe){return(H[pe]|H[pe+1]<<8|H[pe+2]<<16)+16777216*H[pe+3]}function Ve(H,pe,Fe){H[Fe]=pe,H[Fe+1]=pe>>>8,H[Fe+2]=pe>>>16,H[Fe+3]=pe>>>24}function Re(H,pe){return(H[pe]|H[pe+1]<<8|H[pe+2]<<16)+(H[pe+3]<<24)}return t.prototype={destroy:function(){this.buf=null},readFields:function(H,pe,Fe){for(Fe=Fe||this.length;this.pos<Fe;){var pt=this.readVarint(),jt=pt>>3,bt=this.pos;this.type=7&pt,H(jt,pe,this),this.pos===bt&&this.skip(pt)}return pe},readMessage:function(H,pe){return this.readFields(H,pe,this.readVarint()+this.pos)},readFixed32:function(){var H=Ce(this.buf,this.pos);return this.pos+=4,H},readSFixed32:function(){var H=Re(this.buf,this.pos);return this.pos+=4,H},readFixed64:function(){var H=Ce(this.buf,this.pos)+Ce(this.buf,this.pos+4)*n;return this.pos+=8,H},readSFixed64:function(){var H=Ce(this.buf,this.pos)+Re(this.buf,this.pos+4)*n;return this.pos+=8,H},readFloat:function(){var H=i.read(this.buf,this.pos,!0,23,4);return this.pos+=4,H},readDouble:function(){var H=i.read(this.buf,this.pos,!0,52,8);return this.pos+=8,H},readVarint:function(H){var pe,Fe,pt=this.buf;return pe=127&(Fe=pt[this.pos++]),Fe<128?pe:(pe|=(127&(Fe=pt[this.pos++]))<<7,Fe<128?pe:(pe|=(127&(Fe=pt[this.pos++]))<<14,Fe<128?pe:(pe|=(127&(Fe=pt[this.pos++]))<<21,Fe<128?pe:function(jt,bt,Mt){var Kt,Vt,qt=Mt.buf;if(Kt=(112&(Vt=qt[Mt.pos++]))>>4,Vt<128||(Kt|=(127&(Vt=qt[Mt.pos++]))<<3,Vt<128)||(Kt|=(127&(Vt=qt[Mt.pos++]))<<10,Vt<128)||(Kt|=(127&(Vt=qt[Mt.pos++]))<<17,Vt<128)||(Kt|=(127&(Vt=qt[Mt.pos++]))<<24,Vt<128)||(Kt|=(1&(Vt=qt[Mt.pos++]))<<31,Vt<128))return b(jt,Kt,bt);throw new Error("Expected varint not more than 10 bytes")}(pe|=(15&(Fe=pt[this.pos]))<<28,H,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var H=this.readVarint();return H%2==1?(H+1)/-2:H/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var H=this.readVarint()+this.pos,pe=this.pos;return this.pos=H,H-pe>=12&&f?function(Fe,pt,jt){return f.decode(Fe.subarray(pt,jt))}(this.buf,pe,H):function(Fe,pt,jt){for(var bt="",Mt=pt;Mt<jt;){var Kt,Vt,qt,Rt=Fe[Mt],Er=null,Wr=Rt>239?4:Rt>223?3:Rt>191?2:1;if(Mt+Wr>jt)break;Wr===1?Rt<128&&(Er=Rt):Wr===2?(192&(Kt=Fe[Mt+1]))==128&&(Er=(31&Rt)<<6|63&Kt)<=127&&(Er=null):Wr===3?(Vt=Fe[Mt+2],(192&(Kt=Fe[Mt+1]))==128&&(192&Vt)==128&&((Er=(15&Rt)<<12|(63&Kt)<<6|63&Vt)<=2047||Er>=55296&&Er<=57343)&&(Er=null)):Wr===4&&(Vt=Fe[Mt+2],qt=Fe[Mt+3],(192&(Kt=Fe[Mt+1]))==128&&(192&Vt)==128&&(192&qt)==128&&((Er=(15&Rt)<<18|(63&Kt)<<12|(63&Vt)<<6|63&qt)<=65535||Er>=1114112)&&(Er=null)),Er===null?(Er=65533,Wr=1):Er>65535&&(Er-=65536,bt+=String.fromCharCode(Er>>>10&1023|55296),Er=56320|1023&Er),bt+=String.fromCharCode(Er),Mt+=Wr}return bt}(this.buf,pe,H)},readBytes:function(){var H=this.readVarint()+this.pos,pe=this.buf.subarray(this.pos,H);return this.pos=H,pe},readPackedVarint:function(H,pe){if(this.type!==t.Bytes)return H.push(this.readVarint(pe));var Fe=v(this);for(H=H||[];this.pos<Fe;)H.push(this.readVarint(pe));return H},readPackedSVarint:function(H){if(this.type!==t.Bytes)return H.push(this.readSVarint());var pe=v(this);for(H=H||[];this.pos<pe;)H.push(this.readSVarint());return H},readPackedBoolean:function(H){if(this.type!==t.Bytes)return H.push(this.readBoolean());var pe=v(this);for(H=H||[];this.pos<pe;)H.push(this.readBoolean());return H},readPackedFloat:function(H){if(this.type!==t.Bytes)return H.push(this.readFloat());var pe=v(this);for(H=H||[];this.pos<pe;)H.push(this.readFloat());return H},readPackedDouble:function(H){if(this.type!==t.Bytes)return H.push(this.readDouble());var pe=v(this);for(H=H||[];this.pos<pe;)H.push(this.readDouble());return H},readPackedFixed32:function(H){if(this.type!==t.Bytes)return H.push(this.readFixed32());var pe=v(this);for(H=H||[];this.pos<pe;)H.push(this.readFixed32());return H},readPackedSFixed32:function(H){if(this.type!==t.Bytes)return H.push(this.readSFixed32());var pe=v(this);for(H=H||[];this.pos<pe;)H.push(this.readSFixed32());return H},readPackedFixed64:function(H){if(this.type!==t.Bytes)return H.push(this.readFixed64());var pe=v(this);for(H=H||[];this.pos<pe;)H.push(this.readFixed64());return H},readPackedSFixed64:function(H){if(this.type!==t.Bytes)return H.push(this.readSFixed64());var pe=v(this);for(H=H||[];this.pos<pe;)H.push(this.readSFixed64());return H},skip:function(H){var pe=7&H;if(pe===t.Varint)for(;this.buf[this.pos++]>127;);else if(pe===t.Bytes)this.pos=this.readVarint()+this.pos;else if(pe===t.Fixed32)this.pos+=4;else{if(pe!==t.Fixed64)throw new Error("Unimplemented type: "+pe);this.pos+=8}},writeTag:function(H,pe){this.writeVarint(H<<3|pe)},realloc:function(H){for(var pe=this.length||16;pe<this.pos+H;)pe*=2;if(pe!==this.length){var Fe=new Uint8Array(pe);Fe.set(this.buf),this.buf=Fe,this.length=pe}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(H){this.realloc(4),Ve(this.buf,H,this.pos),this.pos+=4},writeSFixed32:function(H){this.realloc(4),Ve(this.buf,H,this.pos),this.pos+=4},writeFixed64:function(H){this.realloc(8),Ve(this.buf,-1&H,this.pos),Ve(this.buf,Math.floor(H*s),this.pos+4),this.pos+=8},writeSFixed64:function(H){this.realloc(8),Ve(this.buf,-1&H,this.pos),Ve(this.buf,Math.floor(H*s),this.pos+4),this.pos+=8},writeVarint:function(H){(H=+H||0)>268435455||H<0?function(pe,Fe){var pt,jt;if(pe>=0?(pt=pe%4294967296|0,jt=pe/4294967296|0):(jt=~(-pe/4294967296),4294967295^(pt=~(-pe%4294967296))?pt=pt+1|0:(pt=0,jt=jt+1|0)),pe>=18446744073709552e3||pe<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Fe.realloc(10),function(bt,Mt,Kt){Kt.buf[Kt.pos++]=127&bt|128,bt>>>=7,Kt.buf[Kt.pos++]=127&bt|128,bt>>>=7,Kt.buf[Kt.pos++]=127&bt|128,bt>>>=7,Kt.buf[Kt.pos++]=127&bt|128,Kt.buf[Kt.pos]=127&(bt>>>=7)}(pt,0,Fe),function(bt,Mt){var Kt=(7&bt)<<4;Mt.buf[Mt.pos++]|=Kt|((bt>>>=3)?128:0),bt&&(Mt.buf[Mt.pos++]=127&bt|((bt>>>=7)?128:0),bt&&(Mt.buf[Mt.pos++]=127&bt|((bt>>>=7)?128:0),bt&&(Mt.buf[Mt.pos++]=127&bt|((bt>>>=7)?128:0),bt&&(Mt.buf[Mt.pos++]=127&bt|((bt>>>=7)?128:0),bt&&(Mt.buf[Mt.pos++]=127&bt)))))}(jt,Fe)}(H,this):(this.realloc(4),this.buf[this.pos++]=127&H|(H>127?128:0),H<=127||(this.buf[this.pos++]=127&(H>>>=7)|(H>127?128:0),H<=127||(this.buf[this.pos++]=127&(H>>>=7)|(H>127?128:0),H<=127||(this.buf[this.pos++]=H>>>7&127))))},writeSVarint:function(H){this.writeVarint(H<0?2*-H-1:2*H)},writeBoolean:function(H){this.writeVarint(!!H)},writeString:function(H){H=String(H),this.realloc(4*H.length),this.pos++;var pe=this.pos;this.pos=function(pt,jt,bt){for(var Mt,Kt,Vt=0;Vt<jt.length;Vt++){if((Mt=jt.charCodeAt(Vt))>55295&&Mt<57344){if(!Kt){Mt>56319||Vt+1===jt.length?(pt[bt++]=239,pt[bt++]=191,pt[bt++]=189):Kt=Mt;continue}if(Mt<56320){pt[bt++]=239,pt[bt++]=191,pt[bt++]=189,Kt=Mt;continue}Mt=Kt-55296<<10|Mt-56320|65536,Kt=null}else Kt&&(pt[bt++]=239,pt[bt++]=191,pt[bt++]=189,Kt=null);Mt<128?pt[bt++]=Mt:(Mt<2048?pt[bt++]=Mt>>6|192:(Mt<65536?pt[bt++]=Mt>>12|224:(pt[bt++]=Mt>>18|240,pt[bt++]=Mt>>12&63|128),pt[bt++]=Mt>>6&63|128),pt[bt++]=63&Mt|128)}return bt}(this.buf,H,this.pos);var Fe=this.pos-pe;Fe>=128&&S(pe,Fe,this),this.pos=pe-1,this.writeVarint(Fe),this.pos+=Fe},writeFloat:function(H){this.realloc(4),i.write(this.buf,H,this.pos,!0,23,4),this.pos+=4},writeDouble:function(H){this.realloc(8),i.write(this.buf,H,this.pos,!0,52,8),this.pos+=8},writeBytes:function(H){var pe=H.length;this.writeVarint(pe),this.realloc(pe);for(var Fe=0;Fe<pe;Fe++)this.buf[this.pos++]=H[Fe]},writeRawMessage:function(H,pe){this.pos++;var Fe=this.pos;H(pe,this);var pt=this.pos-Fe;pt>=128&&S(Fe,pt,this),this.pos=Fe-1,this.writeVarint(pt),this.pos+=pt},writeMessage:function(H,pe,Fe){this.writeTag(H,t.Bytes),this.writeRawMessage(pe,Fe)},writePackedVarint:function(H,pe){pe.length&&this.writeMessage(H,k,pe)},writePackedSVarint:function(H,pe){pe.length&&this.writeMessage(H,R,pe)},writePackedBoolean:function(H,pe){pe.length&&this.writeMessage(H,W,pe)},writePackedFloat:function(H,pe){pe.length&&this.writeMessage(H,F,pe)},writePackedDouble:function(H,pe){pe.length&&this.writeMessage(H,j,pe)},writePackedFixed32:function(H,pe){pe.length&&this.writeMessage(H,K,pe)},writePackedSFixed32:function(H,pe){pe.length&&this.writeMessage(H,ee,pe)},writePackedFixed64:function(H,pe){pe.length&&this.writeMessage(H,ie,pe)},writePackedSFixed64:function(H,pe){pe.length&&this.writeMessage(H,me,pe)},writeBytesField:function(H,pe){this.writeTag(H,t.Bytes),this.writeBytes(pe)},writeFixed32Field:function(H,pe){this.writeTag(H,t.Fixed32),this.writeFixed32(pe)},writeSFixed32Field:function(H,pe){this.writeTag(H,t.Fixed32),this.writeSFixed32(pe)},writeFixed64Field:function(H,pe){this.writeTag(H,t.Fixed64),this.writeFixed64(pe)},writeSFixed64Field:function(H,pe){this.writeTag(H,t.Fixed64),this.writeSFixed64(pe)},writeVarintField:function(H,pe){this.writeTag(H,t.Varint),this.writeVarint(pe)},writeSVarintField:function(H,pe){this.writeTag(H,t.Varint),this.writeSVarint(pe)},writeStringField:function(H,pe){this.writeTag(H,t.Bytes),this.writeString(pe)},writeFloatField:function(H,pe){this.writeTag(H,t.Fixed32),this.writeFloat(pe)},writeDoubleField:function(H,pe){this.writeTag(H,t.Fixed64),this.writeDouble(pe)},writeBooleanField:function(H,pe){this.writeVarintField(H,!!pe)}},Tf}var Sl=J(Dp());const pd=3;function Ih(i,t,n){i===1&&n.readMessage(Pf,t)}function Pf(i,t,n){if(i===3){const{id:s,bitmap:f,width:v,height:b,left:S,top:k,advance:R}=n.readMessage(sp,{});t.push({id:s,bitmap:new Vl({width:v+2*pd,height:b+2*pd},f),metrics:{width:v,height:b,left:S,top:k,advance:R}})}}function sp(i,t,n){i===1?t.id=n.readVarint():i===2?t.bitmap=n.readBytes():i===3?t.width=n.readVarint():i===4?t.height=n.readVarint():i===5?t.left=n.readSVarint():i===6?t.top=n.readSVarint():i===7&&(t.advance=n.readVarint())}const ap=pd;function Op(i){let t=0,n=0;for(const b of i)t+=b.w*b.h,n=Math.max(n,b.w);i.sort((b,S)=>S.h-b.h);const s=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),n),h:1/0}];let f=0,v=0;for(const b of i)for(let S=s.length-1;S>=0;S--){const k=s[S];if(!(b.w>k.w||b.h>k.h)){if(b.x=k.x,b.y=k.y,v=Math.max(v,b.y+b.h),f=Math.max(f,b.x+b.w),b.w===k.w&&b.h===k.h){const R=s.pop();S<s.length&&(s[S]=R)}else b.h===k.h?(k.x+=b.w,k.w-=b.w):b.w===k.w?(k.y+=b.h,k.h-=b.h):(s.push({x:k.x+b.w,y:k.y,w:k.w-b.w,h:b.h}),k.y+=b.h,k.h-=b.h);break}}return{w:f,h:v,fill:t/(f*v)||0}}const Gs=1;class lp{constructor(t,{pixelRatio:n,version:s,stretchX:f,stretchY:v,content:b,textFitWidth:S,textFitHeight:k}){this.paddedRect=t,this.pixelRatio=n,this.stretchX=f,this.stretchY=v,this.content=b,this.version=s,this.textFitWidth=S,this.textFitHeight=k}get tl(){return[this.paddedRect.x+Gs,this.paddedRect.y+Gs]}get br(){return[this.paddedRect.x+this.paddedRect.w-Gs,this.paddedRect.y+this.paddedRect.h-Gs]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Gs)/this.pixelRatio,(this.paddedRect.h-2*Gs)/this.pixelRatio]}}class up{constructor(t,n){const s={},f={};this.haveRenderCallbacks=[];const v=[];this.addImages(t,s,v),this.addImages(n,f,v);const{w:b,h:S}=Op(v),k=new ha({width:b||1,height:S||1});for(const R in t){const F=t[R],j=s[R].paddedRect;ha.copy(F.data,k,{x:0,y:0},{x:j.x+Gs,y:j.y+Gs},F.data)}for(const R in n){const F=n[R],j=f[R].paddedRect,W=j.x+Gs,K=j.y+Gs,ee=F.data.width,ie=F.data.height;ha.copy(F.data,k,{x:0,y:0},{x:W,y:K},F.data),ha.copy(F.data,k,{x:0,y:ie-1},{x:W,y:K-1},{width:ee,height:1}),ha.copy(F.data,k,{x:0,y:0},{x:W,y:K+ie},{width:ee,height:1}),ha.copy(F.data,k,{x:ee-1,y:0},{x:W-1,y:K},{width:1,height:ie}),ha.copy(F.data,k,{x:0,y:0},{x:W+ee,y:K},{width:1,height:ie})}this.image=k,this.iconPositions=s,this.patternPositions=f}addImages(t,n,s){for(const f in t){const v=t[f],b={x:0,y:0,w:v.data.width+2*Gs,h:v.data.height+2*Gs};s.push(b),n[f]=new lp(b,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(f)}}patchUpdatedImages(t,n){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const s in t.updatedImages)this.patchUpdatedImage(this.iconPositions[s],t.getImage(s),n),this.patchUpdatedImage(this.patternPositions[s],t.getImage(s),n)}patchUpdatedImage(t,n,s){if(!t||!n||t.version===n.version)return;t.version=n.version;const[f,v]=t.tl;s.update(n.data,void 0,{x:f,y:v})}}var yc;lr("ImagePosition",lp),lr("ImageAtlas",up),M.al=void 0,(yc=M.al||(M.al={}))[yc.none=0]="none",yc[yc.horizontal=1]="horizontal",yc[yc.vertical=2]="vertical",yc[yc.horizontalOnly=3]="horizontalOnly";const Mh=-17;class th{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(t,n,s){const f=new th;return f.scale=t||1,f.fontStack=n,f.verticalAlign=s||"bottom",f}static forImage(t,n){const s=new th;return s.imageName=t,s.verticalAlign=n||"bottom",s}}class kh{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,n){const s=new kh;for(let f=0;f<t.sections.length;f++){const v=t.sections[f];v.image?s.addImageSection(v):s.addTextSection(v,n)}return s}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(){this.text=function(t){let n="";for(let s=0;s<t.length;s++){const f=t.charCodeAt(s+1)||null,v=t.charCodeAt(s-1)||null;n+=f&&Fs(f)&&!Yd[t[s+1]]||v&&Fs(v)&&!Yd[t[s-1]]||!Yd[t[s]]?t[s]:Yd[t[s]]}return n}(this.text)}trim(){let t=0;for(let s=0;s<this.text.length&&Ef[this.text.charCodeAt(s)];s++)t++;let n=this.text.length;for(let s=this.text.length-1;s>=0&&s>=t&&Ef[this.text.charCodeAt(s)];s--)n--;this.text=this.text.substring(t,n),this.sectionIndex=this.sectionIndex.slice(t,n)}substring(t,n){const s=new kh;return s.text=this.text.substring(t,n),s.sectionIndex=this.sectionIndex.slice(t,n),s.sections=this.sections,s}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((t,n)=>Math.max(t,this.sections[n].scale),0)}getMaxImageSize(t){let n=0,s=0;for(let f=0;f<this.length();f++){const v=this.getSection(f);if(v.imageName){const b=t[v.imageName];if(!b)continue;const S=b.displaySize;n=Math.max(n,S[0]),s=Math.max(s,S[1])}}return{maxImageWidth:n,maxImageHeight:s}}addTextSection(t,n){this.text+=t.text,this.sections.push(th.forText(t.scale,t.fontStack||n,t.verticalAlign));const s=this.sections.length-1;for(let f=0;f<t.text.length;++f)this.sectionIndex.push(s)}addImageSection(t){const n=t.image?t.image.name:"";if(n.length===0)return void $r("Can't add FormattedSection with an empty image.");const s=this.getNextImageSectionCharCode();s?(this.text+=String.fromCharCode(s),this.sections.push(th.forImage(n,t.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):$r("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function md(i,t,n,s,f,v,b,S,k,R,F,j,W,K,ee){const ie=kh.fromFeature(i,f);let me;j===M.al.vertical&&ie.verticalizePunctuation();const{processBidirectionalText:Ce,processStyledBidirectionalText:Ve}=Nl;if(Ce&&ie.sections.length===1){me=[];const pe=Ce(ie.toString(),_c(ie,R,v,t,s,K));for(const Fe of pe){const pt=new kh;pt.text=Fe,pt.sections=ie.sections;for(let jt=0;jt<Fe.length;jt++)pt.sectionIndex.push(0);me.push(pt)}}else if(Ve){me=[];const pe=Ve(ie.text,ie.sectionIndex,_c(ie,R,v,t,s,K));for(const Fe of pe){const pt=new kh;pt.text=Fe[0],pt.sectionIndex=Fe[1],pt.sections=ie.sections,me.push(pt)}}else me=function(pe,Fe){const pt=[],jt=pe.text;let bt=0;for(const Mt of Fe)pt.push(pe.substring(bt,Mt)),bt=Mt;return bt<jt.length&&pt.push(pe.substring(bt,jt.length)),pt}(ie,_c(ie,R,v,t,s,K));const Re=[],H={positionedLines:Re,text:ie.toString(),top:F[1],bottom:F[1],left:F[0],right:F[0],writingMode:j,iconsInText:!1,verticalizable:!1};return function(pe,Fe,pt,jt,bt,Mt,Kt,Vt,qt,Rt,Er,Wr){let Gr=0,Rr=0,Rn=0,Ki=0;const rs=Vt==="right"?1:Vt==="left"?0:.5,pa=Ao/Wr;let lu=0;for(const Xi of bt){Xi.trim();const xs=Xi.getMaxScale(),Hs={positionedGlyphs:[],lineOffset:0};pe.positionedLines[lu]=Hs;const qs=Hs.positionedGlyphs;let Qa=0;if(!Xi.length()){Rr+=Mt,++lu;continue}const uu=Qd(jt,Xi,pa);for(let Pl=0;Pl<Xi.length();Pl++){const ns=Xi.getSection(Pl),ws=Xi.getSectionIndex(Pl),Ss=Xi.getCharCode(Pl),Uo=Af(qt,Er,Ss);let ji;if(ns.imageName){if(pe.iconsInText=!0,ns.scale=ns.scale*pa,ji=l(ns,Uo,xs,uu,jt),!ji)continue;Qa=Math.max(Qa,ji.imageOffset)}else if(ji=o(ns,Ss,Uo,uu,Fe,pt),!ji)continue;const{rect:wc,metrics:Ff,baselineOffset:Sc}=ji;qs.push({glyph:Ss,imageName:ns.imageName,x:Gr,y:Rr+Sc+Mh,vertical:Uo,scale:ns.scale,fontStack:ns.fontStack,sectionIndex:ws,metrics:Ff,rect:wc}),Uo?(pe.verticalizable=!0,Gr+=(ns.imageName?Ff.advance:Ao)*ns.scale+Rt):Gr+=Ff.advance*ns.scale+Rt}qs.length!==0&&(Rn=Math.max(Gr-Rt,Rn),x(qs,0,qs.length-1,rs)),Gr=0,Hs.lineOffset=Math.max(Qa,(xs-1)*Ao);const bs=Mt*xs+Qa;Rr+=bs,Ki=Math.max(bs,Ki),++lu}const{horizontalAlign:Cl,verticalAlign:Ws}=hp(Kt);(function(Xi,xs,Hs,qs,Qa,uu,bs,Pl,ns){const ws=(xs-Hs)*Qa;let Ss=0;Ss=uu!==bs?-Pl*qs-Mh:-qs*ns*bs+.5*bs;for(const Uo of Xi)for(const ji of Uo.positionedGlyphs)ji.x+=ws,ji.y+=Ss})(pe.positionedLines,rs,Cl,Ws,Rn,Ki,Mt,Rr,bt.length),pe.top+=-Ws*Rr,pe.bottom=pe.top+Rr,pe.left+=-Cl*Rn,pe.right=pe.left+Rn}(H,t,n,s,me,b,S,k,j,R,W,ee),!function(pe){for(const Fe of pe)if(Fe.positionedGlyphs.length!==0)return!1;return!0}(Re)&&H}const Ef={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Fp={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},If={40:!0};function gd(i,t,n,s,f,v){if(t.imageName){const b=s[t.imageName];return b?b.displaySize[0]*t.scale*Ao/v+f:0}{const b=n[t.fontStack],S=b&&b[i];return S?S.metrics.advance*t.scale+f:0}}function Mf(i,t,n,s){const f=Math.pow(i-t,2);return s?i<t?f/2:2*f:f+Math.abs(n)*n}function kf(i,t,n){let s=0;return i===10&&(s-=1e4),n&&(s+=150),i!==40&&i!==65288||(s+=50),t!==41&&t!==65289||(s+=50),s}function cp(i,t,n,s,f,v){let b=null,S=Mf(t,n,f,v);for(const k of s){const R=Mf(t-k.x,n,f,v)+k.badness;R<=S&&(b=k,S=R)}return{index:i,x:t,priorBreak:b,badness:S}}function Bp(i){return i?Bp(i.priorBreak).concat(i.index):[]}function _c(i,t,n,s,f,v){if(!i)return[];const b=[],S=function(j,W,K,ee,ie,me){let Ce=0;for(let Ve=0;Ve<j.length();Ve++){const Re=j.getSection(Ve);Ce+=gd(j.getCharCode(Ve),Re,ee,ie,W,me)}return Ce/Math.max(1,Math.ceil(Ce/K))}(i,t,n,s,f,v),k=i.text.indexOf("")>=0;let R=0;for(let j=0;j<i.length();j++){const W=i.getSection(j),K=i.getCharCode(j);if(Ef[K]||(R+=gd(K,W,s,f,t,v)),j<i.length()-1){const ee=!((F=K)<11904)&&(!!hn["CJK Compatibility Forms"](F)||!!hn["CJK Compatibility"](F)||!!hn["CJK Strokes"](F)||!!hn["CJK Symbols and Punctuation"](F)||!!hn["Enclosed CJK Letters and Months"](F)||!!hn["Halfwidth and Fullwidth Forms"](F)||!!hn["Ideographic Description Characters"](F)||!!hn["Vertical Forms"](F)||Os.test(String.fromCodePoint(F)));(Fp[K]||ee||W.imageName||j!==i.length()-2&&If[i.getCharCode(j+1)])&&b.push(cp(j+1,R,S,b,kf(K,i.getCharCode(j+1),ee&&k),!1))}}var F;return Bp(cp(i.length(),R,S,b,0,!0))}function hp(i){let t=.5,n=.5;switch(i){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(i){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:t,verticalAlign:n}}function Qd(i,t,n){const s=t.getMaxScale()*Ao,{maxImageWidth:f,maxImageHeight:v}=t.getMaxImageSize(i),b=Math.max(s,v*n);return{verticalLineContentWidth:Math.max(s,f*n),horizontalLineContentHeight:b}}function Np(i){switch(i){case"top":return 0;case"center":return .5;default:return 1}}function Af(i,t,n){return!(i===M.al.horizontal||!t&&!vi(n)||t&&(Ef[n]||(s=n,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(s)))));var s}function o(i,t,n,s,f,v){const b=v[i.fontStack],S=function(R,F,j,W){if(R&&R.rect)return R;const K=F[j.fontStack],ee=K&&K[W];return ee?{rect:null,metrics:ee.metrics}:null}(b&&b[t],f,i,t);if(S===null)return null;let k;if(n)k=s.verticalLineContentWidth-i.scale*Ao;else{const R=Np(i.verticalAlign);k=(s.horizontalLineContentHeight-i.scale*Ao)*R}return{rect:S.rect,metrics:S.metrics,baselineOffset:k}}function l(i,t,n,s,f){const v=f[i.imageName];if(!v)return null;const b=v.paddedRect,S=v.displaySize,k={width:S[0],height:S[1],left:Gs,top:-3,advance:t?S[1]:S[0]};let R;if(t)R=s.verticalLineContentWidth-S[1]*i.scale;else{const F=Np(i.verticalAlign);R=(s.horizontalLineContentHeight-S[1]*i.scale)*F}return{rect:b,metrics:k,baselineOffset:R,imageOffset:(t?S[0]:S[1])*i.scale-Ao*n}}function x(i,t,n,s){if(s===0)return;const f=i[n],v=(i[n].x+f.metrics.advance*f.scale)*s;for(let b=t;b<=n;b++)i[b].x-=v}function C(i,t,n){const{horizontalAlign:s,verticalAlign:f}=hp(n),v=t[0]-i.displaySize[0]*s,b=t[1]-i.displaySize[1]*f;return{image:i,top:b,bottom:b+i.displaySize[1],left:v,right:v+i.displaySize[0]}}function z(i){var t,n;let s=i.left,f=i.top,v=i.right-s,b=i.bottom-f;const S=(t=i.image.textFitWidth)!==null&&t!==void 0?t:"stretchOrShrink",k=(n=i.image.textFitHeight)!==null&&n!==void 0?n:"stretchOrShrink",R=(i.image.content[2]-i.image.content[0])/(i.image.content[3]-i.image.content[1]);if(k==="proportional"){if(S==="stretchOnly"&&v/b<R||S==="proportional"){const F=Math.ceil(b*R);s*=F/v,v=F}}else if(S==="proportional"&&k==="stretchOnly"&&R!==0&&v/b>R){const F=Math.ceil(v/R);f*=F/b,b=F}return{x1:s,y1:f,x2:s+v,y2:f+b}}function U(i,t,n,s,f,v){const b=i.image;let S;if(b.content){const me=b.content,Ce=b.pixelRatio||1;S=[me[0]/Ce,me[1]/Ce,b.displaySize[0]-me[2]/Ce,b.displaySize[1]-me[3]/Ce]}const k=t.left*v,R=t.right*v;let F,j,W,K;n==="width"||n==="both"?(K=f[0]+k-s[3],j=f[0]+R+s[1]):(K=f[0]+(k+R-b.displaySize[0])/2,j=K+b.displaySize[0]);const ee=t.top*v,ie=t.bottom*v;return n==="height"||n==="both"?(F=f[1]+ee-s[0],W=f[1]+ie+s[2]):(F=f[1]+(ee+ie-b.displaySize[1])/2,W=F+b.displaySize[1]),{image:b,top:F,right:j,bottom:W,left:K,collisionPadding:S}}const oe=255,Ae=128,Ge=oe*Ae;function Et(i,t){const{expression:n}=t;if(n.kind==="constant")return{kind:"constant",layoutSize:n.evaluate(new oi(i+1))};if(n.kind==="source")return{kind:"source"};{const{zoomStops:s,interpolationType:f}=n;let v=0;for(;v<s.length&&s[v]<=i;)v++;v=Math.max(0,v-1);let b=v;for(;b<s.length&&s[b]<i+1;)b++;b=Math.min(s.length-1,b);const S=s[v],k=s[b];return n.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:k,interpolationType:f}:{kind:"camera",minZoom:S,maxZoom:k,minSize:n.evaluate(new oi(S)),maxSize:n.evaluate(new oi(k)),interpolationType:f}}}function Yt(i,t,n){let s="never";const f=i.get(t);return f?s=f:i.get(n)&&(s="always"),s}const nr=ts.VectorTileFeature.types,Qt=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Pr(i,t,n,s,f,v,b,S,k,R,F,j,W){const K=S?Math.min(Ge,Math.round(S[0])):0,ee=S?Math.min(Ge,Math.round(S[1])):0;i.emplaceBack(t,n,Math.round(32*s),Math.round(32*f),v,b,(K<<1)+(k?1:0),ee,16*R,16*F,256*j,256*W)}function Dr(i,t,n){i.emplaceBack(t.x,t.y,n),i.emplaceBack(t.x,t.y,n),i.emplaceBack(t.x,t.y,n),i.emplaceBack(t.x,t.y,n)}function jr(i){for(const t of i.sections)if(ia(t.text))return!0;return!1}class ho{constructor(t){this.layoutVertexArray=new pi,this.indexArray=new Cn,this.programConfigurations=t,this.segments=new An,this.dynamicLayoutVertexArray=new ri,this.opacityVertexArray=new Mi,this.hasVisibleVertices=!1,this.placedSymbolArray=new Le}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(t,n,s,f){this.isEmpty()||(s&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,dm.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,n),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,fd.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,Qt,!0),this.opacityVertexBuffer.itemSize=1),(s||f)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}lr("SymbolBuffers",ho);class ft{constructor(t,n,s){this.layoutVertexArray=new t,this.layoutAttributes=n,this.indexArray=new s,this.segments=new An,this.collisionVertexArray=new In}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,Sf.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}lr("CollisionBuffers",ft);class Ke{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(b=>b.id),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const n=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Et(this.zoom,n["text-size"]),this.iconSizeData=Et(this.zoom,n["icon-size"]);const s=this.layers[0].layout,f=s.get("symbol-sort-key"),v=s.get("symbol-z-order");this.canOverlap=Yt(s,"text-overlap","text-allow-overlap")!=="never"||Yt(s,"icon-overlap","icon-allow-overlap")!=="never"||s.get("text-ignore-placement")||s.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!f.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,s.get("symbol-placement")==="point"&&(this.writingModes=s.get("text-writing-mode").map(b=>M.al[b])),this.stateDependentLayerIds=this.layers.filter(b=>b.isStateDependent()).map(b=>b.id),this.sourceID=t.sourceID}createArrays(){this.text=new ho(new vl(this.layers,this.zoom,t=>/^text/.test(t))),this.icon=new ho(new vl(this.layers,this.zoom,t=>/^icon/.test(t))),this.glyphOffsetArray=new Ne,this.lineVertexArray=new je,this.symbolInstances=new De,this.textAnchorOffsets=new It}calculateGlyphDependencies(t,n,s,f,v){for(let b=0;b<t.length;b++)if(n[t.charCodeAt(b)]=!0,(s||f)&&v){const S=Yd[t.charAt(b)];S&&(n[S.charCodeAt(0)]=!0)}}populate(t,n,s){const f=this.layers[0],v=f.layout,b=v.get("text-font"),S=v.get("text-field"),k=v.get("icon-image"),R=(S.value.kind!=="constant"||S.value.value instanceof ui&&!S.value.value.isEmpty()||S.value.value.toString().length>0)&&(b.value.kind!=="constant"||b.value.value.length>0),F=k.value.kind!=="constant"||!!k.value.value||Object.keys(k.parameters).length>0,j=v.get("symbol-sort-key");if(this.features=[],!R&&!F)return;const W=n.iconDependencies,K=n.glyphDependencies,ee=n.availableImages,ie=new oi(this.zoom);for(const{feature:me,id:Ce,index:Ve,sourceLayerIndex:Re}of t){const H=f._featureFilter.needGeometry,pe=Lu(me,H);if(!f._featureFilter.filter(ie,pe,s))continue;let Fe,pt;if(H||(pe.geometry=xl(me)),R){const bt=f.getValueAndResolveTokens("text-field",pe,s,ee),Mt=ui.factory(bt),Kt=this.hasRTLText=this.hasRTLText||jr(Mt);(!Kt||Nl.getRTLTextPluginStatus()==="unavailable"||Kt&&Nl.isParsed())&&(Fe=zp(Mt,f,pe))}if(F){const bt=f.getValueAndResolveTokens("icon-image",pe,s,ee);pt=bt instanceof ro?bt:ro.fromString(bt)}if(!Fe&&!pt)continue;const jt=this.sortFeaturesByKey?j.evaluate(pe,{},s):void 0;if(this.features.push({id:Ce,text:Fe,icon:pt,index:Ve,sourceLayerIndex:Re,geometry:pe.geometry,properties:me.properties,type:nr[me.type],sortKey:jt}),pt&&(W[pt.name]=!0),Fe){const bt=b.evaluate(pe,{},s).join(","),Mt=v.get("text-rotation-alignment")!=="viewport"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(M.al.vertical)>=0;for(const Kt of Fe.sections)if(Kt.image)W[Kt.image.name]=!0;else{const Vt=Fl(Fe.toString()),qt=Kt.fontStack||bt,Rt=K[qt]=K[qt]||{};this.calculateGlyphDependencies(Kt.text,Rt,Mt,this.allowVerticalPlacement,Vt)}}}v.get("symbol-placement")==="line"&&(this.features=function(me){const Ce={},Ve={},Re=[];let H=0;function pe(bt){Re.push(me[bt]),H++}function Fe(bt,Mt,Kt){const Vt=Ve[bt];return delete Ve[bt],Ve[Mt]=Vt,Re[Vt].geometry[0].pop(),Re[Vt].geometry[0]=Re[Vt].geometry[0].concat(Kt[0]),Vt}function pt(bt,Mt,Kt){const Vt=Ce[Mt];return delete Ce[Mt],Ce[bt]=Vt,Re[Vt].geometry[0].shift(),Re[Vt].geometry[0]=Kt[0].concat(Re[Vt].geometry[0]),Vt}function jt(bt,Mt,Kt){const Vt=Kt?Mt[0][Mt[0].length-1]:Mt[0][0];return`${bt}:${Vt.x}:${Vt.y}`}for(let bt=0;bt<me.length;bt++){const Mt=me[bt],Kt=Mt.geometry,Vt=Mt.text?Mt.text.toString():null;if(!Vt){pe(bt);continue}const qt=jt(Vt,Kt),Rt=jt(Vt,Kt,!0);if(qt in Ve&&Rt in Ce&&Ve[qt]!==Ce[Rt]){const Er=pt(qt,Rt,Kt),Wr=Fe(qt,Rt,Re[Er].geometry);delete Ce[qt],delete Ve[Rt],Ve[jt(Vt,Re[Wr].geometry,!0)]=Wr,Re[Er].geometry=null}else qt in Ve?Fe(qt,Rt,Kt):Rt in Ce?pt(qt,Rt,Kt):(pe(bt),Ce[qt]=H-1,Ve[Rt]=H-1)}return Re.filter(bt=>bt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((me,Ce)=>me.sortKey-Ce.sortKey)}update(t,n,s){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,n,this.layers,s),this.icon.programConfigurations.updatePaintArrays(t,n,this.layers,s))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,n){const s=this.lineVertexArray.length;if(t.segment!==void 0){let f=t.dist(n[t.segment+1]),v=t.dist(n[t.segment]);const b={};for(let S=t.segment+1;S<n.length;S++)b[S]={x:n[S].x,y:n[S].y,tileUnitDistanceFromAnchor:f},S<n.length-1&&(f+=n[S+1].dist(n[S]));for(let S=t.segment||0;S>=0;S--)b[S]={x:n[S].x,y:n[S].y,tileUnitDistanceFromAnchor:v},S>0&&(v+=n[S-1].dist(n[S]));for(let S=0;S<n.length;S++){const k=b[S];this.lineVertexArray.emplaceBack(k.x,k.y,k.tileUnitDistanceFromAnchor)}}return{lineStartIndex:s,lineLength:this.lineVertexArray.length-s}}addSymbols(t,n,s,f,v,b,S,k,R,F,j,W){const K=t.indexArray,ee=t.layoutVertexArray,ie=t.segments.prepareSegment(4*n.length,ee,K,this.canOverlap?b.sortKey:void 0),me=this.glyphOffsetArray.length,Ce=ie.vertexLength,Ve=this.allowVerticalPlacement&&S===M.al.vertical?Math.PI/2:0,Re=b.text&&b.text.sections;for(let H=0;H<n.length;H++){const{tl:pe,tr:Fe,bl:pt,br:jt,tex:bt,pixelOffsetTL:Mt,pixelOffsetBR:Kt,minFontScaleX:Vt,minFontScaleY:qt,glyphOffset:Rt,isSDF:Er,sectionIndex:Wr}=n[H],Gr=ie.vertexLength,Rr=Rt[1];Pr(ee,k.x,k.y,pe.x,Rr+pe.y,bt.x,bt.y,s,Er,Mt.x,Mt.y,Vt,qt),Pr(ee,k.x,k.y,Fe.x,Rr+Fe.y,bt.x+bt.w,bt.y,s,Er,Kt.x,Mt.y,Vt,qt),Pr(ee,k.x,k.y,pt.x,Rr+pt.y,bt.x,bt.y+bt.h,s,Er,Mt.x,Kt.y,Vt,qt),Pr(ee,k.x,k.y,jt.x,Rr+jt.y,bt.x+bt.w,bt.y+bt.h,s,Er,Kt.x,Kt.y,Vt,qt),Dr(t.dynamicLayoutVertexArray,k,Ve),K.emplaceBack(Gr,Gr+2,Gr+1),K.emplaceBack(Gr+1,Gr+2,Gr+3),ie.vertexLength+=4,ie.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Rt[0]),H!==n.length-1&&Wr===n[H+1].sectionIndex||t.programConfigurations.populatePaintArrays(ee.length,b,b.index,{},W,Re&&Re[Wr])}t.placedSymbolArray.emplaceBack(k.x,k.y,me,this.glyphOffsetArray.length-me,Ce,R,F,k.segment,s?s[0]:0,s?s[1]:0,f[0],f[1],S,0,!1,0,j)}_addCollisionDebugVertex(t,n,s,f,v,b){return n.emplaceBack(0,0),t.emplaceBack(s.x,s.y,f,v,Math.round(b.x),Math.round(b.y))}addCollisionDebugVertices(t,n,s,f,v,b,S){const k=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),R=k.vertexLength,F=v.layoutVertexArray,j=v.collisionVertexArray,W=S.anchorX,K=S.anchorY;this._addCollisionDebugVertex(F,j,b,W,K,new we(t,n)),this._addCollisionDebugVertex(F,j,b,W,K,new we(s,n)),this._addCollisionDebugVertex(F,j,b,W,K,new we(s,f)),this._addCollisionDebugVertex(F,j,b,W,K,new we(t,f)),k.vertexLength+=4;const ee=v.indexArray;ee.emplaceBack(R,R+1),ee.emplaceBack(R+1,R+2),ee.emplaceBack(R+2,R+3),ee.emplaceBack(R+3,R),k.primitiveLength+=4}addDebugCollisionBoxes(t,n,s,f){for(let v=t;v<n;v++){const b=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(b.x1,b.y1,b.x2,b.y2,f?this.textCollisionBox:this.iconCollisionBox,b.anchorPoint,s)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ft(ki,qi.members,Hi),this.iconCollisionBox=new ft(ki,qi.members,Hi);for(let t=0;t<this.symbolInstances.length;t++){const n=this.symbolInstances.get(t);this.addDebugCollisionBoxes(n.textBoxStartIndex,n.textBoxEndIndex,n,!0),this.addDebugCollisionBoxes(n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n,!0),this.addDebugCollisionBoxes(n.iconBoxStartIndex,n.iconBoxEndIndex,n,!1),this.addDebugCollisionBoxes(n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex,n,!1)}}_deserializeCollisionBoxesForSymbol(t,n,s,f,v,b,S,k,R){const F={};for(let j=n;j<s;j++){const W=t.get(j);F.textBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},F.textFeatureIndex=W.featureIndex;break}for(let j=f;j<v;j++){const W=t.get(j);F.verticalTextBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},F.verticalTextFeatureIndex=W.featureIndex;break}for(let j=b;j<S;j++){const W=t.get(j);F.iconBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},F.iconFeatureIndex=W.featureIndex;break}for(let j=k;j<R;j++){const W=t.get(j);F.verticalIconBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},F.verticalIconFeatureIndex=W.featureIndex;break}return F}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let n=0;n<this.symbolInstances.length;n++){const s=this.symbolInstances.get(n);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,s.textBoxStartIndex,s.textBoxEndIndex,s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s.iconBoxStartIndex,s.iconBoxEndIndex,s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,n){const s=t.placedSymbolArray.get(n),f=s.vertexStartIndex+4*s.numGlyphs;for(let v=s.vertexStartIndex;v<f;v+=4)t.indexArray.emplaceBack(v,v+2,v+1),t.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const n=Math.sin(t),s=Math.cos(t),f=[],v=[],b=[];for(let S=0;S<this.symbolInstances.length;++S){b.push(S);const k=this.symbolInstances.get(S);f.push(0|Math.round(n*k.anchorX+s*k.anchorY)),v.push(k.featureIndex)}return b.sort((S,k)=>f[S]-f[k]||v[k]-v[S]),b}addToSortKeyRanges(t,n){const s=this.sortKeyRanges[this.sortKeyRanges.length-1];s&&s.sortKey===n?s.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:n,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const n of this.symbolInstanceIndexes){const s=this.symbolInstances.get(n);this.featureSortOrder.push(s.featureIndex),[s.rightJustifiedTextSymbolIndex,s.centerJustifiedTextSymbolIndex,s.leftJustifiedTextSymbolIndex].forEach((f,v,b)=>{f>=0&&b.indexOf(f)===v&&this.addIndicesForPlacedSymbol(this.text,f)}),s.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,s.verticalPlacedTextSymbolIndex),s.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,s.placedIconSymbolIndex),s.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,s.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let vt,hr;lr("SymbolBucket",Ke,{omit:["layers","collisionBoxArray","features","compareText"]}),Ke.MAX_GLYPHS=65535,Ke.addDynamicAttributes=Dr;var Vr={get paint(){return hr=hr||new Li({"icon-opacity":new Ur(fe.paint_symbol["icon-opacity"]),"icon-color":new Ur(fe.paint_symbol["icon-color"]),"icon-halo-color":new Ur(fe.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ur(fe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ur(fe.paint_symbol["icon-halo-blur"]),"icon-translate":new dr(fe.paint_symbol["icon-translate"]),"icon-translate-anchor":new dr(fe.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ur(fe.paint_symbol["text-opacity"]),"text-color":new Ur(fe.paint_symbol["text-color"],{runtimeType:Vn,getOverride:i=>i.textColor,hasOverride:i=>!!i.textColor}),"text-halo-color":new Ur(fe.paint_symbol["text-halo-color"]),"text-halo-width":new Ur(fe.paint_symbol["text-halo-width"]),"text-halo-blur":new Ur(fe.paint_symbol["text-halo-blur"]),"text-translate":new dr(fe.paint_symbol["text-translate"]),"text-translate-anchor":new dr(fe.paint_symbol["text-translate-anchor"])})},get layout(){return vt=vt||new Li({"symbol-placement":new dr(fe.layout_symbol["symbol-placement"]),"symbol-spacing":new dr(fe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new dr(fe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ur(fe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new dr(fe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new dr(fe.layout_symbol["icon-allow-overlap"]),"icon-overlap":new dr(fe.layout_symbol["icon-overlap"]),"icon-ignore-placement":new dr(fe.layout_symbol["icon-ignore-placement"]),"icon-optional":new dr(fe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new dr(fe.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ur(fe.layout_symbol["icon-size"]),"icon-text-fit":new dr(fe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new dr(fe.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ur(fe.layout_symbol["icon-image"]),"icon-rotate":new Ur(fe.layout_symbol["icon-rotate"]),"icon-padding":new Ur(fe.layout_symbol["icon-padding"]),"icon-keep-upright":new dr(fe.layout_symbol["icon-keep-upright"]),"icon-offset":new Ur(fe.layout_symbol["icon-offset"]),"icon-anchor":new Ur(fe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new dr(fe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new dr(fe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new dr(fe.layout_symbol["text-rotation-alignment"]),"text-field":new Ur(fe.layout_symbol["text-field"]),"text-font":new Ur(fe.layout_symbol["text-font"]),"text-size":new Ur(fe.layout_symbol["text-size"]),"text-max-width":new Ur(fe.layout_symbol["text-max-width"]),"text-line-height":new dr(fe.layout_symbol["text-line-height"]),"text-letter-spacing":new Ur(fe.layout_symbol["text-letter-spacing"]),"text-justify":new Ur(fe.layout_symbol["text-justify"]),"text-radial-offset":new Ur(fe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new dr(fe.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Ur(fe.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Ur(fe.layout_symbol["text-anchor"]),"text-max-angle":new dr(fe.layout_symbol["text-max-angle"]),"text-writing-mode":new dr(fe.layout_symbol["text-writing-mode"]),"text-rotate":new Ur(fe.layout_symbol["text-rotate"]),"text-padding":new dr(fe.layout_symbol["text-padding"]),"text-keep-upright":new dr(fe.layout_symbol["text-keep-upright"]),"text-transform":new Ur(fe.layout_symbol["text-transform"]),"text-offset":new Ur(fe.layout_symbol["text-offset"]),"text-allow-overlap":new dr(fe.layout_symbol["text-allow-overlap"]),"text-overlap":new dr(fe.layout_symbol["text-overlap"]),"text-ignore-placement":new dr(fe.layout_symbol["text-ignore-placement"]),"text-optional":new dr(fe.layout_symbol["text-optional"])})}};class ln{constructor(t){if(t.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=t.property.overrides?t.property.overrides.runtimeType:Fr,this.defaultValue=t}evaluate(t){if(t.formattedSection){const n=this.defaultValue.property.overrides;if(n&&n.hasOverride(t.formattedSection))return n.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}lr("FormatSectionOverride",ln,{omit:["defaultValue"]});class Yr extends Ns{constructor(t){super(t,Vr)}recalculate(t,n){if(super.recalculate(t,n),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const s=this.layout.get("text-writing-mode");if(s){const f=[];for(const v of s)f.indexOf(v)<0&&f.push(v);this.layout._values["text-writing-mode"]=f}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(t,n,s,f){const v=this.layout.get(t).evaluate(n,{},s,f),b=this._unevaluatedLayout._values[t];return b.isDataDriven()||ul(b.value)||!v?v:function(S,k){return k.replace(/{([^{}]+)}/g,(R,F)=>S&&F in S?String(S[F]):"")}(n.properties,v)}createBucket(t){return new Ke(t)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const t of Vr.paint.overridableProperties){if(!Yr.hasPaintOverride(this.layout,t))continue;const n=this.paint.get(t),s=new ln(n),f=new Nc(s,n.property.specification);let v=null;v=n.value.kind==="constant"||n.value.kind==="source"?new $c("source",f):new jc("composite",f,n.value.zoomStops),this.paint._values[t]=new ms(n.property,v,n.parameters)}}_handleOverridablePaintPropertyUpdate(t,n,s){return!(!this.layout||n.isDataDriven()||s.isDataDriven())&&Yr.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,n){const s=t.get("text-field"),f=Vr.paint.properties[n];let v=!1;const b=S=>{for(const k of S)if(f.overrides&&f.overrides.hasOverride(k))return void(v=!0)};if(s.value.kind==="constant"&&s.value.value instanceof ui)b(s.value.value.sections);else if(s.value.kind==="source"){const S=R=>{v||(R instanceof gr&&hi(R.value)===Qs?b(R.value.sections):R instanceof kl?b(R.sections):R.eachChild(S))},k=s.value;k._styleExpression&&S(k._styleExpression.expression)}return v}}let fn;var _s={get paint(){return fn=fn||new Li({"background-color":new dr(fe.paint_background["background-color"]),"background-pattern":new Bs(fe.paint_background["background-pattern"]),"background-opacity":new dr(fe.paint_background["background-opacity"])})}};class ai extends Ns{constructor(t){super(t,_s)}}let vc;var pm={get paint(){return vc=vc||new Li({"raster-opacity":new dr(fe.paint_raster["raster-opacity"]),"raster-hue-rotate":new dr(fe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new dr(fe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new dr(fe.paint_raster["raster-brightness-max"]),"raster-saturation":new dr(fe.paint_raster["raster-saturation"]),"raster-contrast":new dr(fe.paint_raster["raster-contrast"]),"raster-resampling":new dr(fe.paint_raster["raster-resampling"]),"raster-fade-duration":new dr(fe.paint_raster["raster-fade-duration"])})}};class Ry extends Ns{constructor(t){super(t,pm)}}class zy extends Ns{constructor(t){super(t,{}),this.onAdd=n=>{this.implementation.onAdd&&this.implementation.onAdd(n,n.painter.context.gl)},this.onRemove=n=>{this.implementation.onRemove&&this.implementation.onRemove(n,n.painter.context.gl)},this.implementation=t}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Ly{constructor(t){this._methodToThrottle=t,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Dy={once:!0},mm=63710088e-1;class yd{constructor(t,n){if(isNaN(t)||isNaN(n))throw new Error(`Invalid LngLat object: (${t}, ${n})`);if(this.lng=+t,this.lat=+n,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new yd(ir(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const n=Math.PI/180,s=this.lat*n,f=t.lat*n,v=Math.sin(s)*Math.sin(f)+Math.cos(s)*Math.cos(f)*Math.cos((t.lng-this.lng)*n);return mm*Math.acos(Math.min(v,1))}static convert(t){if(t instanceof yd)return t;if(Array.isArray(t)&&(t.length===2||t.length===3))return new yd(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&typeof t=="object"&&t!==null)return new yd(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const dg=2*Math.PI*mm;function fg(i){return dg*Math.cos(i*Math.PI/180)}function Bu(i){return(180+i)/360}function pg(i){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360}function mg(i,t){return i/fg(t)}function Ah(i){return 360/Math.PI*Math.atan(Math.exp((180-360*i)*Math.PI/180))-90}function Mn(i,t){return i*fg(Ah(t))}class dp{constructor(t,n,s=0){this.x=+t,this.y=+n,this.z=+s}static fromLngLat(t,n=0){const s=yd.convert(t);return new dp(Bu(s.lng),pg(s.lat),mg(n,s.lat))}toLngLat(){return new yd(360*this.x-180,Ah(this.y))}toAltitude(){return Mn(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/dg*(t=Ah(this.y),1/Math.cos(t*Math.PI/180));var t}}function Tl(i,t,n){var s=2*Math.PI*6378137/256/Math.pow(2,n);return[i*s-2*Math.PI*6378137/2,t*s-2*Math.PI*6378137/2]}class Ro{constructor(t,n,s){if(!function(f,v,b){return!(f<0||f>25||b<0||b>=Math.pow(2,f)||v<0||v>=Math.pow(2,f))}(t,n,s))throw new Error(`x=${n}, y=${s}, z=${t} outside of bounds. 0<=x<${Math.pow(2,t)}, 0<=y<${Math.pow(2,t)} 0<=z<=25 `);this.z=t,this.x=n,this.y=s,this.key=Rf(0,t,t,n,s)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,n,s){const f=(b=this.y,S=this.z,k=Tl(256*(v=this.x),256*(b=Math.pow(2,S)-b-1),S),R=Tl(256*(v+1),256*(b+1),S),k[0]+","+k[1]+","+R[0]+","+R[1]);var v,b,S,k,R;const F=function(j,W,K){let ee,ie="";for(let me=j;me>0;me--)ee=1<<me-1,ie+=(W&ee?1:0)+(K&ee?2:0);return ie}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(s==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,n>1?"@2x":"").replace(/{quadkey}/g,F).replace(/{bbox-epsg-3857}/g,f)}isChildOf(t){const n=this.z-t.z;return n>0&&t.x===this.x>>n&&t.y===this.y>>n}getTilePoint(t){const n=Math.pow(2,this.z);return new we((t.x*n-this.x)*xt,(t.y*n-this.y)*xt)}toString(){return`${this.z}/${this.x}/${this.y}`}}class gg{constructor(t,n){this.wrap=t,this.canonical=n,this.key=Rf(t,n.z,n.z,n.x,n.y)}}class vs{constructor(t,n,s,f,v){if(this.terrainRttPosMatrix32f=null,t<s)throw new Error(`overscaledZ should be >= z; overscaledZ = ${t}; z = ${s}`);this.overscaledZ=t,this.wrap=n,this.canonical=new Ro(s,+f,+v),this.key=Rf(n,t,s,f,v)}clone(){return new vs(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const n=this.canonical.z-t;return t>this.canonical.z?new vs(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new vs(t,this.wrap,t,this.canonical.x>>n,this.canonical.y>>n)}calculateScaledKey(t,n){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const s=this.canonical.z-t;return t>this.canonical.z?Rf(this.wrap*+n,t,this.canonical.z,this.canonical.x,this.canonical.y):Rf(this.wrap*+n,t,t,this.canonical.x>>s,this.canonical.y>>s)}isChildOf(t){if(t.wrap!==this.wrap)return!1;const n=this.canonical.z-t.canonical.z;return t.overscaledZ===0||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>n&&t.canonical.y===this.canonical.y>>n}children(t){if(this.overscaledZ>=t)return[new vs(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const n=this.canonical.z+1,s=2*this.canonical.x,f=2*this.canonical.y;return[new vs(n,this.wrap,n,s,f),new vs(n,this.wrap,n,s+1,f),new vs(n,this.wrap,n,s,f+1),new vs(n,this.wrap,n,s+1,f+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new vs(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new vs(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new gg(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(t){return this.canonical.getTilePoint(new dp(t.x-this.wrap,t.y))}}function Rf(i,t,n,s,f){(i*=2)<0&&(i=-1*i-1);const v=1<<n;return(v*v*i+v*f+s).toString(36)+n.toString(36)+t.toString(36)}lr("CanonicalTileID",Ro),lr("OverscaledTileID",vs,{omit:["terrainRttPosMatrix32f"]});class yg{constructor(t,n,s,f=1,v=1,b=1,S=0){if(this.uid=t,n.height!==n.width)throw new RangeError("DEM tiles must be square");if(s&&!["mapbox","terrarium","custom"].includes(s))return void $r(`"${s}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=n.height;const k=this.dim=n.height-2;switch(this.data=new Uint32Array(n.data.buffer),s){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=f,this.greenFactor=v,this.blueFactor=b,this.baseShift=S;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let R=0;R<k;R++)this.data[this._idx(-1,R)]=this.data[this._idx(0,R)],this.data[this._idx(k,R)]=this.data[this._idx(k-1,R)],this.data[this._idx(R,-1)]=this.data[this._idx(R,0)],this.data[this._idx(R,k)]=this.data[this._idx(R,k-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(k,-1)]=this.data[this._idx(k-1,0)],this.data[this._idx(-1,k)]=this.data[this._idx(0,k-1)],this.data[this._idx(k,k)]=this.data[this._idx(k-1,k-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let R=0;R<k;R++)for(let F=0;F<k;F++){const j=this.get(R,F);j>this.max&&(this.max=j),j<this.min&&(this.min=j)}}get(t,n){const s=new Uint8Array(this.data.buffer),f=4*this._idx(t,n);return this.unpack(s[f],s[f+1],s[f+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(t,n){if(t<-1||t>=this.dim+1||n<-1||n>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(n+1)*this.stride+(t+1)}unpack(t,n,s){return t*this.redFactor+n*this.greenFactor+s*this.blueFactor-this.baseShift}getPixels(){return new ha({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,n,s){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let f=n*this.dim,v=n*this.dim+this.dim,b=s*this.dim,S=s*this.dim+this.dim;switch(n){case-1:f=v-1;break;case 1:v=f+1}switch(s){case-1:b=S-1;break;case 1:S=b+1}const k=-n*this.dim,R=-s*this.dim;for(let F=b;F<S;F++)for(let j=f;j<v;j++)this.data[this._idx(j,F)]=t.data[this._idx(j+k,F+R)]}}lr("DEMData",yg);class _g{constructor(t){this._stringToNumber={},this._numberToString=[];for(let n=0;n<t.length;n++){const s=t[n];this._stringToNumber[s]=n,this._numberToString[n]=s}}encode(t){return this._stringToNumber[t]}decode(t){if(t>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${t} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[t]}}class vg{constructor(t,n,s,f,v){this.type="Feature",this._vectorTileFeature=t,t._z=n,t._x=s,t._y=f,this.properties=t.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={geometry:this.geometry};for(const n in this)n!=="_geometry"&&n!=="_vectorTileFeature"&&(t[n]=this[n]);return t}}class xg{constructor(t,n){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new wa(xt,16,0),this.grid3D=new wa(xt,16,0),this.featureIndexArray=new ht,this.promoteId=n}insert(t,n,s,f,v,b){const S=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(s,f,v);const k=b?this.grid3D:this.grid;for(let R=0;R<n.length;R++){const F=n[R],j=[1/0,1/0,-1/0,-1/0];for(let W=0;W<F.length;W++){const K=F[W];j[0]=Math.min(j[0],K.x),j[1]=Math.min(j[1],K.y),j[2]=Math.max(j[2],K.x),j[3]=Math.max(j[3],K.y)}j[0]<xt&&j[1]<xt&&j[2]>=0&&j[3]>=0&&k.insert(S,j[0],j[1],j[2],j[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new ts.VectorTile(new Sl(this.rawTileData)).layers,this.sourceLayerCoder=new _g(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(t,n,s,f){this.loadVTLayers();const v=t.params,b=xt/t.tileSize/t.scale,S=ph(v.filter),k=t.queryGeometry,R=t.queryPadding*b,F=bg(k),j=this.grid.query(F.minX-R,F.minY-R,F.maxX+R,F.maxY+R),W=bg(t.cameraQueryGeometry),K=this.grid3D.query(W.minX-R,W.minY-R,W.maxX+R,W.maxY+R,(me,Ce,Ve,Re)=>function(H,pe,Fe,pt,jt){for(const Mt of H)if(pe<=Mt.x&&Fe<=Mt.y&&pt>=Mt.x&&jt>=Mt.y)return!0;const bt=[new we(pe,Fe),new we(pe,jt),new we(pt,jt),new we(pt,Fe)];if(H.length>2){for(const Mt of bt)if(ca(H,Mt))return!0}for(let Mt=0;Mt<H.length-1;Mt++)if(qf(H[Mt],H[Mt+1],bt))return!0;return!1}(t.cameraQueryGeometry,me-R,Ce-R,Ve+R,Re+R));for(const me of K)j.push(me);j.sort(Rh);const ee={};let ie;for(let me=0;me<j.length;me++){const Ce=j[me];if(Ce===ie)continue;ie=Ce;const Ve=this.featureIndexArray.get(Ce);let Re=null;this.loadMatchingFeature(ee,Ve.bucketIndex,Ve.sourceLayerIndex,Ve.featureIndex,S,v.layers,v.availableImages,n,s,f,(H,pe,Fe)=>(Re||(Re=xl(H)),pe.queryIntersectsFeature({queryGeometry:k,feature:H,featureState:Fe,geometry:Re,zoom:this.z,transform:t.transform,pixelsToTileUnits:b,pixelPosMatrix:t.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:t.getElevation})))}return ee}loadMatchingFeature(t,n,s,f,v,b,S,k,R,F,j){const W=this.bucketLayerIDs[n];if(b&&!W.some(me=>b.has(me)))return;const K=this.sourceLayerCoder.decode(s),ee=this.vtLayers[K].feature(f);if(v.needGeometry){const me=Lu(ee,!0);if(!v.filter(new oi(this.tileID.overscaledZ),me,this.tileID.canonical))return}else if(!v.filter(new oi(this.tileID.overscaledZ),ee))return;const ie=this.getId(ee,K);for(let me=0;me<W.length;me++){const Ce=W[me];if(b&&!b.has(Ce))continue;const Ve=k[Ce];if(!Ve)continue;let Re={};ie&&F&&(Re=F.getState(Ve.sourceLayer||"_geojsonTileLayer",ie));const H=Sr({},R[Ce]);H.paint=$p(H.paint,Ve.paint,ee,Re,S),H.layout=$p(H.layout,Ve.layout,ee,Re,S);const pe=!j||j(ee,Ve,Re);if(!pe)continue;const Fe=new vg(ee,this.z,this.x,this.y,ie);Fe.layer=H;let pt=t[Ce];pt===void 0&&(pt=t[Ce]=[]),pt.push({featureIndex:f,feature:Fe,intersectionZ:pe})}}lookupSymbolFeatures(t,n,s,f,v,b,S,k){const R={};this.loadVTLayers();const F=ph(v);for(const j of t)this.loadMatchingFeature(R,s,f,j,F,b,S,k,n);return R}hasLayer(t){for(const n of this.bucketLayerIDs)for(const s of n)if(t===s)return!0;return!1}getId(t,n){var s;let f=t.id;return this.promoteId&&(f=t.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[n]],typeof f=="boolean"&&(f=Number(f)),f===void 0&&(!((s=t.properties)===null||s===void 0)&&s.cluster)&&this.promoteId&&(f=Number(t.properties.cluster_id))),f}}function $p(i,t,n,s,f){return pr(i,(v,b)=>{const S=t instanceof Gc?t.get(b):null;return S&&S.evaluate?S.evaluate(n,s,f):S})}function bg(i){let t=1/0,n=1/0,s=-1/0,f=-1/0;for(const v of i)t=Math.min(t,v.x),n=Math.min(n,v.y),s=Math.max(s,v.x),f=Math.max(f,v.y);return{minX:t,minY:n,maxX:s,maxY:f}}function Rh(i,t){return t-i}function gm(i,t,n,s,f){const v=[];for(let b=0;b<i.length;b++){const S=i[b];let k;for(let R=0;R<S.length-1;R++){let F=S[R],j=S[R+1];F.x<t&&j.x<t||(F.x<t?F=new we(t,F.y+(t-F.x)/(j.x-F.x)*(j.y-F.y))._round():j.x<t&&(j=new we(t,F.y+(t-F.x)/(j.x-F.x)*(j.y-F.y))._round()),F.y<n&&j.y<n||(F.y<n?F=new we(F.x+(n-F.y)/(j.y-F.y)*(j.x-F.x),n)._round():j.y<n&&(j=new we(F.x+(n-F.y)/(j.y-F.y)*(j.x-F.x),n)._round()),F.x>=s&&j.x>=s||(F.x>=s?F=new we(s,F.y+(s-F.x)/(j.x-F.x)*(j.y-F.y))._round():j.x>=s&&(j=new we(s,F.y+(s-F.x)/(j.x-F.x)*(j.y-F.y))._round()),F.y>=f&&j.y>=f||(F.y>=f?F=new we(F.x+(f-F.y)/(j.y-F.y)*(j.x-F.x),f)._round():j.y>=f&&(j=new we(F.x+(f-F.y)/(j.y-F.y)*(j.x-F.x),f)._round()),k&&F.equals(k[k.length-1])||(k=[F],v.push(k)),k.push(j)))))}}return v}lr("FeatureIndex",xg,{omit:["rawTileData","sourceLayerCoder"]});class xc extends we{constructor(t,n,s,f){super(t,n),this.angle=s,f!==void 0&&(this.segment=f)}clone(){return new xc(this.x,this.y,this.angle,this.segment)}}function So(i,t,n,s,f){if(t.segment===void 0||n===0)return!0;let v=t,b=t.segment+1,S=0;for(;S>-n/2;){if(b--,b<0)return!1;S-=i[b].dist(v),v=i[b]}S+=i[b].dist(i[b+1]),b++;const k=[];let R=0;for(;S<n/2;){const F=i[b],j=i[b+1];if(!j)return!1;let W=i[b-1].angleTo(F)-F.angleTo(j);for(W=Math.abs((W+3*Math.PI)%(2*Math.PI)-Math.PI),k.push({distance:S,angleDelta:W}),R+=W;S-k[0].distance>s;)R-=k.shift().angleDelta;if(R>f)return!1;b++,S+=F.dist(j)}return!0}function zo(i){let t=0;for(let n=0;n<i.length-1;n++)t+=i[n].dist(i[n+1]);return t}function ym(i,t,n){return i?.6*t*n:0}function wg(i,t){return Math.max(i?i.right-i.left:0,t?t.right-t.left:0)}function Oy(i,t,n,s,f,v){const b=ym(n,f,v),S=wg(n,s)*v;let k=0;const R=zo(i)/2;for(let F=0;F<i.length-1;F++){const j=i[F],W=i[F+1],K=j.dist(W);if(k+K>R){const ee=(R-k)/K,ie=hs.number(j.x,W.x,ee),me=hs.number(j.y,W.y,ee),Ce=new xc(ie,me,W.angleTo(j),F);return Ce._round(),!b||So(i,Ce,S,b,t)?Ce:void 0}k+=K}}function Fy(i,t,n,s,f,v,b,S,k){const R=ym(s,v,b),F=wg(s,f),j=F*b,W=i[0].x===0||i[0].x===k||i[0].y===0||i[0].y===k;return t-j<t/4&&(t=j+t/4),Sg(i,W?t/2*S%t:(F/2+2*v)*b*S%t,t,R,n,j,W,!1,k)}function Sg(i,t,n,s,f,v,b,S,k){const R=v/2,F=zo(i);let j=0,W=t-n,K=[];for(let ee=0;ee<i.length-1;ee++){const ie=i[ee],me=i[ee+1],Ce=ie.dist(me),Ve=me.angleTo(ie);for(;W+n<j+Ce;){W+=n;const Re=(W-j)/Ce,H=hs.number(ie.x,me.x,Re),pe=hs.number(ie.y,me.y,Re);if(H>=0&&H<k&&pe>=0&&pe<k&&W-R>=0&&W+R<=F){const Fe=new xc(H,pe,Ve,ee);Fe._round(),s&&!So(i,Fe,v,s,f)||K.push(Fe)}}j+=Ce}return S||K.length||b||(K=Sg(i,j/2,n,s,f,v,b,!0,k)),K}lr("Anchor",xc);const fp=Gs;function Tg(i,t,n,s){const f=[],v=i.image,b=v.pixelRatio,S=v.paddedRect.w-2*fp,k=v.paddedRect.h-2*fp;let R={x1:i.left,y1:i.top,x2:i.right,y2:i.bottom};const F=v.stretchX||[[0,S]],j=v.stretchY||[[0,k]],W=(Rt,Er)=>Rt+Er[1]-Er[0],K=F.reduce(W,0),ee=j.reduce(W,0),ie=S-K,me=k-ee;let Ce=0,Ve=K,Re=0,H=ee,pe=0,Fe=ie,pt=0,jt=me;if(v.content&&s){const Rt=v.content,Er=Rt[2]-Rt[0],Wr=Rt[3]-Rt[1];(v.textFitWidth||v.textFitHeight)&&(R=z(i)),Ce=pp(F,0,Rt[0]),Re=pp(j,0,Rt[1]),Ve=pp(F,Rt[0],Rt[2]),H=pp(j,Rt[1],Rt[3]),pe=Rt[0]-Ce,pt=Rt[1]-Re,Fe=Er-Ve,jt=Wr-H}const bt=R.x1,Mt=R.y1,Kt=R.x2-bt,Vt=R.y2-Mt,qt=(Rt,Er,Wr,Gr)=>{const Rr=Lf(Rt.stretch-Ce,Ve,Kt,bt),Rn=jp(Rt.fixed-pe,Fe,Rt.stretch,K),Ki=Lf(Er.stretch-Re,H,Vt,Mt),rs=jp(Er.fixed-pt,jt,Er.stretch,ee),pa=Lf(Wr.stretch-Ce,Ve,Kt,bt),lu=jp(Wr.fixed-pe,Fe,Wr.stretch,K),Cl=Lf(Gr.stretch-Re,H,Vt,Mt),Ws=jp(Gr.fixed-pt,jt,Gr.stretch,ee),Xi=new we(Rr,Ki),xs=new we(pa,Ki),Hs=new we(pa,Cl),qs=new we(Rr,Cl),Qa=new we(Rn/b,rs/b),uu=new we(lu/b,Ws/b),bs=t*Math.PI/180;if(bs){const ws=Math.sin(bs),Ss=Math.cos(bs),Uo=[Ss,-ws,ws,Ss];Xi._matMult(Uo),xs._matMult(Uo),qs._matMult(Uo),Hs._matMult(Uo)}const Pl=Rt.stretch+Rt.fixed,ns=Er.stretch+Er.fixed;return{tl:Xi,tr:xs,bl:qs,br:Hs,tex:{x:v.paddedRect.x+fp+Pl,y:v.paddedRect.y+fp+ns,w:Wr.stretch+Wr.fixed-Pl,h:Gr.stretch+Gr.fixed-ns},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Qa,pixelOffsetBR:uu,minFontScaleX:Fe/b/Kt,minFontScaleY:jt/b/Vt,isSDF:n}};if(s&&(v.stretchX||v.stretchY)){const Rt=zf(F,ie,K),Er=zf(j,me,ee);for(let Wr=0;Wr<Rt.length-1;Wr++){const Gr=Rt[Wr],Rr=Rt[Wr+1];for(let Rn=0;Rn<Er.length-1;Rn++)f.push(qt(Gr,Er[Rn],Rr,Er[Rn+1]))}}else f.push(qt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:k+1}));return f}function pp(i,t,n){let s=0;for(const f of i)s+=Math.max(t,Math.min(n,f[1]))-Math.max(t,Math.min(n,f[0]));return s}function zf(i,t,n){const s=[{fixed:-1,stretch:0}];for(const[f,v]of i){const b=s[s.length-1];s.push({fixed:f-b.stretch,stretch:b.stretch}),s.push({fixed:f-b.stretch,stretch:b.stretch+(v-f)})}return s.push({fixed:t+fp,stretch:n}),s}function Lf(i,t,n,s){return i/t*n+s}function jp(i,t,n,s){return i-t*n/s}class mp{constructor(t,n,s,f,v,b,S,k,R,F){var j;if(this.boxStartIndex=t.length,R){let W=b.top,K=b.bottom;const ee=b.collisionPadding;ee&&(W-=ee[1],K+=ee[3]);let ie=K-W;ie>0&&(ie=Math.max(10,ie),this.circleDiameter=ie)}else{const W=!((j=b.image)===null||j===void 0)&&j.content&&(b.image.textFitWidth||b.image.textFitHeight)?z(b):{x1:b.left,y1:b.top,x2:b.right,y2:b.bottom};W.y1=W.y1*S-k[0],W.y2=W.y2*S+k[2],W.x1=W.x1*S-k[3],W.x2=W.x2*S+k[1];const K=b.collisionPadding;if(K&&(W.x1-=K[0]*S,W.y1-=K[1]*S,W.x2+=K[2]*S,W.y2+=K[3]*S),F){const ee=new we(W.x1,W.y1),ie=new we(W.x2,W.y1),me=new we(W.x1,W.y2),Ce=new we(W.x2,W.y2),Ve=F*Math.PI/180;ee._rotate(Ve),ie._rotate(Ve),me._rotate(Ve),Ce._rotate(Ve),W.x1=Math.min(ee.x,ie.x,me.x,Ce.x),W.x2=Math.max(ee.x,ie.x,me.x,Ce.x),W.y1=Math.min(ee.y,ie.y,me.y,Ce.y),W.y2=Math.max(ee.y,ie.y,me.y,Ce.y)}t.emplaceBack(n.x,n.y,W.x1,W.y1,W.x2,W.y2,s,f,v)}this.boxEndIndex=t.length}}class Up{constructor(t=[],n=(s,f)=>s<f?-1:s>f?1:0){if(this.data=t,this.length=this.data.length,this.compare=n,this.length>0)for(let s=(this.length>>1)-1;s>=0;s--)this._down(s)}push(t){this.data.push(t),this._up(this.length++)}pop(){if(this.length===0)return;const t=this.data[0],n=this.data.pop();return--this.length>0&&(this.data[0]=n,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:n,compare:s}=this,f=n[t];for(;t>0;){const v=t-1>>1,b=n[v];if(s(f,b)>=0)break;n[t]=b,t=v}n[t]=f}_down(t){const{data:n,compare:s}=this,f=this.length>>1,v=n[t];for(;t<f;){let b=1+(t<<1);const S=b+1;if(S<this.length&&s(n[S],n[b])<0&&(b=S),s(n[b],v)>=0)break;n[t]=n[b],t=b}n[t]=v}}function su(i,t=1,n=!1){let s=1/0,f=1/0,v=-1/0,b=-1/0;const S=i[0];for(let K=0;K<S.length;K++){const ee=S[K];(!K||ee.x<s)&&(s=ee.x),(!K||ee.y<f)&&(f=ee.y),(!K||ee.x>v)&&(v=ee.x),(!K||ee.y>b)&&(b=ee.y)}const k=Math.min(v-s,b-f);let R=k/2;const F=new Up([],Df);if(k===0)return new we(s,f);for(let K=s;K<v;K+=k)for(let ee=f;ee<b;ee+=k)F.push(new Of(K+R,ee+R,R,i));let j=function(K){let ee=0,ie=0,me=0;const Ce=K[0];for(let Ve=0,Re=Ce.length,H=Re-1;Ve<Re;H=Ve++){const pe=Ce[Ve],Fe=Ce[H],pt=pe.x*Fe.y-Fe.x*pe.y;ie+=(pe.x+Fe.x)*pt,me+=(pe.y+Fe.y)*pt,ee+=3*pt}return new Of(ie/ee,me/ee,0,K)}(i),W=F.length;for(;F.length;){const K=F.pop();(K.d>j.d||!j.d)&&(j=K,n&&console.log("found best %d after %d probes",Math.round(1e4*K.d)/1e4,W)),K.max-j.d<=t||(R=K.h/2,F.push(new Of(K.p.x-R,K.p.y-R,R,i)),F.push(new Of(K.p.x+R,K.p.y-R,R,i)),F.push(new Of(K.p.x-R,K.p.y+R,R,i)),F.push(new Of(K.p.x+R,K.p.y+R,R,i)),W+=4)}return n&&(console.log(`num probes: ${W}`),console.log(`best distance: ${j.d}`)),j.p}function Df(i,t){return t.max-i.max}function Of(i,t,n,s){this.p=new we(i,t),this.h=n,this.d=function(f,v){let b=!1,S=1/0;for(let k=0;k<v.length;k++){const R=v[k];for(let F=0,j=R.length,W=j-1;F<j;W=F++){const K=R[F],ee=R[W];K.y>f.y!=ee.y>f.y&&f.x<(ee.x-K.x)*(f.y-K.y)/(ee.y-K.y)+K.x&&(b=!b),S=Math.min(S,Hf(f,K,ee))}}return(b?1:-1)*Math.sqrt(S)}(this.p,s),this.max=this.d+this.h*Math.SQRT2}var fa;M.aB=void 0,(fa=M.aB||(M.aB={}))[fa.center=1]="center",fa[fa.left=2]="left",fa[fa.right=3]="right",fa[fa.top=4]="top",fa[fa.bottom=5]="bottom",fa[fa["top-left"]=6]="top-left",fa[fa["top-right"]=7]="top-right",fa[fa["bottom-left"]=8]="bottom-left",fa[fa["bottom-right"]=9]="bottom-right";const _d=7,_m=Number.POSITIVE_INFINITY;function Cg(i,t){return t[1]!==_m?function(n,s,f){let v=0,b=0;switch(s=Math.abs(s),f=Math.abs(f),n){case"top-right":case"top-left":case"top":b=f-_d;break;case"bottom-right":case"bottom-left":case"bottom":b=-f+_d}switch(n){case"top-right":case"bottom-right":case"right":v=-s;break;case"top-left":case"bottom-left":case"left":v=s}return[v,b]}(i,t[0],t[1]):function(n,s){let f=0,v=0;s<0&&(s=0);const b=s/Math.SQRT2;switch(n){case"top-right":case"top-left":v=b-_d;break;case"bottom-right":case"bottom-left":v=-b+_d;break;case"bottom":v=-s+_d;break;case"top":v=s-_d}switch(n){case"top-right":case"bottom-right":f=-b;break;case"top-left":case"bottom-left":f=b;break;case"left":f=s;break;case"right":f=-s}return[f,v]}(i,t[0])}function vm(i,t,n){var s;const f=i.layout,v=(s=f.get("text-variable-anchor-offset"))===null||s===void 0?void 0:s.evaluate(t,{},n);if(v){const S=v.values,k=[];for(let R=0;R<S.length;R+=2){const F=k[R]=S[R],j=S[R+1].map(W=>W*Ao);F.startsWith("top")?j[1]-=_d:F.startsWith("bottom")&&(j[1]+=_d),k[R+1]=j}return new Oo(k)}const b=f.get("text-variable-anchor");if(b){let S;S=i._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[f.get("text-radial-offset").evaluate(t,{},n)*Ao,_m]:f.get("text-offset").evaluate(t,{},n).map(R=>R*Ao);const k=[];for(const R of b)k.push(R,Cg(R,S));return new Oo(k)}return null}function bc(i){switch(i){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function zn(i,t,n,s,f,v,b,S,k,R,F,j){let W=v.textMaxSize.evaluate(t,{});W===void 0&&(W=b);const K=i.layers[0].layout,ee=K.get("icon-offset").evaluate(t,{},F),ie=au(n.horizontal),me=b/24,Ce=i.tilePixelRatio*me,Ve=i.tilePixelRatio*W/24,Re=i.tilePixelRatio*S,H=i.tilePixelRatio*K.get("symbol-spacing"),pe=K.get("text-padding")*i.tilePixelRatio,Fe=function(Wr,Gr,Rr,Rn=1){const Ki=Wr.get("icon-padding").evaluate(Gr,{},Rr),rs=Ki&&Ki.values;return[rs[0]*Rn,rs[1]*Rn,rs[2]*Rn,rs[3]*Rn]}(K,t,F,i.tilePixelRatio),pt=K.get("text-max-angle")/180*Math.PI,jt=K.get("text-rotation-alignment")!=="viewport"&&K.get("symbol-placement")!=="point",bt=K.get("icon-rotation-alignment")==="map"&&K.get("symbol-placement")!=="point",Mt=K.get("symbol-placement"),Kt=H/2,Vt=K.get("icon-text-fit");let qt;s&&Vt!=="none"&&(i.allowVerticalPlacement&&n.vertical&&(qt=U(s,n.vertical,Vt,K.get("icon-text-fit-padding"),ee,me)),ie&&(s=U(s,ie,Vt,K.get("icon-text-fit-padding"),ee,me)));const Rt=F?j.line.getGranularityForZoomLevel(F.z):1,Er=(Wr,Gr)=>{Gr.x<0||Gr.x>=xt||Gr.y<0||Gr.y>=xt||function(Rr,Rn,Ki,rs,pa,lu,Cl,Ws,Xi,xs,Hs,qs,Qa,uu,bs,Pl,ns,ws,Ss,Uo,ji,wc,Ff,Sc,Ny){const Bf=Rr.addToLineVertexArray(Rn,Ki);let Jd,Nf,xd,ef,Im=0,Mg=0,kg=0,Ag=0,yp=-1,Mm=-1;const zh={};let Rg=Pa("");if(Rr.allowVerticalPlacement&&rs.vertical){const za=Ws.layout.get("text-rotate").evaluate(ji,{},Sc)+90;xd=new mp(Xi,Rn,xs,Hs,qs,rs.vertical,Qa,uu,bs,za),Cl&&(ef=new mp(Xi,Rn,xs,Hs,qs,Cl,ns,ws,bs,za))}if(pa){const za=Ws.layout.get("icon-rotate").evaluate(ji,{}),cu=Ws.layout.get("icon-text-fit")!=="none",Lh=Tg(pa,za,Ff,cu),hu=Cl?Tg(Cl,za,Ff,cu):void 0;Nf=new mp(Xi,Rn,xs,Hs,qs,pa,ns,ws,!1,za),Im=4*Lh.length;const tf=Rr.iconSizeData;let rh=null;tf.kind==="source"?(rh=[Ae*Ws.layout.get("icon-size").evaluate(ji,{})],rh[0]>Ge&&$r(`${Rr.layerIds[0]}: Value for "icon-size" is >= ${oe}. Reduce your "icon-size".`)):tf.kind==="composite"&&(rh=[Ae*wc.compositeIconSizes[0].evaluate(ji,{},Sc),Ae*wc.compositeIconSizes[1].evaluate(ji,{},Sc)],(rh[0]>Ge||rh[1]>Ge)&&$r(`${Rr.layerIds[0]}: Value for "icon-size" is >= ${oe}. Reduce your "icon-size".`)),Rr.addSymbols(Rr.icon,Lh,rh,Uo,Ss,ji,M.al.none,Rn,Bf.lineStartIndex,Bf.lineLength,-1,Sc),yp=Rr.icon.placedSymbolArray.length-1,hu&&(Mg=4*hu.length,Rr.addSymbols(Rr.icon,hu,rh,Uo,Ss,ji,M.al.vertical,Rn,Bf.lineStartIndex,Bf.lineLength,-1,Sc),Mm=Rr.icon.placedSymbolArray.length-1)}const El=Object.keys(rs.horizontal);for(const za of El){const cu=rs.horizontal[za];if(!Jd){Rg=Pa(cu.text);const hu=Ws.layout.get("text-rotate").evaluate(ji,{},Sc);Jd=new mp(Xi,Rn,xs,Hs,qs,cu,Qa,uu,bs,hu)}const Lh=cu.positionedLines.length===1;if(kg+=xm(Rr,Rn,cu,lu,Ws,bs,ji,Pl,Bf,rs.vertical?M.al.horizontal:M.al.horizontalOnly,Lh?El:[za],zh,yp,wc,Sc),Lh)break}rs.vertical&&(Ag+=xm(Rr,Rn,rs.vertical,lu,Ws,bs,ji,Pl,Bf,M.al.vertical,["vertical"],zh,Mm,wc,Sc));const km=Jd?Jd.boxStartIndex:Rr.collisionBoxArray.length,$y=Jd?Jd.boxEndIndex:Rr.collisionBoxArray.length,jy=xd?xd.boxStartIndex:Rr.collisionBoxArray.length,Uy=xd?xd.boxEndIndex:Rr.collisionBoxArray.length,Vy=Nf?Nf.boxStartIndex:Rr.collisionBoxArray.length,Am=Nf?Nf.boxEndIndex:Rr.collisionBoxArray.length,Zy=ef?ef.boxStartIndex:Rr.collisionBoxArray.length,Rm=ef?ef.boxEndIndex:Rr.collisionBoxArray.length;let Tc=-1;const Zp=(za,cu)=>za&&za.circleDiameter?Math.max(za.circleDiameter,cu):cu;Tc=Zp(Jd,Tc),Tc=Zp(xd,Tc),Tc=Zp(Nf,Tc),Tc=Zp(ef,Tc);const zg=Tc>-1?1:0;zg&&(Tc*=Ny/Ao),Rr.glyphOffsetArray.length>=Ke.MAX_GLYPHS&&$r("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ji.sortKey!==void 0&&Rr.addToSortKeyRanges(Rr.symbolInstances.length,ji.sortKey);const Gy=vm(Ws,ji,Sc),[Lg,Wy]=function(za,cu){const Lh=za.length,hu=cu==null?void 0:cu.values;if((hu==null?void 0:hu.length)>0)for(let tf=0;tf<hu.length;tf+=2){const rh=hu[tf+1];za.emplaceBack(M.aB[hu[tf]],rh[0],rh[1])}return[Lh,za.length]}(Rr.textAnchorOffsets,Gy);Rr.symbolInstances.emplaceBack(Rn.x,Rn.y,zh.right>=0?zh.right:-1,zh.center>=0?zh.center:-1,zh.left>=0?zh.left:-1,zh.vertical||-1,yp,Mm,Rg,km,$y,jy,Uy,Vy,Am,Zy,Rm,xs,kg,Ag,Im,Mg,zg,0,Qa,Tc,Lg,Wy)}(i,Gr,Wr,n,s,f,qt,i.layers[0],i.collisionBoxArray,t.index,t.sourceLayerIndex,i.index,Ce,[pe,pe,pe,pe],jt,k,Re,Fe,bt,ee,t,v,R,F,b)};if(Mt==="line")for(const Wr of gm(t.geometry,0,0,xt,xt)){const Gr=fc(Wr,Rt),Rr=Fy(Gr,H,pt,n.vertical||ie,s,24,Ve,i.overscaling,xt);for(const Rn of Rr)ie&&Pg(i,ie.text,Kt,Rn)||Er(Gr,Rn)}else if(Mt==="line-center"){for(const Wr of t.geometry)if(Wr.length>1){const Gr=fc(Wr,Rt),Rr=Oy(Gr,pt,n.vertical||ie,s,24,Ve);Rr&&Er(Gr,Rr)}}else if(t.type==="Polygon")for(const Wr of $h(t.geometry,0)){const Gr=su(Wr,16);Er(fc(Wr[0],Rt,!0),new xc(Gr.x,Gr.y,0))}else if(t.type==="LineString")for(const Wr of t.geometry){const Gr=fc(Wr,Rt);Er(Gr,new xc(Gr[0].x,Gr[0].y,0))}else if(t.type==="Point")for(const Wr of t.geometry)for(const Gr of Wr)Er([Gr],new xc(Gr.x,Gr.y,0))}function xm(i,t,n,s,f,v,b,S,k,R,F,j,W,K,ee){const ie=function(Ve,Re,H,pe,Fe,pt,jt,bt){const Mt=pe.layout.get("text-rotate").evaluate(pt,{})*Math.PI/180,Kt=[];for(const Vt of Re.positionedLines)for(const qt of Vt.positionedGlyphs){if(!qt.rect)continue;const Rt=qt.rect||{};let Er=ap+1,Wr=!0,Gr=1,Rr=0;const Rn=(Fe||bt)&&qt.vertical,Ki=qt.metrics.advance*qt.scale/2;if(bt&&Re.verticalizable&&(Rr=Vt.lineOffset/2-(qt.imageName?-(Ao-qt.metrics.width*qt.scale)/2:(qt.scale-1)*Ao)),qt.imageName){const ws=jt[qt.imageName];Wr=ws.sdf,Gr=ws.pixelRatio,Er=Gs/Gr}const rs=Fe?[qt.x+Ki,qt.y]:[0,0];let pa=Fe?[0,0]:[qt.x+Ki+H[0],qt.y+H[1]-Rr],lu=[0,0];Rn&&(lu=pa,pa=[0,0]);const Cl=qt.metrics.isDoubleResolution?2:1,Ws=(qt.metrics.left-Er)*qt.scale-Ki+pa[0],Xi=(-qt.metrics.top-Er)*qt.scale+pa[1],xs=Ws+Rt.w/Cl*qt.scale/Gr,Hs=Xi+Rt.h/Cl*qt.scale/Gr,qs=new we(Ws,Xi),Qa=new we(xs,Xi),uu=new we(Ws,Hs),bs=new we(xs,Hs);if(Rn){const ws=new we(-Ki,Ki-Mh),Ss=-Math.PI/2,Uo=Ao/2-Ki,ji=new we(5-Mh-Uo,-(qt.imageName?Uo:0)),wc=new we(...lu);qs._rotateAround(Ss,ws)._add(ji)._add(wc),Qa._rotateAround(Ss,ws)._add(ji)._add(wc),uu._rotateAround(Ss,ws)._add(ji)._add(wc),bs._rotateAround(Ss,ws)._add(ji)._add(wc)}if(Mt){const ws=Math.sin(Mt),Ss=Math.cos(Mt),Uo=[Ss,-ws,ws,Ss];qs._matMult(Uo),Qa._matMult(Uo),uu._matMult(Uo),bs._matMult(Uo)}const Pl=new we(0,0),ns=new we(0,0);Kt.push({tl:qs,tr:Qa,bl:uu,br:bs,tex:Rt,writingMode:Re.writingMode,glyphOffset:rs,sectionIndex:qt.sectionIndex,isSDF:Wr,pixelOffsetTL:Pl,pixelOffsetBR:ns,minFontScaleX:0,minFontScaleY:0})}return Kt}(0,n,S,f,v,b,s,i.allowVerticalPlacement),me=i.textSizeData;let Ce=null;me.kind==="source"?(Ce=[Ae*f.layout.get("text-size").evaluate(b,{})],Ce[0]>Ge&&$r(`${i.layerIds[0]}: Value for "text-size" is >= ${oe}. Reduce your "text-size".`)):me.kind==="composite"&&(Ce=[Ae*K.compositeTextSizes[0].evaluate(b,{},ee),Ae*K.compositeTextSizes[1].evaluate(b,{},ee)],(Ce[0]>Ge||Ce[1]>Ge)&&$r(`${i.layerIds[0]}: Value for "text-size" is >= ${oe}. Reduce your "text-size".`)),i.addSymbols(i.text,ie,Ce,S,v,b,R,t,k.lineStartIndex,k.lineLength,W,ee);for(const Ve of F)j[Ve]=i.text.placedSymbolArray.length-1;return 4*ie.length}function au(i){for(const t in i)return i[t];return null}function Pg(i,t,n,s){const f=i.compareText;if(t in f){const v=f[t];for(let b=v.length-1;b>=0;b--)if(s.dist(v[b])<n)return!0}else f[t]=[];return f[t].push(s),!1}const Eg=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class wi{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[n,s]=new Uint8Array(t,0,2);if(n!==219)throw new Error("Data does not appear to be in a KDBush format.");const f=s>>4;if(f!==1)throw new Error(`Got v${f} data when expected v1.`);const v=Eg[15&s];if(!v)throw new Error("Unrecognized array type.");const[b]=new Uint16Array(t,2,1),[S]=new Uint32Array(t,4,1);return new wi(S,b,v,t)}constructor(t,n=64,s=Float64Array,f){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+n,2),65535),this.ArrayType=s,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const v=Eg.indexOf(this.ArrayType),b=2*t*this.ArrayType.BYTES_PER_ELEMENT,S=t*this.IndexArrayType.BYTES_PER_ELEMENT,k=(8-S%8)%8;if(v<0)throw new Error(`Unexpected typed array class: ${s}.`);f&&f instanceof ArrayBuffer?(this.data=f,this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+S+k,2*t),this._pos=2*t,this._finished=!0):(this.data=new ArrayBuffer(8+b+S+k),this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+S+k,2*t),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+v]),new Uint16Array(this.data,2,1)[0]=n,new Uint32Array(this.data,4,1)[0]=t)}add(t,n){const s=this._pos>>1;return this.ids[s]=s,this.coords[this._pos++]=t,this.coords[this._pos++]=n,s}finish(){const t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return bm(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,n,s,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:b,nodeSize:S}=this,k=[0,v.length-1,0],R=[];for(;k.length;){const F=k.pop()||0,j=k.pop()||0,W=k.pop()||0;if(j-W<=S){for(let me=W;me<=j;me++){const Ce=b[2*me],Ve=b[2*me+1];Ce>=t&&Ce<=s&&Ve>=n&&Ve<=f&&R.push(v[me])}continue}const K=W+j>>1,ee=b[2*K],ie=b[2*K+1];ee>=t&&ee<=s&&ie>=n&&ie<=f&&R.push(v[K]),(F===0?t<=ee:n<=ie)&&(k.push(W),k.push(K-1),k.push(1-F)),(F===0?s>=ee:f>=ie)&&(k.push(K+1),k.push(j),k.push(1-F))}return R}within(t,n,s){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:f,coords:v,nodeSize:b}=this,S=[0,f.length-1,0],k=[],R=s*s;for(;S.length;){const F=S.pop()||0,j=S.pop()||0,W=S.pop()||0;if(j-W<=b){for(let me=W;me<=j;me++)Ig(v[2*me],v[2*me+1],t,n)<=R&&k.push(f[me]);continue}const K=W+j>>1,ee=v[2*K],ie=v[2*K+1];Ig(ee,ie,t,n)<=R&&k.push(f[K]),(F===0?t-s<=ee:n-s<=ie)&&(S.push(W),S.push(K-1),S.push(1-F)),(F===0?t+s>=ee:n+s>=ie)&&(S.push(K+1),S.push(j),S.push(1-F))}return k}}function bm(i,t,n,s,f,v){if(f-s<=n)return;const b=s+f>>1;wm(i,t,b,s,f,v),bm(i,t,n,s,b-1,1-v),bm(i,t,n,b+1,f,1-v)}function wm(i,t,n,s,f,v){for(;f>s;){if(f-s>600){const R=f-s+1,F=n-s+1,j=Math.log(R),W=.5*Math.exp(2*j/3),K=.5*Math.sqrt(j*W*(R-W)/R)*(F-R/2<0?-1:1);wm(i,t,n,Math.max(s,Math.floor(n-F*W/R+K)),Math.min(f,Math.floor(n+(R-F)*W/R+K)),v)}const b=t[2*n+v];let S=s,k=f;for(vd(i,t,s,n),t[2*f+v]>b&&vd(i,t,s,f);S<k;){for(vd(i,t,S,k),S++,k--;t[2*S+v]<b;)S++;for(;t[2*k+v]>b;)k--}t[2*s+v]===b?vd(i,t,s,k):(k++,vd(i,t,k,f)),k<=n&&(s=k+1),n<=k&&(f=k-1)}}function vd(i,t,n,s){Sm(i,n,s),Sm(t,2*n,2*s),Sm(t,2*n+1,2*s+1)}function Sm(i,t,n){const s=i[t];i[t]=i[n],i[n]=s}function Ig(i,t,n,s){const f=i-n,v=t-s;return f*f+v*v}var Tm;M.co=void 0,(Tm=M.co||(M.co={})).create="create",Tm.load="load",Tm.fullLoad="fullLoad";let Vp=null,gp=[];const Cm=1e3/60,Pm="loadTime",Em="fullLoadTime",By={mark(i){performance.mark(i)},frame(i){const t=i;Vp!=null&&gp.push(t-Vp),Vp=t},clearMetrics(){Vp=null,gp=[],performance.clearMeasures(Pm),performance.clearMeasures(Em);for(const i in M.co)performance.clearMarks(M.co[i])},getPerformanceMetrics(){performance.measure(Pm,M.co.create,M.co.load),performance.measure(Em,M.co.create,M.co.fullLoad);const i=performance.getEntriesByName(Pm)[0].duration,t=performance.getEntriesByName(Em)[0].duration,n=gp.length,s=1/(gp.reduce((v,b)=>v+b,0)/n/1e3),f=gp.filter(v=>v>Cm).reduce((v,b)=>v+(b-Cm)/Cm,0);return{loadTime:i,fullLoadTime:t,fps:s,percentDroppedFrames:f/(n+f)*100,totalFrames:n}}};M.$=dp,M.A=nt,M.B=hs,M.C=oi,M.D=dr,M.E=Ue,M.F=qh,M.G=function(i){if(Hr==null){const t=i.navigator?i.navigator.userAgent:null;Hr=!!i.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return Hr},M.H=class{constructor(i,t){this.target=i,this.mapId=t,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new Ly(()=>this.process()),this.subscription=wr(this.target,"message",n=>this.receive(n),!1),this.globalScope=nn(self)?i:window}registerMessageHandler(i,t){this.messageHandlers[i]=t}sendAsync(i,t){return new Promise((n,s)=>{const f=Math.round(1e18*Math.random()).toString(36).substring(0,10),v=t?wr(t.signal,"abort",()=>{v==null||v.unsubscribe(),delete this.resolveRejects[f];const k={id:f,type:"<cancel>",origin:location.origin,targetMapId:i.targetMapId,sourceMapId:this.mapId};this.target.postMessage(k)},Dy):null;this.resolveRejects[f]={resolve:k=>{v==null||v.unsubscribe(),n(k)},reject:k=>{v==null||v.unsubscribe(),s(k)}};const b=[],S=Object.assign(Object.assign({},i),{id:f,sourceMapId:this.mapId,origin:location.origin,data:Ko(i.data,b)});this.target.postMessage(S,{transfer:b})})}receive(i){const t=i.data,n=t.id;if(!(t.origin!=="file://"&&location.origin!=="file://"&&t.origin!=="resource://android"&&location.origin!=="resource://android"&&t.origin!==location.origin||t.targetMapId&&this.mapId!==t.targetMapId)){if(t.type==="<cancel>"){delete this.tasks[n];const s=this.abortControllers[n];return delete this.abortControllers[n],void(s&&s.abort())}if(nn(self)||t.mustQueue)return this.tasks[n]=t,this.taskQueue.push(n),void this.invoker.trigger();this.processTask(n,t)}}process(){if(this.taskQueue.length===0)return;const i=this.taskQueue.shift(),t=this.tasks[i];delete this.tasks[i],this.taskQueue.length>0&&this.invoker.trigger(),t&&this.processTask(i,t)}processTask(i,t){return u(this,void 0,void 0,function*(){if(t.type==="<response>"){const f=this.resolveRejects[i];return delete this.resolveRejects[i],f?void(t.error?f.reject(ml(t.error)):f.resolve(ml(t.data))):void 0}if(!this.messageHandlers[t.type])return void this.completeTask(i,new Error(`Could not find a registered handler for ${t.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const n=ml(t.data),s=new AbortController;this.abortControllers[i]=s;try{const f=yield this.messageHandlers[t.type](t.sourceMapId,n,s);this.completeTask(i,null,f)}catch(f){this.completeTask(i,f)}})}completeTask(i,t,n){const s=[];delete this.abortControllers[i];const f={id:i,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:t?Ko(t):null,data:Ko(n,s)};this.target.postMessage(f,{transfer:s})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},M.I=lp,M.J=Vi,M.K=function(){var i=new nt(16);return nt!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0),i[0]=1,i[5]=1,i[10]=1,i[15]=1,i},M.L=function(i,t,n){var s,f,v,b,S,k,R,F,j,W,K,ee,ie=n[0],me=n[1],Ce=n[2];return t===i?(i[12]=t[0]*ie+t[4]*me+t[8]*Ce+t[12],i[13]=t[1]*ie+t[5]*me+t[9]*Ce+t[13],i[14]=t[2]*ie+t[6]*me+t[10]*Ce+t[14],i[15]=t[3]*ie+t[7]*me+t[11]*Ce+t[15]):(f=t[1],v=t[2],b=t[3],S=t[4],k=t[5],R=t[6],F=t[7],j=t[8],W=t[9],K=t[10],ee=t[11],i[0]=s=t[0],i[1]=f,i[2]=v,i[3]=b,i[4]=S,i[5]=k,i[6]=R,i[7]=F,i[8]=j,i[9]=W,i[10]=K,i[11]=ee,i[12]=s*ie+S*me+j*Ce+t[12],i[13]=f*ie+k*me+W*Ce+t[13],i[14]=v*ie+R*me+K*Ce+t[14],i[15]=b*ie+F*me+ee*Ce+t[15]),i},M.M=function(i,t,n){var s=n[0],f=n[1],v=n[2];return i[0]=t[0]*s,i[1]=t[1]*s,i[2]=t[2]*s,i[3]=t[3]*s,i[4]=t[4]*f,i[5]=t[5]*f,i[6]=t[6]*f,i[7]=t[7]*f,i[8]=t[8]*v,i[9]=t[9]*v,i[10]=t[10]*v,i[11]=t[11]*v,i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15],i},M.N=function(i,t,n){var s=t[0],f=t[1],v=t[2],b=t[3],S=t[4],k=t[5],R=t[6],F=t[7],j=t[8],W=t[9],K=t[10],ee=t[11],ie=t[12],me=t[13],Ce=t[14],Ve=t[15],Re=n[0],H=n[1],pe=n[2],Fe=n[3];return i[0]=Re*s+H*S+pe*j+Fe*ie,i[1]=Re*f+H*k+pe*W+Fe*me,i[2]=Re*v+H*R+pe*K+Fe*Ce,i[3]=Re*b+H*F+pe*ee+Fe*Ve,i[4]=(Re=n[4])*s+(H=n[5])*S+(pe=n[6])*j+(Fe=n[7])*ie,i[5]=Re*f+H*k+pe*W+Fe*me,i[6]=Re*v+H*R+pe*K+Fe*Ce,i[7]=Re*b+H*F+pe*ee+Fe*Ve,i[8]=(Re=n[8])*s+(H=n[9])*S+(pe=n[10])*j+(Fe=n[11])*ie,i[9]=Re*f+H*k+pe*W+Fe*me,i[10]=Re*v+H*R+pe*K+Fe*Ce,i[11]=Re*b+H*F+pe*ee+Fe*Ve,i[12]=(Re=n[12])*s+(H=n[13])*S+(pe=n[14])*j+(Fe=n[15])*ie,i[13]=Re*f+H*k+pe*W+Fe*me,i[14]=Re*v+H*R+pe*K+Fe*Ce,i[15]=Re*b+H*F+pe*ee+Fe*Ve,i},M.O=function(i,t){const n={};for(let s=0;s<t.length;s++){const f=t[s];f in i&&(n[f]=i[f])}return n},M.P=we,M.Q=yd,M.R=ha,M.S=pg,M.T=gl,M.U=Bu,M.V=Tt,M.W=Je,M.X=bn,M.Y=vs,M.Z=xt,M._=u,M.a=Ji,M.a$=function(i,t,n){var s=Math.sin(n),f=Math.cos(n),v=t[4],b=t[5],S=t[6],k=t[7],R=t[8],F=t[9],j=t[10],W=t[11];return t!==i&&(i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15]),i[4]=v*f+R*s,i[5]=b*f+F*s,i[6]=S*f+j*s,i[7]=k*f+W*s,i[8]=R*f-v*s,i[9]=F*f-b*s,i[10]=j*f-S*s,i[11]=W*f-k*s,i},M.a0=25,M.a1=Ro,M.a2=i=>{const t=window.document.createElement("video");return t.muted=!0,new Promise(n=>{t.onloadstart=()=>{n(t)};for(const s of i){const f=window.document.createElement("source");et(s)||(t.crossOrigin="Anonymous"),f.src=s,t.appendChild(f)}})},M.a3=St,M.a4=function(){return fr++},M.a5=Se,M.a6=Ke,M.a7=ph,M.a8=Lu,M.a9=vg,M.aA=function(i,t,n,s,f=!1){if(!n[0]&&!n[1])return[0,0];const v=f?s==="map"?-i.bearingInRadians:0:s==="viewport"?i.bearingInRadians:0;if(v){const b=Math.sin(v),S=Math.cos(v);n=[n[0]*S-n[1]*b,n[0]*b+n[1]*S]}return[f?n[0]:Pt(t,n[0],i.zoom),f?n[1]:Pt(t,n[1],i.zoom)]},M.aC=Yt,M.aD=bc,M.aE=hp,M.aF=wi,M.aG=si,M.aH=Ka,M.aI=Ct,M.aJ=An,M.aK=Cn,M.aL=ir,M.aM=Wn,M.aN=Mn,M.aO=function(i,t,n){return i[0]=t[0]*n,i[1]=t[1]*n,i[2]=t[2]*n,i},M.aP=function(i,t,n){return i[0]=t[0]+n[0],i[1]=t[1]+n[1],i[2]=t[2]+n[2],i},M.aQ=function(i){var t=new nt(3);return t[0]=i[0],t[1]=i[1],t[2]=i[2],t},M.aR=function(i,t,n){return i[0]=t[0]*n[0],i[1]=t[1]*n[1],i[2]=t[2]*n[2],i[3]=t[3]*n[3],i},M.aS=function(i,t,n){return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],i},M.aT=function(i,t){var n=t[0],s=t[1],f=t[2],v=n*n+s*s+f*f;return v>0&&(v=1/Math.sqrt(v)),i[0]=t[0]*v,i[1]=t[1]*v,i[2]=t[2]*v,i},M.aU=function(i,t,n){var s=t[0],f=t[1],v=t[2],b=n[0],S=n[1],k=n[2];return i[0]=f*k-v*S,i[1]=v*b-s*k,i[2]=s*S-f*b,i},M.aV=function(i,t){return i[0]*t[0]+i[1]*t[1]+i[2]*t[2]},M.aW=gg,M.aX=Rf,M.aY=function(i,t,n,s,f){var v,b=1/Math.tan(t/2);return i[0]=b/n,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=b,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=-1,i[12]=0,i[13]=0,i[15]=0,f!=null&&f!==1/0?(i[10]=(f+s)*(v=1/(s-f)),i[14]=2*f*s*v):(i[10]=-1,i[14]=-2*s),i},M.aZ=function(i){var t=new nt(16);return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],t},M.a_=function(i,t,n){var s=Math.sin(n),f=Math.cos(n),v=t[0],b=t[1],S=t[2],k=t[3],R=t[4],F=t[5],j=t[6],W=t[7];return t!==i&&(i[8]=t[8],i[9]=t[9],i[10]=t[10],i[11]=t[11],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15]),i[0]=v*f+R*s,i[1]=b*f+F*s,i[2]=S*f+j*s,i[3]=k*f+W*s,i[4]=R*f-v*s,i[5]=F*f-b*s,i[6]=j*f-S*s,i[7]=W*f-k*s,i},M.aa=function(i){const t={};if(i.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(n,s,f,v)=>{const b=f||v;return t[s]=!b||b.toLowerCase(),""}),t["max-age"]){const n=parseInt(t["max-age"],10);isNaN(n)?delete t["max-age"]:t["max-age"]=n}return t},M.ab=Un,M.ac=function(i){return Math.pow(2,i)},M.ad=ze,M.ae=At,M.af=85.051129,M.ag=mg,M.ah=function(i){return Math.log(i)/Math.LN2},M.ai=function(i){var t=i[0],n=i[1];return t*t+n*n},M.aj=function(i,t){const n=[];for(const s in i)s in t||n.push(s);return n},M.ak=function(i,t){let n=0,s=0;if(i.kind==="constant")s=i.layoutSize;else if(i.kind!=="source"){const{interpolationType:f,minZoom:v,maxZoom:b}=i,S=f?At(Bi.interpolationFactor(f,t,v,b),0,1):0;i.kind==="camera"?s=hs.number(i.minSize,i.maxSize,S):n=S}return{uSizeT:n,uSize:s}},M.am=function(i,{uSize:t,uSizeT:n},{lowerSize:s,upperSize:f}){return i.kind==="source"?s/Ae:i.kind==="composite"?hs.number(s/Ae,f/Ae,n):t},M.an=function(i,t){var n=t[0],s=t[1],f=t[2],v=t[3],b=t[4],S=t[5],k=t[6],R=t[7],F=t[8],j=t[9],W=t[10],K=t[11],ee=t[12],ie=t[13],me=t[14],Ce=t[15],Ve=n*S-s*b,Re=n*k-f*b,H=n*R-v*b,pe=s*k-f*S,Fe=s*R-v*S,pt=f*R-v*k,jt=F*ie-j*ee,bt=F*me-W*ee,Mt=F*Ce-K*ee,Kt=j*me-W*ie,Vt=j*Ce-K*ie,qt=W*Ce-K*me,Rt=Ve*qt-Re*Vt+H*Kt+pe*Mt-Fe*bt+pt*jt;return Rt?(i[0]=(S*qt-k*Vt+R*Kt)*(Rt=1/Rt),i[1]=(f*Vt-s*qt-v*Kt)*Rt,i[2]=(ie*pt-me*Fe+Ce*pe)*Rt,i[3]=(W*Fe-j*pt-K*pe)*Rt,i[4]=(k*Mt-b*qt-R*bt)*Rt,i[5]=(n*qt-f*Mt+v*bt)*Rt,i[6]=(me*H-ee*pt-Ce*Re)*Rt,i[7]=(F*pt-W*H+K*Re)*Rt,i[8]=(b*Vt-S*Mt+R*jt)*Rt,i[9]=(s*Mt-n*Vt-v*jt)*Rt,i[10]=(ee*Fe-ie*H+Ce*Ve)*Rt,i[11]=(j*H-F*Fe-K*Ve)*Rt,i[12]=(S*bt-b*Kt-k*jt)*Rt,i[13]=(n*Kt-s*bt+f*jt)*Rt,i[14]=(ie*Re-ee*pe-me*Ve)*Rt,i[15]=(F*pe-j*Re+W*Ve)*Rt,i):null},M.ao=xr,M.ap=function(i){return Math.hypot(i[0],i[1])},M.aq=function(i){return i[0]=0,i[1]=0,i},M.ar=function(i,t,n){return i[0]=t[0]*n,i[1]=t[1]*n,i},M.as=Dr,M.at=tr,M.au=function(i,t,n,s){const f=t.y-i.y,v=t.x-i.x,b=s.y-n.y,S=s.x-n.x,k=b*v-S*f;if(k===0)return null;const R=(S*(i.y-n.y)-b*(i.x-n.x))/k;return new we(i.x+R*v,i.y+R*f)},M.av=gm,M.aw=Ld,M.ax=function(i){let t=1/0,n=1/0,s=-1/0,f=-1/0;for(const v of i)t=Math.min(t,v.x),n=Math.min(n,v.y),s=Math.max(s,v.x),f=Math.max(f,v.y);return[t,n,s,f]},M.ay=Ao,M.az=Pt,M.b=dn,M.b$=class extends ne{},M.b0=function(){const i=new Float32Array(16);return ze(i),i},M.b1=function(){const i=new Float64Array(16);return ze(i),i},M.b2=function(){return new Float64Array(16)},M.b3=function(i,t,n){const s=new Float64Array(4);return function(f,v,b,S){var k=.5*Math.PI/180;v*=k,b*=k,S*=k;var R=Math.sin(v),F=Math.cos(v),j=Math.sin(b),W=Math.cos(b),K=Math.sin(S),ee=Math.cos(S);f[0]=R*W*ee-F*j*K,f[1]=F*j*ee+R*W*K,f[2]=F*W*K-R*j*ee,f[3]=F*W*ee+R*j*K}(s,i,t-90,n),s},M.b4=function(i,t,n,s){var f,v,b,S,k,R=t[0],F=t[1],j=t[2],W=t[3],K=n[0],ee=n[1],ie=n[2],me=n[3];return(v=R*K+F*ee+j*ie+W*me)<0&&(v=-v,K=-K,ee=-ee,ie=-ie,me=-me),1-v>Qe?(f=Math.acos(v),b=Math.sin(f),S=Math.sin((1-s)*f)/b,k=Math.sin(s*f)/b):(S=1-s,k=s),i[0]=S*R+k*K,i[1]=S*F+k*ee,i[2]=S*j+k*ie,i[3]=S*W+k*me,i},M.b5=function(i){const t=new Float64Array(9);var n,s,f,v,b,S,k,R,F,j,W,K,ee,ie,me,Ce,Ve,Re;j=(f=(s=i)[0])*(k=f+f),W=(v=s[1])*k,ee=(b=s[2])*k,ie=b*(R=v+v),Ce=(S=s[3])*k,Ve=S*R,Re=S*(F=b+b),(n=t)[0]=1-(K=v*R)-(me=b*F),n[3]=W-Re,n[6]=ee+Ve,n[1]=W+Re,n[4]=1-j-me,n[7]=ie-Ce,n[2]=ee-Ve,n[5]=ie+Ce,n[8]=1-j-K;const H=Wn(-Math.asin(At(t[2],-1,1)));let pe,Fe;return Math.hypot(t[5],t[8])<.001?(pe=0,Fe=-Wn(Math.atan2(t[3],t[4]))):(pe=Wn(t[5]===0&&t[8]===0?0:Math.atan2(t[5],t[8])),Fe=Wn(t[1]===0&&t[0]===0?0:Math.atan2(t[1],t[0]))),{roll:pe,pitch:H+90,bearing:Fe}},M.b6=function(i,t){return i.roll==t.roll&&i.pitch==t.pitch&&i.bearing==t.bearing},M.b7=Jr,M.b8=Xh,M.b9=wl,M.bA=function(i){if(i.type==="custom")return new zy(i);switch(i.type){case"background":return new ai(i);case"circle":return new Od(i);case"fill":return new es(i);case"fill-extrusion":return new tp(i);case"heatmap":return new Vs(i);case"hillshade":return new Xf(i);case"line":return new Rp(i);case"raster":return new Ry(i);case"symbol":return new Yr(i)}},M.bB=Tr,M.bC=function(i,t){if(!i)return[{command:"setStyle",args:[t]}];let n=[];try{if(!rt(i.version,t.version))return[{command:"setStyle",args:[t]}];rt(i.center,t.center)||n.push({command:"setCenter",args:[t.center]}),rt(i.state,t.state)||n.push({command:"setGlobalState",args:[t.state]}),rt(i.centerAltitude,t.centerAltitude)||n.push({command:"setCenterAltitude",args:[t.centerAltitude]}),rt(i.zoom,t.zoom)||n.push({command:"setZoom",args:[t.zoom]}),rt(i.bearing,t.bearing)||n.push({command:"setBearing",args:[t.bearing]}),rt(i.pitch,t.pitch)||n.push({command:"setPitch",args:[t.pitch]}),rt(i.roll,t.roll)||n.push({command:"setRoll",args:[t.roll]}),rt(i.sprite,t.sprite)||n.push({command:"setSprite",args:[t.sprite]}),rt(i.glyphs,t.glyphs)||n.push({command:"setGlyphs",args:[t.glyphs]}),rt(i.transition,t.transition)||n.push({command:"setTransition",args:[t.transition]}),rt(i.light,t.light)||n.push({command:"setLight",args:[t.light]}),rt(i.terrain,t.terrain)||n.push({command:"setTerrain",args:[t.terrain]}),rt(i.sky,t.sky)||n.push({command:"setSky",args:[t.sky]}),rt(i.projection,t.projection)||n.push({command:"setProjection",args:[t.projection]});const s={},f=[];(function(b,S,k,R){let F;for(F in S=S||{},b=b||{})Object.prototype.hasOwnProperty.call(b,F)&&(Object.prototype.hasOwnProperty.call(S,F)||Lt(F,k,R));for(F in S)Object.prototype.hasOwnProperty.call(S,F)&&(Object.prototype.hasOwnProperty.call(b,F)?rt(b[F],S[F])||(b[F].type==="geojson"&&S[F].type==="geojson"&&cr(b,S,F)?dt(k,{command:"setGeoJSONSourceData",args:[F,S[F].data]}):Xt(F,S,k,R)):Xe(F,S,k))})(i.sources,t.sources,f,s);const v=[];i.layers&&i.layers.forEach(b=>{"source"in b&&s[b.source]?n.push({command:"removeLayer",args:[b.id]}):v.push(b)}),n=n.concat(f),function(b,S,k){S=S||[];const R=(b=b||[]).map(qr),F=S.map(qr),j=b.reduce(Nr,{}),W=S.reduce(Nr,{}),K=R.slice(),ee=Object.create(null);let ie,me,Ce,Ve,Re;for(let H=0,pe=0;H<R.length;H++)ie=R[H],Object.prototype.hasOwnProperty.call(W,ie)?pe++:(dt(k,{command:"removeLayer",args:[ie]}),K.splice(K.indexOf(ie,pe),1));for(let H=0,pe=0;H<F.length;H++)ie=F[F.length-1-H],K[K.length-1-H]!==ie&&(Object.prototype.hasOwnProperty.call(j,ie)?(dt(k,{command:"removeLayer",args:[ie]}),K.splice(K.lastIndexOf(ie,K.length-pe),1)):pe++,Ve=K[K.length-H],dt(k,{command:"addLayer",args:[W[ie],Ve]}),K.splice(K.length-H,0,ie),ee[ie]=!0);for(let H=0;H<F.length;H++)if(ie=F[H],me=j[ie],Ce=W[ie],!ee[ie]&&!rt(me,Ce))if(rt(me.source,Ce.source)&&rt(me["source-layer"],Ce["source-layer"])&&rt(me.type,Ce.type)){for(Re in Mr(me.layout,Ce.layout,k,ie,null,"setLayoutProperty"),Mr(me.paint,Ce.paint,k,ie,null,"setPaintProperty"),rt(me.filter,Ce.filter)||dt(k,{command:"setFilter",args:[ie,Ce.filter]}),rt(me.minzoom,Ce.minzoom)&&rt(me.maxzoom,Ce.maxzoom)||dt(k,{command:"setLayerZoomRange",args:[ie,Ce.minzoom,Ce.maxzoom]}),me)Object.prototype.hasOwnProperty.call(me,Re)&&Re!=="layout"&&Re!=="paint"&&Re!=="filter"&&Re!=="metadata"&&Re!=="minzoom"&&Re!=="maxzoom"&&(Re.indexOf("paint.")===0?Mr(me[Re],Ce[Re],k,ie,Re.slice(6),"setPaintProperty"):rt(me[Re],Ce[Re])||dt(k,{command:"setLayerProperty",args:[ie,Re,Ce[Re]]}));for(Re in Ce)Object.prototype.hasOwnProperty.call(Ce,Re)&&!Object.prototype.hasOwnProperty.call(me,Re)&&Re!=="layout"&&Re!=="paint"&&Re!=="filter"&&Re!=="metadata"&&Re!=="minzoom"&&Re!=="maxzoom"&&(Re.indexOf("paint.")===0?Mr(me[Re],Ce[Re],k,ie,Re.slice(6),"setPaintProperty"):rt(me[Re],Ce[Re])||dt(k,{command:"setLayerProperty",args:[ie,Re,Ce[Re]]}))}else dt(k,{command:"removeLayer",args:[ie]}),Ve=K[K.lastIndexOf(ie)+1],dt(k,{command:"addLayer",args:[Ce,Ve]})}(v,t.layers,n)}catch(s){console.warn("Unable to compute style diff:",s),n=[{command:"setStyle",args:[t]}]}return n},M.bD=function(i){const t=[],n=i.id;return n===void 0&&t.push({message:`layers.${n}: missing required property "id"`}),i.render===void 0&&t.push({message:`layers.${n}: missing required method "render"`}),i.renderingMode&&i.renderingMode!=="2d"&&i.renderingMode!=="3d"&&t.push({message:`layers.${n}: property "renderingMode" must be either "2d" or "3d"`}),t},M.bE=function i(t,n){if(Array.isArray(t)){if(!Array.isArray(n)||t.length!==n.length)return!1;for(let s=0;s<t.length;s++)if(!i(t[s],n[s]))return!1;return!0}if(typeof t=="object"&&t!==null&&n!==null){if(typeof n!="object"||Object.keys(t).length!==Object.keys(n).length)return!1;for(const s in t)if(!i(t[s],n[s]))return!1;return!0}return t===n},M.bF=pr,M.bG=Qr,M.bH=class extends xi{constructor(i,t){super(i,t),this.current=0}set(i){this.current!==i&&(this.current=i,this.gl.uniform1i(this.location,i))}},M.bI=Yh,M.bJ=class extends xi{constructor(i,t){super(i,t),this.current=Us}set(i){if(i[12]!==this.current[12]||i[0]!==this.current[0])return this.current=i,void this.gl.uniformMatrix4fv(this.location,!1,i);for(let t=1;t<16;t++)if(i[t]!==this.current[t]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);break}}},M.bK=zd,M.bL=class extends xi{constructor(i,t){super(i,t),this.current=[0,0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]||(this.current=i,this.gl.uniform3f(this.location,i[0],i[1],i[2]))}},M.bM=class extends xi{constructor(i,t){super(i,t),this.current=[0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]||(this.current=i,this.gl.uniform2f(this.location,i[0],i[1]))}},M.bN=yt,M.bO=function(i,t){var n=Math.sin(t),s=Math.cos(t);return i[0]=s,i[1]=n,i[2]=0,i[3]=-n,i[4]=s,i[5]=0,i[6]=0,i[7]=0,i[8]=1,i},M.bP=function(i,t,n){var s=t[0],f=t[1],v=t[2];return i[0]=s*n[0]+f*n[3]+v*n[6],i[1]=s*n[1]+f*n[4]+v*n[7],i[2]=s*n[2]+f*n[5]+v*n[8],i},M.bQ=function(i,t,n,s,f,v,b){var S=1/(t-n),k=1/(s-f),R=1/(v-b);return i[0]=-2*S,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=-2*k,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2*R,i[11]=0,i[12]=(t+n)*S,i[13]=(f+s)*k,i[14]=(b+v)*R,i[15]=1,i},M.bR=class extends xi{constructor(i,t){super(i,t),this.current=new Array}set(i){if(i!=this.current){this.current=i;const t=new Float32Array(4*i.length);for(let n=0;n<i.length;n++)t[4*n]=i[n].r,t[4*n+1]=i[n].g,t[4*n+2]=i[n].b,t[4*n+3]=i[n].a;this.gl.uniform4fv(this.location,t)}}},M.bS=class extends xi{constructor(i,t){super(i,t),this.current=new Array}set(i){if(i!=this.current){this.current=i;const t=new Float32Array(i);this.gl.uniform1fv(this.location,t)}}},M.bT=class extends y{},M.bU=fm,M.bV=class extends E{},M.bW=gf,M.bX=function(i){return i<=1?1:Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))},M.bY=Zl,M.bZ=function(i,t,n){var s=t[0],f=t[1],v=t[2],b=n[3]*s+n[7]*f+n[11]*v+n[15];return i[0]=(n[0]*s+n[4]*f+n[8]*v+n[12])/(b=b||1),i[1]=(n[1]*s+n[5]*f+n[9]*v+n[13])/b,i[2]=(n[2]*s+n[6]*f+n[10]*v+n[14])/b,i},M.b_=class extends jo{},M.ba=ld,M.bb=Kc,M.bc=Oe,M.bd=ct,M.be=as,M.bf=function(i,t,n,s,f){return Oe(s,f,At((i-t)/(n-t),0,1))},M.bg=Wt,M.bh=function(){return new Float64Array(3)},M.bi=function(i,t,n,s){return i[0]=t[0]+n[0]*s,i[1]=t[1]+n[1]*s,i[2]=t[2]+n[2]*s,i},M.bj=zt,M.bk=function(){return new Float64Array(4)},M.bl=function(i,t,n,s){var f=[],v=[];return f[0]=t[0]-n[0],f[1]=t[1]-n[1],f[2]=t[2]-n[2],v[0]=f[0]*Math.cos(s)-f[1]*Math.sin(s),v[1]=f[0]*Math.sin(s)+f[1]*Math.cos(s),v[2]=f[2],i[0]=v[0]+n[0],i[1]=v[1]+n[1],i[2]=v[2]+n[2],i},M.bm=function(i,t,n,s){var f=[],v=[];return f[0]=t[0]-n[0],f[1]=t[1]-n[1],f[2]=t[2]-n[2],v[0]=f[0],v[1]=f[1]*Math.cos(s)-f[2]*Math.sin(s),v[2]=f[1]*Math.sin(s)+f[2]*Math.cos(s),i[0]=v[0]+n[0],i[1]=v[1]+n[1],i[2]=v[2]+n[2],i},M.bn=function(i,t,n,s){var f=[],v=[];return f[0]=t[0]-n[0],f[1]=t[1]-n[1],f[2]=t[2]-n[2],v[0]=f[2]*Math.sin(s)+f[0]*Math.cos(s),v[1]=f[1],v[2]=f[2]*Math.cos(s)-f[0]*Math.sin(s),i[0]=v[0]+n[0],i[1]=v[1]+n[1],i[2]=v[2]+n[2],i},M.bo=re,M.bp=function(i,t,n){var s=Math.sin(n),f=Math.cos(n),v=t[0],b=t[1],S=t[2],k=t[3],R=t[8],F=t[9],j=t[10],W=t[11];return t!==i&&(i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15]),i[0]=v*f-R*s,i[1]=b*f-F*s,i[2]=S*f-j*s,i[3]=k*f-W*s,i[8]=v*s+R*f,i[9]=b*s+F*f,i[10]=S*s+j*f,i[11]=k*s+W*f,i},M.bq=function(i,t){const n=Wt(i,360),s=Wt(t,360),f=s-n,v=s>n?f-360:f+360;return Math.abs(f)<Math.abs(v)?f:v},M.br=function(i){return i[0]=0,i[1]=0,i[2]=0,i},M.bs=function(i,t,n,s){const f=Math.sqrt(i*i+t*t),v=Math.sqrt(n*n+s*s);i/=f,t/=f,n/=v,s/=v;const b=Math.acos(i*n+t*s);return-t*n+i*s>0?b:-b},M.bt=function(i,t){return i[0]*t[0]+i[1]*t[1]+i[2]*t[2]+i[3]},M.bu=mm,M.bv=function(i,t){const n=Wt(i,2*Math.PI),s=Wt(t,2*Math.PI);return Math.min(Math.abs(n-s),Math.abs(n-s+2*Math.PI),Math.abs(n-s-2*Math.PI))},M.bw=function(){const i={},t=fe.$version;for(const n in fe.$root){const s=fe.$root[n];if(s.required){let f=null;f=n==="version"?t:s.type==="array"?[]:{},f!=null&&(i[n]=f)}}return i},M.bx=Ga,M.by=ii,M.bz=function(i){i=i.slice();const t=Object.create(null);for(let n=0;n<i.length;n++)t[i[n].id]=i[n];for(let n=0;n<i.length;n++)"ref"in i[n]&&(i[n]=We(i[n],t[i[n].ref]));return i},M.c=Bn,M.c0=function(i,t){return i[0]===t[0]&&i[1]===t[1]&&i[2]===t[2]&&i[3]===t[3]&&i[4]===t[4]&&i[5]===t[5]&&i[6]===t[6]&&i[7]===t[7]&&i[8]===t[8]&&i[9]===t[9]&&i[10]===t[10]&&i[11]===t[11]&&i[12]===t[12]&&i[13]===t[13]&&i[14]===t[14]&&i[15]===t[15]},M.c1=function(i,t){var n=i[0],s=i[1],f=i[2],v=i[3],b=i[4],S=i[5],k=i[6],R=i[7],F=i[8],j=i[9],W=i[10],K=i[11],ee=i[12],ie=i[13],me=i[14],Ce=i[15],Ve=t[0],Re=t[1],H=t[2],pe=t[3],Fe=t[4],pt=t[5],jt=t[6],bt=t[7],Mt=t[8],Kt=t[9],Vt=t[10],qt=t[11],Rt=t[12],Er=t[13],Wr=t[14],Gr=t[15];return Math.abs(n-Ve)<=Qe*Math.max(1,Math.abs(n),Math.abs(Ve))&&Math.abs(s-Re)<=Qe*Math.max(1,Math.abs(s),Math.abs(Re))&&Math.abs(f-H)<=Qe*Math.max(1,Math.abs(f),Math.abs(H))&&Math.abs(v-pe)<=Qe*Math.max(1,Math.abs(v),Math.abs(pe))&&Math.abs(b-Fe)<=Qe*Math.max(1,Math.abs(b),Math.abs(Fe))&&Math.abs(S-pt)<=Qe*Math.max(1,Math.abs(S),Math.abs(pt))&&Math.abs(k-jt)<=Qe*Math.max(1,Math.abs(k),Math.abs(jt))&&Math.abs(R-bt)<=Qe*Math.max(1,Math.abs(R),Math.abs(bt))&&Math.abs(F-Mt)<=Qe*Math.max(1,Math.abs(F),Math.abs(Mt))&&Math.abs(j-Kt)<=Qe*Math.max(1,Math.abs(j),Math.abs(Kt))&&Math.abs(W-Vt)<=Qe*Math.max(1,Math.abs(W),Math.abs(Vt))&&Math.abs(K-qt)<=Qe*Math.max(1,Math.abs(K),Math.abs(qt))&&Math.abs(ee-Rt)<=Qe*Math.max(1,Math.abs(ee),Math.abs(Rt))&&Math.abs(ie-Er)<=Qe*Math.max(1,Math.abs(ie),Math.abs(Er))&&Math.abs(me-Wr)<=Qe*Math.max(1,Math.abs(me),Math.abs(Wr))&&Math.abs(Ce-Gr)<=Qe*Math.max(1,Math.abs(Ce),Math.abs(Gr))},M.c2=function(i,t){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],i[9]=t[9],i[10]=t[10],i[11]=t[11],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15],i},M.c3=i=>i.type==="symbol",M.c4=i=>i.type==="circle",M.c5=i=>i.type==="heatmap",M.c6=i=>i.type==="line",M.c7=i=>i.type==="fill",M.c8=i=>i.type==="fill-extrusion",M.c9=i=>i.type==="hillshade",M.cA=wo,M.cB=Th,M.cC=ts,M.cD=Sl,M.cE=class{constructor(i){this._marks={start:[i.url,"start"].join("#"),end:[i.url,"end"].join("#"),measure:i.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let i=performance.getEntriesByName(this._marks.measure);return i.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),i=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),i}},M.cF=function(i,t,n,s,f){return u(this,void 0,void 0,function*(){if(Je())try{return yield bn(i,t,n,s,f)}catch{}return function(v,b,S,k,R){const F=v.width,j=v.height;sn&&kn||(sn=new OffscreenCanvas(F,j),kn=sn.getContext("2d",{willReadFrequently:!0})),sn.width=F,sn.height=j,kn.drawImage(v,0,0,F,j);const W=kn.getImageData(b,S,k,R);return kn.clearRect(0,0,F,j),W.data}(i,t,n,s,f)})},M.cG=yg,M.cH=J,M.cI=de,M.cJ=gc,M.cK=Dp,M.cL=cl,M.cM=Nl,M.ca=i=>i.type==="raster",M.cb=i=>i.type==="background",M.cc=i=>i.type==="custom",M.cd=Ut,M.ce=function(i,t,n){const s=or(t.x-n.x,t.y-n.y),f=or(i.x-n.x,i.y-n.y);var v,b;return Wn(Math.atan2(s[0]*f[1]-s[1]*f[0],(v=s)[0]*(b=f)[0]+v[1]*b[1]))},M.cf=ur,M.cg=function(i,t){return Jn[t]&&(i instanceof MouseEvent||i instanceof WheelEvent)},M.ch=function(i,t){return Si[t]&&"touches"in i},M.ci=function(i){return Si[i]||Jn[i]},M.cj=function(i,t,n){var s=t[0],f=t[1];return i[0]=n[0]*s+n[4]*f+n[12],i[1]=n[1]*s+n[5]*f+n[13],i},M.ck=function(i,t){const{x:n,y:s}=dp.fromLngLat(t);return!(i<0||i>25||s<0||s>=1||n<0||n>=1)},M.cl=function(i,t){return i[0]=t[0],i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=t[1],i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=t[2],i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i},M.cm=class extends Ta{},M.cn=By,M.cp=function(i){return i.message===Hn},M.cq=ei,M.cr=function(i,t){Ji.REGISTERED_PROTOCOLS[i]=t},M.cs=function(i){delete Ji.REGISTERED_PROTOCOLS[i]},M.ct=function(i,t){const n={};for(let f=0;f<i.length;f++){const v=t&&t[i[f].id]||ec(i[f]);t&&(t[i[f].id]=v);let b=n[v];b||(b=n[v]=[]),b.push(i[f])}const s=[];for(const f in n)s.push(n[f]);return s},M.cu=lr,M.cv=_g,M.cw=xg,M.cx=up,M.cy=function(i){i.bucket.createArrays(),i.bucket.tilePixelRatio=xt/(512*i.bucket.overscaling),i.bucket.compareText={},i.bucket.iconsNeedLinear=!1;const t=i.bucket.layers[0],n=t.layout,s=t._unevaluatedLayout._values,f={layoutIconSize:s["icon-size"].possiblyEvaluate(new oi(i.bucket.zoom+1),i.canonical),layoutTextSize:s["text-size"].possiblyEvaluate(new oi(i.bucket.zoom+1),i.canonical),textMaxSize:s["text-size"].possiblyEvaluate(new oi(18))};if(i.bucket.textSizeData.kind==="composite"){const{minZoom:R,maxZoom:F}=i.bucket.textSizeData;f.compositeTextSizes=[s["text-size"].possiblyEvaluate(new oi(R),i.canonical),s["text-size"].possiblyEvaluate(new oi(F),i.canonical)]}if(i.bucket.iconSizeData.kind==="composite"){const{minZoom:R,maxZoom:F}=i.bucket.iconSizeData;f.compositeIconSizes=[s["icon-size"].possiblyEvaluate(new oi(R),i.canonical),s["icon-size"].possiblyEvaluate(new oi(F),i.canonical)]}const v=n.get("text-line-height")*Ao,b=n.get("text-rotation-alignment")!=="viewport"&&n.get("symbol-placement")!=="point",S=n.get("text-keep-upright"),k=n.get("text-size");for(const R of i.bucket.features){const F=n.get("text-font").evaluate(R,{},i.canonical).join(","),j=k.evaluate(R,{},i.canonical),W=f.layoutTextSize.evaluate(R,{},i.canonical),K=f.layoutIconSize.evaluate(R,{},i.canonical),ee={horizontal:{},vertical:void 0},ie=R.text;let me,Ce=[0,0];if(ie){const H=ie.toString(),pe=n.get("text-letter-spacing").evaluate(R,{},i.canonical)*Ao,Fe=df(H)?pe:0,pt=n.get("text-anchor").evaluate(R,{},i.canonical),jt=vm(t,R,i.canonical);if(!jt){const Vt=n.get("text-radial-offset").evaluate(R,{},i.canonical);Ce=Vt?Cg(pt,[Vt*Ao,_m]):n.get("text-offset").evaluate(R,{},i.canonical).map(qt=>qt*Ao)}let bt=b?"center":n.get("text-justify").evaluate(R,{},i.canonical);const Mt=n.get("symbol-placement")==="point"?n.get("text-max-width").evaluate(R,{},i.canonical)*Ao:1/0,Kt=()=>{i.bucket.allowVerticalPlacement&&Fl(H)&&(ee.vertical=md(ie,i.glyphMap,i.glyphPositions,i.imagePositions,F,Mt,v,pt,"left",Fe,Ce,M.al.vertical,!0,W,j))};if(!b&&jt){const Vt=new Set;if(bt==="auto")for(let Rt=0;Rt<jt.values.length;Rt+=2)Vt.add(bc(jt.values[Rt]));else Vt.add(bt);let qt=!1;for(const Rt of Vt)if(!ee.horizontal[Rt])if(qt)ee.horizontal[Rt]=ee.horizontal[0];else{const Er=md(ie,i.glyphMap,i.glyphPositions,i.imagePositions,F,Mt,v,"center",Rt,Fe,Ce,M.al.horizontal,!1,W,j);Er&&(ee.horizontal[Rt]=Er,qt=Er.positionedLines.length===1)}Kt()}else{bt==="auto"&&(bt=bc(pt));const Vt=md(ie,i.glyphMap,i.glyphPositions,i.imagePositions,F,Mt,v,pt,bt,Fe,Ce,M.al.horizontal,!1,W,j);Vt&&(ee.horizontal[bt]=Vt),Kt(),Fl(H)&&b&&S&&(ee.vertical=md(ie,i.glyphMap,i.glyphPositions,i.imagePositions,F,Mt,v,pt,bt,Fe,Ce,M.al.vertical,!1,W,j))}}let Ve=!1;if(R.icon&&R.icon.name){const H=i.imageMap[R.icon.name];H&&(me=C(i.imagePositions[R.icon.name],n.get("icon-offset").evaluate(R,{},i.canonical),n.get("icon-anchor").evaluate(R,{},i.canonical)),Ve=!!H.sdf,i.bucket.sdfIcons===void 0?i.bucket.sdfIcons=Ve:i.bucket.sdfIcons!==Ve&&$r("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(H.pixelRatio!==i.bucket.pixelRatio||n.get("icon-rotate").constantOr(1)!==0)&&(i.bucket.iconsNeedLinear=!0))}const Re=au(ee.horizontal)||ee.vertical;i.bucket.iconsInText=!!Re&&Re.iconsInText,(Re||me)&&zn(i.bucket,R,ee,me,i.imageMap,f,W,K,Ce,Ve,i.canonical,i.subdivisionGranularity)}i.showCollisionBoxes&&i.bucket.generateCollisionDebugBuffers()},M.cz=bf,M.d=et,M.e=Sr,M.f=i=>u(void 0,void 0,void 0,function*(){if(i.byteLength===0)return createImageBitmap(new ImageData(1,1));const t=new Blob([new Uint8Array(i)],{type:"image/png"});try{return createImageBitmap(t)}catch(n){throw new Error(`Could not load image because of ${n.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),M.g=Gi,M.h=i=>new Promise((t,n)=>{const s=new Image;s.onload=()=>{t(s),URL.revokeObjectURL(s.src),s.onload=null,window.requestAnimationFrame(()=>{s.src=on})},s.onerror=()=>n(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const f=new Blob([new Uint8Array(i)],{type:"image/png"});s.src=i.byteLength?URL.createObjectURL(f):on}),M.i=nn,M.j=(i,t)=>mo(Sr(i,{type:"json"}),t),M.k=Ie,M.l=ge,M.m=mo,M.n=(i,t)=>mo(Sr(i,{type:"arrayBuffer"}),t),M.o=function(i){return new Sl(i).readFields(Ih,[])},M.p=Op,M.q=Vl,M.r=Li,M.s=wr,M.t=Za,M.u=hn,M.v=fe,M.w=$r,M.x=tu,M.y=nc,M.z=function([i,t,n]){return t+=90,t*=Math.PI/180,n*=Math.PI/180,{x:i*Math.cos(t)*Math.sin(n),y:i*Math.sin(t)*Math.sin(n),z:i*Math.cos(n)}}}),P("worker",["./shared"],function(M){class u{constructor(se){this.keyCache={},se&&this.replace(se)}replace(se){this._layerConfigs={},this._layers={},this.update(se,[])}update(se,ae){for(const Ie of se){this._layerConfigs[Ie.id]=Ie;const Ue=this._layers[Ie.id]=M.bA(Ie);Ue._featureFilter=M.a7(Ue.filter),this.keyCache[Ie.id]&&delete this.keyCache[Ie.id]}for(const Ie of ae)delete this.keyCache[Ie],delete this._layerConfigs[Ie],delete this._layers[Ie];this.familiesBySource={};const ge=M.ct(Object.values(this._layerConfigs),this.keyCache);for(const Ie of ge){const Ue=Ie.map(Xe=>this._layers[Xe.id]),fe=Ue[0];if(fe.visibility==="none")continue;const qe=fe.source||"";let We=this.familiesBySource[qe];We||(We=this.familiesBySource[qe]={});const rt=fe.sourceLayer||"_geojsonTileLayer";let dt=We[rt];dt||(dt=We[rt]=[]),dt.push(Ue)}}}class J{constructor(se){const ae={},ge=[];for(const qe in se){const We=se[qe],rt=ae[qe]={};for(const dt in We){const Xe=We[+dt];if(!Xe||Xe.bitmap.width===0||Xe.bitmap.height===0)continue;const Lt={x:0,y:0,w:Xe.bitmap.width+2,h:Xe.bitmap.height+2};ge.push(Lt),rt[dt]={rect:Lt,metrics:Xe.metrics}}}const{w:Ie,h:Ue}=M.p(ge),fe=new M.q({width:Ie||1,height:Ue||1});for(const qe in se){const We=se[qe];for(const rt in We){const dt=We[+rt];if(!dt||dt.bitmap.width===0||dt.bitmap.height===0)continue;const Xe=ae[qe][rt].rect;M.q.copy(dt.bitmap,fe,{x:0,y:0},{x:Xe.x+1,y:Xe.y+1},dt.bitmap)}}this.image=fe,this.positions=ae}}M.cu("GlyphAtlas",J);class Y{constructor(se){this.tileID=new M.Y(se.tileID.overscaledZ,se.tileID.wrap,se.tileID.canonical.z,se.tileID.canonical.x,se.tileID.canonical.y),this.uid=se.uid,this.zoom=se.zoom,this.pixelRatio=se.pixelRatio,this.tileSize=se.tileSize,this.source=se.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=se.showCollisionBoxes,this.collectResourceTiming=!!se.collectResourceTiming,this.returnDependencies=!!se.returnDependencies,this.promoteId=se.promoteId,this.inFlightDependencies=[]}parse(se,ae,ge,Ie,Ue){return M._(this,void 0,void 0,function*(){this.status="parsing",this.data=se,this.collisionBoxArray=new M.a5;const fe=new M.cv(Object.keys(se.layers).sort()),qe=new M.cw(this.tileID,this.promoteId);qe.bucketLayerIDs=[];const We={},rt={featureIndex:qe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ge,subdivisionGranularity:Ue},dt=ae.familiesBySource[this.source];for(const Fr in dt){const Ot=se.layers[Fr];if(!Ot)continue;Ot.version===1&&M.w(`Vector tile source "${this.source}" layer "${Fr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Or=fe.encode(Fr),rn=[];for(let Vn=0;Vn<Ot.length;Vn++){const Zn=Ot.feature(Vn),Po=qe.getId(Zn,Fr);rn.push({feature:Zn,id:Po,index:Vn,sourceLayerIndex:Or})}for(const Vn of dt[Fr]){const Zn=Vn[0];Zn.source!==this.source&&M.w(`layer.source = ${Zn.source} does not equal this.source = ${this.source}`),Zn.minzoom&&this.zoom<Math.floor(Zn.minzoom)||Zn.maxzoom&&this.zoom>=Zn.maxzoom||Zn.visibility!=="none"&&(ve(Vn,this.zoom,ge),(We[Zn.id]=Zn.createBucket({index:qe.bucketLayerIDs.length,layers:Vn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Or,sourceID:this.source})).populate(rn,rt,this.tileID.canonical),qe.bucketLayerIDs.push(Vn.map(Po=>Po.id)))}}const Xe=M.bF(rt.glyphDependencies,Fr=>Object.keys(Fr).map(Number));this.inFlightDependencies.forEach(Fr=>Fr==null?void 0:Fr.abort()),this.inFlightDependencies=[];let Lt=Promise.resolve({});if(Object.keys(Xe).length){const Fr=new AbortController;this.inFlightDependencies.push(Fr),Lt=Ie.sendAsync({type:"GG",data:{stacks:Xe,source:this.source,tileID:this.tileID,type:"glyphs"}},Fr)}const Xt=Object.keys(rt.iconDependencies);let cr=Promise.resolve({});if(Xt.length){const Fr=new AbortController;this.inFlightDependencies.push(Fr),cr=Ie.sendAsync({type:"GI",data:{icons:Xt,source:this.source,tileID:this.tileID,type:"icons"}},Fr)}const Mr=Object.keys(rt.patternDependencies);let qr=Promise.resolve({});if(Mr.length){const Fr=new AbortController;this.inFlightDependencies.push(Fr),qr=Ie.sendAsync({type:"GI",data:{icons:Mr,source:this.source,tileID:this.tileID,type:"patterns"}},Fr)}const[Nr,St,wn]=yield Promise.all([Lt,cr,qr]),yn=new J(Nr),Sn=new M.cx(St,wn);for(const Fr in We){const Ot=We[Fr];Ot instanceof M.a6?(ve(Ot.layers,this.zoom,ge),M.cy({bucket:Ot,glyphMap:Nr,glyphPositions:yn.positions,imageMap:St,imagePositions:Sn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:rt.subdivisionGranularity})):Ot.hasPattern&&(Ot instanceof M.cz||Ot instanceof M.cA||Ot instanceof M.cB)&&(ve(Ot.layers,this.zoom,ge),Ot.addFeatures(rt,this.tileID.canonical,Sn.patternPositions))}return this.status="done",{buckets:Object.values(We).filter(Fr=>!Fr.isEmpty()),featureIndex:qe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:yn.image,imageAtlas:Sn,glyphMap:this.returnDependencies?Nr:null,iconMap:this.returnDependencies?St:null,glyphPositions:this.returnDependencies?yn.positions:null}})}}function ve(et,se,ae){const ge=new M.C(se);for(const Ie of et)Ie.recalculate(ge,ae)}class de{constructor(se,ae,ge){this.actor=se,this.layerIndex=ae,this.availableImages=ge,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(se,ae){return M._(this,void 0,void 0,function*(){const ge=yield M.n(se.request,ae);try{return{vectorTile:new M.cC.VectorTile(new M.cD(ge.data)),rawData:ge.data,cacheControl:ge.cacheControl,expires:ge.expires}}catch(Ie){const Ue=new Uint8Array(ge.data);let fe=`Unable to parse the tile at ${se.request.url}, `;throw fe+=Ue[0]===31&&Ue[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Ie.message}`,new Error(fe)}})}loadTile(se){return M._(this,void 0,void 0,function*(){const ae=se.uid,ge=!!(se&&se.request&&se.request.collectResourceTiming)&&new M.cE(se.request),Ie=new Y(se);this.loading[ae]=Ie;const Ue=new AbortController;Ie.abort=Ue;try{const fe=yield this.loadVectorTile(se,Ue);if(delete this.loading[ae],!fe)return null;const qe=fe.rawData,We={};fe.expires&&(We.expires=fe.expires),fe.cacheControl&&(We.cacheControl=fe.cacheControl);const rt={};if(ge){const Xe=ge.finish();Xe&&(rt.resourceTiming=JSON.parse(JSON.stringify(Xe)))}Ie.vectorTile=fe.vectorTile;const dt=Ie.parse(fe.vectorTile,this.layerIndex,this.availableImages,this.actor,se.subdivisionGranularity);this.loaded[ae]=Ie,this.fetching[ae]={rawTileData:qe,cacheControl:We,resourceTiming:rt};try{const Xe=yield dt;return M.e({rawTileData:qe.slice(0)},Xe,We,rt)}finally{delete this.fetching[ae]}}catch(fe){throw delete this.loading[ae],Ie.status="done",this.loaded[ae]=Ie,fe}})}reloadTile(se){return M._(this,void 0,void 0,function*(){const ae=se.uid;if(!this.loaded||!this.loaded[ae])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const ge=this.loaded[ae];if(ge.showCollisionBoxes=se.showCollisionBoxes,ge.status==="parsing"){const Ie=yield ge.parse(ge.vectorTile,this.layerIndex,this.availableImages,this.actor,se.subdivisionGranularity);let Ue;if(this.fetching[ae]){const{rawTileData:fe,cacheControl:qe,resourceTiming:We}=this.fetching[ae];delete this.fetching[ae],Ue=M.e({rawTileData:fe.slice(0)},Ie,qe,We)}else Ue=Ie;return Ue}if(ge.status==="done"&&ge.vectorTile)return ge.parse(ge.vectorTile,this.layerIndex,this.availableImages,this.actor,se.subdivisionGranularity)})}abortTile(se){return M._(this,void 0,void 0,function*(){const ae=this.loading,ge=se.uid;ae&&ae[ge]&&ae[ge].abort&&(ae[ge].abort.abort(),delete ae[ge])})}removeTile(se){return M._(this,void 0,void 0,function*(){this.loaded&&this.loaded[se.uid]&&delete this.loaded[se.uid]})}}class Te{constructor(){this.loaded={}}loadTile(se){return M._(this,void 0,void 0,function*(){const{uid:ae,encoding:ge,rawImageData:Ie,redFactor:Ue,greenFactor:fe,blueFactor:qe,baseShift:We}=se,rt=Ie.width+2,dt=Ie.height+2,Xe=M.b(Ie)?new M.R({width:rt,height:dt},yield M.cF(Ie,-1,-1,rt,dt)):Ie,Lt=new M.cG(ae,Xe,ge,Ue,fe,qe,We);return this.loaded=this.loaded||{},this.loaded[ae]=Lt,Lt})}removeTile(se){const ae=this.loaded,ge=se.uid;ae&&ae[ge]&&delete ae[ge]}}var le,we,xe=function(){if(we)return le;function et(ae,ge){if(ae.length!==0){se(ae[0],ge);for(var Ie=1;Ie<ae.length;Ie++)se(ae[Ie],!ge)}}function se(ae,ge){for(var Ie=0,Ue=0,fe=0,qe=ae.length,We=qe-1;fe<qe;We=fe++){var rt=(ae[fe][0]-ae[We][0])*(ae[We][1]+ae[fe][1]),dt=Ie+rt;Ue+=Math.abs(Ie)>=Math.abs(rt)?Ie-dt+rt:rt-dt+Ie,Ie=dt}Ie+Ue>=0!=!!ge&&ae.reverse()}return we=1,le=function ae(ge,Ie){var Ue,fe=ge&&ge.type;if(fe==="FeatureCollection")for(Ue=0;Ue<ge.features.length;Ue++)ae(ge.features[Ue],Ie);else if(fe==="GeometryCollection")for(Ue=0;Ue<ge.geometries.length;Ue++)ae(ge.geometries[Ue],Ie);else if(fe==="Feature")ae(ge.geometry,Ie);else if(fe==="Polygon")et(ge.coordinates,Ie);else if(fe==="MultiPolygon")for(Ue=0;Ue<ge.coordinates.length;Ue++)et(ge.coordinates[Ue],Ie);return ge}}(),Ze=M.cH(xe);const mt=M.cC.VectorTileFeature.prototype.toGeoJSON;class kt{constructor(se){this._feature=se,this.extent=M.Z,this.type=se.type,this.properties=se.tags,"id"in se&&!isNaN(se.id)&&(this.id=parseInt(se.id,10))}loadGeometry(){if(this._feature.type===1){const se=[];for(const ae of this._feature.geometry)se.push([new M.P(ae[0],ae[1])]);return se}{const se=[];for(const ae of this._feature.geometry){const ge=[];for(const Ie of ae)ge.push(new M.P(Ie[0],Ie[1]));se.push(ge)}return se}}toGeoJSON(se,ae,ge){return mt.call(this,se,ae,ge)}}class Tt{constructor(se){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=M.Z,this.length=se.length,this._features=se}feature(se){return new kt(this._features[se])}}var Je,Qe,nt,yt={exports:{}},ze=function(){if(nt)return yt.exports;nt=1;var et=M.cK(),se=function(){if(Qe)return Je;Qe=1;var dt=M.cI(),Xe=M.cJ().VectorTileFeature;function Lt(cr,Mr){this.options=Mr||{},this.features=cr,this.length=cr.length}function Xt(cr,Mr){this.id=typeof cr.id=="number"?cr.id:void 0,this.type=cr.type,this.rawGeometry=cr.type===1?[cr.geometry]:cr.geometry,this.properties=cr.tags,this.extent=Mr||4096}return Je=Lt,Lt.prototype.feature=function(cr){return new Xt(this.features[cr],this.options.extent)},Xt.prototype.loadGeometry=function(){var cr=this.rawGeometry;this.geometry=[];for(var Mr=0;Mr<cr.length;Mr++){for(var qr=cr[Mr],Nr=[],St=0;St<qr.length;St++)Nr.push(new dt(qr[St][0],qr[St][1]));this.geometry.push(Nr)}return this.geometry},Xt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var cr=this.geometry,Mr=1/0,qr=-1/0,Nr=1/0,St=-1/0,wn=0;wn<cr.length;wn++)for(var yn=cr[wn],Sn=0;Sn<yn.length;Sn++){var Fr=yn[Sn];Mr=Math.min(Mr,Fr.x),qr=Math.max(qr,Fr.x),Nr=Math.min(Nr,Fr.y),St=Math.max(St,Fr.y)}return[Mr,Nr,qr,St]},Xt.prototype.toGeoJSON=Xe.prototype.toGeoJSON,Je}();function ae(dt){var Xe=new et;return function(Lt,Xt){for(var cr in Lt.layers)Xt.writeMessage(3,ge,Lt.layers[cr])}(dt,Xe),Xe.finish()}function ge(dt,Xe){var Lt;Xe.writeVarintField(15,dt.version||1),Xe.writeStringField(1,dt.name||""),Xe.writeVarintField(5,dt.extent||4096);var Xt={keys:[],values:[],keycache:{},valuecache:{}};for(Lt=0;Lt<dt.length;Lt++)Xt.feature=dt.feature(Lt),Xe.writeMessage(2,Ie,Xt);var cr=Xt.keys;for(Lt=0;Lt<cr.length;Lt++)Xe.writeStringField(3,cr[Lt]);var Mr=Xt.values;for(Lt=0;Lt<Mr.length;Lt++)Xe.writeMessage(4,rt,Mr[Lt])}function Ie(dt,Xe){var Lt=dt.feature;Lt.id!==void 0&&Xe.writeVarintField(1,Lt.id),Xe.writeMessage(2,Ue,dt),Xe.writeVarintField(3,Lt.type),Xe.writeMessage(4,We,Lt)}function Ue(dt,Xe){var Lt=dt.feature,Xt=dt.keys,cr=dt.values,Mr=dt.keycache,qr=dt.valuecache;for(var Nr in Lt.properties){var St=Lt.properties[Nr],wn=Mr[Nr];if(St!==null){wn===void 0&&(Xt.push(Nr),Mr[Nr]=wn=Xt.length-1),Xe.writeVarint(wn);var yn=typeof St;yn!=="string"&&yn!=="boolean"&&yn!=="number"&&(St=JSON.stringify(St));var Sn=yn+":"+St,Fr=qr[Sn];Fr===void 0&&(cr.push(St),qr[Sn]=Fr=cr.length-1),Xe.writeVarint(Fr)}}}function fe(dt,Xe){return(Xe<<3)+(7&dt)}function qe(dt){return dt<<1^dt>>31}function We(dt,Xe){for(var Lt=dt.loadGeometry(),Xt=dt.type,cr=0,Mr=0,qr=Lt.length,Nr=0;Nr<qr;Nr++){var St=Lt[Nr],wn=1;Xt===1&&(wn=St.length),Xe.writeVarint(fe(1,wn));for(var yn=Xt===3?St.length-1:St.length,Sn=0;Sn<yn;Sn++){Sn===1&&Xt!==1&&Xe.writeVarint(fe(2,yn-1));var Fr=St[Sn].x-cr,Ot=St[Sn].y-Mr;Xe.writeVarint(qe(Fr)),Xe.writeVarint(qe(Ot)),cr+=Fr,Mr+=Ot}Xt===3&&Xe.writeVarint(fe(7,1))}}function rt(dt,Xe){var Lt=typeof dt;Lt==="string"?Xe.writeStringField(1,dt):Lt==="boolean"?Xe.writeBooleanField(7,dt):Lt==="number"&&(dt%1!=0?Xe.writeDoubleField(3,dt):dt<0?Xe.writeSVarintField(6,dt):Xe.writeVarintField(5,dt))}return yt.exports=ae,yt.exports.fromVectorTileJs=ae,yt.exports.fromGeojsonVt=function(dt,Xe){Xe=Xe||{};var Lt={};for(var Xt in dt)Lt[Xt]=new se(dt[Xt].features,Xe),Lt[Xt].name=Xt,Lt[Xt].version=Xe.version,Lt[Xt].extent=Xe.extent;return ae({layers:Lt})},yt.exports.GeoJSONWrapper=se,yt.exports}(),$e=M.cH(ze);const re={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:et=>et},it=Math.fround||(st=new Float32Array(1),et=>(st[0]=+et,st[0]));var st;const zt=3,tr=5,Cr=6;class xr{constructor(se){this.options=Object.assign(Object.create(re),se),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(se){const{log:ae,minZoom:ge,maxZoom:Ie}=this.options;ae&&console.time("total time");const Ue=`prepare ${se.length} points`;ae&&console.time(Ue),this.points=se;const fe=[];for(let We=0;We<se.length;We++){const rt=se[We];if(!rt.geometry)continue;const[dt,Xe]=rt.geometry.coordinates,Lt=it(Pt(dt)),Xt=it(Wt(Xe));fe.push(Lt,Xt,1/0,We,-1,1),this.options.reduce&&fe.push(0)}let qe=this.trees[Ie+1]=this._createTree(fe);ae&&console.timeEnd(Ue);for(let We=Ie;We>=ge;We--){const rt=+Date.now();qe=this.trees[We]=this._createTree(this._cluster(qe,We)),ae&&console.log("z%d: %d clusters in %dms",We,qe.numItems,+Date.now()-rt)}return ae&&console.timeEnd("total time"),this}getClusters(se,ae){let ge=((se[0]+180)%360+360)%360-180;const Ie=Math.max(-90,Math.min(90,se[1]));let Ue=se[2]===180?180:((se[2]+180)%360+360)%360-180;const fe=Math.max(-90,Math.min(90,se[3]));if(se[2]-se[0]>=360)ge=-180,Ue=180;else if(ge>Ue){const Xe=this.getClusters([ge,Ie,180,fe],ae),Lt=this.getClusters([-180,Ie,Ue,fe],ae);return Xe.concat(Lt)}const qe=this.trees[this._limitZoom(ae)],We=qe.range(Pt(ge),Wt(fe),Pt(Ue),Wt(Ie)),rt=qe.data,dt=[];for(const Xe of We){const Lt=this.stride*Xe;dt.push(rt[Lt+tr]>1?or(rt,Lt,this.clusterProps):this.points[rt[Lt+zt]])}return dt}getChildren(se){const ae=this._getOriginId(se),ge=this._getOriginZoom(se),Ie="No cluster with the specified id.",Ue=this.trees[ge];if(!Ue)throw new Error(Ie);const fe=Ue.data;if(ae*this.stride>=fe.length)throw new Error(Ie);const qe=this.options.radius/(this.options.extent*Math.pow(2,ge-1)),We=Ue.within(fe[ae*this.stride],fe[ae*this.stride+1],qe),rt=[];for(const dt of We){const Xe=dt*this.stride;fe[Xe+4]===se&&rt.push(fe[Xe+tr]>1?or(fe,Xe,this.clusterProps):this.points[fe[Xe+zt]])}if(rt.length===0)throw new Error(Ie);return rt}getLeaves(se,ae,ge){const Ie=[];return this._appendLeaves(Ie,se,ae=ae||10,ge=ge||0,0),Ie}getTile(se,ae,ge){const Ie=this.trees[this._limitZoom(se)],Ue=Math.pow(2,se),{extent:fe,radius:qe}=this.options,We=qe/fe,rt=(ge-We)/Ue,dt=(ge+1+We)/Ue,Xe={features:[]};return this._addTileFeatures(Ie.range((ae-We)/Ue,rt,(ae+1+We)/Ue,dt),Ie.data,ae,ge,Ue,Xe),ae===0&&this._addTileFeatures(Ie.range(1-We/Ue,rt,1,dt),Ie.data,Ue,ge,Ue,Xe),ae===Ue-1&&this._addTileFeatures(Ie.range(0,rt,We/Ue,dt),Ie.data,-1,ge,Ue,Xe),Xe.features.length?Xe:null}getClusterExpansionZoom(se){let ae=this._getOriginZoom(se)-1;for(;ae<=this.options.maxZoom;){const ge=this.getChildren(se);if(ae++,ge.length!==1)break;se=ge[0].properties.cluster_id}return ae}_appendLeaves(se,ae,ge,Ie,Ue){const fe=this.getChildren(ae);for(const qe of fe){const We=qe.properties;if(We&&We.cluster?Ue+We.point_count<=Ie?Ue+=We.point_count:Ue=this._appendLeaves(se,We.cluster_id,ge,Ie,Ue):Ue<Ie?Ue++:se.push(qe),se.length===ge)break}return Ue}_createTree(se){const ae=new M.aF(se.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ge=0;ge<se.length;ge+=this.stride)ae.add(se[ge],se[ge+1]);return ae.finish(),ae.data=se,ae}_addTileFeatures(se,ae,ge,Ie,Ue,fe){for(const qe of se){const We=qe*this.stride,rt=ae[We+tr]>1;let dt,Xe,Lt;if(rt)dt=xt(ae,We,this.clusterProps),Xe=ae[We],Lt=ae[We+1];else{const Mr=this.points[ae[We+zt]];dt=Mr.properties;const[qr,Nr]=Mr.geometry.coordinates;Xe=Pt(qr),Lt=Wt(Nr)}const Xt={type:1,geometry:[[Math.round(this.options.extent*(Xe*Ue-ge)),Math.round(this.options.extent*(Lt*Ue-Ie))]],tags:dt};let cr;cr=rt||this.options.generateId?ae[We+zt]:this.points[ae[We+zt]].id,cr!==void 0&&(Xt.id=cr),fe.features.push(Xt)}}_limitZoom(se){return Math.max(this.options.minZoom,Math.min(Math.floor(+se),this.options.maxZoom+1))}_cluster(se,ae){const{radius:ge,extent:Ie,reduce:Ue,minPoints:fe}=this.options,qe=ge/(Ie*Math.pow(2,ae)),We=se.data,rt=[],dt=this.stride;for(let Xe=0;Xe<We.length;Xe+=dt){if(We[Xe+2]<=ae)continue;We[Xe+2]=ae;const Lt=We[Xe],Xt=We[Xe+1],cr=se.within(We[Xe],We[Xe+1],qe),Mr=We[Xe+tr];let qr=Mr;for(const Nr of cr){const St=Nr*dt;We[St+2]>ae&&(qr+=We[St+tr])}if(qr>Mr&&qr>=fe){let Nr,St=Lt*Mr,wn=Xt*Mr,yn=-1;const Sn=((Xe/dt|0)<<5)+(ae+1)+this.points.length;for(const Fr of cr){const Ot=Fr*dt;if(We[Ot+2]<=ae)continue;We[Ot+2]=ae;const Or=We[Ot+tr];St+=We[Ot]*Or,wn+=We[Ot+1]*Or,We[Ot+4]=Sn,Ue&&(Nr||(Nr=this._map(We,Xe,!0),yn=this.clusterProps.length,this.clusterProps.push(Nr)),Ue(Nr,this._map(We,Ot)))}We[Xe+4]=Sn,rt.push(St/qr,wn/qr,1/0,Sn,-1,qr),Ue&&rt.push(yn)}else{for(let Nr=0;Nr<dt;Nr++)rt.push(We[Xe+Nr]);if(qr>1)for(const Nr of cr){const St=Nr*dt;if(!(We[St+2]<=ae)){We[St+2]=ae;for(let wn=0;wn<dt;wn++)rt.push(We[St+wn])}}}}return rt}_getOriginId(se){return se-this.points.length>>5}_getOriginZoom(se){return(se-this.points.length)%32}_map(se,ae,ge){if(se[ae+tr]>1){const fe=this.clusterProps[se[ae+Cr]];return ge?Object.assign({},fe):fe}const Ie=this.points[se[ae+zt]].properties,Ue=this.options.map(Ie);return ge&&Ue===Ie?Object.assign({},Ue):Ue}}function or(et,se,ae){return{type:"Feature",id:et[se+zt],properties:xt(et,se,ae),geometry:{type:"Point",coordinates:[(ge=et[se],360*(ge-.5)),Oe(et[se+1])]}};var ge}function xt(et,se,ae){const ge=et[se+tr],Ie=ge>=1e4?`${Math.round(ge/1e3)}k`:ge>=1e3?Math.round(ge/100)/10+"k":ge,Ue=et[se+Cr],fe=Ue===-1?{}:Object.assign({},ae[Ue]);return Object.assign(fe,{cluster:!0,cluster_id:et[se+zt],point_count:ge,point_count_abbreviated:Ie})}function Pt(et){return et/360+.5}function Wt(et){const se=Math.sin(et*Math.PI/180),ae=.5-.25*Math.log((1+se)/(1-se))/Math.PI;return ae<0?0:ae>1?1:ae}function Oe(et){const se=(180-360*et)*Math.PI/180;return 360*Math.atan(Math.exp(se))/Math.PI-90}function ct(et,se,ae,ge){let Ie=ge;const Ue=se+(ae-se>>1);let fe,qe=ae-se;const We=et[se],rt=et[se+1],dt=et[ae],Xe=et[ae+1];for(let Lt=se+3;Lt<ae;Lt+=3){const Xt=Ut(et[Lt],et[Lt+1],We,rt,dt,Xe);if(Xt>Ie)fe=Lt,Ie=Xt;else if(Xt===Ie){const cr=Math.abs(Lt-Ue);cr<qe&&(fe=Lt,qe=cr)}}Ie>ge&&(fe-se>3&&ct(et,se,fe,ge),et[fe+2]=Ie,ae-fe>3&&ct(et,fe,ae,ge))}function Ut(et,se,ae,ge,Ie,Ue){let fe=Ie-ae,qe=Ue-ge;if(fe!==0||qe!==0){const We=((et-ae)*fe+(se-ge)*qe)/(fe*fe+qe*qe);We>1?(ae=Ie,ge=Ue):We>0&&(ae+=fe*We,ge+=qe*We)}return fe=et-ae,qe=se-ge,fe*fe+qe*qe}function ur(et,se,ae,ge){const Ie={id:et??null,type:se,geometry:ae,tags:ge,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(se==="Point"||se==="MultiPoint"||se==="LineString")At(Ie,ae);else if(se==="Polygon")At(Ie,ae[0]);else if(se==="MultiLineString")for(const Ue of ae)At(Ie,Ue);else if(se==="MultiPolygon")for(const Ue of ae)At(Ie,Ue[0]);return Ie}function At(et,se){for(let ae=0;ae<se.length;ae+=3)et.minX=Math.min(et.minX,se[ae]),et.minY=Math.min(et.minY,se[ae+1]),et.maxX=Math.max(et.maxX,se[ae]),et.maxY=Math.max(et.maxY,se[ae+1])}function ir(et,se,ae,ge){if(!se.geometry)return;const Ie=se.geometry.coordinates;if(Ie&&Ie.length===0)return;const Ue=se.geometry.type,fe=Math.pow(ae.tolerance/((1<<ae.maxZoom)*ae.extent),2);let qe=[],We=se.id;if(ae.promoteId?We=se.properties[ae.promoteId]:ae.generateId&&(We=ge||0),Ue==="Point")Sr(Ie,qe);else if(Ue==="MultiPoint")for(const rt of Ie)Sr(rt,qe);else if(Ue==="LineString")fr(Ie,qe,fe,!1);else if(Ue==="MultiLineString"){if(ae.lineMetrics){for(const rt of Ie)qe=[],fr(rt,qe,fe,!1),et.push(ur(We,"LineString",qe,se.properties));return}pr(Ie,qe,fe,!1)}else if(Ue==="Polygon")pr(Ie,qe,fe,!0);else{if(Ue!=="MultiPolygon"){if(Ue==="GeometryCollection"){for(const rt of se.geometry.geometries)ir(et,{id:We,geometry:rt,properties:se.properties},ae,ge);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const rt of Ie){const dt=[];pr(rt,dt,fe,!0),qe.push(dt)}}et.push(ur(We,Ue,qe,se.properties))}function Sr(et,se){se.push(Qr(et[0]),Tr(et[1]),0)}function fr(et,se,ae,ge){let Ie,Ue,fe=0;for(let We=0;We<et.length;We++){const rt=Qr(et[We][0]),dt=Tr(et[We][1]);se.push(rt,dt,0),We>0&&(fe+=ge?(Ie*dt-rt*Ue)/2:Math.sqrt(Math.pow(rt-Ie,2)+Math.pow(dt-Ue,2))),Ie=rt,Ue=dt}const qe=se.length-3;se[2]=1,ct(se,0,qe,ae),se[qe+2]=1,se.size=Math.abs(fe),se.start=0,se.end=se.size}function pr(et,se,ae,ge){for(let Ie=0;Ie<et.length;Ie++){const Ue=[];fr(et[Ie],Ue,ae,ge),se.push(Ue)}}function Qr(et){return et/360+.5}function Tr(et){const se=Math.sin(et*Math.PI/180),ae=.5-.25*Math.log((1+se)/(1-se))/Math.PI;return ae<0?0:ae>1?1:ae}function tn(et,se,ae,ge,Ie,Ue,fe,qe){if(ge/=se,Ue>=(ae/=se)&&fe<ge)return et;if(fe<ae||Ue>=ge)return null;const We=[];for(const rt of et){const dt=rt.geometry;let Xe=rt.type;const Lt=Ie===0?rt.minX:rt.minY,Xt=Ie===0?rt.maxX:rt.maxY;if(Lt>=ae&&Xt<ge){We.push(rt);continue}if(Xt<ae||Lt>=ge)continue;let cr=[];if(Xe==="Point"||Xe==="MultiPoint")$r(dt,cr,ae,ge,Ie);else if(Xe==="LineString")br(dt,cr,ae,ge,Ie,!1,qe.lineMetrics);else if(Xe==="MultiLineString")Hr(dt,cr,ae,ge,Ie,!1);else if(Xe==="Polygon")Hr(dt,cr,ae,ge,Ie,!0);else if(Xe==="MultiPolygon")for(const Mr of dt){const qr=[];Hr(Mr,qr,ae,ge,Ie,!0),qr.length&&cr.push(qr)}if(cr.length){if(qe.lineMetrics&&Xe==="LineString"){for(const Mr of cr)We.push(ur(rt.id,Xe,Mr,rt.tags));continue}Xe!=="LineString"&&Xe!=="MultiLineString"||(cr.length===1?(Xe="LineString",cr=cr[0]):Xe="MultiLineString"),Xe!=="Point"&&Xe!=="MultiPoint"||(Xe=cr.length===3?"Point":"MultiPoint"),We.push(ur(rt.id,Xe,cr,rt.tags))}}return We.length?We:null}function $r(et,se,ae,ge,Ie){for(let Ue=0;Ue<et.length;Ue+=3){const fe=et[Ue+Ie];fe>=ae&&fe<=ge&&dn(se,et[Ue],et[Ue+1],et[Ue+2])}}function br(et,se,ae,ge,Ie,Ue,fe){let qe=nn(et);const We=Ie===0?on:bn;let rt,dt,Xe=et.start;for(let qr=0;qr<et.length-3;qr+=3){const Nr=et[qr],St=et[qr+1],wn=et[qr+2],yn=et[qr+3],Sn=et[qr+4],Fr=Ie===0?Nr:St,Ot=Ie===0?yn:Sn;let Or=!1;fe&&(rt=Math.sqrt(Math.pow(Nr-yn,2)+Math.pow(St-Sn,2))),Fr<ae?Ot>ae&&(dt=We(qe,Nr,St,yn,Sn,ae),fe&&(qe.start=Xe+rt*dt)):Fr>ge?Ot<ge&&(dt=We(qe,Nr,St,yn,Sn,ge),fe&&(qe.start=Xe+rt*dt)):dn(qe,Nr,St,wn),Ot<ae&&Fr>=ae&&(dt=We(qe,Nr,St,yn,Sn,ae),Or=!0),Ot>ge&&Fr<=ge&&(dt=We(qe,Nr,St,yn,Sn,ge),Or=!0),!Ue&&Or&&(fe&&(qe.end=Xe+rt*dt),se.push(qe),qe=nn(et)),fe&&(Xe+=rt)}let Lt=et.length-3;const Xt=et[Lt],cr=et[Lt+1],Mr=Ie===0?Xt:cr;Mr>=ae&&Mr<=ge&&dn(qe,Xt,cr,et[Lt+2]),Lt=qe.length-3,Ue&&Lt>=3&&(qe[Lt]!==qe[0]||qe[Lt+1]!==qe[1])&&dn(qe,qe[0],qe[1],qe[2]),qe.length&&se.push(qe)}function nn(et){const se=[];return se.size=et.size,se.start=et.start,se.end=et.end,se}function Hr(et,se,ae,ge,Ie,Ue){for(const fe of et)br(fe,se,ae,ge,Ie,Ue,!1)}function dn(et,se,ae,ge){et.push(se,ae,ge)}function on(et,se,ae,ge,Ie,Ue){const fe=(Ue-se)/(ge-se);return dn(et,Ue,ae+(Ie-ae)*fe,1),fe}function bn(et,se,ae,ge,Ie,Ue){const fe=(Ue-ae)/(Ie-ae);return dn(et,se+(ge-se)*fe,Ue,1),fe}function sn(et,se){const ae=[];for(let ge=0;ge<et.length;ge++){const Ie=et[ge],Ue=Ie.type;let fe;if(Ue==="Point"||Ue==="MultiPoint"||Ue==="LineString")fe=kn(Ie.geometry,se);else if(Ue==="MultiLineString"||Ue==="Polygon"){fe=[];for(const qe of Ie.geometry)fe.push(kn(qe,se))}else if(Ue==="MultiPolygon"){fe=[];for(const qe of Ie.geometry){const We=[];for(const rt of qe)We.push(kn(rt,se));fe.push(We)}}ae.push(ur(Ie.id,Ue,fe,Ie.tags))}return ae}function kn(et,se){const ae=[];ae.size=et.size,et.start!==void 0&&(ae.start=et.start,ae.end=et.end);for(let ge=0;ge<et.length;ge+=3)ae.push(et[ge]+se,et[ge+1],et[ge+2]);return ae}function wr(et,se){if(et.transformed)return et;const ae=1<<et.z,ge=et.x,Ie=et.y;for(const Ue of et.features){const fe=Ue.geometry,qe=Ue.type;if(Ue.geometry=[],qe===1)for(let We=0;We<fe.length;We+=2)Ue.geometry.push(Un(fe[We],fe[We+1],se,ae,ge,Ie));else for(let We=0;We<fe.length;We++){const rt=[];for(let dt=0;dt<fe[We].length;dt+=2)rt.push(Un(fe[We][dt],fe[We][dt+1],se,ae,ge,Ie));Ue.geometry.push(rt)}}return et.transformed=!0,et}function Un(et,se,ae,ge,Ie,Ue){return[Math.round(ae*(et*ge-Ie)),Math.round(ae*(se*ge-Ue))]}function Wn(et,se,ae,ge,Ie){const Ue=se===Ie.maxZoom?0:Ie.tolerance/((1<<se)*Ie.extent),fe={features:[],numPoints:0,numSimplified:0,numFeatures:et.length,source:null,x:ae,y:ge,z:se,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const qe of et)Si(fe,qe,Ue,Ie);return fe}function Si(et,se,ae,ge){const Ie=se.geometry,Ue=se.type,fe=[];if(et.minX=Math.min(et.minX,se.minX),et.minY=Math.min(et.minY,se.minY),et.maxX=Math.max(et.maxX,se.maxX),et.maxY=Math.max(et.maxY,se.maxY),Ue==="Point"||Ue==="MultiPoint")for(let qe=0;qe<Ie.length;qe+=3)fe.push(Ie[qe],Ie[qe+1]),et.numPoints++,et.numSimplified++;else if(Ue==="LineString")Jn(fe,Ie,et,ae,!1,!1);else if(Ue==="MultiLineString"||Ue==="Polygon")for(let qe=0;qe<Ie.length;qe++)Jn(fe,Ie[qe],et,ae,Ue==="Polygon",qe===0);else if(Ue==="MultiPolygon")for(let qe=0;qe<Ie.length;qe++){const We=Ie[qe];for(let rt=0;rt<We.length;rt++)Jn(fe,We[rt],et,ae,!0,rt===0)}if(fe.length){let qe=se.tags||null;if(Ue==="LineString"&&ge.lineMetrics){qe={};for(const rt in se.tags)qe[rt]=se.tags[rt];qe.mapbox_clip_start=Ie.start/Ie.size,qe.mapbox_clip_end=Ie.end/Ie.size}const We={geometry:fe,type:Ue==="Polygon"||Ue==="MultiPolygon"?3:Ue==="LineString"||Ue==="MultiLineString"?2:1,tags:qe};se.id!==null&&(We.id=se.id),et.features.push(We)}}function Jn(et,se,ae,ge,Ie,Ue){const fe=ge*ge;if(ge>0&&se.size<(Ie?fe:ge))return void(ae.numPoints+=se.length/3);const qe=[];for(let We=0;We<se.length;We+=3)(ge===0||se[We+2]>fe)&&(ae.numSimplified++,qe.push(se[We],se[We+1])),ae.numPoints++;Ie&&function(We,rt){let dt=0;for(let Xe=0,Lt=We.length,Xt=Lt-2;Xe<Lt;Xt=Xe,Xe+=2)dt+=(We[Xe]-We[Xt])*(We[Xe+1]+We[Xt+1]);if(dt>0===rt)for(let Xe=0,Lt=We.length;Xe<Lt/2;Xe+=2){const Xt=We[Xe],cr=We[Xe+1];We[Xe]=We[Lt-2-Xe],We[Xe+1]=We[Lt-1-Xe],We[Lt-2-Xe]=Xt,We[Lt-1-Xe]=cr}}(qe,Ue),et.push(qe)}const Hn={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Bn{constructor(se,ae){const ge=(ae=this.options=function(Ue,fe){for(const qe in fe)Ue[qe]=fe[qe];return Ue}(Object.create(Hn),ae)).debug;if(ge&&console.time("preprocess data"),ae.maxZoom<0||ae.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ae.promoteId&&ae.generateId)throw new Error("promoteId and generateId cannot be used together.");let Ie=function(Ue,fe){const qe=[];if(Ue.type==="FeatureCollection")for(let We=0;We<Ue.features.length;We++)ir(qe,Ue.features[We],fe,We);else ir(qe,Ue.type==="Feature"?Ue:{geometry:Ue},fe);return qe}(se,ae);this.tiles={},this.tileCoords=[],ge&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ae.indexMaxZoom,ae.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ie=function(Ue,fe){const qe=fe.buffer/fe.extent;let We=Ue;const rt=tn(Ue,1,-1-qe,qe,0,-1,2,fe),dt=tn(Ue,1,1-qe,2+qe,0,-1,2,fe);return(rt||dt)&&(We=tn(Ue,1,-qe,1+qe,0,-1,2,fe)||[],rt&&(We=sn(rt,1).concat(We)),dt&&(We=We.concat(sn(dt,-1)))),We}(Ie,ae),Ie.length&&this.splitTile(Ie,0,0,0),ge&&(Ie.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(se,ae,ge,Ie,Ue,fe,qe){const We=[se,ae,ge,Ie],rt=this.options,dt=rt.debug;for(;We.length;){Ie=We.pop(),ge=We.pop(),ae=We.pop(),se=We.pop();const Xe=1<<ae,Lt=Ji(ae,ge,Ie);let Xt=this.tiles[Lt];if(!Xt&&(dt>1&&console.time("creation"),Xt=this.tiles[Lt]=Wn(se,ae,ge,Ie,rt),this.tileCoords.push({z:ae,x:ge,y:Ie}),dt)){dt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ae,ge,Ie,Xt.numFeatures,Xt.numPoints,Xt.numSimplified),console.timeEnd("creation"));const Or=`z${ae}`;this.stats[Or]=(this.stats[Or]||0)+1,this.total++}if(Xt.source=se,Ue==null){if(ae===rt.indexMaxZoom||Xt.numPoints<=rt.indexMaxPoints)continue}else{if(ae===rt.maxZoom||ae===Ue)continue;if(Ue!=null){const Or=Ue-ae;if(ge!==fe>>Or||Ie!==qe>>Or)continue}}if(Xt.source=null,se.length===0)continue;dt>1&&console.time("clipping");const cr=.5*rt.buffer/rt.extent,Mr=.5-cr,qr=.5+cr,Nr=1+cr;let St=null,wn=null,yn=null,Sn=null,Fr=tn(se,Xe,ge-cr,ge+qr,0,Xt.minX,Xt.maxX,rt),Ot=tn(se,Xe,ge+Mr,ge+Nr,0,Xt.minX,Xt.maxX,rt);se=null,Fr&&(St=tn(Fr,Xe,Ie-cr,Ie+qr,1,Xt.minY,Xt.maxY,rt),wn=tn(Fr,Xe,Ie+Mr,Ie+Nr,1,Xt.minY,Xt.maxY,rt),Fr=null),Ot&&(yn=tn(Ot,Xe,Ie-cr,Ie+qr,1,Xt.minY,Xt.maxY,rt),Sn=tn(Ot,Xe,Ie+Mr,Ie+Nr,1,Xt.minY,Xt.maxY,rt),Ot=null),dt>1&&console.timeEnd("clipping"),We.push(St||[],ae+1,2*ge,2*Ie),We.push(wn||[],ae+1,2*ge,2*Ie+1),We.push(yn||[],ae+1,2*ge+1,2*Ie),We.push(Sn||[],ae+1,2*ge+1,2*Ie+1)}}getTile(se,ae,ge){se=+se,ae=+ae,ge=+ge;const Ie=this.options,{extent:Ue,debug:fe}=Ie;if(se<0||se>24)return null;const qe=1<<se,We=Ji(se,ae=ae+qe&qe-1,ge);if(this.tiles[We])return wr(this.tiles[We],Ue);fe>1&&console.log("drilling down to z%d-%d-%d",se,ae,ge);let rt,dt=se,Xe=ae,Lt=ge;for(;!rt&&dt>0;)dt--,Xe>>=1,Lt>>=1,rt=this.tiles[Ji(dt,Xe,Lt)];return rt&&rt.source?(fe>1&&(console.log("found parent tile z%d-%d-%d",dt,Xe,Lt),console.time("drilling down")),this.splitTile(rt.source,dt,Xe,Lt,se,ae,ge),fe>1&&console.timeEnd("drilling down"),this.tiles[We]?wr(this.tiles[We],Ue):null):null}}function Ji(et,se,ae){return 32*((1<<et)*ae+se)+et}function Gi(et,se){return se?et.properties[se]:et.id}function Vi(et,se){if(et==null)return!0;if(et.type==="Feature")return Gi(et,se)!=null;if(et.type==="FeatureCollection"){const ae=new Set;for(const ge of et.features){const Ie=Gi(ge,se);if(Ie==null||ae.has(Ie))return!1;ae.add(Ie)}return!0}return!1}function ei(et,se){const ae=new Map;if(et!=null)if(et.type==="Feature")ae.set(Gi(et,se),et);else for(const ge of et.features)ae.set(Gi(ge,se),ge);return ae}class ii extends de{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(se,ae){return M._(this,void 0,void 0,function*(){const ge=se.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Ie=this._geoJSONIndex.getTile(ge.z,ge.x,ge.y);if(!Ie)return null;const Ue=new Tt(Ie.features);let fe=$e(Ue);return fe.byteOffset===0&&fe.byteLength===fe.buffer.byteLength||(fe=new Uint8Array(fe)),{vectorTile:Ue,rawData:fe.buffer}})}loadData(se){return M._(this,void 0,void 0,function*(){var ae;(ae=this._pendingRequest)===null||ae===void 0||ae.abort();const ge=!!(se&&se.request&&se.request.collectResourceTiming)&&new M.cE(se.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(se,this._pendingRequest),this._geoJSONIndex=se.cluster?new xr(function({superclusterOptions:fe,clusterProperties:qe}){if(!qe||!fe)return fe;const We={},rt={},dt={accumulated:null,zoom:0},Xe={properties:null},Lt=Object.keys(qe);for(const Xt of Lt){const[cr,Mr]=qe[Xt],qr=M.cL(Mr),Nr=M.cL(typeof cr=="string"?[cr,["accumulated"],["get",Xt]]:cr);We[Xt]=qr.value,rt[Xt]=Nr.value}return fe.map=Xt=>{Xe.properties=Xt;const cr={};for(const Mr of Lt)cr[Mr]=We[Mr].evaluate(dt,Xe);return cr},fe.reduce=(Xt,cr)=>{Xe.properties=cr;for(const Mr of Lt)dt.accumulated=Xt[Mr],Xt[Mr]=rt[Mr].evaluate(dt,Xe)},fe}(se)).load((yield this._pendingData).features):(Ie=yield this._pendingData,new Bn(Ie,se.geojsonVtOptions)),this.loaded={};const Ue={};if(ge){const fe=ge.finish();fe&&(Ue.resourceTiming={},Ue.resourceTiming[se.source]=JSON.parse(JSON.stringify(fe)))}return Ue}catch(Ue){if(delete this._pendingRequest,M.cp(Ue))return{abandoned:!0};throw Ue}var Ie})}getData(){return M._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(se){const ae=this.loaded;return ae&&ae[se.uid]?super.reloadTile(se):this.loadTile(se)}loadAndProcessGeoJSON(se,ae){return M._(this,void 0,void 0,function*(){let ge=yield this.loadGeoJSON(se,ae);if(delete this._pendingRequest,typeof ge!="object")throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`);if(Ze(ge,!0),se.filter){const Ie=M.cL(se.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ie.result==="error")throw new Error(Ie.value.map(fe=>`${fe.key}: ${fe.message}`).join(", "));ge={type:"FeatureCollection",features:ge.features.filter(fe=>Ie.value.evaluate({zoom:0},fe))}}return ge})}loadGeoJSON(se,ae){return M._(this,void 0,void 0,function*(){const{promoteId:ge}=se;if(se.request){const Ie=yield M.j(se.request,ae);return this._dataUpdateable=Vi(Ie.data,ge)?ei(Ie.data,ge):void 0,Ie.data}if(typeof se.data=="string")try{const Ie=JSON.parse(se.data);return this._dataUpdateable=Vi(Ie,ge)?ei(Ie,ge):void 0,Ie}catch{throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`)}if(!se.dataDiff)throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${se.source}`);return function(Ie,Ue,fe){var qe,We,rt,dt;if(Ue.removeAll&&Ie.clear(),Ue.remove)for(const Xe of Ue.remove)Ie.delete(Xe);if(Ue.add)for(const Xe of Ue.add){const Lt=Gi(Xe,fe);Lt!=null&&Ie.set(Lt,Xe)}if(Ue.update)for(const Xe of Ue.update){let Lt=Ie.get(Xe.id);if(Lt==null)continue;const Xt=!Xe.removeAllProperties&&(((qe=Xe.removeProperties)===null||qe===void 0?void 0:qe.length)>0||((We=Xe.addOrUpdateProperties)===null||We===void 0?void 0:We.length)>0);if((Xe.newGeometry||Xe.removeAllProperties||Xt)&&(Lt=Object.assign({},Lt),Ie.set(Xe.id,Lt),Xt&&(Lt.properties=Object.assign({},Lt.properties))),Xe.newGeometry&&(Lt.geometry=Xe.newGeometry),Xe.removeAllProperties)Lt.properties={};else if(((rt=Xe.removeProperties)===null||rt===void 0?void 0:rt.length)>0)for(const cr of Xe.removeProperties)Object.prototype.hasOwnProperty.call(Lt.properties,cr)&&delete Lt.properties[cr];if(((dt=Xe.addOrUpdateProperties)===null||dt===void 0?void 0:dt.length)>0)for(const{key:cr,value:Mr}of Xe.addOrUpdateProperties)Lt.properties[cr]=Mr}}(this._dataUpdateable,se.dataDiff,ge),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(se){return M._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(se){return this._geoJSONIndex.getClusterExpansionZoom(se.clusterId)}getClusterChildren(se){return this._geoJSONIndex.getChildren(se.clusterId)}getClusterLeaves(se){return this._geoJSONIndex.getLeaves(se.clusterId,se.limit,se.offset)}}class mo{constructor(se){this.self=se,this.actor=new M.H(se),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(ae,ge)=>{if(this.externalWorkerSourceTypes[ae])throw new Error(`Worker source with name "${ae}" already registered.`);this.externalWorkerSourceTypes[ae]=ge},this.self.addProtocol=M.cr,this.self.removeProtocol=M.cs,this.self.registerRTLTextPlugin=ae=>{M.cM.setMethods(ae)},this.actor.registerMessageHandler("LDT",(ae,ge)=>this._getDEMWorkerSource(ae,ge.source).loadTile(ge)),this.actor.registerMessageHandler("RDT",(ae,ge)=>M._(this,void 0,void 0,function*(){this._getDEMWorkerSource(ae,ge.source).removeTile(ge)})),this.actor.registerMessageHandler("GCEZ",(ae,ge)=>M._(this,void 0,void 0,function*(){return this._getWorkerSource(ae,ge.type,ge.source).getClusterExpansionZoom(ge)})),this.actor.registerMessageHandler("GCC",(ae,ge)=>M._(this,void 0,void 0,function*(){return this._getWorkerSource(ae,ge.type,ge.source).getClusterChildren(ge)})),this.actor.registerMessageHandler("GCL",(ae,ge)=>M._(this,void 0,void 0,function*(){return this._getWorkerSource(ae,ge.type,ge.source).getClusterLeaves(ge)})),this.actor.registerMessageHandler("LD",(ae,ge)=>this._getWorkerSource(ae,ge.type,ge.source).loadData(ge)),this.actor.registerMessageHandler("GD",(ae,ge)=>this._getWorkerSource(ae,ge.type,ge.source).getData()),this.actor.registerMessageHandler("LT",(ae,ge)=>this._getWorkerSource(ae,ge.type,ge.source).loadTile(ge)),this.actor.registerMessageHandler("RT",(ae,ge)=>this._getWorkerSource(ae,ge.type,ge.source).reloadTile(ge)),this.actor.registerMessageHandler("AT",(ae,ge)=>this._getWorkerSource(ae,ge.type,ge.source).abortTile(ge)),this.actor.registerMessageHandler("RMT",(ae,ge)=>this._getWorkerSource(ae,ge.type,ge.source).removeTile(ge)),this.actor.registerMessageHandler("RS",(ae,ge)=>M._(this,void 0,void 0,function*(){if(!this.workerSources[ae]||!this.workerSources[ae][ge.type]||!this.workerSources[ae][ge.type][ge.source])return;const Ie=this.workerSources[ae][ge.type][ge.source];delete this.workerSources[ae][ge.type][ge.source],Ie.removeSource!==void 0&&Ie.removeSource(ge)})),this.actor.registerMessageHandler("RM",ae=>M._(this,void 0,void 0,function*(){delete this.layerIndexes[ae],delete this.availableImages[ae],delete this.workerSources[ae],delete this.demWorkerSources[ae]})),this.actor.registerMessageHandler("SR",(ae,ge)=>M._(this,void 0,void 0,function*(){this.referrer=ge})),this.actor.registerMessageHandler("SRPS",(ae,ge)=>this._syncRTLPluginState(ae,ge)),this.actor.registerMessageHandler("IS",(ae,ge)=>M._(this,void 0,void 0,function*(){this.self.importScripts(ge)})),this.actor.registerMessageHandler("SI",(ae,ge)=>this._setImages(ae,ge)),this.actor.registerMessageHandler("UL",(ae,ge)=>M._(this,void 0,void 0,function*(){this._getLayerIndex(ae).update(ge.layers,ge.removedIds)})),this.actor.registerMessageHandler("SL",(ae,ge)=>M._(this,void 0,void 0,function*(){this._getLayerIndex(ae).replace(ge)}))}_setImages(se,ae){return M._(this,void 0,void 0,function*(){this.availableImages[se]=ae;for(const ge in this.workerSources[se]){const Ie=this.workerSources[se][ge];for(const Ue in Ie)Ie[Ue].availableImages=ae}})}_syncRTLPluginState(se,ae){return M._(this,void 0,void 0,function*(){return yield M.cM.syncState(ae,this.self.importScripts)})}_getAvailableImages(se){let ae=this.availableImages[se];return ae||(ae=[]),ae}_getLayerIndex(se){let ae=this.layerIndexes[se];return ae||(ae=this.layerIndexes[se]=new u),ae}_getWorkerSource(se,ae,ge){if(this.workerSources[se]||(this.workerSources[se]={}),this.workerSources[se][ae]||(this.workerSources[se][ae]={}),!this.workerSources[se][ae][ge]){const Ie={sendAsync:(Ue,fe)=>(Ue.targetMapId=se,this.actor.sendAsync(Ue,fe))};switch(ae){case"vector":this.workerSources[se][ae][ge]=new de(Ie,this._getLayerIndex(se),this._getAvailableImages(se));break;case"geojson":this.workerSources[se][ae][ge]=new ii(Ie,this._getLayerIndex(se),this._getAvailableImages(se));break;default:this.workerSources[se][ae][ge]=new this.externalWorkerSourceTypes[ae](Ie,this._getLayerIndex(se),this._getAvailableImages(se))}}return this.workerSources[se][ae][ge]}_getDEMWorkerSource(se,ae){return this.demWorkerSources[se]||(this.demWorkerSources[se]={}),this.demWorkerSources[se][ae]||(this.demWorkerSources[se][ae]=new Te),this.demWorkerSources[se][ae]}}return M.i(self)&&(self.worker=new mo(self)),mo}),P("index",["exports","./shared"],function(M,u){var J="5.5.0";function Y(){var g=new u.A(4);return u.A!=Float32Array&&(g[1]=0,g[2]=0),g[0]=1,g[3]=1,g}let ve,de;const Te={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(g,e,r){const a=requestAnimationFrame(y=>{d(),e(y)}),{unsubscribe:d}=u.s(g.signal,"abort",()=>{d(),cancelAnimationFrame(a),r(u.c())},!1)},frameAsync(g){return new Promise((e,r)=>{this.frame(g,e,r)})},getImageData(g,e=0){return this.getImageCanvasContext(g).getImageData(-e,-e,g.width+2*e,g.height+2*e)},getImageCanvasContext(g){const e=window.document.createElement("canvas"),r=e.getContext("2d",{willReadFrequently:!0});if(!r)throw new Error("failed to create canvas 2d context");return e.width=g.width,e.height=g.height,r.drawImage(g,0,0,g.width,g.height),r},resolveURL:g=>(ve||(ve=document.createElement("a")),ve.href=g,ve.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(de==null&&(de=matchMedia("(prefers-reduced-motion: reduce)")),de.matches)}};class le{static testProp(e){if(!le.docStyle)return e[0];for(let r=0;r<e.length;r++)if(e[r]in le.docStyle)return e[r];return e[0]}static create(e,r,a){const d=window.document.createElement(e);return r!==void 0&&(d.className=r),a&&a.appendChild(d),d}static createNS(e,r){return window.document.createElementNS(e,r)}static disableDrag(){le.docStyle&&le.selectProp&&(le.userSelect=le.docStyle[le.selectProp],le.docStyle[le.selectProp]="none")}static enableDrag(){le.docStyle&&le.selectProp&&(le.docStyle[le.selectProp]=le.userSelect)}static setTransform(e,r){e.style[le.transformProp]=r}static addEventListener(e,r,a,d={}){e.addEventListener(r,a,"passive"in d?d:d.capture)}static removeEventListener(e,r,a,d={}){e.removeEventListener(r,a,"passive"in d?d:d.capture)}static suppressClickInternal(e){e.preventDefault(),e.stopPropagation(),window.removeEventListener("click",le.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",le.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",le.suppressClickInternal,!0)},0)}static getScale(e){const r=e.getBoundingClientRect();return{x:r.width/e.offsetWidth||1,y:r.height/e.offsetHeight||1,boundingClientRect:r}}static getPoint(e,r,a){const d=r.boundingClientRect;return new u.P((a.clientX-d.left)/r.x-e.clientLeft,(a.clientY-d.top)/r.y-e.clientTop)}static mousePos(e,r){const a=le.getScale(e);return le.getPoint(e,a,r)}static touchPos(e,r){const a=[],d=le.getScale(e);for(let y=0;y<r.length;y++)a.push(le.getPoint(e,d,r[y]));return a}static mouseButton(e){return e.button}static remove(e){e.parentNode&&e.parentNode.removeChild(e)}static sanitize(e){const r=new DOMParser().parseFromString(e,"text/html").body||document.createElement("body"),a=r.querySelectorAll("script");for(const d of a)d.remove();return le.clean(r),r.innerHTML}static isPossiblyDangerous(e,r){const a=r.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(e)||!a.includes("javascript:")&&!a.includes("data:"))||!!e.startsWith("on")||void 0}static clean(e){const r=e.children;for(const a of r)le.removeAttributes(a),le.clean(a)}static removeAttributes(e){for(const{name:r,value:a}of e.attributes)le.isPossiblyDangerous(r,a)&&e.removeAttribute(r)}}le.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,le.selectProp=le.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),le.transformProp=le.testProp(["transform","WebkitTransform"]);const we={supported:!1,testSupport:function(g){!mt&&Ze&&(kt?Tt(g):xe=g)}};let xe,Ze,mt=!1,kt=!1;function Tt(g){const e=g.createTexture();g.bindTexture(g.TEXTURE_2D,e);try{if(g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,Ze),g.isContextLost())return;we.supported=!0}catch{}g.deleteTexture(e),mt=!0}var Je;typeof document<"u"&&(Ze=document.createElement("img"),Ze.onload=()=>{xe&&Tt(xe),xe=null,kt=!0},Ze.onerror=()=>{mt=!0,xe=null},Ze.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(g){let e,r,a,d;g.resetRequestQueue=()=>{e=[],r=0,a=0,d={}},g.addThrottleControl=A=>{const D=a++;return d[D]=A,D},g.removeThrottleControl=A=>{delete d[A],w()},g.getImage=(A,D,N=!0)=>new Promise((G,Z)=>{we.supported&&(A.headers||(A.headers={}),A.headers.accept="image/webp,*/*"),u.e(A,{type:"image"}),e.push({abortController:D,requestParameters:A,supportImageRefresh:N,state:"queued",onError:X=>{Z(X)},onSuccess:X=>{G(X)}}),w()});const y=A=>u._(this,void 0,void 0,function*(){A.state="running";const{requestParameters:D,supportImageRefresh:N,onError:G,onSuccess:Z,abortController:X}=A,ne=N===!1&&!u.i(self)&&!u.g(D.url)&&(!D.headers||Object.keys(D.headers).reduce((Se,ke)=>Se&&ke==="accept",!0));r++;const be=ne?E(D,X):u.m(D,X);try{const Se=yield be;delete A.abortController,A.state="completed",Se.data instanceof HTMLImageElement||u.b(Se.data)?Z(Se):Se.data&&Z({data:yield(_e=Se.data,typeof createImageBitmap=="function"?u.f(_e):u.h(_e)),cacheControl:Se.cacheControl,expires:Se.expires})}catch(Se){delete A.abortController,G(Se)}finally{r--,w()}var _e}),w=()=>{const A=(()=>{for(const D of Object.keys(d))if(d[D]())return!0;return!1})()?u.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:u.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let D=r;D<A&&e.length>0;D++){const N=e.shift();N.abortController.signal.aborted?D--:y(N)}},E=(A,D)=>new Promise((N,G)=>{const Z=new Image,X=A.url,ne=A.credentials;ne&&ne==="include"?Z.crossOrigin="use-credentials":(ne&&ne==="same-origin"||!u.d(X))&&(Z.crossOrigin="anonymous"),D.signal.addEventListener("abort",()=>{Z.src="",G(u.c())}),Z.fetchPriority="high",Z.onload=()=>{Z.onerror=Z.onload=null,N({data:Z})},Z.onerror=()=>{Z.onerror=Z.onload=null,D.signal.aborted||G(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},Z.src=X})}(Je||(Je={})),Je.resetRequestQueue();class Qe{constructor(e){this._transformRequestFn=e}transformRequest(e,r){return this._transformRequestFn&&this._transformRequestFn(e,r)||{url:e}}setTransformRequest(e){this._transformRequestFn=e}}function nt(g){const e=[];if(typeof g=="string")e.push({id:"default",url:g});else if(g&&g.length>0){const r=[];for(const{id:a,url:d}of g){const y=`${a}${d}`;r.indexOf(y)===-1&&(r.push(y),e.push({id:a,url:d}))}}return e}function yt(g,e,r){try{const a=new URL(g);return a.pathname+=`${e}${r}`,a.toString()}catch{throw new Error(`Invalid sprite URL "${g}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}class ze{constructor(e,r,a,d){this.context=e,this.format=a,this.texture=e.gl.createTexture(),this.update(r,d)}update(e,r,a){const{width:d,height:y}=e,w=!(this.size&&this.size[0]===d&&this.size[1]===y||a),{context:E}=this,{gl:A}=E;if(this.useMipmap=!!(r&&r.useMipmap),A.bindTexture(A.TEXTURE_2D,this.texture),E.pixelStoreUnpackFlipY.set(!1),E.pixelStoreUnpack.set(1),E.pixelStoreUnpackPremultiplyAlpha.set(this.format===A.RGBA&&(!r||r.premultiply!==!1)),w)this.size=[d,y],e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||u.b(e)?A.texImage2D(A.TEXTURE_2D,0,this.format,this.format,A.UNSIGNED_BYTE,e):A.texImage2D(A.TEXTURE_2D,0,this.format,d,y,0,this.format,A.UNSIGNED_BYTE,e.data);else{const{x:D,y:N}=a||{x:0,y:0};e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||u.b(e)?A.texSubImage2D(A.TEXTURE_2D,0,D,N,A.RGBA,A.UNSIGNED_BYTE,e):A.texSubImage2D(A.TEXTURE_2D,0,D,N,d,y,A.RGBA,A.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&A.generateMipmap(A.TEXTURE_2D),E.pixelStoreUnpackFlipY.setDefault(),E.pixelStoreUnpack.setDefault(),E.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(e,r,a){const{context:d}=this,{gl:y}=d;y.bindTexture(y.TEXTURE_2D,this.texture),a!==y.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(a=y.LINEAR),e!==this.filter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,e),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,a||e),this.filter=e),r!==this.wrap&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,r),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,r),this.wrap=r)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}function $e(g){const{userImage:e}=g;return!!(e&&e.render&&e.render())&&(g.data.replace(new Uint8Array(e.data.buffer)),!0)}class re extends u.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new u.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(e){if(this.loaded!==e&&(this.loaded=e,e)){for(const{ids:r,promiseResolve:a}of this.requestors)a(this._getImagesForIds(r));this.requestors=[]}}getImage(e){const r=this.images[e];if(r&&!r.data&&r.spriteData){const a=r.spriteData;r.data=new u.R({width:a.width,height:a.height},a.context.getImageData(a.x,a.y,a.width,a.height).data),r.spriteData=null}return r}addImage(e,r){if(this.images[e])throw new Error(`Image id ${e} already exist, use updateImage instead`);this._validate(e,r)&&(this.images[e]=r)}_validate(e,r){let a=!0;const d=r.data||r.spriteData;return this._validateStretch(r.stretchX,d&&d.width)||(this.fire(new u.k(new Error(`Image "${e}" has invalid "stretchX" value`))),a=!1),this._validateStretch(r.stretchY,d&&d.height)||(this.fire(new u.k(new Error(`Image "${e}" has invalid "stretchY" value`))),a=!1),this._validateContent(r.content,r)||(this.fire(new u.k(new Error(`Image "${e}" has invalid "content" value`))),a=!1),a}_validateStretch(e,r){if(!e)return!0;let a=0;for(const d of e){if(d[0]<a||d[1]<d[0]||r<d[1])return!1;a=d[1]}return!0}_validateContent(e,r){if(!e)return!0;if(e.length!==4)return!1;const a=r.spriteData,d=a&&a.width||r.data.width,y=a&&a.height||r.data.height;return!(e[0]<0||d<e[0]||e[1]<0||y<e[1]||e[2]<0||d<e[2]||e[3]<0||y<e[3]||e[2]<e[0]||e[3]<e[1])}updateImage(e,r,a=!0){const d=this.getImage(e);if(a&&(d.data.width!==r.data.width||d.data.height!==r.data.height))throw new Error(`size mismatch between old image (${d.data.width}x${d.data.height}) and new image (${r.data.width}x${r.data.height}).`);r.version=d.version+1,this.images[e]=r,this.updatedImages[e]=!0}removeImage(e){const r=this.images[e];delete this.images[e],delete this.patterns[e],r.userImage&&r.userImage.onRemove&&r.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(e){return new Promise((r,a)=>{let d=!0;if(!this.isLoaded())for(const y of e)this.images[y]||(d=!1);this.isLoaded()||d?r(this._getImagesForIds(e)):this.requestors.push({ids:e,promiseResolve:r})})}_getImagesForIds(e){const r={};for(const a of e){let d=this.getImage(a);d||(this.fire(new u.l("styleimagemissing",{id:a})),d=this.getImage(a)),d?r[a]={data:d.data.clone(),pixelRatio:d.pixelRatio,sdf:d.sdf,version:d.version,stretchX:d.stretchX,stretchY:d.stretchY,content:d.content,textFitWidth:d.textFitWidth,textFitHeight:d.textFitHeight,hasRenderCallback:!!(d.userImage&&d.userImage.render)}:u.w(`Image "${a}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return r}getPixelSize(){const{width:e,height:r}=this.atlasImage;return{width:e,height:r}}getPattern(e){const r=this.patterns[e],a=this.getImage(e);if(!a)return null;if(r&&r.position.version===a.version)return r.position;if(r)r.position.version=a.version;else{const d={w:a.data.width+2,h:a.data.height+2,x:0,y:0},y=new u.I(d,a);this.patterns[e]={bin:d,position:y}}return this._updatePatternAtlas(),this.patterns[e].position}bind(e){const r=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new ze(e,this.atlasImage,r.RGBA),this.atlasTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}_updatePatternAtlas(){const e=[];for(const y in this.patterns)e.push(this.patterns[y].bin);const{w:r,h:a}=u.p(e),d=this.atlasImage;d.resize({width:r||1,height:a||1});for(const y in this.patterns){const{bin:w}=this.patterns[y],E=w.x+1,A=w.y+1,D=this.getImage(y).data,N=D.width,G=D.height;u.R.copy(D,d,{x:0,y:0},{x:E,y:A},{width:N,height:G}),u.R.copy(D,d,{x:0,y:G-1},{x:E,y:A-1},{width:N,height:1}),u.R.copy(D,d,{x:0,y:0},{x:E,y:A+G},{width:N,height:1}),u.R.copy(D,d,{x:N-1,y:0},{x:E-1,y:A},{width:1,height:G}),u.R.copy(D,d,{x:0,y:0},{x:E+N,y:A},{width:1,height:G})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(e){for(const r of e){if(this.callbackDispatchedThisFrame[r])continue;this.callbackDispatchedThisFrame[r]=!0;const a=this.getImage(r);a||u.w(`Image with ID: "${r}" was not found`),$e(a)&&this.updateImage(r,a)}}}const it=1e20;function st(g,e,r,a,d,y,w,E,A){for(let D=e;D<e+a;D++)zt(g,r*y+D,y,d,w,E,A);for(let D=r;D<r+d;D++)zt(g,D*y+e,1,a,w,E,A)}function zt(g,e,r,a,d,y,w){y[0]=0,w[0]=-1e20,w[1]=it,d[0]=g[e];for(let E=1,A=0,D=0;E<a;E++){d[E]=g[e+E*r];const N=E*E;do{const G=y[A];D=(d[E]-d[G]+N-G*G)/(E-G)/2}while(D<=w[A]&&--A>-1);A++,y[A]=E,w[A]=D,w[A+1]=it}for(let E=0,A=0;E<a;E++){for(;w[A+1]<E;)A++;const D=y[A],N=E-D;g[e+E*r]=d[D]+N*N}}class tr{constructor(e,r){this.requestManager=e,this.localIdeographFontFamily=r,this.entries={}}setURL(e){this.url=e}getGlyphs(e){return u._(this,void 0,void 0,function*(){const r=[];for(const y in e)for(const w of e[y])r.push(this._getAndCacheGlyphsPromise(y,w));const a=yield Promise.all(r),d={};for(const{stack:y,id:w,glyph:E}of a)d[y]||(d[y]={}),d[y][w]=E&&{id:E.id,bitmap:E.bitmap.clone(),metrics:E.metrics};return d})}_getAndCacheGlyphsPromise(e,r){return u._(this,void 0,void 0,function*(){let a=this.entries[e];a||(a=this.entries[e]={glyphs:{},requests:{},ranges:{}});let d=a.glyphs[r];if(d!==void 0)return{stack:e,id:r,glyph:d};if(d=this._tinySDF(a,e,r),d)return a.glyphs[r]=d,{stack:e,id:r,glyph:d};const y=Math.floor(r/256);if(256*y>65535)throw new Error("glyphs > 65535 not supported");if(a.ranges[y])return{stack:e,id:r,glyph:d};if(!this.url)throw new Error("glyphsUrl is not set");if(!a.requests[y]){const E=tr.loadGlyphRange(e,y,this.url,this.requestManager);a.requests[y]=E}const w=yield a.requests[y];for(const E in w)this._doesCharSupportLocalGlyph(+E)||(a.glyphs[+E]=w[+E]);return a.ranges[y]=!0,{stack:e,id:r,glyph:w[r]||null}})}_doesCharSupportLocalGlyph(e){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(e))||u.u["CJK Unified Ideographs"](e)||u.u["Hangul Syllables"](e)||u.u.Hiragana(e)||u.u.Katakana(e)||u.u["CJK Symbols and Punctuation"](e)||u.u["Halfwidth and Fullwidth Forms"](e))}_tinySDF(e,r,a){const d=this.localIdeographFontFamily;if(!d||!this._doesCharSupportLocalGlyph(a))return;let y=e.tinySDF;if(!y){let E="400";/bold/i.test(r)?E="900":/medium/i.test(r)?E="500":/light/i.test(r)&&(E="200"),y=e.tinySDF=new tr.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:d,fontWeight:E})}const w=y.draw(String.fromCharCode(a));return{id:a,bitmap:new u.q({width:w.width||60,height:w.height||60},w.data),metrics:{width:w.glyphWidth/2||24,height:w.glyphHeight/2||24,left:w.glyphLeft/2+.5||0,top:w.glyphTop/2-27.5||-8,advance:w.glyphAdvance/2||24,isDoubleResolution:!0}}}}tr.loadGlyphRange=function(g,e,r,a){return u._(this,void 0,void 0,function*(){const d=256*e,y=d+255,w=a.transformRequest(r.replace("{fontstack}",g).replace("{range}",`${d}-${y}`),"Glyphs"),E=yield u.n(w,new AbortController);if(!E||!E.data)throw new Error(`Could not load glyph range. range: ${e}, ${d}-${y}`);const A={};for(const D of u.o(E.data))A[D.id]=D;return A})},tr.TinySDF=class{constructor({fontSize:g=24,buffer:e=3,radius:r=8,cutoff:a=.25,fontFamily:d="sans-serif",fontWeight:y="normal",fontStyle:w="normal"}={}){this.buffer=e,this.cutoff=a,this.radius=r;const E=this.size=g+4*e,A=this._createCanvas(E),D=this.ctx=A.getContext("2d",{willReadFrequently:!0});D.font=`${w} ${y} ${g}px ${d}`,D.textBaseline="alphabetic",D.textAlign="left",D.fillStyle="black",this.gridOuter=new Float64Array(E*E),this.gridInner=new Float64Array(E*E),this.f=new Float64Array(E),this.z=new Float64Array(E+1),this.v=new Uint16Array(E)}_createCanvas(g){const e=document.createElement("canvas");return e.width=e.height=g,e}draw(g){const{width:e,actualBoundingBoxAscent:r,actualBoundingBoxDescent:a,actualBoundingBoxLeft:d,actualBoundingBoxRight:y}=this.ctx.measureText(g),w=Math.ceil(r),E=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(y-d))),A=Math.min(this.size-this.buffer,w+Math.ceil(a)),D=E+2*this.buffer,N=A+2*this.buffer,G=Math.max(D*N,0),Z=new Uint8ClampedArray(G),X={data:Z,width:D,height:N,glyphWidth:E,glyphHeight:A,glyphTop:w,glyphLeft:0,glyphAdvance:e};if(E===0||A===0)return X;const{ctx:ne,buffer:be,gridInner:_e,gridOuter:Se}=this;ne.clearRect(be,be,E,A),ne.fillText(g,be,be+w);const ke=ne.getImageData(be,be,E,A);Se.fill(it,0,G),_e.fill(0,0,G);for(let Le=0;Le<A;Le++)for(let Me=0;Me<E;Me++){const De=ke.data[4*(Le*E+Me)+3]/255;if(De===0)continue;const Ne=(Le+be)*D+Me+be;if(De===1)Se[Ne]=0,_e[Ne]=it;else{const je=.5-De;Se[Ne]=je>0?je*je:0,_e[Ne]=je<0?je*je:0}}st(Se,0,0,D,N,D,this.f,this.v,this.z),st(_e,be,be,E,A,D,this.f,this.v,this.z);for(let Le=0;Le<G;Le++){const Me=Math.sqrt(Se[Le])-Math.sqrt(_e[Le]);Z[Le]=Math.round(255-255*(Me/this.radius+this.cutoff))}return X}};class Cr{constructor(){this.specification=u.v.light.position}possiblyEvaluate(e,r){return u.z(e.expression.evaluate(r))}interpolate(e,r,a){return{x:u.B.number(e.x,r.x,a),y:u.B.number(e.y,r.y,a),z:u.B.number(e.z,r.z,a)}}}let xr;class or extends u.E{constructor(e){super(),xr=xr||new u.r({anchor:new u.D(u.v.light.anchor),position:new Cr,color:new u.D(u.v.light.color),intensity:new u.D(u.v.light.intensity)}),this._transitionable=new u.T(xr),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(e,r={}){if(!this._validate(u.t,e,r))for(const a in e){const d=e[a];a.endsWith("-transition")?this._transitionable.setTransition(a.slice(0,-11),d):this._transitionable.setValue(a,d)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,r,a){return(!a||a.validate!==!1)&&u.x(this,e.call(u.y,{value:r,style:{glyphs:!0,sprite:!0},styleSpec:u.v}))}}const xt=new u.r({"sky-color":new u.D(u.v.sky["sky-color"]),"horizon-color":new u.D(u.v.sky["horizon-color"]),"fog-color":new u.D(u.v.sky["fog-color"]),"fog-ground-blend":new u.D(u.v.sky["fog-ground-blend"]),"horizon-fog-blend":new u.D(u.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new u.D(u.v.sky["sky-horizon-blend"]),"atmosphere-blend":new u.D(u.v.sky["atmosphere-blend"])});class Pt extends u.E{constructor(e){super(),this._transitionable=new u.T(xt),this.setSky(e),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new u.C(0))}setSky(e,r={}){if(!this._validate(u.F,e,r)){e||(e={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const a in e){const d=e[a];a.endsWith("-transition")?this._transitionable.setTransition(a.slice(0,-11),d):this._transitionable.setValue(a,d)}}}getSky(){return this._transitionable.serialize()}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,r,a={}){return(a==null?void 0:a.validate)!==!1&&u.x(this,e.call(u.y,u.e({value:r,style:{glyphs:!0,sprite:!0},styleSpec:u.v})))}calculateFogBlendOpacity(e){return e<60?0:e<70?(e-60)/10:1}}class Wt{constructor(e,r){this.width=e,this.height=r,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(e,r){const a=e.join(",")+String(r);return this.dashEntry[a]||(this.dashEntry[a]=this.addDash(e,r)),this.dashEntry[a]}getDashRanges(e,r,a){const d=[];let y=e.length%2==1?-e[e.length-1]*a:0,w=e[0]*a,E=!0;d.push({left:y,right:w,isDash:E,zeroLength:e[0]===0});let A=e[0];for(let D=1;D<e.length;D++){E=!E;const N=e[D];y=A*a,A+=N,w=A*a,d.push({left:y,right:w,isDash:E,zeroLength:N===0})}return d}addRoundDash(e,r,a){const d=r/2;for(let y=-a;y<=a;y++){const w=this.width*(this.nextRow+a+y);let E=0,A=e[E];for(let D=0;D<this.width;D++){D/A.right>1&&(A=e[++E]);const N=Math.abs(D-A.left),G=Math.abs(D-A.right),Z=Math.min(N,G);let X;const ne=y/a*(d+1);if(A.isDash){const be=d-Math.abs(ne);X=Math.sqrt(Z*Z+be*be)}else X=d-Math.sqrt(Z*Z+ne*ne);this.data[w+D]=Math.max(0,Math.min(255,X+128))}}}addRegularDash(e){for(let E=e.length-1;E>=0;--E){const A=e[E],D=e[E+1];A.zeroLength?e.splice(E,1):D&&D.isDash===A.isDash&&(D.left=A.left,e.splice(E,1))}const r=e[0],a=e[e.length-1];r.isDash===a.isDash&&(r.left=a.left-this.width,a.right=r.right+this.width);const d=this.width*this.nextRow;let y=0,w=e[y];for(let E=0;E<this.width;E++){E/w.right>1&&(w=e[++y]);const A=Math.abs(E-w.left),D=Math.abs(E-w.right),N=Math.min(A,D);this.data[d+E]=Math.max(0,Math.min(255,(w.isDash?N:-N)+128))}}addDash(e,r){const a=r?7:0,d=2*a+1;if(this.nextRow+d>this.height)return u.w("LineAtlas out of space"),null;let y=0;for(let E=0;E<e.length;E++)y+=e[E];if(y!==0){const E=this.width/y,A=this.getDashRanges(e,this.width,E);r?this.addRoundDash(A,E,a):this.addRegularDash(A)}const w={y:(this.nextRow+a+.5)/this.height,height:2*a/this.height,width:y};return this.nextRow+=d,this.dirty=!0,w}bind(e){const r=e.gl;this.texture?(r.bindTexture(r.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,r.texSubImage2D(r.TEXTURE_2D,0,0,0,this.width,this.height,r.ALPHA,r.UNSIGNED_BYTE,this.data))):(this.texture=r.createTexture(),r.bindTexture(r.TEXTURE_2D,this.texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.REPEAT),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.REPEAT),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texImage2D(r.TEXTURE_2D,0,r.ALPHA,this.width,this.height,0,r.ALPHA,r.UNSIGNED_BYTE,this.data))}}const Oe="maplibre_preloaded_worker_pool";class ct{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<ct.workerCount;)this.workers.push(new Worker(u.a.WORKER_URL));return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],this.numActive()===0&&(this.workers.forEach(r=>{r.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Oe]}numActive(){return Object.keys(this.active).length}}const Ut=Math.floor(Te.hardwareConcurrency/2);let ur,At;function ir(){return ur||(ur=new ct),ur}ct.workerCount=u.G(globalThis)?Math.max(Math.min(Ut,3),1):1;class Sr{constructor(e,r){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=r;const a=this.workerPool.acquire(r);for(let d=0;d<a.length;d++){const y=new u.H(a[d],r);y.name=`Worker ${d}`,this.actors.push(y)}if(!this.actors.length)throw new Error("No actors found")}broadcast(e,r){const a=[];for(const d of this.actors)a.push(d.sendAsync({type:e,data:r}));return Promise.all(a)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(e=!0){this.actors.forEach(r=>{r.remove()}),this.actors=[],e&&this.workerPool.release(this.id)}registerMessageHandler(e,r){for(const a of this.actors)a.registerMessageHandler(e,r)}}function fr(){return At||(At=new Sr(ir(),u.J),At.registerMessageHandler("GR",(g,e,r)=>u.m(e,r))),At}function pr(g,e){const r=u.K();return u.L(r,r,[1,1,0]),u.M(r,r,[.5*g.width,.5*g.height,1]),g.calculatePosMatrix?u.N(r,r,g.calculatePosMatrix(e.toUnwrapped())):r}function Qr(g,e,r,a,d,y,w){var E;const A=function(Z,X,ne){if(Z)for(const be of Z){const _e=X[be];if(_e&&_e.source===ne&&_e.type==="fill-extrusion")return!0}else for(const be in X){const _e=X[be];if(_e.source===ne&&_e.type==="fill-extrusion")return!0}return!1}((E=d==null?void 0:d.layers)!==null&&E!==void 0?E:null,e,g.id),D=y.maxPitchScaleFactor(),N=g.tilesIn(a,D,A);N.sort(Tr);const G=[];for(const Z of N)G.push({wrappedTileID:Z.tileID.wrapped().key,queryResults:Z.tile.queryRenderedFeatures(e,r,g._state,Z.queryGeometry,Z.cameraQueryGeometry,Z.scale,d,y,D,pr(g.transform,Z.tileID),w?(X,ne)=>w(Z.tileID,X,ne):void 0)});return function(Z,X){for(const ne in Z)for(const be of Z[ne])tn(be,X);return Z}(function(Z){const X={},ne={};for(const be of Z){const _e=be.queryResults,Se=be.wrappedTileID,ke=ne[Se]=ne[Se]||{};for(const Le in _e){const Me=_e[Le],De=ke[Le]=ke[Le]||{},Ne=X[Le]=X[Le]||[];for(const je of Me)De[je.featureIndex]||(De[je.featureIndex]=!0,Ne.push(je))}}return X}(G),g)}function Tr(g,e){const r=g.tileID,a=e.tileID;return r.overscaledZ-a.overscaledZ||r.canonical.y-a.canonical.y||r.wrap-a.wrap||r.canonical.x-a.canonical.x}function tn(g,e){const r=g.feature,a=e.getFeatureState(r.layer["source-layer"],r.id);r.source=r.layer.source,r.layer["source-layer"]&&(r.sourceLayer=r.layer["source-layer"]),r.state=a}function $r(g,e,r){return u._(this,void 0,void 0,function*(){let a=g;if(g.url?a=(yield u.j(e.transformRequest(g.url,"Source"),r)).data:yield Te.frameAsync(r),!a)return null;const d=u.O(u.e(a,g),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in a&&a.vector_layers&&(d.vectorLayerIds=a.vector_layers.map(y=>y.id)),d})}class br{constructor(e,r){e&&(r?this.setSouthWest(e).setNorthEast(r):Array.isArray(e)&&(e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1])))}setNorthEast(e){return this._ne=e instanceof u.Q?new u.Q(e.lng,e.lat):u.Q.convert(e),this}setSouthWest(e){return this._sw=e instanceof u.Q?new u.Q(e.lng,e.lat):u.Q.convert(e),this}extend(e){const r=this._sw,a=this._ne;let d,y;if(e instanceof u.Q)d=e,y=e;else{if(!(e instanceof br))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(br.convert(e)):this.extend(u.Q.convert(e)):e&&("lng"in e||"lon"in e)&&"lat"in e?this.extend(u.Q.convert(e)):this;if(d=e._sw,y=e._ne,!d||!y)return this}return r||a?(r.lng=Math.min(d.lng,r.lng),r.lat=Math.min(d.lat,r.lat),a.lng=Math.max(y.lng,a.lng),a.lat=Math.max(y.lat,a.lat)):(this._sw=new u.Q(d.lng,d.lat),this._ne=new u.Q(y.lng,y.lat)),this}getCenter(){return new u.Q((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new u.Q(this.getWest(),this.getNorth())}getSouthEast(){return new u.Q(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:r,lat:a}=u.Q.convert(e);let d=this._sw.lng<=r&&r<=this._ne.lng;return this._sw.lng>this._ne.lng&&(d=this._sw.lng>=r&&r>=this._ne.lng),this._sw.lat<=a&&a<=this._ne.lat&&d}static convert(e){return e instanceof br?e:e&&new br(e)}static fromLngLat(e,r=0){const a=360*r/40075017,d=a/Math.cos(Math.PI/180*e.lat);return new br(new u.Q(e.lng-d,e.lat-a),new u.Q(e.lng+d,e.lat+a))}adjustAntiMeridian(){const e=new u.Q(this._sw.lng,this._sw.lat),r=new u.Q(this._ne.lng,this._ne.lat);return new br(e,e.lng>r.lng?new u.Q(r.lng+360,r.lat):r)}}class nn{constructor(e,r,a){this.bounds=br.convert(this.validateBounds(e)),this.minzoom=r||0,this.maxzoom=a||24}validateBounds(e){return Array.isArray(e)&&e.length===4?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(e){const r=Math.pow(2,e.z),a=Math.floor(u.U(this.bounds.getWest())*r),d=Math.floor(u.S(this.bounds.getNorth())*r),y=Math.ceil(u.U(this.bounds.getEast())*r),w=Math.ceil(u.S(this.bounds.getSouth())*r);return e.x>=a&&e.x<y&&e.y>=d&&e.y<w}}class Hr extends u.E{constructor(e,r,a,d){if(super(),this.id=e,this.dispatcher=a,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,u.e(this,u.O(r,["url","scheme","tileSize","promoteId"])),this._options=u.e({type:"vector"},r),this._collectResourceTiming=r.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(d)}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const e=yield $r(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),e&&(u.e(this,e),e.bounds&&(this.tileBounds=new nn(e.bounds,this.minzoom,this.maxzoom)),this.fire(new u.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.l("data",{dataType:"source",sourceDataType:"content"})))}catch(e){this._tileJSONRequest=null,this.fire(new u.k(e))}})}loaded(){return this._loaded}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load()}setSourceProperty(e){this._tileJSONRequest&&this._tileJSONRequest.abort(),e(),this.load()}setTiles(e){return this.setSourceProperty(()=>{this._options.tiles=e}),this}setUrl(e){return this.setSourceProperty(()=>{this.url=e,this._options.url=e}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return u.e({},this._options)}loadTile(e){return u._(this,void 0,void 0,function*(){const r=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),a={request:this.map._requestManager.transformRequest(r,"Tile"),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};a.request.collectResourceTiming=this._collectResourceTiming;let d="RT";if(e.actor&&e.state!=="expired"){if(e.state==="loading")return new Promise((y,w)=>{e.reloadPromise={resolve:y,reject:w}})}else e.actor=this.dispatcher.getActor(),d="LT";e.abortController=new AbortController;try{const y=yield e.actor.sendAsync({type:d,data:a},e.abortController);if(delete e.abortController,e.aborted)return;this._afterTileLoadWorkerResponse(e,y)}catch(y){if(delete e.abortController,e.aborted)return;if(y&&y.status!==404)throw y;this._afterTileLoadWorkerResponse(e,null)}})}_afterTileLoadWorkerResponse(e,r){if(r&&r.resourceTiming&&(e.resourceTiming=r.resourceTiming),r&&this.map._refreshExpiredTiles&&e.setExpiryData(r),e.loadVectorData(r,this.map.painter),e.reloadPromise){const a=e.reloadPromise;e.reloadPromise=null,this.loadTile(e).then(a.resolve).catch(a.reject)}}abortTile(e){return u._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.actor&&(yield e.actor.sendAsync({type:"AT",data:{uid:e.uid,type:this.type,source:this.id}}))})}unloadTile(e){return u._(this,void 0,void 0,function*(){e.unloadVectorData(),e.actor&&(yield e.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class dn extends u.E{constructor(e,r,a,d){super(),this.id=e,this.dispatcher=a,this.setEventedParent(d),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=u.e({type:"raster"},r),u.e(this,u.O(r,["url","scheme","tileSize"]))}load(){return u._(this,arguments,void 0,function*(e=!1){this._loaded=!1,this.fire(new u.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield $r(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,r&&(u.e(this,r),r.bounds&&(this.tileBounds=new nn(r.bounds,this.minzoom,this.maxzoom)),this.fire(new u.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:e})))}catch(r){this._tileJSONRequest=null,this.fire(new u.k(r))}})}loaded(){return this._loaded}onAdd(e){this.map=e,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(e){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),e(),this.load(!0)}setTiles(e){return this.setSourceProperty(()=>{this._options.tiles=e}),this}setUrl(e){return this.setSourceProperty(()=>{this.url=e,this._options.url=e}),this}serialize(){return u.e({},this._options)}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(e){return u._(this,void 0,void 0,function*(){const r=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);e.abortController=new AbortController;try{const a=yield Je.getImage(this.map._requestManager.transformRequest(r,"Tile"),e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(a&&a.data){this.map._refreshExpiredTiles&&(a.cacheControl||a.expires)&&e.setExpiryData({cacheControl:a.cacheControl,expires:a.expires});const d=this.map.painter.context,y=d.gl,w=a.data;e.texture=this.map.painter.getTileTexture(w.width),e.texture?e.texture.update(w,{useMipmap:!0}):(e.texture=new ze(d,w,y.RGBA,{useMipmap:!0}),e.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE,y.LINEAR_MIPMAP_NEAREST)),e.state="loaded"}}catch(a){if(delete e.abortController,e.aborted)e.state="unloaded";else if(a)throw e.state="errored",a}})}abortTile(e){return u._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController)})}unloadTile(e){return u._(this,void 0,void 0,function*(){e.texture&&this.map.painter.saveTileTexture(e.texture)})}hasTransition(){return!1}}class on extends dn{constructor(e,r,a,d){super(e,r,a,d),this.type="raster-dem",this.maxzoom=22,this._options=u.e({type:"raster-dem"},r),this.encoding=r.encoding||"mapbox",this.redFactor=r.redFactor,this.greenFactor=r.greenFactor,this.blueFactor=r.blueFactor,this.baseShift=r.baseShift}loadTile(e){return u._(this,void 0,void 0,function*(){const r=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),a=this.map._requestManager.transformRequest(r,"Tile");e.neighboringTiles=this._getNeighboringTiles(e.tileID),e.abortController=new AbortController;try{const d=yield Je.getImage(a,e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(d&&d.data){const y=d.data;this.map._refreshExpiredTiles&&(d.cacheControl||d.expires)&&e.setExpiryData({cacheControl:d.cacheControl,expires:d.expires});const w=u.b(y)&&u.V()?y:yield this.readImageNow(y),E={type:this.type,uid:e.uid,source:this.id,rawImageData:w,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!e.actor||e.state==="expired"){e.actor=this.dispatcher.getActor();const A=yield e.actor.sendAsync({type:"LDT",data:E});e.dem=A,e.needsHillshadePrepare=!0,e.needsTerrainPrepare=!0,e.state="loaded"}}}catch(d){if(delete e.abortController,e.aborted)e.state="unloaded";else if(d)throw e.state="errored",d}})}readImageNow(e){return u._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&u.W()){const r=e.width+2,a=e.height+2;try{return new u.R({width:r,height:a},yield u.X(e,-1,-1,r,a))}catch{}}return Te.getImageData(e,1)})}_getNeighboringTiles(e){const r=e.canonical,a=Math.pow(2,r.z),d=(r.x-1+a)%a,y=r.x===0?e.wrap-1:e.wrap,w=(r.x+1+a)%a,E=r.x+1===a?e.wrap+1:e.wrap,A={};return A[new u.Y(e.overscaledZ,y,r.z,d,r.y).key]={backfilled:!1},A[new u.Y(e.overscaledZ,E,r.z,w,r.y).key]={backfilled:!1},r.y>0&&(A[new u.Y(e.overscaledZ,y,r.z,d,r.y-1).key]={backfilled:!1},A[new u.Y(e.overscaledZ,e.wrap,r.z,r.x,r.y-1).key]={backfilled:!1},A[new u.Y(e.overscaledZ,E,r.z,w,r.y-1).key]={backfilled:!1}),r.y+1<a&&(A[new u.Y(e.overscaledZ,y,r.z,d,r.y+1).key]={backfilled:!1},A[new u.Y(e.overscaledZ,e.wrap,r.z,r.x,r.y+1).key]={backfilled:!1},A[new u.Y(e.overscaledZ,E,r.z,w,r.y+1).key]={backfilled:!1}),A}unloadTile(e){return u._(this,void 0,void 0,function*(){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded",e.actor&&(yield e.actor.sendAsync({type:"RDT",data:{type:this.type,uid:e.uid,source:this.id}}))})}}class bn extends u.E{constructor(e,r,a,d){super(),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=a.getActor(),this.setEventedParent(d),this._data=r.data,this._options=u.e({},r),this._collectResourceTiming=r.collectResourceTiming,r.maxzoom!==void 0&&(this.maxzoom=r.maxzoom),r.type&&(this.type=r.type),r.attribution&&(this.attribution=r.attribution),this.promoteId=r.promoteId,r.clusterMaxZoom!==void 0&&this.maxzoom<=r.clusterMaxZoom&&u.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${r.clusterMaxZoom}".`),this.workerOptions=u.e({source:this.id,cluster:r.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(r.buffer!==void 0?r.buffer:128),tolerance:this._pixelsToTileUnits(r.tolerance!==void 0?r.tolerance:.375),extent:u.Z,maxZoom:this.maxzoom,lineMetrics:r.lineMetrics||!1,generateId:r.generateId||!1},superclusterOptions:{maxZoom:r.clusterMaxZoom!==void 0?r.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,r.clusterMinPoints||2),extent:u.Z,radius:this._pixelsToTileUnits(r.clusterRadius||50),log:!1,generateId:r.generateId||!1},clusterProperties:r.clusterProperties,filter:r.filter},r.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(e){return e*(u.Z/this.tileSize)}load(){return u._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(e){this.map=e,this.load()}setData(e){return this._data=e,this._updateWorkerData(),this}updateData(e){return this._updateWorkerData(e),this}getData(){return u._(this,void 0,void 0,function*(){const e=u.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:e})})}getCoordinatesFromGeometry(e){return e.type==="GeometryCollection"?e.geometries.map(r=>r.coordinates).flat(1/0):e.coordinates.flat(1/0)}getBounds(){return u._(this,void 0,void 0,function*(){const e=new br,r=yield this.getData();let a;switch(r.type){case"FeatureCollection":a=r.features.map(d=>this.getCoordinatesFromGeometry(d.geometry)).flat(1/0);break;case"Feature":a=this.getCoordinatesFromGeometry(r.geometry);break;default:a=this.getCoordinatesFromGeometry(r)}if(a.length==0)return e;for(let d=0;d<a.length-1;d+=2)e.extend([a[d],a[d+1]]);return e})}setClusterOptions(e){return this.workerOptions.cluster=e.cluster,e&&(e.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(e.clusterRadius)),e.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=e.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(e){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:e,source:this.id}})}getClusterChildren(e){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:e,source:this.id}})}getClusterLeaves(e,r,a){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:e,limit:r,offset:a}})}_updateWorkerData(e){return u._(this,void 0,void 0,function*(){const r=u.e({type:this.type},this.workerOptions);e?r.dataDiff=e:typeof this._data=="string"?(r.request=this.map._requestManager.transformRequest(Te.resolveURL(this._data),"Source"),r.request.collectResourceTiming=this._collectResourceTiming):r.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new u.l("dataloading",{dataType:"source"}));try{const a=yield this.actor.sendAsync({type:"LD",data:r});if(this._pendingLoads--,this._removed||a.abandoned)return void this.fire(new u.l("dataabort",{dataType:"source"}));let d=null;a.resourceTiming&&a.resourceTiming[this.id]&&(d=a.resourceTiming[this.id].slice(0));const y={dataType:"source"};this._collectResourceTiming&&d&&d.length>0&&u.e(y,{resourceTiming:d}),this.fire(new u.l("data",Object.assign(Object.assign({},y),{sourceDataType:"metadata"}))),this.fire(new u.l("data",Object.assign(Object.assign({},y),{sourceDataType:"content"})))}catch(a){if(this._pendingLoads--,this._removed)return void this.fire(new u.l("dataabort",{dataType:"source"}));this.fire(new u.k(a))}})}loaded(){return this._pendingLoads===0}loadTile(e){return u._(this,void 0,void 0,function*(){const r=e.actor?"RT":"LT";e.actor=this.actor;const a={type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};e.abortController=new AbortController;const d=yield this.actor.sendAsync({type:r,data:a},e.abortController);delete e.abortController,e.unloadVectorData(),e.aborted||e.loadVectorData(d,this.map.painter,r==="RT")})}abortTile(e){return u._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.aborted=!0})}unloadTile(e){return u._(this,void 0,void 0,function*(){e.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return u.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class sn extends u.E{constructor(e,r,a,d){super(),this.flippedWindingOrder=!1,this.id=e,this.dispatcher=a,this.coordinates=r.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(d),this.options=r}load(e){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const r=yield Je.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,r&&r.data&&(this.image=r.data,e&&(this.coordinates=e),this._finishLoading())}catch(r){this._request=null,this._loaded=!0,this.fire(new u.k(r))}})}loaded(){return this._loaded}updateImage(e){return e.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=e.url,this.load(e.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new u.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(e){this.coordinates=e;const r=e.map(u.$.fromLngLat);var a;return this.tileID=function(d){let y=1/0,w=1/0,E=-1/0,A=-1/0;for(const Z of d)y=Math.min(y,Z.x),w=Math.min(w,Z.y),E=Math.max(E,Z.x),A=Math.max(A,Z.y);const D=Math.max(E-y,A-w),N=Math.max(0,Math.floor(-Math.log(D)/Math.LN2)),G=Math.pow(2,N);return new u.a1(N,Math.floor((y+E)/2*G),Math.floor((w+A)/2*G))}(r),this.terrainTileRanges=this._getOverlappingTileRanges(r),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=r.map(d=>this.tileID.getTilePoint(d)._round()),this.flippedWindingOrder=((a=this.tileCoords)[1].x-a[0].x)*(a[2].y-a[0].y)-(a[1].y-a[0].y)*(a[2].x-a[0].x)<0,this.fire(new u.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const e=this.map.painter.context,r=e.gl;this.texture||(this.texture=new ze(e,this.image,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE));let a=!1;for(const d in this.tiles){const y=this.tiles[d];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,a=!0)}a&&this.fire(new u.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(e){return u._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={}):e.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(e){let r=1/0,a=1/0,d=-1/0,y=-1/0;for(const E of e)r=Math.min(r,E.x),a=Math.min(a,E.y),d=Math.max(d,E.x),y=Math.max(y,E.y);const w={};for(let E=0;E<=u.a0;E++){const A=Math.pow(2,E),D=Math.floor(r*A),N=Math.floor(a*A),G=Math.floor(d*A),Z=Math.floor(y*A);w[E]={minTileX:D,minTileY:N,maxTileX:G,maxTileY:Z}}return w}}class kn extends sn{constructor(e,r,a,d){super(e,r,a,d),this.roundZoom=!0,this.type="video",this.options=r}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1;const e=this.options;this.urls=[];for(const r of e.urls)this.urls.push(this.map._requestManager.transformRequest(r,"Source").url);try{const r=yield u.a2(this.urls);if(this._loaded=!0,!r)return;this.video=r,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(r){this.fire(new u.k(r))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(e){if(this.video){const r=this.video.seekable;e<r.start(0)||e>r.end(0)?this.fire(new u.k(new u.a3(`sources.${this.id}`,null,`Playback for this video can be set only between the ${r.start(0)} and ${r.end(0)}-second mark.`))):this.video.currentTime=e}}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const e=this.map.painter.context,r=e.gl;this.texture?this.video.paused||(this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE),r.texSubImage2D(r.TEXTURE_2D,0,0,0,r.RGBA,r.UNSIGNED_BYTE,this.video)):(this.texture=new ze(e,this.video,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE));let a=!1;for(const d in this.tiles){const y=this.tiles[d];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,a=!0)}a&&this.fire(new u.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class wr extends sn{constructor(e,r,a,d){super(e,r,a,d),r.coordinates?Array.isArray(r.coordinates)&&r.coordinates.length===4&&!r.coordinates.some(y=>!Array.isArray(y)||y.length!==2||y.some(w=>typeof w!="number"))||this.fire(new u.k(new u.a3(`sources.${e}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new u.k(new u.a3(`sources.${e}`,null,'missing required property "coordinates"'))),r.animate&&typeof r.animate!="boolean"&&this.fire(new u.k(new u.a3(`sources.${e}`,null,'optional "animate" property must be a boolean value'))),r.canvas?typeof r.canvas=="string"||r.canvas instanceof HTMLCanvasElement||this.fire(new u.k(new u.a3(`sources.${e}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new u.k(new u.a3(`sources.${e}`,null,'missing required property "canvas"'))),this.options=r,this.animate=r.animate===void 0||r.animate}load(){return u._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new u.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const r=this.map.painter.context,a=r.gl;this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new ze(r,this.canvas,a.RGBA,{premultiply:!0});let d=!1;for(const y in this.tiles){const w=this.tiles[y];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture,d=!0)}d&&this.fire(new u.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const e of[this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return!0;return!1}}const Un={},Wn=g=>{switch(g){case"geojson":return bn;case"image":return sn;case"raster":return dn;case"raster-dem":return on;case"vector":return Hr;case"video":return kn;case"canvas":return wr}return Un[g]},Si="RTLPluginLoaded";class Jn extends u.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=fr()}_syncState(e){return this.status=e,this.dispatcher.broadcast("SRPS",{pluginStatus:e,pluginURL:this.url}).catch(r=>{throw this.status="error",r})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(e){return u._(this,arguments,void 0,function*(r,a=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=Te.resolveURL(r),!this.url)throw new Error(`requested url ${r} is invalid`);if(this.status==="unavailable"){if(!a)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return u._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new u.l(Si))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Hn=null;function Bn(){return Hn||(Hn=new Jn),Hn}class Ji{constructor(e,r){this.timeAdded=0,this.fadeEndTime=0,this.tileID=e,this.uid=u.a4(),this.uses=0,this.tileSize=r,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(e){const r=e+this.timeAdded;r<this.fadeEndTime||(this.fadeEndTime=r)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(e){this.demTexture&&e.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(e,r,a){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(d,y){const w={};if(!y)return w;for(const E of d){const A=E.layerIds.map(D=>y.getLayer(D)).filter(Boolean);if(A.length!==0){E.layers=A,E.stateDependentLayerIds&&(E.stateDependentLayers=E.stateDependentLayerIds.map(D=>A.filter(N=>N.id===D)[0]));for(const D of A)w[D.id]=E}}return w}(e.buckets,r==null?void 0:r.style),this.hasSymbolBuckets=!1;for(const d in this.buckets){const y=this.buckets[d];if(y instanceof u.a6){if(this.hasSymbolBuckets=!0,!a)break;y.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const d in this.buckets){const y=this.buckets[d];if(y instanceof u.a6&&y.hasRTLText){this.hasRTLText=!0,Bn().lazyLoad();break}}this.queryPadding=0;for(const d in this.buckets){const y=this.buckets[d];this.queryPadding=Math.max(this.queryPadding,r.style.getLayer(d).queryRadius(y))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new u.a5}unloadVectorData(){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(e){return this.buckets[e.id]}upload(e){for(const a in this.buckets){const d=this.buckets[a];d.uploadPending()&&d.upload(e)}const r=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ze(e,this.imageAtlas.image,r.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ze(e,this.glyphAtlasImage,r.ALPHA),this.glyphAtlasImage=null)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,r,a,d,y,w,E,A,D,N,G){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:d,cameraQueryGeometry:y,scale:w,tileSize:this.tileSize,pixelPosMatrix:N,transform:A,params:E,queryPadding:this.queryPadding*D,getElevation:G},e,r,a):{}}querySourceFeatures(e,r){const a=this.latestFeatureIndex;if(!a||!a.rawTileData)return;const d=a.loadVTLayers(),y=r&&r.sourceLayer?r.sourceLayer:"",w=d._geojsonTileLayer||d[y];if(!w)return;const E=u.a7(r&&r.filter),{z:A,x:D,y:N}=this.tileID.canonical,G={z:A,x:D,y:N};for(let Z=0;Z<w.length;Z++){const X=w.feature(Z);if(E.needGeometry){const _e=u.a8(X,!0);if(!E.filter(new u.C(this.tileID.overscaledZ),_e,this.tileID.canonical))continue}else if(!E.filter(new u.C(this.tileID.overscaledZ),X))continue;const ne=a.getId(X,y),be=new u.a9(X,A,D,N,ne);be.tile=G,e.push(be)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const r=this.expirationTime;if(e.cacheControl){const a=u.aa(e.cacheControl);a["max-age"]&&(this.expirationTime=Date.now()+1e3*a["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const a=Date.now();let d=!1;if(this.expirationTime>a)d=!1;else if(r)if(this.expirationTime<r)d=!0;else{const y=this.expirationTime-r;y?this.expirationTime=a+Math.max(y,3e4):d=!0}else d=!0;d?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(e,r){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(e).length===0)return;const a=this.latestFeatureIndex.loadVTLayers();for(const d in this.buckets){if(!r.style.hasLayer(d))continue;const y=this.buckets[d],w=y.layers[0].sourceLayer||"_geojsonTileLayer",E=a[w],A=e[w];if(!E||!A||Object.keys(A).length===0)continue;y.update(A,E,this.imageAtlas&&this.imageAtlas.patternPositions||{});const D=r&&r.style&&r.style.getLayer(d);D&&(this.queryPadding=Math.max(this.queryPadding,D.queryRadius(y)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Te.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=Te.now()+e}setDependencies(e,r){const a={};for(const d of r)a[d]=!0;this.dependencies[e]=a}hasDependency(e,r){for(const a of e){const d=this.dependencies[a];if(d){for(const y of r)if(d[y])return!0}}return!1}}class Gi{constructor(e,r){this.max=e,this.onRemove=r,this.reset()}reset(){for(const e in this.data)for(const r of this.data[e])r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value);return this.data={},this.order=[],this}add(e,r,a){const d=e.wrapped().key;this.data[d]===void 0&&(this.data[d]=[]);const y={value:r,timeout:void 0};if(a!==void 0&&(y.timeout=setTimeout(()=>{this.remove(e,y)},a)),this.data[d].push(y),this.order.push(d),this.order.length>this.max){const w=this._getAndRemoveByKey(this.order[0]);w&&this.onRemove(w)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const r=this.data[e].shift();return r.timeout&&clearTimeout(r.timeout),this.data[e].length===0&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),r.value}getByKey(e){const r=this.data[e];return r?r[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,r){if(!this.has(e))return this;const a=e.wrapped().key,d=r===void 0?0:this.data[a].indexOf(r),y=this.data[a][d];return this.data[a].splice(d,1),y.timeout&&clearTimeout(y.timeout),this.data[a].length===0&&delete this.data[a],this.onRemove(y.value),this.order.splice(this.order.indexOf(a),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const r=this._getAndRemoveByKey(this.order[0]);r&&this.onRemove(r)}return this}filter(e){const r=[];for(const a in this.data)for(const d of this.data[a])e(d.value)||r.push(d);for(const a of r)this.remove(a.value.tileID,a)}}class Vi{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,r,a){const d=String(r);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][d]=this.stateChanges[e][d]||{},u.e(this.stateChanges[e][d],a),this.deletedStates[e]===null){this.deletedStates[e]={};for(const y in this.state[e])y!==d&&(this.deletedStates[e][y]=null)}else if(this.deletedStates[e]&&this.deletedStates[e][d]===null){this.deletedStates[e][d]={};for(const y in this.state[e][d])a[y]||(this.deletedStates[e][d][y]=null)}else for(const y in a)this.deletedStates[e]&&this.deletedStates[e][d]&&this.deletedStates[e][d][y]===null&&delete this.deletedStates[e][d][y]}removeFeatureState(e,r,a){if(this.deletedStates[e]===null)return;const d=String(r);if(this.deletedStates[e]=this.deletedStates[e]||{},a&&r!==void 0)this.deletedStates[e][d]!==null&&(this.deletedStates[e][d]=this.deletedStates[e][d]||{},this.deletedStates[e][d][a]=null);else if(r!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][d])for(a in this.deletedStates[e][d]={},this.stateChanges[e][d])this.deletedStates[e][d][a]=null;else this.deletedStates[e][d]=null;else this.deletedStates[e]=null}getState(e,r){const a=String(r),d=u.e({},(this.state[e]||{})[a],(this.stateChanges[e]||{})[a]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){const y=this.deletedStates[e][r];if(y===null)return{};for(const w in y)delete d[w]}return d}initializeTileState(e,r){e.setFeatureState(this.state,r)}coalesceChanges(e,r){const a={};for(const d in this.stateChanges){this.state[d]=this.state[d]||{};const y={};for(const w in this.stateChanges[d])this.state[d][w]||(this.state[d][w]={}),u.e(this.state[d][w],this.stateChanges[d][w]),y[w]=this.state[d][w];a[d]=y}for(const d in this.deletedStates){this.state[d]=this.state[d]||{};const y={};if(this.deletedStates[d]===null)for(const w in this.state[d])y[w]={},this.state[d][w]={};else for(const w in this.deletedStates[d]){if(this.deletedStates[d][w]===null)this.state[d][w]={};else for(const E of Object.keys(this.deletedStates[d][w]))delete this.state[d][w][E];y[w]=this.state[d][w]}a[d]=a[d]||{},u.e(a[d],y)}if(this.stateChanges={},this.deletedStates={},Object.keys(a).length!==0)for(const d in e)e[d].setFeatureState(a,r)}}const ei=89.25;function ii(g,e){const r=u.ae(e.lat,-85.051129,u.af);return new u.P(u.U(e.lng)*g,u.S(r)*g)}function mo(g,e){return new u.$(e.x/g,e.y/g).toLngLat()}function et(g){return g.cameraToCenterDistance*Math.min(.85*Math.tan(u.ab(90-g.pitch)),Math.tan(u.ab(ei-g.pitch)))}function se(g,e){const r=g.canonical,a=e/u.ac(r.z),d=r.x+Math.pow(2,r.z)*g.wrap,y=u.ad(new Float64Array(16));return u.L(y,y,[d*a,r.y*a,0]),u.M(y,y,[a/u.Z,a/u.Z,1]),y}function ae(g,e,r,a,d){const y=u.$.fromLngLat(g,e),w=d*u.ag(1,g.lat),E=w*Math.cos(u.ab(r)),A=Math.sqrt(w*w-E*E),D=A*Math.sin(u.ab(-a)),N=A*Math.cos(u.ab(-a));return new u.$(y.x+D,y.y+N,y.z+E)}function ge(g,e,r){const a=e.intersectsFrustum(g);if(!r)return a;const d=e.intersectsPlane(r);return a===0||d===0?0:a===2&&d===2?2:1}function Ie(g,e,r){let a=0;const d=(r-e)/10;for(let y=0;y<10;y++)a+=d*Math.pow(Math.cos(e+(y+.5)/10*(r-e)),g);return a}function Ue(g,e){return function(r,a,d,y,w){const E=2*((g-1)/u.ah(Math.cos(u.ab(ei-w))/Math.cos(u.ab(ei)))-1),A=Math.acos(d/y),D=2*Ie(E-1,0,u.ab(w/2)),N=Math.min(u.ab(ei),A+u.ab(w/2)),G=Ie(E-1,Math.min(N,A-u.ab(w/2)),N),Z=Math.atan(a/d),X=Math.hypot(a,d);let ne=r;return ne+=u.ah(y/X/Math.max(.5,Math.cos(u.ab(w/2)))),ne+=E*u.ah(Math.cos(Z))/2,ne-=u.ah(Math.max(1,G/D/e))/2,ne}}const fe=Ue(9.314,3);function qe(g,e){const r=(e.roundZoom?Math.round:Math.floor)(g.zoom+u.ah(g.tileSize/e.tileSize));return Math.max(0,r)}function We(g,e){const r=g.getCameraFrustum(),a=g.getClippingPlane(),d=g.screenPointToMercatorCoordinate(g.getCameraPoint()),y=u.$.fromLngLat(g.center,g.elevation);d.z=y.z+Math.cos(g.pitchInRadians)*g.cameraToCenterDistance/g.worldSize;const w=g.getCoveringTilesDetailsProvider(),E=w.allowVariableZoom(g,e),A=qe(g,e),D=e.minzoom||0,N=e.maxzoom!==void 0?e.maxzoom:g.maxZoom,G=Math.min(Math.max(0,A),N),Z=Math.pow(2,G),X=[Z*d.x,Z*d.y,0],ne=[Z*y.x,Z*y.y,0],be=Math.hypot(y.x-d.x,y.y-d.y),_e=Math.abs(y.z-d.z),Se=Math.hypot(be,_e),ke=De=>({zoom:0,x:0,y:0,wrap:De,fullyVisible:!1}),Le=[],Me=[];if(g.renderWorldCopies&&w.allowWorldCopies())for(let De=1;De<=3;De++)Le.push(ke(-De)),Le.push(ke(De));for(Le.push(ke(0));Le.length>0;){const De=Le.pop(),Ne=De.x,je=De.y;let at=De.fullyVisible;const It={x:Ne,y:je,z:De.zoom},Ye=w.getTileAABB(It,De.wrap,g.elevation,e);if(!at){const er=ge(r,Ye,a);if(er===0)continue;at=er===2}const ht=w.distanceToTile2d(d.x,d.y,It,Ye);let Ct=A;E&&(Ct=(e.calculateTileZoom||fe)(g.zoom+u.ah(g.tileSize/e.tileSize),ht,_e,Se,g.fov)),Ct=(e.roundZoom?Math.round:Math.floor)(Ct),Ct=Math.max(0,Ct);const Jt=Math.min(Ct,N);if(De.wrap=w.getWrap(y,It,De.wrap),De.zoom>=Jt){if(De.zoom<D)continue;const er=G-De.zoom,Ft=X[0]-.5-(Ne<<er),vr=X[1]-.5-(je<<er),Zr=e.reparseOverscaled?Math.max(De.zoom,Ct):De.zoom;Me.push({tileID:new u.Y(De.zoom===N?Zr:De.zoom,De.wrap,De.zoom,Ne,je),distanceSq:u.ai([ne[0]-.5-Ne,ne[1]-.5-je]),tileDistanceToCamera:Math.sqrt(Ft*Ft+vr*vr)})}else for(let er=0;er<4;er++)Le.push({zoom:De.zoom+1,x:(Ne<<1)+er%2,y:(je<<1)+(er>>1),wrap:De.wrap,fullyVisible:at})}return Me.sort((De,Ne)=>De.distanceSq-Ne.distanceSq).map(De=>De.tileID)}class rt extends u.E{constructor(e,r,a){super(),this.id=e,this.dispatcher=a,this.on("data",d=>this._dataHandler(d)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((d,y,w,E)=>{const A=new(Wn(y.type))(d,y,w,E);if(A.id!==d)throw new Error(`Expected Source id to be ${d} instead of ${A.id}`);return A})(e,r,a,this),this._tiles={},this._cache=new Gi(0,d=>this._unloadTile(d)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Vi,this._didEmitContent=!1,this._updated=!1}onAdd(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._maxTileCacheZoomLevels=e?e._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(e)}onRemove(e){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(e)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const e in this._tiles){const r=this._tiles[e];if(r.state!=="loaded"&&r.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(e,r,a){return u._(this,void 0,void 0,function*(){try{yield this._source.loadTile(e),this._tileLoaded(e,r,a)}catch(d){e.state="errored",d.status!==404?this._source.fire(new u.k(d,{tile:e})):this.update(this.transform,this.terrain)}})}_unloadTile(e){this._source.unloadTile&&this._source.unloadTile(e)}_abortTile(e){this._source.abortTile&&this._source.abortTile(e),this._source.fire(new u.l("dataabort",{tile:e,coord:e.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const r in this._tiles){const a=this._tiles[r];a.upload(e),a.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(e=>e.tileID).sort(dt).map(e=>e.key)}getRenderableIds(e){const r=[];for(const a in this._tiles)this._isIdRenderable(a,e)&&r.push(this._tiles[a]);return e?r.sort((a,d)=>{const y=a.tileID,w=d.tileID,E=new u.P(y.canonical.x,y.canonical.y)._rotate(-this.transform.bearingInRadians),A=new u.P(w.canonical.x,w.canonical.y)._rotate(-this.transform.bearingInRadians);return y.overscaledZ-w.overscaledZ||A.y-E.y||A.x-E.x}).map(a=>a.tileID.key):r.map(a=>a.tileID).sort(dt).map(a=>a.key)}hasRenderableParent(e){const r=this.findLoadedParent(e,0);return!!r&&this._isIdRenderable(r.tileID.key)}_isIdRenderable(e,r){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(r||!this._tiles[e].holdingForFade())}reload(e){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const r in this._tiles)(e||this._tiles[r].state!=="errored")&&this._reloadTile(r,"reloading")}}_reloadTile(e,r){return u._(this,void 0,void 0,function*(){const a=this._tiles[e];a&&(a.state!=="loading"&&(a.state=r),yield this._loadTile(a,e,r))})}_tileLoaded(e,r,a){e.timeAdded=Te.now(),a==="expired"&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(r,e),this.getSource().type==="raster-dem"&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),e.aborted||this._source.fire(new u.l("data",{dataType:"source",tile:e,coord:e.tileID}))}_backfillDEM(e){const r=this.getRenderableIds();for(let d=0;d<r.length;d++){const y=r[d];if(e.neighboringTiles&&e.neighboringTiles[y]){const w=this.getTileByID(y);a(e,w),a(w,e)}}function a(d,y){d.needsHillshadePrepare=!0,d.needsTerrainPrepare=!0;let w=y.tileID.canonical.x-d.tileID.canonical.x;const E=y.tileID.canonical.y-d.tileID.canonical.y,A=Math.pow(2,d.tileID.canonical.z),D=y.tileID.key;w===0&&E===0||Math.abs(E)>1||(Math.abs(w)>1&&(Math.abs(w+A)===1?w+=A:Math.abs(w-A)===1&&(w-=A)),y.dem&&d.dem&&(d.dem.backfillBorder(y.dem,w,E),d.neighboringTiles&&d.neighboringTiles[D]&&(d.neighboringTiles[D].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,r,a,d){for(const y in this._tiles){let w=this._tiles[y];if(d[y]||!w.hasData()||w.tileID.overscaledZ<=r||w.tileID.overscaledZ>a)continue;let E=w.tileID;for(;w&&w.tileID.overscaledZ>r+1;){const D=w.tileID.scaledTo(w.tileID.overscaledZ-1);w=this._tiles[D.key],w&&w.hasData()&&(E=D)}let A=E;for(;A.overscaledZ>r;)if(A=A.scaledTo(A.overscaledZ-1),e[A.key]||e[A.canonical.key]){d[E.key]=E;break}}}findLoadedParent(e,r){if(e.key in this._loadedParentTiles){const a=this._loadedParentTiles[e.key];return a&&a.tileID.overscaledZ>=r?a:null}for(let a=e.overscaledZ-1;a>=r;a--){const d=e.scaledTo(a),y=this._getLoadedTile(d);if(y)return y}}findLoadedSibling(e){return this._getLoadedTile(e)}_getLoadedTile(e){const r=this._tiles[e.key];return r&&r.hasData()?r:this._cache.getByKey(e.wrapped().key)}updateCacheSize(e){const r=Math.ceil(e.width/this._source.tileSize)+1,a=Math.ceil(e.height/this._source.tileSize)+1,d=Math.floor(r*a*(this._maxTileCacheZoomLevels===null?u.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),y=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,d):d;this._cache.setMaxSize(y)}handleWrapJump(e){const r=Math.round((e-(this._prevLng===void 0?e:this._prevLng))/360);if(this._prevLng=e,r){const a={};for(const d in this._tiles){const y=this._tiles[d];y.tileID=y.tileID.unwrapTo(y.tileID.wrap+r),a[y.tileID.key]=y}this._tiles=a;for(const d in this._timers)clearTimeout(this._timers[d]),delete this._timers[d];for(const d in this._tiles)this._setTileReloadTimer(d,this._tiles[d])}}_updateCoveredAndRetainedTiles(e,r,a,d,y,w){const E={},A={},D=Object.keys(e),N=Te.now();for(const G of D){const Z=e[G],X=this._tiles[G];if(!X||X.fadeEndTime!==0&&X.fadeEndTime<=N)continue;const ne=this.findLoadedParent(Z,r),be=this.findLoadedSibling(Z),_e=ne||be||null;_e&&(this._addTile(_e.tileID),E[_e.tileID.key]=_e.tileID),A[G]=Z}this._retainLoadedChildren(A,d,a,e);for(const G in E)e[G]||(this._coveredTiles[G]=!0,e[G]=E[G]);if(w){const G={},Z={};for(const X of y)this._tiles[X.key].hasData()?G[X.key]=X:Z[X.key]=X;for(const X in Z){const ne=Z[X].children(this._source.maxzoom);this._tiles[ne[0].key]&&this._tiles[ne[1].key]&&this._tiles[ne[2].key]&&this._tiles[ne[3].key]&&(G[ne[0].key]=e[ne[0].key]=ne[0],G[ne[1].key]=e[ne[1].key]=ne[1],G[ne[2].key]=e[ne[2].key]=ne[2],G[ne[3].key]=e[ne[3].key]=ne[3],delete Z[X])}for(const X in Z){const ne=Z[X],be=this.findLoadedParent(ne,this._source.minzoom),_e=this.findLoadedSibling(ne),Se=be||_e||null;if(Se){G[Se.tileID.key]=e[Se.tileID.key]=Se.tileID;for(const ke in G)G[ke].isChildOf(Se.tileID)&&delete G[ke]}}for(const X in this._tiles)G[X]||(this._coveredTiles[X]=!0)}}update(e,r){if(!this._sourceLoaded||this._paused)return;let a;this.transform=e,this.terrain=r,this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?a=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(N=>new u.Y(N.canonical.z,N.wrap,N.canonical.z,N.canonical.x,N.canonical.y)):(a=We(e,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:r,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(a=a.filter(N=>this._source.hasTile(N)))):a=[];const d=qe(e,this._source),y=Math.max(d-rt.maxOverzooming,this._source.minzoom),w=Math.max(d+rt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const N={};for(const G of a)if(G.canonical.z>this._source.minzoom){const Z=G.scaledTo(G.canonical.z-1);N[Z.key]=Z;const X=G.scaledTo(Math.max(this._source.minzoom,Math.min(G.canonical.z,5)));N[X.key]=X}a=a.concat(Object.values(N))}const E=a.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,E&&this.fire(new u.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const A=this._updateRetainedTiles(a,d);Xe(this._source.type)&&this._updateCoveredAndRetainedTiles(A,y,w,d,a,r);for(const N in A)this._tiles[N].clearFadeHold();const D=u.aj(this._tiles,A);for(const N of D){const G=this._tiles[N];G.hasSymbolBuckets&&!G.holdingForFade()?G.setHoldDuration(this.map._fadeDuration):G.hasSymbolBuckets&&!G.symbolFadeFinished()||this._removeTile(N)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(e)}_updateRetainedTiles(e,r){var a;const d={},y={},w=Math.max(r-rt.maxOverzooming,this._source.minzoom),E=Math.max(r+rt.maxUnderzooming,this._source.minzoom),A={};for(const D of e){const N=this._addTile(D);d[D.key]=D,N.hasData()||r<this._source.maxzoom&&(A[D.key]=D)}this._retainLoadedChildren(A,r,E,d);for(const D of e){let N=this._tiles[D.key];if(N.hasData())continue;if(r+1>this._source.maxzoom){const Z=D.children(this._source.maxzoom)[0],X=this.getTile(Z);if(X&&X.hasData()){d[Z.key]=Z;continue}}else{const Z=D.children(this._source.maxzoom);if(d[Z[0].key]&&d[Z[1].key]&&d[Z[2].key]&&d[Z[3].key])continue}let G=N.wasRequested();for(let Z=D.overscaledZ-1;Z>=w;--Z){const X=D.scaledTo(Z);if(y[X.key])break;if(y[X.key]=!0,N=this.getTile(X),!N&&G&&(N=this._addTile(X)),N){const ne=N.hasData();if((ne||!(!((a=this.map)===null||a===void 0)&&a.cancelPendingTileRequestsWhileZooming)||G)&&(d[X.key]=X),G=N.wasRequested(),ne)break}}}return d}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const r=[];let a,d=this._tiles[e].tileID;for(;d.overscaledZ>0;){if(d.key in this._loadedParentTiles){a=this._loadedParentTiles[d.key];break}r.push(d.key);const y=d.scaledTo(d.overscaledZ-1);if(a=this._getLoadedTile(y),a)break;d=y}for(const y of r)this._loadedParentTiles[y]=a}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const e in this._tiles){const r=this._tiles[e].tileID,a=this._getLoadedTile(r);this._loadedSiblingTiles[r.key]=a}}_addTile(e){let r=this._tiles[e.key];if(r)return r;r=this._cache.getAndRemove(e),r&&(this._setTileReloadTimer(e.key,r),r.tileID=e,this._state.initializeTileState(r,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,r)));const a=r;return r||(r=new Ji(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(r,e.key,r.state)),r.uses++,this._tiles[e.key]=r,a||this._source.fire(new u.l("dataloading",{tile:r,coord:r.tileID,dataType:"source"})),r}_setTileReloadTimer(e,r){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const a=r.getExpiryTimeout();a&&(this._timers[e]=setTimeout(()=>{this._reloadTile(e,"expired"),delete this._timers[e]},a))}refreshTiles(e){for(const r in this._tiles)this._isIdRenderable(r)&&e.some(a=>a.equals(this._tiles[r].tileID.canonical))&&this._reloadTile(r,"expired")}_removeTile(e){const r=this._tiles[e];r&&(r.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),r.uses>0||(r.hasData()&&r.state!=="reloading"?this._cache.add(r.tileID,r,r.getExpiryTimeout()):(r.aborted=!0,this._abortTile(r),this._unloadTile(r))))}_dataHandler(e){const r=e.sourceDataType;e.dataType==="source"&&r==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&e.dataType==="source"&&r==="content"&&(this.reload(e.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(e);this._cache.reset()}tilesIn(e,r,a){const d=[],y=this.transform;if(!y)return d;const w=a?y.getCameraQueryGeometry(e):e,E=e.map(ne=>y.screenPointToMercatorCoordinate(ne,this.terrain)),A=w.map(ne=>y.screenPointToMercatorCoordinate(ne,this.terrain)),D=this.getIds();let N=1/0,G=1/0,Z=-1/0,X=-1/0;for(const ne of A)N=Math.min(N,ne.x),G=Math.min(G,ne.y),Z=Math.max(Z,ne.x),X=Math.max(X,ne.y);for(let ne=0;ne<D.length;ne++){const be=this._tiles[D[ne]];if(be.holdingForFade())continue;const _e=y.getCoveringTilesDetailsProvider().allowWorldCopies()?be.tileID:be.tileID.unwrapTo(0),Se=Math.pow(2,y.zoom-be.tileID.overscaledZ),ke=r*be.queryPadding*u.Z/be.tileSize/Se,Le=[_e.getTilePoint(new u.$(N,G)),_e.getTilePoint(new u.$(Z,X))];if(Le[0].x-ke<u.Z&&Le[0].y-ke<u.Z&&Le[1].x+ke>=0&&Le[1].y+ke>=0){const Me=E.map(Ne=>_e.getTilePoint(Ne)),De=A.map(Ne=>_e.getTilePoint(Ne));d.push({tile:be,tileID:_e,queryGeometry:Me,cameraQueryGeometry:De,scale:Se})}}return d}getVisibleCoordinates(e){const r=this.getRenderableIds(e).map(a=>this._tiles[a].tileID);return this.transform&&this.transform.populateCache(r),r}hasTransition(){if(this._source.hasTransition())return!0;if(Xe(this._source.type)){const e=Te.now();for(const r in this._tiles)if(this._tiles[r].fadeEndTime>=e)return!0}return!1}setFeatureState(e,r,a){this._state.updateState(e=e||"_geojsonTileLayer",r,a)}removeFeatureState(e,r,a){this._state.removeFeatureState(e=e||"_geojsonTileLayer",r,a)}getFeatureState(e,r){return this._state.getState(e=e||"_geojsonTileLayer",r)}setDependencies(e,r,a){const d=this._tiles[e];d&&d.setDependencies(r,a)}reloadTilesForDependencies(e,r){for(const a in this._tiles)this._tiles[a].hasDependency(e,r)&&this._reloadTile(a,"reloading");this._cache.filter(a=>!a.hasDependency(e,r))}}function dt(g,e){const r=Math.abs(2*g.wrap)-+(g.wrap<0),a=Math.abs(2*e.wrap)-+(e.wrap<0);return g.overscaledZ-e.overscaledZ||a-r||e.canonical.y-g.canonical.y||e.canonical.x-g.canonical.x}function Xe(g){return g==="raster"||g==="image"||g==="video"}rt.maxOverzooming=10,rt.maxUnderzooming=3;class Lt{constructor(e,r){this.reset(e,r)}reset(e,r){this.points=e||[],this._distances=[0];for(let a=1;a<this.points.length;a++)this._distances[a]=this._distances[a-1]+this.points[a].dist(this.points[a-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(r||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(e){if(this.points.length===1)return this.points[0];e=u.ae(e,0,1);let r=1,a=this._distances[r];const d=e*this.paddedLength+this.padding;for(;a<d&&r<this._distances.length;)a=this._distances[++r];const y=r-1,w=this._distances[y],E=a-w,A=E>0?(d-w)/E:0;return this.points[y].mult(1-A).add(this.points[r].mult(A))}}function Xt(g,e){let r=!0;return g==="always"||g!=="never"&&e!=="never"||(r=!1),r}class cr{constructor(e,r,a){const d=this.boxCells=[],y=this.circleCells=[];this.xCellCount=Math.ceil(e/a),this.yCellCount=Math.ceil(r/a);for(let w=0;w<this.xCellCount*this.yCellCount;w++)d.push([]),y.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=r,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/r,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,r,a,d,y){this._forEachCell(r,a,d,y,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(r),this.bboxes.push(a),this.bboxes.push(d),this.bboxes.push(y)}insertCircle(e,r,a,d){this._forEachCell(r-d,a-d,r+d,a+d,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(r),this.circles.push(a),this.circles.push(d)}_insertBoxCell(e,r,a,d,y,w){this.boxCells[y].push(w)}_insertCircleCell(e,r,a,d,y,w){this.circleCells[y].push(w)}_query(e,r,a,d,y,w,E){if(a<0||e>this.width||d<0||r>this.height)return[];const A=[];if(e<=0&&r<=0&&this.width<=a&&this.height<=d){if(y)return[{key:null,x1:e,y1:r,x2:a,y2:d}];for(let D=0;D<this.boxKeys.length;D++)A.push({key:this.boxKeys[D],x1:this.bboxes[4*D],y1:this.bboxes[4*D+1],x2:this.bboxes[4*D+2],y2:this.bboxes[4*D+3]});for(let D=0;D<this.circleKeys.length;D++){const N=this.circles[3*D],G=this.circles[3*D+1],Z=this.circles[3*D+2];A.push({key:this.circleKeys[D],x1:N-Z,y1:G-Z,x2:N+Z,y2:G+Z})}}else this._forEachCell(e,r,a,d,this._queryCell,A,{hitTest:y,overlapMode:w,seenUids:{box:{},circle:{}}},E);return A}query(e,r,a,d){return this._query(e,r,a,d,!1,null)}hitTest(e,r,a,d,y,w){return this._query(e,r,a,d,!0,y,w).length>0}hitTestCircle(e,r,a,d,y){const w=e-a,E=e+a,A=r-a,D=r+a;if(E<0||w>this.width||D<0||A>this.height)return!1;const N=[];return this._forEachCell(w,A,E,D,this._queryCellCircle,N,{hitTest:!0,overlapMode:d,circle:{x:e,y:r,radius:a},seenUids:{box:{},circle:{}}},y),N.length>0}_queryCell(e,r,a,d,y,w,E,A){const{seenUids:D,hitTest:N,overlapMode:G}=E,Z=this.boxCells[y];if(Z!==null){const ne=this.bboxes;for(const be of Z)if(!D.box[be]){D.box[be]=!0;const _e=4*be,Se=this.boxKeys[be];if(e<=ne[_e+2]&&r<=ne[_e+3]&&a>=ne[_e+0]&&d>=ne[_e+1]&&(!A||A(Se))&&(!N||!Xt(G,Se.overlapMode))&&(w.push({key:Se,x1:ne[_e],y1:ne[_e+1],x2:ne[_e+2],y2:ne[_e+3]}),N))return!0}}const X=this.circleCells[y];if(X!==null){const ne=this.circles;for(const be of X)if(!D.circle[be]){D.circle[be]=!0;const _e=3*be,Se=this.circleKeys[be];if(this._circleAndRectCollide(ne[_e],ne[_e+1],ne[_e+2],e,r,a,d)&&(!A||A(Se))&&(!N||!Xt(G,Se.overlapMode))){const ke=ne[_e],Le=ne[_e+1],Me=ne[_e+2];if(w.push({key:Se,x1:ke-Me,y1:Le-Me,x2:ke+Me,y2:Le+Me}),N)return!0}}}return!1}_queryCellCircle(e,r,a,d,y,w,E,A){const{circle:D,seenUids:N,overlapMode:G}=E,Z=this.boxCells[y];if(Z!==null){const ne=this.bboxes;for(const be of Z)if(!N.box[be]){N.box[be]=!0;const _e=4*be,Se=this.boxKeys[be];if(this._circleAndRectCollide(D.x,D.y,D.radius,ne[_e+0],ne[_e+1],ne[_e+2],ne[_e+3])&&(!A||A(Se))&&!Xt(G,Se.overlapMode))return w.push(!0),!0}}const X=this.circleCells[y];if(X!==null){const ne=this.circles;for(const be of X)if(!N.circle[be]){N.circle[be]=!0;const _e=3*be,Se=this.circleKeys[be];if(this._circlesCollide(ne[_e],ne[_e+1],ne[_e+2],D.x,D.y,D.radius)&&(!A||A(Se))&&!Xt(G,Se.overlapMode))return w.push(!0),!0}}}_forEachCell(e,r,a,d,y,w,E,A){const D=this._convertToXCellCoord(e),N=this._convertToYCellCoord(r),G=this._convertToXCellCoord(a),Z=this._convertToYCellCoord(d);for(let X=D;X<=G;X++)for(let ne=N;ne<=Z;ne++)if(y.call(this,e,r,a,d,this.xCellCount*ne+X,w,E,A))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,r,a,d,y,w){const E=d-e,A=y-r,D=a+w;return D*D>E*E+A*A}_circleAndRectCollide(e,r,a,d,y,w,E){const A=(w-d)/2,D=Math.abs(e-(d+A));if(D>A+a)return!1;const N=(E-y)/2,G=Math.abs(r-(y+N));if(G>N+a)return!1;if(D<=A||G<=N)return!0;const Z=D-A,X=G-N;return Z*Z+X*X<=a*a}}function Mr(g,e,r){const a=u.K();if(!g){const{vecSouth:G,vecEast:Z}=Nr(e),X=Y();X[0]=Z[0],X[1]=Z[1],X[2]=G[0],X[3]=G[1],d=X,(N=(w=(y=X)[0])*(D=y[3])-(A=y[2])*(E=y[1]))&&(d[0]=D*(N=1/N),d[1]=-E*N,d[2]=-A*N,d[3]=w*N),a[0]=X[0],a[1]=X[1],a[4]=X[2],a[5]=X[3]}var d,y,w,E,A,D,N;return u.M(a,a,[1/r,1/r,1]),a}function qr(g,e,r,a){if(g){const d=u.K();if(!e){const{vecSouth:y,vecEast:w}=Nr(r);d[0]=w[0],d[1]=w[1],d[4]=y[0],d[5]=y[1]}return u.M(d,d,[a,a,1]),d}return r.pixelsToClipSpaceMatrix}function Nr(g){const e=Math.cos(g.rollInRadians),r=Math.sin(g.rollInRadians),a=Math.cos(g.pitchInRadians),d=Math.cos(g.bearingInRadians),y=Math.sin(g.bearingInRadians),w=u.ao();w[0]=-d*a*r-y*e,w[1]=-y*a*r+d*e;const E=u.ap(w);E<1e-9?u.aq(w):u.ar(w,w,1/E);const A=u.ao();A[0]=d*a*e-y*r,A[1]=y*a*e+d*r;const D=u.ap(A);return D<1e-9?u.aq(A):u.ar(A,A,1/D),{vecEast:A,vecSouth:w}}function St(g,e,r,a){let d;a?(d=[g,e,a(g,e),1],u.at(d,d,r)):(d=[g,e,0,1],La(d,d,r));const y=d[3];return{point:new u.P(d[0]/y,d[1]/y),signedDistanceFromCamera:y,isOccluded:!1}}function wn(g,e){return .5+g/e*.5}function yn(g,e){return g.x>=-e[0]&&g.x<=e[0]&&g.y>=-e[1]&&g.y<=e[1]}function Sn(g,e,r,a,d,y,w,E,A,D,N,G,Z){const X=r?g.textSizeData:g.iconSizeData,ne=u.ak(X,e.transform.zoom),be=[256/e.width*2+1,256/e.height*2+1],_e=r?g.text.dynamicLayoutVertexArray:g.icon.dynamicLayoutVertexArray;_e.clear();const Se=g.lineVertexArray,ke=r?g.text.placedSymbolArray:g.icon.placedSymbolArray,Le=e.transform.width/e.transform.height;let Me=!1;for(let De=0;De<ke.length;De++){const Ne=ke.get(De);if(Ne.hidden||Ne.writingMode===u.al.vertical&&!Me){Zo(Ne.numGlyphs,_e);continue}Me=!1;const je=new u.P(Ne.anchorX,Ne.anchorY),at={getElevation:Z,pitchedLabelPlaneMatrix:a,lineVertexArray:Se,pitchWithMap:y,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:e.transform,tileAnchorPoint:je,unwrappedTileID:A,width:D,height:N,translation:G},It=un(Ne.anchorX,Ne.anchorY,at);if(!yn(It.point,be)){Zo(Ne.numGlyphs,_e);continue}const Ye=wn(e.transform.cameraToCenterDistance,It.signedDistanceFromCamera),ht=u.am(X,ne,Ne),Ct=y?ht*e.transform.getPitchedTextCorrection(Ne.anchorX,Ne.anchorY,A)/Ye:ht*Ye,Jt=Or({projectionContext:at,pitchedLabelPlaneMatrixInverse:d,symbol:Ne,fontSize:Ct,flip:!1,keepUpright:w,glyphOffsetArray:g.glyphOffsetArray,dynamicLayoutVertexArray:_e,aspectRatio:Le,rotateToLine:E});Me=Jt.useVertical,(Jt.notEnoughRoom||Me||Jt.needsFlipping&&Or({projectionContext:at,pitchedLabelPlaneMatrixInverse:d,symbol:Ne,fontSize:Ct,flip:!0,keepUpright:w,glyphOffsetArray:g.glyphOffsetArray,dynamicLayoutVertexArray:_e,aspectRatio:Le,rotateToLine:E}).notEnoughRoom)&&Zo(Ne.numGlyphs,_e)}r?g.text.dynamicLayoutVertexBuffer.updateData(_e):g.icon.dynamicLayoutVertexBuffer.updateData(_e)}function Fr(g,e,r,a,d,y,w,E){const A=y.glyphStartIndex+y.numGlyphs,D=y.lineStartIndex,N=y.lineStartIndex+y.lineLength,G=e.getoffsetX(y.glyphStartIndex),Z=e.getoffsetX(A-1),X=Ps(g*G,r,a,d,y.segment,D,N,E,w);if(!X)return null;const ne=Ps(g*Z,r,a,d,y.segment,D,N,E,w);return ne?E.projectionCache.anyProjectionOccluded?null:{first:X,last:ne}:null}function Ot(g,e,r,a){return g===u.al.horizontal&&Math.abs(r.y-e.y)>Math.abs(r.x-e.x)*a?{useVertical:!0}:(g===u.al.vertical?e.y<r.y:e.x>r.x)?{needsFlipping:!0}:null}function Or(g){const{projectionContext:e,pitchedLabelPlaneMatrixInverse:r,symbol:a,fontSize:d,flip:y,keepUpright:w,glyphOffsetArray:E,dynamicLayoutVertexArray:A,aspectRatio:D,rotateToLine:N}=g,G=d/24,Z=a.lineOffsetX*G,X=a.lineOffsetY*G;let ne;if(a.numGlyphs>1){const be=a.glyphStartIndex+a.numGlyphs,_e=a.lineStartIndex,Se=a.lineStartIndex+a.lineLength,ke=Fr(G,E,Z,X,y,a,N,e);if(!ke)return{notEnoughRoom:!0};const Le=Po(ke.first.point.x,ke.first.point.y,e,r),Me=Po(ke.last.point.x,ke.last.point.y,e,r);if(w&&!y){const De=Ot(a.writingMode,Le,Me,D);if(De)return De}ne=[ke.first];for(let De=a.glyphStartIndex+1;De<be-1;De++)ne.push(Ps(G*E.getoffsetX(De),Z,X,y,a.segment,_e,Se,e,N));ne.push(ke.last)}else{if(w&&!y){const _e=Zn(e.tileAnchorPoint.x,e.tileAnchorPoint.y,e).point,Se=a.lineStartIndex+a.segment+1,ke=new u.P(e.lineVertexArray.getx(Se),e.lineVertexArray.gety(Se)),Le=Zn(ke.x,ke.y,e),Me=Le.signedDistanceFromCamera>0?Le.point:rn(e.tileAnchorPoint,ke,_e,1,e),De=Po(_e.x,_e.y,e,r),Ne=Po(Me.x,Me.y,e,r),je=Ot(a.writingMode,De,Ne,D);if(je)return je}const be=Ps(G*E.getoffsetX(a.glyphStartIndex),Z,X,y,a.segment,a.lineStartIndex,a.lineStartIndex+a.lineLength,e,N);if(!be||e.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};ne=[be]}for(const be of ne)u.as(A,be.point,be.angle);return{}}function rn(g,e,r,a,d){const y=g.add(g.sub(e)._unit()),w=Zn(y.x,y.y,d).point,E=r.sub(w);return r.add(E._mult(a/E.mag()))}function Vn(g,e,r){const a=e.projectionCache;if(a.projections[g])return a.projections[g];const d=new u.P(e.lineVertexArray.getx(g),e.lineVertexArray.gety(g)),y=Zn(d.x,d.y,e);if(y.signedDistanceFromCamera>0)return a.projections[g]=y.point,a.anyProjectionOccluded=a.anyProjectionOccluded||y.isOccluded,y.point;const w=g-r.direction;return rn(r.distanceFromAnchor===0?e.tileAnchorPoint:new u.P(e.lineVertexArray.getx(w),e.lineVertexArray.gety(w)),d,r.previousVertex,r.absOffsetX-r.distanceFromAnchor+1,e)}function Zn(g,e,r){const a=g+r.translation[0],d=e+r.translation[1];let y;return r.pitchWithMap?(y=St(a,d,r.pitchedLabelPlaneMatrix,r.getElevation),y.isOccluded=!1):(y=r.transform.projectTileCoordinates(a,d,r.unwrappedTileID,r.getElevation),y.point.x=(.5*y.point.x+.5)*r.width,y.point.y=(.5*-y.point.y+.5)*r.height),y}function Po(g,e,r,a){if(r.pitchWithMap){const d=[g,e,0,1];return u.at(d,d,a),r.transform.projectTileCoordinates(d[0]/d[3],d[1]/d[3],r.unwrappedTileID,r.getElevation).point}return{x:g/r.width*2-1,y:e/r.height*2-1}}function un(g,e,r){return r.transform.projectTileCoordinates(g,e,r.unwrappedTileID,r.getElevation)}function Ys(g,e,r){return g._unit()._perp()._mult(e*r)}function Qs(g,e,r,a,d,y,w,E,A){if(E.projectionCache.offsets[g])return E.projectionCache.offsets[g];const D=r.add(e);if(g+A.direction<a||g+A.direction>=d)return E.projectionCache.offsets[g]=D,D;const N=Vn(g+A.direction,E,A),G=Ys(N.sub(r),w,A.direction),Z=r.add(G),X=N.add(G);return E.projectionCache.offsets[g]=u.au(y,D,Z,X)||D,E.projectionCache.offsets[g]}function Ps(g,e,r,a,d,y,w,E,A){const D=a?g-e:g+e;let N=D>0?1:-1,G=0;a&&(N*=-1,G=Math.PI),N<0&&(G+=Math.PI);let Z,X=N>0?y+d:y+d+1;E.projectionCache.cachedAnchorPoint?Z=E.projectionCache.cachedAnchorPoint:(Z=Zn(E.tileAnchorPoint.x,E.tileAnchorPoint.y,E).point,E.projectionCache.cachedAnchorPoint=Z);let ne,be,_e=Z,Se=Z,ke=0,Le=0;const Me=Math.abs(D),De=[];let Ne;for(;ke+Le<=Me;){if(X+=N,X<y||X>=w)return null;ke+=Le,Se=_e,be=ne;const It={absOffsetX:Me,direction:N,distanceFromAnchor:ke,previousVertex:Se};if(_e=Vn(X,E,It),r===0)De.push(Se),Ne=_e.sub(Se);else{let Ye;const ht=_e.sub(Se);Ye=ht.mag()===0?Ys(Vn(X+N,E,It).sub(_e),r,N):Ys(ht,r,N),be||(be=Se.add(Ye)),ne=Qs(X,Ye,_e,y,w,be,r,E,It),De.push(be),Ne=ne.sub(be)}Le=Ne.mag()}const je=Ne._mult((Me-ke)/Le)._add(be||Se),at=G+Math.atan2(_e.y-Se.y,_e.x-Se.x);return De.push(je),{point:je,angle:A?at:0,path:De}}const el=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Zo(g,e){for(let r=0;r<g;r++){const a=e.length;e.resize(a+4),e.float32.set(el,3*a)}}function La(g,e,r){const a=e[0],d=e[1];return g[0]=r[0]*a+r[4]*d+r[12],g[1]=r[1]*a+r[5]*d+r[13],g[3]=r[3]*a+r[7]*d+r[15],g}const cn=100;class li{constructor(e,r=new cr(e.width+200,e.height+200,25),a=new cr(e.width+200,e.height+200,25)){this.transform=e,this.grid=r,this.ignoredGrid=a,this.pitchFactor=Math.cos(e.pitch*Math.PI/180)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+cn,this.screenBottomBoundary=e.height+cn,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(e,r,a,d,y,w,E,A,D,N,G,Z){const X=this.projectAndGetPerspectiveRatio(e.anchorPointX+A[0],e.anchorPointY+A[1],y,N,Z),ne=a*X.perspectiveRatio;let be;if(w||E)be=this._projectCollisionBox(e,ne,d,y,w,E,A,X,N,G,Z);else{const Ne=X.x+(G?G.x*ne:0),je=X.y+(G?G.y*ne:0);be={allPointsOccluded:!1,box:[Ne+e.x1*ne,je+e.y1*ne,Ne+e.x2*ne,je+e.y2*ne]}}const[_e,Se,ke,Le]=be.box,Me=w?be.allPointsOccluded:X.isOccluded;let De=Me;return De||(De=X.perspectiveRatio<this.perspectiveRatioCutoff),De||(De=!this.isInsideGrid(_e,Se,ke,Le)),De||r!=="always"&&this.grid.hitTest(_e,Se,ke,Le,r,D)?{box:[_e,Se,ke,Le],placeable:!1,offscreen:!1,occluded:Me}:{box:[_e,Se,ke,Le],placeable:!0,offscreen:this.isOffscreen(_e,Se,ke,Le),occluded:Me}}placeCollisionCircles(e,r,a,d,y,w,E,A,D,N,G,Z,X,ne){const be=[],_e=new u.P(r.anchorX,r.anchorY),Se=this.getPerspectiveRatio(_e.x,_e.y,w,ne),ke=(D?y*this.transform.getPitchedTextCorrection(r.anchorX,r.anchorY,w)/Se:y*Se)/u.ay,Le={getElevation:ne,pitchedLabelPlaneMatrix:E,lineVertexArray:a,pitchWithMap:D,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:_e,unwrappedTileID:w,width:this.transform.width,height:this.transform.height,translation:X},Me=Fr(ke,d,r.lineOffsetX*ke,r.lineOffsetY*ke,!1,r,!1,Le);let De=!1,Ne=!1,je=!0;if(Me){const at=.5*G*Se+Z,It=new u.P(-100,-100),Ye=new u.P(this.screenRightBoundary,this.screenBottomBoundary),ht=new Lt,Ct=Me.first,Jt=Me.last;let er=[];for(let Zr=Ct.path.length-1;Zr>=1;Zr--)er.push(Ct.path[Zr]);for(let Zr=1;Zr<Jt.path.length;Zr++)er.push(Jt.path[Zr]);const Ft=2.5*at;if(D){const Zr=this.projectPathToScreenSpace(er,Le);er=Zr.some(En=>En.signedDistanceFromCamera<=0)?[]:Zr.map(En=>En.point)}let vr=[];if(er.length>0){const Zr=er[0].clone(),En=er[0].clone();for(let pi=1;pi<er.length;pi++)Zr.x=Math.min(Zr.x,er[pi].x),Zr.y=Math.min(Zr.y,er[pi].y),En.x=Math.max(En.x,er[pi].x),En.y=Math.max(En.y,er[pi].y);vr=Zr.x>=It.x&&En.x<=Ye.x&&Zr.y>=It.y&&En.y<=Ye.y?[er]:En.x<It.x||Zr.x>Ye.x||En.y<It.y||Zr.y>Ye.y?[]:u.av([er],It.x,It.y,Ye.x,Ye.y)}for(const Zr of vr){ht.reset(Zr,.25*at);let En=0;En=ht.length<=.5*at?1:Math.ceil(ht.paddedLength/Ft)+1;for(let pi=0;pi<En;pi++){const ri=pi/Math.max(En-1,1),Mi=ht.lerp(ri),ki=Mi.x+cn,In=Mi.y+cn;be.push(ki,In,at,0);const Cn=ki-at,Hi=In-at,vo=ki+at,ao=In+at;if(je=je&&this.isOffscreen(Cn,Hi,vo,ao),Ne=Ne||this.isInsideGrid(Cn,Hi,vo,ao),e!=="always"&&this.grid.hitTestCircle(ki,In,at,e,N)&&(De=!0,!A))return{circles:[],offscreen:!1,collisionDetected:De}}}}return{circles:!A&&De||!Ne||Se<this.perspectiveRatioCutoff?[]:be,offscreen:je,collisionDetected:De}}projectPathToScreenSpace(e,r){const a=function(d,y){const w=u.K();return u.an(w,y.pitchedLabelPlaneMatrix),d.map(E=>{const A=St(E.x,E.y,w,y.getElevation),D=y.transform.projectTileCoordinates(A.point.x,A.point.y,y.unwrappedTileID,y.getElevation);return D.point.x=(.5*D.point.x+.5)*y.width,D.point.y=(.5*-D.point.y+.5)*y.height,D})}(e,r);return function(d){let y=0,w=0,E=0,A=0;for(let D=0;D<d.length;D++)d[D].isOccluded?(E=D+1,A=0):(A++,A>w&&(w=A,y=E));return d.slice(y,y+w)}(a)}queryRenderedSymbols(e){if(e.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const r=[];let a=1/0,d=1/0,y=-1/0,w=-1/0;for(const N of e){const G=new u.P(N.x+cn,N.y+cn);a=Math.min(a,G.x),d=Math.min(d,G.y),y=Math.max(y,G.x),w=Math.max(w,G.y),r.push(G)}const E=this.grid.query(a,d,y,w).concat(this.ignoredGrid.query(a,d,y,w)),A={},D={};for(const N of E){const G=N.key;if(A[G.bucketInstanceId]===void 0&&(A[G.bucketInstanceId]={}),A[G.bucketInstanceId][G.featureIndex])continue;const Z=[new u.P(N.x1,N.y1),new u.P(N.x2,N.y1),new u.P(N.x2,N.y2),new u.P(N.x1,N.y2)];u.aw(r,Z)&&(A[G.bucketInstanceId][G.featureIndex]=!0,D[G.bucketInstanceId]===void 0&&(D[G.bucketInstanceId]=[]),D[G.bucketInstanceId].push(G.featureIndex))}return D}insertCollisionBox(e,r,a,d,y,w){(a?this.ignoredGrid:this.grid).insert({bucketInstanceId:d,featureIndex:y,collisionGroupID:w,overlapMode:r},e[0],e[1],e[2],e[3])}insertCollisionCircles(e,r,a,d,y,w){const E=a?this.ignoredGrid:this.grid,A={bucketInstanceId:d,featureIndex:y,collisionGroupID:w,overlapMode:r};for(let D=0;D<e.length;D+=4)E.insertCircle(A,e[D],e[D+1],e[D+2])}projectAndGetPerspectiveRatio(e,r,a,d,y){if(y){let w;d?(w=[e,r,d(e,r),1],u.at(w,w,y)):(w=[e,r,0,1],La(w,w,y));const E=w[3];return{x:(w[0]/E+1)/2*this.transform.width+cn,y:(-w[1]/E+1)/2*this.transform.height+cn,perspectiveRatio:.5+this.transform.cameraToCenterDistance/E*.5,isOccluded:!1,signedDistanceFromCamera:E}}{const w=this.transform.projectTileCoordinates(e,r,a,d);return{x:(w.point.x+1)/2*this.transform.width+cn,y:(1-w.point.y)/2*this.transform.height+cn,perspectiveRatio:.5+this.transform.cameraToCenterDistance/w.signedDistanceFromCamera*.5,isOccluded:w.isOccluded,signedDistanceFromCamera:w.signedDistanceFromCamera}}}getPerspectiveRatio(e,r,a,d){const y=this.transform.projectTileCoordinates(e,r,a,d);return .5+this.transform.cameraToCenterDistance/y.signedDistanceFromCamera*.5}isOffscreen(e,r,a,d){return a<cn||e>=this.screenRightBoundary||d<cn||r>this.screenBottomBoundary}isInsideGrid(e,r,a,d){return a>=0&&e<this.gridRightBoundary&&d>=0&&r<this.gridBottomBoundary}getViewportMatrix(){const e=u.ad([]);return u.L(e,e,[-100,-100,0]),e}_projectCollisionBox(e,r,a,d,y,w,E,A,D,N,G){let Z=1,X=0,ne=0,be=1;const _e=e.anchorPointX+E[0],Se=e.anchorPointY+E[1];if(w&&!y){const er=this.projectAndGetPerspectiveRatio(_e+1,Se,d,D,G),Ft=er.x-A.x,vr=Math.atan((er.y-A.y)/Ft)+(Ft<0?Math.PI:0),Zr=Math.sin(vr),En=Math.cos(vr);Z=En,X=Zr,ne=-Zr,be=En}else if(!w&&y){const er=Nr(this.transform);Z=er.vecEast[0],X=er.vecEast[1],ne=er.vecSouth[0],be=er.vecSouth[1]}let ke=A.x,Le=A.y,Me=r;y&&(ke=_e,Le=Se,Me=Math.pow(2,-(this.transform.zoom-a.overscaledZ)),Me*=this.transform.getPitchedTextCorrection(_e,Se,d),N||(Me*=u.ae(.5+A.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),N&&(ke+=Z*N.x*Me+ne*N.y*Me,Le+=X*N.x*Me+be*N.y*Me);const De=e.x1*Me,Ne=e.x2*Me,je=(De+Ne)/2,at=e.y1*Me,It=e.y2*Me,Ye=(at+It)/2,ht=[{offsetX:De,offsetY:at},{offsetX:je,offsetY:at},{offsetX:Ne,offsetY:at},{offsetX:Ne,offsetY:Ye},{offsetX:Ne,offsetY:It},{offsetX:je,offsetY:It},{offsetX:De,offsetY:It},{offsetX:De,offsetY:Ye}];let Ct=[];for(const{offsetX:er,offsetY:Ft}of ht)Ct.push(new u.P(ke+Z*er+ne*Ft,Le+X*er+be*Ft));let Jt=!1;if(y){const er=Ct.map(Ft=>this.projectAndGetPerspectiveRatio(Ft.x,Ft.y,d,D,G));Jt=er.some(Ft=>!Ft.isOccluded),Ct=er.map(Ft=>new u.P(Ft.x,Ft.y))}else Jt=!0;return{box:u.ax(Ct),allPointsOccluded:!Jt}}}class qn{constructor(e,r,a,d){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?r:-r))):d&&a?1:0,this.placed=a}isHidden(){return this.opacity===0&&!this.placed}}class Da{constructor(e,r,a,d,y){this.text=new qn(e?e.text:null,r,a,y),this.icon=new qn(e?e.icon:null,r,d,y)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class is{constructor(e,r,a){this.text=e,this.icon=r,this.skipFade=a}}class Kl{constructor(e,r,a,d,y){this.bucketInstanceId=e,this.featureIndex=r,this.sourceLayerIndex=a,this.bucketIndex=d,this.tileID=y}}class Do{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}get(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){const r=++this.maxGroupID;this.collisionGroups[e]={ID:r,predicate:a=>a.collisionGroupID===r}}return this.collisionGroups[e]}}function eo(g,e,r,a,d){const{horizontalAlign:y,verticalAlign:w}=u.aE(g);return new u.P(-(y-.5)*e+a[0]*d,-(w-.5)*r+a[1]*d)}class os{constructor(e,r,a,d,y){this.transform=e.clone(),this.terrain=r,this.collisionIndex=new li(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=a,this.retainedQueryData={},this.collisionGroups=new Do(d),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=y,y&&(y.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(e){const r=this.terrain;return r?(a,d)=>r.getElevation(e,a,d):null}getBucketParts(e,r,a,d){const y=a.getBucket(r),w=a.latestFeatureIndex;if(!y||!w||r.id!==y.layerIds[0])return;const E=a.collisionBoxArray,A=y.layers[0].layout,D=y.layers[0].paint,N=Math.pow(2,this.transform.zoom-a.tileID.overscaledZ),G=a.tileSize/u.Z,Z=a.tileID.toUnwrapped(),X=A.get("text-rotation-alignment")==="map",ne=u.az(a,1,this.transform.zoom),be=u.aA(this.collisionIndex.transform,a,D.get("text-translate"),D.get("text-translate-anchor")),_e=u.aA(this.collisionIndex.transform,a,D.get("icon-translate"),D.get("icon-translate-anchor")),Se=Mr(X,this.transform,ne);this.retainedQueryData[y.bucketInstanceId]=new Kl(y.bucketInstanceId,w,y.sourceLayerIndex,y.index,a.tileID);const ke={bucket:y,layout:A,translationText:be,translationIcon:_e,unwrappedTileID:Z,pitchedLabelPlaneMatrix:Se,scale:N,textPixelRatio:G,holdingForFade:a.holdingForFade(),collisionBoxArray:E,partiallyEvaluatedTextSize:u.ak(y.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(y.sourceID)};if(d)for(const Le of y.sortKeyRanges){const{sortKey:Me,symbolInstanceStart:De,symbolInstanceEnd:Ne}=Le;e.push({sortKey:Me,symbolInstanceStart:De,symbolInstanceEnd:Ne,parameters:ke})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:y.symbolInstances.length,parameters:ke})}attemptAnchorPlacement(e,r,a,d,y,w,E,A,D,N,G,Z,X,ne,be,_e,Se,ke,Le,Me){const De=u.aB[e.textAnchor],Ne=[e.textOffset0,e.textOffset1],je=eo(De,a,d,Ne,y),at=this.collisionIndex.placeCollisionBox(r,Z,A,D,N,E,w,_e,G.predicate,Le,je,Me);if((!ke||this.collisionIndex.placeCollisionBox(ke,Z,A,D,N,E,w,Se,G.predicate,Le,je,Me).placeable)&&at.placeable){let It;if(this.prevPlacement&&this.prevPlacement.variableOffsets[X.crossTileID]&&this.prevPlacement.placements[X.crossTileID]&&this.prevPlacement.placements[X.crossTileID].text&&(It=this.prevPlacement.variableOffsets[X.crossTileID].anchor),X.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[X.crossTileID]={textOffset:Ne,width:a,height:d,anchor:De,textBoxScale:y,prevAnchor:It},this.markUsedJustification(ne,De,X,be),ne.allowVerticalPlacement&&(this.markUsedOrientation(ne,be,X),this.placedOrientations[X.crossTileID]=be),{shift:je,placedGlyphBoxes:at}}}placeLayerBucketPart(e,r,a){const{bucket:d,layout:y,translationText:w,translationIcon:E,unwrappedTileID:A,pitchedLabelPlaneMatrix:D,textPixelRatio:N,holdingForFade:G,collisionBoxArray:Z,partiallyEvaluatedTextSize:X,collisionGroup:ne}=e.parameters,be=y.get("text-optional"),_e=y.get("icon-optional"),Se=u.aC(y,"text-overlap","text-allow-overlap"),ke=Se==="always",Le=u.aC(y,"icon-overlap","icon-allow-overlap"),Me=Le==="always",De=y.get("text-rotation-alignment")==="map",Ne=y.get("text-pitch-alignment")==="map",je=y.get("icon-text-fit")!=="none",at=y.get("symbol-z-order")==="viewport-y",It=ke&&(Me||!d.hasIconData()||_e),Ye=Me&&(ke||!d.hasTextData()||be);!d.collisionArrays&&Z&&d.deserializeCollisionBoxes(Z);const ht=this.retainedQueryData[d.bucketInstanceId].tileID,Ct=this._getTerrainElevationFunc(ht),Jt=this.transform.getFastPathSimpleProjectionMatrix(ht),er=(Ft,vr,Zr)=>{var En,pi;if(r[Ft.crossTileID])return;if(G)return void(this.placements[Ft.crossTileID]=new is(!1,!1,!1));let ri=!1,Mi=!1,ki=!0,In=null,Cn={box:null,placeable:!1,offscreen:null,occluded:!1},Hi={placeable:!1},vo=null,ao=null,An=null,_l=0,la=0,Ca=0;vr.textFeatureIndex?_l=vr.textFeatureIndex:Ft.useRuntimeCollisionCircles&&(_l=Ft.featureIndex),vr.verticalTextFeatureIndex&&(la=vr.verticalTextFeatureIndex);const jl=vr.textBox;if(jl){const js=lo=>{let uo=u.al.horizontal;if(d.allowVerticalPlacement&&!lo&&this.prevPlacement){const gs=this.prevPlacement.placedOrientations[Ft.crossTileID];gs&&(this.placedOrientations[Ft.crossTileID]=gs,uo=gs,this.markUsedOrientation(d,uo,Ft))}return uo},Ul=(lo,uo)=>{if(d.allowVerticalPlacement&&Ft.numVerticalGlyphVertices>0&&vr.verticalTextBox){for(const gs of d.writingModes)if(gs===u.al.vertical?(Cn=uo(),Hi=Cn):Cn=lo(),Cn&&Cn.placeable)break}else Cn=lo()},Pa=Ft.textAnchorOffsetStartIndex,ou=Ft.textAnchorOffsetEndIndex;if(ou===Pa){const lo=(uo,gs)=>{const xi=this.collisionIndex.placeCollisionBox(uo,Se,N,ht,A,Ne,De,w,ne.predicate,Ct,void 0,Jt);return xi&&xi.placeable&&(this.markUsedOrientation(d,gs,Ft),this.placedOrientations[Ft.crossTileID]=gs),xi};Ul(()=>lo(jl,u.al.horizontal),()=>{const uo=vr.verticalTextBox;return d.allowVerticalPlacement&&Ft.numVerticalGlyphVertices>0&&uo?lo(uo,u.al.vertical):{box:null,offscreen:null}}),js(Cn&&Cn.placeable)}else{let lo=u.aB[(pi=(En=this.prevPlacement)===null||En===void 0?void 0:En.variableOffsets[Ft.crossTileID])===null||pi===void 0?void 0:pi.anchor];const uo=(xi,Xh,zd)=>{const Yh=xi.x2-xi.x1,Us=xi.y2-xi.y1,Ea=Ft.textBoxScale,zu=je&&Le==="never"?Xh:null;let Ha=null,Ia=Se==="never"?1:2,Yo="never";lo&&Ia++;for(let xo=0;xo<Ia;xo++){for(let cc=Pa;cc<ou;cc++){const vl=d.textAnchorOffsets.get(cc);if(lo&&vl.textAnchor!==lo)continue;const _h=this.attemptAnchorPlacement(vl,xi,Yh,Us,Ea,De,Ne,N,ht,A,ne,Yo,Ft,d,zd,w,E,zu,Ct);if(_h&&(Ha=_h.placedGlyphBoxes,Ha&&Ha.placeable))return ri=!0,In=_h.shift,Ha}lo?lo=null:Yo=Se}return a&&!Ha&&(Ha={box:this.collisionIndex.placeCollisionBox(jl,"always",N,ht,A,Ne,De,w,ne.predicate,Ct,void 0,Jt).box,offscreen:!1,placeable:!1,occluded:!1}),Ha};Ul(()=>uo(jl,vr.iconBox,u.al.horizontal),()=>{const xi=vr.verticalTextBox;return d.allowVerticalPlacement&&(!Cn||!Cn.placeable)&&Ft.numVerticalGlyphVertices>0&&xi?uo(xi,vr.verticalIconBox,u.al.vertical):{box:null,occluded:!0,offscreen:null}}),Cn&&(ri=Cn.placeable,ki=Cn.offscreen);const gs=js(Cn&&Cn.placeable);if(!ri&&this.prevPlacement){const xi=this.prevPlacement.variableOffsets[Ft.crossTileID];xi&&(this.variableOffsets[Ft.crossTileID]=xi,this.markUsedJustification(d,xi.anchor,Ft,gs))}}}if(vo=Cn,ri=vo&&vo.placeable,ki=vo&&vo.offscreen,Ft.useRuntimeCollisionCircles){const js=d.text.placedSymbolArray.get(Ft.centerJustifiedTextSymbolIndex),Ul=u.am(d.textSizeData,X,js),Pa=y.get("text-padding");ao=this.collisionIndex.placeCollisionCircles(Se,js,d.lineVertexArray,d.glyphOffsetArray,Ul,A,D,a,Ne,ne.predicate,Ft.collisionCircleDiameter,Pa,w,Ct),ao.circles.length&&ao.collisionDetected&&!a&&u.w("Collisions detected, but collision boxes are not shown"),ri=ke||ao.circles.length>0&&!ao.collisionDetected,ki=ki&&ao.offscreen}if(vr.iconFeatureIndex&&(Ca=vr.iconFeatureIndex),vr.iconBox){const js=Ul=>this.collisionIndex.placeCollisionBox(Ul,Le,N,ht,A,Ne,De,E,ne.predicate,Ct,je&&In?In:void 0,Jt);Hi&&Hi.placeable&&vr.verticalIconBox?(An=js(vr.verticalIconBox),Mi=An.placeable):(An=js(vr.iconBox),Mi=An.placeable),ki=ki&&An.offscreen}const ua=be||Ft.numHorizontalGlyphVertices===0&&Ft.numVerticalGlyphVertices===0,iu=_e||Ft.numIconVertices===0;ua||iu?iu?ua||(Mi=Mi&&ri):ri=Mi&&ri:Mi=ri=Mi&&ri;const $s=Mi&&An.placeable;if(ri&&vo.placeable&&this.collisionIndex.insertCollisionBox(vo.box,Se,y.get("text-ignore-placement"),d.bucketInstanceId,Hi&&Hi.placeable&&la?la:_l,ne.ID),$s&&this.collisionIndex.insertCollisionBox(An.box,Le,y.get("icon-ignore-placement"),d.bucketInstanceId,Ca,ne.ID),ao&&ri&&this.collisionIndex.insertCollisionCircles(ao.circles,Se,y.get("text-ignore-placement"),d.bucketInstanceId,_l,ne.ID),a&&this.storeCollisionData(d.bucketInstanceId,Zr,vr,vo,An,ao),Ft.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(d.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Ft.crossTileID]=new is((ri||It)&&!(vo!=null&&vo.occluded),(Mi||Ye)&&!(An!=null&&An.occluded),ki||d.justReloaded),r[Ft.crossTileID]=!0};if(at){if(e.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Ft=d.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let vr=Ft.length-1;vr>=0;--vr){const Zr=Ft[vr];er(d.symbolInstances.get(Zr),d.collisionArrays[Zr],Zr)}}else for(let Ft=e.symbolInstanceStart;Ft<e.symbolInstanceEnd;Ft++)er(d.symbolInstances.get(Ft),d.collisionArrays[Ft],Ft);d.justReloaded=!1}storeCollisionData(e,r,a,d,y,w){if(a.textBox||a.iconBox){let E,A;this.collisionBoxArrays.has(e)?E=this.collisionBoxArrays.get(e):(E=new Map,this.collisionBoxArrays.set(e,E)),E.has(r)?A=E.get(r):(A={text:null,icon:null},E.set(r,A)),a.textBox&&(A.text=d.box),a.iconBox&&(A.icon=y.box)}if(w){let E=this.collisionCircleArrays[e];E===void 0&&(E=this.collisionCircleArrays[e]=[]);for(let A=0;A<w.circles.length;A+=4)E.push(w.circles[A+0]-cn),E.push(w.circles[A+1]-cn),E.push(w.circles[A+2]),E.push(w.collisionDetected?1:0)}}markUsedJustification(e,r,a,d){let y;y=d===u.al.vertical?a.verticalPlacedTextSymbolIndex:{left:a.leftJustifiedTextSymbolIndex,center:a.centerJustifiedTextSymbolIndex,right:a.rightJustifiedTextSymbolIndex}[u.aD(r)];const w=[a.leftJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.rightJustifiedTextSymbolIndex,a.verticalPlacedTextSymbolIndex];for(const E of w)E>=0&&(e.text.placedSymbolArray.get(E).crossTileID=y>=0&&E!==y?0:a.crossTileID)}markUsedOrientation(e,r,a){const d=r===u.al.horizontal||r===u.al.horizontalOnly?r:0,y=r===u.al.vertical?r:0,w=[a.leftJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.rightJustifiedTextSymbolIndex];for(const E of w)e.text.placedSymbolArray.get(E).placedOrientation=d;a.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(a.verticalPlacedTextSymbolIndex).placedOrientation=y)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;const r=this.prevPlacement;let a=!1;this.prevZoomAdjustment=r?r.zoomAdjustment(this.transform.zoom):0;const d=r?r.symbolFadeChange(e):1,y=r?r.opacities:{},w=r?r.variableOffsets:{},E=r?r.placedOrientations:{};for(const A in this.placements){const D=this.placements[A],N=y[A];N?(this.opacities[A]=new Da(N,d,D.text,D.icon),a=a||D.text!==N.text.placed||D.icon!==N.icon.placed):(this.opacities[A]=new Da(null,d,D.text,D.icon,D.skipFade),a=a||D.text||D.icon)}for(const A in y){const D=y[A];if(!this.opacities[A]){const N=new Da(D,d,!1,!1);N.isHidden()||(this.opacities[A]=N,a=a||D.text.placed||D.icon.placed)}}for(const A in w)this.variableOffsets[A]||!this.opacities[A]||this.opacities[A].isHidden()||(this.variableOffsets[A]=w[A]);for(const A in E)this.placedOrientations[A]||!this.opacities[A]||this.opacities[A].isHidden()||(this.placedOrientations[A]=E[A]);if(r&&r.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");a?this.lastPlacementChangeTime=e:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=r?r.lastPlacementChangeTime:e)}updateLayerOpacities(e,r){const a={};for(const d of r){const y=d.getBucket(e);y&&d.latestFeatureIndex&&e.id===y.layerIds[0]&&this.updateBucketOpacities(y,d.tileID,a,d.collisionBoxArray)}}updateBucketOpacities(e,r,a,d){e.hasTextData()&&(e.text.opacityVertexArray.clear(),e.text.hasVisibleVertices=!1),e.hasIconData()&&(e.icon.opacityVertexArray.clear(),e.icon.hasVisibleVertices=!1),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();const y=e.layers[0],w=y.layout,E=new Da(null,0,!1,!1,!0),A=w.get("text-allow-overlap"),D=w.get("icon-allow-overlap"),N=y._unevaluatedLayout.hasValue("text-variable-anchor")||y._unevaluatedLayout.hasValue("text-variable-anchor-offset"),G=w.get("text-rotation-alignment")==="map",Z=w.get("text-pitch-alignment")==="map",X=w.get("icon-text-fit")!=="none",ne=new Da(null,0,A&&(D||!e.hasIconData()||w.get("icon-optional")),D&&(A||!e.hasTextData()||w.get("text-optional")),!0);!e.collisionArrays&&d&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(d);const be=(Se,ke,Le)=>{for(let Me=0;Me<ke/4;Me++)Se.opacityVertexArray.emplaceBack(Le);Se.hasVisibleVertices=Se.hasVisibleVertices||Le!==B},_e=this.collisionBoxArrays.get(e.bucketInstanceId);for(let Se=0;Se<e.symbolInstances.length;Se++){const ke=e.symbolInstances.get(Se),{numHorizontalGlyphVertices:Le,numVerticalGlyphVertices:Me,crossTileID:De}=ke;let Ne=this.opacities[De];a[De]?Ne=E:Ne||(Ne=ne,this.opacities[De]=Ne),a[De]=!0;const je=ke.numIconVertices>0,at=this.placedOrientations[ke.crossTileID],It=at===u.al.vertical,Ye=at===u.al.horizontal||at===u.al.horizontalOnly;if(Le>0||Me>0){const Ct=Es(Ne.text);be(e.text,Le,It?B:Ct),be(e.text,Me,Ye?B:Ct);const Jt=Ne.text.isHidden();[ke.rightJustifiedTextSymbolIndex,ke.centerJustifiedTextSymbolIndex,ke.leftJustifiedTextSymbolIndex].forEach(vr=>{vr>=0&&(e.text.placedSymbolArray.get(vr).hidden=Jt||It?1:0)}),ke.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(ke.verticalPlacedTextSymbolIndex).hidden=Jt||Ye?1:0);const er=this.variableOffsets[ke.crossTileID];er&&this.markUsedJustification(e,er.anchor,ke,at);const Ft=this.placedOrientations[ke.crossTileID];Ft&&(this.markUsedJustification(e,"left",ke,Ft),this.markUsedOrientation(e,Ft,ke))}if(je){const Ct=Es(Ne.icon),Jt=!(X&&ke.verticalPlacedIconSymbolIndex&&It);ke.placedIconSymbolIndex>=0&&(be(e.icon,ke.numIconVertices,Jt?Ct:B),e.icon.placedSymbolArray.get(ke.placedIconSymbolIndex).hidden=Ne.icon.isHidden()),ke.verticalPlacedIconSymbolIndex>=0&&(be(e.icon,ke.numVerticalIconVertices,Jt?B:Ct),e.icon.placedSymbolArray.get(ke.verticalPlacedIconSymbolIndex).hidden=Ne.icon.isHidden())}const ht=_e&&_e.has(Se)?_e.get(Se):{text:null,icon:null};if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){const Ct=e.collisionArrays[Se];if(Ct){let Jt=new u.P(0,0);if(Ct.textBox||Ct.verticalTextBox){let er=!0;if(N){const Ft=this.variableOffsets[De];Ft?(Jt=eo(Ft.anchor,Ft.width,Ft.height,Ft.textOffset,Ft.textBoxScale),G&&Jt._rotate(Z?-this.transform.bearingInRadians:this.transform.bearingInRadians)):er=!1}if(Ct.textBox||Ct.verticalTextBox){let Ft;Ct.textBox&&(Ft=It),Ct.verticalTextBox&&(Ft=Ye),tl(e.textCollisionBox.collisionVertexArray,Ne.text.placed,!er||Ft,ht.text,Jt.x,Jt.y)}}if(Ct.iconBox||Ct.verticalIconBox){const er=!!(!Ye&&Ct.verticalIconBox);let Ft;Ct.iconBox&&(Ft=er),Ct.verticalIconBox&&(Ft=!er),tl(e.iconCollisionBox.collisionVertexArray,Ne.icon.placed,Ft,ht.icon,X?Jt.x:0,X?Jt.y:0)}}}}if(e.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.text.opacityVertexArray.length!==e.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${e.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${e.text.layoutVertexArray.length}) / 4`);if(e.icon.opacityVertexArray.length!==e.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${e.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${e.icon.layoutVertexArray.length}) / 4`);e.bucketInstanceId in this.collisionCircleArrays&&(e.collisionCircleArray=this.collisionCircleArrays[e.bucketInstanceId],delete this.collisionCircleArrays[e.bucketInstanceId])}symbolFadeChange(e){return this.fadeDuration===0?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,r){const a=this.zoomAtLastRecencyCheck===r?1-this.zoomAdjustment(r):1;return this.zoomAtLastRecencyCheck=r,this.commitTime+this.fadeDuration*a>e}setStale(){this.stale=!0}}function tl(g,e,r,a,d,y){a&&a.length!==0||(a=[0,0,0,0]);const w=a[0]-cn,E=a[1]-cn,A=a[2]-cn,D=a[3]-cn;g.emplaceBack(e?1:0,r?1:0,d||0,y||0,w,E),g.emplaceBack(e?1:0,r?1:0,d||0,y||0,A,E),g.emplaceBack(e?1:0,r?1:0,d||0,y||0,A,D),g.emplaceBack(e?1:0,r?1:0,d||0,y||0,w,D)}const go=Math.pow(2,25),ga=Math.pow(2,24),Xl=Math.pow(2,17),pu=Math.pow(2,16),ya=Math.pow(2,9),Yl=Math.pow(2,8),Oa=Math.pow(2,1);function Es(g){if(g.opacity===0&&!g.placed)return 0;if(g.opacity===1&&g.placed)return 4294967295;const e=g.placed?1:0,r=Math.floor(127*g.opacity);return r*go+e*ga+r*Xl+e*pu+r*ya+e*Yl+r*Oa+e}const B=0;class Q{constructor(e){this._sortAcrossTiles=e.layout.get("symbol-z-order")!=="viewport-y"&&!e.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(e,r,a,d,y){const w=this._bucketParts;for(;this._currentTileIndex<e.length;)if(r.getBucketParts(w,d,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,y())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,w.sort((E,A)=>E.sortKey-A.sortKey));this._currentPartIndex<w.length;)if(r.placeLayerBucketPart(w[this._currentPartIndex],this._seenCrossTileIDs,a),this._currentPartIndex++,y())return!0;return!1}}class he{constructor(e,r,a,d,y,w,E,A){this.placement=new os(e,r,w,E,A),this._currentPlacementIndex=a.length-1,this._forceFullPlacement=d,this._showCollisionBoxes=y,this._done=!1}isDone(){return this._done}continuePlacement(e,r,a){const d=Te.now(),y=()=>!this._forceFullPlacement&&Te.now()-d>2;for(;this._currentPlacementIndex>=0;){const w=r[e[this._currentPlacementIndex]],E=this.placement.collisionIndex.transform.zoom;if(w.type==="symbol"&&(!w.minzoom||w.minzoom<=E)&&(!w.maxzoom||w.maxzoom>E)){if(this._inProgressLayer||(this._inProgressLayer=new Q(w)),this._inProgressLayer.continuePlacement(a[w.source],this.placement,this._showCollisionBoxes,w,y))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(e){return this.placement.commit(e),this.placement}}const Ee=512/u.Z/2;class gt{constructor(e,r,a){this.tileID=e,this.bucketInstanceId=a,this._symbolsByKey={};const d=new Map;for(let y=0;y<r.length;y++){const w=r.get(y),E=w.key,A=d.get(E);A?A.push(w):d.set(E,[w])}for(const[y,w]of d){const E={positions:w.map(A=>({x:Math.floor(A.anchorX*Ee),y:Math.floor(A.anchorY*Ee)})),crossTileIDs:w.map(A=>A.crossTileID)};if(E.positions.length>128){const A=new u.aF(E.positions.length,16,Uint16Array);for(const{x:D,y:N}of E.positions)A.add(D,N);A.finish(),delete E.positions,E.index=A}this._symbolsByKey[y]=E}}getScaledCoordinates(e,r){const{x:a,y:d,z:y}=this.tileID.canonical,{x:w,y:E,z:A}=r.canonical,D=Ee/Math.pow(2,A-y),N=(E*u.Z+e.anchorY)*D,G=d*u.Z*Ee;return{x:Math.floor((w*u.Z+e.anchorX)*D-a*u.Z*Ee),y:Math.floor(N-G)}}findMatches(e,r,a){const d=this.tileID.canonical.z<r.canonical.z?1:Math.pow(2,this.tileID.canonical.z-r.canonical.z);for(let y=0;y<e.length;y++){const w=e.get(y);if(w.crossTileID)continue;const E=this._symbolsByKey[w.key];if(!E)continue;const A=this.getScaledCoordinates(w,r);if(E.index){const D=E.index.range(A.x-d,A.y-d,A.x+d,A.y+d).sort();for(const N of D){const G=E.crossTileIDs[N];if(!a[G]){a[G]=!0,w.crossTileID=G;break}}}else if(E.positions)for(let D=0;D<E.positions.length;D++){const N=E.positions[D],G=E.crossTileIDs[D];if(Math.abs(N.x-A.x)<=d&&Math.abs(N.y-A.y)<=d&&!a[G]){a[G]=!0,w.crossTileID=G;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:e})=>e)}}class ut{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Dt{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(e){const r=Math.round((e-this.lng)/360);if(r!==0)for(const a in this.indexes){const d=this.indexes[a],y={};for(const w in d){const E=d[w];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+r),y[E.tileID.key]=E}this.indexes[a]=y}this.lng=e}addBucket(e,r,a){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===r.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(let y=0;y<r.symbolInstances.length;y++)r.symbolInstances.get(y).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});const d=this.usedCrossTileIDs[e.overscaledZ];for(const y in this.indexes){const w=this.indexes[y];if(Number(y)>e.overscaledZ)for(const E in w){const A=w[E];A.tileID.isChildOf(e)&&A.findMatches(r.symbolInstances,e,d)}else{const E=w[e.scaledTo(Number(y)).key];E&&E.findMatches(r.symbolInstances,e,d)}}for(let y=0;y<r.symbolInstances.length;y++){const w=r.symbolInstances.get(y);w.crossTileID||(w.crossTileID=a.generate(),d[w.crossTileID]=!0)}return this.indexes[e.overscaledZ]===void 0&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new gt(e,r.symbolInstances,r.bucketInstanceId),!0}removeBucketCrossTileIDs(e,r){for(const a of r.getCrossTileIDsLists())for(const d of a)delete this.usedCrossTileIDs[e][d]}removeStaleBuckets(e){let r=!1;for(const a in this.indexes){const d=this.indexes[a];for(const y in d)e[d[y].bucketInstanceId]||(this.removeBucketCrossTileIDs(a,d[y]),delete d[y],r=!0)}return r}}class sr{constructor(){this.layerIndexes={},this.crossTileIDs=new ut,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(e,r,a){let d=this.layerIndexes[e.id];d===void 0&&(d=this.layerIndexes[e.id]=new Dt);let y=!1;const w={};d.handleWrapJump(a);for(const E of r){const A=E.getBucket(e);A&&e.id===A.layerIds[0]&&(A.bucketInstanceId||(A.bucketInstanceId=++this.maxBucketInstanceId),d.addBucket(E.tileID,A,this.crossTileIDs)&&(y=!0),w[A.bucketInstanceId]=!0)}return d.removeStaleBuckets(w)&&(y=!0),y}pruneUnusedLayers(e){const r={};e.forEach(a=>{r[a]=!0});for(const a in this.layerIndexes)r[a]||delete this.layerIndexes[a]}}var mr="void main() {fragColor=vec4(1.0);}";const kr={prelude:yr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:yr("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:yr("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:yr(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:yr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:yr(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:yr(mr,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:yr(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:yr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:yr("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:yr("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:yr("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:yr(mr,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:yr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:yr(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:yr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:yr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:yr(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:yr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:yr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:yr(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;switch(u_method){case BASIC:
basic_hillshade(deriv);break;case COMBINED:
combined_hillshade(deriv);break;case IGOR:
igor_hillshade(deriv);break;case MULTIDIRECTIONAL:
multidirectional_hillshade(deriv);break;case STANDARD:
default:
standard_hillshade(deriv);break;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:yr(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:yr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:yr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:yr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:yr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:yr(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:yr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:yr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:yr("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:yr("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:yr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:yr("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:yr(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:yr("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function yr(g,e){const r=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,a=e.match(/in ([\w]+) ([\w]+)/g),d=g.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),y=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=y?y.concat(d):d,E={};return{fragmentSource:g=g.replace(r,(A,D,N,G,Z)=>(E[Z]=!0,D==="define"?`
#ifndef HAS_UNIFORM_u_${Z}
in ${N} ${G} ${Z};
#else
uniform ${N} ${G} u_${Z};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Z}
    ${N} ${G} ${Z} = u_${Z};
#endif
`)),vertexSource:e=e.replace(r,(A,D,N,G,Z)=>{const X=G==="float"?"vec2":"vec4",ne=Z.match(/color/)?"color":X;return E[Z]?D==="define"?`
#ifndef HAS_UNIFORM_u_${Z}
uniform lowp float u_${Z}_t;
in ${N} ${X} a_${Z};
out ${N} ${G} ${Z};
#else
uniform ${N} ${G} u_${Z};
#endif
`:ne==="vec4"?`
#ifndef HAS_UNIFORM_u_${Z}
    ${Z} = a_${Z};
#else
    ${N} ${G} ${Z} = u_${Z};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Z}
    ${Z} = unpack_mix_${ne}(a_${Z}, u_${Z}_t);
#else
    ${N} ${G} ${Z} = u_${Z};
#endif
`:D==="define"?`
#ifndef HAS_UNIFORM_u_${Z}
uniform lowp float u_${Z}_t;
in ${N} ${X} a_${Z};
#else
uniform ${N} ${G} u_${Z};
#endif
`:ne==="vec4"?`
#ifndef HAS_UNIFORM_u_${Z}
    ${N} ${G} ${Z} = a_${Z};
#else
    ${N} ${G} ${Z} = u_${Z};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Z}
    ${N} ${G} ${Z} = unpack_mix_${ne}(a_${Z}, u_${Z}_t);
#else
    ${N} ${G} ${Z} = u_${Z};
#endif
`}),staticAttributes:a,staticUniforms:w}}class Nn{constructor(e,r,a){this.vertexBuffer=e,this.indexBuffer=r,this.segments=a}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var yi=u.aG([{name:"a_pos",type:"Int16",components:2}]);const to="#define PROJECTION_MERCATOR",Jr="mercator";class ss{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return Jr}get shaderDefine(){return to}get shaderPreludeCode(){return kr.projectionMercator}get vertexShaderPreludeCode(){return kr.projectionMercator.vertexSource}get subdivisionGranularity(){return u.aH.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(e){}getMeshFromTileID(e,r,a,d,y){if(this._cachedMesh)return this._cachedMesh;const w=new u.aI;w.emplaceBack(0,0),w.emplaceBack(u.Z,0),w.emplaceBack(0,u.Z),w.emplaceBack(u.Z,u.Z);const E=e.createVertexBuffer(w,yi.members),A=u.aJ.simpleSegment(0,0,4,2),D=new u.aK;D.emplaceBack(1,0,2),D.emplaceBack(1,2,3);const N=e.createIndexBuffer(D);return this._cachedMesh=new Nn(E,N,A),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(e){}}class Eo{constructor(e=0,r=0,a=0,d=0){if(isNaN(e)||e<0||isNaN(r)||r<0||isNaN(a)||a<0||isNaN(d)||d<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=r,this.left=a,this.right=d}interpolate(e,r,a){return r.top!=null&&e.top!=null&&(this.top=u.B.number(e.top,r.top,a)),r.bottom!=null&&e.bottom!=null&&(this.bottom=u.B.number(e.bottom,r.bottom,a)),r.left!=null&&e.left!=null&&(this.left=u.B.number(e.left,r.left,a)),r.right!=null&&e.right!=null&&(this.right=u.B.number(e.right,r.right,a)),this}getCenter(e,r){const a=u.ae((this.left+e-this.right)/2,0,e),d=u.ae((this.top+r-this.bottom)/2,0,r);return new u.P(a,d)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new Eo(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Io(g,e){if(!g.renderWorldCopies||g.lngRange)return;const r=e.lng-g.center.lng;e.lng+=r>180?-360:r<-180?360:0}function ui(g){return Math.max(0,Math.floor(g))}class ci{constructor(e,r,a,d,y,w){this._callbacks=e,this._tileSize=512,this._renderWorldCopies=w===void 0||!!w,this._minZoom=r||0,this._maxZoom=a||22,this._minPitch=d??0,this._maxPitch=y??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new u.Q(0,0),this._elevation=0,this._zoom=0,this._tileZoom=ui(this._zoom),this._scale=u.ac(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Eo,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(e,r,a){this._latRange=e.latRange,this._lngRange=e.lngRange,this._width=e.width,this._height=e.height,this._center=e.center,this._elevation=e.elevation,this._minElevationForCurrentTile=e.minElevationForCurrentTile,this._zoom=e.zoom,this._tileZoom=ui(this._zoom),this._scale=u.ac(this._zoom),this._bearingInRadians=e.bearingInRadians,this._fovInRadians=e.fovInRadians,this._pitchInRadians=e.pitchInRadians,this._rollInRadians=e.rollInRadians,this._unmodified=e.unmodified,this._edgeInsets=new Eo(e.padding.top,e.padding.bottom,e.padding.left,e.padding.right),this._minZoom=e.minZoom,this._maxZoom=e.maxZoom,this._minPitch=e.minPitch,this._maxPitch=e.maxPitch,this._renderWorldCopies=e.renderWorldCopies,this._cameraToCenterDistance=e.cameraToCenterDistance,this._nearZ=e.nearZ,this._farZ=e.farZ,this._autoCalculateNearFarZ=!a&&e.autoCalculateNearFarZ,r&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(e){this._minElevationForCurrentTile=e}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(e){this._minZoom!==e&&(this._minZoom=e,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(e){this._minPitch!==e&&(this._minPitch=e,this.setPitch(Math.max(this.pitch,e)))}get maxPitch(){return this._maxPitch}setMaxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.setPitch(Math.min(this.pitch,e)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(e){e===void 0?e=!0:e===null&&(e=!1),this._renderWorldCopies=e}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new u.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(e){const r=u.aL(e,-180,180)*Math.PI/180;var a,d,y,w,E,A,D,N,G;this._bearingInRadians!==r&&(this._unmodified=!1,this._bearingInRadians=r,this._calcMatrices(),this._rotationMatrix=Y(),a=this._rotationMatrix,y=-this._bearingInRadians,w=(d=this._rotationMatrix)[0],E=d[1],A=d[2],D=d[3],N=Math.sin(y),G=Math.cos(y),a[0]=w*G+A*N,a[1]=E*G+D*N,a[2]=w*-N+A*G,a[3]=E*-N+D*G)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(e){const r=u.ae(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==r&&(this._unmodified=!1,this._pitchInRadians=r,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(e){const r=e/180*Math.PI;this._rollInRadians!==r&&(this._unmodified=!1,this._rollInRadians=r,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return u.aM(this._fovInRadians)}setFov(e){e=u.ae(e,.1,150),this.fov!==e&&(this._unmodified=!1,this._fovInRadians=u.ab(e),this._calcMatrices())}get zoom(){return this._zoom}setZoom(e){const r=this.getConstrained(this._center,e).zoom;this._zoom!==r&&(this._unmodified=!1,this._zoom=r,this._tileZoom=Math.max(0,Math.floor(r)),this._scale=u.ac(r),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(e){e!==this._elevation&&(this._elevation=e,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(e,r){this._autoCalculateNearFarZ=!1,this._nearZ=e,this._farZ=r,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,r,a){this._unmodified=!1,this._edgeInsets.interpolate(e,r,a),this._constrain(),this._calcMatrices()}resize(e,r,a=!0){this._width=e,this._height=r,a&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new br([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(e){e?(this._lngRange=[e.getWest(),e.getEast()],this._latRange=[e.getSouth(),e.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-85.051129,u.af])}getConstrained(e,r){return this._callbacks.getConstrained(e,r)}getCameraQueryGeometry(e,r){if(r.length===1)return[r[0],e];{let a=e.x,d=e.y,y=e.x,w=e.y;for(const E of r)a=Math.min(a,E.x),d=Math.min(d,E.y),y=Math.max(y,E.x),w=Math.max(w,E.y);return[new u.P(a,d),new u.P(y,d),new u.P(y,w),new u.P(a,w),new u.P(a,d)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const e=this._unmodified,{center:r,zoom:a}=this.getConstrained(this.center,this.zoom);this.setCenter(r),this.setZoom(a),this._unmodified=e,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let e=u.ad(new Float64Array(16));u.M(e,e,[this._width/2,-this._height/2,1]),u.L(e,e,[1,-1,0]),this._clipSpaceToPixelsMatrix=e,e=u.ad(new Float64Array(16)),u.M(e,e,[1,-1,1]),u.L(e,e,[-1,-1,0]),u.M(e,e,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=e,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(e,r,a,d){const y=a!==void 0?a:this.bearing,w=d=d!==void 0?d:this.pitch,E=u.$.fromLngLat(e,r),A=-Math.cos(u.ab(w)),D=Math.sin(u.ab(w)),N=D*Math.sin(u.ab(y)),G=-D*Math.cos(u.ab(y));let Z=this.elevation;const X=r-Z;let ne;A*X>=0||Math.abs(A)<.1?(ne=1e4,Z=r+ne*A):ne=-X/A;let be,_e,Se=u.aN(1,E.y),ke=0;do{if(ke+=1,ke>10)break;_e=ne/Se,be=new u.$(E.x+N*_e,E.y+G*_e),Se=1/be.meterInMercatorCoordinateUnits()}while(Math.abs(ne-_e*Se)>1e-12);return{center:be.toLngLat(),elevation:Z,zoom:u.ah(this.height/2/Math.tan(this.fovInRadians/2)/_e/this.tileSize)}}recalculateZoomAndCenter(e){if(this.elevation-e==0)return;const r=u.ag(1,this.center.lat)*this.worldSize,a=this.cameraToCenterDistance/r,d=u.$.fromLngLat(this.center,this.elevation),y=ae(this.center,this.elevation,this.pitch,this.bearing,a);this._elevation=e;const w=this.calculateCenterFromCameraLngLatAlt(y.toLngLat(),u.aN(y.z,d.y),this.bearing,this.pitch);this._elevation=w.elevation,this._center=w.center,this.setZoom(w.zoom)}getCameraPoint(){const e=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new u.P(e*Math.sin(this.rollInRadians),e*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const e=u.ag(1,this.center.lat)*this.worldSize;return ae(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/e).toLngLat()}getMercatorTileCoordinates(e){if(!e)return[0,0,1,1];const r=e.canonical.z>=0?1<<e.canonical.z:Math.pow(2,e.canonical.z);return[e.canonical.x/r,e.canonical.y/r,1/r/u.Z,1/r/u.Z]}}class Dn{constructor(e,r){this.min=e,this.max=r,this.center=u.aO([],u.aP([],this.min,this.max),.5)}quadrant(e){const r=[e%2==0,e<2],a=u.aQ(this.min),d=u.aQ(this.max);for(let y=0;y<r.length;y++)a[y]=r[y]?this.min[y]:this.center[y],d[y]=r[y]?this.center[y]:this.max[y];return d[2]=this.max[2],new Dn(a,d)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}intersectsFrustum(e){let r=!0;for(let a=0;a<e.planes.length;a++){const d=this.intersectsPlane(e.planes[a]);if(d===0)return 0;d===1&&(r=!1)}return r?2:e.aabb.min[0]>this.max[0]||e.aabb.min[1]>this.max[1]||e.aabb.min[2]>this.max[2]||e.aabb.max[0]<this.min[0]||e.aabb.max[1]<this.min[1]||e.aabb.max[2]<this.min[2]?0:1}intersectsPlane(e){let r=e[3],a=e[3];for(let d=0;d<3;d++)e[d]>0?(r+=e[d]*this.min[d],a+=e[d]*this.max[d]):(a+=e[d]*this.min[d],r+=e[d]*this.max[d]);return r>=0?2:a<0?0:1}}class Pi{distanceToTile2d(e,r,a,d){const y=d.distanceX([e,r]),w=d.distanceY([e,r]);return Math.hypot(y,w)}getWrap(e,r,a){return a}getTileAABB(e,r,a,d){var y,w;let E=a,A=a;if(d.terrain){const N=new u.Y(e.z,r,e.z,e.x,e.y),G=d.terrain.getMinMaxElevation(N);E=(y=G.minElevation)!==null&&y!==void 0?y:a,A=(w=G.maxElevation)!==null&&w!==void 0?w:a}const D=1<<e.z;return new Dn([r+e.x/D,e.y/D,E],[r+(e.x+1)/D,(e.y+1)/D,A])}allowVariableZoom(e,r){const a=e.fov*(Math.abs(Math.cos(e.rollInRadians))*e.height+Math.abs(Math.sin(e.rollInRadians))*e.width)/e.height,d=u.ae(78.5-a/2,0,60);return!!r.terrain||e.pitch>d}allowWorldCopies(){return!0}recalculateCache(){}}class On{constructor(e,r,a){this.points=e,this.planes=r,this.aabb=a}static fromInvProjectionMatrix(e,r=1,a=0){const d=Math.pow(2,a),y=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(D=>{const N=1/(D=u.at([],D,e))[3]/r*d;return u.aR(D,D,[N,N,1/D[3],N])}),w=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(D=>{const N=u.aS([],y[D[0]],y[D[1]]),G=u.aS([],y[D[2]],y[D[1]]),Z=u.aT([],u.aU([],N,G)),X=-u.aV(Z,y[D[1]]);return Z.concat(X)}),E=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],A=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const D of y)for(let N=0;N<3;N++)E[N]=Math.min(E[N],D[N]),A[N]=Math.max(A[N],D[N]);return new On(y,w,new Dn(E,A))}}class mu{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(e){this._helper.setMinZoom(e)}setMaxZoom(e){this._helper.setMaxZoom(e)}setMinPitch(e){this._helper.setMinPitch(e)}setMaxPitch(e){this._helper.setMaxPitch(e)}setRenderWorldCopies(e){this._helper.setRenderWorldCopies(e)}setBearing(e){this._helper.setBearing(e)}setPitch(e){this._helper.setPitch(e)}setRoll(e){this._helper.setRoll(e)}setFov(e){this._helper.setFov(e)}setZoom(e){this._helper.setZoom(e)}setCenter(e){this._helper.setCenter(e)}setElevation(e){this._helper.setElevation(e)}setMinElevationForCurrentTile(e){this._helper.setMinElevationForCurrentTile(e)}setPadding(e){this._helper.setPadding(e)}interpolatePadding(e,r,a){return this._helper.interpolatePadding(e,r,a)}isPaddingEqual(e){return this._helper.isPaddingEqual(e)}resize(e,r,a=!0){this._helper.resize(e,r,a)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(e){this._helper.setMaxBounds(e)}overrideNearFarZ(e,r){this._helper.overrideNearFarZ(e,r)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(e){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),e)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(e,r){}constructor(e,r,a,d,y){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new ci({calcMatrices:()=>{this._calcMatrices()},getConstrained:(w,E)=>this.getConstrained(w,E)},e,r,a,d,y),this._coveringTilesDetailsProvider=new Pi}clone(){const e=new mu;return e.apply(this),e}apply(e,r,a){this._helper.apply(e,r,a)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(e){const r=[new u.aW(0,e)];if(this._helper._renderWorldCopies){const a=this.screenPointToMercatorCoordinate(new u.P(0,0)),d=this.screenPointToMercatorCoordinate(new u.P(this._helper._width,0)),y=this.screenPointToMercatorCoordinate(new u.P(this._helper._width,this._helper._height)),w=this.screenPointToMercatorCoordinate(new u.P(0,this._helper._height)),E=Math.floor(Math.min(a.x,d.x,y.x,w.x)),A=Math.floor(Math.max(a.x,d.x,y.x,w.x)),D=1;for(let N=E-D;N<=A+D;N++)N!==0&&r.push(new u.aW(N,e))}return r}getCameraFrustum(){return On.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(e){const r=this.screenPointToLocation(this.centerPoint,e),a=e?e.getElevationForLngLatZoom(r,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(a)}setLocationAtPoint(e,r){const a=u.ag(this.elevation,this.center.lat),d=this.screenPointToMercatorCoordinateAtZ(r,a),y=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,a),w=u.$.fromLngLat(e),E=new u.$(w.x-(d.x-y.x),w.y-(d.y-y.y));this.setCenter(E==null?void 0:E.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(e,r){return r?this.coordinatePoint(u.$.fromLngLat(e),r.getElevationForLngLatZoom(e,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(u.$.fromLngLat(e))}screenPointToLocation(e,r){var a;return(a=this.screenPointToMercatorCoordinate(e,r))===null||a===void 0?void 0:a.toLngLat()}screenPointToMercatorCoordinate(e,r){if(r){const a=r.pointCoordinate(e);if(a!=null)return a}return this.screenPointToMercatorCoordinateAtZ(e)}screenPointToMercatorCoordinateAtZ(e,r){const a=r||0,d=[e.x,e.y,0,1],y=[e.x,e.y,1,1];u.at(d,d,this._pixelMatrixInverse),u.at(y,y,this._pixelMatrixInverse);const w=d[3],E=y[3],A=d[1]/w,D=y[1]/E,N=d[2]/w,G=y[2]/E,Z=N===G?0:(a-N)/(G-N);return new u.$(u.B.number(d[0]/w,y[0]/E,Z)/this.worldSize,u.B.number(A,D,Z)/this.worldSize,a)}coordinatePoint(e,r=0,a=this._pixelMatrix){const d=[e.x*this.worldSize,e.y*this.worldSize,r,1];return u.at(d,d,a),new u.P(d[0]/d[3],d[1]/d[3])}getBounds(){const e=Math.max(0,this._helper._height/2-et(this));return new br().extend(this.screenPointToLocation(new u.P(0,e))).extend(this.screenPointToLocation(new u.P(this._helper._width,e))).extend(this.screenPointToLocation(new u.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new u.P(0,this._helper._height)))}isPointOnMapSurface(e,r){return r?r.pointCoordinate(e)!=null:e.y>this.height/2-et(this)}calculatePosMatrix(e,r=!1,a){var d;const y=(d=e.key)!==null&&d!==void 0?d:u.aX(e.wrap,e.canonical.z,e.canonical.z,e.canonical.x,e.canonical.y),w=r?this._alignedPosMatrixCache:this._posMatrixCache;if(w.has(y)){const D=w.get(y);return a?D.f32:D.f64}const E=se(e,this.worldSize);u.N(E,r?this._alignedProjMatrix:this._viewProjMatrix,E);const A={f64:E,f32:new Float32Array(E)};return w.set(y,A),a?A.f32:A.f64}calculateFogMatrix(e){const r=e.key,a=this._fogMatrixCacheF32;if(a.has(r))return a.get(r);const d=se(e,this.worldSize);return u.N(d,this._fogMatrix,d),a.set(r,new Float32Array(d)),a.get(r)}getConstrained(e,r){r=u.ae(+r,this.minZoom,this.maxZoom);const a={center:new u.Q(e.lng,e.lat),zoom:r};let d=this._helper._lngRange;this._helper._renderWorldCopies||d!==null||(d=[-179.9999999999,180-1e-10]);const y=this.tileSize*u.ac(a.zoom);let w=0,E=y,A=0,D=y,N=0,G=0;const{x:Z,y:X}=this.size;if(this._helper._latRange){const Le=this._helper._latRange;w=u.S(Le[1])*y,E=u.S(Le[0])*y,E-w<X&&(N=X/(E-w))}d&&(A=u.aL(u.U(d[0])*y,0,y),D=u.aL(u.U(d[1])*y,0,y),D<A&&(D+=y),D-A<Z&&(G=Z/(D-A)));const{x:ne,y:be}=ii(y,e);let _e,Se;const ke=Math.max(G||0,N||0);if(ke){const Le=new u.P(G?(D+A)/2:ne,N?(E+w)/2:be);return a.center=mo(y,Le).wrap(),a.zoom+=u.ah(ke),a}if(this._helper._latRange){const Le=X/2;be-Le<w&&(Se=w+Le),be+Le>E&&(Se=E-Le)}if(d){const Le=(A+D)/2;let Me=ne;this._helper._renderWorldCopies&&(Me=u.aL(ne,Le-y/2,Le+y/2));const De=Z/2;Me-De<A&&(_e=A+De),Me+De>D&&(_e=D-De)}if(_e!==void 0||Se!==void 0){const Le=new u.P(_e??ne,Se??be);a.center=mo(y,Le).wrap()}return a}calculateCenterFromCameraLngLatAlt(e,r,a,d){return this._helper.calculateCenterFromCameraLngLatAlt(e,r,a,d)}_calculateNearFarZIfNeeded(e,r,a){if(!this._helper.autoCalculateNearFarZ)return;const d=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),y=e-d*this._helper._pixelPerMeter/Math.cos(r),w=d<0?y:e,E=Math.PI/2+this.pitchInRadians,A=u.ab(this.fov)*(Math.abs(Math.cos(u.ab(this.roll)))*this.height+Math.abs(Math.sin(u.ab(this.roll)))*this.width)/this.height*(.5+a.y/this.height),D=Math.sin(A)*w/Math.sin(u.ae(Math.PI-E-A,.01,Math.PI-.01)),N=et(this),G=Math.atan(N/this._helper.cameraToCenterDistance),Z=u.ab(.75),X=G>Z?2*G*(.5+a.y/(2*N)):Z,ne=Math.sin(X)*w/Math.sin(u.ae(Math.PI-E-X,.01,Math.PI-.01)),be=Math.min(D,ne);this._helper._farZ=1.01*(Math.cos(Math.PI/2-r)*be+w),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const e=this.centerOffset,r=ii(this.worldSize,this.center),a=r.x,d=r.y;this._helper._pixelPerMeter=u.ag(1,this.center.lat)*this.worldSize;const y=u.ab(Math.min(this.pitch,ei)),w=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(y));let E;this._calculateNearFarZIfNeeded(w,y,e),E=new Float64Array(16),u.aY(E,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),u.an(this._invProjMatrix,E),E[8]=2*-e.x/this._helper._width,E[9]=2*e.y/this._helper._height,this._projectionMatrix=u.aZ(E),u.M(E,E,[1,-1,1]),u.L(E,E,[0,0,-this._helper.cameraToCenterDistance]),u.a_(E,E,-this.rollInRadians),u.a$(E,E,this.pitchInRadians),u.a_(E,E,-this.bearingInRadians),u.L(E,E,[-a,-d,0]),this._mercatorMatrix=u.M([],E,[this.worldSize,this.worldSize,this.worldSize]),u.M(E,E,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=u.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,E),u.L(E,E,[0,0,-this.elevation]),this._viewProjMatrix=E,this._invViewProjMatrix=u.an([],E);const A=[0,0,-1,1];u.at(A,A,this._invViewProjMatrix),this._cameraPosition=[A[0]/A[3],A[1]/A[3],A[2]/A[3]],this._fogMatrix=new Float64Array(16),u.aY(this._fogMatrix,this.fovInRadians,this.width/this.height,w,this._helper._farZ),this._fogMatrix[8]=2*-e.x/this.width,this._fogMatrix[9]=2*e.y/this.height,u.M(this._fogMatrix,this._fogMatrix,[1,-1,1]),u.L(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),u.a_(this._fogMatrix,this._fogMatrix,-this.rollInRadians),u.a$(this._fogMatrix,this._fogMatrix,this.pitchInRadians),u.a_(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),u.L(this._fogMatrix,this._fogMatrix,[-a,-d,0]),u.M(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),u.L(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=u.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,E);const D=this._helper._width%2/2,N=this._helper._height%2/2,G=Math.cos(this.bearingInRadians),Z=Math.sin(-this.bearingInRadians),X=a-Math.round(a)+G*D+Z*N,ne=d-Math.round(d)+G*N+Z*D,be=new Float64Array(E);if(u.L(be,be,[X>.5?X-1:X,ne>.5?ne-1:ne,0]),this._alignedProjMatrix=be,E=u.an(new Float64Array(16),this._pixelMatrix),!E)throw new Error("failed to invert matrix");this._pixelMatrixInverse=E,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const e=this.screenPointToMercatorCoordinate(new u.P(0,0)),r=[e.x*this.worldSize,e.y*this.worldSize,0,1];return u.at(r,r,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const e=u.ag(1,this.center.lat)*this.worldSize;return ae(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/e).toLngLat()}lngLatToCameraDepth(e,r){const a=u.$.fromLngLat(e),d=[a.x*this.worldSize,a.y*this.worldSize,r,1];return u.at(d,d,this._viewProjMatrix),d[2]/d[3]}getProjectionData(e){const{overscaledTileID:r,aligned:a,applyTerrainMatrix:d}=e,y=this._helper.getMercatorTileCoordinates(r),w=r?this.calculatePosMatrix(r,a,!0):null;let E;return E=r&&r.terrainRttPosMatrix32f&&d?r.terrainRttPosMatrix32f:w||u.b0(),{mainMatrix:E,tileMercatorCoords:y,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:E}}isLocationOccluded(e){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(e,r,a){return 1}transformLightDirection(e){return u.aQ(e)}getRayDirectionFromPixel(e){throw new Error("Not implemented.")}projectTileCoordinates(e,r,a,d){const y=this.calculatePosMatrix(a);let w;d?(w=[e,r,d(e,r),1],u.at(w,w,y)):(w=[e,r,0,1],La(w,w,y));const E=w[3];return{point:new u.P(w[0]/E,w[1]/E),signedDistanceFromCamera:E,isOccluded:!1}}populateCache(e){for(const r of e)this.calculatePosMatrix(r)}getMatrixForModel(e,r){const a=u.$.fromLngLat(e,r),d=a.meterInMercatorCoordinateUnits(),y=u.b1();return u.L(y,y,[a.x,a.y,a.z]),u.a_(y,y,Math.PI),u.a$(y,y,Math.PI/2),u.M(y,y,[-d,d,d]),y}getProjectionDataForCustomLayer(e=!0){const r=new u.Y(0,0,0,0,0),a=this.getProjectionData({overscaledTileID:r,applyGlobeMatrix:e}),d=se(r,this.worldSize);u.N(d,this._viewProjMatrix,d),a.tileMercatorCoords=[0,0,1,1];const y=[u.Z,u.Z,this.worldSize/this._helper.pixelsPerMeter],w=u.b2();return u.M(w,d,y),a.fallbackMatrix=w,a.mainMatrix=w,a}getFastPathSimpleProjectionMatrix(e){return this.calculatePosMatrix(e)}}function Oo(){u.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function ro(g){if(g.useSlerp)if(g.k<1){const e=u.b3(g.startEulerAngles.roll,g.startEulerAngles.pitch,g.startEulerAngles.bearing),r=u.b3(g.endEulerAngles.roll,g.endEulerAngles.pitch,g.endEulerAngles.bearing),a=new Float64Array(4);u.b4(a,e,r,g.k);const d=u.b5(a);g.tr.setRoll(d.roll),g.tr.setPitch(d.pitch),g.tr.setBearing(d.bearing)}else g.tr.setRoll(g.endEulerAngles.roll),g.tr.setPitch(g.endEulerAngles.pitch),g.tr.setBearing(g.endEulerAngles.bearing);else g.tr.setRoll(u.B.number(g.startEulerAngles.roll,g.endEulerAngles.roll,g.k)),g.tr.setPitch(u.B.number(g.startEulerAngles.pitch,g.endEulerAngles.pitch,g.k)),g.tr.setBearing(u.B.number(g.startEulerAngles.bearing,g.endEulerAngles.bearing,g.k))}function as(g,e,r,a,d){const y=d.padding,w=ii(d.worldSize,r.getNorthWest()),E=ii(d.worldSize,r.getNorthEast()),A=ii(d.worldSize,r.getSouthEast()),D=ii(d.worldSize,r.getSouthWest()),N=u.ab(-a),G=w.rotate(N),Z=E.rotate(N),X=A.rotate(N),ne=D.rotate(N),be=new u.P(Math.max(G.x,Z.x,ne.x,X.x),Math.max(G.y,Z.y,ne.y,X.y)),_e=new u.P(Math.min(G.x,Z.x,ne.x,X.x),Math.min(G.y,Z.y,ne.y,X.y)),Se=be.sub(_e),ke=(d.width-(y.left+y.right+e.left+e.right))/Se.x,Le=(d.height-(y.top+y.bottom+e.top+e.bottom))/Se.y;if(Le<0||ke<0)return void Oo();const Me=Math.min(u.ah(d.scale*Math.min(ke,Le)),g.maxZoom),De=u.P.convert(g.offset),Ne=new u.P((e.left-e.right)/2,(e.top-e.bottom)/2).rotate(u.ab(a)),je=De.add(Ne).mult(d.scale/u.ac(Me));return{center:mo(d.worldSize,w.add(A).div(2).sub(je)),zoom:Me,bearing:a}}class ls{get useGlobeControls(){return!1}handlePanInertia(e,r){return{easingOffset:e,easingCenter:r.center}}handleMapControlsRollPitchBearingZoom(e,r){e.bearingDelta&&r.setBearing(r.bearing+e.bearingDelta),e.pitchDelta&&r.setPitch(r.pitch+e.pitchDelta),e.rollDelta&&r.setRoll(r.roll+e.rollDelta),e.zoomDelta&&r.setZoom(r.zoom+e.zoomDelta)}handleMapControlsPan(e,r,a){e.around.distSqr(r.centerPoint)<.01||r.setLocationAtPoint(a,e.around)}cameraForBoxAndBearing(e,r,a,d,y){return as(e,r,a,d,y)}handleJumpToCenterZoom(e,r){e.zoom!==(r.zoom!==void 0?+r.zoom:e.zoom)&&e.setZoom(+r.zoom),r.center!==void 0&&e.setCenter(u.Q.convert(r.center))}handleEaseTo(e,r){const a=e.zoom,d=e.padding,y={roll:e.roll,pitch:e.pitch,bearing:e.bearing},w={roll:r.roll===void 0?e.roll:r.roll,pitch:r.pitch===void 0?e.pitch:r.pitch,bearing:r.bearing===void 0?e.bearing:r.bearing},E=r.zoom!==void 0,A=!e.isPaddingEqual(r.padding);let D=!1;const N=E?+r.zoom:e.zoom;let G=e.centerPoint.add(r.offsetAsPoint);const Z=e.screenPointToLocation(G),{center:X,zoom:ne}=e.getConstrained(u.Q.convert(r.center||Z),N??a);Io(e,X);const be=ii(e.worldSize,Z),_e=ii(e.worldSize,X).sub(be),Se=u.ac(ne-a);return D=ne!==a,{easeFunc:ke=>{if(D&&e.setZoom(u.B.number(a,ne,ke)),u.b6(y,w)||ro({startEulerAngles:y,endEulerAngles:w,tr:e,k:ke,useSlerp:y.roll!=w.roll}),A&&(e.interpolatePadding(d,r.padding,ke),G=e.centerPoint.add(r.offsetAsPoint)),r.around)e.setLocationAtPoint(r.around,r.aroundPoint);else{const Le=u.ac(e.zoom-a),Me=ne>a?Math.min(2,Se):Math.max(.5,Se),De=Math.pow(Me,1-ke),Ne=mo(e.worldSize,be.add(_e.mult(ke*De)).mult(Le));e.setLocationAtPoint(e.renderWorldCopies?Ne.wrap():Ne,G)}},isZooming:D,elevationCenter:X}}handleFlyTo(e,r){const a=r.zoom!==void 0,d=e.zoom,y=e.getConstrained(u.Q.convert(r.center||r.locationAtOffset),a?+r.zoom:d),w=y.center,E=y.zoom;Io(e,w);const A=ii(e.worldSize,r.locationAtOffset),D=ii(e.worldSize,w).sub(A),N=D.mag(),G=u.ac(E-d);let Z;if(r.minZoom!==void 0){const X=Math.min(+r.minZoom,d,E),ne=e.getConstrained(w,X).zoom;Z=u.ac(ne-d)}return{easeFunc:(X,ne,be,_e)=>{e.setZoom(X===1?E:d+u.ah(ne));const Se=X===1?w:mo(e.worldSize,A.add(D.mult(be)).mult(ne));e.setLocationAtPoint(e.renderWorldCopies?Se.wrap():Se,_e)},scaleOfZoom:G,targetCenter:w,scaleOfMinZoom:Z,pixelPathLength:N}}}class Ln{constructor(e,r,a){this.blendFunction=e,this.blendColor=r,this.mask=a}}Ln.Replace=[1,0],Ln.disabled=new Ln(Ln.Replace,u.b7.transparent,[!1,!1,!1,!1]),Ln.unblended=new Ln(Ln.Replace,u.b7.transparent,[!0,!0,!0,!0]),Ln.alphaBlended=new Ln([1,771],u.b7.transparent,[!0,!0,!0,!0]);const hi=2305;class Lr{constructor(e,r,a){this.enable=e,this.mode=r,this.frontFace=a}}Lr.disabled=new Lr(!1,1029,hi),Lr.backCCW=new Lr(!0,1029,hi),Lr.frontCCW=new Lr(!0,1028,hi);class gr{constructor(e,r,a){this.func=e,this.mask=r,this.range=a}}gr.ReadOnly=!1,gr.ReadWrite=!0,gr.disabled=new gr(519,gr.ReadOnly,[0,1]);const Pn=7680;class Kr{constructor(e,r,a,d,y,w){this.test=e,this.ref=r,this.mask=a,this.fail=d,this.depthFail=y,this.pass=w}}Kr.disabled=new Kr({func:519,mask:0},0,0,Pn,Pn,Pn);const us=new WeakMap;function no(g){var e;if(us.has(g))return us.get(g);{const r=(e=g.getParameter(g.VERSION))===null||e===void 0?void 0:e.startsWith("WebGL 2.0");return us.set(g,r),r}}class rl{get awaitingQuery(){return!!this._readbackQueue}constructor(e){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=e;const r=e.context,a=r.gl;this._texFormat=a.RGBA,this._texType=a.UNSIGNED_BYTE;const d=new u.aI;d.emplaceBack(-1,-1),d.emplaceBack(2,-1),d.emplaceBack(-1,2);const y=new u.aK;y.emplaceBack(0,1,2),this._fullscreenTriangle=new Nn(r.createVertexBuffer(d,yi.members),r.createIndexBuffer(y),u.aJ.simpleSegment(0,0,d.length,y.length)),this._resultBuffer=new Uint8Array(4),r.activeTexture.set(a.TEXTURE1);const w=a.createTexture();a.bindTexture(a.TEXTURE_2D,w),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST),a.texImage2D(a.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=r.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(w),no(a)&&(this._pbo=a.createBuffer(),a.bindBuffer(a.PIXEL_PACK_BUFFER,this._pbo),a.bufferData(a.PIXEL_PACK_BUFFER,4,a.STREAM_READ),a.bindBuffer(a.PIXEL_PACK_BUFFER,null))}destroy(){const e=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),e.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(e,r){const a=this._updateCount;return this._readbackQueue?a>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():a>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(e,r),this._updateCount++,this._measuredError}_bindFramebuffer(){const e=this._cachedRenderContext.context,r=e.gl;e.activeTexture.set(r.TEXTURE1),r.bindTexture(r.TEXTURE_2D,this._fbo.colorAttachment.get()),e.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(e,r){const a=this._cachedRenderContext.context,d=a.gl;if(this._bindFramebuffer(),a.viewport.set([0,0,this._texWidth,this._texHeight]),a.clear({color:u.b7.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(a,d.TRIANGLES,gr.disabled,Kr.disabled,Ln.unblended,Lr.disabled,((y,w)=>({u_input:y,u_output_expected:w}))(e,r),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&no(d)){d.bindBuffer(d.PIXEL_PACK_BUFFER,this._pbo),d.readBuffer(d.COLOR_ATTACHMENT0),d.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),d.bindBuffer(d.PIXEL_PACK_BUFFER,null);const y=d.fenceSync(d.SYNC_GPU_COMMANDS_COMPLETE,0);d.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:y}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const e=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&no(e)){const r=e.clientWaitSync(this._readbackQueue.sync,0,0);if(r===e.WAIT_FAILED)return u.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(r===e.TIMEOUT_EXPIRED)return;e.bindBuffer(e.PIXEL_PACK_BUFFER,this._pbo),e.getBufferSubData(e.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),e.bindBuffer(e.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),e.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=rl._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(e){let r=0;return r+=e[0]/256,r+=e[1]/65536,r+=e[2]/16777216,e[3]<127&&(r=-r),r/128}}const gu=u.Z/128;function Fa(g,e){const r=g.granularity!==void 0?Math.max(g.granularity,1):1,a=r+(g.generateBorders?2:0),d=r+(g.extendToNorthPole||g.generateBorders?1:0)+(g.extendToSouthPole||g.generateBorders?1:0),y=a+1,w=d+1,E=g.generateBorders?-1:0,A=g.generateBorders||g.extendToNorthPole?-1:0,D=r+(g.generateBorders?1:0),N=r+(g.generateBorders||g.extendToSouthPole?1:0),G=y*w,Z=a*d*6,X=y*w>65536;if(X&&e==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const ne=X||e==="32bit",be=new Int16Array(2*G);let _e=0;for(let Le=A;Le<=N;Le++)for(let Me=E;Me<=D;Me++){let De=Me/r*u.Z;Me===-1&&(De=-64),Me===r+1&&(De=u.Z+gu);let Ne=Le/r*u.Z;Le===-1&&(Ne=g.extendToNorthPole?u.b9:-64),Le===r+1&&(Ne=g.extendToSouthPole?u.ba:u.Z+gu),be[_e++]=De,be[_e++]=Ne}const Se=ne?new Uint32Array(Z):new Uint16Array(Z);let ke=0;for(let Le=0;Le<d;Le++)for(let Me=0;Me<a;Me++){const De=Me+1+Le*y,Ne=Me+(Le+1)*y,je=Me+1+(Le+1)*y;Se[ke++]=Me+Le*y,Se[ke++]=Ne,Se[ke++]=De,Se[ke++]=De,Se[ke++]=Ne,Se[ke++]=je}return{vertices:be.buffer.slice(0),indices:Se.buffer.slice(0),uses32bitIndices:ne}}const _a=new u.aH({fill:new u.bb(128,2),line:new u.bb(512,0),tile:new u.bb(128,32),stencil:new u.bb(128,1),circle:3});class Ql{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return kr.projectionGlobe}get vertexShaderPreludeCode(){return kr.projectionMercator.vertexSource}get subdivisionGranularity(){return _a}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(e){this._errorMeasurement||(this._errorMeasurement=new rl(e));const r=u.S(this._errorQueryLatitudeDegrees),a=2*Math.atan(Math.exp(Math.PI-r*Math.PI*2))-.5*Math.PI,d=this._errorMeasurement.updateErrorLoop(r,a),y=Te.now();d!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=d,this._errorMeasurementLastChangeTime=y);const w=Math.min(Math.max((y-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=u.bc(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,u.bd(w))}_getMeshKey(e){return`${e.granularity.toString(36)}_${e.generateBorders?"b":""}${e.extendToNorthPole?"n":""}${e.extendToSouthPole?"s":""}`}getMeshFromTileID(e,r,a,d,y){const w=(y==="stencil"?_a.stencil:_a.tile).getGranularityForZoomLevel(r.z);return this._getMesh(e,{granularity:w,generateBorders:a,extendToNorthPole:r.y===0&&d,extendToSouthPole:r.y===(1<<r.z)-1&&d})}_getMesh(e,r){const a=this._getMeshKey(r);if(a in this._tileMeshCache)return this._tileMeshCache[a];const d=function(y,w){const E=Fa(w,"16bit"),A=u.aI.deserialize({arrayBuffer:E.vertices,length:E.vertices.byteLength/2/2}),D=u.aK.deserialize({arrayBuffer:E.indices,length:E.indices.byteLength/2/3});return new Nn(y.createVertexBuffer(A,yi.members),y.createIndexBuffer(D),u.aJ.simpleSegment(0,0,A.length,D.length))}(e,r);return this._tileMeshCache[a]=d,d}recalculate(e){}hasTransition(){const e=Te.now();let r=!1;return r=r||(e-this._errorMeasurementLastChangeTime)/1e3<.7,r=r||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,r}setErrorQueryLatitudeDegrees(e){this._errorQueryLatitudeDegrees=e}}const di=new u.r({type:new u.D(u.v.projection.type)});class nl extends u.E{constructor(e){super(),this._transitionable=new u.T(di),this.setProjection(e),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new u.C(0)),this._mercatorProjection=new ss,this._verticalPerspectiveProjection=new Ql}get transitionState(){const e=this.properties.get("type");if(typeof e=="string"&&e==="mercator")return 0;if(typeof e=="string"&&e==="vertical-perspective")return 1;if(e instanceof u.be){if(e.from==="vertical-perspective"&&e.to==="mercator")return 1-e.transition;if(e.from==="mercator"&&e.to==="vertical-perspective")return e.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(e){this._mercatorProjection.updateGPUdependent(e),this._verticalPerspectiveProjection.updateGPUdependent(e)}getMeshFromTileID(e,r,a,d,y){return this.currentProjection.getMeshFromTileID(e,r,a,d,y)}setProjection(e){this._transitionable.setValue("type",(e==null?void 0:e.type)||"mercator")}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}setErrorQueryLatitudeDegrees(e){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(e),this._mercatorProjection.setErrorQueryLatitudeDegrees(e)}}function cs(g){const e=Fi(g.worldSize,g.center.lat);return 2*Math.PI*e}function il(g,e,r,a,d){const y=1/(1<<d),w=e/u.Z*y+a*y,E=u.bg((g/u.Z*y+r*y)*Math.PI*2+Math.PI,2*Math.PI),A=2*Math.atan(Math.exp(Math.PI-w*Math.PI*2))-.5*Math.PI,D=Math.cos(A),N=new Float64Array(3);return N[0]=Math.sin(E)*D,N[1]=Math.sin(A),N[2]=Math.cos(E)*D,N}function _i(g){return function(e,r){const a=Math.cos(r),d=new Float64Array(3);return d[0]=Math.sin(e)*a,d[1]=Math.sin(r),d[2]=Math.cos(e)*a,d}(g.lng*Math.PI/180,g.lat*Math.PI/180)}function Fi(g,e){return g/(2*Math.PI)/Math.cos(e*Math.PI/180)}function Ba(g){const e=Math.asin(g[1])/Math.PI*180,r=Math.sqrt(g[0]*g[0]+g[2]*g[2]);if(r>1e-6){const a=g[0]/r,d=Math.acos(g[2]/r),y=(a>0?d:-d)/Math.PI*180;return new u.Q(u.aL(y,-180,180),e)}return new u.Q(0,e)}function Ai(g){return Math.cos(g*Math.PI/180)}function Ei(g,e){const r=Ai(g),a=Ai(e);return u.ah(a/r)}function va(g,e){const r=g.rotate(e.bearingInRadians),a=e.zoom+Ei(e.center.lat,0),d=u.bc(1/Ai(e.center.lat),1/Ai(Math.min(Math.abs(e.center.lat),60)),u.bf(a,7,3,0,1)),y=360/cs({worldSize:e.worldSize,center:{lat:e.center.lat}});return new u.Q(e.center.lng-r.x*y*d,u.ae(e.center.lat+r.y*y,-85.051129,u.af))}function ol(g){const e=.5*g,r=Math.sin(e),a=Math.cos(e);return Math.log(r+a)-Math.log(a-r)}function Vu(g,e,r,a){const d=g.lat+r*a;if(Math.abs(r)>1){const y=(Math.sign(g.lat+r)!==Math.sign(g.lat)?-Math.abs(g.lat):Math.abs(g.lat))*Math.PI/180,w=Math.abs(g.lat+r)*Math.PI/180,E=ol(y+a*(w-y)),A=ol(y),D=ol(w);return new u.Q(g.lng+e*((E-A)/(D-A)),d)}return new u.Q(g.lng+e*a,d)}class yo{constructor(e){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._aabbFactory=e}recalculateCache(){if(!this._hadAnyChanges)return;const e=this._cachePrevious;this._cachePrevious=this._cache,this._cache=e,this._cache.clear(),this._hadAnyChanges=!1}getTileAABB(e,r,a,d){const y=`${e.z}_${e.x}_${e.y}`,w=this._cache.get(y);if(w)return w;const E=this._cachePrevious.get(y);if(E)return this._cache.set(y,E),E;const A=this._aabbFactory(e,r,a,d);return this._cache.set(y,A),this._hadAnyChanges=!0,A}}function Bi(g,e,r){const a=g-e;return a<0?-a:Math.max(0,a-r)}function Ri(g,e,r,a,d){const y=g-r;let w;return w=y<0?Math.min(-y,1+y-d):y>1?Math.min(Math.max(y-d,0),1-y):0,Math.max(w,Bi(e,a,d))}class hs{constructor(){this._aabbCache=new yo(this._computeTileAABB)}recalculateCache(){this._aabbCache.recalculateCache()}distanceToTile2d(e,r,a,d){const y=1<<a.z,w=1/y,E=a.x/y,A=a.y/y;let D=2;return D=Math.min(D,Ri(e,r,E,A,w)),D=Math.min(D,Ri(e,r,E+.5,-A-w,w)),D=Math.min(D,Ri(e,r,E+.5,2-A-w,w)),D}getWrap(e,r,a){const d=1<<r.z,y=1/d,w=r.x/d,E=Bi(e.x,w,y),A=Bi(e.x,w-1,y),D=Bi(e.x,w+1,y),N=Math.min(E,A,D);return N===D?1:N===A?-1:0}allowVariableZoom(e,r){return qe(e,r)>4}allowWorldCopies(){return!1}getTileAABB(e,r,a,d){return this._aabbCache.getTileAABB(e,r,a,d)}_computeTileAABB(e,r,a,d){if(e.z<=0)return new Dn([-1,-1,-1],[1,1,1]);if(e.z===1)return new Dn([e.x===0?-1:0,e.y===0?0:-1,-1],[e.x===0?0:1,e.y===0?1:0,1]);{const y=[il(0,0,e.x,e.y,e.z),il(u.Z,0,e.x,e.y,e.z),il(u.Z,u.Z,e.x,e.y,e.z),il(0,u.Z,e.x,e.y,e.z)],w=[1,1,1],E=[-1,-1,-1];for(const A of y)for(let D=0;D<3;D++)w[D]=Math.min(w[D],A[D]),E[D]=Math.max(E[D],A[D]);if(e.y===0||e.y===(1<<e.z)-1){const A=[0,e.y===0?1:-1,0];for(let D=0;D<3;D++)w[D]=Math.min(w[D],A[D]),E[D]=Math.max(E[D],A[D])}return new Dn(w,E)}}}class Na{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(e){this._helper.setMinZoom(e)}setMaxZoom(e){this._helper.setMaxZoom(e)}setMinPitch(e){this._helper.setMinPitch(e)}setMaxPitch(e){this._helper.setMaxPitch(e)}setRenderWorldCopies(e){this._helper.setRenderWorldCopies(e)}setBearing(e){this._helper.setBearing(e)}setPitch(e){this._helper.setPitch(e)}setRoll(e){this._helper.setRoll(e)}setFov(e){this._helper.setFov(e)}setZoom(e){this._helper.setZoom(e)}setCenter(e){this._helper.setCenter(e)}setElevation(e){this._helper.setElevation(e)}setMinElevationForCurrentTile(e){this._helper.setMinElevationForCurrentTile(e)}setPadding(e){this._helper.setPadding(e)}interpolatePadding(e,r,a){return this._helper.interpolatePadding(e,r,a)}isPaddingEqual(e){return this._helper.isPaddingEqual(e)}resize(e,r){this._helper.resize(e,r)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(e){this._helper.setMaxBounds(e)}overrideNearFarZ(e,r){this._helper.overrideNearFarZ(e,r)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(e){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),e)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(e){}constructor(){this._cachedClippingPlane=u.bk(),this._projectionMatrix=u.b1(),this._globeViewProjMatrix32f=u.b0(),this._globeViewProjMatrixNoCorrection=u.b1(),this._globeViewProjMatrixNoCorrectionInverted=u.b1(),this._globeProjMatrixInverted=u.b1(),this._cameraPosition=u.bh(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new ci({calcMatrices:()=>{this._calcMatrices()},getConstrained:(e,r)=>this.getConstrained(e,r)}),this._coveringTilesDetailsProvider=new hs}clone(){const e=new Na;return e.apply(this),e}apply(e,r){this._globeLatitudeErrorCorrectionRadians=r||0,this._helper.apply(e)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const e=u.bh();return e[0]=this._cameraPosition[0],e[1]=this._cameraPosition[1],e[2]=this._cameraPosition[2],e}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(e){const{overscaledTileID:r,applyGlobeMatrix:a}=e,d=this._helper.getMercatorTileCoordinates(r);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:d,clippingPlane:this._cachedClippingPlane,projectionTransition:a?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(e){const r=this.pitchInRadians,a=this.cameraToCenterDistance/e,d=Math.sin(r)*a,y=Math.cos(r)*a+1,w=1/Math.sqrt(d*d+y*y)*1;let E=-d,A=y;const D=Math.sqrt(E*E+A*A);E/=D,A/=D;const N=[0,E,A];u.bl(N,N,[0,0,0],-this.bearingInRadians),u.bm(N,N,[0,0,0],-1*this.center.lat*Math.PI/180),u.bn(N,N,[0,0,0],this.center.lng*Math.PI/180);const G=1/u.bo(N);return u.aO(N,N,G),[...N,-w*G]}isLocationOccluded(e){return!this.isSurfacePointVisible(_i(e))}transformLightDirection(e){const r=this._helper._center.lng*Math.PI/180,a=this._helper._center.lat*Math.PI/180,d=Math.cos(a),y=[Math.sin(r)*d,Math.sin(a),Math.cos(r)*d],w=[y[2],0,-y[0]],E=[0,0,0];u.aU(E,w,y),u.aT(w,w),u.aT(E,E);const A=[0,0,0];return u.aT(A,[w[0]*e[0]+E[0]*e[1]+y[0]*e[2],w[1]*e[0]+E[1]*e[1]+y[1]*e[2],w[2]*e[0]+E[2]*e[1]+y[2]*e[2]]),A}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(e,r,a){const d=function(E,A,D){const N=1/(1<<D.z);return new u.$(E/u.Z*N+D.x*N,A/u.Z*N+D.y*N)}(e,r,a.canonical),y=(w=d.y,[u.bg(d.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-w*Math.PI*2))-.5*Math.PI]);var w;return this.getCircleRadiusCorrection()/Math.cos(y[1])}projectTileCoordinates(e,r,a,d){const y=a.canonical,w=il(e,r,y.x,y.y,y.z),E=1+(d?d(e,r):0)/u.bu,A=[w[0]*E,w[1]*E,w[2]*E,1];u.at(A,A,this._globeViewProjMatrixNoCorrection);const D=this._cachedClippingPlane,N=D[0]*w[0]+D[1]*w[1]+D[2]*w[2]+D[3]<0;return{point:new u.P(A[0]/A[3],A[1]/A[3]),signedDistanceFromCamera:A[3],isOccluded:N}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const e=Fi(this.worldSize,this.center.lat),r=u.b2(),a=u.b2();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*e),u.aY(r,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const d=this.centerOffset;r[8]=2*-d.x/this._helper._width,r[9]=2*d.y/this._helper._height,this._projectionMatrix=u.aZ(r),this._globeProjMatrixInverted=u.b2(),u.an(this._globeProjMatrixInverted,r),u.L(r,r,[0,0,-this.cameraToCenterDistance]),u.a_(r,r,this.rollInRadians),u.a$(r,r,-this.pitchInRadians),u.a_(r,r,this.bearingInRadians),u.L(r,r,[0,0,-e]);const y=u.bh();y[0]=e,y[1]=e,y[2]=e,u.a$(a,r,this.center.lat*Math.PI/180),u.bp(a,a,-this.center.lng*Math.PI/180),u.M(a,a,y),this._globeViewProjMatrixNoCorrection=a,u.a$(r,r,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),u.bp(r,r,-this.center.lng*Math.PI/180),u.M(r,r,y),this._globeViewProjMatrix32f=new Float32Array(r),this._globeViewProjMatrixNoCorrectionInverted=u.b2(),u.an(this._globeViewProjMatrixNoCorrectionInverted,a);const w=u.bh();this._cameraPosition=u.bh(),this._cameraPosition[2]=this.cameraToCenterDistance/e,u.bl(this._cameraPosition,this._cameraPosition,w,-this.rollInRadians),u.bm(this._cameraPosition,this._cameraPosition,w,this.pitchInRadians),u.bl(this._cameraPosition,this._cameraPosition,w,-this.bearingInRadians),u.aP(this._cameraPosition,this._cameraPosition,[0,0,1]),u.bm(this._cameraPosition,this._cameraPosition,w,-this.center.lat*Math.PI/180),u.bn(this._cameraPosition,this._cameraPosition,w,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(e);const E=u.aZ(this._globeViewProjMatrixNoCorrectionInverted);u.M(E,E,[1,1,-1]),this._cachedFrustum=On.fromInvProjectionMatrix(E)}calculateFogMatrix(e){u.w("calculateFogMatrix is not supported on globe projection.");const r=u.b2();return u.ad(r),r}getVisibleUnwrappedCoordinates(e){return[new u.aW(0,e)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(e){e&&u.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(e,r){if(!this._globeViewProjMatrixNoCorrection)return 1;const a=_i(e);u.aO(a,a,1+r/u.bu);const d=u.bk();return u.at(d,[a[0],a[1],a[2],1],this._globeViewProjMatrixNoCorrection),d[2]/d[3]}populateCache(e){}getBounds(){const e=.5*this.width,r=.5*this.height,a=[new u.P(0,0),new u.P(e,0),new u.P(this.width,0),new u.P(this.width,r),new u.P(this.width,this.height),new u.P(e,this.height),new u.P(0,this.height),new u.P(0,r)],d=[];for(const G of a)d.push(this.unprojectScreenPoint(G));let y=0,w=0,E=0,A=0;const D=this.center;for(const G of d){const Z=u.bq(D.lng,G.lng),X=u.bq(D.lat,G.lat);Z<w&&(w=Z),Z>y&&(y=Z),X<A&&(A=X),X>E&&(E=X)}const N=[D.lng+w,D.lat+A,D.lng+y,D.lat+E];return this.isSurfacePointOnScreen([0,1,0])&&(N[3]=90,N[0]=-180,N[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(N[1]=-90,N[0]=-180,N[2]=180),new br(N)}getConstrained(e,r){const a=u.ae(e.lat,-85.051129,u.af),d=u.ae(+r,this.minZoom+Ei(0,a),this.maxZoom);return{center:new u.Q(e.lng,a),zoom:d}}calculateCenterFromCameraLngLatAlt(e,r,a,d){return this._helper.calculateCenterFromCameraLngLatAlt(e,r,a,d)}setLocationAtPoint(e,r){const a=_i(this.unprojectScreenPoint(r)),d=_i(e),y=u.bh();u.br(y);const w=u.bh();u.bn(w,a,y,-this.center.lng*Math.PI/180),u.bm(w,w,y,this.center.lat*Math.PI/180);const E=d[0]*d[0]+d[2]*d[2],A=w[0]*w[0];if(E<A)return;const D=Math.sqrt(E-A),N=-D,G=u.bs(d[0],d[2],w[0],D),Z=u.bs(d[0],d[2],w[0],N),X=u.bh();u.bn(X,d,y,-G);const ne=u.bs(X[1],X[2],w[1],w[2]),be=u.bh();u.bn(be,d,y,-Z);const _e=u.bs(be[1],be[2],w[1],w[2]),Se=.5*Math.PI,ke=ne>=-Se&&ne<=Se,Le=_e>=-Se&&_e<=Se;let Me,De;if(ke&&Le){const It=this.center.lng*Math.PI/180,Ye=this.center.lat*Math.PI/180;u.bv(G,It)+u.bv(ne,Ye)<u.bv(Z,It)+u.bv(_e,Ye)?(Me=G,De=ne):(Me=Z,De=_e)}else if(ke)Me=G,De=ne;else{if(!Le)return;Me=Z,De=_e}const Ne=Me/Math.PI*180,je=De/Math.PI*180,at=this.center.lat;this.setCenter(new u.Q(Ne,u.ae(je,-90,90))),this.setZoom(this.zoom+Ei(at,this.center.lat))}locationToScreenPoint(e,r){const a=_i(e);if(r){const d=r.getElevationForLngLatZoom(e,this._helper._tileZoom);u.aO(a,a,1+d/u.bu)}return this._projectSurfacePointToScreen(a)}_projectSurfacePointToScreen(e){const r=u.bk();return u.at(r,[...e,1],this._globeViewProjMatrixNoCorrection),r[0]/=r[3],r[1]/=r[3],new u.P((.5*r[0]+.5)*this.width,(.5*-r[1]+.5)*this.height)}screenPointToMercatorCoordinate(e,r){if(r){const a=r.pointCoordinate(e);if(a)return a}return u.$.fromLngLat(this.unprojectScreenPoint(e))}screenPointToLocation(e,r){var a;return(a=this.screenPointToMercatorCoordinate(e,r))===null||a===void 0?void 0:a.toLngLat()}isPointOnMapSurface(e,r){const a=this._cameraPosition,d=this.getRayDirectionFromPixel(e);return!!this.rayPlanetIntersection(a,d)}getRayDirectionFromPixel(e){const r=u.bk();r[0]=e.x/this.width*2-1,r[1]=-1*(e.y/this.height*2-1),r[2]=1,r[3]=1,u.at(r,r,this._globeViewProjMatrixNoCorrectionInverted),r[0]/=r[3],r[1]/=r[3],r[2]/=r[3];const a=u.bh();a[0]=r[0]-this._cameraPosition[0],a[1]=r[1]-this._cameraPosition[1],a[2]=r[2]-this._cameraPosition[2];const d=u.bh();return u.aT(d,a),d}isSurfacePointVisible(e){const r=this._cachedClippingPlane;return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]+r[3]>=0}isSurfacePointOnScreen(e){if(!this.isSurfacePointVisible(e))return!1;const r=u.bk();return u.at(r,[...e,1],this._globeViewProjMatrixNoCorrection),r[0]/=r[3],r[1]/=r[3],r[2]/=r[3],r[0]>-1&&r[0]<1&&r[1]>-1&&r[1]<1&&r[2]>-1&&r[2]<1}rayPlanetIntersection(e,r){const a=u.aV(e,r),d=u.bh(),y=u.bh();u.aO(y,r,a),u.aS(d,e,y);const w=1-u.aV(d,d);if(w<0)return null;const E=u.aV(e,e)-1,A=-a+(a<0?1:-1)*Math.sqrt(w),D=E/A,N=A;return{tMin:Math.min(D,N),tMax:Math.max(D,N)}}unprojectScreenPoint(e){const r=this._cameraPosition,a=this.getRayDirectionFromPixel(e),d=this.rayPlanetIntersection(r,a);if(d){const N=u.bh();u.aP(N,r,[a[0]*d.tMin,a[1]*d.tMin,a[2]*d.tMin]);const G=u.bh();return u.aT(G,N),Ba(G)}const y=this._cachedClippingPlane,w=y[0]*a[0]+y[1]*a[1]+y[2]*a[2],E=-u.bt(y,r)/w,A=u.bh();if(E>0)u.aP(A,r,[a[0]*E,a[1]*E,a[2]*E]);else{const N=u.bh();u.aP(N,r,[2*a[0],2*a[1],2*a[2]]);const G=u.bt(this._cachedClippingPlane,N);u.aS(A,N,[this._cachedClippingPlane[0]*G,this._cachedClippingPlane[1]*G,this._cachedClippingPlane[2]*G])}const D=function(N){const G=u.bh();return G[0]=N[0]*-N[3],G[1]=N[1]*-N[3],G[2]=N[2]*-N[3],{center:G,radius:Math.sqrt(1-N[3]*N[3])}}(y);return Ba(function(N,G,Z){const X=u.bh();u.aS(X,Z,N);const ne=u.bh();return u.bi(ne,N,X,G/u.bj(X)),ne}(D.center,D.radius,A))}getMatrixForModel(e,r){const a=u.Q.convert(e),d=1/u.bu,y=u.b1();return u.bp(y,y,a.lng/180*Math.PI),u.a$(y,y,-a.lat/180*Math.PI),u.L(y,y,[0,0,1+r/u.bu]),u.a$(y,y,.5*Math.PI),u.M(y,y,[d,d,d]),y}getProjectionDataForCustomLayer(e=!0){const r=this.getProjectionData({overscaledTileID:new u.Y(0,0,0,0,0),applyGlobeMatrix:e});return r.tileMercatorCoords=[0,0,1,1],r}getFastPathSimpleProjectionMatrix(e){}}class Is{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(e){this._helper.setMinZoom(e)}setMaxZoom(e){this._helper.setMaxZoom(e)}setMinPitch(e){this._helper.setMinPitch(e)}setMaxPitch(e){this._helper.setMaxPitch(e)}setRenderWorldCopies(e){this._helper.setRenderWorldCopies(e)}setBearing(e){this._helper.setBearing(e)}setPitch(e){this._helper.setPitch(e)}setRoll(e){this._helper.setRoll(e)}setFov(e){this._helper.setFov(e)}setZoom(e){this._helper.setZoom(e)}setCenter(e){this._helper.setCenter(e)}setElevation(e){this._helper.setElevation(e)}setMinElevationForCurrentTile(e){this._helper.setMinElevationForCurrentTile(e)}setPadding(e){this._helper.setPadding(e)}interpolatePadding(e,r,a){return this._helper.interpolatePadding(e,r,a)}isPaddingEqual(e){return this._helper.isPaddingEqual(e)}resize(e,r,a=!0){this._helper.resize(e,r,a)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(e){this._helper.setMaxBounds(e)}overrideNearFarZ(e,r){this._helper.overrideNearFarZ(e,r)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(e){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),e)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(e,r){this._globeness=e,this._globeLatitudeErrorCorrectionRadians=r,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().recalculateCache(),this._mercatorTransform.getCoveringTilesDetailsProvider().recalculateCache()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new ci({calcMatrices:()=>{this._calcMatrices()},getConstrained:(e,r)=>this.getConstrained(e,r)}),this._globeness=1,this._mercatorTransform=new mu,this._verticalPerspectiveTransform=new Na}clone(){const e=new Is;return e._globeness=this._globeness,e._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,e.apply(this),e}apply(e){this._helper.apply(e),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(e){const r=this._mercatorTransform.getProjectionData(e),a=this._verticalPerspectiveTransform.getProjectionData(e);return{mainMatrix:this.isGlobeRendering?a.mainMatrix:r.mainMatrix,clippingPlane:a.clippingPlane,tileMercatorCoords:a.tileMercatorCoords,projectionTransition:e.applyGlobeMatrix?this._globeness:0,fallbackMatrix:r.fallbackMatrix}}isLocationOccluded(e){return this.currentTransform.isLocationOccluded(e)}transformLightDirection(e){return this.currentTransform.transformLightDirection(e)}getPixelScale(){return u.bc(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return u.bc(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(e,r,a){const d=this._mercatorTransform.getPitchedTextCorrection(e,r,a),y=this._verticalPerspectiveTransform.getPitchedTextCorrection(e,r,a);return u.bc(d,y,this._globeness)}projectTileCoordinates(e,r,a,d){return this.currentTransform.projectTileCoordinates(e,r,a,d)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(e){return this.currentTransform.calculateFogMatrix(e)}getVisibleUnwrappedCoordinates(e){return this.currentTransform.getVisibleUnwrappedCoordinates(e)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(e){this._mercatorTransform.recalculateZoomAndCenter(e),this._verticalPerspectiveTransform.recalculateZoomAndCenter(e)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(e,r){return this.currentTransform.lngLatToCameraDepth(e,r)}populateCache(e){this._mercatorTransform.populateCache(e),this._verticalPerspectiveTransform.populateCache(e)}getBounds(){return this.currentTransform.getBounds()}getConstrained(e,r){return this.currentTransform.getConstrained(e,r)}calculateCenterFromCameraLngLatAlt(e,r,a,d){return this._helper.calculateCenterFromCameraLngLatAlt(e,r,a,d)}setLocationAtPoint(e,r){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(e,r),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(e,r),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(e,r){return this.currentTransform.locationToScreenPoint(e,r)}screenPointToMercatorCoordinate(e,r){return this.currentTransform.screenPointToMercatorCoordinate(e,r)}screenPointToLocation(e,r){return this.currentTransform.screenPointToLocation(e,r)}isPointOnMapSurface(e,r){return this.currentTransform.isPointOnMapSurface(e,r)}getRayDirectionFromPixel(e){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(e)}getMatrixForModel(e,r){return this.currentTransform.getMatrixForModel(e,r)}getProjectionDataForCustomLayer(e=!0){const r=this._mercatorTransform.getProjectionDataForCustomLayer(e);if(!this.isGlobeRendering)return r;const a=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(e);return a.fallbackMatrix=r.mainMatrix,a}getFastPathSimpleProjectionMatrix(e){return this.currentTransform.getFastPathSimpleProjectionMatrix(e)}}class Mo{get useGlobeControls(){return!0}handlePanInertia(e,r){const a=va(e,r);return Math.abs(a.lng-r.center.lng)>180&&(a.lng=r.center.lng+179.5*Math.sign(a.lng-r.center.lng)),{easingCenter:a,easingOffset:new u.P(0,0)}}handleMapControlsRollPitchBearingZoom(e,r){const a=e.around,d=r.screenPointToLocation(a);e.bearingDelta&&r.setBearing(r.bearing+e.bearingDelta),e.pitchDelta&&r.setPitch(r.pitch+e.pitchDelta),e.rollDelta&&r.setRoll(r.roll+e.rollDelta);const y=r.zoom;e.zoomDelta&&r.setZoom(r.zoom+e.zoomDelta);const w=r.zoom-y;if(w===0)return;const E=u.bq(r.center.lng,d.lng),A=E/(Math.abs(E/180)+1),D=u.bq(r.center.lat,d.lat),N=r.getRayDirectionFromPixel(a),G=r.cameraPosition,Z=-1*u.aV(G,N),X=u.bh();u.aP(X,G,[N[0]*Z,N[1]*Z,N[2]*Z]);const ne=u.bo(X)-1,be=Math.exp(.5*-Math.max(ne-.3,0)),_e=Fi(r.worldSize,r.center.lat)/Math.min(r.width,r.height),Se=u.bf(_e,.9,.5,1,.25),ke=(1-u.ac(-w))*Math.min(be,Se),Le=r.center.lat,Me=r.zoom,De=new u.Q(r.center.lng+A*ke,u.ae(r.center.lat+D*ke,-85.051129,u.af));r.setLocationAtPoint(d,a);const Ne=r.center,je=u.bf(Math.abs(E),45,85,0,1),at=u.bf(_e,.75,.35,0,1),It=Math.pow(Math.max(je,at),.25),Ye=u.bq(Ne.lng,De.lng),ht=u.bq(Ne.lat,De.lat);r.setCenter(new u.Q(Ne.lng+Ye*It,Ne.lat+ht*It).wrap()),r.setZoom(Me+Ei(Le,r.center.lat))}handleMapControlsPan(e,r,a){if(!e.panDelta)return;const d=r.center.lat,y=r.zoom;r.setCenter(va(e.panDelta,r).wrap()),r.setZoom(y+Ei(d,r.center.lat))}cameraForBoxAndBearing(e,r,a,d,y){const w=as(e,r,a,d,y),E=r.left/y.width*2-1,A=(y.width-r.right)/y.width*2-1,D=r.top/y.height*-2+1,N=(y.height-r.bottom)/y.height*-2+1,G=u.bq(a.getWest(),a.getEast())<0,Z=G?a.getEast():a.getWest(),X=G?a.getWest():a.getEast(),ne=Math.max(a.getNorth(),a.getSouth()),be=Math.min(a.getNorth(),a.getSouth()),_e=Z+.5*u.bq(Z,X),Se=ne+.5*u.bq(ne,be),ke=y.clone();ke.setCenter(w.center),ke.setBearing(w.bearing),ke.setPitch(0),ke.setRoll(0),ke.setZoom(w.zoom);const Le=ke.modelViewProjectionMatrix,Me=[_i(a.getNorthWest()),_i(a.getNorthEast()),_i(a.getSouthWest()),_i(a.getSouthEast()),_i(new u.Q(X,Se)),_i(new u.Q(Z,Se)),_i(new u.Q(_e,ne)),_i(new u.Q(_e,be))],De=_i(w.center);let Ne=Number.POSITIVE_INFINITY;for(const je of Me)E<0&&(Ne=Mo.getLesserNonNegativeNonNull(Ne,Mo.solveVectorScale(je,De,Le,"x",E))),A>0&&(Ne=Mo.getLesserNonNegativeNonNull(Ne,Mo.solveVectorScale(je,De,Le,"x",A))),D>0&&(Ne=Mo.getLesserNonNegativeNonNull(Ne,Mo.solveVectorScale(je,De,Le,"y",D))),N<0&&(Ne=Mo.getLesserNonNegativeNonNull(Ne,Mo.solveVectorScale(je,De,Le,"y",N)));if(Number.isFinite(Ne)&&Ne!==0)return w.zoom=ke.zoom+u.ah(Ne),w;Oo()}handleJumpToCenterZoom(e,r){const a=e.center.lat,d=e.getConstrained(r.center?u.Q.convert(r.center):e.center,e.zoom).center;e.setCenter(d.wrap());const y=r.zoom!==void 0?+r.zoom:e.zoom+Ei(a,d.lat);e.zoom!==y&&e.setZoom(y)}handleEaseTo(e,r){const a=e.zoom,d=e.center,y=e.padding,w={roll:e.roll,pitch:e.pitch,bearing:e.bearing},E={roll:r.roll===void 0?e.roll:r.roll,pitch:r.pitch===void 0?e.pitch:r.pitch,bearing:r.bearing===void 0?e.bearing:r.bearing},A=r.zoom!==void 0,D=!e.isPaddingEqual(r.padding);let N=!1;const G=r.center?u.Q.convert(r.center):d,Z=e.getConstrained(G,a).center;Io(e,Z);const X=e.clone();X.setCenter(Z),X.setZoom(A?+r.zoom:a+Ei(d.lat,G.lat)),X.setBearing(r.bearing);const ne=new u.P(u.ae(e.centerPoint.x+r.offsetAsPoint.x,0,e.width),u.ae(e.centerPoint.y+r.offsetAsPoint.y,0,e.height));X.setLocationAtPoint(Z,ne);const be=(r.offset&&r.offsetAsPoint.mag())>0?X.center:Z,_e=A?+r.zoom:a+Ei(d.lat,be.lat),Se=a+Ei(d.lat,0),ke=_e+Ei(be.lat,0),Le=u.bq(d.lng,be.lng),Me=u.bq(d.lat,be.lat),De=u.ac(ke-Se);return N=_e!==a,{easeFunc:Ne=>{if(u.b6(w,E)||ro({startEulerAngles:w,endEulerAngles:E,tr:e,k:Ne,useSlerp:w.roll!=E.roll}),D&&e.interpolatePadding(y,r.padding,Ne),r.around)u.w("Easing around a point is not supported under globe projection."),e.setLocationAtPoint(r.around,r.aroundPoint);else{const je=ke>Se?Math.min(2,De):Math.max(.5,De),at=Math.pow(je,1-Ne),It=Vu(d,Le,Me,Ne*at);e.setCenter(It.wrap())}if(N){const je=u.B.number(Se,ke,Ne)+Ei(0,e.center.lat);e.setZoom(je)}},isZooming:N,elevationCenter:be}}handleFlyTo(e,r){const a=r.zoom!==void 0,d=e.center,y=e.zoom,w=e.padding,E=!e.isPaddingEqual(r.padding),A=e.getConstrained(u.Q.convert(r.center||r.locationAtOffset),y).center,D=a?+r.zoom:e.zoom+Ei(e.center.lat,A.lat),N=e.clone();N.setCenter(A),N.setZoom(D),N.setBearing(r.bearing);const G=new u.P(u.ae(e.centerPoint.x+r.offsetAsPoint.x,0,e.width),u.ae(e.centerPoint.y+r.offsetAsPoint.y,0,e.height));N.setLocationAtPoint(A,G);const Z=N.center;Io(e,Z);const X=function(Me,De,Ne){const je=_i(De),at=_i(Ne),It=u.aV(je,at),Ye=Math.acos(It),ht=cs(Me);return Ye/(2*Math.PI)*ht}(e,d,Z),ne=y+Ei(d.lat,0),be=D+Ei(Z.lat,0),_e=u.ac(be-ne);let Se;if(typeof r.minZoom=="number"){const Me=+r.minZoom+Ei(Z.lat,0),De=Math.min(Me,ne,be)+Ei(0,Z.lat),Ne=e.getConstrained(Z,De).zoom+Ei(Z.lat,0);Se=u.ac(Ne-ne)}const ke=u.bq(d.lng,Z.lng),Le=u.bq(d.lat,Z.lat);return{easeFunc:(Me,De,Ne,je)=>{const at=Vu(d,ke,Le,Ne);E&&e.interpolatePadding(w,r.padding,Me);const It=Me===1?Z:at;e.setCenter(It.wrap());const Ye=ne+u.ah(De);e.setZoom(Me===1?D:Ye+Ei(0,It.lat))},scaleOfZoom:_e,targetCenter:Z,scaleOfMinZoom:Se,pixelPathLength:X}}static solveVectorScale(e,r,a,d,y){const w=d==="x"?[a[0],a[4],a[8],a[12]]:[a[1],a[5],a[9],a[13]],E=[a[3],a[7],a[11],a[15]],A=e[0]*w[0]+e[1]*w[1]+e[2]*w[2],D=e[0]*E[0]+e[1]*E[1]+e[2]*E[2],N=r[0]*w[0]+r[1]*w[1]+r[2]*w[2],G=r[0]*E[0]+r[1]*E[1]+r[2]*E[2];return N+y*D===A+y*G||E[3]*(A-N)+w[3]*(G-D)+A*G==N*D?null:(N+w[3]-y*G-y*E[3])/(N-A-y*G+y*D)}static getLesserNonNegativeNonNull(e,r){return r!==null&&r>=0&&r<e?r:e}}class Zi{constructor(e){this._globe=e,this._mercatorCameraHelper=new ls,this._verticalPerspectiveCameraHelper=new Mo}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(e,r){return this.currentHelper.handlePanInertia(e,r)}handleMapControlsRollPitchBearingZoom(e,r){return this.currentHelper.handleMapControlsRollPitchBearingZoom(e,r)}handleMapControlsPan(e,r,a){this.currentHelper.handleMapControlsPan(e,r,a)}cameraForBoxAndBearing(e,r,a,d,y){return this.currentHelper.cameraForBoxAndBearing(e,r,a,d,y)}handleJumpToCenterZoom(e,r){this.currentHelper.handleJumpToCenterZoom(e,r)}handleEaseTo(e,r){return this.currentHelper.handleEaseTo(e,r)}handleFlyTo(e,r){return this.currentHelper.handleFlyTo(e,r)}}const Kn=(g,e)=>u.x(g,e&&e.filter(r=>r.identifier!=="source.canvas")),$a=u.bw();class Zu extends u.E{constructor(e,r={}){super(),this._rtlPluginLoaded=()=>{for(const a in this.sourceCaches){const d=this.sourceCaches[a].getSource().type;d!=="vector"&&d!=="geojson"||this.sourceCaches[a].reload()}},this.map=e,this.dispatcher=new Sr(ir(),e._getMapId()),this.dispatcher.registerMessageHandler("GG",(a,d)=>this.getGlyphs(a,d)),this.dispatcher.registerMessageHandler("GI",(a,d)=>this.getImages(a,d)),this.imageManager=new re,this.imageManager.setEventedParent(this),this.glyphManager=new tr(e._requestManager,r.localIdeographFontFamily),this.lineAtlas=new Wt(256,512),this.crossTileSymbolIndex=new sr,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new u.bx,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",u.by()),Bn().on(Si,this._rtlPluginLoaded),this.on("data",a=>{if(a.dataType!=="source"||a.sourceDataType!=="metadata")return;const d=this.sourceCaches[a.sourceId];if(!d)return;const y=d.getSource();if(y&&y.vectorLayerIds)for(const w in this._layers){const E=this._layers[w];E.source===y.id&&this._validateLayer(E)}})}loadURL(e,r={},a){this.fire(new u.l("dataloading",{dataType:"style"})),r.validate=typeof r.validate!="boolean"||r.validate;const d=this.map._requestManager.transformRequest(e,"Style");this._loadStyleRequest=new AbortController;const y=this._loadStyleRequest;u.j(d,this._loadStyleRequest).then(w=>{this._loadStyleRequest=null,this._load(w.data,r,a)}).catch(w=>{this._loadStyleRequest=null,w&&!y.signal.aborted&&this.fire(new u.k(w))})}loadJSON(e,r={},a){this.fire(new u.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,Te.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,r.validate=r.validate!==!1,this._load(e,r,a)}).catch(()=>{})}loadEmpty(){this.fire(new u.l("dataloading",{dataType:"style"})),this._load($a,{validate:!1})}_load(e,r,a){var d,y;const w=r.transformStyle?r.transformStyle(a,e):e;if(!r.validate||!Kn(this,u.y(w))){this._loaded=!0,this.stylesheet=w;for(const E in w.sources)this.addSource(E,w.sources[E],{validate:!1});w.sprite?this._loadSprite(w.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(w.glyphs),this._createLayers(),this.light=new or(this.stylesheet.light),this._setProjectionInternal(((d=this.stylesheet.projection)===null||d===void 0?void 0:d.type)||"mercator"),this.sky=new Pt(this.stylesheet.sky),this.map.setTerrain((y=this.stylesheet.terrain)!==null&&y!==void 0?y:null),this.fire(new u.l("data",{dataType:"style"})),this.fire(new u.l("style.load"))}}_createLayers(){const e=u.bz(this.stylesheet.layers);this.dispatcher.broadcast("SL",e),this._order=e.map(r=>r.id),this._layers={},this._serializedLayers=null;for(const r of e){const a=u.bA(r);a.setEventedParent(this,{layer:{id:r.id}}),this._layers[r.id]=a}}_loadSprite(e,r=!1,a=void 0){let d;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(y,w,E,A){return u._(this,void 0,void 0,function*(){const D=nt(y),N=E>1?"@2x":"",G={},Z={};for(const{id:X,url:ne}of D){const be=w.transformRequest(yt(ne,N,".json"),"SpriteJSON");G[X]=u.j(be,A);const _e=w.transformRequest(yt(ne,N,".png"),"SpriteImage");Z[X]=Je.getImage(_e,A)}return yield Promise.all([...Object.values(G),...Object.values(Z)]),function(X,ne){return u._(this,void 0,void 0,function*(){const be={};for(const _e in X){be[_e]={};const Se=Te.getImageCanvasContext((yield ne[_e]).data),ke=(yield X[_e]).data;for(const Le in ke){const{width:Me,height:De,x:Ne,y:je,sdf:at,pixelRatio:It,stretchX:Ye,stretchY:ht,content:Ct,textFitWidth:Jt,textFitHeight:er}=ke[Le];be[_e][Le]={data:null,pixelRatio:It,sdf:at,stretchX:Ye,stretchY:ht,content:Ct,textFitWidth:Jt,textFitHeight:er,spriteData:{width:Me,height:De,x:Ne,y:je,context:Se}}}}return be})}(G,Z)})}(e,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(y=>{if(this._spriteRequest=null,y)for(const w in y){this._spritesImagesIds[w]=[];const E=this._spritesImagesIds[w]?this._spritesImagesIds[w].filter(A=>!(A in y)):[];for(const A of E)this.imageManager.removeImage(A),this._changedImages[A]=!0;for(const A in y[w]){const D=w==="default"?A:`${w}:${A}`;this._spritesImagesIds[w].push(D),D in this.imageManager.images?this.imageManager.updateImage(D,y[w][A],!1):this.imageManager.addImage(D,y[w][A]),r&&(this._changedImages[D]=!0)}}}).catch(y=>{this._spriteRequest=null,d=y,this.fire(new u.k(d))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),r&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.l("data",{dataType:"style"})),a&&a(d)})}_unloadSprite(){for(const e of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(e),this._changedImages[e]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.l("data",{dataType:"style"}))}_validateLayer(e){const r=this.sourceCaches[e.source];if(!r)return;const a=e.sourceLayer;if(!a)return;const d=r.getSource();(d.type==="geojson"||d.vectorLayerIds&&d.vectorLayerIds.indexOf(a)===-1)&&this.fire(new u.k(new Error(`Source layer "${a}" does not exist on source "${d.id}" as specified by style layer "${e.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const e in this.sourceCaches)if(!this.sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(e,r=!1){const a=this._serializedAllLayers();if(!e||e.length===0)return Object.values(r?u.bB(a):a);const d=[];for(const y of e)if(a[y]){const w=r?u.bB(a[y]):a[y];d.push(w)}return d}_serializedAllLayers(){let e=this._serializedLayers;if(e)return e;e=this._serializedLayers={};const r=Object.keys(this._layers);for(const a of r){const d=this._layers[a];d.type!=="custom"&&(e[a]=d.serialize())}return e}hasTransitions(){var e,r,a;if(!((e=this.light)===null||e===void 0)&&e.hasTransition()||!((r=this.sky)===null||r===void 0)&&r.hasTransition()||!((a=this.projection)===null||a===void 0)&&a.hasTransition())return!0;for(const d in this.sourceCaches)if(this.sourceCaches[d].hasTransition())return!0;for(const d in this._layers)if(this._layers[d].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(e){if(!this._loaded)return;const r=this._changed;if(r){const d=Object.keys(this._updatedLayers),y=Object.keys(this._removedLayers);(d.length||y.length)&&this._updateWorkerLayers(d,y);for(const w in this._updatedSources){const E=this._updatedSources[w];if(E==="reload")this._reloadSource(w);else{if(E!=="clear")throw new Error(`Invalid action ${E}`);this._clearSource(w)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const w in this._updatedPaintProps)this._layers[w].updateTransitions(e);this.light.updateTransitions(e),this.sky.updateTransitions(e),this._resetUpdates()}const a={};for(const d in this.sourceCaches){const y=this.sourceCaches[d];a[d]=y.used,y.used=!1}for(const d of this._order){const y=this._layers[d];y.recalculate(e,this._availableImages),!y.isHidden(e.zoom)&&y.source&&(this.sourceCaches[y.source].used=!0)}for(const d in a){const y=this.sourceCaches[d];!!a[d]!=!!y.used&&y.fire(new u.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:d}))}this.light.recalculate(e),this.sky.recalculate(e),this.projection.recalculate(e),this.z=e.zoom,r&&this.fire(new u.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const e=Object.keys(this._changedImages);if(e.length){for(const r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(e,r){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(e,!1),removedIds:r})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(e,r={}){var a;this._checkLoaded();const d=this.serialize();if(e=r.transformStyle?r.transformStyle(d,e):e,((a=r.validate)===null||a===void 0||a)&&Kn(this,u.y(e)))return!1;(e=u.bB(e)).layers=u.bz(e.layers);const y=u.bC(d,e),w=this._getOperationsToPerform(y);if(w.unimplemented.length>0)throw new Error(`Unimplemented: ${w.unimplemented.join(", ")}.`);if(w.operations.length===0)return!1;for(const E of w.operations)E();return this.stylesheet=e,this._serializedLayers=null,!0}_getOperationsToPerform(e){const r=[],a=[];for(const d of e)switch(d.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":r.push(()=>this.addLayer.apply(this,d.args));break;case"removeLayer":r.push(()=>this.removeLayer.apply(this,d.args));break;case"setPaintProperty":r.push(()=>this.setPaintProperty.apply(this,d.args));break;case"setLayoutProperty":r.push(()=>this.setLayoutProperty.apply(this,d.args));break;case"setFilter":r.push(()=>this.setFilter.apply(this,d.args));break;case"addSource":r.push(()=>this.addSource.apply(this,d.args));break;case"removeSource":r.push(()=>this.removeSource.apply(this,d.args));break;case"setLayerZoomRange":r.push(()=>this.setLayerZoomRange.apply(this,d.args));break;case"setLight":r.push(()=>this.setLight.apply(this,d.args));break;case"setGeoJSONSourceData":r.push(()=>this.setGeoJSONSourceData.apply(this,d.args));break;case"setGlyphs":r.push(()=>this.setGlyphs.apply(this,d.args));break;case"setSprite":r.push(()=>this.setSprite.apply(this,d.args));break;case"setTerrain":r.push(()=>this.map.setTerrain.apply(this,d.args));break;case"setSky":r.push(()=>this.setSky.apply(this,d.args));break;case"setProjection":this.setProjection.apply(this,d.args);break;case"setTransition":r.push(()=>{});break;default:a.push(d.command)}return{operations:r,unimplemented:a}}addImage(e,r){if(this.getImage(e))return this.fire(new u.k(new Error(`An image named "${e}" already exists.`)));this.imageManager.addImage(e,r),this._afterImageUpdated(e)}updateImage(e,r){this.imageManager.updateImage(e,r)}getImage(e){return this.imageManager.getImage(e)}removeImage(e){if(!this.getImage(e))return this.fire(new u.k(new Error(`An image named "${e}" does not exist.`)));this.imageManager.removeImage(e),this._afterImageUpdated(e)}_afterImageUpdated(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(e,r,a={}){if(this._checkLoaded(),this.sourceCaches[e]!==void 0)throw new Error(`Source "${e}" already exists.`);if(!r.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(r).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(r.type)>=0&&this._validate(u.y.source,`sources.${e}`,r,null,a))return;this.map&&this.map._collectResourceTiming&&(r.collectResourceTiming=!0);const d=this.sourceCaches[e]=new rt(e,r,this.dispatcher);d.style=this,d.setEventedParent(this,()=>({isSourceLoaded:d.loaded(),source:d.serialize(),sourceId:e})),d.onAdd(this.map),this._changed=!0}removeSource(e){if(this._checkLoaded(),this.sourceCaches[e]===void 0)throw new Error("There is no source with this ID");for(const a in this._layers)if(this._layers[a].source===e)return this.fire(new u.k(new Error(`Source "${e}" cannot be removed while layer "${a}" is using it.`)));const r=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],r.fire(new u.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),r.setEventedParent(null),r.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(e,r){if(this._checkLoaded(),this.sourceCaches[e]===void 0)throw new Error(`There is no source with this ID=${e}`);const a=this.sourceCaches[e].getSource();if(a.type!=="geojson")throw new Error(`geojsonSource.type is ${a.type}, which is !== 'geojson`);a.setData(r),this._changed=!0}getSource(e){return this.sourceCaches[e]&&this.sourceCaches[e].getSource()}addLayer(e,r,a={}){this._checkLoaded();const d=e.id;if(this.getLayer(d))return void this.fire(new u.k(new Error(`Layer "${d}" already exists on this map.`)));let y;if(e.type==="custom"){if(Kn(this,u.bD(e)))return;y=u.bA(e)}else{if("source"in e&&typeof e.source=="object"&&(this.addSource(d,e.source),e=u.bB(e),e=u.e(e,{source:d})),this._validate(u.y.layer,`layers.${d}`,e,{arrayIndex:-1},a))return;y=u.bA(e),this._validateLayer(y),y.setEventedParent(this,{layer:{id:d}})}const w=r?this._order.indexOf(r):this._order.length;if(r&&w===-1)this.fire(new u.k(new Error(`Cannot add layer "${d}" before non-existing layer "${r}".`)));else{if(this._order.splice(w,0,d),this._layerOrderChanged=!0,this._layers[d]=y,this._removedLayers[d]&&y.source&&y.type!=="custom"){const E=this._removedLayers[d];delete this._removedLayers[d],E.type!==y.type?this._updatedSources[y.source]="clear":(this._updatedSources[y.source]="reload",this.sourceCaches[y.source].pause())}this._updateLayer(y),y.onAdd&&y.onAdd(this.map)}}moveLayer(e,r){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire(new u.k(new Error(`The layer '${e}' does not exist in the map's style and cannot be moved.`)));if(e===r)return;const a=this._order.indexOf(e);this._order.splice(a,1);const d=r?this._order.indexOf(r):this._order.length;r&&d===-1?this.fire(new u.k(new Error(`Cannot move layer "${e}" before non-existing layer "${r}".`))):(this._order.splice(d,0,e),this._layerOrderChanged=!0)}removeLayer(e){this._checkLoaded();const r=this._layers[e];if(!r)return void this.fire(new u.k(new Error(`Cannot remove non-existing layer "${e}".`)));r.setEventedParent(null);const a=this._order.indexOf(e);this._order.splice(a,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=r,delete this._layers[e],this._serializedLayers&&delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],r.onRemove&&r.onRemove(this.map)}getLayer(e){return this._layers[e]}getLayersOrder(){return[...this._order]}hasLayer(e){return e in this._layers}setLayerZoomRange(e,r,a){this._checkLoaded();const d=this.getLayer(e);d?d.minzoom===r&&d.maxzoom===a||(r!=null&&(d.minzoom=r),a!=null&&(d.maxzoom=a),this._updateLayer(d)):this.fire(new u.k(new Error(`Cannot set the zoom range of non-existing layer "${e}".`)))}setFilter(e,r,a={}){this._checkLoaded();const d=this.getLayer(e);if(d){if(!u.bE(d.filter,r))return r==null?(d.filter=void 0,void this._updateLayer(d)):void(this._validate(u.y.filter,`layers.${d.id}.filter`,r,null,a)||(d.filter=u.bB(r),this._updateLayer(d)))}else this.fire(new u.k(new Error(`Cannot filter non-existing layer "${e}".`)))}getFilter(e){return u.bB(this.getLayer(e).filter)}setLayoutProperty(e,r,a,d={}){this._checkLoaded();const y=this.getLayer(e);y?u.bE(y.getLayoutProperty(r),a)||(y.setLayoutProperty(r,a,d),this._updateLayer(y)):this.fire(new u.k(new Error(`Cannot style non-existing layer "${e}".`)))}getLayoutProperty(e,r){const a=this.getLayer(e);if(a)return a.getLayoutProperty(r);this.fire(new u.k(new Error(`Cannot get style of non-existing layer "${e}".`)))}setPaintProperty(e,r,a,d={}){this._checkLoaded();const y=this.getLayer(e);y?u.bE(y.getPaintProperty(r),a)||(y.setPaintProperty(r,a,d)&&this._updateLayer(y),this._changed=!0,this._updatedPaintProps[e]=!0,this._serializedLayers=null):this.fire(new u.k(new Error(`Cannot style non-existing layer "${e}".`)))}getPaintProperty(e,r){return this.getLayer(e).getPaintProperty(r)}setFeatureState(e,r){this._checkLoaded();const a=e.source,d=e.sourceLayer,y=this.sourceCaches[a];if(y===void 0)return void this.fire(new u.k(new Error(`The source '${a}' does not exist in the map's style.`)));const w=y.getSource().type;w==="geojson"&&d?this.fire(new u.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):w!=="vector"||d?(e.id===void 0&&this.fire(new u.k(new Error("The feature id parameter must be provided."))),y.setFeatureState(d,e.id,r)):this.fire(new u.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(e,r){this._checkLoaded();const a=e.source,d=this.sourceCaches[a];if(d===void 0)return void this.fire(new u.k(new Error(`The source '${a}' does not exist in the map's style.`)));const y=d.getSource().type,w=y==="vector"?e.sourceLayer:void 0;y!=="vector"||w?r&&typeof e.id!="string"&&typeof e.id!="number"?this.fire(new u.k(new Error("A feature id is required to remove its specific state property."))):d.removeFeatureState(w,e.id,r):this.fire(new u.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(e){this._checkLoaded();const r=e.source,a=e.sourceLayer,d=this.sourceCaches[r];if(d!==void 0)return d.getSource().type!=="vector"||a?(e.id===void 0&&this.fire(new u.k(new Error("The feature id parameter must be provided."))),d.getFeatureState(a,e.id)):void this.fire(new u.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new u.k(new Error(`The source '${r}' does not exist in the map's style.`)))}getTransition(){return u.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const e=u.bF(this.sourceCaches,y=>y.serialize()),r=this._serializeByIds(this._order,!0),a=this.map.getTerrain()||void 0,d=this.stylesheet;return u.bG({version:d.version,name:d.name,metadata:d.metadata,light:d.light,sky:d.sky,center:d.center,zoom:d.zoom,bearing:d.bearing,pitch:d.pitch,sprite:d.sprite,glyphs:d.glyphs,transition:d.transition,projection:d.projection,sources:e,layers:r,terrain:a},y=>y!==void 0)}_updateLayer(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&this.sourceCaches[e.source].getSource().type!=="raster"&&(this._updatedSources[e.source]="reload",this.sourceCaches[e.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(e){const r=w=>this._layers[w].type==="fill-extrusion",a={},d=[];for(let w=this._order.length-1;w>=0;w--){const E=this._order[w];if(r(E)){a[E]=w;for(const A of e){const D=A[E];if(D)for(const N of D)d.push(N)}}}d.sort((w,E)=>E.intersectionZ-w.intersectionZ);const y=[];for(let w=this._order.length-1;w>=0;w--){const E=this._order[w];if(r(E))for(let A=d.length-1;A>=0;A--){const D=d[A].feature;if(a[D.layer.id]<w)break;y.push(D),d.pop()}else for(const A of e){const D=A[E];if(D)for(const N of D)y.push(N.feature)}}return y}queryRenderedFeatures(e,r,a){r&&r.filter&&this._validate(u.y.filter,"queryRenderedFeatures.filter",r.filter,null,r);const d={};if(r&&r.layers){if(!(Array.isArray(r.layers)||r.layers instanceof Set))return this.fire(new u.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const D of r.layers){const N=this._layers[D];if(!N)return this.fire(new u.k(new Error(`The layer '${D}' does not exist in the map's style and cannot be queried for features.`))),[];d[N.source]=!0}}const y=[];r.availableImages=this._availableImages;const w=this._serializedAllLayers(),E=r.layers instanceof Set?r.layers:Array.isArray(r.layers)?new Set(r.layers):null,A=Object.assign(Object.assign({},r),{layers:E});for(const D in this.sourceCaches)r.layers&&!d[D]||y.push(Qr(this.sourceCaches[D],this._layers,w,e,A,a,this.map.terrain?(N,G,Z)=>this.map.terrain.getElevation(N,G,Z):void 0));return this.placement&&y.push(function(D,N,G,Z,X,ne,be){const _e={},Se=ne.queryRenderedSymbols(Z),ke=[];for(const Le of Object.keys(Se).map(Number))ke.push(be[Le]);ke.sort(Tr);for(const Le of ke){const Me=Le.featureIndex.lookupSymbolFeatures(Se[Le.bucketInstanceId],N,Le.bucketIndex,Le.sourceLayerIndex,X.filter,X.layers,X.availableImages,D);for(const De in Me){const Ne=_e[De]=_e[De]||[],je=Me[De];je.sort((at,It)=>{const Ye=Le.featureSortOrder;if(Ye){const ht=Ye.indexOf(at.featureIndex);return Ye.indexOf(It.featureIndex)-ht}return It.featureIndex-at.featureIndex});for(const at of je)Ne.push(at)}}return function(Le,Me,De){for(const Ne in Le)for(const je of Le[Ne])tn(je,De[Me[Ne].source]);return Le}(_e,D,G)}(this._layers,w,this.sourceCaches,e,A,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(y)}querySourceFeatures(e,r){r&&r.filter&&this._validate(u.y.filter,"querySourceFeatures.filter",r.filter,null,r);const a=this.sourceCaches[e];return a?function(d,y){const w=d.getRenderableIds().map(D=>d.getTileByID(D)),E=[],A={};for(let D=0;D<w.length;D++){const N=w[D],G=N.tileID.canonical.key;A[G]||(A[G]=!0,N.querySourceFeatures(E,y))}return E}(a,r):[]}getLight(){return this.light.getLight()}setLight(e,r={}){this._checkLoaded();const a=this.light.getLight();let d=!1;for(const w in e)if(!u.bE(e[w],a[w])){d=!0;break}if(!d)return;const y={now:Te.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,r),this.light.updateTransitions(y)}getProjection(){var e;return(e=this.stylesheet)===null||e===void 0?void 0:e.projection}setProjection(e){if(this._checkLoaded(),this.projection){if(this.projection.name===e.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=e,this._setProjectionInternal(e.type)}getSky(){var e;return(e=this.stylesheet)===null||e===void 0?void 0:e.sky}setSky(e,r={}){this._checkLoaded();const a=this.getSky();let d=!1;if(!e&&!a)return;if(e&&!a)d=!0;else if(!e&&a)d=!0;else for(const w in e)if(!u.bE(e[w],a[w])){d=!0;break}if(!d)return;const y={now:Te.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=e,this.sky.setSky(e,r),this.sky.updateTransitions(y)}_setProjectionInternal(e){const r=function(a){if(Array.isArray(a)){const d=new nl({type:a});return{projection:d,transform:new Is,cameraHelper:new Zi(d)}}switch(a){case"mercator":return{projection:new ss,transform:new mu,cameraHelper:new ls};case"globe":{const d=new nl({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:d,transform:new Is,cameraHelper:new Zi(d)}}case"vertical-perspective":return{projection:new Ql,transform:new Na,cameraHelper:new Mo};default:return u.w(`Unknown projection name: ${a}. Falling back to mercator projection.`),{projection:new ss,transform:new mu,cameraHelper:new ls}}}(e);this.projection=r.projection,this.map.migrateProjection(r.transform,r.cameraHelper);for(const a in this.sourceCaches)this.sourceCaches[a].reload()}_validate(e,r,a,d,y={}){return(!y||y.validate!==!1)&&Kn(this,e.call(u.y,u.e({key:r,style:this.serialize(),value:a,styleSpec:u.v},d)))}_remove(e=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Bn().off(Si,this._rtlPluginLoaded);for(const r in this._layers)this._layers[r].setEventedParent(null);for(const r in this.sourceCaches){const a=this.sourceCaches[r];a.setEventedParent(null),a.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),e&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(e)}_clearSource(e){this.sourceCaches[e].clearTiles()}_reloadSource(e){this.sourceCaches[e].resume(),this.sourceCaches[e].reload()}_updateSources(e){for(const r in this.sourceCaches)this.sourceCaches[r].update(e,this.map.terrain)}_generateCollisionBoxes(){for(const e in this.sourceCaches)this._reloadSource(e)}_updatePlacement(e,r,a,d,y=!1){let w=!1,E=!1;const A={};for(const D of this._order){const N=this._layers[D];if(N.type!=="symbol")continue;if(!A[N.source]){const Z=this.sourceCaches[N.source];A[N.source]=Z.getRenderableIds(!0).map(X=>Z.getTileByID(X)).sort((X,ne)=>ne.tileID.overscaledZ-X.tileID.overscaledZ||(X.tileID.isLessThan(ne.tileID)?-1:1))}const G=this.crossTileSymbolIndex.addLayer(N,A[N.source],e.center.lng);w=w||G}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((y=y||this._layerOrderChanged||a===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(Te.now(),e.zoom))&&(this.pauseablePlacement=new he(e,this.map.terrain,this._order,y,r,a,d,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,A),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(Te.now()),E=!0),w&&this.pauseablePlacement.placement.setStale()),E||w)for(const D of this._order){const N=this._layers[D];N.type==="symbol"&&this.placement.updateLayerOpacities(N,A[N.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(Te.now())}_releaseSymbolFadeTiles(){for(const e in this.sourceCaches)this.sourceCaches[e].releaseSymbolFadeTiles()}getImages(e,r){return u._(this,void 0,void 0,function*(){const a=yield this.imageManager.getImages(r.icons);this._updateTilesForChangedImages();const d=this.sourceCaches[r.source];return d&&d.setDependencies(r.tileID.key,r.type,r.icons),a})}getGlyphs(e,r){return u._(this,void 0,void 0,function*(){const a=yield this.glyphManager.getGlyphs(r.stacks),d=this.sourceCaches[r.source];return d&&d.setDependencies(r.tileID.key,r.type,[""]),a})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(e,r={}){this._checkLoaded(),e&&this._validate(u.y.glyphs,"glyphs",e,null,r)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=e,this.glyphManager.entries={},this.glyphManager.setURL(e))}addSprite(e,r,a={},d){this._checkLoaded();const y=[{id:e,url:r}],w=[...nt(this.stylesheet.sprite),...y];this._validate(u.y.sprite,"sprite",w,null,a)||(this.stylesheet.sprite=w,this._loadSprite(y,!0,d))}removeSprite(e){this._checkLoaded();const r=nt(this.stylesheet.sprite);if(r.find(a=>a.id===e)){if(this._spritesImagesIds[e])for(const a of this._spritesImagesIds[e])this.imageManager.removeImage(a),this._changedImages[a]=!0;r.splice(r.findIndex(a=>a.id===e),1),this.stylesheet.sprite=r.length>0?r:void 0,delete this._spritesImagesIds[e],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.l("data",{dataType:"style"}))}else this.fire(new u.k(new Error(`Sprite "${e}" doesn't exists on this map.`)))}getSprite(){return nt(this.stylesheet.sprite)}setSprite(e,r={},a){this._checkLoaded(),e&&this._validate(u.y.sprite,"sprite",e,null,r)||(this.stylesheet.sprite=e,e?this._loadSprite(e,!0,a):(this._unloadSprite(),a&&a(null)))}}var Bh=u.aG([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class yu{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(e,r,a,d,y,w,E,A,D){this.context=e;let N=this.boundPaintVertexBuffers.length!==d.length;for(let G=0;!N&&G<d.length;G++)this.boundPaintVertexBuffers[G]!==d[G]&&(N=!0);!this.vao||this.boundProgram!==r||this.boundLayoutVertexBuffer!==a||N||this.boundIndexBuffer!==y||this.boundVertexOffset!==w||this.boundDynamicVertexBuffer!==E||this.boundDynamicVertexBuffer2!==A||this.boundDynamicVertexBuffer3!==D?this.freshBind(r,a,d,y,w,E,A,D):(e.bindVertexArray.set(this.vao),E&&E.bind(),y&&y.dynamicDraw&&y.bind(),A&&A.bind(),D&&D.bind())}freshBind(e,r,a,d,y,w,E,A){const D=e.numAttributes,N=this.context,G=N.gl;this.vao&&this.destroy(),this.vao=N.createVertexArray(),N.bindVertexArray.set(this.vao),this.boundProgram=e,this.boundLayoutVertexBuffer=r,this.boundPaintVertexBuffers=a,this.boundIndexBuffer=d,this.boundVertexOffset=y,this.boundDynamicVertexBuffer=w,this.boundDynamicVertexBuffer2=E,this.boundDynamicVertexBuffer3=A,r.enableAttributes(G,e);for(const Z of a)Z.enableAttributes(G,e);w&&w.enableAttributes(G,e),E&&E.enableAttributes(G,e),A&&A.enableAttributes(G,e),r.bind(),r.setVertexAttribPointers(G,e,y);for(const Z of a)Z.bind(),Z.setVertexAttribPointers(G,e,y);w&&(w.bind(),w.setVertexAttribPointers(G,e,y)),d&&d.bind(),E&&(E.bind(),E.setVertexAttribPointers(G,e,y)),A&&(A.bind(),A.setVertexAttribPointers(G,e,y)),N.currentNumAttributes=D}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const Nh=(g,e,r,a,d)=>({u_texture:0,u_ele_delta:g,u_fog_matrix:e,u_fog_color:r?r.properties.get("fog-color"):u.b7.white,u_fog_ground_blend:r?r.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:d?0:r?r.calculateFogBlendOpacity(a):0,u_horizon_color:r?r.properties.get("horizon-color"):u.b7.white,u_horizon_fog_blend:r?r.properties.get("horizon-fog-blend"):1,u_is_globe_mode:d?1:0}),_u={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function sl(g){const e=[];for(let r=0;r<g.length;r++){if(g[r]===null)continue;const a=g[r].split(" ");e.push(a.pop())}return e}class kl{constructor(e,r,a,d,y,w,E,A,D=[]){const N=e.gl;this.program=N.createProgram();const G=sl(r.staticAttributes),Z=a?a.getBinderAttributes():[],X=G.concat(Z),ne=kr.prelude.staticUniforms?sl(kr.prelude.staticUniforms):[],be=E.staticUniforms?sl(E.staticUniforms):[],_e=r.staticUniforms?sl(r.staticUniforms):[],Se=a?a.getBinderUniforms():[],ke=ne.concat(be).concat(_e).concat(Se),Le=[];for(const Ye of ke)Le.indexOf(Ye)<0&&Le.push(Ye);const Me=a?a.defines():[];no(N)&&Me.unshift("#version 300 es"),y&&Me.push("#define OVERDRAW_INSPECTOR;"),w&&Me.push("#define TERRAIN3D;"),A&&Me.push(A),D&&Me.push(...D);let De=Me.concat(kr.prelude.fragmentSource,E.fragmentSource,r.fragmentSource).join(`
`),Ne=Me.concat(kr.prelude.vertexSource,E.vertexSource,r.vertexSource).join(`
`);no(N)||(De=function(Ye){return Ye.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(De),Ne=function(Ye){return Ye.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(Ne));const je=N.createShader(N.FRAGMENT_SHADER);if(N.isContextLost())return void(this.failedToCreate=!0);if(N.shaderSource(je,De),N.compileShader(je),!N.getShaderParameter(je,N.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${N.getShaderInfoLog(je)}`);N.attachShader(this.program,je);const at=N.createShader(N.VERTEX_SHADER);if(N.isContextLost())return void(this.failedToCreate=!0);if(N.shaderSource(at,Ne),N.compileShader(at),!N.getShaderParameter(at,N.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${N.getShaderInfoLog(at)}`);N.attachShader(this.program,at),this.attributes={};const It={};this.numAttributes=X.length;for(let Ye=0;Ye<this.numAttributes;Ye++)X[Ye]&&(N.bindAttribLocation(this.program,Ye,X[Ye]),this.attributes[X[Ye]]=Ye);if(N.linkProgram(this.program),!N.getProgramParameter(this.program,N.LINK_STATUS))throw new Error(`Program failed to link: ${N.getProgramInfoLog(this.program)}`);N.deleteShader(at),N.deleteShader(je);for(let Ye=0;Ye<Le.length;Ye++){const ht=Le[Ye];if(ht&&!It[ht]){const Ct=N.getUniformLocation(this.program,ht);Ct&&(It[ht]=Ct)}}this.fixedUniforms=d(e,It),this.terrainUniforms=((Ye,ht)=>({u_depth:new u.bH(Ye,ht.u_depth),u_terrain:new u.bH(Ye,ht.u_terrain),u_terrain_dim:new u.b8(Ye,ht.u_terrain_dim),u_terrain_matrix:new u.bJ(Ye,ht.u_terrain_matrix),u_terrain_unpack:new u.bK(Ye,ht.u_terrain_unpack),u_terrain_exaggeration:new u.b8(Ye,ht.u_terrain_exaggeration)}))(e,It),this.projectionUniforms=((Ye,ht)=>({u_projection_matrix:new u.bJ(Ye,ht.u_projection_matrix),u_projection_tile_mercator_coords:new u.bK(Ye,ht.u_projection_tile_mercator_coords),u_projection_clipping_plane:new u.bK(Ye,ht.u_projection_clipping_plane),u_projection_transition:new u.b8(Ye,ht.u_projection_transition),u_projection_fallback_matrix:new u.bJ(Ye,ht.u_projection_fallback_matrix)}))(e,It),this.binderUniforms=a?a.getUniforms(e,It):[]}draw(e,r,a,d,y,w,E,A,D,N,G,Z,X,ne,be,_e,Se,ke,Le){const Me=e.gl;if(this.failedToCreate)return;if(e.program.set(this.program),e.setDepthMode(a),e.setStencilMode(d),e.setColorMode(y),e.setCullFace(w),A){e.activeTexture.set(Me.TEXTURE2),Me.bindTexture(Me.TEXTURE_2D,A.depthTexture),e.activeTexture.set(Me.TEXTURE3),Me.bindTexture(Me.TEXTURE_2D,A.texture);for(const Ne in this.terrainUniforms)this.terrainUniforms[Ne].set(A[Ne])}if(D)for(const Ne in D)this.projectionUniforms[_u[Ne]].set(D[Ne]);if(E)for(const Ne in this.fixedUniforms)this.fixedUniforms[Ne].set(E[Ne]);_e&&_e.setUniforms(e,this.binderUniforms,ne,{zoom:be});let De=0;switch(r){case Me.LINES:De=2;break;case Me.TRIANGLES:De=3;break;case Me.LINE_STRIP:De=1}for(const Ne of X.get()){const je=Ne.vaos||(Ne.vaos={});(je[N]||(je[N]=new yu)).bind(e,this,G,_e?_e.getPaintVertexBuffers():[],Z,Ne.vertexOffset,Se,ke,Le),Me.drawElements(r,Ne.primitiveLength*De,Me.UNSIGNED_SHORT,Ne.primitiveOffset*De*2)}}}function Al(g,e,r){const a=1/u.az(r,1,e.transform.tileZoom),d=Math.pow(2,r.tileID.overscaledZ),y=r.tileSize*Math.pow(2,e.transform.tileZoom)/d,w=y*(r.tileID.canonical.x+r.tileID.wrap*d),E=y*r.tileID.canonical.y;return{u_image:0,u_texsize:r.imageAtlasTexture.size,u_scale:[a,g.fromScale,g.toScale],u_fade:g.t,u_pixel_coord_upper:[w>>16,E>>16],u_pixel_coord_lower:[65535&w,65535&E]}}const ja=(g,e,r,a)=>{const d=g.style.light,y=d.properties.get("position"),w=[y.x,y.y,y.z],E=u.bN();d.properties.get("anchor")==="viewport"&&u.bO(E,g.transform.bearingInRadians),u.bP(w,w,E);const A=g.transform.transformLightDirection(w),D=d.properties.get("color");return{u_lightpos:w,u_lightpos_globe:A,u_lightintensity:d.properties.get("intensity"),u_lightcolor:[D.r,D.g,D.b],u_vertical_gradient:+e,u_opacity:r,u_fill_translate:a}},Ms=(g,e,r,a,d,y,w)=>u.e(ja(g,e,r,a),Al(y,g,w),{u_height_factor:-Math.pow(2,d.overscaledZ)/w.tileSize/8}),Gu=(g,e,r,a)=>u.e(Al(e,g,r),{u_fill_translate:a}),Wu=(g,e)=>({u_world:g,u_fill_translate:e}),$=(g,e,r,a,d)=>u.e(Gu(g,e,r,d),{u_world:a}),q=(g,e,r,a,d)=>{const y=g.transform;let w,E,A=0;if(r.paint.get("circle-pitch-alignment")==="map"){const D=u.az(e,1,y.zoom);w=!0,E=[D,D],A=D/(u.Z*Math.pow(2,e.tileID.overscaledZ))*2*Math.PI*d}else w=!1,E=y.pixelsToGLUnits;return{u_camera_to_center_distance:y.cameraToCenterDistance,u_scale_with_map:+(r.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+w,u_device_pixel_ratio:g.pixelRatio,u_extrude_scale:E,u_globe_extrude_scale:A,u_translate:a}},ue=g=>({u_pixel_extrude_scale:[1/g.width,1/g.height]}),Pe=g=>({u_viewport_size:[g.width,g.height]}),_t=(g,e=1)=>({u_color:g,u_overlay:0,u_overlay_scale:e}),ot=(g,e,r,a)=>{const d=u.az(g,1,e)/(u.Z*Math.pow(2,g.tileID.overscaledZ))*2*Math.PI*a;return{u_extrude_scale:u.az(g,1,e),u_intensity:r,u_globe_extrude_scale:d}},Nt=(g,e,r,a)=>{const d=u.K();u.bQ(d,0,g.width,g.height,0,0,1);const y=g.context.gl;return{u_matrix:d,u_world:[y.drawingBufferWidth,y.drawingBufferHeight],u_image:r,u_color_ramp:a,u_opacity:e.paint.get("heatmap-opacity")}},ar=(g,e,r)=>{const a=r.paint.get("hillshade-accent-color");let d;switch(r.paint.get("hillshade-method")){case"basic":d=4;break;case"combined":d=1;break;case"igor":d=2;break;case"multidirectional":d=3;break;default:d=0}const y=r.getIlluminationProperties();for(let w=0;w<y.directionRadians.length;w++)r.paint.get("hillshade-illumination-anchor")==="viewport"&&(y.directionRadians[w]+=g.transform.bearingInRadians);return{u_image:0,u_latrange:pn(0,e.tileID),u_exaggeration:r.paint.get("hillshade-exaggeration"),u_altitudes:y.altitudeRadians,u_azimuths:y.directionRadians,u_accent:a,u_method:d,u_highlights:y.highlightColor,u_shadows:y.shadowColor}},Br=(g,e)=>{const r=e.stride,a=u.K();return u.bQ(a,0,u.Z,-8192,0,0,1),u.L(a,a,[0,-8192,0]),{u_matrix:a,u_image:1,u_dimension:[r,r],u_zoom:g.overscaledZ,u_unpack:e.getUnpackVector()}};function pn(g,e){const r=Math.pow(2,e.canonical.z),a=e.canonical.y;return[new u.$(0,a/r).toLngLat().lat,new u.$(0,(a+1)/r).toLngLat().lat]}const Xr=(g,e,r,a)=>{const d=g.transform;return{u_translation:Js(g,e,r),u_ratio:a/u.az(e,1,d.zoom),u_device_pixel_ratio:g.pixelRatio,u_units_to_pixels:[1/d.pixelsToGLUnits[0],1/d.pixelsToGLUnits[1]]}},fi=(g,e,r,a,d)=>u.e(Xr(g,e,r,a),{u_image:0,u_image_height:d}),Fo=(g,e,r,a,d)=>{const y=g.transform,w=ds(e,y);return{u_translation:Js(g,e,r),u_texsize:e.imageAtlasTexture.size,u_ratio:a/u.az(e,1,y.zoom),u_device_pixel_ratio:g.pixelRatio,u_image:0,u_scale:[w,d.fromScale,d.toScale],u_fade:d.t,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},ks=(g,e,r,a,d,y)=>{const w=g.lineAtlas,E=ds(e,g.transform),A=r.layout.get("line-cap")==="round",D=w.getDash(d.from,A),N=w.getDash(d.to,A),G=D.width*y.fromScale,Z=N.width*y.toScale;return u.e(Xr(g,e,r,a),{u_patternscale_a:[E/G,-D.height/2],u_patternscale_b:[E/Z,-N.height/2],u_sdfgamma:w.width/(256*Math.min(G,Z)*g.pixelRatio)/2,u_image:0,u_tex_y_a:D.y,u_tex_y_b:N.y,u_mix:y.t})};function ds(g,e){return 1/u.az(g,1,e.tileZoom)}function Js(g,e,r){return u.aA(g.transform,e,r.paint.get("line-translate"),r.paint.get("line-translate-anchor"))}const zc=(g,e,r,a,d)=>{return{u_tl_parent:g,u_scale_parent:e,u_buffer_scale:1,u_fade_t:r.mix,u_opacity:r.opacity*a.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:a.paint.get("raster-brightness-min"),u_brightness_high:a.paint.get("raster-brightness-max"),u_saturation_factor:(w=a.paint.get("raster-saturation"),w>0?1-1/(1.001-w):-w),u_contrast_factor:(y=a.paint.get("raster-contrast"),y>0?1/(1-y):1+y),u_spin_weights:al(a.paint.get("raster-hue-rotate")),u_coords_top:[d[0].x,d[0].y,d[1].x,d[1].y],u_coords_bottom:[d[3].x,d[3].y,d[2].x,d[2].y]};var y,w};function al(g){g*=Math.PI/180;const e=Math.sin(g),r=Math.cos(g);return[(2*r+1)/3,(-Math.sqrt(3)*e-r+1)/3,(Math.sqrt(3)*e-r+1)/3]}const ll=(g,e,r,a,d,y,w,E,A,D,N,G,Z)=>{const X=w.transform;return{u_is_size_zoom_constant:+(g==="constant"||g==="source"),u_is_size_feature_constant:+(g==="constant"||g==="camera"),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:X.cameraToCenterDistance,u_pitch:X.pitch/360*2*Math.PI,u_rotate_symbol:+r,u_aspect_ratio:X.width/X.height,u_fade_change:w.options.fadeDuration?w.symbolFadeChange:1,u_label_plane_matrix:E,u_coord_matrix:A,u_is_text:+N,u_pitch_with_map:+a,u_is_along_line:d,u_is_variable_anchor:y,u_texsize:G,u_texture:0,u_translation:D,u_pitched_scale:Z}},uf=(g,e,r,a,d,y,w,E,A,D,N,G,Z,X)=>{const ne=w.transform;return u.e(ll(g,e,r,a,d,y,w,E,A,D,N,G,X),{u_gamma_scale:a?Math.cos(ne.pitch*Math.PI/180)*ne.cameraToCenterDistance:1,u_device_pixel_ratio:w.pixelRatio,u_is_halo:1})},$h=(g,e,r,a,d,y,w,E,A,D,N,G,Z)=>u.e(uf(g,e,r,a,d,y,w,E,A,D,!0,N,0,Z),{u_texsize_icon:G,u_texture_icon:1}),jh=(g,e)=>({u_opacity:g,u_color:e}),Id=(g,e,r,a,d)=>u.e(function(y,w,E,A){const D=E.imageManager.getPattern(y.from.toString()),N=E.imageManager.getPattern(y.to.toString()),{width:G,height:Z}=E.imageManager.getPixelSize(),X=Math.pow(2,A.tileID.overscaledZ),ne=A.tileSize*Math.pow(2,E.transform.tileZoom)/X,be=ne*(A.tileID.canonical.x+A.tileID.wrap*X),_e=ne*A.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:D.tl,u_pattern_br_a:D.br,u_pattern_tl_b:N.tl,u_pattern_br_b:N.br,u_texsize:[G,Z],u_mix:w.t,u_pattern_size_a:D.displaySize,u_pattern_size_b:N.displaySize,u_scale_a:w.fromScale,u_scale_b:w.toScale,u_tile_units_to_pixels:1/u.az(A,1,E.transform.tileZoom),u_pixel_coord_upper:[be>>16,_e>>16],u_pixel_coord_lower:[65535&be,65535&_e]}}(r,d,e,a),{u_opacity:g}),ea=(g,e)=>{},Jl={fillExtrusion:(g,e)=>({u_lightpos:new u.bL(g,e.u_lightpos),u_lightpos_globe:new u.bL(g,e.u_lightpos_globe),u_lightintensity:new u.b8(g,e.u_lightintensity),u_lightcolor:new u.bL(g,e.u_lightcolor),u_vertical_gradient:new u.b8(g,e.u_vertical_gradient),u_opacity:new u.b8(g,e.u_opacity),u_fill_translate:new u.bM(g,e.u_fill_translate)}),fillExtrusionPattern:(g,e)=>({u_lightpos:new u.bL(g,e.u_lightpos),u_lightpos_globe:new u.bL(g,e.u_lightpos_globe),u_lightintensity:new u.b8(g,e.u_lightintensity),u_lightcolor:new u.bL(g,e.u_lightcolor),u_vertical_gradient:new u.b8(g,e.u_vertical_gradient),u_height_factor:new u.b8(g,e.u_height_factor),u_opacity:new u.b8(g,e.u_opacity),u_fill_translate:new u.bM(g,e.u_fill_translate),u_image:new u.bH(g,e.u_image),u_texsize:new u.bM(g,e.u_texsize),u_pixel_coord_upper:new u.bM(g,e.u_pixel_coord_upper),u_pixel_coord_lower:new u.bM(g,e.u_pixel_coord_lower),u_scale:new u.bL(g,e.u_scale),u_fade:new u.b8(g,e.u_fade)}),fill:(g,e)=>({u_fill_translate:new u.bM(g,e.u_fill_translate)}),fillPattern:(g,e)=>({u_image:new u.bH(g,e.u_image),u_texsize:new u.bM(g,e.u_texsize),u_pixel_coord_upper:new u.bM(g,e.u_pixel_coord_upper),u_pixel_coord_lower:new u.bM(g,e.u_pixel_coord_lower),u_scale:new u.bL(g,e.u_scale),u_fade:new u.b8(g,e.u_fade),u_fill_translate:new u.bM(g,e.u_fill_translate)}),fillOutline:(g,e)=>({u_world:new u.bM(g,e.u_world),u_fill_translate:new u.bM(g,e.u_fill_translate)}),fillOutlinePattern:(g,e)=>({u_world:new u.bM(g,e.u_world),u_image:new u.bH(g,e.u_image),u_texsize:new u.bM(g,e.u_texsize),u_pixel_coord_upper:new u.bM(g,e.u_pixel_coord_upper),u_pixel_coord_lower:new u.bM(g,e.u_pixel_coord_lower),u_scale:new u.bL(g,e.u_scale),u_fade:new u.b8(g,e.u_fade),u_fill_translate:new u.bM(g,e.u_fill_translate)}),circle:(g,e)=>({u_camera_to_center_distance:new u.b8(g,e.u_camera_to_center_distance),u_scale_with_map:new u.bH(g,e.u_scale_with_map),u_pitch_with_map:new u.bH(g,e.u_pitch_with_map),u_extrude_scale:new u.bM(g,e.u_extrude_scale),u_device_pixel_ratio:new u.b8(g,e.u_device_pixel_ratio),u_globe_extrude_scale:new u.b8(g,e.u_globe_extrude_scale),u_translate:new u.bM(g,e.u_translate)}),collisionBox:(g,e)=>({u_pixel_extrude_scale:new u.bM(g,e.u_pixel_extrude_scale)}),collisionCircle:(g,e)=>({u_viewport_size:new u.bM(g,e.u_viewport_size)}),debug:(g,e)=>({u_color:new u.bI(g,e.u_color),u_overlay:new u.bH(g,e.u_overlay),u_overlay_scale:new u.b8(g,e.u_overlay_scale)}),depth:ea,clippingMask:ea,heatmap:(g,e)=>({u_extrude_scale:new u.b8(g,e.u_extrude_scale),u_intensity:new u.b8(g,e.u_intensity),u_globe_extrude_scale:new u.b8(g,e.u_globe_extrude_scale)}),heatmapTexture:(g,e)=>({u_matrix:new u.bJ(g,e.u_matrix),u_world:new u.bM(g,e.u_world),u_image:new u.bH(g,e.u_image),u_color_ramp:new u.bH(g,e.u_color_ramp),u_opacity:new u.b8(g,e.u_opacity)}),hillshade:(g,e)=>({u_image:new u.bH(g,e.u_image),u_latrange:new u.bM(g,e.u_latrange),u_exaggeration:new u.b8(g,e.u_exaggeration),u_altitudes:new u.bS(g,e.u_altitudes),u_azimuths:new u.bS(g,e.u_azimuths),u_accent:new u.bI(g,e.u_accent),u_method:new u.bH(g,e.u_method),u_shadows:new u.bR(g,e.u_shadows),u_highlights:new u.bR(g,e.u_highlights)}),hillshadePrepare:(g,e)=>({u_matrix:new u.bJ(g,e.u_matrix),u_image:new u.bH(g,e.u_image),u_dimension:new u.bM(g,e.u_dimension),u_zoom:new u.b8(g,e.u_zoom),u_unpack:new u.bK(g,e.u_unpack)}),line:(g,e)=>({u_translation:new u.bM(g,e.u_translation),u_ratio:new u.b8(g,e.u_ratio),u_device_pixel_ratio:new u.b8(g,e.u_device_pixel_ratio),u_units_to_pixels:new u.bM(g,e.u_units_to_pixels)}),lineGradient:(g,e)=>({u_translation:new u.bM(g,e.u_translation),u_ratio:new u.b8(g,e.u_ratio),u_device_pixel_ratio:new u.b8(g,e.u_device_pixel_ratio),u_units_to_pixels:new u.bM(g,e.u_units_to_pixels),u_image:new u.bH(g,e.u_image),u_image_height:new u.b8(g,e.u_image_height)}),linePattern:(g,e)=>({u_translation:new u.bM(g,e.u_translation),u_texsize:new u.bM(g,e.u_texsize),u_ratio:new u.b8(g,e.u_ratio),u_device_pixel_ratio:new u.b8(g,e.u_device_pixel_ratio),u_image:new u.bH(g,e.u_image),u_units_to_pixels:new u.bM(g,e.u_units_to_pixels),u_scale:new u.bL(g,e.u_scale),u_fade:new u.b8(g,e.u_fade)}),lineSDF:(g,e)=>({u_translation:new u.bM(g,e.u_translation),u_ratio:new u.b8(g,e.u_ratio),u_device_pixel_ratio:new u.b8(g,e.u_device_pixel_ratio),u_units_to_pixels:new u.bM(g,e.u_units_to_pixels),u_patternscale_a:new u.bM(g,e.u_patternscale_a),u_patternscale_b:new u.bM(g,e.u_patternscale_b),u_sdfgamma:new u.b8(g,e.u_sdfgamma),u_image:new u.bH(g,e.u_image),u_tex_y_a:new u.b8(g,e.u_tex_y_a),u_tex_y_b:new u.b8(g,e.u_tex_y_b),u_mix:new u.b8(g,e.u_mix)}),raster:(g,e)=>({u_tl_parent:new u.bM(g,e.u_tl_parent),u_scale_parent:new u.b8(g,e.u_scale_parent),u_buffer_scale:new u.b8(g,e.u_buffer_scale),u_fade_t:new u.b8(g,e.u_fade_t),u_opacity:new u.b8(g,e.u_opacity),u_image0:new u.bH(g,e.u_image0),u_image1:new u.bH(g,e.u_image1),u_brightness_low:new u.b8(g,e.u_brightness_low),u_brightness_high:new u.b8(g,e.u_brightness_high),u_saturation_factor:new u.b8(g,e.u_saturation_factor),u_contrast_factor:new u.b8(g,e.u_contrast_factor),u_spin_weights:new u.bL(g,e.u_spin_weights),u_coords_top:new u.bK(g,e.u_coords_top),u_coords_bottom:new u.bK(g,e.u_coords_bottom)}),symbolIcon:(g,e)=>({u_is_size_zoom_constant:new u.bH(g,e.u_is_size_zoom_constant),u_is_size_feature_constant:new u.bH(g,e.u_is_size_feature_constant),u_size_t:new u.b8(g,e.u_size_t),u_size:new u.b8(g,e.u_size),u_camera_to_center_distance:new u.b8(g,e.u_camera_to_center_distance),u_pitch:new u.b8(g,e.u_pitch),u_rotate_symbol:new u.bH(g,e.u_rotate_symbol),u_aspect_ratio:new u.b8(g,e.u_aspect_ratio),u_fade_change:new u.b8(g,e.u_fade_change),u_label_plane_matrix:new u.bJ(g,e.u_label_plane_matrix),u_coord_matrix:new u.bJ(g,e.u_coord_matrix),u_is_text:new u.bH(g,e.u_is_text),u_pitch_with_map:new u.bH(g,e.u_pitch_with_map),u_is_along_line:new u.bH(g,e.u_is_along_line),u_is_variable_anchor:new u.bH(g,e.u_is_variable_anchor),u_texsize:new u.bM(g,e.u_texsize),u_texture:new u.bH(g,e.u_texture),u_translation:new u.bM(g,e.u_translation),u_pitched_scale:new u.b8(g,e.u_pitched_scale)}),symbolSDF:(g,e)=>({u_is_size_zoom_constant:new u.bH(g,e.u_is_size_zoom_constant),u_is_size_feature_constant:new u.bH(g,e.u_is_size_feature_constant),u_size_t:new u.b8(g,e.u_size_t),u_size:new u.b8(g,e.u_size),u_camera_to_center_distance:new u.b8(g,e.u_camera_to_center_distance),u_pitch:new u.b8(g,e.u_pitch),u_rotate_symbol:new u.bH(g,e.u_rotate_symbol),u_aspect_ratio:new u.b8(g,e.u_aspect_ratio),u_fade_change:new u.b8(g,e.u_fade_change),u_label_plane_matrix:new u.bJ(g,e.u_label_plane_matrix),u_coord_matrix:new u.bJ(g,e.u_coord_matrix),u_is_text:new u.bH(g,e.u_is_text),u_pitch_with_map:new u.bH(g,e.u_pitch_with_map),u_is_along_line:new u.bH(g,e.u_is_along_line),u_is_variable_anchor:new u.bH(g,e.u_is_variable_anchor),u_texsize:new u.bM(g,e.u_texsize),u_texture:new u.bH(g,e.u_texture),u_gamma_scale:new u.b8(g,e.u_gamma_scale),u_device_pixel_ratio:new u.b8(g,e.u_device_pixel_ratio),u_is_halo:new u.bH(g,e.u_is_halo),u_translation:new u.bM(g,e.u_translation),u_pitched_scale:new u.b8(g,e.u_pitched_scale)}),symbolTextAndIcon:(g,e)=>({u_is_size_zoom_constant:new u.bH(g,e.u_is_size_zoom_constant),u_is_size_feature_constant:new u.bH(g,e.u_is_size_feature_constant),u_size_t:new u.b8(g,e.u_size_t),u_size:new u.b8(g,e.u_size),u_camera_to_center_distance:new u.b8(g,e.u_camera_to_center_distance),u_pitch:new u.b8(g,e.u_pitch),u_rotate_symbol:new u.bH(g,e.u_rotate_symbol),u_aspect_ratio:new u.b8(g,e.u_aspect_ratio),u_fade_change:new u.b8(g,e.u_fade_change),u_label_plane_matrix:new u.bJ(g,e.u_label_plane_matrix),u_coord_matrix:new u.bJ(g,e.u_coord_matrix),u_is_text:new u.bH(g,e.u_is_text),u_pitch_with_map:new u.bH(g,e.u_pitch_with_map),u_is_along_line:new u.bH(g,e.u_is_along_line),u_is_variable_anchor:new u.bH(g,e.u_is_variable_anchor),u_texsize:new u.bM(g,e.u_texsize),u_texsize_icon:new u.bM(g,e.u_texsize_icon),u_texture:new u.bH(g,e.u_texture),u_texture_icon:new u.bH(g,e.u_texture_icon),u_gamma_scale:new u.b8(g,e.u_gamma_scale),u_device_pixel_ratio:new u.b8(g,e.u_device_pixel_ratio),u_is_halo:new u.bH(g,e.u_is_halo),u_translation:new u.bM(g,e.u_translation),u_pitched_scale:new u.b8(g,e.u_pitched_scale)}),background:(g,e)=>({u_opacity:new u.b8(g,e.u_opacity),u_color:new u.bI(g,e.u_color)}),backgroundPattern:(g,e)=>({u_opacity:new u.b8(g,e.u_opacity),u_image:new u.bH(g,e.u_image),u_pattern_tl_a:new u.bM(g,e.u_pattern_tl_a),u_pattern_br_a:new u.bM(g,e.u_pattern_br_a),u_pattern_tl_b:new u.bM(g,e.u_pattern_tl_b),u_pattern_br_b:new u.bM(g,e.u_pattern_br_b),u_texsize:new u.bM(g,e.u_texsize),u_mix:new u.b8(g,e.u_mix),u_pattern_size_a:new u.bM(g,e.u_pattern_size_a),u_pattern_size_b:new u.bM(g,e.u_pattern_size_b),u_scale_a:new u.b8(g,e.u_scale_a),u_scale_b:new u.b8(g,e.u_scale_b),u_pixel_coord_upper:new u.bM(g,e.u_pixel_coord_upper),u_pixel_coord_lower:new u.bM(g,e.u_pixel_coord_lower),u_tile_units_to_pixels:new u.b8(g,e.u_tile_units_to_pixels)}),terrain:(g,e)=>({u_texture:new u.bH(g,e.u_texture),u_ele_delta:new u.b8(g,e.u_ele_delta),u_fog_matrix:new u.bJ(g,e.u_fog_matrix),u_fog_color:new u.bI(g,e.u_fog_color),u_fog_ground_blend:new u.b8(g,e.u_fog_ground_blend),u_fog_ground_blend_opacity:new u.b8(g,e.u_fog_ground_blend_opacity),u_horizon_color:new u.bI(g,e.u_horizon_color),u_horizon_fog_blend:new u.b8(g,e.u_horizon_fog_blend),u_is_globe_mode:new u.b8(g,e.u_is_globe_mode)}),terrainDepth:(g,e)=>({u_ele_delta:new u.b8(g,e.u_ele_delta)}),terrainCoords:(g,e)=>({u_texture:new u.bH(g,e.u_texture),u_terrain_coords_id:new u.b8(g,e.u_terrain_coords_id),u_ele_delta:new u.b8(g,e.u_ele_delta)}),projectionErrorMeasurement:(g,e)=>({u_input:new u.b8(g,e.u_input),u_output_expected:new u.b8(g,e.u_output_expected)}),atmosphere:(g,e)=>({u_sun_pos:new u.bL(g,e.u_sun_pos),u_atmosphere_blend:new u.b8(g,e.u_atmosphere_blend),u_globe_position:new u.bL(g,e.u_globe_position),u_globe_radius:new u.b8(g,e.u_globe_radius),u_inv_proj_matrix:new u.bJ(g,e.u_inv_proj_matrix)}),sky:(g,e)=>({u_sky_color:new u.bI(g,e.u_sky_color),u_horizon_color:new u.bI(g,e.u_horizon_color),u_horizon:new u.bM(g,e.u_horizon),u_horizon_normal:new u.bM(g,e.u_horizon_normal),u_sky_horizon_blend:new u.b8(g,e.u_sky_horizon_blend),u_sky_blend:new u.b8(g,e.u_sky_blend)})};class cf{constructor(e,r,a){this.context=e;const d=e.gl;this.buffer=d.createBuffer(),this.dynamicDraw=!!a,this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),d.bufferData(d.ELEMENT_ARRAY_BUFFER,r.arrayBuffer,this.dynamicDraw?d.DYNAMIC_DRAW:d.STATIC_DRAW),this.dynamicDraw||delete r.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(e){const r=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),r.bufferSubData(r.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Lc={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class hf{constructor(e,r,a,d){this.length=r.length,this.attributes=a,this.itemSize=r.bytesPerElement,this.dynamicDraw=d,this.context=e;const y=e.gl;this.buffer=y.createBuffer(),e.bindVertexBuffer.set(this.buffer),y.bufferData(y.ARRAY_BUFFER,r.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete r.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(e){if(e.length!==this.length)throw new Error(`Length of new data is ${e.length}, which doesn't match current length of ${this.length}`);const r=this.context.gl;this.bind(),r.bufferSubData(r.ARRAY_BUFFER,0,e.arrayBuffer)}enableAttributes(e,r){for(let a=0;a<this.attributes.length;a++){const d=r.attributes[this.attributes[a].name];d!==void 0&&e.enableVertexAttribArray(d)}}setVertexAttribPointers(e,r,a){for(let d=0;d<this.attributes.length;d++){const y=this.attributes[d],w=r.attributes[y.name];w!==void 0&&e.vertexAttribPointer(w,y.components,e[Lc[y.type]],!1,this.itemSize,y.offset+this.itemSize*(a||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Tn{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class io extends Tn{getDefault(){return u.b7.transparent}set(e){const r=this.current;(e.r!==r.r||e.g!==r.g||e.b!==r.b||e.a!==r.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class Dc extends Tn{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}class Uh extends Tn{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}class Vh extends Tn{getDefault(){return[!0,!0,!0,!0]}set(e){const r=this.current;(e[0]!==r[0]||e[1]!==r[1]||e[2]!==r[2]||e[3]!==r[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class Md extends Tn{getDefault(){return!0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}class kd extends Tn{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}class Hu extends Tn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(e){const r=this.current;(e.func!==r.func||e.ref!==r.ref||e.mask!==r.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}class vu extends Tn{getDefault(){const e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}set(e){const r=this.current;(e[0]!==r[0]||e[1]!==r[1]||e[2]!==r[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}class tt extends Tn{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const r=this.gl;e?r.enable(r.STENCIL_TEST):r.disable(r.STENCIL_TEST),this.current=e,this.dirty=!1}}class Bt extends Tn{getDefault(){return[0,1]}set(e){const r=this.current;(e[0]!==r[0]||e[1]!==r[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}class wt extends Tn{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const r=this.gl;e?r.enable(r.DEPTH_TEST):r.disable(r.DEPTH_TEST),this.current=e,this.dirty=!1}}class Ir extends Tn{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}class mn extends Tn{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const r=this.gl;e?r.enable(r.BLEND):r.disable(r.BLEND),this.current=e,this.dirty=!1}}class Xn extends Tn{getDefault(){const e=this.gl;return[e.ONE,e.ZERO]}set(e){const r=this.current;(e[0]!==r[0]||e[1]!==r[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}class oo extends Tn{getDefault(){return u.b7.transparent}set(e){const r=this.current;(e.r!==r.r||e.g!==r.g||e.b!==r.b||e.a!==r.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class ti extends Tn{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}class xu extends Tn{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const r=this.gl;e?r.enable(r.CULL_FACE):r.disable(r.CULL_FACE),this.current=e,this.dirty=!1}}class Zh extends Tn{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}class ta extends Tn{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}class As extends Tn{getDefault(){return null}set(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}}class Oc extends Tn{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}class Rs extends Tn{getDefault(){const e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){const r=this.current;(e[0]!==r[0]||e[1]!==r[1]||e[2]!==r[2]||e[3]!==r[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class Go extends Tn{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const r=this.gl;r.bindFramebuffer(r.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}class Fc extends Tn{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const r=this.gl;r.bindRenderbuffer(r.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Gn extends Tn{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const r=this.gl;r.bindTexture(r.TEXTURE_2D,e),this.current=e,this.dirty=!1}}class bu extends Tn{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const r=this.gl;r.bindBuffer(r.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class Rl extends Tn{getDefault(){return null}set(e){const r=this.gl;r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class wu extends Tn{getDefault(){return null}set(e){var r;if(e===this.current&&!this.dirty)return;const a=this.gl;no(a)?a.bindVertexArray(e):(r=a.getExtension("OES_vertex_array_object"))===null||r===void 0||r.bindVertexArrayOES(e),this.current=e,this.dirty=!1}}class qu extends Tn{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;const r=this.gl;r.pixelStorei(r.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}class Bc extends Tn{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const r=this.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}class dh extends Tn{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const r=this.gl;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}class Su extends Tn{constructor(e,r){super(e),this.context=e,this.parent=r}getDefault(){return null}}class ra extends Su{setDirty(){this.dirty=!0}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const r=this.gl;r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class zl extends Su{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const r=this.gl;r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Gh extends Su{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const r=this.gl;r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,e),this.current=e,this.dirty=!1}}const na="Framebuffer is not complete";class xn{constructor(e,r,a,d,y){this.context=e,this.width=r,this.height=a;const w=e.gl,E=this.framebuffer=w.createFramebuffer();if(this.colorAttachment=new ra(e,E),d)this.depthAttachment=y?new Gh(e,E):new zl(e,E);else if(y)throw new Error("Stencil cannot be set without depth");if(w.checkFramebufferStatus(w.FRAMEBUFFER)!==w.FRAMEBUFFER_COMPLETE)throw new Error(na)}destroy(){const e=this.context.gl,r=this.colorAttachment.get();if(r&&e.deleteTexture(r),this.depthAttachment){const a=this.depthAttachment.get();a&&e.deleteRenderbuffer(a)}e.deleteFramebuffer(this.framebuffer)}}class Ku{constructor(e){var r,a;if(this.gl=e,this.clearColor=new io(this),this.clearDepth=new Dc(this),this.clearStencil=new Uh(this),this.colorMask=new Vh(this),this.depthMask=new Md(this),this.stencilMask=new kd(this),this.stencilFunc=new Hu(this),this.stencilOp=new vu(this),this.stencilTest=new tt(this),this.depthRange=new Bt(this),this.depthTest=new wt(this),this.depthFunc=new Ir(this),this.blend=new mn(this),this.blendFunc=new Xn(this),this.blendColor=new oo(this),this.blendEquation=new ti(this),this.cullFace=new xu(this),this.cullFaceSide=new Zh(this),this.frontFace=new ta(this),this.program=new As(this),this.activeTexture=new Oc(this),this.viewport=new Rs(this),this.bindFramebuffer=new Go(this),this.bindRenderbuffer=new Fc(this),this.bindTexture=new Gn(this),this.bindVertexBuffer=new bu(this),this.bindElementBuffer=new Rl(this),this.bindVertexArray=new wu(this),this.pixelStoreUnpack=new qu(this),this.pixelStoreUnpackPremultiplyAlpha=new Bc(this),this.pixelStoreUnpackFlipY=new dh(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),no(e)){this.HALF_FLOAT=e.HALF_FLOAT;const d=e.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(r=e.RGBA16F)!==null&&r!==void 0?r:d==null?void 0:d.RGBA16F_EXT,this.RGB16F=(a=e.RGB16F)!==null&&a!==void 0?a:d==null?void 0:d.RGB16F_EXT,e.getExtension("EXT_color_buffer_float")}else{e.getExtension("EXT_color_buffer_half_float"),e.getExtension("OES_texture_half_float_linear");const d=e.getExtension("OES_texture_half_float");this.HALF_FLOAT=d==null?void 0:d.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(e,r){return new cf(this,e,r)}createVertexBuffer(e,r,a){return new hf(this,e,r,a)}createRenderbuffer(e,r,a){const d=this.gl,y=d.createRenderbuffer();return this.bindRenderbuffer.set(y),d.renderbufferStorage(d.RENDERBUFFER,e,r,a),this.bindRenderbuffer.set(null),y}createFramebuffer(e,r,a,d){return new xn(this,e,r,a,d)}clear({color:e,depth:r,stencil:a}){const d=this.gl;let y=0;e&&(y|=d.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),r!==void 0&&(y|=d.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(r),this.depthMask.set(!0)),a!==void 0&&(y|=d.STENCIL_BUFFER_BIT,this.clearStencil.set(a),this.stencilMask.set(255)),d.clear(y)}setCullFace(e){e.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}setColorMode(e){u.bE(e.blendFunction,Ln.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)}createVertexArray(){var e;return no(this.gl)?this.gl.createVertexArray():(e=this.gl.getExtension("OES_vertex_array_object"))===null||e===void 0?void 0:e.createVertexArrayOES()}deleteVertexArray(e){var r;return no(this.gl)?this.gl.deleteVertexArray(e):(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.deleteVertexArrayOES(e)}unbindVAO(){this.bindVertexArray.set(null)}}let Xu;function Wh(g,e,r,a,d){const y=g.context,w=g.transform,E=y.gl,A=g.useProgram("collisionBox"),D=[];let N=0,G=0;for(let Se=0;Se<a.length;Se++){const ke=a[Se],Le=e.getTile(ke).getBucket(r);if(!Le)continue;const Me=d?Le.textCollisionBox:Le.iconCollisionBox,De=Le.collisionCircleArray;De.length>0&&(D.push({circleArray:De,circleOffset:G,coord:ke}),N+=De.length/4,G=N),Me&&A.draw(y,E.LINES,gr.disabled,Kr.disabled,g.colorModeForRenderPass(),Lr.disabled,ue(g.transform),g.style.map.terrain&&g.style.map.terrain.getTerrainData(ke),w.getProjectionData({overscaledTileID:ke,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),r.id,Me.layoutVertexBuffer,Me.indexBuffer,Me.segments,null,g.transform.zoom,null,null,Me.collisionVertexBuffer)}if(!d||!D.length)return;const Z=g.useProgram("collisionCircle"),X=new u.bT;X.resize(4*N),X._trim();let ne=0;for(const Se of D)for(let ke=0;ke<Se.circleArray.length/4;ke++){const Le=4*ke,Me=Se.circleArray[Le+0],De=Se.circleArray[Le+1],Ne=Se.circleArray[Le+2],je=Se.circleArray[Le+3];X.emplace(ne++,Me,De,Ne,je,0),X.emplace(ne++,Me,De,Ne,je,1),X.emplace(ne++,Me,De,Ne,je,2),X.emplace(ne++,Me,De,Ne,je,3)}(!Xu||Xu.length<2*N)&&(Xu=function(Se){const ke=2*Se,Le=new u.bV;Le.resize(ke),Le._trim();for(let Me=0;Me<ke;Me++){const De=6*Me;Le.uint16[De+0]=4*Me+0,Le.uint16[De+1]=4*Me+1,Le.uint16[De+2]=4*Me+2,Le.uint16[De+3]=4*Me+2,Le.uint16[De+4]=4*Me+3,Le.uint16[De+5]=4*Me+0}return Le}(N));const be=y.createIndexBuffer(Xu,!0),_e=y.createVertexBuffer(X,u.bU.members,!0);for(const Se of D){const ke=Pe(g.transform);Z.draw(y,E.TRIANGLES,gr.disabled,Kr.disabled,g.colorModeForRenderPass(),Lr.disabled,ke,g.style.map.terrain&&g.style.map.terrain.getTerrainData(Se.coord),null,r.id,_e,be,u.aJ.simpleSegment(0,2*Se.circleOffset,Se.circleArray.length,Se.circleArray.length/2),null,g.transform.zoom,null,null,null)}_e.destroy(),be.destroy()}const xa=u.ad(new Float32Array(16));function Yu(g,e,r,a,d,y){const{horizontalAlign:w,verticalAlign:E}=u.aE(g);return new u.P((-(w-.5)*e/d+a[0])*y,(-(E-.5)*r/d+a[1])*y)}function fh(g,e,r,a,d,y){const w=e.tileAnchorPoint.add(new u.P(e.translation[0],e.translation[1]));if(e.pitchWithMap){let E=a.mult(y);r||(E=E.rotate(-d));const A=w.add(E);return St(A.x,A.y,e.pitchedLabelPlaneMatrix,e.getElevation).point}if(r){const E=Zn(e.tileAnchorPoint.x+1,e.tileAnchorPoint.y,e).point.sub(g),A=Math.atan(E.y/E.x)+(E.x<0?Math.PI:0);return g.add(a.rotate(A))}return g.add(a)}function Ad(g,e,r,a,d,y,w,E,A,D,N,G){const Z=g.text.placedSymbolArray,X=g.text.dynamicLayoutVertexArray,ne=g.icon.dynamicLayoutVertexArray,be={};X.clear();for(let _e=0;_e<Z.length;_e++){const Se=Z.get(_e),ke=Se.hidden||!Se.crossTileID||g.allowVerticalPlacement&&!Se.placedOrientation?null:a[Se.crossTileID];if(ke){const Le=new u.P(Se.anchorX,Se.anchorY),Me={getElevation:G,width:d.width,height:d.height,pitchedLabelPlaneMatrix:y,pitchWithMap:r,transform:d,tileAnchorPoint:Le,translation:D,unwrappedTileID:N},De=r?un(Le.x,Le.y,Me):Zn(Le.x,Le.y,Me),Ne=wn(d.cameraToCenterDistance,De.signedDistanceFromCamera);let je=u.am(g.textSizeData,E,Se)*Ne/u.ay;r&&(je*=g.tilePixelRatio/w);const{width:at,height:It,anchor:Ye,textOffset:ht,textBoxScale:Ct}=ke,Jt=Yu(Ye,at,It,ht,Ct,je),er=d.getPitchedTextCorrection(Le.x+D[0],Le.y+D[1],N),Ft=fh(De.point,Me,e,Jt,-d.bearingInRadians,er),vr=g.allowVerticalPlacement&&Se.placedOrientation===u.al.vertical?Math.PI/2:0;for(let Zr=0;Zr<Se.numGlyphs;Zr++)u.as(X,Ft,vr);A&&Se.associatedIconIndex>=0&&(be[Se.associatedIconIndex]={shiftedAnchor:Ft,angle:vr})}else Zo(Se.numGlyphs,X)}if(A){ne.clear();const _e=g.icon.placedSymbolArray;for(let Se=0;Se<_e.length;Se++){const ke=_e.get(Se);if(ke.hidden)Zo(ke.numGlyphs,ne);else{const Le=be[Se];if(Le)for(let Me=0;Me<ke.numGlyphs;Me++)u.as(ne,Le.shiftedAnchor,Le.angle);else Zo(ke.numGlyphs,ne)}}g.icon.dynamicLayoutVertexBuffer.updateData(ne)}g.text.dynamicLayoutVertexBuffer.updateData(X)}function zi(g,e,r){return r.iconsInText&&e?"symbolTextAndIcon":g?"symbolSDF":"symbolIcon"}function Nc(g,e,r,a,d,y,w,E,A,D,N,G,Z){const X=g.context,ne=X.gl,be=g.transform,_e=E==="map",Se=A==="map",ke=E!=="viewport"&&r.layout.get("symbol-placement")!=="point",Le=_e&&!Se&&!ke,Me=!r.layout.get("symbol-sort-key").isConstant();let De=!1;const Ne=g.getDepthModeForSublayer(0,gr.ReadOnly),je=r._unevaluatedLayout.hasValue("text-variable-anchor")||r._unevaluatedLayout.hasValue("text-variable-anchor-offset"),at=[],It=be.getCircleRadiusCorrection();for(const Ye of a){const ht=e.getTile(Ye),Ct=ht.getBucket(r);if(!Ct)continue;const Jt=d?Ct.text:Ct.icon;if(!Jt||!Jt.segments.get().length||!Jt.hasVisibleVertices)continue;const er=Jt.programConfigurations.get(r.id),Ft=d||Ct.sdfIcons,vr=d?Ct.textSizeData:Ct.iconSizeData,Zr=Se||be.pitch!==0,En=g.useProgram(zi(Ft,d,Ct),er),pi=u.ak(vr,be.zoom),ri=g.style.map.terrain&&g.style.map.terrain.getTerrainData(Ye);let Mi,ki,In,Cn,Hi=[0,0],vo=null;if(d)ki=ht.glyphAtlasTexture,In=ne.LINEAR,Mi=ht.glyphAtlasTexture.size,Ct.iconsInText&&(Hi=ht.imageAtlasTexture.size,vo=ht.imageAtlasTexture,Cn=Zr||g.options.rotating||g.options.zooming||vr.kind==="composite"||vr.kind==="camera"?ne.LINEAR:ne.NEAREST);else{const lo=r.layout.get("icon-size").constantOr(0)!==1||Ct.iconsNeedLinear;ki=ht.imageAtlasTexture,In=Ft||g.options.rotating||g.options.zooming||lo||Zr?ne.LINEAR:ne.NEAREST,Mi=ht.imageAtlasTexture.size}const ao=u.az(ht,1,g.transform.zoom),An=Mr(_e,g.transform,ao),_l=u.K();u.an(_l,An);const la=qr(Se,_e,g.transform,ao),Ca=u.aA(be,ht,y,w),jl=be.getProjectionData({overscaledTileID:Ye,applyGlobeMatrix:!Z,applyTerrainMatrix:!0}),ua=je&&Ct.hasTextData(),iu=r.layout.get("icon-text-fit")!=="none"&&ua&&Ct.hasIconData();if(ke){const lo=g.style.map.terrain?(gs,xi)=>g.style.map.terrain.getElevation(Ye,gs,xi):null,uo=r.layout.get("text-rotation-alignment")==="map";Sn(Ct,g,d,An,_l,Se,D,uo,Ye.toUnwrapped(),be.width,be.height,Ca,lo)}const $s=d&&je||iu,js=ke||$s?xa:Se?An:g.transform.clipSpaceToPixelsMatrix,Ul=Ft&&r.paint.get(d?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Pa;Pa=Ft?Ct.iconsInText?$h(vr.kind,pi,Le,Se,ke,$s,g,js,la,Ca,Mi,Hi,It):uf(vr.kind,pi,Le,Se,ke,$s,g,js,la,Ca,d,Mi,0,It):ll(vr.kind,pi,Le,Se,ke,$s,g,js,la,Ca,d,Mi,It);const ou={program:En,buffers:Jt,uniformValues:Pa,projectionData:jl,atlasTexture:ki,atlasTextureIcon:vo,atlasInterpolation:In,atlasInterpolationIcon:Cn,isSDF:Ft,hasHalo:Ul};if(Me&&Ct.canOverlap){De=!0;const lo=Jt.segments.get();for(const uo of lo)at.push({segments:new u.aJ([uo]),sortKey:uo.sortKey,state:ou,terrainData:ri})}else at.push({segments:Jt.segments,sortKey:0,state:ou,terrainData:ri})}De&&at.sort((Ye,ht)=>Ye.sortKey-ht.sortKey);for(const Ye of at){const ht=Ye.state;if(X.activeTexture.set(ne.TEXTURE0),ht.atlasTexture.bind(ht.atlasInterpolation,ne.CLAMP_TO_EDGE),ht.atlasTextureIcon&&(X.activeTexture.set(ne.TEXTURE1),ht.atlasTextureIcon&&ht.atlasTextureIcon.bind(ht.atlasInterpolationIcon,ne.CLAMP_TO_EDGE)),ht.isSDF){const Ct=ht.uniformValues;ht.hasHalo&&(Ct.u_is_halo=1,ul(ht.buffers,Ye.segments,r,g,ht.program,Ne,N,G,Ct,ht.projectionData,Ye.terrainData)),Ct.u_is_halo=0}ul(ht.buffers,Ye.segments,r,g,ht.program,Ne,N,G,ht.uniformValues,ht.projectionData,Ye.terrainData)}}function ul(g,e,r,a,d,y,w,E,A,D,N){const G=a.context;d.draw(G,G.gl.TRIANGLES,y,w,E,Lr.backCCW,A,N,D,r.id,g.layoutVertexBuffer,g.indexBuffer,e,r.paint,a.transform.zoom,g.programConfigurations.get(r.id),g.dynamicLayoutVertexBuffer,g.opacityVertexBuffer)}function cl(g,e,r,a,d){const y=g.context,w=y.gl,E=Kr.disabled,A=new Ln([w.ONE,w.ONE],u.b7.transparent,[!0,!0,!0,!0]),D=e.getBucket(r);if(!D)return;const N=a.key;let G=r.heatmapFbos.get(N);G||(G=jc(y,e.tileSize,e.tileSize),r.heatmapFbos.set(N,G)),y.bindFramebuffer.set(G.framebuffer),y.viewport.set([0,0,e.tileSize,e.tileSize]),y.clear({color:u.b7.transparent});const Z=D.programConfigurations.get(r.id),X=g.useProgram("heatmap",Z,!d),ne=g.transform.getProjectionData({overscaledTileID:e.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),be=g.style.map.terrain.getTerrainData(a);X.draw(y,w.TRIANGLES,gr.disabled,E,A,Lr.disabled,ot(e,g.transform.zoom,r.paint.get("heatmap-intensity"),1),be,ne,r.id,D.layoutVertexBuffer,D.indexBuffer,D.segments,r.paint,g.transform.zoom,Z)}function $c(g,e,r,a,d){const y=g.context,w=y.gl,E=g.transform;y.setColorMode(g.colorModeForRenderPass());const A=Tu(y,e),D=r.key,N=e.heatmapFbos.get(D);if(!N)return;y.activeTexture.set(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,N.colorAttachment.get()),y.activeTexture.set(w.TEXTURE1),A.bind(w.LINEAR,w.CLAMP_TO_EDGE);const G=E.getProjectionData({overscaledTileID:r,applyTerrainMatrix:d,applyGlobeMatrix:!a});g.useProgram("heatmapTexture").draw(y,w.TRIANGLES,gr.disabled,Kr.disabled,g.colorModeForRenderPass(),Lr.disabled,Nt(g,e,0,1),null,G,e.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments,e.paint,E.zoom),N.destroy(),e.heatmapFbos.delete(D)}function jc(g,e,r){var a,d;const y=g.gl,w=y.createTexture();y.bindTexture(y.TEXTURE_2D,w),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.LINEAR),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.LINEAR);const E=(a=g.HALF_FLOAT)!==null&&a!==void 0?a:y.UNSIGNED_BYTE,A=(d=g.RGBA16F)!==null&&d!==void 0?d:y.RGBA;y.texImage2D(y.TEXTURE_2D,0,A,e,r,0,y.RGBA,E,null);const D=g.createFramebuffer(e,r,!1,!1);return D.colorAttachment.set(w),D}function Tu(g,e){return e.colorRampTexture||(e.colorRampTexture=new ze(g,e.colorRamp,g.gl.RGBA)),e.colorRampTexture}function Cu(g,e,r,a,d){if(!r||!a||!a.imageAtlas)return;const y=a.imageAtlas.patternPositions;let w=y[r.to.toString()],E=y[r.from.toString()];if(!w&&E&&(w=E),!E&&w&&(E=w),!w||!E){const A=d.getPaintProperty(e);w=y[A],E=y[A]}w&&E&&g.setConstantPatternPositions(w,E)}function Ll(g,e,r,a,d,y,w,E){const A=g.context.gl,D="fill-pattern",N=r.paint.get(D),G=N&&N.constantOr(1),Z=r.getCrossfadeParameters();let X,ne,be,_e,Se;const ke=g.transform,Le=r.paint.get("fill-translate"),Me=r.paint.get("fill-translate-anchor");w?(ne=G&&!r.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",X=A.LINES):(ne=G?"fillPattern":"fill",X=A.TRIANGLES);const De=N.constantOr(null);for(const Ne of a){const je=e.getTile(Ne);if(G&&!je.patternsLoaded())continue;const at=je.getBucket(r);if(!at)continue;const It=at.programConfigurations.get(r.id),Ye=g.useProgram(ne,It),ht=g.style.map.terrain&&g.style.map.terrain.getTerrainData(Ne);G&&(g.context.activeTexture.set(A.TEXTURE0),je.imageAtlasTexture.bind(A.LINEAR,A.CLAMP_TO_EDGE),It.updatePaintBuffers(Z)),Cu(It,D,De,je,r);const Ct=ke.getProjectionData({overscaledTileID:Ne,applyGlobeMatrix:!E,applyTerrainMatrix:!0}),Jt=u.aA(ke,je,Le,Me);if(w){_e=at.indexBuffer2,Se=at.segments2;const Ft=[A.drawingBufferWidth,A.drawingBufferHeight];be=ne==="fillOutlinePattern"&&G?$(g,Z,je,Ft,Jt):Wu(Ft,Jt)}else _e=at.indexBuffer,Se=at.segments,be=G?Gu(g,Z,je,Jt):{u_fill_translate:Jt};const er=g.stencilModeForClipping(Ne);Ye.draw(g.context,X,d,er,y,Lr.backCCW,be,ht,Ct,r.id,at.layoutVertexBuffer,_e,Se,r.paint,g.transform.zoom,It)}}function Ni(g,e,r,a,d,y,w,E){const A=g.context,D=A.gl,N="fill-extrusion-pattern",G=r.paint.get(N),Z=G.constantOr(1),X=r.getCrossfadeParameters(),ne=r.paint.get("fill-extrusion-opacity"),be=G.constantOr(null),_e=g.transform;for(const Se of a){const ke=e.getTile(Se),Le=ke.getBucket(r);if(!Le)continue;const Me=g.style.map.terrain&&g.style.map.terrain.getTerrainData(Se),De=Le.programConfigurations.get(r.id),Ne=g.useProgram(Z?"fillExtrusionPattern":"fillExtrusion",De);Z&&(g.context.activeTexture.set(D.TEXTURE0),ke.imageAtlasTexture.bind(D.LINEAR,D.CLAMP_TO_EDGE),De.updatePaintBuffers(X));const je=_e.getProjectionData({overscaledTileID:Se,applyGlobeMatrix:!E,applyTerrainMatrix:!0});Cu(De,N,be,ke,r);const at=u.aA(_e,ke,r.paint.get("fill-extrusion-translate"),r.paint.get("fill-extrusion-translate-anchor")),It=r.paint.get("fill-extrusion-vertical-gradient"),Ye=Z?Ms(g,It,ne,at,Se,X,ke):ja(g,It,ne,at);Ne.draw(A,A.gl.TRIANGLES,d,y,w,Lr.backCCW,Ye,Me,je,r.id,Le.layoutVertexBuffer,Le.indexBuffer,Le.segments,r.paint,g.transform.zoom,De,g.style.map.terrain&&Le.centroidVertexBuffer)}}function Bo(g,e,r,a,d,y,w,E,A){var D;const N=g.style.projection,G=g.context,Z=g.transform,X=G.gl,ne=[`#define NUM_ILLUMINATION_SOURCES ${r.paint.get("hillshade-highlight-color").values.length}`],be=g.useProgram("hillshade",null,!1,ne),_e=!g.options.moving;for(const Se of a){const ke=e.getTile(Se),Le=ke.fbo;if(!Le)continue;const Me=N.getMeshFromTileID(G,Se.canonical,E,!0,"raster"),De=(D=g.style.map.terrain)===null||D===void 0?void 0:D.getTerrainData(Se);G.activeTexture.set(X.TEXTURE0),X.bindTexture(X.TEXTURE_2D,Le.colorAttachment.get());const Ne=Z.getProjectionData({overscaledTileID:Se,aligned:_e,applyGlobeMatrix:!A,applyTerrainMatrix:!0});be.draw(G,X.TRIANGLES,y,d[Se.overscaledZ],w,Lr.backCCW,ar(g,ke,r),De,Ne,r.id,Me.vertexBuffer,Me.indexBuffer,Me.segments)}}const ph=[new u.P(0,0),new u.P(u.Z,0),new u.P(u.Z,u.Z),new u.P(0,u.Z)];function mh(g,e,r,a,d,y,w,E,A=!1,D=!1){const N=a[a.length-1].overscaledZ,G=g.context,Z=G.gl,X=g.useProgram("raster"),ne=g.transform,be=g.style.projection,_e=g.colorModeForRenderPass(),Se=!g.options.moving;for(const ke of a){const Le=g.getDepthModeForSublayer(ke.overscaledZ-N,r.paint.get("raster-opacity")===1?gr.ReadWrite:gr.ReadOnly,Z.LESS),Me=e.getTile(ke);Me.registerFadeDuration(r.paint.get("raster-fade-duration"));const De=e.findLoadedParent(ke,0),Ne=e.findLoadedSibling(ke),je=Uc(Me,De||Ne||null,e,r,g.transform,g.style.map.terrain);let at,It;const Ye=r.paint.get("raster-resampling")==="nearest"?Z.NEAREST:Z.LINEAR;G.activeTexture.set(Z.TEXTURE0),Me.texture.bind(Ye,Z.CLAMP_TO_EDGE,Z.LINEAR_MIPMAP_NEAREST),G.activeTexture.set(Z.TEXTURE1),De?(De.texture.bind(Ye,Z.CLAMP_TO_EDGE,Z.LINEAR_MIPMAP_NEAREST),at=Math.pow(2,De.tileID.overscaledZ-Me.tileID.overscaledZ),It=[Me.tileID.canonical.x*at%1,Me.tileID.canonical.y*at%1]):Me.texture.bind(Ye,Z.CLAMP_TO_EDGE,Z.LINEAR_MIPMAP_NEAREST),Me.texture.useMipmap&&G.extTextureFilterAnisotropic&&g.transform.pitch>20&&Z.texParameterf(Z.TEXTURE_2D,G.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,G.extTextureFilterAnisotropicMax);const ht=g.style.map.terrain&&g.style.map.terrain.getTerrainData(ke),Ct=ne.getProjectionData({overscaledTileID:ke,aligned:Se,applyGlobeMatrix:!D,applyTerrainMatrix:!0}),Jt=zc(It||[0,0],at||1,je,r,E),er=be.getMeshFromTileID(G,ke.canonical,y,w,"raster");X.draw(G,Z.TRIANGLES,Le,d?d[ke.overscaledZ]:Kr.disabled,_e,A?Lr.frontCCW:Lr.backCCW,Jt,ht,Ct,r.id,er.vertexBuffer,er.indexBuffer,er.segments)}}function Uc(g,e,r,a,d,y){const w=a.paint.get("raster-fade-duration");if(!y&&w>0){const E=Te.now(),A=(E-g.timeAdded)/w,D=e?(E-e.timeAdded)/w:-1,N=r.getSource(),G=qe(d,{tileSize:N.tileSize,roundZoom:N.roundZoom}),Z=!e||Math.abs(e.tileID.overscaledZ-G)>Math.abs(g.tileID.overscaledZ-G),X=Z&&g.refreshedUponExpiration?1:u.ae(Z?A:1-D,0,1);return g.refreshedUponExpiration&&A>=1&&(g.refreshedUponExpiration=!1),e?{opacity:1,mix:1-X}:{opacity:X,mix:0}}return{opacity:1,mix:0}}const Qu=new u.b7(1,0,0,1),Ju=new u.b7(0,1,0,1),Pu=new u.b7(0,0,1,1),Vc=new u.b7(1,0,1,1),hl=new u.b7(0,1,1,1);function Eu(g,e,r,a){Iu(g,0,e+r/2,g.transform.width,r,a)}function ec(g,e,r,a){Iu(g,e-r/2,0,r,g.transform.height,a)}function Iu(g,e,r,a,d,y){const w=g.context,E=w.gl;E.enable(E.SCISSOR_TEST),E.scissor(e*g.pixelRatio,r*g.pixelRatio,a*g.pixelRatio,d*g.pixelRatio),w.clear({color:y}),E.disable(E.SCISSOR_TEST)}function Ti(g,e,r){const a=g.context,d=a.gl,y=g.useProgram("debug"),w=gr.disabled,E=Kr.disabled,A=g.colorModeForRenderPass(),D="$debug",N=g.style.map.terrain&&g.style.map.terrain.getTerrainData(r);a.activeTexture.set(d.TEXTURE0);const G=e.getTileByID(r.key).latestRawTileData,Z=Math.floor((G&&G.byteLength||0)/1024),X=e.getTile(r).tileSize,ne=512/Math.min(X,512)*(r.overscaledZ/g.transform.zoom)*.5;let be=r.canonical.toString();r.overscaledZ!==r.canonical.z&&(be+=` => ${r.overscaledZ}`),function(Se,ke){Se.initDebugOverlayCanvas();const Le=Se.debugOverlayCanvas,Me=Se.context.gl,De=Se.debugOverlayCanvas.getContext("2d");De.clearRect(0,0,Le.width,Le.height),De.shadowColor="white",De.shadowBlur=2,De.lineWidth=1.5,De.strokeStyle="white",De.textBaseline="top",De.font="bold 36px Open Sans, sans-serif",De.fillText(ke,5,5),De.strokeText(ke,5,5),Se.debugOverlayTexture.update(Le),Se.debugOverlayTexture.bind(Me.LINEAR,Me.CLAMP_TO_EDGE)}(g,`${be} ${Z}kB`);const _e=g.transform.getProjectionData({overscaledTileID:r,applyGlobeMatrix:!0,applyTerrainMatrix:!0});y.draw(a,d.TRIANGLES,w,E,Ln.alphaBlended,Lr.disabled,_t(u.b7.transparent,ne),null,_e,D,g.debugBuffer,g.quadTriangleIndexBuffer,g.debugSegments),y.draw(a,d.LINE_STRIP,w,E,A,Lr.disabled,_t(u.b7.red),N,_e,D,g.debugBuffer,g.tileBorderIndexBuffer,g.debugSegments)}function Dl(g,e,r,a){const{isRenderingGlobe:d}=a,y=g.context,w=y.gl,E=g.transform,A=g.colorModeForRenderPass(),D=g.getDepthModeFor3D(),N=g.useProgram("terrain");y.bindFramebuffer.set(null),y.viewport.set([0,0,g.width,g.height]);for(const G of r){const Z=e.getTerrainMesh(G.tileID),X=g.renderToTexture.getTexture(G),ne=e.getTerrainData(G.tileID);y.activeTexture.set(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,X.texture);const be=e.getMeshFrameDelta(E.zoom),_e=E.calculateFogMatrix(G.tileID.toUnwrapped()),Se=Nh(be,_e,g.style.sky,E.pitch,d),ke=E.getProjectionData({overscaledTileID:G.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});N.draw(y,w.TRIANGLES,D,Kr.disabled,A,Lr.backCCW,Se,ne,ke,"terrain",Z.vertexBuffer,Z.indexBuffer,Z.segments)}}function _o(g,e){if(!e.mesh){const r=new u.aI;r.emplaceBack(-1,-1),r.emplaceBack(1,-1),r.emplaceBack(1,1),r.emplaceBack(-1,1);const a=new u.aK;a.emplaceBack(0,1,2),a.emplaceBack(0,2,3),e.mesh=new Nn(g.createVertexBuffer(r,yi.members),g.createIndexBuffer(a),u.aJ.simpleSegment(0,0,r.length,a.length))}return e.mesh}class Hh{constructor(e,r){this.context=new Ku(e),this.transform=r,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:u.ad(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=rt.maxUnderzooming+rt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new sr}resize(e,r,a){if(this.width=Math.floor(e*a),this.height=Math.floor(r*a),this.pixelRatio=a,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const d of this.style._order)this.style._layers[d].resize()}setup(){const e=this.context,r=new u.aI;r.emplaceBack(0,0),r.emplaceBack(u.Z,0),r.emplaceBack(0,u.Z),r.emplaceBack(u.Z,u.Z),this.tileExtentBuffer=e.createVertexBuffer(r,yi.members),this.tileExtentSegments=u.aJ.simpleSegment(0,0,4,2);const a=new u.aI;a.emplaceBack(0,0),a.emplaceBack(u.Z,0),a.emplaceBack(0,u.Z),a.emplaceBack(u.Z,u.Z),this.debugBuffer=e.createVertexBuffer(a,yi.members),this.debugSegments=u.aJ.simpleSegment(0,0,4,5);const d=new u.b_;d.emplaceBack(0,0,0,0),d.emplaceBack(u.Z,0,u.Z,0),d.emplaceBack(0,u.Z,0,u.Z),d.emplaceBack(u.Z,u.Z,u.Z,u.Z),this.rasterBoundsBuffer=e.createVertexBuffer(d,Bh.members),this.rasterBoundsSegments=u.aJ.simpleSegment(0,0,4,2);const y=new u.aI;y.emplaceBack(0,0),y.emplaceBack(u.Z,0),y.emplaceBack(0,u.Z),y.emplaceBack(u.Z,u.Z),this.rasterBoundsBufferPosOnly=e.createVertexBuffer(y,yi.members),this.rasterBoundsSegmentsPosOnly=u.aJ.simpleSegment(0,0,4,5);const w=new u.aI;w.emplaceBack(0,0),w.emplaceBack(1,0),w.emplaceBack(0,1),w.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(w,yi.members),this.viewportSegments=u.aJ.simpleSegment(0,0,4,2);const E=new u.b$;E.emplaceBack(0),E.emplaceBack(1),E.emplaceBack(3),E.emplaceBack(2),E.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(E);const A=new u.aK;A.emplaceBack(1,0,2),A.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(A);const D=this.context.gl;this.stencilClearMode=new Kr({func:D.ALWAYS,mask:0},0,255,D.ZERO,D.ZERO,D.ZERO),this.tileExtentMesh=new Nn(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const e=this.context,r=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const a=u.K();u.bQ(a,0,this.width,this.height,0,0,1),u.M(a,a,[r.drawingBufferWidth,r.drawingBufferHeight,0]);const d={mainMatrix:a,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:a};this.useProgram("clippingMask",null,!0).draw(e,r.TRIANGLES,gr.disabled,this.stencilClearMode,Ln.disabled,Lr.disabled,null,null,d,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(e,r,a){if(this.currentStencilSource===e.source||!e.isTileClipped()||!r||!r.length)return;this.currentStencilSource=e.source,this.nextStencilID+r.length>256&&this.clearStencil();const d=this.context;d.setColorMode(Ln.disabled),d.setDepthMode(gr.disabled);const y={};for(const w of r)y[w.key]=this.nextStencilID++;this._renderTileMasks(y,r,a,!0),this._renderTileMasks(y,r,a,!1),this._tileClippingMaskIDs=y}_renderTileMasks(e,r,a,d){const y=this.context,w=y.gl,E=this.style.projection,A=this.transform,D=this.useProgram("clippingMask");for(const N of r){const G=e[N.key],Z=this.style.map.terrain&&this.style.map.terrain.getTerrainData(N),X=E.getMeshFromTileID(this.context,N.canonical,d,!0,"stencil"),ne=A.getProjectionData({overscaledTileID:N,applyGlobeMatrix:!a,applyTerrainMatrix:!0});D.draw(y,w.TRIANGLES,gr.disabled,new Kr({func:w.ALWAYS,mask:0},G,255,w.KEEP,w.KEEP,w.REPLACE),Ln.disabled,a?Lr.disabled:Lr.backCCW,null,Z,ne,"$clipping",X.vertexBuffer,X.indexBuffer,X.segments)}}_renderTilesDepthBuffer(){const e=this.context,r=e.gl,a=this.style.projection,d=this.transform,y=this.useProgram("depth"),w=this.getDepthModeFor3D(),E=We(d,{tileSize:d.tileSize});for(const A of E){const D=this.style.map.terrain&&this.style.map.terrain.getTerrainData(A),N=a.getMeshFromTileID(this.context,A.canonical,!0,!0,"raster"),G=d.getProjectionData({overscaledTileID:A,applyGlobeMatrix:!0,applyTerrainMatrix:!0});y.draw(e,r.TRIANGLES,w,Kr.disabled,Ln.disabled,Lr.backCCW,null,D,G,"$clipping",N.vertexBuffer,N.indexBuffer,N.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const e=this.nextStencilID++,r=this.context.gl;return new Kr({func:r.NOTEQUAL,mask:255},e,255,r.KEEP,r.KEEP,r.REPLACE)}stencilModeForClipping(e){const r=this.context.gl;return new Kr({func:r.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,r.KEEP,r.KEEP,r.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(e){const r=this.context.gl,a=e.sort((w,E)=>E.overscaledZ-w.overscaledZ),d=a[a.length-1].overscaledZ,y=a[0].overscaledZ-d+1;if(y>1){this.currentStencilSource=void 0,this.nextStencilID+y>256&&this.clearStencil();const w={};for(let E=0;E<y;E++)w[E+d]=new Kr({func:r.GEQUAL,mask:255},E+this.nextStencilID,255,r.KEEP,r.KEEP,r.REPLACE);return this.nextStencilID+=y,[w,a]}return[{[d]:Kr.disabled},a]}stencilConfigForOverlapTwoPass(e){const r=this.context.gl,a=e.sort((w,E)=>E.overscaledZ-w.overscaledZ),d=a[a.length-1].overscaledZ,y=a[0].overscaledZ-d+1;if(this.clearStencil(),y>1){const w={},E={};for(let A=0;A<y;A++)w[A+d]=new Kr({func:r.GREATER,mask:255},y+1+A,255,r.KEEP,r.KEEP,r.REPLACE),E[A+d]=new Kr({func:r.GREATER,mask:255},1+A,255,r.KEEP,r.KEEP,r.REPLACE);return this.nextStencilID=2*y+1,[w,E,a]}return this.nextStencilID=3,[{[d]:new Kr({func:r.GREATER,mask:255},2,255,r.KEEP,r.KEEP,r.REPLACE)},{[d]:new Kr({func:r.GREATER,mask:255},1,255,r.KEEP,r.KEEP,r.REPLACE)},a]}colorModeForRenderPass(){const e=this.context.gl;return this._showOverdrawInspector?new Ln([e.CONSTANT_COLOR,e.ONE],new u.b7(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Ln.unblended:Ln.alphaBlended}getDepthModeForSublayer(e,r,a){if(!this.opaquePassEnabledForLayer())return gr.disabled;const d=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new gr(a||this.context.gl.LEQUAL,r,[d,d])}getDepthModeFor3D(){return new gr(this.context.gl.LEQUAL,gr.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(e,r){var a,d;this.style=e,this.options=r,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(Te.now()),this.imageManager.beginFrame();const y=this.style._order,w=this.style.sourceCaches,E={},A={},D={},N={isRenderingToTexture:!1,isRenderingGlobe:((a=e.projection)===null||a===void 0?void 0:a.transitionState)>0};for(const Z in w){const X=w[Z];X.used&&X.prepare(this.context),E[Z]=X.getVisibleCoordinates(!1),A[Z]=E[Z].slice().reverse(),D[Z]=X.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let Z=0;Z<y.length;Z++)if(this.style._layers[y[Z]].is3D()){this.opaquePassCutoff=Z;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const Z of y){const X=this.style._layers[Z];if(!X.hasOffscreenPass()||X.isHidden(this.transform.zoom))continue;const ne=A[X.source];(X.type==="custom"||ne.length)&&this.renderLayer(this,w[X.source],X,ne,N)}if((d=this.style.projection)===null||d===void 0||d.updateGPUdependent({context:this.context,useProgram:Z=>this.useProgram(Z)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:r.showOverdrawInspector?u.b7.black:u.b7.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(Z,X){const ne=Z.context,be=ne.gl,_e=((Ne,je,at)=>{const It=Math.cos(je.rollInRadians),Ye=Math.sin(je.rollInRadians),ht=et(je),Ct=je.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Ne.properties.get("sky-color"),u_horizon_color:Ne.properties.get("horizon-color"),u_horizon:[(je.width/2-ht*Ye)*at,(je.height/2+ht*It)*at],u_horizon_normal:[-Ye,It],u_sky_horizon_blend:Ne.properties.get("sky-horizon-blend")*je.height/2*at,u_sky_blend:Ct}})(X,Z.style.map.transform,Z.pixelRatio),Se=new gr(be.LEQUAL,gr.ReadWrite,[0,1]),ke=Kr.disabled,Le=Z.colorModeForRenderPass(),Me=Z.useProgram("sky"),De=_o(ne,X);Me.draw(ne,be.TRIANGLES,Se,ke,Le,Lr.disabled,_e,null,void 0,"sky",De.vertexBuffer,De.indexBuffer,De.segments)}(this,this.style.sky),this._showOverdrawInspector=r.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=y.length-1;this.currentLayer>=0;this.currentLayer--){const Z=this.style._layers[y[this.currentLayer]],X=w[Z.source],ne=E[Z.source];this._renderTileClippingMasks(Z,ne,!1),this.renderLayer(this,X,Z,ne,N)}this.renderPass="translucent";let G=!1;for(this.currentLayer=0;this.currentLayer<y.length;this.currentLayer++){const Z=this.style._layers[y[this.currentLayer]],X=w[Z.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(Z,N))continue;this.opaquePassEnabledForLayer()||G||(G=!0,N.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const ne=(Z.type==="symbol"?D:A)[Z.source];this._renderTileClippingMasks(Z,E[Z.source],!!this.renderToTexture),this.renderLayer(this,X,Z,ne,N)}if(N.isRenderingGlobe&&function(Z,X,ne){const be=Z.context,_e=be.gl,Se=Z.useProgram("atmosphere"),ke=new gr(_e.LEQUAL,gr.ReadOnly,[0,1]),Le=Z.transform,Me=function(Ct,Jt){const er=Ct.properties.get("position"),Ft=[-er.x,-er.y,-er.z],vr=u.ad(new Float64Array(16));return Ct.properties.get("anchor")==="map"&&(u.a_(vr,vr,Jt.rollInRadians),u.a$(vr,vr,-Jt.pitchInRadians),u.a_(vr,vr,Jt.bearingInRadians),u.a$(vr,vr,Jt.center.lat*Math.PI/180),u.bp(vr,vr,-Jt.center.lng*Math.PI/180)),u.bZ(Ft,Ft,vr),Ft}(ne,Z.transform),De=Le.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Ne=X.properties.get("atmosphere-blend")*De.projectionTransition;if(Ne===0)return;const je=Fi(Le.worldSize,Le.center.lat),at=Le.inverseProjectionMatrix,It=new Float64Array(4);It[3]=1,u.at(It,It,Le.modelViewProjectionMatrix),It[0]/=It[3],It[1]/=It[3],It[2]/=It[3],It[3]=1,u.at(It,It,at),It[0]/=It[3],It[1]/=It[3],It[2]/=It[3],It[3]=1;const Ye=((Ct,Jt,er,Ft,vr)=>({u_sun_pos:Ct,u_atmosphere_blend:Jt,u_globe_position:er,u_globe_radius:Ft,u_inv_proj_matrix:vr}))(Me,Ne,[It[0],It[1],It[2]],je,at),ht=_o(be,X);Se.draw(be,_e.TRIANGLES,ke,Kr.disabled,Ln.alphaBlended,Lr.disabled,Ye,null,null,"atmosphere",ht.vertexBuffer,ht.indexBuffer,ht.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const Z=function(X,ne){let be=null;const _e=Object.values(X._layers).flatMap(Me=>Me.source&&!Me.isHidden(ne)?[X.sourceCaches[Me.source]]:[]),Se=_e.filter(Me=>Me.getSource().type==="vector"),ke=_e.filter(Me=>Me.getSource().type!=="vector"),Le=Me=>{(!be||be.getSource().maxzoom<Me.getSource().maxzoom)&&(be=Me)};return Se.forEach(Me=>Le(Me)),be||ke.forEach(Me=>Le(Me)),be}(this.style,this.transform.zoom);Z&&function(X,ne,be){for(let _e=0;_e<be.length;_e++)Ti(X,ne,be[_e])}(this,Z,Z.getVisibleCoordinates())}this.options.showPadding&&function(Z){const X=Z.transform.padding;Eu(Z,Z.transform.height-(X.top||0),3,Qu),Eu(Z,X.bottom||0,3,Ju),ec(Z,X.left||0,3,Pu),ec(Z,Z.transform.width-(X.right||0),3,Vc);const ne=Z.transform.centerPoint;(function(be,_e,Se,ke){Iu(be,_e-1,Se-10,2,20,ke),Iu(be,_e-10,Se-1,20,2,ke)})(Z,ne.x,Z.transform.height-ne.y,hl)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(e){if(!this.style||!this.style.map||!this.style.map.terrain)return;const r=this.terrainFacilitator.matrix,a=this.transform.modelViewProjectionMatrix;let d=this.terrainFacilitator.dirty;d||(d=e?!u.c0(r,a):!u.c1(r,a)),d||(d=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),d&&(u.c2(r,a),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(y,w){const E=y.context,A=E.gl,D=y.transform,N=Ln.unblended,G=new gr(A.LEQUAL,gr.ReadWrite,[0,1]),Z=w.sourceCache.getRenderableTiles(),X=y.useProgram("terrainDepth");E.bindFramebuffer.set(w.getFramebuffer("depth").framebuffer),E.viewport.set([0,0,y.width/devicePixelRatio,y.height/devicePixelRatio]),E.clear({color:u.b7.transparent,depth:1});for(const ne of Z){const be=w.getTerrainMesh(ne.tileID),_e=w.getTerrainData(ne.tileID),Se=D.getProjectionData({overscaledTileID:ne.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),ke={u_ele_delta:w.getMeshFrameDelta(D.zoom)};X.draw(E,A.TRIANGLES,G,Kr.disabled,N,Lr.backCCW,ke,_e,Se,"terrain",be.vertexBuffer,be.indexBuffer,be.segments)}E.bindFramebuffer.set(null),E.viewport.set([0,0,y.width,y.height])}(this,this.style.map.terrain),function(y,w){const E=y.context,A=E.gl,D=y.transform,N=Ln.unblended,G=new gr(A.LEQUAL,gr.ReadWrite,[0,1]),Z=w.getCoordsTexture(),X=w.sourceCache.getRenderableTiles(),ne=y.useProgram("terrainCoords");E.bindFramebuffer.set(w.getFramebuffer("coords").framebuffer),E.viewport.set([0,0,y.width/devicePixelRatio,y.height/devicePixelRatio]),E.clear({color:u.b7.transparent,depth:1}),w.coordsIndex=[];for(const be of X){const _e=w.getTerrainMesh(be.tileID),Se=w.getTerrainData(be.tileID);E.activeTexture.set(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,Z.texture);const ke={u_terrain_coords_id:(255-w.coordsIndex.length)/255,u_texture:0,u_ele_delta:w.getMeshFrameDelta(D.zoom)},Le=D.getProjectionData({overscaledTileID:be.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});ne.draw(E,A.TRIANGLES,G,Kr.disabled,N,Lr.backCCW,ke,Se,Le,"terrain",_e.vertexBuffer,_e.indexBuffer,_e.segments),w.coordsIndex.push(be.tileID.key)}E.bindFramebuffer.set(null),E.viewport.set([0,0,y.width,y.height])}(this,this.style.map.terrain))}renderLayer(e,r,a,d,y){a.isHidden(this.transform.zoom)||(a.type==="background"||a.type==="custom"||(d||[]).length)&&(this.id=a.id,u.c3(a)?function(w,E,A,D,N,G){if(w.renderPass!=="translucent")return;const{isRenderingToTexture:Z}=G,X=Kr.disabled,ne=w.colorModeForRenderPass();(A._unevaluatedLayout.hasValue("text-variable-anchor")||A._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(be,_e,Se,ke,Le,Me,De,Ne,je){const at=_e.transform,It=_e.style.map.terrain,Ye=Le==="map",ht=Me==="map";for(const Ct of be){const Jt=ke.getTile(Ct),er=Jt.getBucket(Se);if(!er||!er.text||!er.text.segments.get().length)continue;const Ft=u.ak(er.textSizeData,at.zoom),vr=u.az(Jt,1,_e.transform.zoom),Zr=Mr(Ye,_e.transform,vr),En=Se.layout.get("icon-text-fit")!=="none"&&er.hasIconData();if(Ft){const pi=Math.pow(2,at.zoom-Jt.tileID.overscaledZ),ri=It?(Mi,ki)=>It.getElevation(Ct,Mi,ki):null;Ad(er,Ye,ht,je,at,Zr,pi,Ft,En,u.aA(at,Jt,De,Ne),Ct.toUnwrapped(),ri)}}}(D,w,A,E,A.layout.get("text-rotation-alignment"),A.layout.get("text-pitch-alignment"),A.paint.get("text-translate"),A.paint.get("text-translate-anchor"),N),A.paint.get("icon-opacity").constantOr(1)!==0&&Nc(w,E,A,D,!1,A.paint.get("icon-translate"),A.paint.get("icon-translate-anchor"),A.layout.get("icon-rotation-alignment"),A.layout.get("icon-pitch-alignment"),A.layout.get("icon-keep-upright"),X,ne,Z),A.paint.get("text-opacity").constantOr(1)!==0&&Nc(w,E,A,D,!0,A.paint.get("text-translate"),A.paint.get("text-translate-anchor"),A.layout.get("text-rotation-alignment"),A.layout.get("text-pitch-alignment"),A.layout.get("text-keep-upright"),X,ne,Z),E.map.showCollisionBoxes&&(Wh(w,E,A,D,!0),Wh(w,E,A,D,!1))}(e,r,a,d,this.style.placement.variableOffsets,y):u.c4(a)?function(w,E,A,D,N){if(w.renderPass!=="translucent")return;const{isRenderingToTexture:G}=N,Z=A.paint.get("circle-opacity"),X=A.paint.get("circle-stroke-width"),ne=A.paint.get("circle-stroke-opacity"),be=!A.layout.get("circle-sort-key").isConstant();if(Z.constantOr(1)===0&&(X.constantOr(1)===0||ne.constantOr(1)===0))return;const _e=w.context,Se=_e.gl,ke=w.transform,Le=w.getDepthModeForSublayer(0,gr.ReadOnly),Me=Kr.disabled,De=w.colorModeForRenderPass(),Ne=[],je=ke.getCircleRadiusCorrection();for(let at=0;at<D.length;at++){const It=D[at],Ye=E.getTile(It),ht=Ye.getBucket(A);if(!ht)continue;const Ct=A.paint.get("circle-translate"),Jt=A.paint.get("circle-translate-anchor"),er=u.aA(ke,Ye,Ct,Jt),Ft=ht.programConfigurations.get(A.id),vr=w.useProgram("circle",Ft),Zr=ht.layoutVertexBuffer,En=ht.indexBuffer,pi=w.style.map.terrain&&w.style.map.terrain.getTerrainData(It),ri={programConfiguration:Ft,program:vr,layoutVertexBuffer:Zr,indexBuffer:En,uniformValues:q(w,Ye,A,er,je),terrainData:pi,projectionData:ke.getProjectionData({overscaledTileID:It,applyGlobeMatrix:!G,applyTerrainMatrix:!0})};if(be){const Mi=ht.segments.get();for(const ki of Mi)Ne.push({segments:new u.aJ([ki]),sortKey:ki.sortKey,state:ri})}else Ne.push({segments:ht.segments,sortKey:0,state:ri})}be&&Ne.sort((at,It)=>at.sortKey-It.sortKey);for(const at of Ne){const{programConfiguration:It,program:Ye,layoutVertexBuffer:ht,indexBuffer:Ct,uniformValues:Jt,terrainData:er,projectionData:Ft}=at.state;Ye.draw(_e,Se.TRIANGLES,Le,Me,De,Lr.backCCW,Jt,er,Ft,A.id,ht,Ct,at.segments,A.paint,w.transform.zoom,It)}}(e,r,a,d,y):u.c5(a)?function(w,E,A,D,N){if(A.paint.get("heatmap-opacity")===0)return;const G=w.context,{isRenderingToTexture:Z,isRenderingGlobe:X}=N;if(w.style.map.terrain){for(const ne of D){const be=E.getTile(ne);E.hasRenderableParent(ne)||(w.renderPass==="offscreen"?cl(w,be,A,ne,X):w.renderPass==="translucent"&&$c(w,A,ne,Z,X))}G.viewport.set([0,0,w.width,w.height])}else w.renderPass==="offscreen"?function(ne,be,_e,Se){const ke=ne.context,Le=ke.gl,Me=ne.transform,De=Kr.disabled,Ne=new Ln([Le.ONE,Le.ONE],u.b7.transparent,[!0,!0,!0,!0]);(function(je,at,It){const Ye=je.gl;je.activeTexture.set(Ye.TEXTURE1),je.viewport.set([0,0,at.width/4,at.height/4]);let ht=It.heatmapFbos.get(u.bW);ht?(Ye.bindTexture(Ye.TEXTURE_2D,ht.colorAttachment.get()),je.bindFramebuffer.set(ht.framebuffer)):(ht=jc(je,at.width/4,at.height/4),It.heatmapFbos.set(u.bW,ht))})(ke,ne,_e),ke.clear({color:u.b7.transparent});for(let je=0;je<Se.length;je++){const at=Se[je];if(be.hasRenderableParent(at))continue;const It=be.getTile(at),Ye=It.getBucket(_e);if(!Ye)continue;const ht=Ye.programConfigurations.get(_e.id),Ct=ne.useProgram("heatmap",ht),Jt=Me.getProjectionData({overscaledTileID:at,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),er=Me.getCircleRadiusCorrection();Ct.draw(ke,Le.TRIANGLES,gr.disabled,De,Ne,Lr.backCCW,ot(It,Me.zoom,_e.paint.get("heatmap-intensity"),er),null,Jt,_e.id,Ye.layoutVertexBuffer,Ye.indexBuffer,Ye.segments,_e.paint,Me.zoom,ht)}ke.viewport.set([0,0,ne.width,ne.height])}(w,E,A,D):w.renderPass==="translucent"&&function(ne,be){const _e=ne.context,Se=_e.gl;_e.setColorMode(ne.colorModeForRenderPass());const ke=be.heatmapFbos.get(u.bW);ke&&(_e.activeTexture.set(Se.TEXTURE0),Se.bindTexture(Se.TEXTURE_2D,ke.colorAttachment.get()),_e.activeTexture.set(Se.TEXTURE1),Tu(_e,be).bind(Se.LINEAR,Se.CLAMP_TO_EDGE),ne.useProgram("heatmapTexture").draw(_e,Se.TRIANGLES,gr.disabled,Kr.disabled,ne.colorModeForRenderPass(),Lr.disabled,Nt(ne,be,0,1),null,null,be.id,ne.viewportBuffer,ne.quadTriangleIndexBuffer,ne.viewportSegments,be.paint,ne.transform.zoom))}(w,A)}(e,r,a,d,y):u.c6(a)?function(w,E,A,D,N){if(w.renderPass!=="translucent")return;const{isRenderingToTexture:G}=N,Z=A.paint.get("line-opacity"),X=A.paint.get("line-width");if(Z.constantOr(1)===0||X.constantOr(1)===0)return;const ne=w.getDepthModeForSublayer(0,gr.ReadOnly),be=w.colorModeForRenderPass(),_e=A.paint.get("line-dasharray"),Se=A.paint.get("line-pattern"),ke=Se.constantOr(1),Le=A.paint.get("line-gradient"),Me=A.getCrossfadeParameters(),De=ke?"linePattern":_e?"lineSDF":Le?"lineGradient":"line",Ne=w.context,je=Ne.gl,at=w.transform;let It=!0;for(const Ye of D){const ht=E.getTile(Ye);if(ke&&!ht.patternsLoaded())continue;const Ct=ht.getBucket(A);if(!Ct)continue;const Jt=Ct.programConfigurations.get(A.id),er=w.context.program.get(),Ft=w.useProgram(De,Jt),vr=It||Ft.program!==er,Zr=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Ye),En=Se.constantOr(null);if(En&&ht.imageAtlas){const In=ht.imageAtlas,Cn=In.patternPositions[En.to.toString()],Hi=In.patternPositions[En.from.toString()];Cn&&Hi&&Jt.setConstantPatternPositions(Cn,Hi)}const pi=at.getProjectionData({overscaledTileID:Ye,applyGlobeMatrix:!G,applyTerrainMatrix:!0}),ri=at.getPixelScale(),Mi=ke?Fo(w,ht,A,ri,Me):_e?ks(w,ht,A,ri,_e,Me):Le?fi(w,ht,A,ri,Ct.lineClipsArray.length):Xr(w,ht,A,ri);if(ke)Ne.activeTexture.set(je.TEXTURE0),ht.imageAtlasTexture.bind(je.LINEAR,je.CLAMP_TO_EDGE),Jt.updatePaintBuffers(Me);else if(_e&&(vr||w.lineAtlas.dirty))Ne.activeTexture.set(je.TEXTURE0),w.lineAtlas.bind(Ne);else if(Le){const In=Ct.gradients[A.id];let Cn=In.texture;if(A.gradientVersion!==In.version){let Hi=256;if(A.stepInterpolant){const vo=E.getSource().maxzoom,ao=Ye.canonical.z===vo?Math.ceil(1<<w.transform.maxZoom-Ye.canonical.z):1;Hi=u.ae(u.bX(Ct.maxLineLength/u.Z*1024*ao),256,Ne.maxTextureSize)}In.gradient=u.bY({expression:A.gradientExpression(),evaluationKey:"lineProgress",resolution:Hi,image:In.gradient||void 0,clips:Ct.lineClipsArray}),In.texture?In.texture.update(In.gradient):In.texture=new ze(Ne,In.gradient,je.RGBA),In.version=A.gradientVersion,Cn=In.texture}Ne.activeTexture.set(je.TEXTURE0),Cn.bind(A.stepInterpolant?je.NEAREST:je.LINEAR,je.CLAMP_TO_EDGE)}const ki=w.stencilModeForClipping(Ye);Ft.draw(Ne,je.TRIANGLES,ne,ki,be,Lr.disabled,Mi,Zr,pi,A.id,Ct.layoutVertexBuffer,Ct.indexBuffer,Ct.segments,A.paint,w.transform.zoom,Jt,Ct.layoutVertexBuffer2),It=!1}}(e,r,a,d,y):u.c7(a)?function(w,E,A,D,N){const G=A.paint.get("fill-color"),Z=A.paint.get("fill-opacity");if(Z.constantOr(1)===0)return;const{isRenderingToTexture:X}=N,ne=w.colorModeForRenderPass(),be=A.paint.get("fill-pattern"),_e=w.opaquePassEnabledForLayer()&&!be.constantOr(1)&&G.constantOr(u.b7.transparent).a===1&&Z.constantOr(0)===1?"opaque":"translucent";if(w.renderPass===_e){const Se=w.getDepthModeForSublayer(1,w.renderPass==="opaque"?gr.ReadWrite:gr.ReadOnly);Ll(w,E,A,D,Se,ne,!1,X)}if(w.renderPass==="translucent"&&A.paint.get("fill-antialias")){const Se=w.getDepthModeForSublayer(A.getPaintProperty("fill-outline-color")?2:0,gr.ReadOnly);Ll(w,E,A,D,Se,ne,!0,X)}}(e,r,a,d,y):u.c8(a)?function(w,E,A,D,N){const G=A.paint.get("fill-extrusion-opacity");if(G===0)return;const{isRenderingToTexture:Z}=N;if(w.renderPass==="translucent"){const X=new gr(w.context.gl.LEQUAL,gr.ReadWrite,w.depthRangeFor3D);if(G!==1||A.paint.get("fill-extrusion-pattern").constantOr(1))Ni(w,E,A,D,X,Kr.disabled,Ln.disabled,Z),Ni(w,E,A,D,X,w.stencilModeFor3D(),w.colorModeForRenderPass(),Z);else{const ne=w.colorModeForRenderPass();Ni(w,E,A,D,X,Kr.disabled,ne,Z)}}}(e,r,a,d,y):u.c9(a)?function(w,E,A,D,N){if(w.renderPass!=="offscreen"&&w.renderPass!=="translucent")return;const{isRenderingToTexture:G}=N,Z=w.context,X=w.style.projection.useSubdivision,ne=w.getDepthModeForSublayer(0,gr.ReadOnly),be=w.colorModeForRenderPass();if(w.renderPass==="offscreen")(function(_e,Se,ke,Le,Me,De,Ne){const je=_e.context,at=je.gl;for(const It of ke){const Ye=Se.getTile(It),ht=Ye.dem;if(!ht||!ht.data||!Ye.needsHillshadePrepare)continue;const Ct=ht.dim,Jt=ht.stride,er=ht.getPixels();if(je.activeTexture.set(at.TEXTURE1),je.pixelStoreUnpackPremultiplyAlpha.set(!1),Ye.demTexture=Ye.demTexture||_e.getTileTexture(Jt),Ye.demTexture){const vr=Ye.demTexture;vr.update(er,{premultiply:!1}),vr.bind(at.NEAREST,at.CLAMP_TO_EDGE)}else Ye.demTexture=new ze(je,er,at.RGBA,{premultiply:!1}),Ye.demTexture.bind(at.NEAREST,at.CLAMP_TO_EDGE);je.activeTexture.set(at.TEXTURE0);let Ft=Ye.fbo;if(!Ft){const vr=new ze(je,{width:Ct,height:Ct,data:null},at.RGBA);vr.bind(at.LINEAR,at.CLAMP_TO_EDGE),Ft=Ye.fbo=je.createFramebuffer(Ct,Ct,!0,!1),Ft.colorAttachment.set(vr.texture)}je.bindFramebuffer.set(Ft.framebuffer),je.viewport.set([0,0,Ct,Ct]),_e.useProgram("hillshadePrepare").draw(je,at.TRIANGLES,Me,De,Ne,Lr.disabled,Br(Ye.tileID,ht),null,null,Le.id,_e.rasterBoundsBuffer,_e.quadTriangleIndexBuffer,_e.rasterBoundsSegments),Ye.needsHillshadePrepare=!1}})(w,E,D,A,ne,Kr.disabled,be),Z.viewport.set([0,0,w.width,w.height]);else if(w.renderPass==="translucent")if(X){const[_e,Se,ke]=w.stencilConfigForOverlapTwoPass(D);Bo(w,E,A,ke,_e,ne,be,!1,G),Bo(w,E,A,ke,Se,ne,be,!0,G)}else{const[_e,Se]=w.getStencilConfigForOverlapAndUpdateStencilID(D);Bo(w,E,A,Se,_e,ne,be,!1,G)}}(e,r,a,d,y):u.ca(a)?function(w,E,A,D,N){if(w.renderPass!=="translucent"||A.paint.get("raster-opacity")===0||!D.length)return;const{isRenderingToTexture:G}=N,Z=E.getSource(),X=w.style.projection.useSubdivision;if(Z instanceof sn)mh(w,E,A,D,null,!1,!1,Z.tileCoords,Z.flippedWindingOrder,G);else if(X){const[ne,be,_e]=w.stencilConfigForOverlapTwoPass(D);mh(w,E,A,_e,ne,!1,!0,ph,!1,G),mh(w,E,A,_e,be,!0,!0,ph,!1,G)}else{const[ne,be]=w.getStencilConfigForOverlapAndUpdateStencilID(D);mh(w,E,A,be,ne,!1,!0,ph,!1,G)}}(e,r,a,d,y):u.cb(a)?function(w,E,A,D,N){const G=A.paint.get("background-color"),Z=A.paint.get("background-opacity");if(Z===0)return;const{isRenderingToTexture:X}=N,ne=w.context,be=ne.gl,_e=w.style.projection,Se=w.transform,ke=Se.tileSize,Le=A.paint.get("background-pattern");if(w.isPatternMissing(Le))return;const Me=!Le&&G.a===1&&Z===1&&w.opaquePassEnabledForLayer()?"opaque":"translucent";if(w.renderPass!==Me)return;const De=Kr.disabled,Ne=w.getDepthModeForSublayer(0,Me==="opaque"?gr.ReadWrite:gr.ReadOnly),je=w.colorModeForRenderPass(),at=w.useProgram(Le?"backgroundPattern":"background"),It=D||We(Se,{tileSize:ke,terrain:w.style.map.terrain});Le&&(ne.activeTexture.set(be.TEXTURE0),w.imageManager.bind(w.context));const Ye=A.getCrossfadeParameters();for(const ht of It){const Ct=Se.getProjectionData({overscaledTileID:ht,applyGlobeMatrix:!X,applyTerrainMatrix:!0}),Jt=Le?Id(Z,w,Le,{tileID:ht,tileSize:ke},Ye):jh(Z,G),er=w.style.map.terrain&&w.style.map.terrain.getTerrainData(ht),Ft=_e.getMeshFromTileID(ne,ht.canonical,!1,!0,"raster");at.draw(ne,be.TRIANGLES,Ne,De,je,Lr.backCCW,Jt,er,Ct,A.id,Ft.vertexBuffer,Ft.indexBuffer,Ft.segments)}}(e,0,a,d,y):u.cc(a)&&function(w,E,A,D){const{isRenderingGlobe:N}=D,G=w.context,Z=A.implementation,X=w.style.projection,ne=w.transform,be=ne.getProjectionDataForCustomLayer(N),_e={farZ:ne.farZ,nearZ:ne.nearZ,fov:ne.fov*Math.PI/180,modelViewProjectionMatrix:ne.modelViewProjectionMatrix,projectionMatrix:ne.projectionMatrix,shaderData:{variantName:X.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${X.shaderPreludeCode.vertexSource}`,define:X.shaderDefine},defaultProjectionData:be},Se=Z.renderingMode?Z.renderingMode:"2d";if(w.renderPass==="offscreen"){const ke=Z.prerender;ke&&(w.setCustomLayerDefaults(),G.setColorMode(w.colorModeForRenderPass()),ke.call(Z,G.gl,_e),G.setDirty(),w.setBaseState())}else if(w.renderPass==="translucent"){w.setCustomLayerDefaults(),G.setColorMode(w.colorModeForRenderPass()),G.setStencilMode(Kr.disabled);const ke=Se==="3d"?w.getDepthModeFor3D():w.getDepthModeForSublayer(0,gr.ReadOnly);G.setDepthMode(ke),Z.render(G.gl,_e),G.setDirty(),w.setBaseState(),G.bindFramebuffer.set(null)}}(e,0,a,y))}saveTileTexture(e){const r=this._tileTextures[e.size[0]];r?r.push(e):this._tileTextures[e.size[0]]=[e]}getTileTexture(e){const r=this._tileTextures[e];return r&&r.length>0?r.pop():null}isPatternMissing(e){if(!e)return!1;if(!e.from||!e.to)return!0;const r=this.imageManager.getPattern(e.from.toString()),a=this.imageManager.getPattern(e.to.toString());return!r||!a}useProgram(e,r,a=!1,d=[]){this.cache=this.cache||{};const y=!!this.style.map.terrain,w=this.style.projection,E=a?kr.projectionMercator:w.shaderPreludeCode,A=a?to:w.shaderDefine,D=e+(r?r.cacheKey:"")+`/${a?Jr:w.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(y?"/terrain":"")+(d?`/${d.join("/")}`:"");return this.cache[D]||(this.cache[D]=new kl(this.context,kr[e],r,Jl[e],this._showOverdrawInspector,y,E,A,d)),this.cache[D]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new ze(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:e,drawingBufferHeight:r}=this.context.gl;return this.width!==e||this.height!==r}}function Ol(g,e){let r,a=!1,d=null,y=null;const w=()=>{d=null,a&&(g.apply(y,r),d=setTimeout(w,e),a=!1)};return(...E)=>(a=!0,y=this,r=E,d||w(),d)}class Ua{constructor(e){this._getCurrentHash=()=>{const r=window.location.hash.replace("#","");if(this._hashName){let a;return r.split("&").map(d=>d.split("=")).forEach(d=>{d[0]===this._hashName&&(a=d)}),(a&&a[1]||"").split("/")}return r.split("/")},this._onHashChange=()=>{const r=this._getCurrentHash();if(!this._isValidHash(r))return!1;const a=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(r[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+r[2],+r[1]],zoom:+r[0],bearing:a,pitch:+(r[4]||0)}),!0},this._updateHashUnthrottled=()=>{const r=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,r)},this._removeHash=()=>{const r=this._getCurrentHash();if(r.length===0)return;const a=r.join("/");let d=a;d.split("&").length>0&&(d=d.split("&")[0]),this._hashName&&(d=`${this._hashName}=${a}`);let y=window.location.hash.replace(d,"");y.startsWith("#&")?y=y.slice(0,1)+y.slice(2):y==="#"&&(y="");let w=window.location.href.replace(/(#.+)?$/,y);w=w.replace("&&","&"),window.history.replaceState(window.history.state,null,w)},this._updateHash=Ol(this._updateHashUnthrottled,300),this._hashName=e&&encodeURIComponent(e)}addTo(e){return this._map=e,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(e){const r=this._map.getCenter(),a=Math.round(100*this._map.getZoom())/100,d=Math.ceil((a*Math.LN2+Math.log(512/360/.5))/Math.LN10),y=Math.pow(10,d),w=Math.round(r.lng*y)/y,E=Math.round(r.lat*y)/y,A=this._map.getBearing(),D=this._map.getPitch();let N="";if(N+=e?`/${w}/${E}/${a}`:`${a}/${E}/${w}`,(A||D)&&(N+="/"+Math.round(10*A)/10),D&&(N+=`/${Math.round(D)}`),this._hashName){const G=this._hashName;let Z=!1;const X=window.location.hash.slice(1).split("&").map(ne=>{const be=ne.split("=")[0];return be===G?(Z=!0,`${be}=${N}`):ne}).filter(ne=>ne);return Z||X.push(`${G}=${N}`),`#${X.join("&")}`}return`#${N}`}_isValidHash(e){if(e.length<3||e.some(isNaN))return!1;try{new u.Q(+e[2],+e[1])}catch{return!1}const r=+e[0],a=+(e[3]||0),d=+(e[4]||0);return r>=this._map.getMinZoom()&&r<=this._map.getMaxZoom()&&a>=-180&&a<=180&&d>=this._map.getMinPitch()&&d<=this._map.getMaxPitch()}}const Wo={linearity:.3,easing:u.cd(0,0,.3,1)},zs=u.e({deceleration:2500,maxSpeed:1400},Wo),Mu=u.e({deceleration:20,maxSpeed:1400},Wo),ce=u.e({deceleration:1e3,maxSpeed:360},Wo),tc=u.e({deceleration:1e3,maxSpeed:90},Wo),dl=u.e({deceleration:1e3,maxSpeed:360},Wo);class Ho{constructor(e){this._map=e,this.clear()}clear(){this._inertiaBuffer=[]}record(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:Te.now(),settings:e})}_drainInertiaBuffer(){const e=this._inertiaBuffer,r=Te.now();for(;e.length>0&&r-e[0].time>160;)e.shift()}_onMoveEnd(e){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const r={zoom:0,bearing:0,pitch:0,roll:0,pan:new u.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:y}of this._inertiaBuffer)r.zoom+=y.zoomDelta||0,r.bearing+=y.bearingDelta||0,r.pitch+=y.pitchDelta||0,r.roll+=y.rollDelta||0,y.panDelta&&r.pan._add(y.panDelta),y.around&&(r.around=y.around),y.pinchAround&&(r.pinchAround=y.pinchAround);const a=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,d={};if(r.pan.mag()){const y=eu(r.pan.mag(),a,u.e({},zs,e||{})),w=r.pan.mult(y.amount/r.pan.mag()),E=this._map.cameraHelper.handlePanInertia(w,this._map.transform);d.center=E.easingCenter,d.offset=E.easingOffset,gn(d,y)}if(r.zoom){const y=eu(r.zoom,a,Mu);d.zoom=this._map.transform.zoom+y.amount,gn(d,y)}if(r.bearing){const y=eu(r.bearing,a,ce);d.bearing=this._map.transform.bearing+u.ae(y.amount,-179,179),gn(d,y)}if(r.pitch){const y=eu(r.pitch,a,tc);d.pitch=this._map.transform.pitch+y.amount,gn(d,y)}if(r.roll){const y=eu(r.roll,a,dl);d.roll=this._map.transform.roll+u.ae(y.amount,-179,179),gn(d,y)}if(d.zoom||d.bearing){const y=r.pinchAround===void 0?r.around:r.pinchAround;d.around=y?this._map.unproject(y):this._map.getCenter()}return this.clear(),u.e(d,{noMoveStart:!0})}}function gn(g,e){(!g.duration||g.duration<e.duration)&&(g.duration=e.duration,g.easing=e.easing)}function eu(g,e,r){const{maxSpeed:a,linearity:d,deceleration:y}=r,w=u.ae(g*d/(e/1e3),-a,a),E=Math.abs(w)/(y*d);return{easing:r.easing,duration:1e3*E,amount:w*(E/2)}}class so extends u.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,r,a,d={}){a=a instanceof MouseEvent?a:new MouseEvent(e,a);const y=le.mousePos(r.getCanvas(),a),w=r.unproject(y);super(e,u.e({point:y,lngLat:w,originalEvent:a},d)),this._defaultPrevented=!1,this.target=r}}class fl extends u.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,r,a){const d=e==="touchend"?a.changedTouches:a.touches,y=le.touchPos(r.getCanvasContainer(),d),w=y.map(A=>r.unproject(A)),E=y.reduce((A,D,N,G)=>A.add(D.div(G.length)),new u.P(0,0));super(e,{points:y,point:E,lngLats:w,lngLat:r.unproject(E),originalEvent:a}),this._defaultPrevented=!1}}class fs extends u.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,r,a){super(e,{originalEvent:a}),this._defaultPrevented=!1}}class Ii{constructor(e,r){this._map=e,this._clickTolerance=r.clickTolerance}reset(){delete this._mousedownPos}wheel(e){return this._firePreventable(new fs(e.type,this._map,e))}mousedown(e,r){return this._mousedownPos=r,this._firePreventable(new so(e.type,this._map,e))}mouseup(e){this._map.fire(new so(e.type,this._map,e))}click(e,r){this._mousedownPos&&this._mousedownPos.dist(r)>=this._clickTolerance||this._map.fire(new so(e.type,this._map,e))}dblclick(e){return this._firePreventable(new so(e.type,this._map,e))}mouseover(e){this._map.fire(new so(e.type,this._map,e))}mouseout(e){this._map.fire(new so(e.type,this._map,e))}touchstart(e){return this._firePreventable(new fl(e.type,this._map,e))}touchmove(e){this._map.fire(new fl(e.type,this._map,e))}touchend(e){this._map.fire(new fl(e.type,this._map,e))}touchcancel(e){this._map.fire(new fl(e.type,this._map,e))}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ci{constructor(e){this._map=e}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(e){this._map.fire(new so(e.type,this._map,e))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new so("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._ignoreContextMenu||this._map.fire(new so(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ba{constructor(e){this._map=e}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(e){return this.transform.screenPointToLocation(u.P.convert(e),this._map.terrain)}}class No{constructor(e,r){this._map=e,this._tr=new ba(e),this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=r.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(e,r){this.isEnabled()&&e.shiftKey&&e.button===0&&(le.disableDrag(),this._startPos=this._lastPos=r,this._active=!0)}mousemoveWindow(e,r){if(!this._active)return;const a=r;if(this._lastPos.equals(a)||!this._box&&a.dist(this._startPos)<this._clickTolerance)return;const d=this._startPos;this._lastPos=a,this._box||(this._box=le.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",e));const y=Math.min(d.x,a.x),w=Math.max(d.x,a.x),E=Math.min(d.y,a.y),A=Math.max(d.y,a.y);le.setTransform(this._box,`translate(${y}px,${E}px)`),this._box.style.width=w-y+"px",this._box.style.height=A-E+"px"}mouseupWindow(e,r){if(!this._active||e.button!==0)return;const a=this._startPos,d=r;if(this.reset(),le.suppressClick(),a.x!==d.x||a.y!==d.y)return this._map.fire(new u.l("boxzoomend",{originalEvent:e})),{cameraAnimation:y=>y.fitScreenCoordinates(a,d,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",e)}keydown(e){this._active&&e.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",e))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(le.remove(this._box),this._box=null),le.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(e,r){return this._map.fire(new u.l(e,{originalEvent:r}))}}function qo(g,e){if(g.length!==e.length)throw new Error(`The number of touches and points are not equal - touches ${g.length}, points ${e.length}`);const r={};for(let a=0;a<g.length;a++)r[g[a].identifier]=e[a];return r}class ps{constructor(e){this.reset(),this.numTouches=e.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(e,r,a){(this.centroid||a.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=e.timeStamp),a.length===this.numTouches&&(this.centroid=function(d){const y=new u.P(0,0);for(const w of d)y._add(w);return y.div(d.length)}(r),this.touches=qo(a,r)))}touchmove(e,r,a){if(this.aborted||!this.centroid)return;const d=qo(a,r);for(const y in this.touches){const w=d[y];(!w||w.dist(this.touches[y])>30)&&(this.aborted=!0)}}touchend(e,r,a){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),a.length===0){const d=!this.aborted&&this.centroid;if(this.reset(),d)return d}}}class pl{constructor(e){this.singleTap=new ps(e),this.numTaps=e.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(e,r,a){this.singleTap.touchstart(e,r,a)}touchmove(e,r,a){this.singleTap.touchmove(e,r,a)}touchend(e,r,a){const d=this.singleTap.touchend(e,r,a);if(d){const y=e.timeStamp-this.lastTime<500,w=!this.lastTap||this.lastTap.dist(d)<30;if(y&&w||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=d,this.count===this.numTaps)return this.reset(),d}}}class Ls{constructor(e){this._tr=new ba(e),this._zoomIn=new pl({numTouches:1,numTaps:2}),this._zoomOut=new pl({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(e,r,a){this._zoomIn.touchstart(e,r,a),this._zoomOut.touchstart(e,r,a)}touchmove(e,r,a){this._zoomIn.touchmove(e,r,a),this._zoomOut.touchmove(e,r,a)}touchend(e,r,a){const d=this._zoomIn.touchend(e,r,a),y=this._zoomOut.touchend(e,r,a),w=this._tr;return d?(this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:w.zoom+1,around:w.unproject(d)},{originalEvent:e})}):y?(this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:w.zoom-1,around:w.unproject(y)},{originalEvent:e})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ko{constructor(e){this._enabled=!!e.enable,this._moveStateManager=e.moveStateManager,this._clickTolerance=e.clickTolerance||1,this._moveFunction=e.move,this._activateOnStart=!!e.activateOnStart,e.assignEvents(this),this.reset()}reset(e){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(e)}_move(...e){const r=this._moveFunction(...e);if(r.bearingDelta||r.pitchDelta||r.rollDelta||r.around||r.panDelta)return this._active=!0,r}dragStart(e,r){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(e)&&(this._moveStateManager.startMove(e),this._lastPoint=Array.isArray(r)?r[0]:r,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(e,r){if(!this.isEnabled())return;const a=this._lastPoint;if(!a)return;if(e.preventDefault(),!this._moveStateManager.isValidMoveEvent(e))return void this.reset(e);const d=Array.isArray(r)?r[0]:r;return!this._moved&&d.dist(a)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=d,this._move(a,d))}dragEnd(e){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(e)&&(this._moved&&le.suppressClick(),this.reset(e))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Va={0:1,2:2};class rc{constructor(e){this._correctEvent=e.checkCorrectEvent}startMove(e){const r=le.mouseButton(e);this._eventButton=r}endMove(e){delete this._eventButton}isValidStartEvent(e){return this._correctEvent(e)}isValidMoveEvent(e){return!function(r,a){const d=Va[a];return r.buttons===void 0||(r.buttons&d)!==d}(e,this._eventButton)}isValidEndEvent(e){return le.mouseButton(e)===this._eventButton}}class Wi{constructor(){this._firstTouch=void 0}_isOneFingerTouch(e){return e.targetTouches.length===1}_isSameTouchEvent(e){return e.targetTouches[0].identifier===this._firstTouch}startMove(e){this._firstTouch=e.targetTouches[0].identifier}endMove(e){delete this._firstTouch}isValidStartEvent(e){return this._isOneFingerTouch(e)}isValidMoveEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}isValidEndEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}}class nc{constructor(e=new rc({checkCorrectEvent:()=>!0}),r=new Wi){this.mouseMoveStateManager=e,this.oneFingerTouchMoveStateManager=r}_executeRelevantHandler(e,r,a){return e instanceof MouseEvent?r(e):typeof TouchEvent<"u"&&e instanceof TouchEvent?a(e):void 0}startMove(e){this._executeRelevantHandler(e,r=>this.mouseMoveStateManager.startMove(r),r=>this.oneFingerTouchMoveStateManager.startMove(r))}endMove(e){this._executeRelevantHandler(e,r=>this.mouseMoveStateManager.endMove(r),r=>this.oneFingerTouchMoveStateManager.endMove(r))}isValidStartEvent(e){return this._executeRelevantHandler(e,r=>this.mouseMoveStateManager.isValidStartEvent(r),r=>this.oneFingerTouchMoveStateManager.isValidStartEvent(r))}isValidMoveEvent(e){return this._executeRelevantHandler(e,r=>this.mouseMoveStateManager.isValidMoveEvent(r),r=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(r))}isValidEndEvent(e){return this._executeRelevantHandler(e,r=>this.mouseMoveStateManager.isValidEndEvent(r),r=>this.oneFingerTouchMoveStateManager.isValidEndEvent(r))}}const Za=g=>{g.mousedown=g.dragStart,g.mousemoveWindow=g.dragMove,g.mouseup=g.dragEnd,g.contextmenu=e=>{e.preventDefault()}};class qh{constructor(e,r){this._clickTolerance=e.clickTolerance||1,this._map=r,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new u.P(0,0)}_shouldBePrevented(e){return e<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(e,r,a){return this._calculateTransform(e,r,a)}touchmove(e,r,a){if(this._active){if(!this._shouldBePrevented(a.length))return e.preventDefault(),this._calculateTransform(e,r,a);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",e)}}touchend(e,r,a){this._calculateTransform(e,r,a),this._active&&this._shouldBePrevented(a.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(e,r,a){a.length>0&&(this._active=!0);const d=qo(a,r),y=new u.P(0,0),w=new u.P(0,0);let E=0;for(const D in d){const N=d[D],G=this._touches[D];G&&(y._add(N),w._add(N.sub(G)),E++,d[D]=N)}if(this._touches=d,this._shouldBePrevented(E)||!w.mag())return;const A=w.div(E);return this._sum._add(A),this._sum.mag()<this._clickTolerance?void 0:{around:y.div(E),panDelta:A}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class gh{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(e,r,a){this._firstTwoTouches||a.length<2||(this._firstTwoTouches=[a[0].identifier,a[1].identifier],this._start([r[0],r[1]]))}touchmove(e,r,a){if(!this._firstTwoTouches)return;e.preventDefault();const[d,y]=this._firstTwoTouches,w=yh(a,r,d),E=yh(a,r,y);if(!w||!E)return;const A=this._aroundCenter?null:w.add(E).div(2);return this._move([w,E],A,e)}touchend(e,r,a){if(!this._firstTwoTouches)return;const[d,y]=this._firstTwoTouches,w=yh(a,r,d),E=yh(a,r,y);w&&E||(this._active&&le.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(e){this._enabled=!0,this._aroundCenter=!!e&&e.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function yh(g,e,r){for(let a=0;a<g.length;a++)if(g[a].identifier===r)return e[a]}function tu(g,e){return Math.log(g/e)/Math.LN2}class wa extends gh{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(e){this._startDistance=this._distance=e[0].dist(e[1])}_move(e,r){const a=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(tu(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:tu(this._distance,a),pinchAround:r}}}function Ds(g,e){return 180*g.angleWith(e)/Math.PI}class lr extends gh{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}_move(e,r,a){const d=this._vector;if(this._vector=e[0].sub(e[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ds(this._vector,d),pinchAround:r}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());const r=25/(Math.PI*this._minDiameter)*360,a=Ds(e,this._startVector);return Math.abs(a)<r}}function ic(g){return Math.abs(g.y)>Math.abs(g.x)}class oc extends gh{constructor(e){super(),this._currentTouchCount=0,this._map=e}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(e,r,a){super.touchstart(e,r,a),this._currentTouchCount=a.length}_start(e){this._lastPoints=e,ic(e[0].sub(e[1]))&&(this._valid=!1)}_move(e,r,a){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const d=e[0].sub(this._lastPoints[0]),y=e[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(d,y,a.timeStamp),this._valid?(this._lastPoints=e,this._active=!0,{pitchDelta:(d.y+y.y)/2*-.5}):void 0}gestureBeginsVertically(e,r,a){if(this._valid!==void 0)return this._valid;const d=e.mag()>=2,y=r.mag()>=2;if(!d&&!y)return;if(!d||!y)return this._firstMove===void 0&&(this._firstMove=a),a-this._firstMove<100&&void 0;const w=e.y>0==r.y>0;return ic(e)&&ic(r)&&w}}const Sa={panStep:100,bearingStep:15,pitchStep:10};class Ko{constructor(e){this._tr=new ba(e);const r=Sa;this._panStep=r.panStep,this._bearingStep=r.bearingStep,this._pitchStep=r.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let r=0,a=0,d=0,y=0,w=0;switch(e.keyCode){case 61:case 107:case 171:case 187:r=1;break;case 189:case 109:case 173:r=-1;break;case 37:e.shiftKey?a=-1:(e.preventDefault(),y=-1);break;case 39:e.shiftKey?a=1:(e.preventDefault(),y=1);break;case 38:e.shiftKey?d=1:(e.preventDefault(),w=-1);break;case 40:e.shiftKey?d=-1:(e.preventDefault(),w=1);break;default:return}return this._rotationDisabled&&(a=0,d=0),{cameraAnimation:E=>{const A=this._tr;E.easeTo({duration:300,easeId:"keyboardHandler",easing:ml,zoom:r?Math.round(A.zoom)+r*(e.shiftKey?2:1):A.zoom,bearing:A.bearing+a*this._bearingStep,pitch:A.pitch+d*this._pitchStep,offset:[-y*this._panStep,-w*this._panStep],center:A.center},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function ml(g){return g*(2-g)}const Ga=4.000244140625;class hn{constructor(e,r){this._onTimeout=a=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(a)},this._map=e,this._tr=new ba(e),this._triggerRenderFrame=r,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(e){this._defaultZoomRate=e}setWheelZoomRate(e){this._wheelZoomRate=e}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&e.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(e){return!!this._map.cooperativeGestures.isEnabled()&&!(e.ctrlKey||this._map.cooperativeGestures.isBypassed(e))}wheel(e){if(!this.isEnabled())return;if(this._shouldBePrevented(e))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",e);let r=e.deltaMode===WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY;const a=Te.now(),d=a-(this._lastWheelEventTime||0);this._lastWheelEventTime=a,r!==0&&r%Ga==0?this._type="wheel":r!==0&&Math.abs(r)<4?this._type="trackpad":d>400?(this._type=null,this._lastValue=r,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(d*r)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,r+=this._lastValue)),e.shiftKey&&r&&(r/=4),this._type&&(this._lastWheelEvent=e,this._delta-=r,this._active||this._start(e)),e.preventDefault()}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const r=le.mousePos(this._map.getCanvas(),e),a=this._tr;this._aroundPoint=this._aroundCenter?a.transform.locationToScreenPoint(u.Q.convert(a.center)):r,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const e=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const E=e.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=E),typeof this._targetZoom=="number"&&(this._targetZoom+=E)}if(this._delta!==0){const E=this._type==="wheel"&&Math.abs(this._delta)>Ga?this._wheelZoomRate:this._defaultZoomRate;let A=2/(1+Math.exp(-Math.abs(this._delta*E)));this._delta<0&&A!==0&&(A=1/A);const D=typeof this._targetZoom!="number"?e.scale:u.ac(this._targetZoom);this._targetZoom=e.getConstrained(e.getCameraLngLat(),u.ah(D*A)).zoom,this._type==="wheel"&&(this._startZoom=e.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const r=typeof this._targetZoom!="number"?e.zoom:this._targetZoom,a=this._startZoom,d=this._easing;let y,w=!1;if(this._type==="wheel"&&a&&d){const E=Te.now()-this._lastWheelEventTime,A=Math.min((E+5)/200,1),D=d(A);y=u.B.number(a,r,D),A<1?this._frameId||(this._frameId=!0):w=!0}else y=r,w=!0;return this._active=!0,w&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=y,{noInertia:!0,needsRenderFrame:!w,zoomDelta:y-e.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(e){let r=u.cf;if(this._prevEase){const a=this._prevEase,d=(Te.now()-a.start)/a.duration,y=a.easing(d+.01)-a.easing(d),w=.27/Math.sqrt(y*y+1e-4)*.01,E=Math.sqrt(.0729-w*w);r=u.cd(w,E,.25,1)}return this._prevEase={start:Te.now(),duration:e,easing:r},r}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Fl{constructor(e,r){this._clickZoom=e,this._tapZoom=r}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class df{constructor(e){this._tr=new ba(e),this.reset()}reset(){this._active=!1}dblclick(e,r){return e.preventDefault(),{cameraAnimation:a=>{a.easeTo({duration:300,zoom:this._tr.zoom+(e.shiftKey?-1:1),around:this._tr.unproject(r)},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class sc{constructor(){this._tap=new pl({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(e,r,a){if(!this._swipePoint)if(this._tapTime){const d=r[0],y=e.timeStamp-this._tapTime<500,w=this._tapPoint.dist(d)<30;y&&w?a.length>0&&(this._swipePoint=d,this._swipeTouch=a[0].identifier):this.reset()}else this._tap.touchstart(e,r,a)}touchmove(e,r,a){if(this._tapTime){if(this._swipePoint){if(a[0].identifier!==this._swipeTouch)return;const d=r[0],y=d.y-this._swipePoint.y;return this._swipePoint=d,e.preventDefault(),this._active=!0,{zoomDelta:y/128}}}else this._tap.touchmove(e,r,a)}touchend(e,r,a){if(this._tapTime)this._swipePoint&&a.length===0&&this.reset();else{const d=this._tap.touchend(e,r,a);d&&(this._tapTime=e.timeStamp,this._tapPoint=d)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ku{constructor(e,r,a){this._el=e,this._mousePan=r,this._touchPan=a}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Xo{constructor(e,r,a,d){this._pitchWithRotate=e.pitchWithRotate,this._rollEnabled=e.rollEnabled,this._mouseRotate=r,this._mousePitch=a,this._mouseRoll=d}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Os{constructor(e,r,a,d){this._el=e,this._touchZoom=r,this._touchRotate=a,this._tapDragZoom=d,this._rotationDisabled=!1,this._enabled=!0}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class vi{constructor(e,r){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=e,this._options=r,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const e=this._map.getCanvasContainer();e.classList.add("maplibregl-cooperative-gestures"),this._container=le.create("div","maplibregl-cooperative-gesture-screen",e);let r=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(r=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const a=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),d=document.createElement("div");d.className="maplibregl-desktop-message",d.textContent=r,this._container.appendChild(d);const y=document.createElement("div");y.className="maplibregl-mobile-message",y.textContent=a,this._container.appendChild(y),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(le.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(e){return e[this._bypassKey]}notifyGestureBlocked(e,r){this._enabled&&(this._map.fire(new u.l("cooperativegestureprevented",{gestureType:e,originalEvent:r})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Fs=g=>g.zoom||g.drag||g.roll||g.pitch||g.rotate;class Bl extends u.l{}function ac(g){return g.panDelta&&g.panDelta.mag()||g.zoomDelta||g.bearingDelta||g.pitchDelta||g.rollDelta}class ru{constructor(e,r){this.handleWindowEvent=d=>{this.handleEvent(d,`${d.type}Window`)},this.handleEvent=(d,y)=>{if(d.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const w=d.type==="renderFrame"?void 0:d,E={needsRenderFrame:!1},A={},D={};for(const{handlerName:Z,handler:X,allowed:ne}of this._handlers){if(!X.isEnabled())continue;let be;if(this._blockedByActive(D,ne,Z))X.reset();else if(X[y||d.type]){if(u.cg(d,y||d.type)){const _e=le.mousePos(this._map.getCanvas(),d);be=X[y||d.type](d,_e)}else if(u.ch(d,y||d.type)){const _e=this._getMapTouches(d.touches),Se=le.touchPos(this._map.getCanvas(),_e);be=X[y||d.type](d,Se,_e)}else u.ci(y||d.type)||(be=X[y||d.type](d));this.mergeHandlerResult(E,A,be,Z,w),be&&be.needsRenderFrame&&this._triggerRenderFrame()}(be||X.isActive())&&(D[Z]=X)}const N={};for(const Z in this._previousActiveHandlers)D[Z]||(N[Z]=w);this._previousActiveHandlers=D,(Object.keys(N).length||ac(E))&&(this._changes.push([E,A,N]),this._triggerRenderFrame()),(Object.keys(D).length||ac(E))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:G}=E;G&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],G(this._map))},this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ho(e),this._bearingSnap=r.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(r);const a=this._el;this._listeners=[[a,"touchstart",{passive:!0}],[a,"touchmove",{passive:!1}],[a,"touchend",void 0],[a,"touchcancel",void 0],[a,"mousedown",void 0],[a,"mousemove",void 0],[a,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[a,"mouseover",void 0],[a,"mouseout",void 0],[a,"dblclick",void 0],[a,"click",void 0],[a,"keydown",{capture:!1}],[a,"keyup",void 0],[a,"wheel",{passive:!1}],[a,"contextmenu",void 0],[window,"blur",void 0]];for(const[d,y,w]of this._listeners)le.addEventListener(d,y,d===document?this.handleWindowEvent:this.handleEvent,w)}destroy(){for(const[e,r,a]of this._listeners)le.removeEventListener(e,r,e===document?this.handleWindowEvent:this.handleEvent,a)}_addDefaultHandlers(e){const r=this._map,a=r.getCanvasContainer();this._add("mapEvent",new Ii(r,e));const d=r.boxZoom=new No(r,e);this._add("boxZoom",d),e.interactive&&e.boxZoom&&d.enable();const y=r.cooperativeGestures=new vi(r,e.cooperativeGestures);this._add("cooperativeGestures",y),e.cooperativeGestures&&y.enable();const w=new Ls(r),E=new df(r);r.doubleClickZoom=new Fl(E,w),this._add("tapZoom",w),this._add("clickZoom",E),e.interactive&&e.doubleClickZoom&&r.doubleClickZoom.enable();const A=new sc;this._add("tapDragZoom",A);const D=r.touchPitch=new oc(r);this._add("touchPitch",D),e.interactive&&e.touchPitch&&r.touchPitch.enable(e.touchPitch);const N=()=>r.project(r.getCenter()),G=function({enable:Me,clickTolerance:De,aroundCenter:Ne=!0,minPixelCenterThreshold:je=100,rotateDegreesPerPixelMoved:at=.8},It){const Ye=new rc({checkCorrectEvent:ht=>le.mouseButton(ht)===0&&ht.ctrlKey||le.mouseButton(ht)===2&&!ht.ctrlKey});return new ko({clickTolerance:De,move:(ht,Ct)=>{const Jt=It();if(Ne&&Math.abs(Jt.y-ht.y)>je)return{bearingDelta:u.ce(new u.P(ht.x,Ct.y),Ct,Jt)};let er=(Ct.x-ht.x)*at;return Ne&&Ct.y<Jt.y&&(er=-er),{bearingDelta:er}},moveStateManager:Ye,enable:Me,assignEvents:Za})}(e,N),Z=function({enable:Me,clickTolerance:De,pitchDegreesPerPixelMoved:Ne=-.5}){const je=new rc({checkCorrectEvent:at=>le.mouseButton(at)===0&&at.ctrlKey||le.mouseButton(at)===2});return new ko({clickTolerance:De,move:(at,It)=>({pitchDelta:(It.y-at.y)*Ne}),moveStateManager:je,enable:Me,assignEvents:Za})}(e),X=function({enable:Me,clickTolerance:De,rollDegreesPerPixelMoved:Ne=.3},je){const at=new rc({checkCorrectEvent:It=>le.mouseButton(It)===2&&It.ctrlKey});return new ko({clickTolerance:De,move:(It,Ye)=>{const ht=je();let Ct=(Ye.x-It.x)*Ne;return Ye.y<ht.y&&(Ct=-Ct),{rollDelta:Ct}},moveStateManager:at,enable:Me,assignEvents:Za})}(e,N);r.dragRotate=new Xo(e,G,Z,X),this._add("mouseRotate",G,["mousePitch"]),this._add("mousePitch",Z,["mouseRotate","mouseRoll"]),this._add("mouseRoll",X,["mousePitch"]),e.interactive&&e.dragRotate&&r.dragRotate.enable();const ne=function({enable:Me,clickTolerance:De}){const Ne=new rc({checkCorrectEvent:je=>le.mouseButton(je)===0&&!je.ctrlKey});return new ko({clickTolerance:De,move:(je,at)=>({around:at,panDelta:at.sub(je)}),activateOnStart:!0,moveStateManager:Ne,enable:Me,assignEvents:Za})}(e),be=new qh(e,r);r.dragPan=new ku(a,ne,be),this._add("mousePan",ne),this._add("touchPan",be,["touchZoom","touchRotate"]),e.interactive&&e.dragPan&&r.dragPan.enable(e.dragPan);const _e=new lr,Se=new wa;r.touchZoomRotate=new Os(a,Se,_e,A),this._add("touchRotate",_e,["touchPan","touchZoom"]),this._add("touchZoom",Se,["touchPan","touchRotate"]),e.interactive&&e.touchZoomRotate&&r.touchZoomRotate.enable(e.touchZoomRotate);const ke=r.scrollZoom=new hn(r,()=>this._triggerRenderFrame());this._add("scrollZoom",ke,["mousePan"]),e.interactive&&e.scrollZoom&&r.scrollZoom.enable(e.scrollZoom);const Le=r.keyboard=new Ko(r);this._add("keyboard",Le),e.interactive&&e.keyboard&&r.keyboard.enable(),this._add("blockableMapEvent",new Ci(r))}_add(e,r,a){this._handlers.push({handlerName:e,handler:r,allowed:a}),this._handlersById[e]=r}stop(e){if(!this._updatingCamera){for(const{handler:r}of this._handlers)r.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}isActive(){for(const{handler:e}of this._handlers)if(e.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Fs(this._eventsInProgress)||this.isZooming()}_blockedByActive(e,r,a){for(const d in e)if(d!==a&&(!r||r.indexOf(d)<0))return!0;return!1}_getMapTouches(e){const r=[];for(const a of e)this._el.contains(a.target)&&r.push(a);return r}mergeHandlerResult(e,r,a,d,y){if(!a)return;u.e(e,a);const w={handlerName:d,originalEvent:a.originalEvent||y};a.zoomDelta!==void 0&&(r.zoom=w),a.panDelta!==void 0&&(r.drag=w),a.rollDelta!==void 0&&(r.roll=w),a.pitchDelta!==void 0&&(r.pitch=w),a.bearingDelta!==void 0&&(r.rotate=w)}_applyChanges(){const e={},r={},a={};for(const[d,y,w]of this._changes)d.panDelta&&(e.panDelta=(e.panDelta||new u.P(0,0))._add(d.panDelta)),d.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+d.zoomDelta),d.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+d.bearingDelta),d.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+d.pitchDelta),d.rollDelta&&(e.rollDelta=(e.rollDelta||0)+d.rollDelta),d.around!==void 0&&(e.around=d.around),d.pinchAround!==void 0&&(e.pinchAround=d.pinchAround),d.noInertia&&(e.noInertia=d.noInertia),u.e(r,y),u.e(a,w);this._updateMapTransform(e,r,a),this._changes=[]}_updateMapTransform(e,r,a){const d=this._map,y=d._getTransformForUpdate(),w=d.terrain;if(!(ac(e)||w&&this._terrainMovement))return this._fireEvents(r,a,!0);d._stop(!0);let{panDelta:E,zoomDelta:A,bearingDelta:D,pitchDelta:N,rollDelta:G,around:Z,pinchAround:X}=e;X!==void 0&&(Z=X),Z=Z||d.transform.centerPoint,w&&!y.isPointOnMapSurface(Z)&&(Z=y.centerPoint);const ne={panDelta:E,zoomDelta:A,rollDelta:G,pitchDelta:N,bearingDelta:D,around:Z};this._map.cameraHelper.useGlobeControls&&!y.isPointOnMapSurface(Z)&&(Z=y.centerPoint);const be=Z.distSqr(y.centerPoint)<.01?y.center:y.screenPointToLocation(E?Z.sub(E):Z);w?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(ne,y),this._terrainMovement||!r.drag&&!r.zoom?r.drag&&this._terrainMovement?y.setCenter(y.screenPointToLocation(y.centerPoint.sub(E))):this._map.cameraHelper.handleMapControlsPan(ne,y,be):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(ne,y,be))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(ne,y),this._map.cameraHelper.handleMapControlsPan(ne,y,be)),d._applyUpdatedTransform(y),this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(r,a,!0)}_fireEvents(e,r,a){const d=Fs(this._eventsInProgress),y=Fs(e),w={};for(const G in e){const{originalEvent:Z}=e[G];this._eventsInProgress[G]||(w[`${G}start`]=Z),this._eventsInProgress[G]=e[G]}!d&&y&&this._fireEvent("movestart",y.originalEvent);for(const G in w)this._fireEvent(G,w[G]);y&&this._fireEvent("move",y.originalEvent);for(const G in e){const{originalEvent:Z}=e[G];this._fireEvent(G,Z)}const E={};let A;for(const G in this._eventsInProgress){const{handlerName:Z,originalEvent:X}=this._eventsInProgress[G];this._handlersById[Z].isActive()||(delete this._eventsInProgress[G],A=r[Z]||X,E[`${G}end`]=A)}for(const G in E)this._fireEvent(G,E[G]);const D=Fs(this._eventsInProgress),N=(d||y)&&!D;if(N&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const G=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&G.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(G)}if(a&&N){this._updatingCamera=!0;const G=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Z=X=>X!==0&&-this._bearingSnap<X&&X<this._bearingSnap;!G||!G.essential&&Te.prefersReducedMotion?(this._map.fire(new u.l("moveend",{originalEvent:A})),Z(this._map.getBearing())&&this._map.resetNorth()):(Z(G.bearing||this._map.getBearing())&&(G.bearing=0),G.freezeElevation=!0,this._map.easeTo(G,{originalEvent:A})),this._updatingCamera=!1}}_fireEvent(e,r){this._map.fire(new u.l(e,r?{originalEvent:r}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(e=>{delete this._frameId,this.handleEvent(new Bl("renderFrame",{timeStamp:e})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class ia extends u.E{constructor(e,r,a){super(),this._renderFrameCallback=()=>{const d=Math.min((Te.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(d)),d<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=a.bearingSnap,this.cameraHelper=r,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(e,r){e.apply(this.transform),this.transform=e,this.cameraHelper=r}getCenter(){return new u.Q(this.transform.center.lng,this.transform.center.lat)}setCenter(e,r){return this.jumpTo({center:e},r)}getCenterElevation(){return this.transform.elevation}setCenterElevation(e,r){return this.jumpTo({elevation:e},r),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(e){this._centerClampedToGround=e}panBy(e,r,a){return e=u.P.convert(e).mult(-1),this.panTo(this.transform.center,u.e({offset:e},r),a)}panTo(e,r,a){return this.easeTo(u.e({center:e},r),a)}getZoom(){return this.transform.zoom}setZoom(e,r){return this.jumpTo({zoom:e},r),this}zoomTo(e,r,a){return this.easeTo(u.e({zoom:e},r),a)}zoomIn(e,r){return this.zoomTo(this.getZoom()+1,e,r),this}zoomOut(e,r){return this.zoomTo(this.getZoom()-1,e,r),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(e,r){return e!=this.transform.fov&&(this.transform.setFov(e),this.fire(new u.l("movestart",r)).fire(new u.l("move",r)).fire(new u.l("moveend",r))),this}getBearing(){return this.transform.bearing}setBearing(e,r){return this.jumpTo({bearing:e},r),this}getPadding(){return this.transform.padding}setPadding(e,r){return this.jumpTo({padding:e},r),this}rotateTo(e,r,a){return this.easeTo(u.e({bearing:e},r),a)}resetNorth(e,r){return this.rotateTo(0,u.e({duration:1e3},e),r),this}resetNorthPitch(e,r){return this.easeTo(u.e({bearing:0,pitch:0,roll:0,duration:1e3},e),r),this}snapToNorth(e,r){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,r):this}getPitch(){return this.transform.pitch}setPitch(e,r){return this.jumpTo({pitch:e},r),this}getRoll(){return this.transform.roll}setRoll(e,r){return this.jumpTo({roll:e},r),this}cameraForBounds(e,r){e=br.convert(e).adjustAntiMeridian();const a=r&&r.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),a,r)}_cameraForBoxAndBearing(e,r,a,d){const y={top:0,bottom:0,right:0,left:0};if(typeof(d=u.e({padding:y,offset:[0,0],maxZoom:this.transform.maxZoom},d)).padding=="number"){const D=d.padding;d.padding={top:D,bottom:D,right:D,left:D}}const w=u.e(y,d.padding);d.padding=w;const E=this.transform,A=new br(e,r);return this.cameraHelper.cameraForBoxAndBearing(d,w,A,a,E)}fitBounds(e,r,a){return this._fitInternal(this.cameraForBounds(e,r),r,a)}fitScreenCoordinates(e,r,a,d,y){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(u.P.convert(e)),this.transform.screenPointToLocation(u.P.convert(r)),a,d),d,y)}_fitInternal(e,r,a){return e?(delete(r=u.e(e,r)).padding,r.linear?this.easeTo(r,a):this.flyTo(r,a)):this}jumpTo(e,r){this.stop();const a=this._getTransformForUpdate();let d=!1,y=!1,w=!1;const E=a.zoom;this.cameraHelper.handleJumpToCenterZoom(a,e);const A=a.zoom!==E;return"elevation"in e&&a.elevation!==+e.elevation&&a.setElevation(+e.elevation),"bearing"in e&&a.bearing!==+e.bearing&&(d=!0,a.setBearing(+e.bearing)),"pitch"in e&&a.pitch!==+e.pitch&&(y=!0,a.setPitch(+e.pitch)),"roll"in e&&a.roll!==+e.roll&&(w=!0,a.setRoll(+e.roll)),e.padding==null||a.isPaddingEqual(e.padding)||a.setPadding(e.padding),this._applyUpdatedTransform(a),this.fire(new u.l("movestart",r)).fire(new u.l("move",r)),A&&this.fire(new u.l("zoomstart",r)).fire(new u.l("zoom",r)).fire(new u.l("zoomend",r)),d&&this.fire(new u.l("rotatestart",r)).fire(new u.l("rotate",r)).fire(new u.l("rotateend",r)),y&&this.fire(new u.l("pitchstart",r)).fire(new u.l("pitch",r)).fire(new u.l("pitchend",r)),w&&this.fire(new u.l("rollstart",r)).fire(new u.l("roll",r)).fire(new u.l("rollend",r)),this.fire(new u.l("moveend",r))}calculateCameraOptionsFromTo(e,r,a,d=0){const y=u.$.fromLngLat(e,r),w=u.$.fromLngLat(a,d),E=w.x-y.x,A=w.y-y.y,D=w.z-y.z,N=Math.hypot(E,A,D);if(N===0)throw new Error("Can't calculate camera options with same From and To");const G=Math.hypot(E,A),Z=u.ah(this.transform.cameraToCenterDistance/N/this.transform.tileSize),X=180*Math.atan2(E,-A)/Math.PI;let ne=180*Math.acos(G/N)/Math.PI;return ne=D<0?90-ne:90+ne,{center:w.toLngLat(),elevation:d,zoom:Z,pitch:ne,bearing:X}}calculateCameraOptionsFromCameraLngLatAltRotation(e,r,a,d,y){const w=this.transform.calculateCenterFromCameraLngLatAlt(e,r,a,d);return{center:w.center,elevation:w.elevation,zoom:w.zoom,bearing:a,pitch:d,roll:y}}easeTo(e,r){this._stop(!1,e.easeId),((e=u.e({offset:[0,0],duration:500,easing:u.cf},e)).animate===!1||!e.essential&&Te.prefersReducedMotion)&&(e.duration=0);const a=this._getTransformForUpdate(),d=this.getBearing(),y=a.pitch,w=a.roll,E="bearing"in e?this._normalizeBearing(e.bearing,d):d,A="pitch"in e?+e.pitch:y,D="roll"in e?this._normalizeBearing(e.roll,w):w,N="padding"in e?e.padding:a.padding,G=u.P.convert(e.offset);let Z,X;e.around&&(Z=u.Q.convert(e.around),X=a.locationToScreenPoint(Z));const ne={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},be=this.cameraHelper.handleEaseTo(a,{bearing:E,pitch:A,roll:D,padding:N,around:Z,aroundPoint:X,offsetAsPoint:G,offset:e.offset,zoom:e.zoom,center:e.center});return this._rotating=this._rotating||d!==E,this._pitching=this._pitching||A!==y,this._rolling=this._rolling||D!==w,this._padding=!a.isPaddingEqual(N),this._zooming=this._zooming||be.isZooming,this._easeId=e.easeId,this._prepareEase(r,e.noMoveStart,ne),this.terrain&&this._prepareElevation(be.elevationCenter),this._ease(_e=>{be.easeFunc(_e),this.terrain&&!e.freezeElevation&&this._updateElevation(_e),this._applyUpdatedTransform(a),this._fireMoveEvents(r)},_e=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(r,_e)},e),this}_prepareEase(e,r,a={}){this._moving=!0,r||a.moving||this.fire(new u.l("movestart",e)),this._zooming&&!a.zooming&&this.fire(new u.l("zoomstart",e)),this._rotating&&!a.rotating&&this.fire(new u.l("rotatestart",e)),this._pitching&&!a.pitching&&this.fire(new u.l("pitchstart",e)),this._rolling&&!a.rolling&&this.fire(new u.l("rollstart",e))}_prepareElevation(e){this._elevationCenter=e,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(e,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(e){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const r=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(e<1&&r!==this._elevationTarget){const a=this._elevationTarget-this._elevationStart;this._elevationStart+=e*(a-(r-(a*e+this._elevationStart))/(1-e)),this._elevationTarget=r}this.transform.setElevation(u.B.number(this._elevationStart,this._elevationTarget,e))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(e){if(!this.terrain&&e.elevation>=0&&e.pitch<=90)return{};const r=e.getCameraLngLat(),a=e.getCameraAltitude(),d=this.terrain?this.terrain.getElevationForLngLatZoom(r,e.zoom):0;if(a<d){const y=this.calculateCameraOptionsFromTo(r,d,e.center,e.elevation);return{pitch:y.pitch,zoom:y.zoom}}return{}}_applyUpdatedTransform(e){const r=[];if(r.push(d=>this._elevateCameraIfInsideTerrain(d)),this.transformCameraUpdate&&r.push(d=>this.transformCameraUpdate(d)),!r.length)return;const a=e.clone();for(const d of r){const y=a.clone(),{center:w,zoom:E,roll:A,pitch:D,bearing:N,elevation:G}=d(y);w&&y.setCenter(w),G!==void 0&&y.setElevation(G),E!==void 0&&y.setZoom(E),A!==void 0&&y.setRoll(A),D!==void 0&&y.setPitch(D),N!==void 0&&y.setBearing(N),a.apply(y)}this.transform.apply(a)}_fireMoveEvents(e){this.fire(new u.l("move",e)),this._zooming&&this.fire(new u.l("zoom",e)),this._rotating&&this.fire(new u.l("rotate",e)),this._pitching&&this.fire(new u.l("pitch",e)),this._rolling&&this.fire(new u.l("roll",e))}_afterEase(e,r){if(this._easeId&&r&&this._easeId===r)return;delete this._easeId;const a=this._zooming,d=this._rotating,y=this._pitching,w=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,a&&this.fire(new u.l("zoomend",e)),d&&this.fire(new u.l("rotateend",e)),y&&this.fire(new u.l("pitchend",e)),w&&this.fire(new u.l("rollend",e)),this.fire(new u.l("moveend",e))}flyTo(e,r){if(!e.essential&&Te.prefersReducedMotion){const Ct=u.O(e,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(Ct,r)}this.stop(),e=u.e({offset:[0,0],speed:1.2,curve:1.42,easing:u.cf},e);const a=this._getTransformForUpdate(),d=a.bearing,y=a.pitch,w=a.roll,E=a.padding,A="bearing"in e?this._normalizeBearing(e.bearing,d):d,D="pitch"in e?+e.pitch:y,N="roll"in e?this._normalizeBearing(e.roll,w):w,G="padding"in e?e.padding:a.padding,Z=u.P.convert(e.offset);let X=a.centerPoint.add(Z);const ne=a.screenPointToLocation(X),be=this.cameraHelper.handleFlyTo(a,{bearing:A,pitch:D,roll:N,padding:G,locationAtOffset:ne,offsetAsPoint:Z,center:e.center,minZoom:e.minZoom,zoom:e.zoom});let _e=e.curve;const Se=Math.max(a.width,a.height),ke=Se/be.scaleOfZoom,Le=be.pixelPathLength;typeof be.scaleOfMinZoom=="number"&&(_e=Math.sqrt(Se/be.scaleOfMinZoom/Le*2));const Me=_e*_e;function De(Ct){const Jt=(ke*ke-Se*Se+(Ct?-1:1)*Me*Me*Le*Le)/(2*(Ct?ke:Se)*Me*Le);return Math.log(Math.sqrt(Jt*Jt+1)-Jt)}function Ne(Ct){return(Math.exp(Ct)-Math.exp(-Ct))/2}function je(Ct){return(Math.exp(Ct)+Math.exp(-Ct))/2}const at=De(!1);let It=function(Ct){return je(at)/je(at+_e*Ct)},Ye=function(Ct){return Se*((je(at)*(Ne(Jt=at+_e*Ct)/je(Jt))-Ne(at))/Me)/Le;var Jt},ht=(De(!0)-at)/_e;if(Math.abs(Le)<2e-6||!isFinite(ht)){if(Math.abs(Se-ke)<1e-6)return this.easeTo(e,r);const Ct=ke<Se?-1:1;ht=Math.abs(Math.log(ke/Se))/_e,Ye=()=>0,It=Jt=>Math.exp(Ct*_e*Jt)}return e.duration="duration"in e?+e.duration:1e3*ht/("screenSpeed"in e?+e.screenSpeed/_e:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=d!==A,this._pitching=D!==y,this._rolling=N!==w,this._padding=!a.isPaddingEqual(G),this._prepareEase(r,!1),this.terrain&&this._prepareElevation(be.targetCenter),this._ease(Ct=>{const Jt=Ct*ht,er=1/It(Jt),Ft=Ye(Jt);this._rotating&&a.setBearing(u.B.number(d,A,Ct)),this._pitching&&a.setPitch(u.B.number(y,D,Ct)),this._rolling&&a.setRoll(u.B.number(w,N,Ct)),this._padding&&(a.interpolatePadding(E,G,Ct),X=a.centerPoint.add(Z)),be.easeFunc(Ct,er,Ft,X),this.terrain&&!e.freezeElevation&&this._updateElevation(Ct),this._applyUpdatedTransform(a),this._fireMoveEvents(r)},()=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(r)},e),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(e,r){var a;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const d=this._onEaseEnd;delete this._onEaseEnd,d.call(this,r)}return e||(a=this.handlers)===null||a===void 0||a.stop(!1),this}_ease(e,r,a){a.animate===!1||a.duration===0?(e(1),r()):(this._easeStart=Te.now(),this._easeOptions=a,this._onEaseFrame=e,this._onEaseEnd=r,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(e,r){e=u.aL(e,-180,180);const a=Math.abs(e-r);return Math.abs(e-360-r)<a&&(e-=360),Math.abs(e+360-r)<a&&(e+=360),e}queryTerrainElevation(e){return this.terrain?this.terrain.getElevationForLngLatZoom(u.Q.convert(e),this.transform.tileZoom):null}}const Nl={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class oi{constructor(e=Nl){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=r=>{!r||r.sourceDataType!=="metadata"&&r.sourceDataType!=="visibility"&&r.dataType!=="style"&&r.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=e}getDefaultPosition(){return"bottom-right"}onAdd(e){return this._map=e,this._compact=this.options.compact,this._container=le.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=le.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=le.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){le.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(e,r){const a=this._map._getUIString(`AttributionControl.${r}`);e.title=a,e.setAttribute("aria-label",a)}_updateAttributions(){if(!this._map.style)return;let e=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=e.concat(this.options.customAttribution.map(d=>typeof d!="string"?"":d)):typeof this.options.customAttribution=="string"&&e.push(this.options.customAttribution)),this._map.style.stylesheet){const d=this._map.style.stylesheet;this.styleOwner=d.owner,this.styleId=d.id}const r=this._map.style.sourceCaches;for(const d in r){const y=r[d];if(y.used||y.usedForTerrain){const w=y.getSource();w.attribution&&e.indexOf(w.attribution)<0&&e.push(w.attribution)}}e=e.filter(d=>String(d).trim()),e.sort((d,y)=>d.length-y.length),e=e.filter((d,y)=>{for(let w=y+1;w<e.length;w++)if(e[w].indexOf(d)>=0)return!1;return!0});const a=e.join(" | ");a!==this._attribHTML&&(this._attribHTML=a,e.length?(this._innerContainer.innerHTML=le.sanitize(a),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class lc{constructor(e={}){this._updateCompact=()=>{const r=this._container.children;if(r.length){const a=r[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&a.classList.add("maplibregl-compact"):a.classList.remove("maplibregl-compact")}},this.options=e}getDefaultPosition(){return"bottom-left"}onAdd(e){this._map=e,this._compact=this.options&&this.options.compact,this._container=le.create("div","maplibregl-ctrl");const r=le.create("a","maplibregl-ctrl-logo");return r.target="_blank",r.rel="noopener nofollow",r.href="https://maplibre.org/",r.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),r.setAttribute("rel","noopener nofollow"),this._container.appendChild(r),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){le.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Wa{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(e){const r=++this._id;return this._queue.push({callback:e,id:r,cancelled:!1}),r}remove(e){const r=this._currentlyRunning,a=r?this._queue.concat(r):this._queue;for(const d of a)if(d.id===e)return void(d.cancelled=!0)}run(e=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const r=this._currentlyRunning=this._queue;this._queue=[];for(const a of r)if(!a.cancelled&&(a.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var gl=u.aG([{name:"a_pos3d",type:"Int16",components:3}]);class Rd extends u.E{constructor(e){super(),this._lastTilesetChange=Te.now(),this.sourceCache=e,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=e._source.tileSize*2**this.deltaZoom,e.usedForTerrain=!0,e.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(e,r){this.sourceCache.update(e,r),this._renderableTilesKeys=[];const a={};for(const d of We(e,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:r,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))a[d.key]=!0,this._renderableTilesKeys.push(d.key),this._tiles[d.key]||(d.terrainRttPosMatrix32f=new Float64Array(16),u.bQ(d.terrainRttPosMatrix32f,0,u.Z,u.Z,0,0,1),this._tiles[d.key]=new Ji(d,this.tileSize),this._lastTilesetChange=Te.now());for(const d in this._tiles)a[d]||delete this._tiles[d]}freeRtt(e){for(const r in this._tiles){const a=this._tiles[r];(!e||a.tileID.equals(e)||a.tileID.isChildOf(e)||e.isChildOf(a.tileID))&&(a.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(e=>this.getTileByID(e))}getTileByID(e){return this._tiles[e]}getTerrainCoords(e,r){return r?this._getTerrainCoordsForTileRanges(e,r):this._getTerrainCoordsForRegularTile(e)}_getTerrainCoordsForRegularTile(e){const r={};for(const a of this._renderableTilesKeys){const d=this._tiles[a].tileID,y=e.clone(),w=u.b2();if(d.canonical.equals(e.canonical))u.bQ(w,0,u.Z,u.Z,0,0,1);else if(d.canonical.isChildOf(e.canonical)){const E=d.canonical.z-e.canonical.z,A=d.canonical.x-(d.canonical.x>>E<<E),D=d.canonical.y-(d.canonical.y>>E<<E),N=u.Z>>E;u.bQ(w,0,N,N,0,0,1),u.L(w,w,[-A*N,-D*N,0])}else{if(!e.canonical.isChildOf(d.canonical))continue;{const E=e.canonical.z-d.canonical.z,A=e.canonical.x-(e.canonical.x>>E<<E),D=e.canonical.y-(e.canonical.y>>E<<E),N=u.Z>>E;u.bQ(w,0,u.Z,u.Z,0,0,1),u.L(w,w,[A*N,D*N,0]),u.M(w,w,[1/2**E,1/2**E,0])}}y.terrainRttPosMatrix32f=new Float32Array(w),r[a]=y}return r}_getTerrainCoordsForTileRanges(e,r){const a={};for(const d of this._renderableTilesKeys){const y=this._tiles[d].tileID;if(!this._isWithinTileRanges(y,r))continue;const w=e.clone(),E=u.b2();if(y.canonical.z===e.canonical.z){const A=e.canonical.x-y.canonical.x,D=e.canonical.y-y.canonical.y;u.bQ(E,0,u.Z,u.Z,0,0,1),u.L(E,E,[A*u.Z,D*u.Z,0])}else if(y.canonical.z>e.canonical.z){const A=y.canonical.z-e.canonical.z,D=y.canonical.x-(y.canonical.x>>A<<A),N=y.canonical.y-(y.canonical.y>>A<<A),G=e.canonical.x-(y.canonical.x>>A),Z=e.canonical.y-(y.canonical.y>>A),X=u.Z>>A;u.bQ(E,0,X,X,0,0,1),u.L(E,E,[-D*X+G*u.Z,-N*X+Z*u.Z,0])}else{const A=e.canonical.z-y.canonical.z,D=e.canonical.x-(e.canonical.x>>A<<A),N=e.canonical.y-(e.canonical.y>>A<<A),G=(e.canonical.x>>A)-y.canonical.x,Z=(e.canonical.y>>A)-y.canonical.y,X=u.Z<<A;u.bQ(E,0,X,X,0,0,1),u.L(E,E,[D*u.Z+G*X,N*u.Z+Z*X,0])}w.terrainRttPosMatrix32f=new Float32Array(E),a[d]=w}return a}getSourceTile(e,r){const a=this.sourceCache._source;let d=e.overscaledZ-this.deltaZoom;if(d>a.maxzoom&&(d=a.maxzoom),d<a.minzoom)return null;this._sourceTileCache[e.key]||(this._sourceTileCache[e.key]=e.scaledTo(d).key);let y=this.sourceCache.getTileByID(this._sourceTileCache[e.key]);if((!y||!y.dem)&&r)for(;d>=a.minzoom&&(!y||!y.dem);)y=this.sourceCache.getTileByID(e.scaledTo(d--).key);return y}anyTilesAfterTime(e=Date.now()){return this._lastTilesetChange>=e}_isWithinTileRanges(e,r){return r[e.canonical.z]&&e.canonical.x>=r[e.canonical.z].minTileX&&e.canonical.x<=r[e.canonical.z].maxTileX&&e.canonical.y>=r[e.canonical.z].minTileY&&e.canonical.y<=r[e.canonical.z].maxTileY}}class Zc{constructor(e,r,a){this._meshCache={},this.painter=e,this.sourceCache=new Rd(r),this.options=a,this.exaggeration=typeof a.exaggeration=="number"?a.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(e,r,a,d=u.Z){var y;if(!(r>=0&&r<d&&a>=0&&a<d))return 0;const w=this.getTerrainData(e),E=(y=w.tile)===null||y===void 0?void 0:y.dem;if(!E)return 0;const A=u.cj([],[r/d*u.Z,a/d*u.Z],w.u_terrain_matrix),D=[A[0]*E.dim,A[1]*E.dim],N=Math.floor(D[0]),G=Math.floor(D[1]),Z=D[0]-N,X=D[1]-G;return E.get(N,G)*(1-Z)*(1-X)+E.get(N+1,G)*Z*(1-X)+E.get(N,G+1)*(1-Z)*X+E.get(N+1,G+1)*Z*X}getElevationForLngLatZoom(e,r){if(!u.ck(r,e.wrap()))return 0;const{tileID:a,mercatorX:d,mercatorY:y}=this._getOverscaledTileIDFromLngLatZoom(e,r);return this.getElevation(a,d%u.Z,y%u.Z,u.Z)}getElevation(e,r,a,d=u.Z){return this.getDEMElevation(e,r,a,d)*this.exaggeration}getTerrainData(e){if(!this._emptyDemTexture){const d=this.painter.context,y=new u.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new ze(d,y,d.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new ze(d,new u.R({width:1,height:1}),d.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(d.gl.NEAREST,d.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=u.ad([])}const r=this.sourceCache.getSourceTile(e,!0);if(r&&r.dem&&(!r.demTexture||r.needsTerrainPrepare)){const d=this.painter.context;r.demTexture=this.painter.getTileTexture(r.dem.stride),r.demTexture?r.demTexture.update(r.dem.getPixels(),{premultiply:!1}):r.demTexture=new ze(d,r.dem.getPixels(),d.gl.RGBA,{premultiply:!1}),r.demTexture.bind(d.gl.NEAREST,d.gl.CLAMP_TO_EDGE),r.needsTerrainPrepare=!1}const a=r&&r+r.tileID.key+e.key;if(a&&!this._demMatrixCache[a]){const d=this.sourceCache.sourceCache._source.maxzoom;let y=e.canonical.z-r.tileID.canonical.z;e.overscaledZ>e.canonical.z&&(e.canonical.z>=d?y=e.canonical.z-d:u.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const w=e.canonical.x-(e.canonical.x>>y<<y),E=e.canonical.y-(e.canonical.y>>y<<y),A=u.cl(new Float64Array(16),[1/(u.Z<<y),1/(u.Z<<y),0]);u.L(A,A,[w*u.Z,E*u.Z,0]),this._demMatrixCache[e.key]={matrix:A,coord:e}}return{u_depth:2,u_terrain:3,u_terrain_dim:r&&r.dem&&r.dem.dim||1,u_terrain_matrix:a?this._demMatrixCache[e.key].matrix:this._emptyDemMatrix,u_terrain_unpack:r&&r.dem&&r.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(r&&r.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:r}}getFramebuffer(e){const r=this.painter,a=r.width/devicePixelRatio,d=r.height/devicePixelRatio;return!this._fbo||this._fbo.width===a&&this._fbo.height===d||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new ze(r.context,{width:a,height:d,data:null},r.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(r.context.gl.NEAREST,r.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new ze(r.context,{width:a,height:d,data:null},r.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(r.context.gl.NEAREST,r.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=r.context.createFramebuffer(a,d,!0,!1),this._fbo.depthAttachment.set(r.context.createRenderbuffer(r.context.gl.DEPTH_COMPONENT16,a,d))),this._fbo.colorAttachment.set(e==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const e=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const r=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let y=0,w=0;y<this._coordsTextureSize;y++)for(let E=0;E<this._coordsTextureSize;E++,w+=4)r[w+0]=255&E,r[w+1]=255&y,r[w+2]=E>>8<<4|y>>8,r[w+3]=0;const a=new u.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(r.buffer)),d=new ze(e,a,e.gl.RGBA,{premultiply:!1});return d.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),this._coordsTexture=d,d}pointCoordinate(e){this.painter.maybeDrawDepthAndCoords(!0);const r=new Uint8Array(4),a=this.painter.context,d=a.gl,y=Math.round(e.x*this.painter.pixelRatio/devicePixelRatio),w=Math.round(e.y*this.painter.pixelRatio/devicePixelRatio),E=Math.round(this.painter.height/devicePixelRatio);a.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),d.readPixels(y,E-w-1,1,1,d.RGBA,d.UNSIGNED_BYTE,r),a.bindFramebuffer.set(null);const A=r[0]+(r[2]>>4<<8),D=r[1]+((15&r[2])<<8),N=this.coordsIndex[255-r[3]],G=N&&this.sourceCache.getTileByID(N);if(!G)return null;const Z=this._coordsTextureSize,X=(1<<G.tileID.canonical.z)*Z;return new u.$((G.tileID.canonical.x*Z+A)/X+G.tileID.wrap,(G.tileID.canonical.y*Z+D)/X,this.getElevation(G.tileID,A,D,Z))}depthAtPoint(e){const r=new Uint8Array(4),a=this.painter.context,d=a.gl;return a.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),d.readPixels(e.x,this.painter.height/devicePixelRatio-e.y-1,1,1,d.RGBA,d.UNSIGNED_BYTE,r),a.bindFramebuffer.set(null),(r[0]/16777216+r[1]/65536+r[2]/256+r[3])/256}getTerrainMesh(e){var r;const a=((r=this.painter.style.projection)===null||r===void 0?void 0:r.transitionState)>0,d=a&&e.canonical.y===0,y=a&&e.canonical.y===(1<<e.canonical.z)-1,w=`m_${d?"n":""}_${y?"s":""}`;if(this._meshCache[w])return this._meshCache[w];const E=this.painter.context,A=new u.cm,D=new u.aK,N=this.meshSize,G=u.Z/N,Z=N*N;for(let je=0;je<=N;je++)for(let at=0;at<=N;at++)A.emplaceBack(at*G,je*G,0);for(let je=0;je<Z;je+=N+1)for(let at=0;at<N;at++)D.emplaceBack(at+je,N+at+je+1,N+at+je+2),D.emplaceBack(at+je,N+at+je+2,at+je+1);const X=A.length,ne=X+(N+1),be=(N+1)*N,_e=d?u.b9:0,Se=d?0:1,ke=y?u.ba:u.Z,Le=y?0:1;for(let je=0;je<=N;je++)A.emplaceBack(je*G,_e,Se);for(let je=0;je<=N;je++)A.emplaceBack(je*G,ke,Le);for(let je=0;je<N;je++)D.emplaceBack(be+je,ne+je,ne+je+1),D.emplaceBack(be+je,ne+je+1,be+je+1),D.emplaceBack(0+je,X+je+1,X+je),D.emplaceBack(0+je,0+je+1,X+je+1);const Me=A.length,De=Me+2*(N+1);for(const je of[0,1])for(let at=0;at<=N;at++)for(const It of[0,1])A.emplaceBack(je*u.Z,at*G,It);for(let je=0;je<2*N;je+=2)D.emplaceBack(Me+je,Me+je+1,Me+je+3),D.emplaceBack(Me+je,Me+je+3,Me+je+2),D.emplaceBack(De+je,De+je+3,De+je+1),D.emplaceBack(De+je,De+je+2,De+je+3);const Ne=new Nn(E.createVertexBuffer(A,gl.members),E.createIndexBuffer(D),u.aJ.simpleSegment(0,0,A.length,D.length));return this._meshCache[w]=Ne,Ne}getMeshFrameDelta(e){return 2*Math.PI*u.bu/Math.pow(2,Math.max(e,0))/5}getMinTileElevationForLngLatZoom(e,r){var a;const{tileID:d}=this._getOverscaledTileIDFromLngLatZoom(e,r);return(a=this.getMinMaxElevation(d).minElevation)!==null&&a!==void 0?a:0}getMinMaxElevation(e){const r=this.getTerrainData(e).tile,a={minElevation:null,maxElevation:null};return r&&r.dem&&(a.minElevation=r.dem.min*this.exaggeration,a.maxElevation=r.dem.max*this.exaggeration),a}_getOverscaledTileIDFromLngLatZoom(e,r){const a=u.$.fromLngLat(e.wrap()),d=(1<<r)*u.Z,y=a.x*d,w=a.y*d,E=Math.floor(y/u.Z),A=Math.floor(w/u.Z);return{tileID:new u.Y(r,0,r,E,A),mercatorX:y,mercatorY:w}}}class uc{constructor(e,r,a){this._context=e,this._size=r,this._tileSize=a,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const e of this._objects)e.texture.destroy(),e.fbo.destroy()}_createObject(e){const r=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),a=new ze(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return a.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),r.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),r.colorAttachment.set(a.texture),{id:e,fbo:r,texture:a,stamp:-1,inUse:!1}}getObjectForId(e){return this._objects[e]}useObject(e){e.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(r=>e.id!==r),this._recentlyUsed.push(e.id)}stampObject(e){e.stamp=++this._stamp}getOrCreateFreeObject(){for(const r of this._recentlyUsed)if(!this._objects[r].inUse)return this._objects[r];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const e=this._createObject(this._objects.length);return this._objects.push(e),e}freeObject(e){e.inUse=!1}freeAllObjects(){for(const e of this._objects)this.freeObject(e)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(e=>!e.inUse)===!1}}const ms={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Gc{constructor(e,r){this.painter=e,this.terrain=r,this.pool=new uc(e.context,30,r.sourceCache.tileSize*r.qualityFactor)}destruct(){this.pool.destruct()}getTexture(e){return this.pool.getObjectForId(e.rtt[this._stacks.length-1].id).texture}prepareForRender(e,r){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=e._order.filter(a=>!e._layers[a].isHidden(r)),this._coordsAscending={};for(const a in e.sourceCaches){this._coordsAscending[a]={};const d=e.sourceCaches[a].getVisibleCoordinates(),y=e.sourceCaches[a].getSource(),w=y instanceof sn?y.terrainTileRanges:null;for(const E of d){const A=this.terrain.sourceCache.getTerrainCoords(E,w);for(const D in A)this._coordsAscending[a][D]||(this._coordsAscending[a][D]=[]),this._coordsAscending[a][D].push(A[D])}}this._coordsAscendingStr={};for(const a of e._order){const d=e._layers[a],y=d.source;if(ms[d.type]&&!this._coordsAscendingStr[y]){this._coordsAscendingStr[y]={};for(const w in this._coordsAscending[y])this._coordsAscendingStr[y][w]=this._coordsAscending[y][w].map(E=>E.key).sort().join()}}for(const a of this._renderableTiles)for(const d in this._coordsAscendingStr){const y=this._coordsAscendingStr[d][a.tileID.key];y&&y!==a.rttCoords[d]&&(a.rtt=[])}}renderLayer(e,r){if(e.isHidden(this.painter.transform.zoom))return!1;const a=Object.assign(Object.assign({},r),{isRenderingToTexture:!0}),d=e.type,y=this.painter,w=this._renderableLayerIds[this._renderableLayerIds.length-1]===e.id;if(ms[d]&&(this._prevType&&ms[this._prevType]||this._stacks.push([]),this._prevType=d,this._stacks[this._stacks.length-1].push(e.id),!w))return!0;if(ms[this._prevType]||ms[d]&&w){this._prevType=d;const E=this._stacks.length-1,A=this._stacks[E]||[];for(const D of this._renderableTiles){if(this.pool.isFull()&&(Dl(this.painter,this.terrain,this._rttTiles,a),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(D),D.rtt[E]){const G=this.pool.getObjectForId(D.rtt[E].id);if(G.stamp===D.rtt[E].stamp){this.pool.useObject(G);continue}}const N=this.pool.getOrCreateFreeObject();this.pool.useObject(N),this.pool.stampObject(N),D.rtt[E]={id:N.id,stamp:N.stamp},y.context.bindFramebuffer.set(N.fbo.framebuffer),y.context.clear({color:u.b7.transparent,stencil:0}),y.currentStencilSource=void 0;for(let G=0;G<A.length;G++){const Z=y.style._layers[A[G]],X=Z.source?this._coordsAscending[Z.source][D.tileID.key]:[D.tileID];y.context.viewport.set([0,0,N.fbo.width,N.fbo.height]),y._renderTileClippingMasks(Z,X,!0),y.renderLayer(y,y.style.sourceCaches[Z.source],Z,X,a),Z.source&&(D.rttCoords[Z.source]=this._coordsAscendingStr[Z.source][D.tileID.key])}}return Dl(this.painter,this.terrain,this._rttTiles,a),this._rttTiles=[],this.pool.freeAllObjects(),ms[d]}return!1}}const dr={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Ur=J,nu={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Nl,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:u.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},Bs={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class $l{constructor(e,r,a=!1){this.mousedown=y=>{this.startMove(y,le.mousePos(this.element,y)),le.addEventListener(window,"mousemove",this.mousemove),le.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=y=>{this.move(y,le.mousePos(this.element,y))},this.mouseup=y=>{this._rotatePitchHanlder.dragEnd(y),this.offTemp()},this.touchstart=y=>{y.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=le.touchPos(this.element,y.targetTouches)[0],this.startMove(y,this._startPos),le.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),le.addEventListener(window,"touchend",this.touchend))},this.touchmove=y=>{y.targetTouches.length!==1?this.reset():(this._lastPos=le.touchPos(this.element,y.targetTouches)[0],this.move(y,this._lastPos))},this.touchend=y=>{y.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHanlder.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=r;const d=new nc;this._rotatePitchHanlder=new ko({clickTolerance:3,move:(y,w)=>{const E=r.getBoundingClientRect(),A=new u.P((E.bottom-E.top)/2,(E.right-E.left)/2);return{bearingDelta:u.ce(new u.P(y.x,w.y),w,A),pitchDelta:a?-.5*(w.y-y.y):void 0}},moveStateManager:d,enable:!0,assignEvents:()=>{}}),this.map=e,le.addEventListener(r,"mousedown",this.mousedown),le.addEventListener(r,"touchstart",this.touchstart,{passive:!1}),le.addEventListener(r,"touchcancel",this.reset)}startMove(e,r){this._rotatePitchHanlder.dragStart(e,r),le.disableDrag()}move(e,r){const a=this.map,{bearingDelta:d,pitchDelta:y}=this._rotatePitchHanlder.dragMove(e,r)||{};d&&a.setBearing(a.getBearing()+d),y&&a.setPitch(a.getPitch()+y)}off(){const e=this.element;le.removeEventListener(e,"mousedown",this.mousedown),le.removeEventListener(e,"touchstart",this.touchstart,{passive:!1}),le.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),le.removeEventListener(window,"touchend",this.touchend),le.removeEventListener(e,"touchcancel",this.reset),this.offTemp()}offTemp(){le.enableDrag(),le.removeEventListener(window,"mousemove",this.mousemove),le.removeEventListener(window,"mouseup",this.mouseup),le.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),le.removeEventListener(window,"touchend",this.touchend)}}let Li;function yl(g,e,r,a=!1){if(a||!r.getCoveringTilesDetailsProvider().allowWorldCopies())return g==null?void 0:g.wrap();const d=new u.Q(g.lng,g.lat);if(g=new u.Q(g.lng,g.lat),e){const y=new u.Q(g.lng-360,g.lat),w=new u.Q(g.lng+360,g.lat),E=r.locationToScreenPoint(g).distSqr(e);r.locationToScreenPoint(y).distSqr(e)<E?g=y:r.locationToScreenPoint(w).distSqr(e)<E&&(g=w)}for(;Math.abs(g.lng-r.center.lng)>180;){const y=r.locationToScreenPoint(g);if(y.x>=0&&y.y>=0&&y.x<=r.width&&y.y<=r.height)break;g.lng>r.center.lng?g.lng-=360:g.lng+=360}return g.lng!==d.lng&&r.isPointOnMapSurface(r.locationToScreenPoint(g))?g:d}const Ns={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function $o(g,e,r){const a=g.classList;for(const d in Ns)a.remove(`maplibregl-${r}-anchor-${d}`);a.add(`maplibregl-${r}-anchor-${e}`)}class oa extends u.E{constructor(e){if(super(),this._onKeyPress=r=>{const a=r.code,d=r.charCode||r.keyCode;a!=="Space"&&a!=="Enter"&&d!==32&&d!==13||this.togglePopup()},this._onMapClick=r=>{const a=r.originalEvent.target,d=this._element;this._popup&&(a===d||d.contains(a))&&this.togglePopup()},this._update=r=>{if(!this._map)return;const a=this._map.loaded()&&!this._map.isMoving();((r==null?void 0:r.type)==="terrain"||(r==null?void 0:r.type)==="render"&&!a)&&this._map.once("render",this._update),this._lngLat=yl(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let d="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?d=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(d=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let y="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?y="rotateX(0deg)":this._pitchAlignment==="map"&&(y=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||r&&r.type!=="moveend"||(this._pos=this._pos.round()),le.setTransform(this._element,`${Ns[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${y} ${d}`),Te.frameAsync(new AbortController).then(()=>{this._updateOpacity(r&&r.type==="moveend")}).catch(()=>{})},this._onMove=r=>{if(!this._isDragging){const a=this._clickTolerance||this._map._clickTolerance;this._isDragging=r.point.dist(this._pointerdownPos)>=a}this._isDragging&&(this._pos=r.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new u.l("dragstart"))),this.fire(new u.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new u.l("dragend")),this._state="inactive"},this._addDragHandler=r=>{this._element.contains(r.originalEvent.target)&&(r.preventDefault(),this._positionDelta=r.point.sub(this._pos).add(this._offset),this._pointerdownPos=r.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._subpixelPositioning=e&&e.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&e.pitchAlignment!=="auto"?e.pitchAlignment:this._rotationAlignment,this.setOpacity(e==null?void 0:e.opacity,e==null?void 0:e.opacityWhenCovered),e&&e.element)this._element=e.element,this._offset=u.P.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=le.create("div");const r=le.createNS("http://www.w3.org/2000/svg","svg"),a=41,d=27;r.setAttributeNS(null,"display","block"),r.setAttributeNS(null,"height",`${a}px`),r.setAttributeNS(null,"width",`${d}px`),r.setAttributeNS(null,"viewBox",`0 0 ${d} ${a}`);const y=le.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"stroke","none"),y.setAttributeNS(null,"stroke-width","1"),y.setAttributeNS(null,"fill","none"),y.setAttributeNS(null,"fill-rule","evenodd");const w=le.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"fill-rule","nonzero");const E=le.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"transform","translate(3.0, 29.0)"),E.setAttributeNS(null,"fill","#000000");const A=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Se of A){const ke=le.createNS("http://www.w3.org/2000/svg","ellipse");ke.setAttributeNS(null,"opacity","0.04"),ke.setAttributeNS(null,"cx","10.5"),ke.setAttributeNS(null,"cy","5.80029008"),ke.setAttributeNS(null,"rx",Se.rx),ke.setAttributeNS(null,"ry",Se.ry),E.appendChild(ke)}const D=le.createNS("http://www.w3.org/2000/svg","g");D.setAttributeNS(null,"fill",this._color);const N=le.createNS("http://www.w3.org/2000/svg","path");N.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),D.appendChild(N);const G=le.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"opacity","0.25"),G.setAttributeNS(null,"fill","#000000");const Z=le.createNS("http://www.w3.org/2000/svg","path");Z.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),G.appendChild(Z);const X=le.createNS("http://www.w3.org/2000/svg","g");X.setAttributeNS(null,"transform","translate(6.0, 7.0)"),X.setAttributeNS(null,"fill","#FFFFFF");const ne=le.createNS("http://www.w3.org/2000/svg","g");ne.setAttributeNS(null,"transform","translate(8.0, 8.0)");const be=le.createNS("http://www.w3.org/2000/svg","circle");be.setAttributeNS(null,"fill","#000000"),be.setAttributeNS(null,"opacity","0.25"),be.setAttributeNS(null,"cx","5.5"),be.setAttributeNS(null,"cy","5.5"),be.setAttributeNS(null,"r","5.4999962");const _e=le.createNS("http://www.w3.org/2000/svg","circle");_e.setAttributeNS(null,"fill","#FFFFFF"),_e.setAttributeNS(null,"cx","5.5"),_e.setAttributeNS(null,"cy","5.5"),_e.setAttributeNS(null,"r","5.4999962"),ne.appendChild(be),ne.appendChild(_e),w.appendChild(E),w.appendChild(D),w.appendChild(G),w.appendChild(X),w.appendChild(ne),r.appendChild(w),r.setAttributeNS(null,"height",a*this._scale+"px"),r.setAttributeNS(null,"width",d*this._scale+"px"),this._element.appendChild(r),this._offset=u.P.convert(e&&e.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",r=>{r.preventDefault()}),this._element.addEventListener("mousedown",r=>{r.preventDefault()}),$o(this._element,this._anchor,"marker"),e&&e.className)for(const r of e.className.split(" "))this._element.classList.add(r);this._popup=null}addTo(e){return this.remove(),this._map=e,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",e._getUIString("Marker.Title")),e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),e.on("terrain",this._update),e.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),le.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=u.Q.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){const d=Math.abs(13.5)/Math.SQRT2;e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[d,-1*(38.1-13.5+d)],"bottom-right":[-d,-1*(38.1-13.5+d)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=e,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(e){return this._subpixelPositioning=e,this}getPopup(){return this._popup}togglePopup(){const e=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:e?(e.isOpen()?e.remove():(e.setLngLat(this._lngLat),e.addTo(this._map)),this):this}_updateOpacity(e=!1){var r,a;const d=(r=this._map)===null||r===void 0?void 0:r.terrain,y=this._map.transform.isLocationOccluded(this._lngLat);if(!d||y){const X=y?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==X&&(this._element.style.opacity=X))}if(e)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const w=this._map,E=w.terrain.depthAtPoint(this._pos),A=w.terrain.getElevationForLngLatZoom(this._lngLat,w.transform.tileZoom);if(w.transform.lngLatToCameraDepth(this._lngLat,A)-E<.006)return void(this._element.style.opacity=this._opacity);const D=-this._offset.y/w.transform.pixelsPerMeter,N=Math.sin(w.getPitch()*Math.PI/180)*D,G=w.terrain.depthAtPoint(new u.P(this._pos.x,this._pos.y-this._offset.y)),Z=w.transform.lngLatToCameraDepth(this._lngLat,A+N)-G>.006;!((a=this._popup)===null||a===void 0)&&a.isOpen()&&Z&&this._popup.remove(),this._element.style.opacity=Z?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(e){return this._offset=u.P.convert(e),this._update(),this}addClassName(e){this._element.classList.add(e)}removeClassName(e){this._element.classList.remove(e)}toggleClassName(e){return this._element.classList.toggle(e)}setDraggable(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e&&e!=="auto"?e:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(e,r){return(this._opacity===void 0||e===void 0&&r===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),e!==void 0&&(this._opacity=e),r!==void 0&&(this._opacityWhenCovered=r),this._map&&this._updateOpacity(!0),this}}const $n={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let si=0,Au=!1;const Ru={maxWidth:100,unit:"metric"};function Ta(g,e,r){const a=r&&r.maxWidth||100,d=g._container.clientHeight/2,y=g._container.clientWidth/2,w=g.unproject([y-a/2,d]),E=g.unproject([y+a/2,d]),A=Math.round(g.project(E).x-g.project(w).x),D=Math.min(a,A,g._container.clientWidth),N=w.distanceTo(E);if(r&&r.unit==="imperial"){const G=3.2808*N;G>5280?jo(e,D,G/5280,g._getUIString("ScaleControl.Miles")):jo(e,D,G,g._getUIString("ScaleControl.Feet"))}else r&&r.unit==="nautical"?jo(e,D,N/1852,g._getUIString("ScaleControl.NauticalMiles")):N>=1e3?jo(e,D,N/1e3,g._getUIString("ScaleControl.Kilometers")):jo(e,D,N,g._getUIString("ScaleControl.Meters"))}function jo(g,e,r,a){const d=function(y){const w=Math.pow(10,`${Math.floor(y)}`.length-1);let E=y/w;return E=E>=10?10:E>=5?5:E>=3?3:E>=2?2:E>=1?1:function(A){const D=Math.pow(10,Math.ceil(-Math.log(A)/Math.LN10));return Math.round(A*D)/D}(E),w*E}(r);g.style.width=e*(d/r)+"px",g.innerHTML=`${d}&nbsp;${a}`}const Wc={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},Kh=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function sa(g){if(g){if(typeof g=="number"){const e=Math.round(Math.abs(g)/Math.SQRT2);return{center:new u.P(0,0),top:new u.P(0,g),"top-left":new u.P(e,e),"top-right":new u.P(-e,e),bottom:new u.P(0,-g),"bottom-left":new u.P(e,-e),"bottom-right":new u.P(-e,-e),left:new u.P(g,0),right:new u.P(-g,0)}}if(g instanceof u.P||Array.isArray(g)){const e=u.P.convert(g);return{center:e,top:e,"top-left":e,"top-right":e,bottom:e,"bottom-left":e,"bottom-right":e,left:e,right:e}}return{center:u.P.convert(g.center||[0,0]),top:u.P.convert(g.top||[0,0]),"top-left":u.P.convert(g["top-left"]||[0,0]),"top-right":u.P.convert(g["top-right"]||[0,0]),bottom:u.P.convert(g.bottom||[0,0]),"bottom-left":u.P.convert(g["bottom-left"]||[0,0]),"bottom-right":u.P.convert(g["bottom-right"]||[0,0]),left:u.P.convert(g.left||[0,0]),right:u.P.convert(g.right||[0,0])}}return sa(new u.P(0,0))}const aa=J;M.AJAXError=u.cq,M.Event=u.l,M.Evented=u.E,M.LngLat=u.Q,M.MercatorCoordinate=u.$,M.Point=u.P,M.addProtocol=u.cr,M.config=u.a,M.removeProtocol=u.cs,M.AttributionControl=oi,M.BoxZoomHandler=No,M.CanvasSource=wr,M.CooperativeGesturesHandler=vi,M.DoubleClickZoomHandler=Fl,M.DragPanHandler=ku,M.DragRotateHandler=Xo,M.EdgeInsets=Eo,M.FullscreenControl=class extends u.E{constructor(g={}){super(),this._onFullscreenChange=()=>{var e;let r=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((e=r==null?void 0:r.shadowRoot)===null||e===void 0)&&e.fullscreenElement;)r=r.shadowRoot.fullscreenElement;r===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,g&&g.container&&(g.container instanceof HTMLElement?this._container=g.container:u.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(g){return this._map=g,this._container||(this._container=this._map.getContainer()),this._controlContainer=le.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){le.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const g=this._fullscreenButton=le.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);le.create("span","maplibregl-ctrl-icon",g).setAttribute("aria-hidden","true"),g.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const g=this._getTitle();this._fullscreenButton.setAttribute("aria-label",g),this._fullscreenButton.title=g}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new u.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new u.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},M.GeoJSONSource=bn,M.GeolocateControl=class extends u.E{constructor(g){super(),this._onSuccess=e=>{if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new u.l("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(e),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new u.l("geolocate",e)),this._finish()}},this._updateCamera=e=>{const r=new u.Q(e.coords.longitude,e.coords.latitude),a=e.coords.accuracy,d=this._map.getBearing(),y=u.e({bearing:d},this.options.fitBoundsOptions),w=br.fromLngLat(r,a);this._map.fitBounds(w,y,{geolocateSource:!0})},this._updateMarker=e=>{if(e){const r=new u.Q(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(r).addTo(this._map),this._userLocationDotMarker.setLngLat(r).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=e=>{if(this._map){if(e.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const r=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(e.code===3&&Au)return;this.options.trackUserLocation&&this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new u.l("error",e)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",e=>e.preventDefault()),this._geolocateButton=le.create("button","maplibregl-ctrl-geolocate",this._container),le.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=e=>{if(this._map){if(e===!1){u.w("Geolocation support is not available so the GeolocateControl will be disabled.");const r=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r)}else{const r=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=le.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new oa({element:this._dotElement}),this._circleElement=le.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new oa({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",r=>{r.geolocateSource||this._watchState!=="ACTIVE_LOCK"||r.originalEvent&&r.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new u.l("trackuserlocationend")),this.fire(new u.l("userlocationlostfocus")))})}},this.options=u.e({},$n,g)}onAdd(g){return this._map=g,this._container=le.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return u._(this,arguments,void 0,function*(e=!1){if(Li!==void 0&&!e)return Li;if(window.navigator.permissions===void 0)return Li=!!window.navigator.geolocation,Li;try{Li=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Li=!!window.navigator.geolocation}return Li})}().then(e=>this._finishSetupUI(e)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),le.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,si=0,Au=!1}_isOutOfMapMaxBounds(g){const e=this._map.getMaxBounds(),r=g.coords;return e&&(r.longitude<e.getWest()||r.longitude>e.getEast()||r.latitude<e.getSouth()||r.latitude>e.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const g=this._map.getBounds(),e=g.getSouthEast(),r=g.getNorthEast(),a=e.distanceTo(r),d=Math.ceil(this._accuracy/(a/this._map._container.clientHeight)*2);this._circleElement.style.width=`${d}px`,this._circleElement.style.height=`${d}px`}trigger(){if(!this._setup)return u.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new u.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":si--,Au=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new u.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new u.l("trackuserlocationstart")),this.fire(new u.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let g;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),si++,si>1?(g={maximumAge:6e5,timeout:0},Au=!0):(g=this.options.positionOptions,Au=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,g)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},M.GlobeControl=class{constructor(){this._toggleProjection=()=>{var g;const e=(g=this._map.getProjection())===null||g===void 0?void 0:g.type;this._map.setProjection(e!=="mercator"&&e?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var g;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((g=this._map.getProjection())===null||g===void 0?void 0:g.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(g){return this._map=g,this._container=le.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=le.create("button","maplibregl-ctrl-globe",this._container),le.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){le.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},M.Hash=Ua,M.ImageSource=sn,M.KeyboardHandler=Ko,M.LngLatBounds=br,M.LogoControl=lc,M.Map=class extends ia{constructor(g){var e,r;u.cn.mark(u.co.create);const a=Object.assign(Object.assign(Object.assign({},nu),g),{canvasContextAttributes:Object.assign(Object.assign({},nu.canvasContextAttributes),g.canvasContextAttributes)});if(a.minZoom!=null&&a.maxZoom!=null&&a.minZoom>a.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(a.minPitch!=null&&a.maxPitch!=null&&a.minPitch>a.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(a.minPitch!=null&&a.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(a.maxPitch!=null&&a.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const d=new mu,y=new ls;if(a.minZoom!==void 0&&d.setMinZoom(a.minZoom),a.maxZoom!==void 0&&d.setMaxZoom(a.maxZoom),a.minPitch!==void 0&&d.setMinPitch(a.minPitch),a.maxPitch!==void 0&&d.setMaxPitch(a.maxPitch),a.renderWorldCopies!==void 0&&d.setRenderWorldCopies(a.renderWorldCopies),super(d,y,{bearingSnap:a.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Wa,this._controls=[],this._mapId=u.a4(),this._contextLost=E=>{E.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new u.l("webglcontextlost",{originalEvent:E}))},this._contextRestored=E=>{this._setupPainter(),this.resize(),this._update(),this.fire(new u.l("webglcontextrestored",{originalEvent:E}))},this._onMapScroll=E=>{if(E.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=a.interactive,this._maxTileCacheSize=a.maxTileCacheSize,this._maxTileCacheZoomLevels=a.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},a.canvasContextAttributes),this._trackResize=a.trackResize===!0,this._bearingSnap=a.bearingSnap,this._centerClampedToGround=a.centerClampedToGround,this._refreshExpiredTiles=a.refreshExpiredTiles===!0,this._fadeDuration=a.fadeDuration,this._crossSourceCollisions=a.crossSourceCollisions===!0,this._collectResourceTiming=a.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},dr),a.locale),this._clickTolerance=a.clickTolerance,this._overridePixelRatio=a.pixelRatio,this._maxCanvasSize=a.maxCanvasSize,this.transformCameraUpdate=a.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=a.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=Je.addThrottleControl(()=>this.isMoving()),this._requestManager=new Qe(a.transformRequest),typeof a.container=="string"){if(this._container=document.getElementById(a.container),!this._container)throw new Error(`Container '${a.container}' not found.`)}else{if(!(a.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=a.container}if(a.maxBounds&&this.setMaxBounds(a.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let E=!1;const A=Ol(D=>{this._trackResize&&!this._removed&&(this.resize(D),this.redraw())},50);this._resizeObserver=new ResizeObserver(D=>{E?A(D):E=!0}),this._resizeObserver.observe(this._container)}this.handlers=new ru(this,a),this._hash=a.hash&&new Ua(typeof a.hash=="string"&&a.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:a.center,elevation:a.elevation,zoom:a.zoom,bearing:a.bearing,pitch:a.pitch,roll:a.roll}),a.bounds&&(this.resize(),this.fitBounds(a.bounds,u.e({},a.fitBoundsOptions,{duration:0}))));const w=typeof a.style=="string"||((r=(e=a.style)===null||e===void 0?void 0:e.projection)===null||r===void 0?void 0:r.type)!=="globe";this.resize(null,w),this._localIdeographFontFamily=a.localIdeographFontFamily,this._validateStyle=a.validateStyle,a.style&&this.setStyle(a.style,{localIdeographFontFamily:a.localIdeographFontFamily}),a.attributionControl&&this.addControl(new oi(typeof a.attributionControl=="boolean"?void 0:a.attributionControl)),a.maplibreLogo&&this.addControl(new lc,a.logoPosition),this.on("style.load",()=>{if(w||this._resizeTransform(),this.transform.unmodified){const E=u.O(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(E)}}),this.on("data",E=>{this._update(E.dataType==="style"),this.fire(new u.l(`${E.dataType}data`,E))}),this.on("dataloading",E=>{this.fire(new u.l(`${E.dataType}dataloading`,E))}),this.on("dataabort",E=>{this.fire(new u.l("sourcedataabort",E))})}_getMapId(){return this._mapId}addControl(g,e){if(e===void 0&&(e=g.getDefaultPosition?g.getDefaultPosition():"top-right"),!g||!g.onAdd)return this.fire(new u.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const r=g.onAdd(this);this._controls.push(g);const a=this._controlPositions[e];return e.indexOf("bottom")!==-1?a.insertBefore(r,a.firstChild):a.appendChild(r),this}removeControl(g){if(!g||!g.onRemove)return this.fire(new u.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const e=this._controls.indexOf(g);return e>-1&&this._controls.splice(e,1),g.onRemove(this),this}hasControl(g){return this._controls.indexOf(g)>-1}calculateCameraOptionsFromTo(g,e,r,a){return a==null&&this.terrain&&(a=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(g,e,r,a)}resize(g,e=!0){const[r,a]=this._containerDimensions(),d=this._getClampedPixelRatio(r,a);if(this._resizeCanvas(r,a,d),this.painter.resize(r,a,d),this.painter.overLimit()){const w=this.painter.context.gl;this._maxCanvasSize=[w.drawingBufferWidth,w.drawingBufferHeight];const E=this._getClampedPixelRatio(r,a);this._resizeCanvas(r,a,E),this.painter.resize(r,a,E)}this._resizeTransform(e);const y=!this._moving;return y&&(this.stop(),this.fire(new u.l("movestart",g)).fire(new u.l("move",g))),this.fire(new u.l("resize",g)),y&&this.fire(new u.l("moveend",g)),this}_resizeTransform(g=!0){var e;const[r,a]=this._containerDimensions();this.transform.resize(r,a,g),(e=this._requestedCameraState)===null||e===void 0||e.resize(r,a,g)}_getClampedPixelRatio(g,e){const{0:r,1:a}=this._maxCanvasSize,d=this.getPixelRatio(),y=g*d,w=e*d;return Math.min(y>r?r/y:1,w>a?a/w:1)*d}getPixelRatio(){var g;return(g=this._overridePixelRatio)!==null&&g!==void 0?g:devicePixelRatio}setPixelRatio(g){this._overridePixelRatio=g,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(g){return this.transform.setMaxBounds(br.convert(g)),this._update()}setMinZoom(g){if((g=g??-2)>=-2&&g<=this.transform.maxZoom)return this.transform.setMinZoom(g),this._update(),this.getZoom()<g&&this.setZoom(g),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(g){if((g=g??22)>=this.transform.minZoom)return this.transform.setMaxZoom(g),this._update(),this.getZoom()>g&&this.setZoom(g),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(g){if((g=g??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(g>=0&&g<=this.transform.maxPitch)return this.transform.setMinPitch(g),this._update(),this.getPitch()<g&&this.setPitch(g),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(g){if((g=g??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(g>=this.transform.minPitch)return this.transform.setMaxPitch(g),this._update(),this.getPitch()>g&&this.setPitch(g),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(g){return this.transform.setRenderWorldCopies(g),this._update()}project(g){return this.transform.locationToScreenPoint(u.Q.convert(g),this.style&&this.terrain)}unproject(g){return this.transform.screenPointToLocation(u.P.convert(g),this.terrain)}isMoving(){var g;return this._moving||((g=this.handlers)===null||g===void 0?void 0:g.isMoving())}isZooming(){var g;return this._zooming||((g=this.handlers)===null||g===void 0?void 0:g.isZooming())}isRotating(){var g;return this._rotating||((g=this.handlers)===null||g===void 0?void 0:g.isRotating())}_createDelegatedListener(g,e,r){if(g==="mouseenter"||g==="mouseover"){let a=!1;return{layers:e,listener:r,delegates:{mousemove:y=>{const w=e.filter(A=>this.getLayer(A)),E=w.length!==0?this.queryRenderedFeatures(y.point,{layers:w}):[];E.length?a||(a=!0,r.call(this,new so(g,this,y.originalEvent,{features:E}))):a=!1},mouseout:()=>{a=!1}}}}if(g==="mouseleave"||g==="mouseout"){let a=!1;return{layers:e,listener:r,delegates:{mousemove:w=>{const E=e.filter(A=>this.getLayer(A));(E.length!==0?this.queryRenderedFeatures(w.point,{layers:E}):[]).length?a=!0:a&&(a=!1,r.call(this,new so(g,this,w.originalEvent)))},mouseout:w=>{a&&(a=!1,r.call(this,new so(g,this,w.originalEvent)))}}}}{const a=d=>{const y=e.filter(E=>this.getLayer(E)),w=y.length!==0?this.queryRenderedFeatures(d.point,{layers:y}):[];w.length&&(d.features=w,r.call(this,d),delete d.features)};return{layers:e,listener:r,delegates:{[g]:a}}}}_saveDelegatedListener(g,e){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[g]=this._delegatedListeners[g]||[],this._delegatedListeners[g].push(e)}_removeDelegatedListener(g,e,r){if(!this._delegatedListeners||!this._delegatedListeners[g])return;const a=this._delegatedListeners[g];for(let d=0;d<a.length;d++){const y=a[d];if(y.listener===r&&y.layers.length===e.length&&y.layers.every(w=>e.includes(w))){for(const w in y.delegates)this.off(w,y.delegates[w]);return void a.splice(d,1)}}}on(g,e,r){if(r===void 0)return super.on(g,e);const a=typeof e=="string"?[e]:e,d=this._createDelegatedListener(g,a,r);this._saveDelegatedListener(g,d);for(const y in d.delegates)this.on(y,d.delegates[y]);return{unsubscribe:()=>{this._removeDelegatedListener(g,a,r)}}}once(g,e,r){if(r===void 0)return super.once(g,e);const a=typeof e=="string"?[e]:e,d=this._createDelegatedListener(g,a,r);for(const y in d.delegates){const w=d.delegates[y];d.delegates[y]=(...E)=>{this._removeDelegatedListener(g,a,r),w(...E)}}this._saveDelegatedListener(g,d);for(const y in d.delegates)this.once(y,d.delegates[y]);return this}off(g,e,r){return r===void 0?super.off(g,e):(this._removeDelegatedListener(g,typeof e=="string"?[e]:e,r),this)}queryRenderedFeatures(g,e){if(!this.style)return[];let r;const a=g instanceof u.P||Array.isArray(g),d=a?g:[[0,0],[this.transform.width,this.transform.height]];if(e=e||(a?{}:g)||{},d instanceof u.P||typeof d[0]=="number")r=[u.P.convert(d)];else{const y=u.P.convert(d[0]),w=u.P.convert(d[1]);r=[y,new u.P(w.x,y.y),w,new u.P(y.x,w.y),y]}return this.style.queryRenderedFeatures(r,e,this.transform)}querySourceFeatures(g,e){return this.style.querySourceFeatures(g,e)}setStyle(g,e){return(e=u.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},e)).diff!==!1&&e.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&g?(this._diffStyle(g,e),this):(this._localIdeographFontFamily=e.localIdeographFontFamily,this._updateStyle(g,e))}setTransformRequest(g){return this._requestManager.setTransformRequest(g),this}_getUIString(g){const e=this._locale[g];if(e==null)throw new Error(`Missing UI string '${g}'`);return e}_updateStyle(g,e){var r,a;if(e.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(g,e));const d=this.style&&e.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!g)),g?(this.style=new Zu(this,e||{}),this.style.setEventedParent(this,{style:this.style}),typeof g=="string"?this.style.loadURL(g,e,d):this.style.loadJSON(g,e,d),this):((a=(r=this.style)===null||r===void 0?void 0:r.projection)===null||a===void 0||a.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Zu(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(g,e){if(typeof g=="string"){const r=this._requestManager.transformRequest(g,"Style");u.j(r,new AbortController).then(a=>{this._updateDiff(a.data,e)}).catch(a=>{a&&this.fire(new u.k(a))})}else typeof g=="object"&&this._updateDiff(g,e)}_updateDiff(g,e){try{this.style.setState(g,e)&&this._update(!0)}catch(r){u.w(`Unable to perform style diff: ${r.message||r.error||r}.  Rebuilding the style from scratch.`),this._updateStyle(g,e)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():u.w("There is no style added to the map.")}addSource(g,e){return this._lazyInitEmptyStyle(),this.style.addSource(g,e),this._update(!0)}isSourceLoaded(g){const e=this.style&&this.style.sourceCaches[g];if(e!==void 0)return e.loaded();this.fire(new u.k(new Error(`There is no source with ID '${g}'`)))}setTerrain(g){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),g){const e=this.style.sourceCaches[g.source];if(!e)throw new Error(`cannot load terrain, because there exists no source with ID: ${g.source}`);this.terrain===null&&e.reload();for(const r in this.style._layers){const a=this.style._layers[r];a.type==="hillshade"&&a.source===g.source&&u.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Zc(this.painter,e,g),this.painter.renderToTexture=new Gc(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=r=>{var a;r.dataType==="style"?this.terrain.sourceCache.freeRtt():r.dataType==="source"&&r.tile&&(r.sourceId!==g.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((a=r.source)===null||a===void 0?void 0:a.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(r.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new u.l("terrain",{terrain:g})),this}getTerrain(){var g,e;return(e=(g=this.terrain)===null||g===void 0?void 0:g.options)!==null&&e!==void 0?e:null}areTilesLoaded(){const g=this.style&&this.style.sourceCaches;for(const e in g){const r=g[e]._tiles;for(const a in r){const d=r[a];if(d.state!=="loaded"&&d.state!=="errored")return!1}}return!0}removeSource(g){return this.style.removeSource(g),this._update(!0)}getSource(g){return this.style.getSource(g)}setSourceTileLodParams(g,e,r){if(r){const a=this.getSource(r);if(!a)throw new Error(`There is no source with ID "${r}", cannot set LOD parameters`);a.calculateTileZoom=Ue(Math.max(1,g),Math.max(1,e))}else for(const a in this.style.sourceCaches)this.style.sourceCaches[a].getSource().calculateTileZoom=Ue(Math.max(1,g),Math.max(1,e));return this._update(!0),this}refreshTiles(g,e){const r=this.style.sourceCaches[g];if(!r)throw new Error(`There is no source cache with ID "${g}", cannot refresh tile`);e===void 0?r.reload():r.refreshTiles(e.map(a=>new u.a1(a.z,a.x,a.y)))}addImage(g,e,r={}){const{pixelRatio:a=1,sdf:d=!1,stretchX:y,stretchY:w,content:E,textFitWidth:A,textFitHeight:D}=r;if(this._lazyInitEmptyStyle(),!(e instanceof HTMLImageElement||u.b(e))){if(e.width===void 0||e.height===void 0)return this.fire(new u.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:N,height:G,data:Z}=e,X=e;return this.style.addImage(g,{data:new u.R({width:N,height:G},new Uint8Array(Z)),pixelRatio:a,stretchX:y,stretchY:w,content:E,textFitWidth:A,textFitHeight:D,sdf:d,version:0,userImage:X}),X.onAdd&&X.onAdd(this,g),this}}{const{width:N,height:G,data:Z}=Te.getImageData(e);this.style.addImage(g,{data:new u.R({width:N,height:G},Z),pixelRatio:a,stretchX:y,stretchY:w,content:E,textFitWidth:A,textFitHeight:D,sdf:d,version:0})}}updateImage(g,e){const r=this.style.getImage(g);if(!r)return this.fire(new u.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const a=e instanceof HTMLImageElement||u.b(e)?Te.getImageData(e):e,{width:d,height:y,data:w}=a;if(d===void 0||y===void 0)return this.fire(new u.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(d!==r.data.width||y!==r.data.height)return this.fire(new u.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const E=!(e instanceof HTMLImageElement||u.b(e));return r.data.replace(w,E),this.style.updateImage(g,r),this}getImage(g){return this.style.getImage(g)}hasImage(g){return g?!!this.style.getImage(g):(this.fire(new u.k(new Error("Missing required image id"))),!1)}removeImage(g){this.style.removeImage(g)}loadImage(g){return Je.getImage(this._requestManager.transformRequest(g,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(g,e){return this._lazyInitEmptyStyle(),this.style.addLayer(g,e),this._update(!0)}moveLayer(g,e){return this.style.moveLayer(g,e),this._update(!0)}removeLayer(g){return this.style.removeLayer(g),this._update(!0)}getLayer(g){return this.style.getLayer(g)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(g,e,r){return this.style.setLayerZoomRange(g,e,r),this._update(!0)}setFilter(g,e,r={}){return this.style.setFilter(g,e,r),this._update(!0)}getFilter(g){return this.style.getFilter(g)}setPaintProperty(g,e,r,a={}){return this.style.setPaintProperty(g,e,r,a),this._update(!0)}getPaintProperty(g,e){return this.style.getPaintProperty(g,e)}setLayoutProperty(g,e,r,a={}){return this.style.setLayoutProperty(g,e,r,a),this._update(!0)}getLayoutProperty(g,e){return this.style.getLayoutProperty(g,e)}setGlyphs(g,e={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(g,e),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(g,e,r={}){return this._lazyInitEmptyStyle(),this.style.addSprite(g,e,r,a=>{a||this._update(!0)}),this}removeSprite(g){return this._lazyInitEmptyStyle(),this.style.removeSprite(g),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(g,e={}){return this._lazyInitEmptyStyle(),this.style.setSprite(g,e,r=>{r||this._update(!0)}),this}setLight(g,e={}){return this._lazyInitEmptyStyle(),this.style.setLight(g,e),this._update(!0)}getLight(){return this.style.getLight()}setSky(g,e={}){return this._lazyInitEmptyStyle(),this.style.setSky(g,e),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(g,e){return this.style.setFeatureState(g,e),this._update()}removeFeatureState(g,e){return this.style.removeFeatureState(g,e),this._update()}getFeatureState(g){return this.style.getFeatureState(g)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let g=0,e=0;return this._container&&(g=this._container.clientWidth||400,e=this._container.clientHeight||300),[g,e]}_setupContainer(){const g=this._container;g.classList.add("maplibregl-map");const e=this._canvasContainer=le.create("div","maplibregl-canvas-container",g);this._interactive&&e.classList.add("maplibregl-interactive"),this._canvas=le.create("canvas","maplibregl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const r=this._containerDimensions(),a=this._getClampedPixelRatio(r[0],r[1]);this._resizeCanvas(r[0],r[1],a);const d=this._controlContainer=le.create("div","maplibregl-control-container",g),y=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(w=>{y[w]=le.create("div",`maplibregl-ctrl-${w} `,d)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(g,e,r){this._canvas.width=Math.floor(r*g),this._canvas.height=Math.floor(r*e),this._canvas.style.width=`${g}px`,this._canvas.style.height=`${e}px`}_setupPainter(){const g=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let e=null;this._canvas.addEventListener("webglcontextcreationerror",a=>{e={requestedAttributes:g},a&&(e.statusMessage=a.statusMessage,e.type=a.type)},{once:!0});let r=null;if(r=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,g):this._canvas.getContext("webgl2",g)||this._canvas.getContext("webgl",g),!r){const a="Failed to initialize WebGL";throw e?(e.message=a,new Error(JSON.stringify(e))):new Error(a)}this.painter=new Hh(r,this.transform),we.testSupport(r)}migrateProjection(g,e){super.migrateProjection(g,e),this.painter.transform=g,this.fire(new u.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(g){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||g,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(g){return this._update(),this._renderTaskQueue.add(g)}_cancelRenderFrame(g){this._renderTaskQueue.remove(g)}_render(g){var e,r,a,d,y;const w=this._idleTriggered?this._fadeDuration:0,E=((e=this.style.projection)===null||e===void 0?void 0:e.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(g),this._removed)return;let A=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const G=this.transform.zoom,Z=Te.now();this.style.zoomHistory.update(G,Z);const X=new u.C(G,{now:Z,fadeDuration:w,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ne=X.crossFadingFactor();ne===1&&ne===this._crossFadingFactor||(A=!0,this._crossFadingFactor=ne),this.style.update(X)}const D=((r=this.style.projection)===null||r===void 0?void 0:r.transitionState)>0!==E;(a=this.style.projection)===null||a===void 0||a.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((d=this.style.projection)===null||d===void 0?void 0:d.transitionState,(y=this.style.projection)===null||y===void 0?void 0:y.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||D)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,w,this._crossSourceCollisions,D),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:w,showPadding:this.showPadding}),this.fire(new u.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,u.cn.mark(u.co.load),this.fire(new u.l("load"))),this.style&&(this.style.hasTransitions()||A)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const N=this._sourcesDirty||this._styleDirty||this._placementDirty;return N||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new u.l("idle")),!this._loaded||this._fullyLoaded||N||(this._fullyLoaded=!0,u.cn.mark(u.co.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var g;this._hash&&this._hash.remove();for(const r of this._controls)r.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),Je.removeThrottleControl(this._imageQueueHandle),(g=this._resizeObserver)===null||g===void 0||g.disconnect();const e=this.painter.context.gl.getExtension("WEBGL_lose_context");e!=null&&e.loseContext&&e.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),le.remove(this._canvasContainer),le.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),u.cn.clearMetrics(),this._removed=!0,this.fire(new u.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,Te.frame(this._frameRequest,g=>{u.cn.frame(g),this._frameRequest=null;try{this._render(g)}catch(e){if(!u.cp(e)&&!function(r){return r.message===na}(e))throw e}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(g){this._showTileBoundaries!==g&&(this._showTileBoundaries=g,this._update())}get showPadding(){return!!this._showPadding}set showPadding(g){this._showPadding!==g&&(this._showPadding=g,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(g){this._showCollisionBoxes!==g&&(this._showCollisionBoxes=g,g?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(g){this._showOverdrawInspector!==g&&(this._showOverdrawInspector=g,this._update())}get repaint(){return!!this._repaint}set repaint(g){this._repaint!==g&&(this._repaint=g,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(g){this._vertices=g,this._update()}get version(){return Ur}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(g){return this._lazyInitEmptyStyle(),this.style.setProjection(g),this._update(!0)}},M.MapMouseEvent=so,M.MapTouchEvent=fl,M.MapWheelEvent=fs,M.Marker=oa,M.NavigationControl=class{constructor(g){this._updateZoomButtons=()=>{const e=this._map.getZoom(),r=e===this._map.getMaxZoom(),a=e===this._map.getMinZoom();this._zoomInButton.disabled=r,this._zoomOutButton.disabled=a,this._zoomInButton.setAttribute("aria-disabled",r.toString()),this._zoomOutButton.setAttribute("aria-disabled",a.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(e,r)=>{const a=this._map._getUIString(`NavigationControl.${r}`);e.title=a,e.setAttribute("aria-label",a)},this.options=u.e({},Bs,g),this._container=le.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",e=>e.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",e=>this._map.zoomIn({},{originalEvent:e})),le.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",e=>this._map.zoomOut({},{originalEvent:e})),le.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",e=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:e}):this._map.resetNorth({},{originalEvent:e})}),this._compassIcon=le.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(g){return this._map=g,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new $l(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){le.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(g,e){const r=le.create("button",g,this._container);return r.type="button",r.addEventListener("click",e),r}},M.Popup=class extends u.E{constructor(g){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:void 0)},this.remove=()=>(this._content&&le.remove(this._content),this._container&&(le.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new u.l("close"))),this),this._onMouseUp=e=>{this._update(e.point)},this._onMouseMove=e=>{this._update(e.point)},this._onDrag=e=>{this._update(e.point)},this._update=e=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=le.create("div","maplibregl-popup",this._map.getContainer()),this._tip=le.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const w of this.options.className.split(" "))this._container.classList.add(w);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=yl(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!e)return;const r=this._flatPos=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&e?e:this._map.transform.locationToScreenPoint(this._lngLat));let a=this.options.anchor;const d=sa(this.options.offset);if(!a){const w=this._container.offsetWidth,E=this._container.offsetHeight;let A;A=r.y+d.bottom.y<E?["top"]:r.y>this._map.transform.height-E?["bottom"]:[],r.x<w/2?A.push("left"):r.x>this._map.transform.width-w/2&&A.push("right"),a=A.length===0?"bottom":A.join("-")}let y=r.add(d[a]);this.options.subpixelPositioning||(y=y.round()),le.setTransform(this._container,`${Ns[a]} translate(${y.x}px,${y.y}px)`),$o(this._container,a,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=u.e(Object.create(Wc),g)}addTo(g){return this._map&&this.remove(),this._map=g,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new u.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(g){return this._lngLat=u.Q.convert(g),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(g){return this.setDOMContent(document.createTextNode(g))}setHTML(g){const e=document.createDocumentFragment(),r=document.createElement("body");let a;for(r.innerHTML=g;a=r.firstChild,a;)e.appendChild(a);return this.setDOMContent(e)}getMaxWidth(){var g;return(g=this._container)===null||g===void 0?void 0:g.style.maxWidth}setMaxWidth(g){return this.options.maxWidth=g,this._update(),this}setDOMContent(g){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=le.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(g),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(g){return this._container&&this._container.classList.add(g),this}removeClassName(g){return this._container&&this._container.classList.remove(g),this}setOffset(g){return this.options.offset=g,this._update(),this}toggleClassName(g){if(this._container)return this._container.classList.toggle(g)}setSubpixelPositioning(g){this.options.subpixelPositioning=g}_createCloseButton(){this.options.closeButton&&(this._closeButton=le.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const g=this._container.querySelector(Kh);g&&g.focus()}},M.RasterDEMTileSource=on,M.RasterTileSource=dn,M.ScaleControl=class{constructor(g){this._onMove=()=>{Ta(this._map,this._container,this.options)},this.setUnit=e=>{this.options.unit=e,Ta(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Ru),g)}getDefaultPosition(){return"bottom-left"}onAdd(g){return this._map=g,this._container=le.create("div","maplibregl-ctrl maplibregl-ctrl-scale",g.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){le.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},M.ScrollZoomHandler=hn,M.Style=Zu,M.TerrainControl=class{constructor(g){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=g}onAdd(g){return this._map=g,this._container=le.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=le.create("button","maplibregl-ctrl-terrain",this._container),le.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){le.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},M.TwoFingersTouchPitchHandler=oc,M.TwoFingersTouchRotateHandler=lr,M.TwoFingersTouchZoomHandler=wa,M.TwoFingersTouchZoomRotateHandler=Os,M.VectorTileSource=Hr,M.VideoSource=kn,M.addSourceType=(g,e)=>u._(void 0,void 0,void 0,function*(){if(Wn(g))throw new Error(`A source type called "${g}" already exists.`);((r,a)=>{Un[r]=a})(g,e)}),M.clearPrewarmedResources=function(){const g=ur;g&&(g.isPreloaded()&&g.numActive()===1?(g.release(Oe),ur=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},M.createTileMesh=Fa,M.getMaxParallelImageRequests=function(){return u.a.MAX_PARALLEL_IMAGE_REQUESTS},M.getRTLTextPluginStatus=function(){return Bn().getRTLTextPluginStatus()},M.getVersion=function(){return aa},M.getWorkerCount=function(){return ct.workerCount},M.getWorkerUrl=function(){return u.a.WORKER_URL},M.importScriptInWorkers=function(g){return fr().broadcast("IS",g)},M.prewarm=function(){ir().acquire(Oe)},M.setMaxParallelImageRequests=function(g){u.a.MAX_PARALLEL_IMAGE_REQUESTS=g},M.setRTLTextPlugin=function(g,e){return Bn().setRTLTextPlugin(g,e)},M.setWorkerCount=function(g){ct.workerCount=g},M.setWorkerUrl=function(g){u.a.WORKER_URL=g}});var O=p;return O})}(Xg)),Xg.exports}var LP=zP();const Hp=py(LP);var Ic=Uint8Array,em=Uint16Array,DP=Int32Array,O1=new Ic([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),F1=new Ic([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),OP=new Ic([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),B1=function(c,m){for(var p=new em(31),T=0;T<31;++T)p[T]=m+=1<<c[T-1];for(var P=new DP(p[30]),T=1;T<30;++T)for(var O=p[T];O<p[T+1];++O)P[O]=O-p[T]<<5|T;return{b:p,r:P}},N1=B1(O1,2),$1=N1.b,FP=N1.r;$1[28]=258,FP[258]=28;var BP=B1(F1,0),NP=BP.b,W_=new em(32768);for(var Lo=0;Lo<32768;++Lo){var $f=(Lo&43690)>>1|(Lo&21845)<<1;$f=($f&52428)>>2|($f&13107)<<2,$f=($f&61680)>>4|($f&3855)<<4,W_[Lo]=(($f&65280)>>8|($f&255)<<8)>>1}var Wm=function(c,m,p){for(var T=c.length,P=0,O=new em(m);P<T;++P)c[P]&&++O[c[P]-1];var M=new em(m);for(P=1;P<m;++P)M[P]=M[P-1]+O[P-1]<<1;var u;if(p){u=new em(1<<m);var J=15-m;for(P=0;P<T;++P)if(c[P])for(var Y=P<<4|c[P],ve=m-c[P],de=M[c[P]-1]++<<ve,Te=de|(1<<ve)-1;de<=Te;++de)u[W_[de]>>J]=Y}else for(u=new em(T),P=0;P<T;++P)c[P]&&(u[P]=W_[M[c[P]-1]++]>>15-c[P]);return u},og=new Ic(288);for(var Lo=0;Lo<144;++Lo)og[Lo]=8;for(var Lo=144;Lo<256;++Lo)og[Lo]=9;for(var Lo=256;Lo<280;++Lo)og[Lo]=7;for(var Lo=280;Lo<288;++Lo)og[Lo]=8;var j1=new Ic(32);for(var Lo=0;Lo<32;++Lo)j1[Lo]=5;var $P=Wm(og,9,1),jP=Wm(j1,5,1),v_=function(c){for(var m=c[0],p=1;p<c.length;++p)c[p]>m&&(m=c[p]);return m},Oh=function(c,m,p){var T=m/8|0;return(c[T]|c[T+1]<<8)>>(m&7)&p},x_=function(c,m){var p=m/8|0;return(c[p]|c[p+1]<<8|c[p+2]<<16)>>(m&7)},UP=function(c){return(c+7)/8|0},VP=function(c,m,p){return(p==null||p>c.length)&&(p=c.length),new Ic(c.subarray(m,p))},ZP=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ec=function(c,m,p){var T=new Error(m||ZP[c]);if(T.code=c,Error.captureStackTrace&&Error.captureStackTrace(T,Ec),!p)throw T;return T},pv=function(c,m,p,T){var P=c.length,O=0;if(!P||m.f&&!m.l)return p||new Ic(0);var M=!p,u=M||m.i!=2,J=m.i;M&&(p=new Ic(P*3));var Y=function(Tr){var tn=p.length;if(Tr>tn){var $r=new Ic(Math.max(tn*2,Tr));$r.set(p),p=$r}},ve=m.f||0,de=m.p||0,Te=m.b||0,le=m.l,we=m.d,xe=m.m,Ze=m.n,mt=P*8;do{if(!le){ve=Oh(c,de,1);var kt=Oh(c,de+1,3);if(de+=3,kt)if(kt==1)le=$P,we=jP,xe=9,Ze=5;else if(kt==2){var nt=Oh(c,de,31)+257,yt=Oh(c,de+10,15)+4,ze=nt+Oh(c,de+5,31)+1;de+=14;for(var $e=new Ic(ze),re=new Ic(19),it=0;it<yt;++it)re[OP[it]]=Oh(c,de+it*3,7);de+=yt*3;for(var st=v_(re),zt=(1<<st)-1,tr=Wm(re,st,1),it=0;it<ze;){var Cr=tr[Oh(c,de,zt)];de+=Cr&15;var Tt=Cr>>4;if(Tt<16)$e[it++]=Tt;else{var xr=0,or=0;for(Tt==16?(or=3+Oh(c,de,3),de+=2,xr=$e[it-1]):Tt==17?(or=3+Oh(c,de,7),de+=3):Tt==18&&(or=11+Oh(c,de,127),de+=7);or--;)$e[it++]=xr}}var xt=$e.subarray(0,nt),Pt=$e.subarray(nt);xe=v_(xt),Ze=v_(Pt),le=Wm(xt,xe,1),we=Wm(Pt,Ze,1)}else Ec(1);else{var Tt=UP(de)+4,Je=c[Tt-4]|c[Tt-3]<<8,Qe=Tt+Je;if(Qe>P){J&&Ec(0);break}u&&Y(Te+Je),p.set(c.subarray(Tt,Qe),Te),m.b=Te+=Je,m.p=de=Qe*8,m.f=ve;continue}if(de>mt){J&&Ec(0);break}}u&&Y(Te+131072);for(var Wt=(1<<xe)-1,Oe=(1<<Ze)-1,ct=de;;ct=de){var xr=le[x_(c,de)&Wt],Ut=xr>>4;if(de+=xr&15,de>mt){J&&Ec(0);break}if(xr||Ec(2),Ut<256)p[Te++]=Ut;else if(Ut==256){ct=de,le=null;break}else{var ur=Ut-254;if(Ut>264){var it=Ut-257,At=O1[it];ur=Oh(c,de,(1<<At)-1)+$1[it],de+=At}var ir=we[x_(c,de)&Oe],Sr=ir>>4;ir||Ec(3),de+=ir&15;var Pt=NP[Sr];if(Sr>3){var At=F1[Sr];Pt+=x_(c,de)&(1<<At)-1,de+=At}if(de>mt){J&&Ec(0);break}u&&Y(Te+131072);var fr=Te+ur;if(Te<Pt){var pr=O-Pt,Qr=Math.min(Pt,fr);for(pr+Te<0&&Ec(3);Te<Qr;++Te)p[Te]=T[pr+Te]}for(;Te<fr;++Te)p[Te]=p[Te-Pt]}}m.l=le,m.p=ct,m.b=Te,m.f=ve,le&&(ve=1,m.m=xe,m.d=we,m.n=Ze)}while(!ve);return Te!=p.length&&M?VP(p,0,Te):p.subarray(0,Te)},GP=new Ic(0),WP=function(c){(c[0]!=31||c[1]!=139||c[2]!=8)&&Ec(6,"invalid gzip data");var m=c[3],p=10;m&4&&(p+=(c[10]|c[11]<<8)+2);for(var T=(m>>3&1)+(m>>4&1);T>0;T-=!c[p++]);return p+(m&2)},HP=function(c){var m=c.length;return(c[m-4]|c[m-3]<<8|c[m-2]<<16|c[m-1]<<24)>>>0},qP=function(c,m){return((c[0]&15)!=8||c[0]>>4>7||(c[0]<<8|c[1])%31)&&Ec(6,"invalid zlib data"),(c[1]>>5&1)==1&&Ec(6,"invalid zlib data: "+(c[1]&32?"need":"unexpected")+" dictionary"),(c[1]>>3&4)+2};function KP(c,m){return pv(c,{i:2},m,m)}function XP(c,m){var p=WP(c);return p+8>c.length&&Ec(6,"invalid gzip data"),pv(c.subarray(p,-8),{i:2},new Ic(HP(c)),m)}function YP(c,m){return pv(c.subarray(qP(c),-4),{i:2},m,m)}function QP(c,m){return c[0]==31&&c[1]==139&&c[2]==8?XP(c,m):(c[0]&15)!=8||c[0]>>4>7||(c[0]<<8|c[1])%31?KP(c,m):YP(c,m)}var JP=typeof TextDecoder<"u"&&new TextDecoder,eE=0;try{JP.decode(GP,{stream:!0}),eE=1}catch{}var tE=Object.defineProperty,Hm=Math.pow,Qi=(c,m)=>tE(c,"name",{value:m,configurable:!0}),Ja=(c,m,p)=>new Promise((T,P)=>{var O=J=>{try{u(p.next(J))}catch(Y){P(Y)}},M=J=>{try{u(p.throw(J))}catch(Y){P(Y)}},u=J=>J.done?T(J.value):Promise.resolve(J.value).then(O,M);u((p=p.apply(c,m)).next())});Qi((c,m)=>{let p=!1,T="",P=L.GridLayer.extend({createTile:Qi((O,M)=>{let u=document.createElement("img"),J=new AbortController,Y=J.signal;return u.cancel=()=>{J.abort()},p||(c.getHeader().then(ve=>{ve.tileType===1?console.error("Error: archive contains MVT vector tiles, but leafletRasterLayer is for displaying raster tiles. See https://github.com/protomaps/PMTiles/tree/main/js for details."):ve.tileType===2?T="image/png":ve.tileType===3?T="image/jpeg":ve.tileType===4?T="image/webp":ve.tileType===5&&(T="image/avif")}),p=!0),c.getZxy(O.z,O.x,O.y,Y).then(ve=>{if(ve){let de=new Blob([ve.data],{type:T}),Te=window.URL.createObjectURL(de);u.src=Te,u.cancel=void 0,M(void 0,u)}}).catch(ve=>{if(ve.name!=="AbortError")throw ve}),u},"createTile"),_removeTile:Qi(function(O){let M=this._tiles[O];M&&(M.el.cancel&&M.el.cancel(),M.el.width=0,M.el.height=0,M.el.deleted=!0,L.DomUtil.remove(M.el),delete this._tiles[O],this.fire("tileunload",{tile:M.el,coords:this._keyToTileCoords(O)}))},"_removeTile")});return new P(m)},"leafletRasterLayer");var rE=Qi(c=>(m,p)=>{if(p instanceof AbortController)return c(m,p);let T=new AbortController;return c(m,T).then(P=>p(void 0,P.data,P.cacheControl||"",P.expires||""),P=>p(P)).catch(P=>p(P)),{cancel:Qi(()=>T.abort(),"cancel")}},"v3compat"),U1=class{constructor(m){this.tilev4=Qi((p,T)=>Ja(this,null,function*(){if(p.type==="json"){let le=p.url.substr(10),we=this.tiles.get(le);if(we||(we=new $0(le),this.tiles.set(le,we)),this.metadata)return{data:yield we.getTileJson(p.url)};let xe=yield we.getHeader();return(xe.minLon>=xe.maxLon||xe.minLat>=xe.maxLat)&&console.error(`Bounds of PMTiles archive ${xe.minLon},${xe.minLat},${xe.maxLon},${xe.maxLat} are not valid.`),{data:{tiles:[`${p.url}/{z}/{x}/{y}`],minzoom:xe.minZoom,maxzoom:xe.maxZoom,bounds:[xe.minLon,xe.minLat,xe.maxLon,xe.maxLat]}}}let P=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),O=p.url.match(P);if(!O)throw new Error("Invalid PMTiles protocol URL");let M=O[1],u=this.tiles.get(M);u||(u=new $0(M),this.tiles.set(M,u));let J=O[2],Y=O[3],ve=O[4],de=yield u.getHeader(),Te=yield u==null?void 0:u.getZxy(+J,+Y,+ve,T.signal);if(Te)return{data:new Uint8Array(Te.data),cacheControl:Te.cacheControl,expires:Te.expires};if(de.tileType===1){if(this.errorOnMissingTile)throw new Error("Tile not found.");return{data:new Uint8Array}}return{data:null}}),"tilev4"),this.tile=rE(this.tilev4),this.tiles=new Map,this.metadata=(m==null?void 0:m.metadata)||!1,this.errorOnMissingTile=(m==null?void 0:m.errorOnMissingTile)||!1}add(m){this.tiles.set(m.source.getKey(),m)}get(m){return this.tiles.get(m)}};Qi(U1,"Protocol");var nE=U1;function V1(c,m){return(m>>>0)*4294967296+(c>>>0)}Qi(V1,"toNum");function Z1(c,m){let p=m.buf,T=p[m.pos++],P=(T&112)>>4;if(T<128||(T=p[m.pos++],P|=(T&127)<<3,T<128)||(T=p[m.pos++],P|=(T&127)<<10,T<128)||(T=p[m.pos++],P|=(T&127)<<17,T<128)||(T=p[m.pos++],P|=(T&127)<<24,T<128)||(T=p[m.pos++],P|=(T&1)<<31,T<128))return V1(c,P);throw new Error("Expected varint not more than 10 bytes")}Qi(Z1,"readVarintRemainder");function Jp(c){let m=c.buf,p=m[c.pos++],T=p&127;return p<128||(p=m[c.pos++],T|=(p&127)<<7,p<128)||(p=m[c.pos++],T|=(p&127)<<14,p<128)||(p=m[c.pos++],T|=(p&127)<<21,p<128)?T:(p=m[c.pos],T|=(p&15)<<28,Z1(T,c))}Qi(Jp,"readVarint");function mv(c,m,p,T){if(T===0){p===1&&(m[0]=c-1-m[0],m[1]=c-1-m[1]);let P=m[0];m[0]=m[1],m[1]=P}}Qi(mv,"rotate");function G1(c,m){let p=Hm(2,c),T=m,P=m,O=m,M=[0,0],u=1;for(;u<p;)T=1&O/2,P=1&(O^T),mv(u,M,T,P),M[0]+=u*T,M[1]+=u*P,O=O/4,u*=2;return[c,M[0],M[1]]}Qi(G1,"idOnLevel");var iE=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function W1(c,m,p){if(c>26)throw new Error("Tile zoom level exceeds max safe number limit (26)");if(m>Hm(2,c)-1||p>Hm(2,c)-1)throw new Error("tile x/y outside zoom level bounds");let T=iE[c],P=Hm(2,c),O=0,M=0,u=0,J=[m,p],Y=P/2;for(;Y>0;)O=(J[0]&Y)>0?1:0,M=(J[1]&Y)>0?1:0,u+=Y*Y*(3*O^M),mv(Y,J,O,M),Y=Y/2;return T+u}Qi(W1,"zxyToTileId");function oE(c){let m=0;for(let p=0;p<27;p++){let T=(1<<p)*(1<<p);if(m+T>c)return G1(p,c-m);m+=T}throw new Error("Tile zoom level exceeds max safe number limit (26)")}Qi(oE,"tileIdToZxy");var sE=(c=>(c[c.Unknown=0]="Unknown",c[c.None=1]="None",c[c.Gzip=2]="Gzip",c[c.Brotli=3]="Brotli",c[c.Zstd=4]="Zstd",c))(sE||{});function _y(c,m){return Ja(this,null,function*(){if(m===1||m===0)return c;if(m===2){if(typeof globalThis.DecompressionStream>"u")return QP(new Uint8Array(c));let p=new Response(c).body;if(!p)throw new Error("Failed to read response stream");let T=p.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(T).arrayBuffer()}throw new Error("Compression method not supported")})}Qi(_y,"defaultDecompress");var aE=(c=>(c[c.Unknown=0]="Unknown",c[c.Mvt=1]="Mvt",c[c.Png=2]="Png",c[c.Jpeg=3]="Jpeg",c[c.Webp=4]="Webp",c[c.Avif=5]="Avif",c))(aE||{});function H1(c){return c===1?".mvt":c===2?".png":c===3?".jpg":c===4?".webp":c===5?".avif":""}Qi(H1,"tileTypeExt");var lE=127;function q1(c,m){let p=0,T=c.length-1;for(;p<=T;){let P=T+p>>1,O=m-c[P].tileId;if(O>0)p=P+1;else if(O<0)T=P-1;else return c[P]}return T>=0&&(c[T].runLength===0||m-c[T].tileId<c[T].runLength)?c[T]:null}Qi(q1,"findTile");var uE=class{constructor(m){this.file=m}getKey(){return this.file.name}getBytes(m,p){return Ja(this,null,function*(){return{data:yield this.file.slice(m,m+p).arrayBuffer()}})}};Qi(uE,"FileSource");var K1=class{constructor(m,p=new Headers){this.url=m,this.customHeaders=p,this.mustReload=!1;let T="";"navigator"in globalThis&&(T=globalThis.navigator.userAgent||"");let P=T.indexOf("Windows")>-1,O=/Chrome|Chromium|Edg|OPR|Brave/.test(T);this.chromeWindowsNoCache=!1,P&&O&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(m){this.customHeaders=m}getBytes(m,p,T,P){return Ja(this,null,function*(){let O,M;T?M=T:(O=new AbortController,M=O.signal);let u=new Headers(this.customHeaders);u.set("range",`bytes=${m}-${m+p-1}`);let J;this.mustReload?J="reload":this.chromeWindowsNoCache&&(J="no-store");let Y=yield fetch(this.url,{signal:M,cache:J,headers:u});if(m===0&&Y.status===416){let Te=Y.headers.get("Content-Range");if(!Te||!Te.startsWith("bytes */"))throw new Error("Missing content-length on 416 response");let le=+Te.substr(8);Y=yield fetch(this.url,{signal:M,cache:"reload",headers:{range:`bytes=0-${le-1}`}})}let ve=Y.headers.get("Etag");if(ve!=null&&ve.startsWith("W/")&&(ve=null),Y.status===416||P&&ve&&ve!==P)throw this.mustReload=!0,new H_(`Server returned non-matching ETag ${P} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(Y.status>=300)throw new Error(`Bad response code: ${Y.status}`);let de=Y.headers.get("Content-Length");if(Y.status===200&&(!de||+de>p))throw O&&O.abort(),new Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield Y.arrayBuffer(),etag:ve||void 0,cacheControl:Y.headers.get("Cache-Control")||void 0,expires:Y.headers.get("Expires")||void 0}})}};Qi(K1,"FetchSource");var cE=K1;function nh(c,m){let p=c.getUint32(m+4,!0),T=c.getUint32(m+0,!0);return p*Hm(2,32)+T}Qi(nh,"getUint64");function X1(c,m){let p=new DataView(c),T=p.getUint8(7);if(T>3)throw new Error(`Archive is spec version ${T} but this library supports up to spec version 3`);return{specVersion:T,rootDirectoryOffset:nh(p,8),rootDirectoryLength:nh(p,16),jsonMetadataOffset:nh(p,24),jsonMetadataLength:nh(p,32),leafDirectoryOffset:nh(p,40),leafDirectoryLength:nh(p,48),tileDataOffset:nh(p,56),tileDataLength:nh(p,64),numAddressedTiles:nh(p,72),numTileEntries:nh(p,80),numTileContents:nh(p,88),clustered:p.getUint8(96)===1,internalCompression:p.getUint8(97),tileCompression:p.getUint8(98),tileType:p.getUint8(99),minZoom:p.getUint8(100),maxZoom:p.getUint8(101),minLon:p.getInt32(102,!0)/1e7,minLat:p.getInt32(106,!0)/1e7,maxLon:p.getInt32(110,!0)/1e7,maxLat:p.getInt32(114,!0)/1e7,centerZoom:p.getUint8(118),centerLon:p.getInt32(119,!0)/1e7,centerLat:p.getInt32(123,!0)/1e7,etag:m}}Qi(X1,"bytesToHeader");function gv(c){let m={buf:new Uint8Array(c),pos:0},p=Jp(m),T=[],P=0;for(let O=0;O<p;O++){let M=Jp(m);T.push({tileId:P+M,offset:0,length:0,runLength:1}),P+=M}for(let O=0;O<p;O++)T[O].runLength=Jp(m);for(let O=0;O<p;O++)T[O].length=Jp(m);for(let O=0;O<p;O++){let M=Jp(m);M===0&&O>0?T[O].offset=T[O-1].offset+T[O-1].length:T[O].offset=M-1}return T}Qi(gv,"deserializeIndex");var Y1=class extends Error{};Qi(Y1,"EtagMismatch");var H_=Y1;function yv(c,m){return Ja(this,null,function*(){let p=yield c.getBytes(0,16384);if(new DataView(p.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");let T=p.data.slice(0,lE),P=X1(T,p.etag),O=p.data.slice(P.rootDirectoryOffset,P.rootDirectoryOffset+P.rootDirectoryLength),M=`${c.getKey()}|${P.etag||""}|${P.rootDirectoryOffset}|${P.rootDirectoryLength}`,u=gv(yield m(O,P.internalCompression));return[P,[M,u.length,u]]})}Qi(yv,"getHeaderAndRoot");function _v(c,m,p,T,P){return Ja(this,null,function*(){let O=yield c.getBytes(p,T,void 0,P.etag),M=yield m(O.data,P.internalCompression),u=gv(M);if(u.length===0)throw new Error("Empty directory is invalid");return u})}Qi(_v,"getDirectory");var hE=class{constructor(m=100,p=!0,T=_y){this.cache=new Map,this.maxCacheEntries=m,this.counter=1,this.decompress=T}getHeader(m){return Ja(this,null,function*(){let p=m.getKey(),T=this.cache.get(p);if(T)return T.lastUsed=this.counter++,T.data;let P=yield yv(m,this.decompress);return P[1]&&this.cache.set(P[1][0],{lastUsed:this.counter++,data:P[1][2]}),this.cache.set(p,{lastUsed:this.counter++,data:P[0]}),this.prune(),P[0]})}getDirectory(m,p,T,P){return Ja(this,null,function*(){let O=`${m.getKey()}|${P.etag||""}|${p}|${T}`,M=this.cache.get(O);if(M)return M.lastUsed=this.counter++,M.data;let u=yield _v(m,this.decompress,p,T,P);return this.cache.set(O,{lastUsed:this.counter++,data:u}),this.prune(),u})}prune(){if(this.cache.size>this.maxCacheEntries){let m=1/0,p;this.cache.forEach((T,P)=>{T.lastUsed<m&&(m=T.lastUsed,p=P)}),p&&this.cache.delete(p)}}invalidate(m){return Ja(this,null,function*(){this.cache.delete(m.getKey())})}};Qi(hE,"ResolvedValueCache");var Q1=class{constructor(m=100,p=!0,T=_y){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=m,this.counter=1,this.decompress=T}getHeader(m){return Ja(this,null,function*(){let p=m.getKey(),T=this.cache.get(p);if(T)return T.lastUsed=this.counter++,yield T.data;let P=new Promise((O,M)=>{yv(m,this.decompress).then(u=>{u[1]&&this.cache.set(u[1][0],{lastUsed:this.counter++,data:Promise.resolve(u[1][2])}),O(u[0]),this.prune()}).catch(u=>{M(u)})});return this.cache.set(p,{lastUsed:this.counter++,data:P}),P})}getDirectory(m,p,T,P){return Ja(this,null,function*(){let O=`${m.getKey()}|${P.etag||""}|${p}|${T}`,M=this.cache.get(O);if(M)return M.lastUsed=this.counter++,yield M.data;let u=new Promise((J,Y)=>{_v(m,this.decompress,p,T,P).then(ve=>{J(ve),this.prune()}).catch(ve=>{Y(ve)})});return this.cache.set(O,{lastUsed:this.counter++,data:u}),u})}prune(){if(this.cache.size>=this.maxCacheEntries){let m=1/0,p;this.cache.forEach((T,P)=>{T.lastUsed<m&&(m=T.lastUsed,p=P)}),p&&this.cache.delete(p)}}invalidate(m){return Ja(this,null,function*(){let p=m.getKey();if(this.invalidations.get(p))return yield this.invalidations.get(p);this.cache.delete(m.getKey());let T=new Promise((P,O)=>{this.getHeader(m).then(M=>{P(),this.invalidations.delete(p)}).catch(M=>{O(M)})});this.invalidations.set(p,T)})}};Qi(Q1,"SharedPromiseCache");var dE=Q1,J1=class{constructor(m,p,T){typeof m=="string"?this.source=new cE(m):this.source=m,T?this.decompress=T:this.decompress=_y,p?this.cache=p:this.cache=new dE}getHeader(){return Ja(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(m,p,T,P){return Ja(this,null,function*(){let O=W1(m,p,T),M=yield this.cache.getHeader(this.source);if(m<M.minZoom||m>M.maxZoom)return;let u=M.rootDirectoryOffset,J=M.rootDirectoryLength;for(let Y=0;Y<=3;Y++){let ve=yield this.cache.getDirectory(this.source,u,J,M),de=q1(ve,O);if(de){if(de.runLength>0){let Te=yield this.source.getBytes(M.tileDataOffset+de.offset,de.length,P,M.etag);return{data:yield this.decompress(Te.data,M.tileCompression),cacheControl:Te.cacheControl,expires:Te.expires}}u=M.leafDirectoryOffset+de.offset,J=de.length}else return}throw new Error("Maximum directory depth exceeded")})}getZxy(m,p,T,P){return Ja(this,null,function*(){try{return yield this.getZxyAttempt(m,p,T,P)}catch(O){if(O instanceof H_)return this.cache.invalidate(this.source),yield this.getZxyAttempt(m,p,T,P);throw O}})}getMetadataAttempt(){return Ja(this,null,function*(){let m=yield this.cache.getHeader(this.source),p=yield this.source.getBytes(m.jsonMetadataOffset,m.jsonMetadataLength,void 0,m.etag),T=yield this.decompress(p.data,m.internalCompression),P=new TextDecoder("utf-8");return JSON.parse(P.decode(T))})}getMetadata(){return Ja(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(m){if(m instanceof H_)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw m}})}getTileJson(m){return Ja(this,null,function*(){let p=yield this.getHeader(),T=yield this.getMetadata(),P=H1(p.tileType);return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${m}/{z}/{x}/{y}${P}`],vector_layers:T.vector_layers,attribution:T.attribution,description:T.description,name:T.name,version:T.version,bounds:[p.minLon,p.minLat,p.maxLon,p.maxLat],center:[p.centerLon,p.centerLat,p.centerZoom],minzoom:p.minZoom,maxzoom:p.maxZoom}})}};Qi(J1,"PMTiles");var $0=J1,jm={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var fE=jm.exports,j0;function pE(){return j0||(j0=1,function(c,m){(function(){var p,T="4.17.21",P=200,O="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",M="Expected a function",u="Invalid `variable` option passed into `_.template`",J="__lodash_hash_undefined__",Y=500,ve="__lodash_placeholder__",de=1,Te=2,le=4,we=1,xe=2,Ze=1,mt=2,kt=4,Tt=8,Je=16,Qe=32,nt=64,yt=128,ze=256,$e=512,re=30,it="...",st=800,zt=16,tr=1,Cr=2,xr=3,or=1/0,xt=9007199254740991,Pt=17976931348623157e292,Wt=NaN,Oe=4294967295,ct=Oe-1,Ut=Oe>>>1,ur=[["ary",yt],["bind",Ze],["bindKey",mt],["curry",Tt],["curryRight",Je],["flip",$e],["partial",Qe],["partialRight",nt],["rearg",ze]],At="[object Arguments]",ir="[object Array]",Sr="[object AsyncFunction]",fr="[object Boolean]",pr="[object Date]",Qr="[object DOMException]",Tr="[object Error]",tn="[object Function]",$r="[object GeneratorFunction]",br="[object Map]",nn="[object Number]",Hr="[object Null]",dn="[object Object]",on="[object Promise]",bn="[object Proxy]",sn="[object RegExp]",kn="[object Set]",wr="[object String]",Un="[object Symbol]",Wn="[object Undefined]",Si="[object WeakMap]",Jn="[object WeakSet]",Hn="[object ArrayBuffer]",Bn="[object DataView]",Ji="[object Float32Array]",Gi="[object Float64Array]",Vi="[object Int8Array]",ei="[object Int16Array]",ii="[object Int32Array]",mo="[object Uint8Array]",et="[object Uint8ClampedArray]",se="[object Uint16Array]",ae="[object Uint32Array]",ge=/\b__p \+= '';/g,Ie=/\b(__p \+=) '' \+/g,Ue=/(__e\(.*?\)|\b__t\)) \+\n'';/g,fe=/&(?:amp|lt|gt|quot|#39);/g,qe=/[&<>"']/g,We=RegExp(fe.source),rt=RegExp(qe.source),dt=/<%-([\s\S]+?)%>/g,Xe=/<%([\s\S]+?)%>/g,Lt=/<%=([\s\S]+?)%>/g,Xt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,cr=/^\w*$/,Mr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,qr=/[\\^$.*+?()[\]{}|]/g,Nr=RegExp(qr.source),St=/^\s+/,wn=/\s/,yn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Sn=/\{\n\/\* \[wrapped with (.+)\] \*/,Fr=/,? & /,Ot=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Or=/[()=,{}\[\]\/\s]/,rn=/\\(\\)?/g,Vn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Zn=/\w*$/,Po=/^[-+]0x[0-9a-f]+$/i,un=/^0b[01]+$/i,Ys=/^\[object .+?Constructor\]$/,Qs=/^0o[0-7]+$/i,Ps=/^(?:0|[1-9]\d*)$/,el=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Zo=/($^)/,La=/['\n\r\u2028\u2029\\]/g,cn="\\ud800-\\udfff",li="\\u0300-\\u036f",qn="\\ufe20-\\ufe2f",Da="\\u20d0-\\u20ff",is=li+qn+Da,Kl="\\u2700-\\u27bf",Do="a-z\\xdf-\\xf6\\xf8-\\xff",eo="\\xac\\xb1\\xd7\\xf7",os="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",tl="\\u2000-\\u206f",go=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ga="A-Z\\xc0-\\xd6\\xd8-\\xde",Xl="\\ufe0e\\ufe0f",pu=eo+os+tl+go,ya="[']",Yl="["+cn+"]",Oa="["+pu+"]",Es="["+is+"]",B="\\d+",Q="["+Kl+"]",he="["+Do+"]",Ee="[^"+cn+pu+B+Kl+Do+ga+"]",gt="\\ud83c[\\udffb-\\udfff]",ut="(?:"+Es+"|"+gt+")",Dt="[^"+cn+"]",sr="(?:\\ud83c[\\udde6-\\uddff]){2}",mr="[\\ud800-\\udbff][\\udc00-\\udfff]",kr="["+ga+"]",yr="\\u200d",Nn="(?:"+he+"|"+Ee+")",yi="(?:"+kr+"|"+Ee+")",to="(?:"+ya+"(?:d|ll|m|re|s|t|ve))?",Jr="(?:"+ya+"(?:D|LL|M|RE|S|T|VE))?",ss=ut+"?",Eo="["+Xl+"]?",Io="(?:"+yr+"(?:"+[Dt,sr,mr].join("|")+")"+Eo+ss+")*",ui="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ci="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Dn=Eo+ss+Io,Pi="(?:"+[Q,sr,mr].join("|")+")"+Dn,On="(?:"+[Dt+Es+"?",Es,sr,mr,Yl].join("|")+")",mu=RegExp(ya,"g"),Oo=RegExp(Es,"g"),ro=RegExp(gt+"(?="+gt+")|"+On+Dn,"g"),as=RegExp([kr+"?"+he+"+"+to+"(?="+[Oa,kr,"$"].join("|")+")",yi+"+"+Jr+"(?="+[Oa,kr+Nn,"$"].join("|")+")",kr+"?"+Nn+"+"+to,kr+"+"+Jr,ci,ui,B,Pi].join("|"),"g"),ls=RegExp("["+yr+cn+is+Xl+"]"),Ln=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,hi=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Lr=-1,gr={};gr[Ji]=gr[Gi]=gr[Vi]=gr[ei]=gr[ii]=gr[mo]=gr[et]=gr[se]=gr[ae]=!0,gr[At]=gr[ir]=gr[Hn]=gr[fr]=gr[Bn]=gr[pr]=gr[Tr]=gr[tn]=gr[br]=gr[nn]=gr[dn]=gr[sn]=gr[kn]=gr[wr]=gr[Si]=!1;var Pn={};Pn[At]=Pn[ir]=Pn[Hn]=Pn[Bn]=Pn[fr]=Pn[pr]=Pn[Ji]=Pn[Gi]=Pn[Vi]=Pn[ei]=Pn[ii]=Pn[br]=Pn[nn]=Pn[dn]=Pn[sn]=Pn[kn]=Pn[wr]=Pn[Un]=Pn[mo]=Pn[et]=Pn[se]=Pn[ae]=!0,Pn[Tr]=Pn[tn]=Pn[Si]=!1;var Kr={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},us={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},no={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},rl={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},gu=parseFloat,Fa=parseInt,_a=typeof Dg=="object"&&Dg&&Dg.Object===Object&&Dg,Ql=typeof self=="object"&&self&&self.Object===Object&&self,di=_a||Ql||Function("return this")(),nl=m&&!m.nodeType&&m,cs=nl&&!0&&c&&!c.nodeType&&c,il=cs&&cs.exports===nl,_i=il&&_a.process,Fi=function(){try{var tt=cs&&cs.require&&cs.require("util").types;return tt||_i&&_i.binding&&_i.binding("util")}catch{}}(),Ba=Fi&&Fi.isArrayBuffer,Ai=Fi&&Fi.isDate,Ei=Fi&&Fi.isMap,va=Fi&&Fi.isRegExp,ol=Fi&&Fi.isSet,Vu=Fi&&Fi.isTypedArray;function yo(tt,Bt,wt){switch(wt.length){case 0:return tt.call(Bt);case 1:return tt.call(Bt,wt[0]);case 2:return tt.call(Bt,wt[0],wt[1]);case 3:return tt.call(Bt,wt[0],wt[1],wt[2])}return tt.apply(Bt,wt)}function Bi(tt,Bt,wt,Ir){for(var mn=-1,Xn=tt==null?0:tt.length;++mn<Xn;){var oo=tt[mn];Bt(Ir,oo,wt(oo),tt)}return Ir}function Ri(tt,Bt){for(var wt=-1,Ir=tt==null?0:tt.length;++wt<Ir&&Bt(tt[wt],wt,tt)!==!1;);return tt}function hs(tt,Bt){for(var wt=tt==null?0:tt.length;wt--&&Bt(tt[wt],wt,tt)!==!1;);return tt}function Na(tt,Bt){for(var wt=-1,Ir=tt==null?0:tt.length;++wt<Ir;)if(!Bt(tt[wt],wt,tt))return!1;return!0}function Is(tt,Bt){for(var wt=-1,Ir=tt==null?0:tt.length,mn=0,Xn=[];++wt<Ir;){var oo=tt[wt];Bt(oo,wt,tt)&&(Xn[mn++]=oo)}return Xn}function Mo(tt,Bt){var wt=tt==null?0:tt.length;return!!wt&&ja(tt,Bt,0)>-1}function Zi(tt,Bt,wt){for(var Ir=-1,mn=tt==null?0:tt.length;++Ir<mn;)if(wt(Bt,tt[Ir]))return!0;return!1}function Kn(tt,Bt){for(var wt=-1,Ir=tt==null?0:tt.length,mn=Array(Ir);++wt<Ir;)mn[wt]=Bt(tt[wt],wt,tt);return mn}function $a(tt,Bt){for(var wt=-1,Ir=Bt.length,mn=tt.length;++wt<Ir;)tt[mn+wt]=Bt[wt];return tt}function Zu(tt,Bt,wt,Ir){var mn=-1,Xn=tt==null?0:tt.length;for(Ir&&Xn&&(wt=tt[++mn]);++mn<Xn;)wt=Bt(wt,tt[mn],mn,tt);return wt}function Bh(tt,Bt,wt,Ir){var mn=tt==null?0:tt.length;for(Ir&&mn&&(wt=tt[--mn]);mn--;)wt=Bt(wt,tt[mn],mn,tt);return wt}function yu(tt,Bt){for(var wt=-1,Ir=tt==null?0:tt.length;++wt<Ir;)if(Bt(tt[wt],wt,tt))return!0;return!1}var Nh=$("length");function _u(tt){return tt.split("")}function sl(tt){return tt.match(Ot)||[]}function kl(tt,Bt,wt){var Ir;return wt(tt,function(mn,Xn,oo){if(Bt(mn,Xn,oo))return Ir=Xn,!1}),Ir}function Al(tt,Bt,wt,Ir){for(var mn=tt.length,Xn=wt+(Ir?1:-1);Ir?Xn--:++Xn<mn;)if(Bt(tt[Xn],Xn,tt))return Xn;return-1}function ja(tt,Bt,wt){return Bt===Bt?Lc(tt,Bt,wt):Al(tt,Gu,wt)}function Ms(tt,Bt,wt,Ir){for(var mn=wt-1,Xn=tt.length;++mn<Xn;)if(Ir(tt[mn],Bt))return mn;return-1}function Gu(tt){return tt!==tt}function Wu(tt,Bt){var wt=tt==null?0:tt.length;return wt?_t(tt,Bt)/wt:Wt}function $(tt){return function(Bt){return Bt==null?p:Bt[tt]}}function q(tt){return function(Bt){return tt==null?p:tt[Bt]}}function ue(tt,Bt,wt,Ir,mn){return mn(tt,function(Xn,oo,ti){wt=Ir?(Ir=!1,Xn):Bt(wt,Xn,oo,ti)}),wt}function Pe(tt,Bt){var wt=tt.length;for(tt.sort(Bt);wt--;)tt[wt]=tt[wt].value;return tt}function _t(tt,Bt){for(var wt,Ir=-1,mn=tt.length;++Ir<mn;){var Xn=Bt(tt[Ir]);Xn!==p&&(wt=wt===p?Xn:wt+Xn)}return wt}function ot(tt,Bt){for(var wt=-1,Ir=Array(tt);++wt<tt;)Ir[wt]=Bt(wt);return Ir}function Nt(tt,Bt){return Kn(Bt,function(wt){return[wt,tt[wt]]})}function ar(tt){return tt&&tt.slice(0,Dc(tt)+1).replace(St,"")}function Br(tt){return function(Bt){return tt(Bt)}}function pn(tt,Bt){return Kn(Bt,function(wt){return tt[wt]})}function Xr(tt,Bt){return tt.has(Bt)}function fi(tt,Bt){for(var wt=-1,Ir=tt.length;++wt<Ir&&ja(Bt,tt[wt],0)>-1;);return wt}function Fo(tt,Bt){for(var wt=tt.length;wt--&&ja(Bt,tt[wt],0)>-1;);return wt}function ks(tt,Bt){for(var wt=tt.length,Ir=0;wt--;)tt[wt]===Bt&&++Ir;return Ir}var ds=q(Kr),Js=q(us);function zc(tt){return"\\"+rl[tt]}function al(tt,Bt){return tt==null?p:tt[Bt]}function ll(tt){return ls.test(tt)}function uf(tt){return Ln.test(tt)}function $h(tt){for(var Bt,wt=[];!(Bt=tt.next()).done;)wt.push(Bt.value);return wt}function jh(tt){var Bt=-1,wt=Array(tt.size);return tt.forEach(function(Ir,mn){wt[++Bt]=[mn,Ir]}),wt}function Id(tt,Bt){return function(wt){return tt(Bt(wt))}}function ea(tt,Bt){for(var wt=-1,Ir=tt.length,mn=0,Xn=[];++wt<Ir;){var oo=tt[wt];(oo===Bt||oo===ve)&&(tt[wt]=ve,Xn[mn++]=wt)}return Xn}function Jl(tt){var Bt=-1,wt=Array(tt.size);return tt.forEach(function(Ir){wt[++Bt]=Ir}),wt}function cf(tt){var Bt=-1,wt=Array(tt.size);return tt.forEach(function(Ir){wt[++Bt]=[Ir,Ir]}),wt}function Lc(tt,Bt,wt){for(var Ir=wt-1,mn=tt.length;++Ir<mn;)if(tt[Ir]===Bt)return Ir;return-1}function hf(tt,Bt,wt){for(var Ir=wt+1;Ir--;)if(tt[Ir]===Bt)return Ir;return Ir}function Tn(tt){return ll(tt)?Vh(tt):Nh(tt)}function io(tt){return ll(tt)?Md(tt):_u(tt)}function Dc(tt){for(var Bt=tt.length;Bt--&&wn.test(tt.charAt(Bt)););return Bt}var Uh=q(no);function Vh(tt){for(var Bt=ro.lastIndex=0;ro.test(tt);)++Bt;return Bt}function Md(tt){return tt.match(ro)||[]}function kd(tt){return tt.match(as)||[]}var Hu=function tt(Bt){Bt=Bt==null?di:vu.defaults(di.Object(),Bt,vu.pick(di,hi));var wt=Bt.Array,Ir=Bt.Date,mn=Bt.Error,Xn=Bt.Function,oo=Bt.Math,ti=Bt.Object,xu=Bt.RegExp,Zh=Bt.String,ta=Bt.TypeError,As=wt.prototype,Oc=Xn.prototype,Rs=ti.prototype,Go=Bt["__core-js_shared__"],Fc=Oc.toString,Gn=Rs.hasOwnProperty,bu=0,Rl=function(){var h=/[^.]+$/.exec(Go&&Go.keys&&Go.keys.IE_PROTO||"");return h?"Symbol(src)_1."+h:""}(),wu=Rs.toString,qu=Fc.call(ti),Bc=di._,dh=xu("^"+Fc.call(Gn).replace(qr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Su=il?Bt.Buffer:p,ra=Bt.Symbol,zl=Bt.Uint8Array,Gh=Su?Su.allocUnsafe:p,na=Id(ti.getPrototypeOf,ti),xn=ti.create,Ku=Rs.propertyIsEnumerable,Xu=As.splice,Wh=ra?ra.isConcatSpreadable:p,xa=ra?ra.iterator:p,Yu=ra?ra.toStringTag:p,fh=function(){try{var h=Vl(ti,"defineProperty");return h({},"",{}),h}catch{}}(),Ad=Bt.clearTimeout!==di.clearTimeout&&Bt.clearTimeout,zi=Ir&&Ir.now!==di.Date.now&&Ir.now,Nc=Bt.setTimeout!==di.setTimeout&&Bt.setTimeout,ul=oo.ceil,cl=oo.floor,$c=ti.getOwnPropertySymbols,jc=Su?Su.isBuffer:p,Tu=Bt.isFinite,Cu=As.join,Ll=Id(ti.keys,ti),Ni=oo.max,Bo=oo.min,ph=Ir.now,mh=Bt.parseInt,Uc=oo.random,Qu=As.reverse,Ju=Vl(Bt,"DataView"),Pu=Vl(Bt,"Map"),Vc=Vl(Bt,"Promise"),hl=Vl(Bt,"Set"),Eu=Vl(Bt,"WeakMap"),ec=Vl(ti,"create"),Iu=Eu&&new Eu,Ti={},Dl=wl(Ju),_o=wl(Pu),Hh=wl(Vc),Ol=wl(hl),Ua=wl(Eu),Wo=ra?ra.prototype:p,zs=Wo?Wo.valueOf:p,Mu=Wo?Wo.toString:p;function ce(h){if(zo(h)&&!Mn(h)&&!(h instanceof gn)){if(h instanceof Ho)return h;if(Gn.call(h,"__wrapped__"))return Ip(h)}return new Ho(h)}var tc=function(){function h(){}return function(_){if(!So(_))return{};if(xn)return xn(_);h.prototype=_;var I=new h;return h.prototype=p,I}}();function dl(){}function Ho(h,_){this.__wrapped__=h,this.__actions__=[],this.__chain__=!!_,this.__index__=0,this.__values__=p}ce.templateSettings={escape:dt,evaluate:Xe,interpolate:Lt,variable:"",imports:{_:ce}},ce.prototype=dl.prototype,ce.prototype.constructor=ce,Ho.prototype=tc(dl.prototype),Ho.prototype.constructor=Ho;function gn(h){this.__wrapped__=h,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Oe,this.__views__=[]}function eu(){var h=new gn(this.__wrapped__);return h.__actions__=Us(this.__actions__),h.__dir__=this.__dir__,h.__filtered__=this.__filtered__,h.__iteratees__=Us(this.__iteratees__),h.__takeCount__=this.__takeCount__,h.__views__=Us(this.__views__),h}function so(){if(this.__filtered__){var h=new gn(this);h.__dir__=-1,h.__filtered__=!0}else h=this.clone(),h.__dir__*=-1;return h}function fl(){var h=this.__wrapped__.value(),_=this.__dir__,I=Mn(h),V=_<0,te=I?h.length:0,ye=yf(0,te,this.__views__),Be=ye.start,He=ye.end,lt=He-Be,Gt=V?He:Be-1,Ht=this.__iteratees__,rr=Ht.length,Ar=0,en=Bo(lt,this.__takeCount__);if(!I||!V&&te==lt&&en==lt)return An(h,this.__actions__);var _n=[];e:for(;lt--&&Ar<en;){Gt+=_;for(var jn=-1,vn=h[Gt];++jn<rr;){var ni=Ht[jn],mi=ni.iteratee,Cc=ni.type,du=mi(vn);if(Cc==Cr)vn=du;else if(!du){if(Cc==tr)continue e;break e}}_n[Ar++]=vn}return _n}gn.prototype=tc(dl.prototype),gn.prototype.constructor=gn;function fs(h){var _=-1,I=h==null?0:h.length;for(this.clear();++_<I;){var V=h[_];this.set(V[0],V[1])}}function Ii(){this.__data__=ec?ec(null):{},this.size=0}function Ci(h){var _=this.has(h)&&delete this.__data__[h];return this.size-=_?1:0,_}function ba(h){var _=this.__data__;if(ec){var I=_[h];return I===J?p:I}return Gn.call(_,h)?_[h]:p}function No(h){var _=this.__data__;return ec?_[h]!==p:Gn.call(_,h)}function qo(h,_){var I=this.__data__;return this.size+=this.has(h)?0:1,I[h]=ec&&_===p?J:_,this}fs.prototype.clear=Ii,fs.prototype.delete=Ci,fs.prototype.get=ba,fs.prototype.has=No,fs.prototype.set=qo;function ps(h){var _=-1,I=h==null?0:h.length;for(this.clear();++_<I;){var V=h[_];this.set(V[0],V[1])}}function pl(){this.__data__=[],this.size=0}function Ls(h){var _=this.__data__,I=Xo(_,h);if(I<0)return!1;var V=_.length-1;return I==V?_.pop():Xu.call(_,I,1),--this.size,!0}function ko(h){var _=this.__data__,I=Xo(_,h);return I<0?p:_[I][1]}function Va(h){return Xo(this.__data__,h)>-1}function rc(h,_){var I=this.__data__,V=Xo(I,h);return V<0?(++this.size,I.push([h,_])):I[V][1]=_,this}ps.prototype.clear=pl,ps.prototype.delete=Ls,ps.prototype.get=ko,ps.prototype.has=Va,ps.prototype.set=rc;function Wi(h){var _=-1,I=h==null?0:h.length;for(this.clear();++_<I;){var V=h[_];this.set(V[0],V[1])}}function nc(){this.size=0,this.__data__={hash:new fs,map:new(Pu||ps),string:new fs}}function Za(h){var _=rd(this,h).delete(h);return this.size-=_?1:0,_}function qh(h){return rd(this,h).get(h)}function gh(h){return rd(this,h).has(h)}function yh(h,_){var I=rd(this,h),V=I.size;return I.set(h,_),this.size+=I.size==V?0:1,this}Wi.prototype.clear=nc,Wi.prototype.delete=Za,Wi.prototype.get=qh,Wi.prototype.has=gh,Wi.prototype.set=yh;function tu(h){var _=-1,I=h==null?0:h.length;for(this.__data__=new Wi;++_<I;)this.add(h[_])}function wa(h){return this.__data__.set(h,J),this}function Ds(h){return this.__data__.has(h)}tu.prototype.add=tu.prototype.push=wa,tu.prototype.has=Ds;function lr(h){var _=this.__data__=new ps(h);this.size=_.size}function ic(){this.__data__=new ps,this.size=0}function oc(h){var _=this.__data__,I=_.delete(h);return this.size=_.size,I}function Sa(h){return this.__data__.get(h)}function Ko(h){return this.__data__.has(h)}function ml(h,_){var I=this.__data__;if(I instanceof ps){var V=I.__data__;if(!Pu||V.length<P-1)return V.push([h,_]),this.size=++I.size,this;I=this.__data__=new Wi(V)}return I.set(h,_),this.size=I.size,this}lr.prototype.clear=ic,lr.prototype.delete=oc,lr.prototype.get=Sa,lr.prototype.has=Ko,lr.prototype.set=ml;function Ga(h,_){var I=Mn(h),V=!I&&Ah(h),te=!I&&!V&&vs(h),ye=!I&&!V&&!te&&Df(h),Be=I||V||te||ye,He=Be?ot(h.length,Zh):[],lt=He.length;for(var Gt in h)(_||Gn.call(h,Gt))&&!(Be&&(Gt=="length"||te&&(Gt=="offset"||Gt=="parent")||ye&&(Gt=="buffer"||Gt=="byteLength"||Gt=="byteOffset")||bi(Gt,lt)))&&He.push(Gt);return He}function hn(h){var _=h.length;return _?h[je(0,_-1)]:p}function Fl(h,_){return ad(Us(h),ru(_,0,h.length))}function df(h){return ad(Us(h))}function sc(h,_,I){(I!==p&&!Bu(h[_],I)||I===p&&!(_ in h))&&Bl(h,_,I)}function ku(h,_,I){var V=h[_];(!(Gn.call(h,_)&&Bu(V,I))||I===p&&!(_ in h))&&Bl(h,_,I)}function Xo(h,_){for(var I=h.length;I--;)if(Bu(h[I][0],_))return I;return-1}function Os(h,_,I,V){return gl(h,function(te,ye,Be){_(V,te,I(te),Be)}),V}function vi(h,_){return h&&Ea(_,F(_),h)}function Fs(h,_){return h&&Ea(_,j(_),h)}function Bl(h,_,I){_=="__proto__"&&fh?fh(h,_,{configurable:!0,enumerable:!0,value:I,writable:!0}):h[_]=I}function ac(h,_){for(var I=-1,V=_.length,te=wt(V),ye=h==null;++I<V;)te[I]=ye?p:f(h,_[I]);return te}function ru(h,_,I){return h===h&&(I!==p&&(h=h<=I?h:I),_!==p&&(h=h>=_?h:_)),h}function ia(h,_,I,V,te,ye){var Be,He=_&de,lt=_&Te,Gt=_&le;if(I&&(Be=te?I(h,V,te,ye):I(h)),Be!==p)return Be;if(!So(h))return h;var Ht=Mn(h);if(Ht){if(Be=Bd(h),!He)return Us(h,Be)}else{var rr=Vs(h),Ar=rr==tn||rr==$r;if(vs(h))return Ul(h,He);if(rr==dn||rr==At||Ar&&!te){if(Be=lt||Ar?{}:Zs(h),!He)return lt?Ha(h,Fs(Be,h)):zu(h,vi(Be,h))}else{if(!Pn[rr])return te?h:{};Be=Yf(h,rr,He)}}ye||(ye=new lr);var en=ye.get(h);if(en)return en;ye.set(h,Be),mp(h)?h.forEach(function(vn){Be.add(ia(vn,_,I,vn,h,ye))}):ym(h)&&h.forEach(function(vn,ni){Be.set(ni,ia(vn,_,I,ni,h,ye))});var _n=Gt?lt?td:Od:lt?j:F,jn=Ht?p:_n(h);return Ri(jn||h,function(vn,ni){jn&&(ni=vn,vn=h[ni]),ku(Be,ni,ia(vn,_,I,ni,h,ye))}),Be}function Nl(h){var _=F(h);return function(I){return oi(I,h,_)}}function oi(h,_,I){var V=I.length;if(h==null)return!V;for(h=ti(h);V--;){var te=I[V],ye=_[te],Be=h[te];if(Be===p&&!(te in h)||!ye(Be))return!1}return!0}function lc(h,_,I){if(typeof h!="function")throw new ta(M);return Ou(function(){h.apply(p,I)},_)}function Wa(h,_,I,V){var te=-1,ye=Mo,Be=!0,He=h.length,lt=[],Gt=_.length;if(!He)return lt;I&&(_=Kn(_,Br(I))),V?(ye=Zi,Be=!1):_.length>=P&&(ye=Xr,Be=!1,_=new tu(_));e:for(;++te<He;){var Ht=h[te],rr=I==null?Ht:I(Ht);if(Ht=V||Ht!==0?Ht:0,Be&&rr===rr){for(var Ar=Gt;Ar--;)if(_[Ar]===rr)continue e;lt.push(Ht)}else ye(_,rr,V)||lt.push(Ht)}return lt}var gl=xo(Bs),Rd=xo($l,!0);function Zc(h,_){var I=!0;return gl(h,function(V,te,ye){return I=!!_(V,te,ye),I}),I}function uc(h,_,I){for(var V=-1,te=h.length;++V<te;){var ye=h[V],Be=_(ye);if(Be!=null&&(He===p?Be===Be&&!su(Be):I(Be,He)))var He=Be,lt=ye}return lt}function ms(h,_,I,V){var te=h.length;for(I=zn(I),I<0&&(I=-I>te?0:te+I),V=V===p||V>te?te:zn(V),V<0&&(V+=te),V=I>V?0:xm(V);I<V;)h[I++]=_;return h}function Gc(h,_){var I=[];return gl(h,function(V,te,ye){_(V,te,ye)&&I.push(V)}),I}function dr(h,_,I,V,te){var ye=-1,Be=h.length;for(I||(I=Nd),te||(te=[]);++ye<Be;){var He=h[ye];_>0&&I(He)?_>1?dr(He,_-1,I,V,te):$a(te,He):V||(te[te.length]=He)}return te}var Ur=cc(),nu=cc(!0);function Bs(h,_){return h&&Ur(h,_,F)}function $l(h,_){return h&&nu(h,_,F)}function Li(h,_){return Is(_,function(I){return Rh(h[I])})}function yl(h,_){_=ua(_,h);for(var I=0,V=_.length;h!=null&&I<V;)h=h[Ka(_[I++])];return I&&I==V?h:p}function Ns(h,_,I){var V=_(h);return Mn(h)?V:$a(V,I(h))}function $o(h){return h==null?h===p?Wn:Hr:Yu&&Yu in ti(h)?ha(h):ep(h)}function oa(h,_){return h>_}function $n(h,_){return h!=null&&Gn.call(h,_)}function si(h,_){return h!=null&&_ in ti(h)}function Au(h,_,I){return h>=Bo(_,I)&&h<Ni(_,I)}function Ru(h,_,I){for(var V=I?Zi:Mo,te=h[0].length,ye=h.length,Be=ye,He=wt(ye),lt=1/0,Gt=[];Be--;){var Ht=h[Be];Be&&_&&(Ht=Kn(Ht,Br(_))),lt=Bo(Ht.length,lt),He[Be]=!I&&(_||te>=120&&Ht.length>=120)?new tu(Be&&Ht):p}Ht=h[0];var rr=-1,Ar=He[0];e:for(;++rr<te&&Gt.length<lt;){var en=Ht[rr],_n=_?_(en):en;if(en=I||en!==0?en:0,!(Ar?Xr(Ar,_n):V(Gt,_n,I))){for(Be=ye;--Be;){var jn=He[Be];if(!(jn?Xr(jn,_n):V(h[Be],_n,I)))continue e}Ar&&Ar.push(_n),Gt.push(en)}}return Gt}function Ta(h,_,I,V){return Bs(h,function(te,ye,Be){_(V,I(te),ye,Be)}),V}function jo(h,_,I){_=ua(_,h),h=co(h,_);var V=h==null?h:h[Ka(ts(_))];return V==null?p:yo(V,h,I)}function Wc(h){return zo(h)&&$o(h)==At}function Kh(h){return zo(h)&&$o(h)==Hn}function sa(h){return zo(h)&&$o(h)==pr}function aa(h,_,I,V,te){return h===_?!0:h==null||_==null||!zo(h)&&!zo(_)?h!==h&&_!==_:g(h,_,I,V,aa,te)}function g(h,_,I,V,te,ye){var Be=Mn(h),He=Mn(_),lt=Be?ir:Vs(h),Gt=He?ir:Vs(_);lt=lt==At?dn:lt,Gt=Gt==At?dn:Gt;var Ht=lt==dn,rr=Gt==dn,Ar=lt==Gt;if(Ar&&vs(h)){if(!vs(_))return!1;Be=!0,Ht=!1}if(Ar&&!Ht)return ye||(ye=new lr),Be||Df(h)?ed(h,_,I,V,te,ye):mf(h,_,lt,I,V,te,ye);if(!(I&we)){var en=Ht&&Gn.call(h,"__wrapped__"),_n=rr&&Gn.call(_,"__wrapped__");if(en||_n){var jn=en?h.value():h,vn=_n?_.value():_;return ye||(ye=new lr),te(jn,vn,I,V,ye)}}return Ar?(ye||(ye=new lr),Kf(h,_,I,V,te,ye)):!1}function e(h){return zo(h)&&Vs(h)==br}function r(h,_,I,V){var te=I.length,ye=te,Be=!V;if(h==null)return!ye;for(h=ti(h);te--;){var He=I[te];if(Be&&He[2]?He[1]!==h[He[0]]:!(He[0]in h))return!1}for(;++te<ye;){He=I[te];var lt=He[0],Gt=h[lt],Ht=He[1];if(Be&&He[2]){if(Gt===p&&!(lt in h))return!1}else{var rr=new lr;if(V)var Ar=V(Gt,Ht,lt,h,_,rr);if(!(Ar===p?aa(Ht,Gt,we|xe,V,rr):Ar))return!1}}return!0}function a(h){if(!So(h)||Pp(h))return!1;var _=Rh(h)?dh:Ys;return _.test(wl(h))}function d(h){return zo(h)&&$o(h)==sn}function y(h){return zo(h)&&Vs(h)==kn}function w(h){return zo(h)&&xc(h.length)&&!!gr[$o(h)]}function E(h){return typeof h=="function"?h:h==null?El:typeof h=="object"?Mn(h)?X(h[0],h[1]):Z(h):Lg(h)}function A(h){if(!dc(h))return Ll(h);var _=[];for(var I in ti(h))Gn.call(h,I)&&I!="constructor"&&_.push(I);return _}function D(h){if(!So(h))return od(h);var _=dc(h),I=[];for(var V in h)V=="constructor"&&(_||!Gn.call(h,V))||I.push(V);return I}function N(h,_){return h<_}function G(h,_){var I=-1,V=Tl(h)?wt(h.length):[];return gl(h,function(te,ye,Be){V[++I]=_(te,ye,Be)}),V}function Z(h){var _=Sh(h);return _.length==1&&_[0][2]?id(_[0][0],_[0][1]):function(I){return I===h||r(I,h,_)}}function X(h,_){return zr(h)&&jd(_)?id(Ka(h),_):function(I){var V=f(I,h);return V===p&&V===_?b(I,h):aa(_,V,we|xe)}}function ne(h,_,I,V,te){h!==_&&Ur(_,function(ye,Be){if(te||(te=new lr),So(ye))be(h,_,Be,I,ne,V,te);else{var He=V?V(bl(h,Be),ye,Be+"",h,_,te):p;He===p&&(He=ye),sc(h,Be,He)}},j)}function be(h,_,I,V,te,ye,Be){var He=bl(h,I),lt=bl(_,I),Gt=Be.get(lt);if(Gt){sc(h,I,Gt);return}var Ht=ye?ye(He,lt,I+"",h,_,Be):p,rr=Ht===p;if(rr){var Ar=Mn(lt),en=!Ar&&vs(lt),_n=!Ar&&!en&&Df(lt);Ht=lt,Ar||en||_n?Mn(He)?Ht=He:Ro(He)?Ht=Us(He):en?(rr=!1,Ht=Ul(lt,!0)):_n?(rr=!1,Ht=gs(lt,!0)):Ht=[]:zf(lt)||Ah(lt)?(Ht=He,Ah(He)?Ht=Pg(He):(!So(He)||Rh(He))&&(Ht=Zs(lt))):rr=!1}rr&&(Be.set(lt,Ht),te(Ht,lt,V,ye,Be),Be.delete(lt)),sc(h,I,Ht)}function _e(h,_){var I=h.length;if(I)return _+=_<0?I:0,bi(_,I)?h[_]:p}function Se(h,_,I){_.length?_=Kn(_,function(ye){return Mn(ye)?function(Be){return yl(Be,ye.length===1?ye[0]:ye)}:ye}):_=[El];var V=-1;_=Kn(_,Br(an()));var te=G(h,function(ye,Be,He){var lt=Kn(_,function(Gt){return Gt(ye)});return{criteria:lt,index:++V,value:ye}});return Pe(te,function(ye,Be){return Xh(ye,Be,I)})}function ke(h,_){return Le(h,_,function(I,V){return b(h,V)})}function Le(h,_,I){for(var V=-1,te=_.length,ye={};++V<te;){var Be=_[V],He=yl(h,Be);I(He,Be)&&Jt(ye,ua(Be,h),He)}return ye}function Me(h){return function(_){return yl(_,h)}}function De(h,_,I,V){var te=V?Ms:ja,ye=-1,Be=_.length,He=h;for(h===_&&(_=Us(_)),I&&(He=Kn(h,Br(I)));++ye<Be;)for(var lt=0,Gt=_[ye],Ht=I?I(Gt):Gt;(lt=te(He,Ht,lt,V))>-1;)He!==h&&Xu.call(He,lt,1),Xu.call(h,lt,1);return h}function Ne(h,_){for(var I=h?_.length:0,V=I-1;I--;){var te=_[I];if(I==V||te!==ye){var ye=te;bi(te)?Xu.call(h,te,1):Hi(h,te)}}return h}function je(h,_){return h+cl(Uc()*(_-h+1))}function at(h,_,I,V){for(var te=-1,ye=Ni(ul((_-h)/(I||1)),0),Be=wt(ye);ye--;)Be[V?ye:++te]=h,h+=I;return Be}function It(h,_){var I="";if(!h||_<1||_>xt)return I;do _%2&&(I+=h),_=cl(_/2),_&&(h+=h);while(_);return I}function Ye(h,_){return qa($i(h,_,El),h+"")}function ht(h){return hn(qt(h))}function Ct(h,_){var I=qt(h);return ad(I,ru(_,0,I.length))}function Jt(h,_,I,V){if(!So(h))return h;_=ua(_,h);for(var te=-1,ye=_.length,Be=ye-1,He=h;He!=null&&++te<ye;){var lt=Ka(_[te]),Gt=I;if(lt==="__proto__"||lt==="constructor"||lt==="prototype")return h;if(te!=Be){var Ht=He[lt];Gt=V?V(Ht,lt,He):p,Gt===p&&(Gt=So(Ht)?Ht:bi(_[te+1])?[]:{})}ku(He,lt,Gt),He=He[lt]}return h}var er=Iu?function(h,_){return Iu.set(h,_),h}:El,Ft=fh?function(h,_){return fh(h,"toString",{configurable:!0,enumerable:!1,value:yp(_),writable:!0})}:El;function vr(h){return ad(qt(h))}function Zr(h,_,I){var V=-1,te=h.length;_<0&&(_=-_>te?0:te+_),I=I>te?te:I,I<0&&(I+=te),te=_>I?0:I-_>>>0,_>>>=0;for(var ye=wt(te);++V<te;)ye[V]=h[V+_];return ye}function En(h,_){var I;return gl(h,function(V,te,ye){return I=_(V,te,ye),!I}),!!I}function pi(h,_,I){var V=0,te=h==null?V:h.length;if(typeof _=="number"&&_===_&&te<=Ut){for(;V<te;){var ye=V+te>>>1,Be=h[ye];Be!==null&&!su(Be)&&(I?Be<=_:Be<_)?V=ye+1:te=ye}return te}return ri(h,_,El,I)}function ri(h,_,I,V){var te=0,ye=h==null?0:h.length;if(ye===0)return 0;_=I(_);for(var Be=_!==_,He=_===null,lt=su(_),Gt=_===p;te<ye;){var Ht=cl((te+ye)/2),rr=I(h[Ht]),Ar=rr!==p,en=rr===null,_n=rr===rr,jn=su(rr);if(Be)var vn=V||_n;else Gt?vn=_n&&(V||Ar):He?vn=_n&&Ar&&(V||!en):lt?vn=_n&&Ar&&!en&&(V||!jn):en||jn?vn=!1:vn=V?rr<=_:rr<_;vn?te=Ht+1:ye=Ht}return Bo(ye,ct)}function Mi(h,_){for(var I=-1,V=h.length,te=0,ye=[];++I<V;){var Be=h[I],He=_?_(Be):Be;if(!I||!Bu(He,lt)){var lt=He;ye[te++]=Be===0?0:Be}}return ye}function ki(h){return typeof h=="number"?h:su(h)?Wt:+h}function In(h){if(typeof h=="string")return h;if(Mn(h))return Kn(h,In)+"";if(su(h))return Mu?Mu.call(h):"";var _=h+"";return _=="0"&&1/h==-1/0?"-0":_}function Cn(h,_,I){var V=-1,te=Mo,ye=h.length,Be=!0,He=[],lt=He;if(I)Be=!1,te=Zi;else if(ye>=P){var Gt=_?null:Hf(h);if(Gt)return Jl(Gt);Be=!1,te=Xr,lt=new tu}else lt=_?[]:He;e:for(;++V<ye;){var Ht=h[V],rr=_?_(Ht):Ht;if(Ht=I||Ht!==0?Ht:0,Be&&rr===rr){for(var Ar=lt.length;Ar--;)if(lt[Ar]===rr)continue e;_&&lt.push(rr),He.push(Ht)}else te(lt,rr,I)||(lt!==He&&lt.push(rr),He.push(Ht))}return He}function Hi(h,_){return _=ua(_,h),h=co(h,_),h==null||delete h[Ka(ts(_))]}function vo(h,_,I,V){return Jt(h,_,I(yl(h,_)),V)}function ao(h,_,I,V){for(var te=h.length,ye=V?te:-1;(V?ye--:++ye<te)&&_(h[ye],ye,h););return I?Zr(h,V?0:ye,V?ye+1:te):Zr(h,V?ye+1:0,V?te:ye)}function An(h,_){var I=h;return I instanceof gn&&(I=I.value()),Zu(_,function(V,te){return te.func.apply(te.thisArg,$a([V],te.args))},I)}function _l(h,_,I){var V=h.length;if(V<2)return V?Cn(h[0]):[];for(var te=-1,ye=wt(V);++te<V;)for(var Be=h[te],He=-1;++He<V;)He!=te&&(ye[te]=Wa(ye[te]||Be,h[He],_,I));return Cn(dr(ye,1),_,I)}function la(h,_,I){for(var V=-1,te=h.length,ye=_.length,Be={};++V<te;){var He=V<ye?_[V]:p;I(Be,h[V],He)}return Be}function Ca(h){return Ro(h)?h:[]}function jl(h){return typeof h=="function"?h:El}function ua(h,_){return Mn(h)?h:zr(h,_)?[h]:Kc(wi(h))}var iu=Ye;function $s(h,_,I){var V=h.length;return I=I===p?V:I,!_&&I>=V?h:Zr(h,_,I)}var js=Ad||function(h){return di.clearTimeout(h)};function Ul(h,_){if(_)return h.slice();var I=h.length,V=Gh?Gh(I):new h.constructor(I);return h.copy(V),V}function Pa(h){var _=new h.constructor(h.byteLength);return new zl(_).set(new zl(h)),_}function ou(h,_){var I=_?Pa(h.buffer):h.buffer;return new h.constructor(I,h.byteOffset,h.byteLength)}function lo(h){var _=new h.constructor(h.source,Zn.exec(h));return _.lastIndex=h.lastIndex,_}function uo(h){return zs?ti(zs.call(h)):{}}function gs(h,_){var I=_?Pa(h.buffer):h.buffer;return new h.constructor(I,h.byteOffset,h.length)}function xi(h,_){if(h!==_){var I=h!==p,V=h===null,te=h===h,ye=su(h),Be=_!==p,He=_===null,lt=_===_,Gt=su(_);if(!He&&!Gt&&!ye&&h>_||ye&&Be&&lt&&!He&&!Gt||V&&Be&&lt||!I&&lt||!te)return 1;if(!V&&!ye&&!Gt&&h<_||Gt&&I&&te&&!V&&!ye||He&&I&&te||!Be&&te||!lt)return-1}return 0}function Xh(h,_,I){for(var V=-1,te=h.criteria,ye=_.criteria,Be=te.length,He=I.length;++V<Be;){var lt=xi(te[V],ye[V]);if(lt){if(V>=He)return lt;var Gt=I[V];return lt*(Gt=="desc"?-1:1)}}return h.index-_.index}function zd(h,_,I,V){for(var te=-1,ye=h.length,Be=I.length,He=-1,lt=_.length,Gt=Ni(ye-Be,0),Ht=wt(lt+Gt),rr=!V;++He<lt;)Ht[He]=_[He];for(;++te<Be;)(rr||te<ye)&&(Ht[I[te]]=h[te]);for(;Gt--;)Ht[He++]=h[te++];return Ht}function Yh(h,_,I,V){for(var te=-1,ye=h.length,Be=-1,He=I.length,lt=-1,Gt=_.length,Ht=Ni(ye-He,0),rr=wt(Ht+Gt),Ar=!V;++te<Ht;)rr[te]=h[te];for(var en=te;++lt<Gt;)rr[en+lt]=_[lt];for(;++Be<He;)(Ar||te<ye)&&(rr[en+I[Be]]=h[te++]);return rr}function Us(h,_){var I=-1,V=h.length;for(_||(_=wt(V));++I<V;)_[I]=h[I];return _}function Ea(h,_,I,V){var te=!I;I||(I={});for(var ye=-1,Be=_.length;++ye<Be;){var He=_[ye],lt=V?V(I[He],h[He],He,I,h):p;lt===p&&(lt=h[He]),te?Bl(I,He,lt):ku(I,He,lt)}return I}function zu(h,_){return Ea(h,Zl(h),_)}function Ha(h,_){return Ea(h,gf(h),_)}function Ia(h,_){return function(I,V){var te=Mn(I)?Bi:Os,ye=_?_():{};return te(I,h,an(V,2),ye)}}function Yo(h){return Ye(function(_,I){var V=-1,te=I.length,ye=te>1?I[te-1]:p,Be=te>2?I[2]:p;for(ye=h.length>3&&typeof ye=="function"?(te--,ye):p,Be&&Jo(I[0],I[1],Be)&&(ye=te<3?p:ye,te=1),_=ti(_);++V<te;){var He=I[V];He&&h(_,He,V,ye)}return _})}function xo(h,_){return function(I,V){if(I==null)return I;if(!Tl(I))return h(I,V);for(var te=I.length,ye=_?te:-1,Be=ti(I);(_?ye--:++ye<te)&&V(Be[ye],ye,Be)!==!1;);return I}}function cc(h){return function(_,I,V){for(var te=-1,ye=ti(_),Be=V(_),He=Be.length;He--;){var lt=Be[h?He:++te];if(I(ye[lt],lt,ye)===!1)break}return _}}function vl(h,_,I){var V=_&Ze,te=qc(h);function ye(){var Be=this&&this!==di&&this instanceof ye?te:h;return Be.apply(V?I:this,arguments)}return ye}function _h(h){return function(_){_=wi(_);var I=ll(_)?io(_):p,V=I?I[0]:_.charAt(0),te=I?$s(I,1).join(""):_.slice(1);return V[h]()+te}}function Hc(h){return function(_){return Zu(ef(Ki(_).replace(mu,"")),h,"")}}function qc(h){return function(){var _=arguments;switch(_.length){case 0:return new h;case 1:return new h(_[0]);case 2:return new h(_[0],_[1]);case 3:return new h(_[0],_[1],_[2]);case 4:return new h(_[0],_[1],_[2],_[3]);case 5:return new h(_[0],_[1],_[2],_[3],_[4]);case 6:return new h(_[0],_[1],_[2],_[3],_[4],_[5]);case 7:return new h(_[0],_[1],_[2],_[3],_[4],_[5],_[6])}var I=tc(h.prototype),V=h.apply(I,_);return So(V)?V:I}}function ff(h,_,I){var V=qc(h);function te(){for(var ye=arguments.length,Be=wt(ye),He=ye,lt=hc(te);He--;)Be[He]=arguments[He];var Gt=ye<3&&Be[0]!==lt&&Be[ye-1]!==lt?[]:ea(Be,lt);if(ye-=Gt.length,ye<I)return Ma(h,_,vh,te.placeholder,p,Be,Gt,p,p,I-ye);var Ht=this&&this!==di&&this instanceof te?V:h;return yo(Ht,this,Be)}return te}function xl(h){return function(_,I,V){var te=ti(_);if(!Tl(_)){var ye=an(I,3);_=F(_),I=function(He){return ye(te[He],He,te)}}var Be=h(_,I,V);return Be>-1?te[ye?_[Be]:Be]:p}}function Lu(h){return Du(function(_){var I=_.length,V=I,te=Ho.prototype.thru;for(h&&_.reverse();V--;){var ye=_[V];if(typeof ye!="function")throw new ta(M);if(te&&!Be&&wh(ye)=="wrapper")var Be=new Ho([],!0)}for(V=Be?V:I;++V<I;){ye=_[V];var He=wh(ye),lt=He=="wrapper"?Fd(ye):p;lt&&$d(lt[0])&&lt[1]==(yt|Tt|Qe|ze)&&!lt[4].length&&lt[9]==1?Be=Be[wh(lt[0])].apply(Be,lt[3]):Be=ye.length==1&&$d(ye)?Be[He]():Be.thru(ye)}return function(){var Gt=arguments,Ht=Gt[0];if(Be&&Gt.length==1&&Mn(Ht))return Be.plant(Ht).value();for(var rr=0,Ar=I?_[rr].apply(this,Gt):Ht;++rr<I;)Ar=_[rr].call(this,Ar);return Ar}})}function vh(h,_,I,V,te,ye,Be,He,lt,Gt){var Ht=_&yt,rr=_&Ze,Ar=_&mt,en=_&(Tt|Je),_n=_&$e,jn=Ar?p:qc(h);function vn(){for(var ni=arguments.length,mi=wt(ni),Cc=ni;Cc--;)mi[Cc]=arguments[Cc];if(en)var du=hc(vn),Pc=ks(mi,du);if(V&&(mi=zd(mi,V,te,en)),ye&&(mi=Yh(mi,ye,Be,en)),ni-=Pc,en&&ni<Gt){var Ks=ea(mi,du);return Ma(h,_,vh,vn.placeholder,I,mi,Ks,He,lt,Gt-ni)}var Dh=rr?I:this,rf=Ar?Dh[h]:h;return ni=mi.length,He?mi=Gl(mi,He):_n&&ni>1&&mi.reverse(),Ht&&lt<ni&&(mi.length=lt),this&&this!==di&&this instanceof vn&&(rf=jn||qc(rf)),rf.apply(Dh,mi)}return vn}function Tp(h,_){return function(I,V){return Ta(I,h,_(V),{})}}function xh(h,_){return function(I,V){var te;if(I===p&&V===p)return _;if(I!==p&&(te=I),V!==p){if(te===p)return V;typeof I=="string"||typeof V=="string"?(I=In(I),V=In(V)):(I=ki(I),V=ki(V)),te=h(I,V)}return te}}function Ld(h){return Du(function(_){return _=Kn(_,Br(an())),Ye(function(I){var V=this;return h(_,function(te){return yo(te,V,I)})})})}function Dd(h,_){_=_===p?" ":In(_);var I=_.length;if(I<2)return I?It(_,h):_;var V=It(_,ul(h/Tn(_)));return ll(_)?$s(io(V),0,h).join(""):V.slice(0,h)}function Gf(h,_,I,V){var te=_&Ze,ye=qc(h);function Be(){for(var He=-1,lt=arguments.length,Gt=-1,Ht=V.length,rr=wt(Ht+lt),Ar=this&&this!==di&&this instanceof Be?ye:h;++Gt<Ht;)rr[Gt]=V[Gt];for(;lt--;)rr[Gt++]=arguments[++He];return yo(Ar,te?I:this,rr)}return Be}function Wf(h){return function(_,I,V){return V&&typeof V!="number"&&Jo(_,I,V)&&(I=V=p),_=bc(_),I===p?(I=_,_=0):I=bc(I),V=V===p?_<I?1:-1:bc(V),at(_,I,V,h)}}function Qh(h){return function(_,I){return typeof _=="string"&&typeof I=="string"||(_=au(_),I=au(I)),h(_,I)}}function Ma(h,_,I,V,te,ye,Be,He,lt,Gt){var Ht=_&Tt,rr=Ht?Be:p,Ar=Ht?p:Be,en=Ht?ye:p,_n=Ht?p:ye;_|=Ht?Qe:nt,_&=~(Ht?nt:Qe),_&kt||(_&=-4);var jn=[h,_,te,en,rr,_n,Ar,He,lt,Gt],vn=I.apply(p,jn);return $d(h)&&sd(vn,jn),vn.placeholder=V,_f(vn,h,_)}function Qo(h){var _=oo[h];return function(I,V){if(I=au(I),V=V==null?0:Bo(zn(V),292),V&&Tu(I)){var te=(wi(I)+"e").split("e"),ye=_(te[0]+"e"+(+te[1]+V));return te=(wi(ye)+"e").split("e"),+(te[0]+"e"+(+te[1]-V))}return _(I)}}var Hf=hl&&1/Jl(new hl([,-0]))[1]==or?function(h){return new hl(h)}:Rm;function pf(h){return function(_){var I=Vs(_);return I==br?jh(_):I==kn?cf(_):Nt(_,h(_))}}function ca(h,_,I,V,te,ye,Be,He){var lt=_&mt;if(!lt&&typeof h!="function")throw new ta(M);var Gt=V?V.length:0;if(Gt||(_&=-97,V=te=p),Be=Be===p?Be:Ni(zn(Be),0),He=He===p?He:zn(He),Gt-=te?te.length:0,_&nt){var Ht=V,rr=te;V=te=p}var Ar=lt?p:Fd(h),en=[h,_,I,V,te,Ht,rr,ye,Be,He];if(Ar&&Jf(en,Ar),h=en[0],_=en[1],I=en[2],V=en[3],te=en[4],He=en[9]=en[9]===p?lt?0:h.length:Ni(en[9]-Gt,0),!He&&_&(Tt|Je)&&(_&=-25),!_||_==Ze)var _n=vl(h,_,I);else _==Tt||_==Je?_n=ff(h,_,He):(_==Qe||_==(Ze|Qe))&&!te.length?_n=Gf(h,_,I,V):_n=vh.apply(p,en);var jn=Ar?er:sd;return _f(jn(_n,en),h,_)}function qf(h,_,I,V){return h===p||Bu(h,Rs[I])&&!Gn.call(V,I)?_:h}function bh(h,_,I,V,te,ye){return So(h)&&So(_)&&(ye.set(_,h),ne(h,_,p,bh,ye),ye.delete(_)),h}function Jh(h){return zf(h)?p:h}function ed(h,_,I,V,te,ye){var Be=I&we,He=h.length,lt=_.length;if(He!=lt&&!(Be&&lt>He))return!1;var Gt=ye.get(h),Ht=ye.get(_);if(Gt&&Ht)return Gt==_&&Ht==h;var rr=-1,Ar=!0,en=I&xe?new tu:p;for(ye.set(h,_),ye.set(_,h);++rr<He;){var _n=h[rr],jn=_[rr];if(V)var vn=Be?V(jn,_n,rr,_,h,ye):V(_n,jn,rr,h,_,ye);if(vn!==p){if(vn)continue;Ar=!1;break}if(en){if(!yu(_,function(ni,mi){if(!Xr(en,mi)&&(_n===ni||te(_n,ni,I,V,ye)))return en.push(mi)})){Ar=!1;break}}else if(!(_n===jn||te(_n,jn,I,V,ye))){Ar=!1;break}}return ye.delete(h),ye.delete(_),Ar}function mf(h,_,I,V,te,ye,Be){switch(I){case Bn:if(h.byteLength!=_.byteLength||h.byteOffset!=_.byteOffset)return!1;h=h.buffer,_=_.buffer;case Hn:return!(h.byteLength!=_.byteLength||!ye(new zl(h),new zl(_)));case fr:case pr:case nn:return Bu(+h,+_);case Tr:return h.name==_.name&&h.message==_.message;case sn:case wr:return h==_+"";case br:var He=jh;case kn:var lt=V&we;if(He||(He=Jl),h.size!=_.size&&!lt)return!1;var Gt=Be.get(h);if(Gt)return Gt==_;V|=xe,Be.set(h,_);var Ht=ed(He(h),He(_),V,te,ye,Be);return Be.delete(h),Ht;case Un:if(zs)return zs.call(h)==zs.call(_)}return!1}function Kf(h,_,I,V,te,ye){var Be=I&we,He=Od(h),lt=He.length,Gt=Od(_),Ht=Gt.length;if(lt!=Ht&&!Be)return!1;for(var rr=lt;rr--;){var Ar=He[rr];if(!(Be?Ar in _:Gn.call(_,Ar)))return!1}var en=ye.get(h),_n=ye.get(_);if(en&&_n)return en==_&&_n==h;var jn=!0;ye.set(h,_),ye.set(_,h);for(var vn=Be;++rr<lt;){Ar=He[rr];var ni=h[Ar],mi=_[Ar];if(V)var Cc=Be?V(mi,ni,Ar,_,h,ye):V(ni,mi,Ar,h,_,ye);if(!(Cc===p?ni===mi||te(ni,mi,I,V,ye):Cc)){jn=!1;break}vn||(vn=Ar=="constructor")}if(jn&&!vn){var du=h.constructor,Pc=_.constructor;du!=Pc&&"constructor"in h&&"constructor"in _&&!(typeof du=="function"&&du instanceof du&&typeof Pc=="function"&&Pc instanceof Pc)&&(jn=!1)}return ye.delete(h),ye.delete(_),jn}function Du(h){return qa($i(h,p,cd),h+"")}function Od(h){return Ns(h,F,Zl)}function td(h){return Ns(h,j,gf)}var Fd=Iu?function(h){return Iu.get(h)}:Rm;function wh(h){for(var _=h.name+"",I=Ti[_],V=Gn.call(Ti,_)?I.length:0;V--;){var te=I[V],ye=te.func;if(ye==null||ye==h)return te.name}return _}function hc(h){var _=Gn.call(ce,"placeholder")?ce:h;return _.placeholder}function an(){var h=ce.iteratee||km;return h=h===km?E:h,arguments.length?h(arguments[0],arguments[1]):h}function rd(h,_){var I=h.__data__;return nd(_)?I[typeof _=="string"?"string":"hash"]:I.map}function Sh(h){for(var _=F(h),I=_.length;I--;){var V=_[I],te=h[V];_[I]=[V,te,jd(te)]}return _}function Vl(h,_){var I=al(h,_);return a(I)?I:p}function ha(h){var _=Gn.call(h,Yu),I=h[Yu];try{h[Yu]=p;var V=!0}catch{}var te=wu.call(h);return V&&(_?h[Yu]=I:delete h[Yu]),te}var Zl=$c?function(h){return h==null?[]:(h=ti(h),Is($c(h),function(_){return Ku.call(h,_)}))}:Lh,gf=$c?function(h){for(var _=[];h;)$a(_,Zl(h)),h=na(h);return _}:Lh,Vs=$o;(Ju&&Vs(new Ju(new ArrayBuffer(1)))!=Bn||Pu&&Vs(new Pu)!=br||Vc&&Vs(Vc.resolve())!=on||hl&&Vs(new hl)!=kn||Eu&&Vs(new Eu)!=Si)&&(Vs=function(h){var _=$o(h),I=_==dn?h.constructor:p,V=I?wl(I):"";if(V)switch(V){case Dl:return Bn;case _o:return br;case Hh:return on;case Ol:return kn;case Ua:return Si}return _});function yf(h,_,I){for(var V=-1,te=I.length;++V<te;){var ye=I[V],Be=ye.size;switch(ye.type){case"drop":h+=Be;break;case"dropRight":_-=Be;break;case"take":_=Bo(_,h+Be);break;case"takeRight":h=Ni(h,_-Be);break}}return{start:h,end:_}}function Cp(h){var _=h.match(Sn);return _?_[1].split(Fr):[]}function Xf(h,_,I){_=ua(_,h);for(var V=-1,te=_.length,ye=!1;++V<te;){var Be=Ka(_[V]);if(!(ye=h!=null&&I(h,Be)))break;h=h[Be]}return ye||++V!=te?ye:(te=h==null?0:h.length,!!te&&xc(te)&&bi(Be,te)&&(Mn(h)||Ah(h)))}function Bd(h){var _=h.length,I=new h.constructor(_);return _&&typeof h[0]=="string"&&Gn.call(h,"index")&&(I.index=h.index,I.input=h.input),I}function Zs(h){return typeof h.constructor=="function"&&!dc(h)?tc(na(h)):{}}function Yf(h,_,I){var V=h.constructor;switch(_){case Hn:return Pa(h);case fr:case pr:return new V(+h);case Bn:return ou(h,I);case Ji:case Gi:case Vi:case ei:case ii:case mo:case et:case se:case ae:return gs(h,I);case br:return new V;case nn:case wr:return new V(h);case sn:return lo(h);case kn:return new V;case Un:return uo(h)}}function Qf(h,_){var I=_.length;if(!I)return h;var V=I-1;return _[V]=(I>1?"& ":"")+_[V],_=_.join(I>2?", ":" "),h.replace(yn,`{
/* [wrapped with `+_+`] */
`)}function Nd(h){return Mn(h)||Ah(h)||!!(Wh&&h&&h[Wh])}function bi(h,_){var I=typeof h;return _=_??xt,!!_&&(I=="number"||I!="symbol"&&Ps.test(h))&&h>-1&&h%1==0&&h<_}function Jo(h,_,I){if(!So(I))return!1;var V=typeof _;return(V=="number"?Tl(I)&&bi(_,I.length):V=="string"&&_ in I)?Bu(I[_],h):!1}function zr(h,_){if(Mn(h))return!1;var I=typeof h;return I=="number"||I=="symbol"||I=="boolean"||h==null||su(h)?!0:cr.test(h)||!Xt.test(h)||_!=null&&h in ti(_)}function nd(h){var _=typeof h;return _=="string"||_=="number"||_=="symbol"||_=="boolean"?h!=="__proto__":h===null}function $d(h){var _=wh(h),I=ce[_];if(typeof I!="function"||!(_ in gn.prototype))return!1;if(h===I)return!0;var V=Fd(I);return!!V&&h===V[0]}function Pp(h){return!!Rl&&Rl in h}var cm=Go?Rh:hu;function dc(h){var _=h&&h.constructor,I=typeof _=="function"&&_.prototype||Rs;return h===I}function jd(h){return h===h&&!So(h)}function id(h,_){return function(I){return I==null?!1:I[h]===_&&(_!==p||h in ti(I))}}function Ep(h){var _=vt(h,function(V){return I.size===Y&&I.clear(),V}),I=_.cache;return _}function Jf(h,_){var I=h[1],V=_[1],te=I|V,ye=te<(Ze|mt|yt),Be=V==yt&&I==Tt||V==yt&&I==ze&&h[7].length<=_[8]||V==(yt|ze)&&_[7].length<=_[8]&&I==Tt;if(!(ye||Be))return h;V&Ze&&(h[2]=_[2],te|=I&Ze?0:kt);var He=_[3];if(He){var lt=h[3];h[3]=lt?zd(lt,He,_[4]):He,h[4]=lt?ea(h[3],ve):_[4]}return He=_[5],He&&(lt=h[5],h[5]=lt?Yh(lt,He,_[6]):He,h[6]=lt?ea(h[5],ve):_[6]),He=_[7],He&&(h[7]=He),V&yt&&(h[8]=h[8]==null?_[8]:Bo(h[8],_[8])),h[9]==null&&(h[9]=_[9]),h[0]=_[0],h[1]=te,h}function od(h){var _=[];if(h!=null)for(var I in ti(h))_.push(I);return _}function ep(h){return wu.call(h)}function $i(h,_,I){return _=Ni(_===p?h.length-1:_,0),function(){for(var V=arguments,te=-1,ye=Ni(V.length-_,0),Be=wt(ye);++te<ye;)Be[te]=V[_+te];te=-1;for(var He=wt(_+1);++te<_;)He[te]=V[te];return He[_]=I(Be),yo(h,this,He)}}function co(h,_){return _.length<2?h:yl(h,Zr(_,0,-1))}function Gl(h,_){for(var I=h.length,V=Bo(_.length,I),te=Us(h);V--;){var ye=_[V];h[V]=bi(ye,I)?te[ye]:p}return h}function bl(h,_){if(!(_==="constructor"&&typeof h[_]=="function")&&_!="__proto__")return h[_]}var sd=ka(er),Ou=Nc||function(h,_){return di.setTimeout(h,_)},qa=ka(Ft);function _f(h,_,I){var V=_+"";return qa(h,Qf(V,ld(Cp(V),I)))}function ka(h){var _=0,I=0;return function(){var V=ph(),te=zt-(V-I);if(I=V,te>0){if(++_>=st)return arguments[0]}else _=0;return h.apply(p,arguments)}}function ad(h,_){var I=-1,V=h.length,te=V-1;for(_=_===p?V:_;++I<_;){var ye=je(I,te),Be=h[ye];h[ye]=h[I],h[I]=Be}return h.length=_,h}var Kc=Ep(function(h){var _=[];return h.charCodeAt(0)===46&&_.push(""),h.replace(Mr,function(I,V,te,ye){_.push(te?ye.replace(rn,"$1"):V||I)}),_});function Ka(h){if(typeof h=="string"||su(h))return h;var _=h+"";return _=="0"&&1/h==-1/0?"-0":_}function wl(h){if(h!=null){try{return Fc.call(h)}catch{}try{return h+""}catch{}}return""}function ld(h,_){return Ri(ur,function(I){var V="_."+I[0];_&I[1]&&!Mo(h,V)&&h.push(V)}),h.sort()}function Ip(h){if(h instanceof gn)return h.clone();var _=new Ho(h.__wrapped__,h.__chain__);return _.__actions__=Us(h.__actions__),_.__index__=h.__index__,_.__values__=h.__values__,_}function Ud(h,_,I){(I?Jo(h,_,I):_===p)?_=1:_=Ni(zn(_),0);var V=h==null?0:h.length;if(!V||_<1)return[];for(var te=0,ye=0,Be=wt(ul(V/_));te<V;)Be[ye++]=Zr(h,te,te+=_);return Be}function fc(h){for(var _=-1,I=h==null?0:h.length,V=0,te=[];++_<I;){var ye=h[_];ye&&(te[V++]=ye)}return te}function Wl(){var h=arguments.length;if(!h)return[];for(var _=wt(h-1),I=arguments[0],V=h;V--;)_[V-1]=arguments[V];return $a(Mn(I)?Us(I):[I],dr(_,1))}var Yn=Ye(function(h,_){return Ro(h)?Wa(h,dr(_,1,Ro,!0)):[]}),bo=Ye(function(h,_){var I=ts(_);return Ro(I)&&(I=p),Ro(h)?Wa(h,dr(_,1,Ro,!0),an(I,2)):[]}),wo=Ye(function(h,_){var I=ts(_);return Ro(I)&&(I=p),Ro(h)?Wa(h,dr(_,1,Ro,!0),p,I):[]});function ys(h,_,I){var V=h==null?0:h.length;return V?(_=I||_===p?1:zn(_),Zr(h,_<0?0:_,V)):[]}function Xa(h,_,I){var V=h==null?0:h.length;return V?(_=I||_===p?1:zn(_),_=V-_,Zr(h,0,_<0?0:_)):[]}function ud(h,_){return h&&h.length?ao(h,an(_,3),!0,!0):[]}function es(h,_){return h&&h.length?ao(h,an(_,3),!0):[]}function Vd(h,_,I,V){var te=h==null?0:h.length;return te?(I&&typeof I!="number"&&Jo(h,_,I)&&(I=0,V=te),ms(h,_,I,V)):[]}function Xc(h,_,I){var V=h==null?0:h.length;if(!V)return-1;var te=I==null?0:zn(I);return te<0&&(te=Ni(V+te,0)),Al(h,an(_,3),te)}function Zd(h,_,I){var V=h==null?0:h.length;if(!V)return-1;var te=V-1;return I!==p&&(te=zn(I),te=I<0?Ni(V+te,0):Bo(te,V-1)),Al(h,an(_,3),te,!0)}function cd(h){var _=h==null?0:h.length;return _?dr(h,1):[]}function hd(h){var _=h==null?0:h.length;return _?dr(h,or):[]}function da(h,_){var I=h==null?0:h.length;return I?(_=_===p?1:zn(_),dr(h,_)):[]}function vf(h){for(var _=-1,I=h==null?0:h.length,V={};++_<I;){var te=h[_];V[te[0]]=te[1]}return V}function pc(h){return h&&h.length?h[0]:p}function Fu(h,_,I){var V=h==null?0:h.length;if(!V)return-1;var te=I==null?0:zn(I);return te<0&&(te=Ni(V+te,0)),ja(h,_,te)}function Gd(h){var _=h==null?0:h.length;return _?Zr(h,0,-1):[]}var dd=Ye(function(h){var _=Kn(h,Ca);return _.length&&_[0]===h[0]?Ru(_):[]}),mc=Ye(function(h){var _=ts(h),I=Kn(h,Ca);return _===ts(I)?_=p:I.pop(),I.length&&I[0]===h[0]?Ru(I,an(_,2)):[]}),Wd=Ye(function(h){var _=ts(h),I=Kn(h,Ca);return _=typeof _=="function"?_:p,_&&I.pop(),I.length&&I[0]===h[0]?Ru(I,p,_):[]});function gc(h,_){return h==null?"":Cu.call(h,_)}function ts(h){var _=h==null?0:h.length;return _?h[_-1]:p}function Hd(h,_,I){var V=h==null?0:h.length;if(!V)return-1;var te=V;return I!==p&&(te=zn(I),te=te<0?Ni(V+te,0):Bo(te,V-1)),_===_?hf(h,_,te):Al(h,Gu,te,!0)}function qd(h,_){return h&&h.length?_e(h,zn(_)):p}var Yc=Ye(Th);function Th(h,_){return h&&h.length&&_&&_.length?De(h,_):h}function Aa(h,_,I){return h&&h.length&&_&&_.length?De(h,_,an(I,2)):h}function Qc(h,_,I){return h&&h.length&&_&&_.length?De(h,_,p,I):h}var Hl=Du(function(h,_){var I=h==null?0:h.length,V=ac(h,_);return Ne(h,Kn(_,function(te){return bi(te,I)?+te:te}).sort(xi)),V});function Ra(h,_){var I=[];if(!(h&&h.length))return I;var V=-1,te=[],ye=h.length;for(_=an(_,3);++V<ye;){var Be=h[V];_(Be,V,h)&&(I.push(Be),te.push(V))}return Ne(h,te),I}function xf(h){return h==null?h:Qu.call(h)}function tp(h,_,I){var V=h==null?0:h.length;return V?(I&&typeof I!="number"&&Jo(h,_,I)?(_=0,I=V):(_=_==null?0:zn(_),I=I===p?V:zn(I)),Zr(h,_,I)):[]}function Ch(h,_){return pi(h,_)}function Mp(h,_,I){return ri(h,_,an(I,2))}function Jc(h,_){var I=h==null?0:h.length;if(I){var V=pi(h,_);if(V<I&&Bu(h[V],_))return V}return-1}function kp(h,_){return pi(h,_,!0)}function rp(h,_,I){return ri(h,_,an(I,2),!0)}function Ph(h,_){var I=h==null?0:h.length;if(I){var V=pi(h,_,!0)-1;if(Bu(h[V],_))return V}return-1}function np(h){return h&&h.length?Mi(h):[]}function Eh(h,_){return h&&h.length?Mi(h,an(_,2)):[]}function ip(h){var _=h==null?0:h.length;return _?Zr(h,1,_):[]}function bf(h,_,I){return h&&h.length?(_=I||_===p?1:zn(_),Zr(h,0,_<0?0:_)):[]}function wf(h,_,I){var V=h==null?0:h.length;return V?(_=I||_===p?1:zn(_),_=V-_,Zr(h,_<0?0:_,V)):[]}function Kd(h,_){return h&&h.length?ao(h,an(_,3),!1,!0):[]}function Ap(h,_){return h&&h.length?ao(h,an(_,3)):[]}var hm=Ye(function(h){return Cn(dr(h,1,Ro,!0))}),Xd=Ye(function(h){var _=ts(h);return Ro(_)&&(_=p),Cn(dr(h,1,Ro,!0),an(_,2))}),Rp=Ye(function(h){var _=ts(h);return _=typeof _=="function"?_:p,Cn(dr(h,1,Ro,!0),p,_)});function eh(h){return h&&h.length?Cn(h):[]}function dm(h,_){return h&&h.length?Cn(h,an(_,2)):[]}function fd(h,_){return _=typeof _=="function"?_:p,h&&h.length?Cn(h,p,_):[]}function Sf(h){if(!(h&&h.length))return[];var _=0;return h=Is(h,function(I){if(Ro(I))return _=Ni(I.length,_),!0}),ot(_,function(I){return Kn(h,$(I))})}function qi(h,_){if(!(h&&h.length))return[];var I=Sf(h);return _==null?I:Kn(I,function(V){return yo(_,p,V)})}var fm=Ye(function(h,_){return Ro(h)?Wa(h,_):[]}),zp=Ye(function(h){return _l(Is(h,Ro))}),Yd=Ye(function(h){var _=ts(h);return Ro(_)&&(_=p),_l(Is(h,Ro),an(_,2))}),Lp=Ye(function(h){var _=ts(h);return _=typeof _=="function"?_:p,_l(Is(h,Ro),p,_)}),Tf=Ye(Sf);function op(h,_){return la(h||[],_||[],ku)}function Ao(h,_){return la(h||[],_||[],Jt)}var Ya=Ye(function(h){var _=h.length,I=_>1?h[_-1]:p;return I=typeof I=="function"?(h.pop(),I):p,qi(h,I)});function Cf(h){var _=ce(h);return _.__chain__=!0,_}function Dp(h,_){return _(h),h}function Sl(h,_){return _(h)}var pd=Du(function(h){var _=h.length,I=_?h[0]:0,V=this.__wrapped__,te=function(ye){return ac(ye,h)};return _>1||this.__actions__.length||!(V instanceof gn)||!bi(I)?this.thru(te):(V=V.slice(I,+I+(_?1:0)),V.__actions__.push({func:Sl,args:[te],thisArg:p}),new Ho(V,this.__chain__).thru(function(ye){return _&&!ye.length&&ye.push(p),ye}))});function Ih(){return Cf(this)}function Pf(){return new Ho(this.value(),this.__chain__)}function sp(){this.__values__===p&&(this.__values__=vm(this.value()));var h=this.__index__>=this.__values__.length,_=h?p:this.__values__[this.__index__++];return{done:h,value:_}}function ap(){return this}function Op(h){for(var _,I=this;I instanceof dl;){var V=Ip(I);V.__index__=0,V.__values__=p,_?te.__wrapped__=V:_=V;var te=V;I=I.__wrapped__}return te.__wrapped__=h,_}function Gs(){var h=this.__wrapped__;if(h instanceof gn){var _=h;return this.__actions__.length&&(_=new gn(this)),_=_.reverse(),_.__actions__.push({func:Sl,args:[xf],thisArg:p}),new Ho(_,this.__chain__)}return this.thru(xf)}function lp(){return An(this.__wrapped__,this.__actions__)}var up=Ia(function(h,_,I){Gn.call(h,I)?++h[I]:Bl(h,I,1)});function yc(h,_,I){var V=Mn(h)?Na:Zc;return I&&Jo(h,_,I)&&(_=p),V(h,an(_,3))}function Mh(h,_){var I=Mn(h)?Is:Gc;return I(h,an(_,3))}var th=xl(Xc),kh=xl(Zd);function md(h,_){return dr(_c(h,_),1)}function Ef(h,_){return dr(_c(h,_),or)}function Fp(h,_,I){return I=I===p?1:zn(I),dr(_c(h,_),I)}function If(h,_){var I=Mn(h)?Ri:gl;return I(h,an(_,3))}function gd(h,_){var I=Mn(h)?hs:Rd;return I(h,an(_,3))}var Mf=Ia(function(h,_,I){Gn.call(h,I)?h[I].push(_):Bl(h,I,[_])});function kf(h,_,I,V){h=Tl(h)?h:qt(h),I=I&&!V?zn(I):0;var te=h.length;return I<0&&(I=Ni(te+I,0)),Up(h)?I<=te&&h.indexOf(_,I)>-1:!!te&&ja(h,_,I)>-1}var cp=Ye(function(h,_,I){var V=-1,te=typeof _=="function",ye=Tl(h)?wt(h.length):[];return gl(h,function(Be){ye[++V]=te?yo(_,Be,I):jo(Be,_,I)}),ye}),Bp=Ia(function(h,_,I){Bl(h,I,_)});function _c(h,_){var I=Mn(h)?Kn:G;return I(h,an(_,3))}function hp(h,_,I,V){return h==null?[]:(Mn(_)||(_=_==null?[]:[_]),I=V?p:I,Mn(I)||(I=I==null?[]:[I]),Se(h,_,I))}var Qd=Ia(function(h,_,I){h[I?0:1].push(_)},function(){return[[],[]]});function Np(h,_,I){var V=Mn(h)?Zu:ue,te=arguments.length<3;return V(h,an(_,4),I,te,gl)}function Af(h,_,I){var V=Mn(h)?Bh:ue,te=arguments.length<3;return V(h,an(_,4),I,te,Rd)}function o(h,_){var I=Mn(h)?Is:Gc;return I(h,hr(an(_,3)))}function l(h){var _=Mn(h)?hn:ht;return _(h)}function x(h,_,I){(I?Jo(h,_,I):_===p)?_=1:_=zn(_);var V=Mn(h)?Fl:Ct;return V(h,_)}function C(h){var _=Mn(h)?df:vr;return _(h)}function z(h){if(h==null)return 0;if(Tl(h))return Up(h)?Tn(h):h.length;var _=Vs(h);return _==br||_==kn?h.size:A(h).length}function U(h,_,I){var V=Mn(h)?yu:En;return I&&Jo(h,_,I)&&(_=p),V(h,an(_,3))}var oe=Ye(function(h,_){if(h==null)return[];var I=_.length;return I>1&&Jo(h,_[0],_[1])?_=[]:I>2&&Jo(_[0],_[1],_[2])&&(_=[_[0]]),Se(h,dr(_,1),[])}),Ae=zi||function(){return di.Date.now()};function Ge(h,_){if(typeof _!="function")throw new ta(M);return h=zn(h),function(){if(--h<1)return _.apply(this,arguments)}}function Et(h,_,I){return _=I?p:_,_=h&&_==null?h.length:_,ca(h,yt,p,p,p,p,_)}function Yt(h,_){var I;if(typeof _!="function")throw new ta(M);return h=zn(h),function(){return--h>0&&(I=_.apply(this,arguments)),h<=1&&(_=p),I}}var nr=Ye(function(h,_,I){var V=Ze;if(I.length){var te=ea(I,hc(nr));V|=Qe}return ca(h,V,_,I,te)}),Qt=Ye(function(h,_,I){var V=Ze|mt;if(I.length){var te=ea(I,hc(Qt));V|=Qe}return ca(_,V,h,I,te)});function Pr(h,_,I){_=I?p:_;var V=ca(h,Tt,p,p,p,p,p,_);return V.placeholder=Pr.placeholder,V}function Dr(h,_,I){_=I?p:_;var V=ca(h,Je,p,p,p,p,p,_);return V.placeholder=Dr.placeholder,V}function jr(h,_,I){var V,te,ye,Be,He,lt,Gt=0,Ht=!1,rr=!1,Ar=!0;if(typeof h!="function")throw new ta(M);_=au(_)||0,So(I)&&(Ht=!!I.leading,rr="maxWait"in I,ye=rr?Ni(au(I.maxWait)||0,_):ye,Ar="trailing"in I?!!I.trailing:Ar);function en(Ks){var Dh=V,rf=te;return V=te=p,Gt=Ks,Be=h.apply(rf,Dh),Be}function _n(Ks){return Gt=Ks,He=Ou(ni,_),Ht?en(Ks):Be}function jn(Ks){var Dh=Ks-lt,rf=Ks-Gt,Bv=_-Dh;return rr?Bo(Bv,ye-rf):Bv}function vn(Ks){var Dh=Ks-lt,rf=Ks-Gt;return lt===p||Dh>=_||Dh<0||rr&&rf>=ye}function ni(){var Ks=Ae();if(vn(Ks))return mi(Ks);He=Ou(ni,jn(Ks))}function mi(Ks){return He=p,Ar&&V?en(Ks):(V=te=p,Be)}function Cc(){He!==p&&js(He),Gt=0,V=lt=te=He=p}function du(){return He===p?Be:mi(Ae())}function Pc(){var Ks=Ae(),Dh=vn(Ks);if(V=arguments,te=this,lt=Ks,Dh){if(He===p)return _n(lt);if(rr)return js(He),He=Ou(ni,_),en(lt)}return He===p&&(He=Ou(ni,_)),Be}return Pc.cancel=Cc,Pc.flush=du,Pc}var ho=Ye(function(h,_){return lc(h,1,_)}),ft=Ye(function(h,_,I){return lc(h,au(_)||0,I)});function Ke(h){return ca(h,$e)}function vt(h,_){if(typeof h!="function"||_!=null&&typeof _!="function")throw new ta(M);var I=function(){var V=arguments,te=_?_.apply(this,V):V[0],ye=I.cache;if(ye.has(te))return ye.get(te);var Be=h.apply(this,V);return I.cache=ye.set(te,Be)||ye,Be};return I.cache=new(vt.Cache||Wi),I}vt.Cache=Wi;function hr(h){if(typeof h!="function")throw new ta(M);return function(){var _=arguments;switch(_.length){case 0:return!h.call(this);case 1:return!h.call(this,_[0]);case 2:return!h.call(this,_[0],_[1]);case 3:return!h.call(this,_[0],_[1],_[2])}return!h.apply(this,_)}}function Vr(h){return Yt(2,h)}var ln=iu(function(h,_){_=_.length==1&&Mn(_[0])?Kn(_[0],Br(an())):Kn(dr(_,1),Br(an()));var I=_.length;return Ye(function(V){for(var te=-1,ye=Bo(V.length,I);++te<ye;)V[te]=_[te].call(this,V[te]);return yo(h,this,V)})}),Yr=Ye(function(h,_){var I=ea(_,hc(Yr));return ca(h,Qe,p,_,I)}),fn=Ye(function(h,_){var I=ea(_,hc(fn));return ca(h,nt,p,_,I)}),_s=Du(function(h,_){return ca(h,ze,p,p,p,_)});function ai(h,_){if(typeof h!="function")throw new ta(M);return _=_===p?_:zn(_),Ye(h,_)}function vc(h,_){if(typeof h!="function")throw new ta(M);return _=_==null?0:Ni(zn(_),0),Ye(function(I){var V=I[_],te=$s(I,0,_);return V&&$a(te,V),yo(h,this,te)})}function pm(h,_,I){var V=!0,te=!0;if(typeof h!="function")throw new ta(M);return So(I)&&(V="leading"in I?!!I.leading:V,te="trailing"in I?!!I.trailing:te),jr(h,_,{leading:V,maxWait:_,trailing:te})}function Ry(h){return Et(h,1)}function zy(h,_){return Yr(jl(_),h)}function Ly(){if(!arguments.length)return[];var h=arguments[0];return Mn(h)?h:[h]}function Dy(h){return ia(h,le)}function mm(h,_){return _=typeof _=="function"?_:p,ia(h,le,_)}function yd(h){return ia(h,de|le)}function dg(h,_){return _=typeof _=="function"?_:p,ia(h,de|le,_)}function fg(h,_){return _==null||oi(h,_,F(_))}function Bu(h,_){return h===_||h!==h&&_!==_}var pg=Qh(oa),mg=Qh(function(h,_){return h>=_}),Ah=Wc(function(){return arguments}())?Wc:function(h){return zo(h)&&Gn.call(h,"callee")&&!Ku.call(h,"callee")},Mn=wt.isArray,dp=Ba?Br(Ba):Kh;function Tl(h){return h!=null&&xc(h.length)&&!Rh(h)}function Ro(h){return zo(h)&&Tl(h)}function gg(h){return h===!0||h===!1||zo(h)&&$o(h)==fr}var vs=jc||hu,Rf=Ai?Br(Ai):sa;function yg(h){return zo(h)&&h.nodeType===1&&!zf(h)}function _g(h){if(h==null)return!0;if(Tl(h)&&(Mn(h)||typeof h=="string"||typeof h.splice=="function"||vs(h)||Df(h)||Ah(h)))return!h.length;var _=Vs(h);if(_==br||_==kn)return!h.size;if(dc(h))return!A(h).length;for(var I in h)if(Gn.call(h,I))return!1;return!0}function vg(h,_){return aa(h,_)}function xg(h,_,I){I=typeof I=="function"?I:p;var V=I?I(h,_):p;return V===p?aa(h,_,p,I):!!V}function $p(h){if(!zo(h))return!1;var _=$o(h);return _==Tr||_==Qr||typeof h.message=="string"&&typeof h.name=="string"&&!zf(h)}function bg(h){return typeof h=="number"&&Tu(h)}function Rh(h){if(!So(h))return!1;var _=$o(h);return _==tn||_==$r||_==Sr||_==bn}function gm(h){return typeof h=="number"&&h==zn(h)}function xc(h){return typeof h=="number"&&h>-1&&h%1==0&&h<=xt}function So(h){var _=typeof h;return h!=null&&(_=="object"||_=="function")}function zo(h){return h!=null&&typeof h=="object"}var ym=Ei?Br(Ei):e;function wg(h,_){return h===_||r(h,_,Sh(_))}function Oy(h,_,I){return I=typeof I=="function"?I:p,r(h,_,Sh(_),I)}function Fy(h){return pp(h)&&h!=+h}function Sg(h){if(cm(h))throw new mn(O);return a(h)}function fp(h){return h===null}function Tg(h){return h==null}function pp(h){return typeof h=="number"||zo(h)&&$o(h)==nn}function zf(h){if(!zo(h)||$o(h)!=dn)return!1;var _=na(h);if(_===null)return!0;var I=Gn.call(_,"constructor")&&_.constructor;return typeof I=="function"&&I instanceof I&&Fc.call(I)==qu}var Lf=va?Br(va):d;function jp(h){return gm(h)&&h>=-9007199254740991&&h<=xt}var mp=ol?Br(ol):y;function Up(h){return typeof h=="string"||!Mn(h)&&zo(h)&&$o(h)==wr}function su(h){return typeof h=="symbol"||zo(h)&&$o(h)==Un}var Df=Vu?Br(Vu):w;function Of(h){return h===p}function fa(h){return zo(h)&&Vs(h)==Si}function _d(h){return zo(h)&&$o(h)==Jn}var _m=Qh(N),Cg=Qh(function(h,_){return h<=_});function vm(h){if(!h)return[];if(Tl(h))return Up(h)?io(h):Us(h);if(xa&&h[xa])return $h(h[xa]());var _=Vs(h),I=_==br?jh:_==kn?Jl:qt;return I(h)}function bc(h){if(!h)return h===0?h:0;if(h=au(h),h===or||h===-1/0){var _=h<0?-1:1;return _*Pt}return h===h?h:0}function zn(h){var _=bc(h),I=_%1;return _===_?I?_-I:_:0}function xm(h){return h?ru(zn(h),0,Oe):0}function au(h){if(typeof h=="number")return h;if(su(h))return Wt;if(So(h)){var _=typeof h.valueOf=="function"?h.valueOf():h;h=So(_)?_+"":_}if(typeof h!="string")return h===0?h:+h;h=ar(h);var I=un.test(h);return I||Qs.test(h)?Fa(h.slice(2),I?2:8):Po.test(h)?Wt:+h}function Pg(h){return Ea(h,j(h))}function Eg(h){return h?ru(zn(h),-9007199254740991,xt):h===0?h:0}function wi(h){return h==null?"":In(h)}var bm=Yo(function(h,_){if(dc(_)||Tl(_)){Ea(_,F(_),h);return}for(var I in _)Gn.call(_,I)&&ku(h,I,_[I])}),wm=Yo(function(h,_){Ea(_,j(_),h)}),vd=Yo(function(h,_,I,V){Ea(_,j(_),h,V)}),Sm=Yo(function(h,_,I,V){Ea(_,F(_),h,V)}),Ig=Du(ac);function Tm(h,_){var I=tc(h);return _==null?I:vi(I,_)}var Vp=Ye(function(h,_){h=ti(h);var I=-1,V=_.length,te=V>2?_[2]:p;for(te&&Jo(_[0],_[1],te)&&(V=1);++I<V;)for(var ye=_[I],Be=j(ye),He=-1,lt=Be.length;++He<lt;){var Gt=Be[He],Ht=h[Gt];(Ht===p||Bu(Ht,Rs[Gt])&&!Gn.call(h,Gt))&&(h[Gt]=ye[Gt])}return h}),gp=Ye(function(h){return h.push(p,bh),yo(ie,p,h)});function Cm(h,_){return kl(h,an(_,3),Bs)}function Pm(h,_){return kl(h,an(_,3),$l)}function Em(h,_){return h==null?h:Ur(h,an(_,3),j)}function By(h,_){return h==null?h:nu(h,an(_,3),j)}function i(h,_){return h&&Bs(h,an(_,3))}function t(h,_){return h&&$l(h,an(_,3))}function n(h){return h==null?[]:Li(h,F(h))}function s(h){return h==null?[]:Li(h,j(h))}function f(h,_,I){var V=h==null?p:yl(h,_);return V===p?I:V}function v(h,_){return h!=null&&Xf(h,_,$n)}function b(h,_){return h!=null&&Xf(h,_,si)}var S=Tp(function(h,_,I){_!=null&&typeof _.toString!="function"&&(_=wu.call(_)),h[_]=I},yp(El)),k=Tp(function(h,_,I){_!=null&&typeof _.toString!="function"&&(_=wu.call(_)),Gn.call(h,_)?h[_].push(I):h[_]=[I]},an),R=Ye(jo);function F(h){return Tl(h)?Ga(h):A(h)}function j(h){return Tl(h)?Ga(h,!0):D(h)}function W(h,_){var I={};return _=an(_,3),Bs(h,function(V,te,ye){Bl(I,_(V,te,ye),V)}),I}function K(h,_){var I={};return _=an(_,3),Bs(h,function(V,te,ye){Bl(I,te,_(V,te,ye))}),I}var ee=Yo(function(h,_,I){ne(h,_,I)}),ie=Yo(function(h,_,I,V){ne(h,_,I,V)}),me=Du(function(h,_){var I={};if(h==null)return I;var V=!1;_=Kn(_,function(ye){return ye=ua(ye,h),V||(V=ye.length>1),ye}),Ea(h,td(h),I),V&&(I=ia(I,de|Te|le,Jh));for(var te=_.length;te--;)Hi(I,_[te]);return I});function Ce(h,_){return Re(h,hr(an(_)))}var Ve=Du(function(h,_){return h==null?{}:ke(h,_)});function Re(h,_){if(h==null)return{};var I=Kn(td(h),function(V){return[V]});return _=an(_),Le(h,I,function(V,te){return _(V,te[0])})}function H(h,_,I){_=ua(_,h);var V=-1,te=_.length;for(te||(te=1,h=p);++V<te;){var ye=h==null?p:h[Ka(_[V])];ye===p&&(V=te,ye=I),h=Rh(ye)?ye.call(h):ye}return h}function pe(h,_,I){return h==null?h:Jt(h,_,I)}function Fe(h,_,I,V){return V=typeof V=="function"?V:p,h==null?h:Jt(h,_,I,V)}var pt=pf(F),jt=pf(j);function bt(h,_,I){var V=Mn(h),te=V||vs(h)||Df(h);if(_=an(_,4),I==null){var ye=h&&h.constructor;te?I=V?new ye:[]:So(h)?I=Rh(ye)?tc(na(h)):{}:I={}}return(te?Ri:Bs)(h,function(Be,He,lt){return _(I,Be,He,lt)}),I}function Mt(h,_){return h==null?!0:Hi(h,_)}function Kt(h,_,I){return h==null?h:vo(h,_,jl(I))}function Vt(h,_,I,V){return V=typeof V=="function"?V:p,h==null?h:vo(h,_,jl(I),V)}function qt(h){return h==null?[]:pn(h,F(h))}function Rt(h){return h==null?[]:pn(h,j(h))}function Er(h,_,I){return I===p&&(I=_,_=p),I!==p&&(I=au(I),I=I===I?I:0),_!==p&&(_=au(_),_=_===_?_:0),ru(au(h),_,I)}function Wr(h,_,I){return _=bc(_),I===p?(I=_,_=0):I=bc(I),h=au(h),Au(h,_,I)}function Gr(h,_,I){if(I&&typeof I!="boolean"&&Jo(h,_,I)&&(_=I=p),I===p&&(typeof _=="boolean"?(I=_,_=p):typeof h=="boolean"&&(I=h,h=p)),h===p&&_===p?(h=0,_=1):(h=bc(h),_===p?(_=h,h=0):_=bc(_)),h>_){var V=h;h=_,_=V}if(I||h%1||_%1){var te=Uc();return Bo(h+te*(_-h+gu("1e-"+((te+"").length-1))),_)}return je(h,_)}var Rr=Hc(function(h,_,I){return _=_.toLowerCase(),h+(I?Rn(_):_)});function Rn(h){return xd(wi(h).toLowerCase())}function Ki(h){return h=wi(h),h&&h.replace(el,ds).replace(Oo,"")}function rs(h,_,I){h=wi(h),_=In(_);var V=h.length;I=I===p?V:ru(zn(I),0,V);var te=I;return I-=_.length,I>=0&&h.slice(I,te)==_}function pa(h){return h=wi(h),h&&rt.test(h)?h.replace(qe,Js):h}function lu(h){return h=wi(h),h&&Nr.test(h)?h.replace(qr,"\\$&"):h}var Cl=Hc(function(h,_,I){return h+(I?"-":"")+_.toLowerCase()}),Ws=Hc(function(h,_,I){return h+(I?" ":"")+_.toLowerCase()}),Xi=_h("toLowerCase");function xs(h,_,I){h=wi(h),_=zn(_);var V=_?Tn(h):0;if(!_||V>=_)return h;var te=(_-V)/2;return Dd(cl(te),I)+h+Dd(ul(te),I)}function Hs(h,_,I){h=wi(h),_=zn(_);var V=_?Tn(h):0;return _&&V<_?h+Dd(_-V,I):h}function qs(h,_,I){h=wi(h),_=zn(_);var V=_?Tn(h):0;return _&&V<_?Dd(_-V,I)+h:h}function Qa(h,_,I){return I||_==null?_=0:_&&(_=+_),mh(wi(h).replace(St,""),_||0)}function uu(h,_,I){return(I?Jo(h,_,I):_===p)?_=1:_=zn(_),It(wi(h),_)}function bs(){var h=arguments,_=wi(h[0]);return h.length<3?_:_.replace(h[1],h[2])}var Pl=Hc(function(h,_,I){return h+(I?"_":"")+_.toLowerCase()});function ns(h,_,I){return I&&typeof I!="number"&&Jo(h,_,I)&&(_=I=p),I=I===p?Oe:I>>>0,I?(h=wi(h),h&&(typeof _=="string"||_!=null&&!Lf(_))&&(_=In(_),!_&&ll(h))?$s(io(h),0,I):h.split(_,I)):[]}var ws=Hc(function(h,_,I){return h+(I?" ":"")+xd(_)});function Ss(h,_,I){return h=wi(h),I=I==null?0:ru(zn(I),0,h.length),_=In(_),h.slice(I,I+_.length)==_}function Uo(h,_,I){var V=ce.templateSettings;I&&Jo(h,_,I)&&(_=p),h=wi(h),_=vd({},_,V,qf);var te=vd({},_.imports,V.imports,qf),ye=F(te),Be=pn(te,ye),He,lt,Gt=0,Ht=_.interpolate||Zo,rr="__p += '",Ar=xu((_.escape||Zo).source+"|"+Ht.source+"|"+(Ht===Lt?Vn:Zo).source+"|"+(_.evaluate||Zo).source+"|$","g"),en="//# sourceURL="+(Gn.call(_,"sourceURL")?(_.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Lr+"]")+`
`;h.replace(Ar,function(vn,ni,mi,Cc,du,Pc){return mi||(mi=Cc),rr+=h.slice(Gt,Pc).replace(La,zc),ni&&(He=!0,rr+=`' +
__e(`+ni+`) +
'`),du&&(lt=!0,rr+=`';
`+du+`;
__p += '`),mi&&(rr+=`' +
((__t = (`+mi+`)) == null ? '' : __t) +
'`),Gt=Pc+vn.length,vn}),rr+=`';
`;var _n=Gn.call(_,"variable")&&_.variable;if(!_n)rr=`with (obj) {
`+rr+`
}
`;else if(Or.test(_n))throw new mn(u);rr=(lt?rr.replace(ge,""):rr).replace(Ie,"$1").replace(Ue,"$1;"),rr="function("+(_n||"obj")+`) {
`+(_n?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(He?", __e = _.escape":"")+(lt?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+rr+`return __p
}`;var jn=Im(function(){return Xn(ye,en+"return "+rr).apply(p,Be)});if(jn.source=rr,$p(jn))throw jn;return jn}function ji(h){return wi(h).toLowerCase()}function wc(h){return wi(h).toUpperCase()}function Ff(h,_,I){if(h=wi(h),h&&(I||_===p))return ar(h);if(!h||!(_=In(_)))return h;var V=io(h),te=io(_),ye=fi(V,te),Be=Fo(V,te)+1;return $s(V,ye,Be).join("")}function Sc(h,_,I){if(h=wi(h),h&&(I||_===p))return h.slice(0,Dc(h)+1);if(!h||!(_=In(_)))return h;var V=io(h),te=Fo(V,io(_))+1;return $s(V,0,te).join("")}function Ny(h,_,I){if(h=wi(h),h&&(I||_===p))return h.replace(St,"");if(!h||!(_=In(_)))return h;var V=io(h),te=fi(V,io(_));return $s(V,te).join("")}function Bf(h,_){var I=re,V=it;if(So(_)){var te="separator"in _?_.separator:te;I="length"in _?zn(_.length):I,V="omission"in _?In(_.omission):V}h=wi(h);var ye=h.length;if(ll(h)){var Be=io(h);ye=Be.length}if(I>=ye)return h;var He=I-Tn(V);if(He<1)return V;var lt=Be?$s(Be,0,He).join(""):h.slice(0,He);if(te===p)return lt+V;if(Be&&(He+=lt.length-He),Lf(te)){if(h.slice(He).search(te)){var Gt,Ht=lt;for(te.global||(te=xu(te.source,wi(Zn.exec(te))+"g")),te.lastIndex=0;Gt=te.exec(Ht);)var rr=Gt.index;lt=lt.slice(0,rr===p?He:rr)}}else if(h.indexOf(In(te),He)!=He){var Ar=lt.lastIndexOf(te);Ar>-1&&(lt=lt.slice(0,Ar))}return lt+V}function Jd(h){return h=wi(h),h&&We.test(h)?h.replace(fe,Uh):h}var Nf=Hc(function(h,_,I){return h+(I?" ":"")+_.toUpperCase()}),xd=_h("toUpperCase");function ef(h,_,I){return h=wi(h),_=I?p:_,_===p?uf(h)?kd(h):sl(h):h.match(_)||[]}var Im=Ye(function(h,_){try{return yo(h,p,_)}catch(I){return $p(I)?I:new mn(I)}}),Mg=Du(function(h,_){return Ri(_,function(I){I=Ka(I),Bl(h,I,nr(h[I],h))}),h});function kg(h){var _=h==null?0:h.length,I=an();return h=_?Kn(h,function(V){if(typeof V[1]!="function")throw new ta(M);return[I(V[0]),V[1]]}):[],Ye(function(V){for(var te=-1;++te<_;){var ye=h[te];if(yo(ye[0],this,V))return yo(ye[1],this,V)}})}function Ag(h){return Nl(ia(h,de))}function yp(h){return function(){return h}}function Mm(h,_){return h==null||h!==h?_:h}var zh=Lu(),Rg=Lu(!0);function El(h){return h}function km(h){return E(typeof h=="function"?h:ia(h,de))}function $y(h){return Z(ia(h,de))}function jy(h,_){return X(h,ia(_,de))}var Uy=Ye(function(h,_){return function(I){return jo(I,h,_)}}),Vy=Ye(function(h,_){return function(I){return jo(h,I,_)}});function Am(h,_,I){var V=F(_),te=Li(_,V);I==null&&!(So(_)&&(te.length||!V.length))&&(I=_,_=h,h=this,te=Li(_,F(_)));var ye=!(So(I)&&"chain"in I)||!!I.chain,Be=Rh(h);return Ri(te,function(He){var lt=_[He];h[He]=lt,Be&&(h.prototype[He]=function(){var Gt=this.__chain__;if(ye||Gt){var Ht=h(this.__wrapped__),rr=Ht.__actions__=Us(this.__actions__);return rr.push({func:lt,args:arguments,thisArg:h}),Ht.__chain__=Gt,Ht}return lt.apply(h,$a([this.value()],arguments))})}),h}function Zy(){return di._===this&&(di._=Bc),this}function Rm(){}function Tc(h){return h=zn(h),Ye(function(_){return _e(_,h)})}var Zp=Ld(Kn),zg=Ld(Na),Gy=Ld(yu);function Lg(h){return zr(h)?$(Ka(h)):Me(h)}function Wy(h){return function(_){return h==null?p:yl(h,_)}}var za=Wf(),cu=Wf(!0);function Lh(){return[]}function hu(){return!1}function tf(){return{}}function rh(){return""}function Bb(){return!0}function Nb(h,_){if(h=zn(h),h<1||h>xt)return[];var I=Oe,V=Bo(h,Oe);_=an(_),h-=Oe;for(var te=ot(V,_);++I<h;)_(I);return te}function $b(h){return Mn(h)?Kn(h,Ka):su(h)?[h]:Us(Kc(wi(h)))}function jb(h){var _=++bu;return wi(h)+_}var Ub=xh(function(h,_){return h+_},0),Vb=Qo("ceil"),Zb=xh(function(h,_){return h/_},1),Gb=Qo("floor");function Wb(h){return h&&h.length?uc(h,El,oa):p}function Hb(h,_){return h&&h.length?uc(h,an(_,2),oa):p}function qb(h){return Wu(h,El)}function Kb(h,_){return Wu(h,an(_,2))}function Xb(h){return h&&h.length?uc(h,El,N):p}function Yb(h,_){return h&&h.length?uc(h,an(_,2),N):p}var Qb=xh(function(h,_){return h*_},1),Jb=Qo("round"),ew=xh(function(h,_){return h-_},0);function tw(h){return h&&h.length?_t(h,El):0}function rw(h,_){return h&&h.length?_t(h,an(_,2)):0}return ce.after=Ge,ce.ary=Et,ce.assign=bm,ce.assignIn=wm,ce.assignInWith=vd,ce.assignWith=Sm,ce.at=Ig,ce.before=Yt,ce.bind=nr,ce.bindAll=Mg,ce.bindKey=Qt,ce.castArray=Ly,ce.chain=Cf,ce.chunk=Ud,ce.compact=fc,ce.concat=Wl,ce.cond=kg,ce.conforms=Ag,ce.constant=yp,ce.countBy=up,ce.create=Tm,ce.curry=Pr,ce.curryRight=Dr,ce.debounce=jr,ce.defaults=Vp,ce.defaultsDeep=gp,ce.defer=ho,ce.delay=ft,ce.difference=Yn,ce.differenceBy=bo,ce.differenceWith=wo,ce.drop=ys,ce.dropRight=Xa,ce.dropRightWhile=ud,ce.dropWhile=es,ce.fill=Vd,ce.filter=Mh,ce.flatMap=md,ce.flatMapDeep=Ef,ce.flatMapDepth=Fp,ce.flatten=cd,ce.flattenDeep=hd,ce.flattenDepth=da,ce.flip=Ke,ce.flow=zh,ce.flowRight=Rg,ce.fromPairs=vf,ce.functions=n,ce.functionsIn=s,ce.groupBy=Mf,ce.initial=Gd,ce.intersection=dd,ce.intersectionBy=mc,ce.intersectionWith=Wd,ce.invert=S,ce.invertBy=k,ce.invokeMap=cp,ce.iteratee=km,ce.keyBy=Bp,ce.keys=F,ce.keysIn=j,ce.map=_c,ce.mapKeys=W,ce.mapValues=K,ce.matches=$y,ce.matchesProperty=jy,ce.memoize=vt,ce.merge=ee,ce.mergeWith=ie,ce.method=Uy,ce.methodOf=Vy,ce.mixin=Am,ce.negate=hr,ce.nthArg=Tc,ce.omit=me,ce.omitBy=Ce,ce.once=Vr,ce.orderBy=hp,ce.over=Zp,ce.overArgs=ln,ce.overEvery=zg,ce.overSome=Gy,ce.partial=Yr,ce.partialRight=fn,ce.partition=Qd,ce.pick=Ve,ce.pickBy=Re,ce.property=Lg,ce.propertyOf=Wy,ce.pull=Yc,ce.pullAll=Th,ce.pullAllBy=Aa,ce.pullAllWith=Qc,ce.pullAt=Hl,ce.range=za,ce.rangeRight=cu,ce.rearg=_s,ce.reject=o,ce.remove=Ra,ce.rest=ai,ce.reverse=xf,ce.sampleSize=x,ce.set=pe,ce.setWith=Fe,ce.shuffle=C,ce.slice=tp,ce.sortBy=oe,ce.sortedUniq=np,ce.sortedUniqBy=Eh,ce.split=ns,ce.spread=vc,ce.tail=ip,ce.take=bf,ce.takeRight=wf,ce.takeRightWhile=Kd,ce.takeWhile=Ap,ce.tap=Dp,ce.throttle=pm,ce.thru=Sl,ce.toArray=vm,ce.toPairs=pt,ce.toPairsIn=jt,ce.toPath=$b,ce.toPlainObject=Pg,ce.transform=bt,ce.unary=Ry,ce.union=hm,ce.unionBy=Xd,ce.unionWith=Rp,ce.uniq=eh,ce.uniqBy=dm,ce.uniqWith=fd,ce.unset=Mt,ce.unzip=Sf,ce.unzipWith=qi,ce.update=Kt,ce.updateWith=Vt,ce.values=qt,ce.valuesIn=Rt,ce.without=fm,ce.words=ef,ce.wrap=zy,ce.xor=zp,ce.xorBy=Yd,ce.xorWith=Lp,ce.zip=Tf,ce.zipObject=op,ce.zipObjectDeep=Ao,ce.zipWith=Ya,ce.entries=pt,ce.entriesIn=jt,ce.extend=wm,ce.extendWith=vd,Am(ce,ce),ce.add=Ub,ce.attempt=Im,ce.camelCase=Rr,ce.capitalize=Rn,ce.ceil=Vb,ce.clamp=Er,ce.clone=Dy,ce.cloneDeep=yd,ce.cloneDeepWith=dg,ce.cloneWith=mm,ce.conformsTo=fg,ce.deburr=Ki,ce.defaultTo=Mm,ce.divide=Zb,ce.endsWith=rs,ce.eq=Bu,ce.escape=pa,ce.escapeRegExp=lu,ce.every=yc,ce.find=th,ce.findIndex=Xc,ce.findKey=Cm,ce.findLast=kh,ce.findLastIndex=Zd,ce.findLastKey=Pm,ce.floor=Gb,ce.forEach=If,ce.forEachRight=gd,ce.forIn=Em,ce.forInRight=By,ce.forOwn=i,ce.forOwnRight=t,ce.get=f,ce.gt=pg,ce.gte=mg,ce.has=v,ce.hasIn=b,ce.head=pc,ce.identity=El,ce.includes=kf,ce.indexOf=Fu,ce.inRange=Wr,ce.invoke=R,ce.isArguments=Ah,ce.isArray=Mn,ce.isArrayBuffer=dp,ce.isArrayLike=Tl,ce.isArrayLikeObject=Ro,ce.isBoolean=gg,ce.isBuffer=vs,ce.isDate=Rf,ce.isElement=yg,ce.isEmpty=_g,ce.isEqual=vg,ce.isEqualWith=xg,ce.isError=$p,ce.isFinite=bg,ce.isFunction=Rh,ce.isInteger=gm,ce.isLength=xc,ce.isMap=ym,ce.isMatch=wg,ce.isMatchWith=Oy,ce.isNaN=Fy,ce.isNative=Sg,ce.isNil=Tg,ce.isNull=fp,ce.isNumber=pp,ce.isObject=So,ce.isObjectLike=zo,ce.isPlainObject=zf,ce.isRegExp=Lf,ce.isSafeInteger=jp,ce.isSet=mp,ce.isString=Up,ce.isSymbol=su,ce.isTypedArray=Df,ce.isUndefined=Of,ce.isWeakMap=fa,ce.isWeakSet=_d,ce.join=gc,ce.kebabCase=Cl,ce.last=ts,ce.lastIndexOf=Hd,ce.lowerCase=Ws,ce.lowerFirst=Xi,ce.lt=_m,ce.lte=Cg,ce.max=Wb,ce.maxBy=Hb,ce.mean=qb,ce.meanBy=Kb,ce.min=Xb,ce.minBy=Yb,ce.stubArray=Lh,ce.stubFalse=hu,ce.stubObject=tf,ce.stubString=rh,ce.stubTrue=Bb,ce.multiply=Qb,ce.nth=qd,ce.noConflict=Zy,ce.noop=Rm,ce.now=Ae,ce.pad=xs,ce.padEnd=Hs,ce.padStart=qs,ce.parseInt=Qa,ce.random=Gr,ce.reduce=Np,ce.reduceRight=Af,ce.repeat=uu,ce.replace=bs,ce.result=H,ce.round=Jb,ce.runInContext=tt,ce.sample=l,ce.size=z,ce.snakeCase=Pl,ce.some=U,ce.sortedIndex=Ch,ce.sortedIndexBy=Mp,ce.sortedIndexOf=Jc,ce.sortedLastIndex=kp,ce.sortedLastIndexBy=rp,ce.sortedLastIndexOf=Ph,ce.startCase=ws,ce.startsWith=Ss,ce.subtract=ew,ce.sum=tw,ce.sumBy=rw,ce.template=Uo,ce.times=Nb,ce.toFinite=bc,ce.toInteger=zn,ce.toLength=xm,ce.toLower=ji,ce.toNumber=au,ce.toSafeInteger=Eg,ce.toString=wi,ce.toUpper=wc,ce.trim=Ff,ce.trimEnd=Sc,ce.trimStart=Ny,ce.truncate=Bf,ce.unescape=Jd,ce.uniqueId=jb,ce.upperCase=Nf,ce.upperFirst=xd,ce.each=If,ce.eachRight=gd,ce.first=pc,Am(ce,function(){var h={};return Bs(ce,function(_,I){Gn.call(ce.prototype,I)||(h[I]=_)}),h}(),{chain:!1}),ce.VERSION=T,Ri(["bind","bindKey","curry","curryRight","partial","partialRight"],function(h){ce[h].placeholder=ce}),Ri(["drop","take"],function(h,_){gn.prototype[h]=function(I){I=I===p?1:Ni(zn(I),0);var V=this.__filtered__&&!_?new gn(this):this.clone();return V.__filtered__?V.__takeCount__=Bo(I,V.__takeCount__):V.__views__.push({size:Bo(I,Oe),type:h+(V.__dir__<0?"Right":"")}),V},gn.prototype[h+"Right"]=function(I){return this.reverse()[h](I).reverse()}}),Ri(["filter","map","takeWhile"],function(h,_){var I=_+1,V=I==tr||I==xr;gn.prototype[h]=function(te){var ye=this.clone();return ye.__iteratees__.push({iteratee:an(te,3),type:I}),ye.__filtered__=ye.__filtered__||V,ye}}),Ri(["head","last"],function(h,_){var I="take"+(_?"Right":"");gn.prototype[h]=function(){return this[I](1).value()[0]}}),Ri(["initial","tail"],function(h,_){var I="drop"+(_?"":"Right");gn.prototype[h]=function(){return this.__filtered__?new gn(this):this[I](1)}}),gn.prototype.compact=function(){return this.filter(El)},gn.prototype.find=function(h){return this.filter(h).head()},gn.prototype.findLast=function(h){return this.reverse().find(h)},gn.prototype.invokeMap=Ye(function(h,_){return typeof h=="function"?new gn(this):this.map(function(I){return jo(I,h,_)})}),gn.prototype.reject=function(h){return this.filter(hr(an(h)))},gn.prototype.slice=function(h,_){h=zn(h);var I=this;return I.__filtered__&&(h>0||_<0)?new gn(I):(h<0?I=I.takeRight(-h):h&&(I=I.drop(h)),_!==p&&(_=zn(_),I=_<0?I.dropRight(-_):I.take(_-h)),I)},gn.prototype.takeRightWhile=function(h){return this.reverse().takeWhile(h).reverse()},gn.prototype.toArray=function(){return this.take(Oe)},Bs(gn.prototype,function(h,_){var I=/^(?:filter|find|map|reject)|While$/.test(_),V=/^(?:head|last)$/.test(_),te=ce[V?"take"+(_=="last"?"Right":""):_],ye=V||/^find/.test(_);te&&(ce.prototype[_]=function(){var Be=this.__wrapped__,He=V?[1]:arguments,lt=Be instanceof gn,Gt=He[0],Ht=lt||Mn(Be),rr=function(ni){var mi=te.apply(ce,$a([ni],He));return V&&Ar?mi[0]:mi};Ht&&I&&typeof Gt=="function"&&Gt.length!=1&&(lt=Ht=!1);var Ar=this.__chain__,en=!!this.__actions__.length,_n=ye&&!Ar,jn=lt&&!en;if(!ye&&Ht){Be=jn?Be:new gn(this);var vn=h.apply(Be,He);return vn.__actions__.push({func:Sl,args:[rr],thisArg:p}),new Ho(vn,Ar)}return _n&&jn?h.apply(this,He):(vn=this.thru(rr),_n?V?vn.value()[0]:vn.value():vn)})}),Ri(["pop","push","shift","sort","splice","unshift"],function(h){var _=As[h],I=/^(?:push|sort|unshift)$/.test(h)?"tap":"thru",V=/^(?:pop|shift)$/.test(h);ce.prototype[h]=function(){var te=arguments;if(V&&!this.__chain__){var ye=this.value();return _.apply(Mn(ye)?ye:[],te)}return this[I](function(Be){return _.apply(Mn(Be)?Be:[],te)})}}),Bs(gn.prototype,function(h,_){var I=ce[_];if(I){var V=I.name+"";Gn.call(Ti,V)||(Ti[V]=[]),Ti[V].push({name:_,func:I})}}),Ti[vh(p,mt).name]=[{name:"wrapper",func:p}],gn.prototype.clone=eu,gn.prototype.reverse=so,gn.prototype.value=fl,ce.prototype.at=pd,ce.prototype.chain=Ih,ce.prototype.commit=Pf,ce.prototype.next=sp,ce.prototype.plant=Op,ce.prototype.reverse=Gs,ce.prototype.toJSON=ce.prototype.valueOf=ce.prototype.value=lp,ce.prototype.first=ce.prototype.head,xa&&(ce.prototype[xa]=ap),ce},vu=Hu();cs?((cs.exports=vu)._=vu,nl._=vu):di._=vu}).call(fE)}(jm,jm.exports)),jm.exports}pE();var Yg={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var mE=Yg.exports,U0;function gE(){return U0||(U0=1,function(c,m){((p,T)=>{c.exports=T()})(mE,function p(){var T=typeof self<"u"?self:typeof window<"u"?window:T!==void 0?T:{},P,O=!T.document&&!!T.postMessage,M=T.IS_PAPA_WORKER||!1,u={},J=0,Y={};function ve(ze){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function($e){var re=Qe($e);re.chunkSize=parseInt(re.chunkSize),$e.step||$e.chunk||(re.chunkSize=null),this._handle=new xe(re),(this._handle.streamer=this)._config=re}).call(this,ze),this.parseChunk=function($e,re){var it=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<it){let zt=this._config.newline;zt||(st=this._config.quoteChar||'"',zt=this._handle.guessLineEndings($e,st)),$e=[...$e.split(zt).slice(it)].join(zt)}this.isFirstChunk&&yt(this._config.beforeFirstChunk)&&(st=this._config.beforeFirstChunk($e))!==void 0&&($e=st),this.isFirstChunk=!1,this._halted=!1;var it=this._partialLine+$e,st=(this._partialLine="",this._handle.parse(it,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if($e=st.meta.cursor,it=(this._finished||(this._partialLine=it.substring($e-this._baseIndex),this._baseIndex=$e),st&&st.data&&(this._rowCount+=st.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),M)T.postMessage({results:st,workerId:Y.WORKER_ID,finished:it});else if(yt(this._config.chunk)&&!re){if(this._config.chunk(st,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=st=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(st.data),this._completeResults.errors=this._completeResults.errors.concat(st.errors),this._completeResults.meta=st.meta),this._completed||!it||!yt(this._config.complete)||st&&st.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),it||st&&st.meta.paused||this._nextChunk(),st}this._halted=!0},this._sendError=function($e){yt(this._config.error)?this._config.error($e):M&&this._config.error&&T.postMessage({workerId:Y.WORKER_ID,error:$e,finished:!1})}}function de(ze){var $e;(ze=ze||{}).chunkSize||(ze.chunkSize=Y.RemoteChunkSize),ve.call(this,ze),this._nextChunk=O?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(re){this._input=re,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if($e=new XMLHttpRequest,this._config.withCredentials&&($e.withCredentials=this._config.withCredentials),O||($e.onload=nt(this._chunkLoaded,this),$e.onerror=nt(this._chunkError,this)),$e.open(this._config.downloadRequestBody?"POST":"GET",this._input,!O),this._config.downloadRequestHeaders){var re,it=this._config.downloadRequestHeaders;for(re in it)$e.setRequestHeader(re,it[re])}var st;this._config.chunkSize&&(st=this._start+this._config.chunkSize-1,$e.setRequestHeader("Range","bytes="+this._start+"-"+st));try{$e.send(this._config.downloadRequestBody)}catch(zt){this._chunkError(zt.message)}O&&$e.status===0&&this._chunkError()}},this._chunkLoaded=function(){$e.readyState===4&&($e.status<200||400<=$e.status?this._chunkError():(this._start+=this._config.chunkSize||$e.responseText.length,this._finished=!this._config.chunkSize||this._start>=(re=>(re=re.getResponseHeader("Content-Range"))!==null?parseInt(re.substring(re.lastIndexOf("/")+1)):-1)($e),this.parseChunk($e.responseText)))},this._chunkError=function(re){re=$e.statusText||re,this._sendError(new Error(re))}}function Te(ze){(ze=ze||{}).chunkSize||(ze.chunkSize=Y.LocalChunkSize),ve.call(this,ze);var $e,re,it=typeof FileReader<"u";this.stream=function(st){this._input=st,re=st.slice||st.webkitSlice||st.mozSlice,it?(($e=new FileReader).onload=nt(this._chunkLoaded,this),$e.onerror=nt(this._chunkError,this)):$e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var st=this._input,zt=(this._config.chunkSize&&(zt=Math.min(this._start+this._config.chunkSize,this._input.size),st=re.call(st,this._start,zt)),$e.readAsText(st,this._config.encoding));it||this._chunkLoaded({target:{result:zt}})},this._chunkLoaded=function(st){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(st.target.result)},this._chunkError=function(){this._sendError($e.error)}}function le(ze){var $e;ve.call(this,ze=ze||{}),this.stream=function(re){return $e=re,this._nextChunk()},this._nextChunk=function(){var re,it;if(!this._finished)return re=this._config.chunkSize,$e=re?(it=$e.substring(0,re),$e.substring(re)):(it=$e,""),this._finished=!$e,this.parseChunk(it)}}function we(ze){ve.call(this,ze=ze||{});var $e=[],re=!0,it=!1;this.pause=function(){ve.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){ve.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(st){this._input=st,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){it&&$e.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),$e.length?this.parseChunk($e.shift()):re=!0},this._streamData=nt(function(st){try{$e.push(typeof st=="string"?st:st.toString(this._config.encoding)),re&&(re=!1,this._checkIsFinished(),this.parseChunk($e.shift()))}catch(zt){this._streamError(zt)}},this),this._streamError=nt(function(st){this._streamCleanUp(),this._sendError(st)},this),this._streamEnd=nt(function(){this._streamCleanUp(),it=!0,this._streamData("")},this),this._streamCleanUp=nt(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function xe(ze){var $e,re,it,st,zt=Math.pow(2,53),tr=-zt,Cr=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,xr=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,or=this,xt=0,Pt=0,Wt=!1,Oe=!1,ct=[],Ut={data:[],errors:[],meta:{}};function ur(fr){return ze.skipEmptyLines==="greedy"?fr.join("").trim()==="":fr.length===1&&fr[0].length===0}function At(){if(Ut&&it&&(Sr("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+Y.DefaultDelimiter+"'"),it=!1),ze.skipEmptyLines&&(Ut.data=Ut.data.filter(function(tn){return!ur(tn)})),ir()){let tn=function($r,br){yt(ze.transformHeader)&&($r=ze.transformHeader($r,br)),ct.push($r)};var Tr=tn;if(Ut)if(Array.isArray(Ut.data[0])){for(var fr=0;ir()&&fr<Ut.data.length;fr++)Ut.data[fr].forEach(tn);Ut.data.splice(0,1)}else Ut.data.forEach(tn)}function pr(tn,$r){for(var br=ze.header?{}:[],nn=0;nn<tn.length;nn++){var Hr=nn,dn=tn[nn],dn=((on,bn)=>(sn=>(ze.dynamicTypingFunction&&ze.dynamicTyping[sn]===void 0&&(ze.dynamicTyping[sn]=ze.dynamicTypingFunction(sn)),(ze.dynamicTyping[sn]||ze.dynamicTyping)===!0))(on)?bn==="true"||bn==="TRUE"||bn!=="false"&&bn!=="FALSE"&&((sn=>{if(Cr.test(sn)&&(sn=parseFloat(sn),tr<sn&&sn<zt))return 1})(bn)?parseFloat(bn):xr.test(bn)?new Date(bn):bn===""?null:bn):bn)(Hr=ze.header?nn>=ct.length?"__parsed_extra":ct[nn]:Hr,dn=ze.transform?ze.transform(dn,Hr):dn);Hr==="__parsed_extra"?(br[Hr]=br[Hr]||[],br[Hr].push(dn)):br[Hr]=dn}return ze.header&&(nn>ct.length?Sr("FieldMismatch","TooManyFields","Too many fields: expected "+ct.length+" fields but parsed "+nn,Pt+$r):nn<ct.length&&Sr("FieldMismatch","TooFewFields","Too few fields: expected "+ct.length+" fields but parsed "+nn,Pt+$r)),br}var Qr;Ut&&(ze.header||ze.dynamicTyping||ze.transform)&&(Qr=1,!Ut.data.length||Array.isArray(Ut.data[0])?(Ut.data=Ut.data.map(pr),Qr=Ut.data.length):Ut.data=pr(Ut.data,0),ze.header&&Ut.meta&&(Ut.meta.fields=ct),Pt+=Qr)}function ir(){return ze.header&&ct.length===0}function Sr(fr,pr,Qr,Tr){fr={type:fr,code:pr,message:Qr},Tr!==void 0&&(fr.row=Tr),Ut.errors.push(fr)}yt(ze.step)&&(st=ze.step,ze.step=function(fr){Ut=fr,ir()?At():(At(),Ut.data.length!==0&&(xt+=fr.data.length,ze.preview&&xt>ze.preview?re.abort():(Ut.data=Ut.data[0],st(Ut,or))))}),this.parse=function(fr,pr,Qr){var Tr=ze.quoteChar||'"',Tr=(ze.newline||(ze.newline=this.guessLineEndings(fr,Tr)),it=!1,ze.delimiter?yt(ze.delimiter)&&(ze.delimiter=ze.delimiter(fr),Ut.meta.delimiter=ze.delimiter):((Tr=((tn,$r,br,nn,Hr)=>{var dn,on,bn,sn;Hr=Hr||[",","	","|",";",Y.RECORD_SEP,Y.UNIT_SEP];for(var kn=0;kn<Hr.length;kn++){for(var wr,Un=Hr[kn],Wn=0,Si=0,Jn=0,Hn=(bn=void 0,new mt({comments:nn,delimiter:Un,newline:$r,preview:10}).parse(tn)),Bn=0;Bn<Hn.data.length;Bn++)br&&ur(Hn.data[Bn])?Jn++:(wr=Hn.data[Bn].length,Si+=wr,bn===void 0?bn=wr:0<wr&&(Wn+=Math.abs(wr-bn),bn=wr));0<Hn.data.length&&(Si/=Hn.data.length-Jn),(on===void 0||Wn<=on)&&(sn===void 0||sn<Si)&&1.99<Si&&(on=Wn,dn=Un,sn=Si)}return{successful:!!(ze.delimiter=dn),bestDelimiter:dn}})(fr,ze.newline,ze.skipEmptyLines,ze.comments,ze.delimitersToGuess)).successful?ze.delimiter=Tr.bestDelimiter:(it=!0,ze.delimiter=Y.DefaultDelimiter),Ut.meta.delimiter=ze.delimiter),Qe(ze));return ze.preview&&ze.header&&Tr.preview++,$e=fr,re=new mt(Tr),Ut=re.parse($e,pr,Qr),At(),Wt?{meta:{paused:!0}}:Ut||{meta:{paused:!1}}},this.paused=function(){return Wt},this.pause=function(){Wt=!0,re.abort(),$e=yt(ze.chunk)?"":$e.substring(re.getCharIndex())},this.resume=function(){or.streamer._halted?(Wt=!1,or.streamer.parseChunk($e,!0)):setTimeout(or.resume,3)},this.aborted=function(){return Oe},this.abort=function(){Oe=!0,re.abort(),Ut.meta.aborted=!0,yt(ze.complete)&&ze.complete(Ut),$e=""},this.guessLineEndings=function(tn,Tr){tn=tn.substring(0,1048576);var Tr=new RegExp(Ze(Tr)+"([^]*?)"+Ze(Tr),"gm"),Qr=(tn=tn.replace(Tr,"")).split("\r"),Tr=tn.split(`
`),tn=1<Tr.length&&Tr[0].length<Qr[0].length;if(Qr.length===1||tn)return`
`;for(var $r=0,br=0;br<Qr.length;br++)Qr[br][0]===`
`&&$r++;return $r>=Qr.length/2?`\r
`:"\r"}}function Ze(ze){return ze.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function mt(ze){var $e=(ze=ze||{}).delimiter,re=ze.newline,it=ze.comments,st=ze.step,zt=ze.preview,tr=ze.fastMode,Cr=null,xr=!1,or=ze.quoteChar==null?'"':ze.quoteChar,xt=or;if(ze.escapeChar!==void 0&&(xt=ze.escapeChar),(typeof $e!="string"||-1<Y.BAD_DELIMITERS.indexOf($e))&&($e=","),it===$e)throw new Error("Comment character same as delimiter");it===!0?it="#":(typeof it!="string"||-1<Y.BAD_DELIMITERS.indexOf(it))&&(it=!1),re!==`
`&&re!=="\r"&&re!==`\r
`&&(re=`
`);var Pt=0,Wt=!1;this.parse=function(Oe,ct,Ut){if(typeof Oe!="string")throw new Error("Input must be a string");var ur=Oe.length,At=$e.length,ir=re.length,Sr=it.length,fr=yt(st),pr=[],Qr=[],Tr=[],tn=Pt=0;if(!Oe)return Wn();if(tr||tr!==!1&&Oe.indexOf(or)===-1){for(var $r=Oe.split(re),br=0;br<$r.length;br++){if(Tr=$r[br],Pt+=Tr.length,br!==$r.length-1)Pt+=re.length;else if(Ut)return Wn();if(!it||Tr.substring(0,Sr)!==it){if(fr){if(pr=[],sn(Tr.split($e)),Si(),Wt)return Wn()}else sn(Tr.split($e));if(zt&&zt<=br)return pr=pr.slice(0,zt),Wn(!0)}}return Wn()}for(var nn=Oe.indexOf($e,Pt),Hr=Oe.indexOf(re,Pt),dn=new RegExp(Ze(xt)+Ze(or),"g"),on=Oe.indexOf(or,Pt);;)if(Oe[Pt]===or)for(on=Pt,Pt++;;){if((on=Oe.indexOf(or,on+1))===-1)return Ut||Qr.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:pr.length,index:Pt}),wr();if(on===ur-1)return wr(Oe.substring(Pt,on).replace(dn,or));if(or===xt&&Oe[on+1]===xt)on++;else if(or===xt||on===0||Oe[on-1]!==xt){nn!==-1&&nn<on+1&&(nn=Oe.indexOf($e,on+1));var bn=kn((Hr=Hr!==-1&&Hr<on+1?Oe.indexOf(re,on+1):Hr)===-1?nn:Math.min(nn,Hr));if(Oe.substr(on+1+bn,At)===$e){Tr.push(Oe.substring(Pt,on).replace(dn,or)),Oe[Pt=on+1+bn+At]!==or&&(on=Oe.indexOf(or,Pt)),nn=Oe.indexOf($e,Pt),Hr=Oe.indexOf(re,Pt);break}if(bn=kn(Hr),Oe.substring(on+1+bn,on+1+bn+ir)===re){if(Tr.push(Oe.substring(Pt,on).replace(dn,or)),Un(on+1+bn+ir),nn=Oe.indexOf($e,Pt),on=Oe.indexOf(or,Pt),fr&&(Si(),Wt))return Wn();if(zt&&pr.length>=zt)return Wn(!0);break}Qr.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:pr.length,index:Pt}),on++}}else if(it&&Tr.length===0&&Oe.substring(Pt,Pt+Sr)===it){if(Hr===-1)return Wn();Pt=Hr+ir,Hr=Oe.indexOf(re,Pt),nn=Oe.indexOf($e,Pt)}else if(nn!==-1&&(nn<Hr||Hr===-1))Tr.push(Oe.substring(Pt,nn)),Pt=nn+At,nn=Oe.indexOf($e,Pt);else{if(Hr===-1)break;if(Tr.push(Oe.substring(Pt,Hr)),Un(Hr+ir),fr&&(Si(),Wt))return Wn();if(zt&&pr.length>=zt)return Wn(!0)}return wr();function sn(Jn){pr.push(Jn),tn=Pt}function kn(Jn){var Hn=0;return Hn=Jn!==-1&&(Jn=Oe.substring(on+1,Jn))&&Jn.trim()===""?Jn.length:Hn}function wr(Jn){return Ut||(Jn===void 0&&(Jn=Oe.substring(Pt)),Tr.push(Jn),Pt=ur,sn(Tr),fr&&Si()),Wn()}function Un(Jn){Pt=Jn,sn(Tr),Tr=[],Hr=Oe.indexOf(re,Pt)}function Wn(Jn){if(ze.header&&!ct&&pr.length&&!xr){var Hn=pr[0],Bn=Object.create(null),Ji=new Set(Hn);let Gi=!1;for(let Vi=0;Vi<Hn.length;Vi++){let ei=Hn[Vi];if(Bn[ei=yt(ze.transformHeader)?ze.transformHeader(ei,Vi):ei]){let ii,mo=Bn[ei];for(;ii=ei+"_"+mo,mo++,Ji.has(ii););Ji.add(ii),Hn[Vi]=ii,Bn[ei]++,Gi=!0,(Cr=Cr===null?{}:Cr)[ii]=ei}else Bn[ei]=1,Hn[Vi]=ei;Ji.add(ei)}Gi&&console.warn("Duplicate headers found and renamed."),xr=!0}return{data:pr,errors:Qr,meta:{delimiter:$e,linebreak:re,aborted:Wt,truncated:!!Jn,cursor:tn+(ct||0),renamedHeaders:Cr}}}function Si(){st(Wn()),pr=[],Qr=[]}},this.abort=function(){Wt=!0},this.getCharIndex=function(){return Pt}}function kt(ze){var $e=ze.data,re=u[$e.workerId],it=!1;if($e.error)re.userError($e.error,$e.file);else if($e.results&&$e.results.data){var st={abort:function(){it=!0,Tt($e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:Je,resume:Je};if(yt(re.userStep)){for(var zt=0;zt<$e.results.data.length&&(re.userStep({data:$e.results.data[zt],errors:$e.results.errors,meta:$e.results.meta},st),!it);zt++);delete $e.results}else yt(re.userChunk)&&(re.userChunk($e.results,st,$e.file),delete $e.results)}$e.finished&&!it&&Tt($e.workerId,$e.results)}function Tt(ze,$e){var re=u[ze];yt(re.userComplete)&&re.userComplete($e),re.terminate(),delete u[ze]}function Je(){throw new Error("Not implemented.")}function Qe(ze){if(typeof ze!="object"||ze===null)return ze;var $e,re=Array.isArray(ze)?[]:{};for($e in ze)re[$e]=Qe(ze[$e]);return re}function nt(ze,$e){return function(){ze.apply($e,arguments)}}function yt(ze){return typeof ze=="function"}return Y.parse=function(ze,$e){var re=($e=$e||{}).dynamicTyping||!1;if(yt(re)&&($e.dynamicTypingFunction=re,re={}),$e.dynamicTyping=re,$e.transform=!!yt($e.transform)&&$e.transform,!$e.worker||!Y.WORKERS_SUPPORTED)return re=null,Y.NODE_STREAM_INPUT,typeof ze=="string"?(ze=(it=>it.charCodeAt(0)!==65279?it:it.slice(1))(ze),re=new($e.download?de:le)($e)):ze.readable===!0&&yt(ze.read)&&yt(ze.on)?re=new we($e):(T.File&&ze instanceof File||ze instanceof Object)&&(re=new Te($e)),re.stream(ze);(re=(()=>{var it;return!!Y.WORKERS_SUPPORTED&&(it=(()=>{var st=T.URL||T.webkitURL||null,zt=p.toString();return Y.BLOB_URL||(Y.BLOB_URL=st.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",zt,")();"],{type:"text/javascript"})))})(),(it=new T.Worker(it)).onmessage=kt,it.id=J++,u[it.id]=it)})()).userStep=$e.step,re.userChunk=$e.chunk,re.userComplete=$e.complete,re.userError=$e.error,$e.step=yt($e.step),$e.chunk=yt($e.chunk),$e.complete=yt($e.complete),$e.error=yt($e.error),delete $e.worker,re.postMessage({input:ze,config:$e,workerId:re.id})},Y.unparse=function(ze,$e){var re=!1,it=!0,st=",",zt=`\r
`,tr='"',Cr=tr+tr,xr=!1,or=null,xt=!1,Pt=((()=>{if(typeof $e=="object"){if(typeof $e.delimiter!="string"||Y.BAD_DELIMITERS.filter(function(ct){return $e.delimiter.indexOf(ct)!==-1}).length||(st=$e.delimiter),typeof $e.quotes!="boolean"&&typeof $e.quotes!="function"&&!Array.isArray($e.quotes)||(re=$e.quotes),typeof $e.skipEmptyLines!="boolean"&&typeof $e.skipEmptyLines!="string"||(xr=$e.skipEmptyLines),typeof $e.newline=="string"&&(zt=$e.newline),typeof $e.quoteChar=="string"&&(tr=$e.quoteChar),typeof $e.header=="boolean"&&(it=$e.header),Array.isArray($e.columns)){if($e.columns.length===0)throw new Error("Option columns is empty");or=$e.columns}$e.escapeChar!==void 0&&(Cr=$e.escapeChar+tr),$e.escapeFormulae instanceof RegExp?xt=$e.escapeFormulae:typeof $e.escapeFormulae=="boolean"&&$e.escapeFormulae&&(xt=/^[=+\-@\t\r].*$/)}})(),new RegExp(Ze(tr),"g"));if(typeof ze=="string"&&(ze=JSON.parse(ze)),Array.isArray(ze)){if(!ze.length||Array.isArray(ze[0]))return Wt(null,ze,xr);if(typeof ze[0]=="object")return Wt(or||Object.keys(ze[0]),ze,xr)}else if(typeof ze=="object")return typeof ze.data=="string"&&(ze.data=JSON.parse(ze.data)),Array.isArray(ze.data)&&(ze.fields||(ze.fields=ze.meta&&ze.meta.fields||or),ze.fields||(ze.fields=Array.isArray(ze.data[0])?ze.fields:typeof ze.data[0]=="object"?Object.keys(ze.data[0]):[]),Array.isArray(ze.data[0])||typeof ze.data[0]=="object"||(ze.data=[ze.data])),Wt(ze.fields||[],ze.data||[],xr);throw new Error("Unable to serialize unrecognized input");function Wt(ct,Ut,ur){var At="",ir=(typeof ct=="string"&&(ct=JSON.parse(ct)),typeof Ut=="string"&&(Ut=JSON.parse(Ut)),Array.isArray(ct)&&0<ct.length),Sr=!Array.isArray(Ut[0]);if(ir&&it){for(var fr=0;fr<ct.length;fr++)0<fr&&(At+=st),At+=Oe(ct[fr],fr);0<Ut.length&&(At+=zt)}for(var pr=0;pr<Ut.length;pr++){var Qr=(ir?ct:Ut[pr]).length,Tr=!1,tn=ir?Object.keys(Ut[pr]).length===0:Ut[pr].length===0;if(ur&&!ir&&(Tr=ur==="greedy"?Ut[pr].join("").trim()==="":Ut[pr].length===1&&Ut[pr][0].length===0),ur==="greedy"&&ir){for(var $r=[],br=0;br<Qr;br++){var nn=Sr?ct[br]:br;$r.push(Ut[pr][nn])}Tr=$r.join("").trim()===""}if(!Tr){for(var Hr=0;Hr<Qr;Hr++){0<Hr&&!tn&&(At+=st);var dn=ir&&Sr?ct[Hr]:Hr;At+=Oe(Ut[pr][dn],Hr)}pr<Ut.length-1&&(!ur||0<Qr&&!tn)&&(At+=zt)}}return At}function Oe(ct,Ut){var ur,At;return ct==null?"":ct.constructor===Date?JSON.stringify(ct).slice(1,25):(At=!1,xt&&typeof ct=="string"&&xt.test(ct)&&(ct="'"+ct,At=!0),ur=ct.toString().replace(Pt,Cr),(At=At||re===!0||typeof re=="function"&&re(ct,Ut)||Array.isArray(re)&&re[Ut]||((ir,Sr)=>{for(var fr=0;fr<Sr.length;fr++)if(-1<ir.indexOf(Sr[fr]))return!0;return!1})(ur,Y.BAD_DELIMITERS)||-1<ur.indexOf(st)||ur.charAt(0)===" "||ur.charAt(ur.length-1)===" ")?tr+ur+tr:ur)}},Y.RECORD_SEP="",Y.UNIT_SEP="",Y.BYTE_ORDER_MARK="\uFEFF",Y.BAD_DELIMITERS=["\r",`
`,'"',Y.BYTE_ORDER_MARK],Y.WORKERS_SUPPORTED=!O&&!!T.Worker,Y.NODE_STREAM_INPUT=1,Y.LocalChunkSize=10485760,Y.RemoteChunkSize=5242880,Y.DefaultDelimiter=",",Y.Parser=mt,Y.ParserHandle=xe,Y.NetworkStreamer=de,Y.FileStreamer=Te,Y.StringStreamer=le,Y.ReadableStreamStreamer=we,T.jQuery&&((P=T.jQuery).fn.parse=function(ze){var $e=ze.config||{},re=[];return this.each(function(zt){if(!(P(this).prop("tagName").toUpperCase()==="INPUT"&&P(this).attr("type").toLowerCase()==="file"&&T.FileReader)||!this.files||this.files.length===0)return!0;for(var tr=0;tr<this.files.length;tr++)re.push({file:this.files[tr],inputElem:this,instanceConfig:P.extend({},$e)})}),it(),this;function it(){if(re.length===0)yt(ze.complete)&&ze.complete();else{var zt,tr,Cr,xr,or=re[0];if(yt(ze.before)){var xt=ze.before(or.file,or.inputElem);if(typeof xt=="object"){if(xt.action==="abort")return zt="AbortError",tr=or.file,Cr=or.inputElem,xr=xt.reason,void(yt(ze.error)&&ze.error({name:zt},tr,Cr,xr));if(xt.action==="skip")return void st();typeof xt.config=="object"&&(or.instanceConfig=P.extend(or.instanceConfig,xt.config))}else if(xt==="skip")return void st()}var Pt=or.instanceConfig.complete;or.instanceConfig.complete=function(Wt){yt(Pt)&&Pt(Wt,or.file,or.inputElem),st()},Y.parse(or.file,or.instanceConfig)}}function st(){re.splice(0,1),it()}}),M&&(T.onmessage=function(ze){ze=ze.data,Y.WORKER_ID===void 0&&ze&&(Y.WORKER_ID=ze.workerId),typeof ze.input=="string"?T.postMessage({workerId:Y.WORKER_ID,results:Y.parse(ze.input,ze.config),finished:!0}):(T.File&&ze.input instanceof File||ze.input instanceof Object)&&(ze=Y.parse(ze.input,ze.config))&&T.postMessage({workerId:Y.WORKER_ID,results:ze,finished:!0})}),(de.prototype=Object.create(ve.prototype)).constructor=de,(Te.prototype=Object.create(ve.prototype)).constructor=Te,(le.prototype=Object.create(le.prototype)).constructor=le,(we.prototype=Object.create(ve.prototype)).constructor=we,Y})}(Yg)),Yg.exports}gE();var jf={},_p={};/**
 * @license React
 * react-dom-server-legacy.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V0;function yE(){if(V0)return _p;V0=1;var c=eg();function m(B){for(var Q="https://reactjs.org/docs/error-decoder.html?invariant="+B,he=1;he<arguments.length;he++)Q+="&args[]="+encodeURIComponent(arguments[he]);return"Minified React error #"+B+"; visit "+Q+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p=Object.prototype.hasOwnProperty,T=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,P={},O={};function M(B){return p.call(O,B)?!0:p.call(P,B)?!1:T.test(B)?O[B]=!0:(P[B]=!0,!1)}function u(B,Q,he,Ee,gt,ut,Dt){this.acceptsBooleans=Q===2||Q===3||Q===4,this.attributeName=Ee,this.attributeNamespace=gt,this.mustUseProperty=he,this.propertyName=B,this.type=Q,this.sanitizeURL=ut,this.removeEmptyString=Dt}var J={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(B){J[B]=new u(B,0,!1,B,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(B){var Q=B[0];J[Q]=new u(Q,1,!1,B[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(B){J[B]=new u(B,2,!1,B.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(B){J[B]=new u(B,2,!1,B,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(B){J[B]=new u(B,3,!1,B.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(B){J[B]=new u(B,3,!0,B,null,!1,!1)}),["capture","download"].forEach(function(B){J[B]=new u(B,4,!1,B,null,!1,!1)}),["cols","rows","size","span"].forEach(function(B){J[B]=new u(B,6,!1,B,null,!1,!1)}),["rowSpan","start"].forEach(function(B){J[B]=new u(B,5,!1,B.toLowerCase(),null,!1,!1)});var Y=/[\-:]([a-z])/g;function ve(B){return B[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(B){var Q=B.replace(Y,ve);J[Q]=new u(Q,1,!1,B,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(B){var Q=B.replace(Y,ve);J[Q]=new u(Q,1,!1,B,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(B){var Q=B.replace(Y,ve);J[Q]=new u(Q,1,!1,B,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(B){J[B]=new u(B,1,!1,B.toLowerCase(),null,!1,!1)}),J.xlinkHref=new u("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(B){J[B]=new u(B,1,!1,B.toLowerCase(),null,!0,!0)});var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Te=["Webkit","ms","Moz","O"];Object.keys(de).forEach(function(B){Te.forEach(function(Q){Q=Q+B.charAt(0).toUpperCase()+B.substring(1),de[Q]=de[B]})});var le=/["'&<>]/;function we(B){if(typeof B=="boolean"||typeof B=="number")return""+B;B=""+B;var Q=le.exec(B);if(Q){var he="",Ee,gt=0;for(Ee=Q.index;Ee<B.length;Ee++){switch(B.charCodeAt(Ee)){case 34:Q="&quot;";break;case 38:Q="&amp;";break;case 39:Q="&#x27;";break;case 60:Q="&lt;";break;case 62:Q="&gt;";break;default:continue}gt!==Ee&&(he+=B.substring(gt,Ee)),gt=Ee+1,he+=Q}B=gt!==Ee?he+B.substring(gt,Ee):he}return B}var xe=/([A-Z])/g,Ze=/^ms-/,mt=Array.isArray;function kt(B,Q){return{insertionMode:B,selectedValue:Q}}function Tt(B,Q,he){switch(Q){case"select":return kt(1,he.value!=null?he.value:he.defaultValue);case"svg":return kt(2,null);case"math":return kt(3,null);case"foreignObject":return kt(1,null);case"table":return kt(4,null);case"thead":case"tbody":case"tfoot":return kt(5,null);case"colgroup":return kt(7,null);case"tr":return kt(6,null)}return 4<=B.insertionMode||B.insertionMode===0?kt(1,null):B}var Je=new Map;function Qe(B,Q,he){if(typeof he!="object")throw Error(m(62));Q=!0;for(var Ee in he)if(p.call(he,Ee)){var gt=he[Ee];if(gt!=null&&typeof gt!="boolean"&&gt!==""){if(Ee.indexOf("--")===0){var ut=we(Ee);gt=we((""+gt).trim())}else{ut=Ee;var Dt=Je.get(ut);Dt!==void 0||(Dt=we(ut.replace(xe,"-$1").toLowerCase().replace(Ze,"-ms-")),Je.set(ut,Dt)),ut=Dt,gt=typeof gt=="number"?gt===0||p.call(de,Ee)?""+gt:gt+"px":we((""+gt).trim())}Q?(Q=!1,B.push(' style="',ut,":",gt)):B.push(";",ut,":",gt)}}Q||B.push('"')}function nt(B,Q,he,Ee){switch(he){case"style":Qe(B,Q,Ee);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<he.length)||he[0]!=="o"&&he[0]!=="O"||he[1]!=="n"&&he[1]!=="N"){if(Q=J.hasOwnProperty(he)?J[he]:null,Q!==null){switch(typeof Ee){case"function":case"symbol":return;case"boolean":if(!Q.acceptsBooleans)return}switch(he=Q.attributeName,Q.type){case 3:Ee&&B.push(" ",he,'=""');break;case 4:Ee===!0?B.push(" ",he,'=""'):Ee!==!1&&B.push(" ",he,'="',we(Ee),'"');break;case 5:isNaN(Ee)||B.push(" ",he,'="',we(Ee),'"');break;case 6:!isNaN(Ee)&&1<=Ee&&B.push(" ",he,'="',we(Ee),'"');break;default:Q.sanitizeURL&&(Ee=""+Ee),B.push(" ",he,'="',we(Ee),'"')}}else if(M(he)){switch(typeof Ee){case"function":case"symbol":return;case"boolean":if(Q=he.toLowerCase().slice(0,5),Q!=="data-"&&Q!=="aria-")return}B.push(" ",he,'="',we(Ee),'"')}}}function yt(B,Q,he){if(Q!=null){if(he!=null)throw Error(m(60));if(typeof Q!="object"||!("__html"in Q))throw Error(m(61));Q=Q.__html,Q!=null&&B.push(""+Q)}}function ze(B){var Q="";return c.Children.forEach(B,function(he){he!=null&&(Q+=he)}),Q}function $e(B,Q,he,Ee){B.push(st(he));var gt=he=null,ut;for(ut in Q)if(p.call(Q,ut)){var Dt=Q[ut];if(Dt!=null)switch(ut){case"children":he=Dt;break;case"dangerouslySetInnerHTML":gt=Dt;break;default:nt(B,Ee,ut,Dt)}}return B.push(">"),yt(B,gt,he),typeof he=="string"?(B.push(we(he)),null):he}var re=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,it=new Map;function st(B){var Q=it.get(B);if(Q===void 0){if(!re.test(B))throw Error(m(65,B));Q="<"+B,it.set(B,Q)}return Q}function zt(B,Q,he,Ee,gt){switch(Q){case"select":B.push(st("select"));var ut=null,Dt=null;for(yr in he)if(p.call(he,yr)){var sr=he[yr];if(sr!=null)switch(yr){case"children":ut=sr;break;case"dangerouslySetInnerHTML":Dt=sr;break;case"defaultValue":case"value":break;default:nt(B,Ee,yr,sr)}}return B.push(">"),yt(B,Dt,ut),ut;case"option":Dt=gt.selectedValue,B.push(st("option"));var mr=sr=null,kr=null,yr=null;for(ut in he)if(p.call(he,ut)){var Nn=he[ut];if(Nn!=null)switch(ut){case"children":sr=Nn;break;case"selected":kr=Nn;break;case"dangerouslySetInnerHTML":yr=Nn;break;case"value":mr=Nn;default:nt(B,Ee,ut,Nn)}}if(Dt!=null)if(he=mr!==null?""+mr:ze(sr),mt(Dt)){for(Ee=0;Ee<Dt.length;Ee++)if(""+Dt[Ee]===he){B.push(' selected=""');break}}else""+Dt===he&&B.push(' selected=""');else kr&&B.push(' selected=""');return B.push(">"),yt(B,yr,sr),sr;case"textarea":B.push(st("textarea")),yr=Dt=ut=null;for(sr in he)if(p.call(he,sr)&&(mr=he[sr],mr!=null))switch(sr){case"children":yr=mr;break;case"value":ut=mr;break;case"defaultValue":Dt=mr;break;case"dangerouslySetInnerHTML":throw Error(m(91));default:nt(B,Ee,sr,mr)}if(ut===null&&Dt!==null&&(ut=Dt),B.push(">"),yr!=null){if(ut!=null)throw Error(m(92));if(mt(yr)&&1<yr.length)throw Error(m(93));ut=""+yr}return typeof ut=="string"&&ut[0]===`
`&&B.push(`
`),ut!==null&&B.push(we(""+ut)),null;case"input":B.push(st("input")),mr=yr=sr=ut=null;for(Dt in he)if(p.call(he,Dt)&&(kr=he[Dt],kr!=null))switch(Dt){case"children":case"dangerouslySetInnerHTML":throw Error(m(399,"input"));case"defaultChecked":mr=kr;break;case"defaultValue":sr=kr;break;case"checked":yr=kr;break;case"value":ut=kr;break;default:nt(B,Ee,Dt,kr)}return yr!==null?nt(B,Ee,"checked",yr):mr!==null&&nt(B,Ee,"checked",mr),ut!==null?nt(B,Ee,"value",ut):sr!==null&&nt(B,Ee,"value",sr),B.push("/>"),null;case"menuitem":B.push(st("menuitem"));for(var yi in he)if(p.call(he,yi)&&(ut=he[yi],ut!=null))switch(yi){case"children":case"dangerouslySetInnerHTML":throw Error(m(400));default:nt(B,Ee,yi,ut)}return B.push(">"),null;case"title":B.push(st("title")),ut=null;for(Nn in he)if(p.call(he,Nn)&&(Dt=he[Nn],Dt!=null))switch(Nn){case"children":ut=Dt;break;case"dangerouslySetInnerHTML":throw Error(m(434));default:nt(B,Ee,Nn,Dt)}return B.push(">"),ut;case"listing":case"pre":B.push(st(Q)),Dt=ut=null;for(mr in he)if(p.call(he,mr)&&(sr=he[mr],sr!=null))switch(mr){case"children":ut=sr;break;case"dangerouslySetInnerHTML":Dt=sr;break;default:nt(B,Ee,mr,sr)}if(B.push(">"),Dt!=null){if(ut!=null)throw Error(m(60));if(typeof Dt!="object"||!("__html"in Dt))throw Error(m(61));he=Dt.__html,he!=null&&(typeof he=="string"&&0<he.length&&he[0]===`
`?B.push(`
`,he):B.push(""+he))}return typeof ut=="string"&&ut[0]===`
`&&B.push(`
`),ut;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":B.push(st(Q));for(var to in he)if(p.call(he,to)&&(ut=he[to],ut!=null))switch(to){case"children":case"dangerouslySetInnerHTML":throw Error(m(399,Q));default:nt(B,Ee,to,ut)}return B.push("/>"),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return $e(B,he,Q,Ee);case"html":return gt.insertionMode===0&&B.push("<!DOCTYPE html>"),$e(B,he,Q,Ee);default:if(Q.indexOf("-")===-1&&typeof he.is!="string")return $e(B,he,Q,Ee);B.push(st(Q)),Dt=ut=null;for(kr in he)if(p.call(he,kr)&&(sr=he[kr],sr!=null))switch(kr){case"children":ut=sr;break;case"dangerouslySetInnerHTML":Dt=sr;break;case"style":Qe(B,Ee,sr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:M(kr)&&typeof sr!="function"&&typeof sr!="symbol"&&B.push(" ",kr,'="',we(sr),'"')}return B.push(">"),yt(B,Dt,ut),ut}}function tr(B,Q,he){if(B.push('<!--$?--><template id="'),he===null)throw Error(m(395));return B.push(he),B.push('"></template>')}function Cr(B,Q,he,Ee){switch(he.insertionMode){case 0:case 1:return B.push('<div hidden id="'),B.push(Q.segmentPrefix),Q=Ee.toString(16),B.push(Q),B.push('">');case 2:return B.push('<svg aria-hidden="true" style="display:none" id="'),B.push(Q.segmentPrefix),Q=Ee.toString(16),B.push(Q),B.push('">');case 3:return B.push('<math aria-hidden="true" style="display:none" id="'),B.push(Q.segmentPrefix),Q=Ee.toString(16),B.push(Q),B.push('">');case 4:return B.push('<table hidden id="'),B.push(Q.segmentPrefix),Q=Ee.toString(16),B.push(Q),B.push('">');case 5:return B.push('<table hidden><tbody id="'),B.push(Q.segmentPrefix),Q=Ee.toString(16),B.push(Q),B.push('">');case 6:return B.push('<table hidden><tr id="'),B.push(Q.segmentPrefix),Q=Ee.toString(16),B.push(Q),B.push('">');case 7:return B.push('<table hidden><colgroup id="'),B.push(Q.segmentPrefix),Q=Ee.toString(16),B.push(Q),B.push('">');default:throw Error(m(397))}}function xr(B,Q){switch(Q.insertionMode){case 0:case 1:return B.push("</div>");case 2:return B.push("</svg>");case 3:return B.push("</math>");case 4:return B.push("</table>");case 5:return B.push("</tbody></table>");case 6:return B.push("</tr></table>");case 7:return B.push("</colgroup></table>");default:throw Error(m(397))}}var or=/[<\u2028\u2029]/g;function xt(B){return JSON.stringify(B).replace(or,function(Q){switch(Q){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}function Pt(B,Q){return Q=Q===void 0?"":Q,{bootstrapChunks:[],startInlineScript:"<script>",placeholderPrefix:Q+"P:",segmentPrefix:Q+"S:",boundaryPrefix:Q+"B:",idPrefix:Q,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1,generateStaticMarkup:B}}function Wt(B,Q,he,Ee){return he.generateStaticMarkup?(B.push(we(Q)),!1):(Q===""?B=Ee:(Ee&&B.push("<!-- -->"),B.push(we(Q)),B=!0),B)}var Oe=Object.assign,ct=Symbol.for("react.element"),Ut=Symbol.for("react.portal"),ur=Symbol.for("react.fragment"),At=Symbol.for("react.strict_mode"),ir=Symbol.for("react.profiler"),Sr=Symbol.for("react.provider"),fr=Symbol.for("react.context"),pr=Symbol.for("react.forward_ref"),Qr=Symbol.for("react.suspense"),Tr=Symbol.for("react.suspense_list"),tn=Symbol.for("react.memo"),$r=Symbol.for("react.lazy"),br=Symbol.for("react.scope"),nn=Symbol.for("react.debug_trace_mode"),Hr=Symbol.for("react.legacy_hidden"),dn=Symbol.for("react.default_value"),on=Symbol.iterator;function bn(B){if(B==null)return null;if(typeof B=="function")return B.displayName||B.name||null;if(typeof B=="string")return B;switch(B){case ur:return"Fragment";case Ut:return"Portal";case ir:return"Profiler";case At:return"StrictMode";case Qr:return"Suspense";case Tr:return"SuspenseList"}if(typeof B=="object")switch(B.$$typeof){case fr:return(B.displayName||"Context")+".Consumer";case Sr:return(B._context.displayName||"Context")+".Provider";case pr:var Q=B.render;return B=B.displayName,B||(B=Q.displayName||Q.name||"",B=B!==""?"ForwardRef("+B+")":"ForwardRef"),B;case tn:return Q=B.displayName||null,Q!==null?Q:bn(B.type)||"Memo";case $r:Q=B._payload,B=B._init;try{return bn(B(Q))}catch{}}return null}var sn={};function kn(B,Q){if(B=B.contextTypes,!B)return sn;var he={},Ee;for(Ee in B)he[Ee]=Q[Ee];return he}var wr=null;function Un(B,Q){if(B!==Q){B.context._currentValue2=B.parentValue,B=B.parent;var he=Q.parent;if(B===null){if(he!==null)throw Error(m(401))}else{if(he===null)throw Error(m(401));Un(B,he)}Q.context._currentValue2=Q.value}}function Wn(B){B.context._currentValue2=B.parentValue,B=B.parent,B!==null&&Wn(B)}function Si(B){var Q=B.parent;Q!==null&&Si(Q),B.context._currentValue2=B.value}function Jn(B,Q){if(B.context._currentValue2=B.parentValue,B=B.parent,B===null)throw Error(m(402));B.depth===Q.depth?Un(B,Q):Jn(B,Q)}function Hn(B,Q){var he=Q.parent;if(he===null)throw Error(m(402));B.depth===he.depth?Un(B,he):Hn(B,he),Q.context._currentValue2=Q.value}function Bn(B){var Q=wr;Q!==B&&(Q===null?Si(B):B===null?Wn(Q):Q.depth===B.depth?Un(Q,B):Q.depth>B.depth?Jn(Q,B):Hn(Q,B),wr=B)}var Ji={isMounted:function(){return!1},enqueueSetState:function(B,Q){B=B._reactInternals,B.queue!==null&&B.queue.push(Q)},enqueueReplaceState:function(B,Q){B=B._reactInternals,B.replace=!0,B.queue=[Q]},enqueueForceUpdate:function(){}};function Gi(B,Q,he,Ee){var gt=B.state!==void 0?B.state:null;B.updater=Ji,B.props=he,B.state=gt;var ut={queue:[],replace:!1};B._reactInternals=ut;var Dt=Q.contextType;if(B.context=typeof Dt=="object"&&Dt!==null?Dt._currentValue2:Ee,Dt=Q.getDerivedStateFromProps,typeof Dt=="function"&&(Dt=Dt(he,gt),gt=Dt==null?gt:Oe({},gt,Dt),B.state=gt),typeof Q.getDerivedStateFromProps!="function"&&typeof B.getSnapshotBeforeUpdate!="function"&&(typeof B.UNSAFE_componentWillMount=="function"||typeof B.componentWillMount=="function"))if(Q=B.state,typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount(),Q!==B.state&&Ji.enqueueReplaceState(B,B.state,null),ut.queue!==null&&0<ut.queue.length)if(Q=ut.queue,Dt=ut.replace,ut.queue=null,ut.replace=!1,Dt&&Q.length===1)B.state=Q[0];else{for(ut=Dt?Q[0]:B.state,gt=!0,Dt=Dt?1:0;Dt<Q.length;Dt++){var sr=Q[Dt];sr=typeof sr=="function"?sr.call(B,ut,he,Ee):sr,sr!=null&&(gt?(gt=!1,ut=Oe({},ut,sr)):Oe(ut,sr))}B.state=ut}else ut.queue=null}var Vi={id:1,overflow:""};function ei(B,Q,he){var Ee=B.id;B=B.overflow;var gt=32-ii(Ee)-1;Ee&=~(1<<gt),he+=1;var ut=32-ii(Q)+gt;if(30<ut){var Dt=gt-gt%5;return ut=(Ee&(1<<Dt)-1).toString(32),Ee>>=Dt,gt-=Dt,{id:1<<32-ii(Q)+gt|he<<gt|Ee,overflow:ut+B}}return{id:1<<ut|he<<gt|Ee,overflow:B}}var ii=Math.clz32?Math.clz32:se,mo=Math.log,et=Math.LN2;function se(B){return B>>>=0,B===0?32:31-(mo(B)/et|0)|0}function ae(B,Q){return B===Q&&(B!==0||1/B===1/Q)||B!==B&&Q!==Q}var ge=typeof Object.is=="function"?Object.is:ae,Ie=null,Ue=null,fe=null,qe=null,We=!1,rt=!1,dt=0,Xe=null,Lt=0;function Xt(){if(Ie===null)throw Error(m(321));return Ie}function cr(){if(0<Lt)throw Error(m(312));return{memoizedState:null,queue:null,next:null}}function Mr(){return qe===null?fe===null?(We=!1,fe=qe=cr()):(We=!0,qe=fe):qe.next===null?(We=!1,qe=qe.next=cr()):(We=!0,qe=qe.next),qe}function qr(){Ue=Ie=null,rt=!1,fe=null,Lt=0,qe=Xe=null}function Nr(B,Q){return typeof Q=="function"?Q(B):Q}function St(B,Q,he){if(Ie=Xt(),qe=Mr(),We){var Ee=qe.queue;if(Q=Ee.dispatch,Xe!==null&&(he=Xe.get(Ee),he!==void 0)){Xe.delete(Ee),Ee=qe.memoizedState;do Ee=B(Ee,he.action),he=he.next;while(he!==null);return qe.memoizedState=Ee,[Ee,Q]}return[qe.memoizedState,Q]}return B=B===Nr?typeof Q=="function"?Q():Q:he!==void 0?he(Q):Q,qe.memoizedState=B,B=qe.queue={last:null,dispatch:null},B=B.dispatch=yn.bind(null,Ie,B),[qe.memoizedState,B]}function wn(B,Q){if(Ie=Xt(),qe=Mr(),Q=Q===void 0?null:Q,qe!==null){var he=qe.memoizedState;if(he!==null&&Q!==null){var Ee=he[1];e:if(Ee===null)Ee=!1;else{for(var gt=0;gt<Ee.length&&gt<Q.length;gt++)if(!ge(Q[gt],Ee[gt])){Ee=!1;break e}Ee=!0}if(Ee)return he[0]}}return B=B(),qe.memoizedState=[B,Q],B}function yn(B,Q,he){if(25<=Lt)throw Error(m(301));if(B===Ie)if(rt=!0,B={action:he,next:null},Xe===null&&(Xe=new Map),he=Xe.get(Q),he===void 0)Xe.set(Q,B);else{for(Q=he;Q.next!==null;)Q=Q.next;Q.next=B}}function Sn(){throw Error(m(394))}function Fr(){}var Ot={readContext:function(B){return B._currentValue2},useContext:function(B){return Xt(),B._currentValue2},useMemo:wn,useReducer:St,useRef:function(B){Ie=Xt(),qe=Mr();var Q=qe.memoizedState;return Q===null?(B={current:B},qe.memoizedState=B):Q},useState:function(B){return St(Nr,B)},useInsertionEffect:Fr,useLayoutEffect:function(){},useCallback:function(B,Q){return wn(function(){return B},Q)},useImperativeHandle:Fr,useEffect:Fr,useDebugValue:Fr,useDeferredValue:function(B){return Xt(),B},useTransition:function(){return Xt(),[!1,Sn]},useId:function(){var B=Ue.treeContext,Q=B.overflow;B=B.id,B=(B&~(1<<32-ii(B)-1)).toString(32)+Q;var he=Or;if(he===null)throw Error(m(404));return Q=dt++,B=":"+he.idPrefix+"R"+B,0<Q&&(B+="H"+Q.toString(32)),B+":"},useMutableSource:function(B,Q){return Xt(),Q(B._source)},useSyncExternalStore:function(B,Q,he){if(he===void 0)throw Error(m(407));return he()}},Or=null,rn=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function Vn(B){return console.error(B),null}function Zn(){}function Po(B,Q,he,Ee,gt,ut,Dt,sr,mr){var kr=[],yr=new Set;return Q={destination:null,responseState:Q,progressiveChunkSize:Ee===void 0?12800:Ee,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:yr,pingedTasks:kr,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:gt===void 0?Vn:gt,onAllReady:Zn,onShellReady:Dt===void 0?Zn:Dt,onShellError:Zn,onFatalError:Zn},he=Ys(Q,0,null,he,!1,!1),he.parentFlushed=!0,B=un(Q,B,null,he,yr,sn,null,Vi),kr.push(B),Q}function un(B,Q,he,Ee,gt,ut,Dt,sr){B.allPendingTasks++,he===null?B.pendingRootTasks++:he.pendingTasks++;var mr={node:Q,ping:function(){var kr=B.pingedTasks;kr.push(mr),kr.length===1&&os(B)},blockedBoundary:he,blockedSegment:Ee,abortSet:gt,legacyContext:ut,context:Dt,treeContext:sr};return gt.add(mr),mr}function Ys(B,Q,he,Ee,gt,ut){return{status:0,id:-1,index:Q,parentFlushed:!1,chunks:[],children:[],formatContext:Ee,boundary:he,lastPushedText:gt,textEmbedded:ut}}function Qs(B,Q){if(B=B.onError(Q),B!=null&&typeof B!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof B+'" instead');return B}function Ps(B,Q){var he=B.onShellError;he(Q),he=B.onFatalError,he(Q),B.destination!==null?(B.status=2,B.destination.destroy(Q)):(B.status=1,B.fatalError=Q)}function el(B,Q,he,Ee,gt){for(Ie={},Ue=Q,dt=0,B=he(Ee,gt);rt;)rt=!1,dt=0,Lt+=1,qe=null,B=he(Ee,gt);return qr(),B}function Zo(B,Q,he,Ee){var gt=he.render(),ut=Ee.childContextTypes;if(ut!=null){var Dt=Q.legacyContext;if(typeof he.getChildContext!="function")Ee=Dt;else{he=he.getChildContext();for(var sr in he)if(!(sr in ut))throw Error(m(108,bn(Ee)||"Unknown",sr));Ee=Oe({},Dt,he)}Q.legacyContext=Ee,li(B,Q,gt),Q.legacyContext=Dt}else li(B,Q,gt)}function La(B,Q){if(B&&B.defaultProps){Q=Oe({},Q),B=B.defaultProps;for(var he in B)Q[he]===void 0&&(Q[he]=B[he]);return Q}return Q}function cn(B,Q,he,Ee,gt){if(typeof he=="function")if(he.prototype&&he.prototype.isReactComponent){gt=kn(he,Q.legacyContext);var ut=he.contextType;ut=new he(Ee,typeof ut=="object"&&ut!==null?ut._currentValue2:gt),Gi(ut,he,Ee,gt),Zo(B,Q,ut,he)}else{ut=kn(he,Q.legacyContext),gt=el(B,Q,he,Ee,ut);var Dt=dt!==0;if(typeof gt=="object"&&gt!==null&&typeof gt.render=="function"&&gt.$$typeof===void 0)Gi(gt,he,Ee,ut),Zo(B,Q,gt,he);else if(Dt){Ee=Q.treeContext,Q.treeContext=ei(Ee,1,0);try{li(B,Q,gt)}finally{Q.treeContext=Ee}}else li(B,Q,gt)}else if(typeof he=="string"){switch(gt=Q.blockedSegment,ut=zt(gt.chunks,he,Ee,B.responseState,gt.formatContext),gt.lastPushedText=!1,Dt=gt.formatContext,gt.formatContext=Tt(Dt,he,Ee),Da(B,Q,ut),gt.formatContext=Dt,he){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:gt.chunks.push("</",he,">")}gt.lastPushedText=!1}else{switch(he){case Hr:case nn:case At:case ir:case ur:li(B,Q,Ee.children);return;case Tr:li(B,Q,Ee.children);return;case br:throw Error(m(343));case Qr:e:{he=Q.blockedBoundary,gt=Q.blockedSegment,ut=Ee.fallback,Ee=Ee.children,Dt=new Set;var sr={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:Dt,errorDigest:null},mr=Ys(B,gt.chunks.length,sr,gt.formatContext,!1,!1);gt.children.push(mr),gt.lastPushedText=!1;var kr=Ys(B,0,null,gt.formatContext,!1,!1);kr.parentFlushed=!0,Q.blockedBoundary=sr,Q.blockedSegment=kr;try{if(Da(B,Q,Ee),B.responseState.generateStaticMarkup||kr.lastPushedText&&kr.textEmbedded&&kr.chunks.push("<!-- -->"),kr.status=1,Do(sr,kr),sr.pendingTasks===0)break e}catch(yr){kr.status=4,sr.forceClientRender=!0,sr.errorDigest=Qs(B,yr)}finally{Q.blockedBoundary=he,Q.blockedSegment=gt}Q=un(B,ut,he,mr,Dt,Q.legacyContext,Q.context,Q.treeContext),B.pingedTasks.push(Q)}return}if(typeof he=="object"&&he!==null)switch(he.$$typeof){case pr:if(Ee=el(B,Q,he.render,Ee,gt),dt!==0){he=Q.treeContext,Q.treeContext=ei(he,1,0);try{li(B,Q,Ee)}finally{Q.treeContext=he}}else li(B,Q,Ee);return;case tn:he=he.type,Ee=La(he,Ee),cn(B,Q,he,Ee,gt);return;case Sr:if(gt=Ee.children,he=he._context,Ee=Ee.value,ut=he._currentValue2,he._currentValue2=Ee,Dt=wr,wr=Ee={parent:Dt,depth:Dt===null?0:Dt.depth+1,context:he,parentValue:ut,value:Ee},Q.context=Ee,li(B,Q,gt),B=wr,B===null)throw Error(m(403));Ee=B.parentValue,B.context._currentValue2=Ee===dn?B.context._defaultValue:Ee,B=wr=B.parent,Q.context=B;return;case fr:Ee=Ee.children,Ee=Ee(he._currentValue2),li(B,Q,Ee);return;case $r:gt=he._init,he=gt(he._payload),Ee=La(he,Ee),cn(B,Q,he,Ee,void 0);return}throw Error(m(130,he==null?he:typeof he,""))}}function li(B,Q,he){if(Q.node=he,typeof he=="object"&&he!==null){switch(he.$$typeof){case ct:cn(B,Q,he.type,he.props,he.ref);return;case Ut:throw Error(m(257));case $r:var Ee=he._init;he=Ee(he._payload),li(B,Q,he);return}if(mt(he)){qn(B,Q,he);return}if(he===null||typeof he!="object"?Ee=null:(Ee=on&&he[on]||he["@@iterator"],Ee=typeof Ee=="function"?Ee:null),Ee&&(Ee=Ee.call(he))){if(he=Ee.next(),!he.done){var gt=[];do gt.push(he.value),he=Ee.next();while(!he.done);qn(B,Q,gt)}return}throw B=Object.prototype.toString.call(he),Error(m(31,B==="[object Object]"?"object with keys {"+Object.keys(he).join(", ")+"}":B))}typeof he=="string"?(Ee=Q.blockedSegment,Ee.lastPushedText=Wt(Q.blockedSegment.chunks,he,B.responseState,Ee.lastPushedText)):typeof he=="number"&&(Ee=Q.blockedSegment,Ee.lastPushedText=Wt(Q.blockedSegment.chunks,""+he,B.responseState,Ee.lastPushedText))}function qn(B,Q,he){for(var Ee=he.length,gt=0;gt<Ee;gt++){var ut=Q.treeContext;Q.treeContext=ei(ut,Ee,gt);try{Da(B,Q,he[gt])}finally{Q.treeContext=ut}}}function Da(B,Q,he){var Ee=Q.blockedSegment.formatContext,gt=Q.legacyContext,ut=Q.context;try{return li(B,Q,he)}catch(mr){if(qr(),typeof mr=="object"&&mr!==null&&typeof mr.then=="function"){he=mr;var Dt=Q.blockedSegment,sr=Ys(B,Dt.chunks.length,null,Dt.formatContext,Dt.lastPushedText,!0);Dt.children.push(sr),Dt.lastPushedText=!1,B=un(B,Q.node,Q.blockedBoundary,sr,Q.abortSet,Q.legacyContext,Q.context,Q.treeContext).ping,he.then(B,B),Q.blockedSegment.formatContext=Ee,Q.legacyContext=gt,Q.context=ut,Bn(ut)}else throw Q.blockedSegment.formatContext=Ee,Q.legacyContext=gt,Q.context=ut,Bn(ut),mr}}function is(B){var Q=B.blockedBoundary;B=B.blockedSegment,B.status=3,eo(this,Q,B)}function Kl(B,Q,he){var Ee=B.blockedBoundary;B.blockedSegment.status=3,Ee===null?(Q.allPendingTasks--,Q.status!==2&&(Q.status=2,Q.destination!==null&&Q.destination.push(null))):(Ee.pendingTasks--,Ee.forceClientRender||(Ee.forceClientRender=!0,B=he===void 0?Error(m(432)):he,Ee.errorDigest=Q.onError(B),Ee.parentFlushed&&Q.clientRenderedBoundaries.push(Ee)),Ee.fallbackAbortableTasks.forEach(function(gt){return Kl(gt,Q,he)}),Ee.fallbackAbortableTasks.clear(),Q.allPendingTasks--,Q.allPendingTasks===0&&(Ee=Q.onAllReady,Ee()))}function Do(B,Q){if(Q.chunks.length===0&&Q.children.length===1&&Q.children[0].boundary===null){var he=Q.children[0];he.id=Q.id,he.parentFlushed=!0,he.status===1&&Do(B,he)}else B.completedSegments.push(Q)}function eo(B,Q,he){if(Q===null){if(he.parentFlushed){if(B.completedRootSegment!==null)throw Error(m(389));B.completedRootSegment=he}B.pendingRootTasks--,B.pendingRootTasks===0&&(B.onShellError=Zn,Q=B.onShellReady,Q())}else Q.pendingTasks--,Q.forceClientRender||(Q.pendingTasks===0?(he.parentFlushed&&he.status===1&&Do(Q,he),Q.parentFlushed&&B.completedBoundaries.push(Q),Q.fallbackAbortableTasks.forEach(is,B),Q.fallbackAbortableTasks.clear()):he.parentFlushed&&he.status===1&&(Do(Q,he),Q.completedSegments.length===1&&Q.parentFlushed&&B.partialBoundaries.push(Q)));B.allPendingTasks--,B.allPendingTasks===0&&(B=B.onAllReady,B())}function os(B){if(B.status!==2){var Q=wr,he=rn.current;rn.current=Ot;var Ee=Or;Or=B.responseState;try{var gt=B.pingedTasks,ut;for(ut=0;ut<gt.length;ut++){var Dt=gt[ut],sr=B,mr=Dt.blockedSegment;if(mr.status===0){Bn(Dt.context);try{li(sr,Dt,Dt.node),sr.responseState.generateStaticMarkup||mr.lastPushedText&&mr.textEmbedded&&mr.chunks.push("<!-- -->"),Dt.abortSet.delete(Dt),mr.status=1,eo(sr,Dt.blockedBoundary,mr)}catch(Jr){if(qr(),typeof Jr=="object"&&Jr!==null&&typeof Jr.then=="function"){var kr=Dt.ping;Jr.then(kr,kr)}else{Dt.abortSet.delete(Dt),mr.status=4;var yr=Dt.blockedBoundary,Nn=Jr,yi=Qs(sr,Nn);if(yr===null?Ps(sr,Nn):(yr.pendingTasks--,yr.forceClientRender||(yr.forceClientRender=!0,yr.errorDigest=yi,yr.parentFlushed&&sr.clientRenderedBoundaries.push(yr))),sr.allPendingTasks--,sr.allPendingTasks===0){var to=sr.onAllReady;to()}}}finally{}}}gt.splice(0,ut),B.destination!==null&&ya(B,B.destination)}catch(Jr){Qs(B,Jr),Ps(B,Jr)}finally{Or=Ee,rn.current=he,he===Ot&&Bn(Q)}}}function tl(B,Q,he){switch(he.parentFlushed=!0,he.status){case 0:var Ee=he.id=B.nextSegmentId++;return he.lastPushedText=!1,he.textEmbedded=!1,B=B.responseState,Q.push('<template id="'),Q.push(B.placeholderPrefix),B=Ee.toString(16),Q.push(B),Q.push('"></template>');case 1:he.status=2;var gt=!0;Ee=he.chunks;var ut=0;he=he.children;for(var Dt=0;Dt<he.length;Dt++){for(gt=he[Dt];ut<gt.index;ut++)Q.push(Ee[ut]);gt=go(B,Q,gt)}for(;ut<Ee.length-1;ut++)Q.push(Ee[ut]);return ut<Ee.length&&(gt=Q.push(Ee[ut])),gt;default:throw Error(m(390))}}function go(B,Q,he){var Ee=he.boundary;if(Ee===null)return tl(B,Q,he);if(Ee.parentFlushed=!0,Ee.forceClientRender)return B.responseState.generateStaticMarkup||(Ee=Ee.errorDigest,Q.push("<!--$!-->"),Q.push("<template"),Ee&&(Q.push(' data-dgst="'),Ee=we(Ee),Q.push(Ee),Q.push('"')),Q.push("></template>")),tl(B,Q,he),B=B.responseState.generateStaticMarkup?!0:Q.push("<!--/$-->"),B;if(0<Ee.pendingTasks){Ee.rootSegmentID=B.nextSegmentId++,0<Ee.completedSegments.length&&B.partialBoundaries.push(Ee);var gt=B.responseState,ut=gt.nextSuspenseID++;return gt=gt.boundaryPrefix+ut.toString(16),Ee=Ee.id=gt,tr(Q,B.responseState,Ee),tl(B,Q,he),Q.push("<!--/$-->")}if(Ee.byteSize>B.progressiveChunkSize)return Ee.rootSegmentID=B.nextSegmentId++,B.completedBoundaries.push(Ee),tr(Q,B.responseState,Ee.id),tl(B,Q,he),Q.push("<!--/$-->");if(B.responseState.generateStaticMarkup||Q.push("<!--$-->"),he=Ee.completedSegments,he.length!==1)throw Error(m(391));return go(B,Q,he[0]),B=B.responseState.generateStaticMarkup?!0:Q.push("<!--/$-->"),B}function ga(B,Q,he){return Cr(Q,B.responseState,he.formatContext,he.id),go(B,Q,he),xr(Q,he.formatContext)}function Xl(B,Q,he){for(var Ee=he.completedSegments,gt=0;gt<Ee.length;gt++)pu(B,Q,he,Ee[gt]);if(Ee.length=0,B=B.responseState,Ee=he.id,he=he.rootSegmentID,Q.push(B.startInlineScript),B.sentCompleteBoundaryFunction?Q.push('$RC("'):(B.sentCompleteBoundaryFunction=!0,Q.push('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("')),Ee===null)throw Error(m(395));return he=he.toString(16),Q.push(Ee),Q.push('","'),Q.push(B.segmentPrefix),Q.push(he),Q.push('")<\/script>')}function pu(B,Q,he,Ee){if(Ee.status===2)return!0;var gt=Ee.id;if(gt===-1){if((Ee.id=he.rootSegmentID)===-1)throw Error(m(392));return ga(B,Q,Ee)}return ga(B,Q,Ee),B=B.responseState,Q.push(B.startInlineScript),B.sentCompleteSegmentFunction?Q.push('$RS("'):(B.sentCompleteSegmentFunction=!0,Q.push('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("')),Q.push(B.segmentPrefix),gt=gt.toString(16),Q.push(gt),Q.push('","'),Q.push(B.placeholderPrefix),Q.push(gt),Q.push('")<\/script>')}function ya(B,Q){try{var he=B.completedRootSegment;if(he!==null&&B.pendingRootTasks===0){go(B,Q,he),B.completedRootSegment=null;var Ee=B.responseState.bootstrapChunks;for(he=0;he<Ee.length-1;he++)Q.push(Ee[he]);he<Ee.length&&Q.push(Ee[he])}var gt=B.clientRenderedBoundaries,ut;for(ut=0;ut<gt.length;ut++){var Dt=gt[ut];Ee=Q;var sr=B.responseState,mr=Dt.id,kr=Dt.errorDigest,yr=Dt.errorMessage,Nn=Dt.errorComponentStack;if(Ee.push(sr.startInlineScript),sr.sentClientRenderFunction?Ee.push('$RX("'):(sr.sentClientRenderFunction=!0,Ee.push('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("')),mr===null)throw Error(m(395));if(Ee.push(mr),Ee.push('"'),kr||yr||Nn){Ee.push(",");var yi=xt(kr||"");Ee.push(yi)}if(yr||Nn){Ee.push(",");var to=xt(yr||"");Ee.push(to)}if(Nn){Ee.push(",");var Jr=xt(Nn);Ee.push(Jr)}if(!Ee.push(")<\/script>")){B.destination=null,ut++,gt.splice(0,ut);return}}gt.splice(0,ut);var ss=B.completedBoundaries;for(ut=0;ut<ss.length;ut++)if(!Xl(B,Q,ss[ut])){B.destination=null,ut++,ss.splice(0,ut);return}ss.splice(0,ut);var Eo=B.partialBoundaries;for(ut=0;ut<Eo.length;ut++){var Io=Eo[ut];e:{gt=B,Dt=Q;var ui=Io.completedSegments;for(sr=0;sr<ui.length;sr++)if(!pu(gt,Dt,Io,ui[sr])){sr++,ui.splice(0,sr);var ci=!1;break e}ui.splice(0,sr),ci=!0}if(!ci){B.destination=null,ut++,Eo.splice(0,ut);return}}Eo.splice(0,ut);var Dn=B.completedBoundaries;for(ut=0;ut<Dn.length;ut++)if(!Xl(B,Q,Dn[ut])){B.destination=null,ut++,Dn.splice(0,ut);return}Dn.splice(0,ut)}finally{B.allPendingTasks===0&&B.pingedTasks.length===0&&B.clientRenderedBoundaries.length===0&&B.completedBoundaries.length===0&&Q.push(null)}}function Yl(B,Q){try{var he=B.abortableTasks;he.forEach(function(Ee){return Kl(Ee,B,Q)}),he.clear(),B.destination!==null&&ya(B,B.destination)}catch(Ee){Qs(B,Ee),Ps(B,Ee)}}function Oa(){}function Es(B,Q,he,Ee){var gt=!1,ut=null,Dt="",sr={push:function(kr){return kr!==null&&(Dt+=kr),!0},destroy:function(kr){gt=!0,ut=kr}},mr=!1;if(B=Po(B,Pt(he,Q?Q.identifierPrefix:void 0),{insertionMode:1,selectedValue:null},1/0,Oa,void 0,function(){mr=!0}),os(B),Yl(B,Ee),B.status===1)B.status=2,sr.destroy(B.fatalError);else if(B.status!==2&&B.destination===null){B.destination=sr;try{ya(B,sr)}catch(kr){Qs(B,kr),Ps(B,kr)}}if(gt)throw ut;if(!mr)throw Error(m(426));return Dt}return _p.renderToNodeStream=function(){throw Error(m(207))},_p.renderToStaticMarkup=function(B,Q){return Es(B,Q,!0,'The server used "renderToStaticMarkup" which does not support Suspense. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')},_p.renderToStaticNodeStream=function(){throw Error(m(208))},_p.renderToString=function(B,Q){return Es(B,Q,!1,'The server used "renderToString" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')},_p.version="18.3.1",_p}var Vg={};/**
 * @license React
 * react-dom-server.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z0;function _E(){if(Z0)return Vg;Z0=1;var c=eg();function m($){for(var q="https://reactjs.org/docs/error-decoder.html?invariant="+$,ue=1;ue<arguments.length;ue++)q+="&args[]="+encodeURIComponent(arguments[ue]);return"Minified React error #"+$+"; visit "+q+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p=null,T=0;function P($,q){if(q.length!==0)if(512<q.length)0<T&&($.enqueue(new Uint8Array(p.buffer,0,T)),p=new Uint8Array(512),T=0),$.enqueue(q);else{var ue=p.length-T;ue<q.length&&(ue===0?$.enqueue(p):(p.set(q.subarray(0,ue),T),$.enqueue(p),q=q.subarray(ue)),p=new Uint8Array(512),T=0),p.set(q,T),T+=q.length}}function O($,q){return P($,q),!0}function M($){p&&0<T&&($.enqueue(new Uint8Array(p.buffer,0,T)),p=null,T=0)}var u=new TextEncoder;function J($){return u.encode($)}function Y($){return u.encode($)}function ve($,q){typeof $.error=="function"?$.error(q):$.close()}var de=Object.prototype.hasOwnProperty,Te=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,le={},we={};function xe($){return de.call(we,$)?!0:de.call(le,$)?!1:Te.test($)?we[$]=!0:(le[$]=!0,!1)}function Ze($,q,ue,Pe,_t,ot,Nt){this.acceptsBooleans=q===2||q===3||q===4,this.attributeName=Pe,this.attributeNamespace=_t,this.mustUseProperty=ue,this.propertyName=$,this.type=q,this.sanitizeURL=ot,this.removeEmptyString=Nt}var mt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function($){mt[$]=new Ze($,0,!1,$,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function($){var q=$[0];mt[q]=new Ze(q,1,!1,$[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function($){mt[$]=new Ze($,2,!1,$.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function($){mt[$]=new Ze($,2,!1,$,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function($){mt[$]=new Ze($,3,!1,$.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function($){mt[$]=new Ze($,3,!0,$,null,!1,!1)}),["capture","download"].forEach(function($){mt[$]=new Ze($,4,!1,$,null,!1,!1)}),["cols","rows","size","span"].forEach(function($){mt[$]=new Ze($,6,!1,$,null,!1,!1)}),["rowSpan","start"].forEach(function($){mt[$]=new Ze($,5,!1,$.toLowerCase(),null,!1,!1)});var kt=/[\-:]([a-z])/g;function Tt($){return $[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function($){var q=$.replace(kt,Tt);mt[q]=new Ze(q,1,!1,$,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function($){var q=$.replace(kt,Tt);mt[q]=new Ze(q,1,!1,$,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function($){var q=$.replace(kt,Tt);mt[q]=new Ze(q,1,!1,$,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function($){mt[$]=new Ze($,1,!1,$.toLowerCase(),null,!1,!1)}),mt.xlinkHref=new Ze("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function($){mt[$]=new Ze($,1,!1,$.toLowerCase(),null,!0,!0)});var Je={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Qe=["Webkit","ms","Moz","O"];Object.keys(Je).forEach(function($){Qe.forEach(function(q){q=q+$.charAt(0).toUpperCase()+$.substring(1),Je[q]=Je[$]})});var nt=/["'&<>]/;function yt($){if(typeof $=="boolean"||typeof $=="number")return""+$;$=""+$;var q=nt.exec($);if(q){var ue="",Pe,_t=0;for(Pe=q.index;Pe<$.length;Pe++){switch($.charCodeAt(Pe)){case 34:q="&quot;";break;case 38:q="&amp;";break;case 39:q="&#x27;";break;case 60:q="&lt;";break;case 62:q="&gt;";break;default:continue}_t!==Pe&&(ue+=$.substring(_t,Pe)),_t=Pe+1,ue+=q}$=_t!==Pe?ue+$.substring(_t,Pe):ue}return $}var ze=/([A-Z])/g,$e=/^ms-/,re=Array.isArray,it=Y("<script>"),st=Y("<\/script>"),zt=Y('<script src="'),tr=Y('<script type="module" src="'),Cr=Y('" async=""><\/script>'),xr=/(<\/|<)(s)(cript)/gi;function or($,q,ue,Pe){return""+q+(ue==="s"?"\\u0073":"\\u0053")+Pe}function xt($,q,ue,Pe,_t){$=$===void 0?"":$,q=q===void 0?it:Y('<script nonce="'+yt(q)+'">');var ot=[];if(ue!==void 0&&ot.push(q,J((""+ue).replace(xr,or)),st),Pe!==void 0)for(ue=0;ue<Pe.length;ue++)ot.push(zt,J(yt(Pe[ue])),Cr);if(_t!==void 0)for(Pe=0;Pe<_t.length;Pe++)ot.push(tr,J(yt(_t[Pe])),Cr);return{bootstrapChunks:ot,startInlineScript:q,placeholderPrefix:Y($+"P:"),segmentPrefix:Y($+"S:"),boundaryPrefix:$+"B:",idPrefix:$,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1}}function Pt($,q){return{insertionMode:$,selectedValue:q}}function Wt($){return Pt($==="http://www.w3.org/2000/svg"?2:$==="http://www.w3.org/1998/Math/MathML"?3:0,null)}function Oe($,q,ue){switch(q){case"select":return Pt(1,ue.value!=null?ue.value:ue.defaultValue);case"svg":return Pt(2,null);case"math":return Pt(3,null);case"foreignObject":return Pt(1,null);case"table":return Pt(4,null);case"thead":case"tbody":case"tfoot":return Pt(5,null);case"colgroup":return Pt(7,null);case"tr":return Pt(6,null)}return 4<=$.insertionMode||$.insertionMode===0?Pt(1,null):$}var ct=Y("<!-- -->");function Ut($,q,ue,Pe){return q===""?Pe:(Pe&&$.push(ct),$.push(J(yt(q))),!0)}var ur=new Map,At=Y(' style="'),ir=Y(":"),Sr=Y(";");function fr($,q,ue){if(typeof ue!="object")throw Error(m(62));q=!0;for(var Pe in ue)if(de.call(ue,Pe)){var _t=ue[Pe];if(_t!=null&&typeof _t!="boolean"&&_t!==""){if(Pe.indexOf("--")===0){var ot=J(yt(Pe));_t=J(yt((""+_t).trim()))}else{ot=Pe;var Nt=ur.get(ot);Nt!==void 0||(Nt=Y(yt(ot.replace(ze,"-$1").toLowerCase().replace($e,"-ms-"))),ur.set(ot,Nt)),ot=Nt,_t=typeof _t=="number"?_t===0||de.call(Je,Pe)?J(""+_t):J(_t+"px"):J(yt((""+_t).trim()))}q?(q=!1,$.push(At,ot,ir,_t)):$.push(Sr,ot,ir,_t)}}q||$.push(Tr)}var pr=Y(" "),Qr=Y('="'),Tr=Y('"'),tn=Y('=""');function $r($,q,ue,Pe){switch(ue){case"style":fr($,q,Pe);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<ue.length)||ue[0]!=="o"&&ue[0]!=="O"||ue[1]!=="n"&&ue[1]!=="N"){if(q=mt.hasOwnProperty(ue)?mt[ue]:null,q!==null){switch(typeof Pe){case"function":case"symbol":return;case"boolean":if(!q.acceptsBooleans)return}switch(ue=J(q.attributeName),q.type){case 3:Pe&&$.push(pr,ue,tn);break;case 4:Pe===!0?$.push(pr,ue,tn):Pe!==!1&&$.push(pr,ue,Qr,J(yt(Pe)),Tr);break;case 5:isNaN(Pe)||$.push(pr,ue,Qr,J(yt(Pe)),Tr);break;case 6:!isNaN(Pe)&&1<=Pe&&$.push(pr,ue,Qr,J(yt(Pe)),Tr);break;default:q.sanitizeURL&&(Pe=""+Pe),$.push(pr,ue,Qr,J(yt(Pe)),Tr)}}else if(xe(ue)){switch(typeof Pe){case"function":case"symbol":return;case"boolean":if(q=ue.toLowerCase().slice(0,5),q!=="data-"&&q!=="aria-")return}$.push(pr,J(ue),Qr,J(yt(Pe)),Tr)}}}var br=Y(">"),nn=Y("/>");function Hr($,q,ue){if(q!=null){if(ue!=null)throw Error(m(60));if(typeof q!="object"||!("__html"in q))throw Error(m(61));q=q.__html,q!=null&&$.push(J(""+q))}}function dn($){var q="";return c.Children.forEach($,function(ue){ue!=null&&(q+=ue)}),q}var on=Y(' selected=""');function bn($,q,ue,Pe){$.push(Un(ue));var _t=ue=null,ot;for(ot in q)if(de.call(q,ot)){var Nt=q[ot];if(Nt!=null)switch(ot){case"children":ue=Nt;break;case"dangerouslySetInnerHTML":_t=Nt;break;default:$r($,Pe,ot,Nt)}}return $.push(br),Hr($,_t,ue),typeof ue=="string"?($.push(J(yt(ue))),null):ue}var sn=Y(`
`),kn=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,wr=new Map;function Un($){var q=wr.get($);if(q===void 0){if(!kn.test($))throw Error(m(65,$));q=Y("<"+$),wr.set($,q)}return q}var Wn=Y("<!DOCTYPE html>");function Si($,q,ue,Pe,_t){switch(q){case"select":$.push(Un("select"));var ot=null,Nt=null;for(Xr in ue)if(de.call(ue,Xr)){var ar=ue[Xr];if(ar!=null)switch(Xr){case"children":ot=ar;break;case"dangerouslySetInnerHTML":Nt=ar;break;case"defaultValue":case"value":break;default:$r($,Pe,Xr,ar)}}return $.push(br),Hr($,Nt,ot),ot;case"option":Nt=_t.selectedValue,$.push(Un("option"));var Br=ar=null,pn=null,Xr=null;for(ot in ue)if(de.call(ue,ot)){var fi=ue[ot];if(fi!=null)switch(ot){case"children":ar=fi;break;case"selected":pn=fi;break;case"dangerouslySetInnerHTML":Xr=fi;break;case"value":Br=fi;default:$r($,Pe,ot,fi)}}if(Nt!=null)if(ue=Br!==null?""+Br:dn(ar),re(Nt)){for(Pe=0;Pe<Nt.length;Pe++)if(""+Nt[Pe]===ue){$.push(on);break}}else""+Nt===ue&&$.push(on);else pn&&$.push(on);return $.push(br),Hr($,Xr,ar),ar;case"textarea":$.push(Un("textarea")),Xr=Nt=ot=null;for(ar in ue)if(de.call(ue,ar)&&(Br=ue[ar],Br!=null))switch(ar){case"children":Xr=Br;break;case"value":ot=Br;break;case"defaultValue":Nt=Br;break;case"dangerouslySetInnerHTML":throw Error(m(91));default:$r($,Pe,ar,Br)}if(ot===null&&Nt!==null&&(ot=Nt),$.push(br),Xr!=null){if(ot!=null)throw Error(m(92));if(re(Xr)&&1<Xr.length)throw Error(m(93));ot=""+Xr}return typeof ot=="string"&&ot[0]===`
`&&$.push(sn),ot!==null&&$.push(J(yt(""+ot))),null;case"input":$.push(Un("input")),Br=Xr=ar=ot=null;for(Nt in ue)if(de.call(ue,Nt)&&(pn=ue[Nt],pn!=null))switch(Nt){case"children":case"dangerouslySetInnerHTML":throw Error(m(399,"input"));case"defaultChecked":Br=pn;break;case"defaultValue":ar=pn;break;case"checked":Xr=pn;break;case"value":ot=pn;break;default:$r($,Pe,Nt,pn)}return Xr!==null?$r($,Pe,"checked",Xr):Br!==null&&$r($,Pe,"checked",Br),ot!==null?$r($,Pe,"value",ot):ar!==null&&$r($,Pe,"value",ar),$.push(nn),null;case"menuitem":$.push(Un("menuitem"));for(var Fo in ue)if(de.call(ue,Fo)&&(ot=ue[Fo],ot!=null))switch(Fo){case"children":case"dangerouslySetInnerHTML":throw Error(m(400));default:$r($,Pe,Fo,ot)}return $.push(br),null;case"title":$.push(Un("title")),ot=null;for(fi in ue)if(de.call(ue,fi)&&(Nt=ue[fi],Nt!=null))switch(fi){case"children":ot=Nt;break;case"dangerouslySetInnerHTML":throw Error(m(434));default:$r($,Pe,fi,Nt)}return $.push(br),ot;case"listing":case"pre":$.push(Un(q)),Nt=ot=null;for(Br in ue)if(de.call(ue,Br)&&(ar=ue[Br],ar!=null))switch(Br){case"children":ot=ar;break;case"dangerouslySetInnerHTML":Nt=ar;break;default:$r($,Pe,Br,ar)}if($.push(br),Nt!=null){if(ot!=null)throw Error(m(60));if(typeof Nt!="object"||!("__html"in Nt))throw Error(m(61));ue=Nt.__html,ue!=null&&(typeof ue=="string"&&0<ue.length&&ue[0]===`
`?$.push(sn,J(ue)):$.push(J(""+ue)))}return typeof ot=="string"&&ot[0]===`
`&&$.push(sn),ot;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":$.push(Un(q));for(var ks in ue)if(de.call(ue,ks)&&(ot=ue[ks],ot!=null))switch(ks){case"children":case"dangerouslySetInnerHTML":throw Error(m(399,q));default:$r($,Pe,ks,ot)}return $.push(nn),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return bn($,ue,q,Pe);case"html":return _t.insertionMode===0&&$.push(Wn),bn($,ue,q,Pe);default:if(q.indexOf("-")===-1&&typeof ue.is!="string")return bn($,ue,q,Pe);$.push(Un(q)),Nt=ot=null;for(pn in ue)if(de.call(ue,pn)&&(ar=ue[pn],ar!=null))switch(pn){case"children":ot=ar;break;case"dangerouslySetInnerHTML":Nt=ar;break;case"style":fr($,Pe,ar);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:xe(pn)&&typeof ar!="function"&&typeof ar!="symbol"&&$.push(pr,J(pn),Qr,J(yt(ar)),Tr)}return $.push(br),Hr($,Nt,ot),ot}}var Jn=Y("</"),Hn=Y(">"),Bn=Y('<template id="'),Ji=Y('"></template>'),Gi=Y("<!--$-->"),Vi=Y('<!--$?--><template id="'),ei=Y('"></template>'),ii=Y("<!--$!-->"),mo=Y("<!--/$-->"),et=Y("<template"),se=Y('"'),ae=Y(' data-dgst="');Y(' data-msg="'),Y(' data-stck="');var ge=Y("></template>");function Ie($,q,ue){if(P($,Vi),ue===null)throw Error(m(395));return P($,ue),O($,ei)}var Ue=Y('<div hidden id="'),fe=Y('">'),qe=Y("</div>"),We=Y('<svg aria-hidden="true" style="display:none" id="'),rt=Y('">'),dt=Y("</svg>"),Xe=Y('<math aria-hidden="true" style="display:none" id="'),Lt=Y('">'),Xt=Y("</math>"),cr=Y('<table hidden id="'),Mr=Y('">'),qr=Y("</table>"),Nr=Y('<table hidden><tbody id="'),St=Y('">'),wn=Y("</tbody></table>"),yn=Y('<table hidden><tr id="'),Sn=Y('">'),Fr=Y("</tr></table>"),Ot=Y('<table hidden><colgroup id="'),Or=Y('">'),rn=Y("</colgroup></table>");function Vn($,q,ue,Pe){switch(ue.insertionMode){case 0:case 1:return P($,Ue),P($,q.segmentPrefix),P($,J(Pe.toString(16))),O($,fe);case 2:return P($,We),P($,q.segmentPrefix),P($,J(Pe.toString(16))),O($,rt);case 3:return P($,Xe),P($,q.segmentPrefix),P($,J(Pe.toString(16))),O($,Lt);case 4:return P($,cr),P($,q.segmentPrefix),P($,J(Pe.toString(16))),O($,Mr);case 5:return P($,Nr),P($,q.segmentPrefix),P($,J(Pe.toString(16))),O($,St);case 6:return P($,yn),P($,q.segmentPrefix),P($,J(Pe.toString(16))),O($,Sn);case 7:return P($,Ot),P($,q.segmentPrefix),P($,J(Pe.toString(16))),O($,Or);default:throw Error(m(397))}}function Zn($,q){switch(q.insertionMode){case 0:case 1:return O($,qe);case 2:return O($,dt);case 3:return O($,Xt);case 4:return O($,qr);case 5:return O($,wn);case 6:return O($,Fr);case 7:return O($,rn);default:throw Error(m(397))}}var Po=Y('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'),un=Y('$RS("'),Ys=Y('","'),Qs=Y('")<\/script>'),Ps=Y('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("'),el=Y('$RC("'),Zo=Y('","'),La=Y('")<\/script>'),cn=Y('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("'),li=Y('$RX("'),qn=Y('"'),Da=Y(")<\/script>"),is=Y(","),Kl=/[<\u2028\u2029]/g;function Do($){return JSON.stringify($).replace(Kl,function(q){switch(q){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}var eo=Object.assign,os=Symbol.for("react.element"),tl=Symbol.for("react.portal"),go=Symbol.for("react.fragment"),ga=Symbol.for("react.strict_mode"),Xl=Symbol.for("react.profiler"),pu=Symbol.for("react.provider"),ya=Symbol.for("react.context"),Yl=Symbol.for("react.forward_ref"),Oa=Symbol.for("react.suspense"),Es=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),Q=Symbol.for("react.lazy"),he=Symbol.for("react.scope"),Ee=Symbol.for("react.debug_trace_mode"),gt=Symbol.for("react.legacy_hidden"),ut=Symbol.for("react.default_value"),Dt=Symbol.iterator;function sr($){if($==null)return null;if(typeof $=="function")return $.displayName||$.name||null;if(typeof $=="string")return $;switch($){case go:return"Fragment";case tl:return"Portal";case Xl:return"Profiler";case ga:return"StrictMode";case Oa:return"Suspense";case Es:return"SuspenseList"}if(typeof $=="object")switch($.$$typeof){case ya:return($.displayName||"Context")+".Consumer";case pu:return($._context.displayName||"Context")+".Provider";case Yl:var q=$.render;return $=$.displayName,$||($=q.displayName||q.name||"",$=$!==""?"ForwardRef("+$+")":"ForwardRef"),$;case B:return q=$.displayName||null,q!==null?q:sr($.type)||"Memo";case Q:q=$._payload,$=$._init;try{return sr($(q))}catch{}}return null}var mr={};function kr($,q){if($=$.contextTypes,!$)return mr;var ue={},Pe;for(Pe in $)ue[Pe]=q[Pe];return ue}var yr=null;function Nn($,q){if($!==q){$.context._currentValue=$.parentValue,$=$.parent;var ue=q.parent;if($===null){if(ue!==null)throw Error(m(401))}else{if(ue===null)throw Error(m(401));Nn($,ue)}q.context._currentValue=q.value}}function yi($){$.context._currentValue=$.parentValue,$=$.parent,$!==null&&yi($)}function to($){var q=$.parent;q!==null&&to(q),$.context._currentValue=$.value}function Jr($,q){if($.context._currentValue=$.parentValue,$=$.parent,$===null)throw Error(m(402));$.depth===q.depth?Nn($,q):Jr($,q)}function ss($,q){var ue=q.parent;if(ue===null)throw Error(m(402));$.depth===ue.depth?Nn($,ue):ss($,ue),q.context._currentValue=q.value}function Eo($){var q=yr;q!==$&&(q===null?to($):$===null?yi(q):q.depth===$.depth?Nn(q,$):q.depth>$.depth?Jr(q,$):ss(q,$),yr=$)}var Io={isMounted:function(){return!1},enqueueSetState:function($,q){$=$._reactInternals,$.queue!==null&&$.queue.push(q)},enqueueReplaceState:function($,q){$=$._reactInternals,$.replace=!0,$.queue=[q]},enqueueForceUpdate:function(){}};function ui($,q,ue,Pe){var _t=$.state!==void 0?$.state:null;$.updater=Io,$.props=ue,$.state=_t;var ot={queue:[],replace:!1};$._reactInternals=ot;var Nt=q.contextType;if($.context=typeof Nt=="object"&&Nt!==null?Nt._currentValue:Pe,Nt=q.getDerivedStateFromProps,typeof Nt=="function"&&(Nt=Nt(ue,_t),_t=Nt==null?_t:eo({},_t,Nt),$.state=_t),typeof q.getDerivedStateFromProps!="function"&&typeof $.getSnapshotBeforeUpdate!="function"&&(typeof $.UNSAFE_componentWillMount=="function"||typeof $.componentWillMount=="function"))if(q=$.state,typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount(),q!==$.state&&Io.enqueueReplaceState($,$.state,null),ot.queue!==null&&0<ot.queue.length)if(q=ot.queue,Nt=ot.replace,ot.queue=null,ot.replace=!1,Nt&&q.length===1)$.state=q[0];else{for(ot=Nt?q[0]:$.state,_t=!0,Nt=Nt?1:0;Nt<q.length;Nt++){var ar=q[Nt];ar=typeof ar=="function"?ar.call($,ot,ue,Pe):ar,ar!=null&&(_t?(_t=!1,ot=eo({},ot,ar)):eo(ot,ar))}$.state=ot}else ot.queue=null}var ci={id:1,overflow:""};function Dn($,q,ue){var Pe=$.id;$=$.overflow;var _t=32-Pi(Pe)-1;Pe&=~(1<<_t),ue+=1;var ot=32-Pi(q)+_t;if(30<ot){var Nt=_t-_t%5;return ot=(Pe&(1<<Nt)-1).toString(32),Pe>>=Nt,_t-=Nt,{id:1<<32-Pi(q)+_t|ue<<_t|Pe,overflow:ot+$}}return{id:1<<ot|ue<<_t|Pe,overflow:$}}var Pi=Math.clz32?Math.clz32:Oo,On=Math.log,mu=Math.LN2;function Oo($){return $>>>=0,$===0?32:31-(On($)/mu|0)|0}function ro($,q){return $===q&&($!==0||1/$===1/q)||$!==$&&q!==q}var as=typeof Object.is=="function"?Object.is:ro,ls=null,Ln=null,hi=null,Lr=null,gr=!1,Pn=!1,Kr=0,us=null,no=0;function rl(){if(ls===null)throw Error(m(321));return ls}function gu(){if(0<no)throw Error(m(312));return{memoizedState:null,queue:null,next:null}}function Fa(){return Lr===null?hi===null?(gr=!1,hi=Lr=gu()):(gr=!0,Lr=hi):Lr.next===null?(gr=!1,Lr=Lr.next=gu()):(gr=!0,Lr=Lr.next),Lr}function _a(){Ln=ls=null,Pn=!1,hi=null,no=0,Lr=us=null}function Ql($,q){return typeof q=="function"?q($):q}function di($,q,ue){if(ls=rl(),Lr=Fa(),gr){var Pe=Lr.queue;if(q=Pe.dispatch,us!==null&&(ue=us.get(Pe),ue!==void 0)){us.delete(Pe),Pe=Lr.memoizedState;do Pe=$(Pe,ue.action),ue=ue.next;while(ue!==null);return Lr.memoizedState=Pe,[Pe,q]}return[Lr.memoizedState,q]}return $=$===Ql?typeof q=="function"?q():q:ue!==void 0?ue(q):q,Lr.memoizedState=$,$=Lr.queue={last:null,dispatch:null},$=$.dispatch=cs.bind(null,ls,$),[Lr.memoizedState,$]}function nl($,q){if(ls=rl(),Lr=Fa(),q=q===void 0?null:q,Lr!==null){var ue=Lr.memoizedState;if(ue!==null&&q!==null){var Pe=ue[1];e:if(Pe===null)Pe=!1;else{for(var _t=0;_t<Pe.length&&_t<q.length;_t++)if(!as(q[_t],Pe[_t])){Pe=!1;break e}Pe=!0}if(Pe)return ue[0]}}return $=$(),Lr.memoizedState=[$,q],$}function cs($,q,ue){if(25<=no)throw Error(m(301));if($===ls)if(Pn=!0,$={action:ue,next:null},us===null&&(us=new Map),ue=us.get(q),ue===void 0)us.set(q,$);else{for(q=ue;q.next!==null;)q=q.next;q.next=$}}function il(){throw Error(m(394))}function _i(){}var Fi={readContext:function($){return $._currentValue},useContext:function($){return rl(),$._currentValue},useMemo:nl,useReducer:di,useRef:function($){ls=rl(),Lr=Fa();var q=Lr.memoizedState;return q===null?($={current:$},Lr.memoizedState=$):q},useState:function($){return di(Ql,$)},useInsertionEffect:_i,useLayoutEffect:function(){},useCallback:function($,q){return nl(function(){return $},q)},useImperativeHandle:_i,useEffect:_i,useDebugValue:_i,useDeferredValue:function($){return rl(),$},useTransition:function(){return rl(),[!1,il]},useId:function(){var $=Ln.treeContext,q=$.overflow;$=$.id,$=($&~(1<<32-Pi($)-1)).toString(32)+q;var ue=Ba;if(ue===null)throw Error(m(404));return q=Kr++,$=":"+ue.idPrefix+"R"+$,0<q&&($+="H"+q.toString(32)),$+":"},useMutableSource:function($,q){return rl(),q($._source)},useSyncExternalStore:function($,q,ue){if(ue===void 0)throw Error(m(407));return ue()}},Ba=null,Ai=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function Ei($){return console.error($),null}function va(){}function ol($,q,ue,Pe,_t,ot,Nt,ar,Br){var pn=[],Xr=new Set;return q={destination:null,responseState:q,progressiveChunkSize:Pe===void 0?12800:Pe,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:Xr,pingedTasks:pn,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:_t===void 0?Ei:_t,onAllReady:ot===void 0?va:ot,onShellReady:Nt===void 0?va:Nt,onShellError:ar===void 0?va:ar,onFatalError:Br===void 0?va:Br},ue=yo(q,0,null,ue,!1,!1),ue.parentFlushed=!0,$=Vu(q,$,null,ue,Xr,mr,null,ci),pn.push($),q}function Vu($,q,ue,Pe,_t,ot,Nt,ar){$.allPendingTasks++,ue===null?$.pendingRootTasks++:ue.pendingTasks++;var Br={node:q,ping:function(){var pn=$.pingedTasks;pn.push(Br),pn.length===1&&_u($)},blockedBoundary:ue,blockedSegment:Pe,abortSet:_t,legacyContext:ot,context:Nt,treeContext:ar};return _t.add(Br),Br}function yo($,q,ue,Pe,_t,ot){return{status:0,id:-1,index:q,parentFlushed:!1,chunks:[],children:[],formatContext:Pe,boundary:ue,lastPushedText:_t,textEmbedded:ot}}function Bi($,q){if($=$.onError(q),$!=null&&typeof $!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof $+'" instead');return $}function Ri($,q){var ue=$.onShellError;ue(q),ue=$.onFatalError,ue(q),$.destination!==null?($.status=2,ve($.destination,q)):($.status=1,$.fatalError=q)}function hs($,q,ue,Pe,_t){for(ls={},Ln=q,Kr=0,$=ue(Pe,_t);Pn;)Pn=!1,Kr=0,no+=1,Lr=null,$=ue(Pe,_t);return _a(),$}function Na($,q,ue,Pe){var _t=ue.render(),ot=Pe.childContextTypes;if(ot!=null){var Nt=q.legacyContext;if(typeof ue.getChildContext!="function")Pe=Nt;else{ue=ue.getChildContext();for(var ar in ue)if(!(ar in ot))throw Error(m(108,sr(Pe)||"Unknown",ar));Pe=eo({},Nt,ue)}q.legacyContext=Pe,Zi($,q,_t),q.legacyContext=Nt}else Zi($,q,_t)}function Is($,q){if($&&$.defaultProps){q=eo({},q),$=$.defaultProps;for(var ue in $)q[ue]===void 0&&(q[ue]=$[ue]);return q}return q}function Mo($,q,ue,Pe,_t){if(typeof ue=="function")if(ue.prototype&&ue.prototype.isReactComponent){_t=kr(ue,q.legacyContext);var ot=ue.contextType;ot=new ue(Pe,typeof ot=="object"&&ot!==null?ot._currentValue:_t),ui(ot,ue,Pe,_t),Na($,q,ot,ue)}else{ot=kr(ue,q.legacyContext),_t=hs($,q,ue,Pe,ot);var Nt=Kr!==0;if(typeof _t=="object"&&_t!==null&&typeof _t.render=="function"&&_t.$$typeof===void 0)ui(_t,ue,Pe,ot),Na($,q,_t,ue);else if(Nt){Pe=q.treeContext,q.treeContext=Dn(Pe,1,0);try{Zi($,q,_t)}finally{q.treeContext=Pe}}else Zi($,q,_t)}else if(typeof ue=="string"){switch(_t=q.blockedSegment,ot=Si(_t.chunks,ue,Pe,$.responseState,_t.formatContext),_t.lastPushedText=!1,Nt=_t.formatContext,_t.formatContext=Oe(Nt,ue,Pe),$a($,q,ot),_t.formatContext=Nt,ue){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:_t.chunks.push(Jn,J(ue),Hn)}_t.lastPushedText=!1}else{switch(ue){case gt:case Ee:case ga:case Xl:case go:Zi($,q,Pe.children);return;case Es:Zi($,q,Pe.children);return;case he:throw Error(m(343));case Oa:e:{ue=q.blockedBoundary,_t=q.blockedSegment,ot=Pe.fallback,Pe=Pe.children,Nt=new Set;var ar={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:Nt,errorDigest:null},Br=yo($,_t.chunks.length,ar,_t.formatContext,!1,!1);_t.children.push(Br),_t.lastPushedText=!1;var pn=yo($,0,null,_t.formatContext,!1,!1);pn.parentFlushed=!0,q.blockedBoundary=ar,q.blockedSegment=pn;try{if($a($,q,Pe),pn.lastPushedText&&pn.textEmbedded&&pn.chunks.push(ct),pn.status=1,yu(ar,pn),ar.pendingTasks===0)break e}catch(Xr){pn.status=4,ar.forceClientRender=!0,ar.errorDigest=Bi($,Xr)}finally{q.blockedBoundary=ue,q.blockedSegment=_t}q=Vu($,ot,ue,Br,Nt,q.legacyContext,q.context,q.treeContext),$.pingedTasks.push(q)}return}if(typeof ue=="object"&&ue!==null)switch(ue.$$typeof){case Yl:if(Pe=hs($,q,ue.render,Pe,_t),Kr!==0){ue=q.treeContext,q.treeContext=Dn(ue,1,0);try{Zi($,q,Pe)}finally{q.treeContext=ue}}else Zi($,q,Pe);return;case B:ue=ue.type,Pe=Is(ue,Pe),Mo($,q,ue,Pe,_t);return;case pu:if(_t=Pe.children,ue=ue._context,Pe=Pe.value,ot=ue._currentValue,ue._currentValue=Pe,Nt=yr,yr=Pe={parent:Nt,depth:Nt===null?0:Nt.depth+1,context:ue,parentValue:ot,value:Pe},q.context=Pe,Zi($,q,_t),$=yr,$===null)throw Error(m(403));Pe=$.parentValue,$.context._currentValue=Pe===ut?$.context._defaultValue:Pe,$=yr=$.parent,q.context=$;return;case ya:Pe=Pe.children,Pe=Pe(ue._currentValue),Zi($,q,Pe);return;case Q:_t=ue._init,ue=_t(ue._payload),Pe=Is(ue,Pe),Mo($,q,ue,Pe,void 0);return}throw Error(m(130,ue==null?ue:typeof ue,""))}}function Zi($,q,ue){if(q.node=ue,typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case os:Mo($,q,ue.type,ue.props,ue.ref);return;case tl:throw Error(m(257));case Q:var Pe=ue._init;ue=Pe(ue._payload),Zi($,q,ue);return}if(re(ue)){Kn($,q,ue);return}if(ue===null||typeof ue!="object"?Pe=null:(Pe=Dt&&ue[Dt]||ue["@@iterator"],Pe=typeof Pe=="function"?Pe:null),Pe&&(Pe=Pe.call(ue))){if(ue=Pe.next(),!ue.done){var _t=[];do _t.push(ue.value),ue=Pe.next();while(!ue.done);Kn($,q,_t)}return}throw $=Object.prototype.toString.call(ue),Error(m(31,$==="[object Object]"?"object with keys {"+Object.keys(ue).join(", ")+"}":$))}typeof ue=="string"?(Pe=q.blockedSegment,Pe.lastPushedText=Ut(q.blockedSegment.chunks,ue,$.responseState,Pe.lastPushedText)):typeof ue=="number"&&(Pe=q.blockedSegment,Pe.lastPushedText=Ut(q.blockedSegment.chunks,""+ue,$.responseState,Pe.lastPushedText))}function Kn($,q,ue){for(var Pe=ue.length,_t=0;_t<Pe;_t++){var ot=q.treeContext;q.treeContext=Dn(ot,Pe,_t);try{$a($,q,ue[_t])}finally{q.treeContext=ot}}}function $a($,q,ue){var Pe=q.blockedSegment.formatContext,_t=q.legacyContext,ot=q.context;try{return Zi($,q,ue)}catch(Br){if(_a(),typeof Br=="object"&&Br!==null&&typeof Br.then=="function"){ue=Br;var Nt=q.blockedSegment,ar=yo($,Nt.chunks.length,null,Nt.formatContext,Nt.lastPushedText,!0);Nt.children.push(ar),Nt.lastPushedText=!1,$=Vu($,q.node,q.blockedBoundary,ar,q.abortSet,q.legacyContext,q.context,q.treeContext).ping,ue.then($,$),q.blockedSegment.formatContext=Pe,q.legacyContext=_t,q.context=ot,Eo(ot)}else throw q.blockedSegment.formatContext=Pe,q.legacyContext=_t,q.context=ot,Eo(ot),Br}}function Zu($){var q=$.blockedBoundary;$=$.blockedSegment,$.status=3,Nh(this,q,$)}function Bh($,q,ue){var Pe=$.blockedBoundary;$.blockedSegment.status=3,Pe===null?(q.allPendingTasks--,q.status!==2&&(q.status=2,q.destination!==null&&q.destination.close())):(Pe.pendingTasks--,Pe.forceClientRender||(Pe.forceClientRender=!0,$=ue===void 0?Error(m(432)):ue,Pe.errorDigest=q.onError($),Pe.parentFlushed&&q.clientRenderedBoundaries.push(Pe)),Pe.fallbackAbortableTasks.forEach(function(_t){return Bh(_t,q,ue)}),Pe.fallbackAbortableTasks.clear(),q.allPendingTasks--,q.allPendingTasks===0&&(Pe=q.onAllReady,Pe()))}function yu($,q){if(q.chunks.length===0&&q.children.length===1&&q.children[0].boundary===null){var ue=q.children[0];ue.id=q.id,ue.parentFlushed=!0,ue.status===1&&yu($,ue)}else $.completedSegments.push(q)}function Nh($,q,ue){if(q===null){if(ue.parentFlushed){if($.completedRootSegment!==null)throw Error(m(389));$.completedRootSegment=ue}$.pendingRootTasks--,$.pendingRootTasks===0&&($.onShellError=va,q=$.onShellReady,q())}else q.pendingTasks--,q.forceClientRender||(q.pendingTasks===0?(ue.parentFlushed&&ue.status===1&&yu(q,ue),q.parentFlushed&&$.completedBoundaries.push(q),q.fallbackAbortableTasks.forEach(Zu,$),q.fallbackAbortableTasks.clear()):ue.parentFlushed&&ue.status===1&&(yu(q,ue),q.completedSegments.length===1&&q.parentFlushed&&$.partialBoundaries.push(q)));$.allPendingTasks--,$.allPendingTasks===0&&($=$.onAllReady,$())}function _u($){if($.status!==2){var q=yr,ue=Ai.current;Ai.current=Fi;var Pe=Ba;Ba=$.responseState;try{var _t=$.pingedTasks,ot;for(ot=0;ot<_t.length;ot++){var Nt=_t[ot],ar=$,Br=Nt.blockedSegment;if(Br.status===0){Eo(Nt.context);try{Zi(ar,Nt,Nt.node),Br.lastPushedText&&Br.textEmbedded&&Br.chunks.push(ct),Nt.abortSet.delete(Nt),Br.status=1,Nh(ar,Nt.blockedBoundary,Br)}catch(ds){if(_a(),typeof ds=="object"&&ds!==null&&typeof ds.then=="function"){var pn=Nt.ping;ds.then(pn,pn)}else{Nt.abortSet.delete(Nt),Br.status=4;var Xr=Nt.blockedBoundary,fi=ds,Fo=Bi(ar,fi);if(Xr===null?Ri(ar,fi):(Xr.pendingTasks--,Xr.forceClientRender||(Xr.forceClientRender=!0,Xr.errorDigest=Fo,Xr.parentFlushed&&ar.clientRenderedBoundaries.push(Xr))),ar.allPendingTasks--,ar.allPendingTasks===0){var ks=ar.onAllReady;ks()}}}finally{}}}_t.splice(0,ot),$.destination!==null&&Gu($,$.destination)}catch(ds){Bi($,ds),Ri($,ds)}finally{Ba=Pe,Ai.current=ue,ue===Fi&&Eo(q)}}}function sl($,q,ue){switch(ue.parentFlushed=!0,ue.status){case 0:var Pe=ue.id=$.nextSegmentId++;return ue.lastPushedText=!1,ue.textEmbedded=!1,$=$.responseState,P(q,Bn),P(q,$.placeholderPrefix),$=J(Pe.toString(16)),P(q,$),O(q,Ji);case 1:ue.status=2;var _t=!0;Pe=ue.chunks;var ot=0;ue=ue.children;for(var Nt=0;Nt<ue.length;Nt++){for(_t=ue[Nt];ot<_t.index;ot++)P(q,Pe[ot]);_t=kl($,q,_t)}for(;ot<Pe.length-1;ot++)P(q,Pe[ot]);return ot<Pe.length&&(_t=O(q,Pe[ot])),_t;default:throw Error(m(390))}}function kl($,q,ue){var Pe=ue.boundary;if(Pe===null)return sl($,q,ue);if(Pe.parentFlushed=!0,Pe.forceClientRender)Pe=Pe.errorDigest,O(q,ii),P(q,et),Pe&&(P(q,ae),P(q,J(yt(Pe))),P(q,se)),O(q,ge),sl($,q,ue);else if(0<Pe.pendingTasks){Pe.rootSegmentID=$.nextSegmentId++,0<Pe.completedSegments.length&&$.partialBoundaries.push(Pe);var _t=$.responseState,ot=_t.nextSuspenseID++;_t=Y(_t.boundaryPrefix+ot.toString(16)),Pe=Pe.id=_t,Ie(q,$.responseState,Pe),sl($,q,ue)}else if(Pe.byteSize>$.progressiveChunkSize)Pe.rootSegmentID=$.nextSegmentId++,$.completedBoundaries.push(Pe),Ie(q,$.responseState,Pe.id),sl($,q,ue);else{if(O(q,Gi),ue=Pe.completedSegments,ue.length!==1)throw Error(m(391));kl($,q,ue[0])}return O(q,mo)}function Al($,q,ue){return Vn(q,$.responseState,ue.formatContext,ue.id),kl($,q,ue),Zn(q,ue.formatContext)}function ja($,q,ue){for(var Pe=ue.completedSegments,_t=0;_t<Pe.length;_t++)Ms($,q,ue,Pe[_t]);if(Pe.length=0,$=$.responseState,Pe=ue.id,ue=ue.rootSegmentID,P(q,$.startInlineScript),$.sentCompleteBoundaryFunction?P(q,el):($.sentCompleteBoundaryFunction=!0,P(q,Ps)),Pe===null)throw Error(m(395));return ue=J(ue.toString(16)),P(q,Pe),P(q,Zo),P(q,$.segmentPrefix),P(q,ue),O(q,La)}function Ms($,q,ue,Pe){if(Pe.status===2)return!0;var _t=Pe.id;if(_t===-1){if((Pe.id=ue.rootSegmentID)===-1)throw Error(m(392));return Al($,q,Pe)}return Al($,q,Pe),$=$.responseState,P(q,$.startInlineScript),$.sentCompleteSegmentFunction?P(q,un):($.sentCompleteSegmentFunction=!0,P(q,Po)),P(q,$.segmentPrefix),_t=J(_t.toString(16)),P(q,_t),P(q,Ys),P(q,$.placeholderPrefix),P(q,_t),O(q,Qs)}function Gu($,q){p=new Uint8Array(512),T=0;try{var ue=$.completedRootSegment;if(ue!==null&&$.pendingRootTasks===0){kl($,q,ue),$.completedRootSegment=null;var Pe=$.responseState.bootstrapChunks;for(ue=0;ue<Pe.length-1;ue++)P(q,Pe[ue]);ue<Pe.length&&O(q,Pe[ue])}var _t=$.clientRenderedBoundaries,ot;for(ot=0;ot<_t.length;ot++){var Nt=_t[ot];Pe=q;var ar=$.responseState,Br=Nt.id,pn=Nt.errorDigest,Xr=Nt.errorMessage,fi=Nt.errorComponentStack;if(P(Pe,ar.startInlineScript),ar.sentClientRenderFunction?P(Pe,li):(ar.sentClientRenderFunction=!0,P(Pe,cn)),Br===null)throw Error(m(395));P(Pe,Br),P(Pe,qn),(pn||Xr||fi)&&(P(Pe,is),P(Pe,J(Do(pn||"")))),(Xr||fi)&&(P(Pe,is),P(Pe,J(Do(Xr||"")))),fi&&(P(Pe,is),P(Pe,J(Do(fi)))),O(Pe,Da)}_t.splice(0,ot);var Fo=$.completedBoundaries;for(ot=0;ot<Fo.length;ot++)ja($,q,Fo[ot]);Fo.splice(0,ot),M(q),p=new Uint8Array(512),T=0;var ks=$.partialBoundaries;for(ot=0;ot<ks.length;ot++){var ds=ks[ot];e:{_t=$,Nt=q;var Js=ds.completedSegments;for(ar=0;ar<Js.length;ar++)if(!Ms(_t,Nt,ds,Js[ar])){ar++,Js.splice(0,ar);var zc=!1;break e}Js.splice(0,ar),zc=!0}if(!zc){$.destination=null,ot++,ks.splice(0,ot);return}}ks.splice(0,ot);var al=$.completedBoundaries;for(ot=0;ot<al.length;ot++)ja($,q,al[ot]);al.splice(0,ot)}finally{M(q),$.allPendingTasks===0&&$.pingedTasks.length===0&&$.clientRenderedBoundaries.length===0&&$.completedBoundaries.length===0&&q.close()}}function Wu($,q){try{var ue=$.abortableTasks;ue.forEach(function(Pe){return Bh(Pe,$,q)}),ue.clear(),$.destination!==null&&Gu($,$.destination)}catch(Pe){Bi($,Pe),Ri($,Pe)}}return Vg.renderToReadableStream=function($,q){return new Promise(function(ue,Pe){var _t,ot,Nt=new Promise(function(Xr,fi){ot=Xr,_t=fi}),ar=ol($,xt(q?q.identifierPrefix:void 0,q?q.nonce:void 0,q?q.bootstrapScriptContent:void 0,q?q.bootstrapScripts:void 0,q?q.bootstrapModules:void 0),Wt(q?q.namespaceURI:void 0),q?q.progressiveChunkSize:void 0,q?q.onError:void 0,ot,function(){var Xr=new ReadableStream({type:"bytes",pull:function(fi){if(ar.status===1)ar.status=2,ve(fi,ar.fatalError);else if(ar.status!==2&&ar.destination===null){ar.destination=fi;try{Gu(ar,fi)}catch(Fo){Bi(ar,Fo),Ri(ar,Fo)}}},cancel:function(){Wu(ar)}},{highWaterMark:0});Xr.allReady=Nt,ue(Xr)},function(Xr){Nt.catch(function(){}),Pe(Xr)},_t);if(q&&q.signal){var Br=q.signal,pn=function(){Wu(ar,Br.reason),Br.removeEventListener("abort",pn)};Br.addEventListener("abort",pn)}_u(ar)})},Vg.version="18.3.1",Vg}var G0;function vE(){if(G0)return jf;G0=1;var c,m;return c=yE(),m=_E(),jf.version=c.version,jf.renderToString=c.renderToString,jf.renderToStaticMarkup=c.renderToStaticMarkup,jf.renderToNodeStream=c.renderToNodeStream,jf.renderToStaticNodeStream=c.renderToStaticNodeStream,jf.renderToReadableStream=m.renderToReadableStream,jf}vE();function xE(c){const{color:m="red",text:p=""}=c;return _r.jsxs("div",{className:"legendItem",children:[_r.jsx("div",{className:"legendItemColorBox",style:{background:m}}),_r.jsx("div",{className:"legendItemText",children:_r.jsx("span",{children:p})})]})}function bE(c){return _r.jsx("div",{className:"legend",children:c.items.map((m,p)=>_r.jsx(xE,{color:m.color,text:m.value},p))})}function wE(c){return _r.jsx("div",{className:"legend-group",children:_r.jsx(bE,{items:c})})}const W0={MAPTILER_TOKEN:"U4hNLWRENxTa7CfHUUnN"},eb=[{title:"Light basemap",uri:"https://api.maptiler.com/maps/outdoor-v2/style.json?key="+W0.MAPTILER_TOKEN},{title:"Satellite basemap",uri:"https://api.maptiler.com/maps/hybrid/style.json?key="+W0.MAPTILER_TOKEN}];class nm{constructor(m,p){this.styles=m||nm.DEFAULT_STYLES,this.defaultStyle=p||nm.DEFAULT_STYLE,this.onDocumentClick=this.onDocumentClick.bind(this)}getDefaultPosition(){return"top-right"}onAdd(m){this.map=m,this.controlContainer=document.createElement("div"),this.controlContainer.classList.add("maplibregl-ctrl"),this.controlContainer.classList.add("maplibregl-ctrl-group"),this.mapStyleContainer=document.createElement("div"),this.styleButton=document.createElement("button"),this.styleButton.type="button",this.mapStyleContainer.classList.add("maplibregl-style-list");for(const p of this.styles){const T=document.createElement("button");T.type="button",T.innerText=p.title,T.classList.add(p.title.replace(/[^a-z0-9-]/gi,"_")),T.dataset.uri=JSON.stringify(p.uri),T.addEventListener("click",P=>{const O=P.srcElement;if(O.classList.contains("active"))return;(this.map&&this.map.getStyle&&this.map.getStyle().layers||[]).forEach(J=>{J&&J.id&&J.id.includes("ol-")&&this.map.getLayer(J.id)&&this.map.removeLayer(J.id)}),this.map.triggerRepaint(),p.uri!==""&&fetch(JSON.parse(O.dataset.uri)).then(J=>J.json()).then(J=>{if(J.sources&&Object.entries(J.sources).forEach(([Y,ve])=>{try{this.map.getSource(Y)||this.map.addSource(Y,ve)}catch(de){console.error("Failed to add source",Y,de)}}),J.layers&&Array.isArray(J.layers)){const ve=(this.map.getStyle&&this.map.getStyle().layers||[]).map(we=>we.id),Te=["hex_5km","hex_10km","hex_25km","hex_50km","hex_100km","counties"].find(we=>ve.includes(we)),le=ve.length?ve[0]:null;J.layers.forEach(we=>{if(!we||!we.id)return;const xe=Object.assign({},we,{id:"ol-"+we.id});try{this.map.getLayer(xe.id)&&this.map.removeLayer(xe.id);const Ze=Te||le;Ze&&this.map.getLayer(Ze)?this.map.addLayer(xe,Ze):le&&this.map.getLayer(le)?this.map.addLayer(xe,le):this.map.addLayer(xe)}catch(Ze){console.error("Failed to add layer",xe.id,Ze)}})}this.map.triggerRepaint()}).catch(J=>console.error("Error loading style",J)),this.mapStyleContainer.style.display="none",this.styleButton.style.display="block";const u=this.mapStyleContainer.getElementsByClassName("active");for(;u[0];)u[0].classList.remove("active");O.classList.add("active")}),p.title===this.defaultStyle&&T.classList.add("active"),this.mapStyleContainer.appendChild(T)}return this.styleButton.classList.add("maplibregl-ctrl-icon"),this.styleButton.classList.add("maplibregl-style-switcher"),this.styleButton.addEventListener("click",()=>{this.styleButton.style.display="none",this.mapStyleContainer.style.display="block"}),document.addEventListener("click",this.onDocumentClick),this.controlContainer.appendChild(this.styleButton),this.controlContainer.appendChild(this.mapStyleContainer),this.controlContainer}onRemove(){!this.controlContainer||!this.controlContainer.parentNode||!this.map||!this.styleButton||(this.styleButton.removeEventListener("click",this.onDocumentClick),this.controlContainer.parentNode.removeChild(this.controlContainer),document.removeEventListener("click",this.onDocumentClick),this.map=void 0)}onDocumentClick(m){this.controlContainer&&!this.controlContainer.contains(m.target)&&this.mapStyleContainer&&this.styleButton&&(this.mapStyleContainer.style.display="none",this.styleButton.style.display="block")}}nm.DEFAULT_STYLE="Demotiles";nm.DEFAULT_STYLES=eb;function SE(c){const{COGUrl:m,opacity:p,challenges:T,challenge:P,colorBy:O}=c,[M,u]=Zt.useState(null),J=[{value:10,color:"#22301a"},{value:50,color:"#3f5830"},{value:100,color:"#54793e"},{value:500,color:"#98cd79"},{value:2500,color:"#cce7bd"}],Y=[{value:5,color:"#22301a"},{value:10,color:"#34426e"},{value:50,color:"#5a6eae"},{value:200,color:"#5aa6ed"},{value:500,color:"#b5d1eb"}];Zt.useRef();const[ve,de]=Zt.useState(J);Zt.useEffect(()=>{let le=new nE;return Hp.addProtocol("pmtiles",le.tile),()=>{Hp.removeProtocol("pmtiles")}},[]);const Te=le=>le==="obsdens"?(de(J),["interpolate",["linear"],["to-number",["get",le]],J[0].value,J[0].color,J[1].value,J[1].color,J[2].value,J[2].color,J[3].value,J[3].color,J[4].value,J[4].color]):(de(Y),["interpolate",["linear"],["to-number",["get",le]],Y[0].value,Y[0].color,Y[1].value,Y[1].color,Y[2].value,Y[2].color,Y[3].value,Y[3].color,Y[4].value,Y[4].color]);return Zt.useEffect(()=>{if(m&&!M){const le=new Hp.Map({container:"App",zoom:3.5,center:[-120,58],style:{version:8,projection:{type:"globe"},sources:{terrain:{type:"raster-dem",tiles:["https://tiler.biodiversite-quebec.ca/cog/tiles/{z}/{x}/{y}?url=https://object-arbutus.cloud.computecanada.ca/bq-io/io/earthenv/topography/elevation_1KMmn_GMTEDmn.tif&rescale=0,2013&bidx=1&expression=b1"],tileSize:256},counties:{type:"vector",url:"pmtiles://https://object-arbutus.cloud.computecanada.ca/bq-io/blitz-the-gap/alltaxa-hex.pmtiles"},hex_100km:{type:"vector",url:"pmtiles://https://object-arbutus.cloud.computecanada.ca/bq-io/blitz-the-gap/all_100km.pmtiles"},hex_50km:{type:"vector",url:"pmtiles://https://object-arbutus.cloud.computecanada.ca/bq-io/blitz-the-gap/all_50km.pmtiles"},hex_25km:{type:"vector",url:"pmtiles://https://object-arbutus.cloud.computecanada.ca/bq-io/blitz-the-gap/all_25km.pmtiles"},hex_10km:{type:"vector",url:"pmtiles://https://object-arbutus.cloud.computecanada.ca/bq-io/blitz-the-gap/all_10km.pmtiles"},hex_5km:{type:"vector",url:"pmtiles://https://object-arbutus.cloud.computecanada.ca/bq-io/blitz-the-gap/all_5km.pmtiles"},background:{type:"raster",tiles:["https://01.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png"],tileSize:256}},layers:[{id:"back",type:"raster",source:"background"},{id:"hex_5km",type:"fill","source-layer":"all_5km",source:"hex_5km",paint:{"fill-color":Te(P),"fill-opacity":.4,"fill-outline-color":"#ffffff22"},minzoom:6},{id:"hex_10km",type:"fill","source-layer":"all_10km",source:"hex_10km",paint:{"fill-color":Te(O),"fill-opacity":.4,"fill-outline-color":"#ffffff11"},minzoom:5,maxzoom:6},{id:"hex_25km",type:"fill","source-layer":"all_25km",source:"hex_25km",paint:{"fill-color":Te(O),"fill-opacity":.4,"fill-outline-color":"#ffffff11"},minzoom:3,maxzoom:5},{id:"hex_50km",type:"fill","source-layer":"all_50km",source:"hex_50km",paint:{"fill-color":Te(O),"fill-opacity":.4,"fill-outline-color":"#ffffff11"},maxzoom:3,minzoom:0}],sky:{"atmosphere-blend":["interpolate",["linear"],["zoom"],0,1,5,1,7,0]},light:{anchor:"viewport",position:[1.5,90,40],intensity:.25,color:"#555"}}});return le.once("load",()=>{eb.forEach(we=>{we.uri!==""&&fetch(we.uri).then(xe=>xe.json()).then(xe=>{Object.entries(xe.sources).forEach(([Ze,mt])=>{le&&!le.getSource(Ze)&&le.addSource(Ze,mt)})})})}),le.addControl(new Hp.GlobeControl),le.addControl(new Hp.NavigationControl({showZoom:!0,showCompass:!1})),le.on("click",we=>{const xe=le.queryRenderedFeatures(we.point),Ze=document.createElement("div");pw.createRoot(Ze).render(_r.jsxs("div",{style:{textAlign:"center",fontSize:"16px"},children:[_r.jsxs(_r.Fragment,{children:["Number of observations",_r.jsx("br",{}),_r.jsxs("div",{style:{fontSize:"20px",fontWeight:"bold",paddingTop:"5px",color:"#3f5830"},children:[" ",xe[0].properties.obsdens]})]}),_r.jsxs(_r.Fragment,{children:["Number of species",_r.jsx("br",{}),_r.jsx("div",{style:{fontSize:"20px",fontWeight:"bold",paddingTop:"5px",color:"#34426e"},children:xe[0].properties.spdens?xe[0].properties.spdens:"0"})]})]})),new Hp.Popup().setLngLat([we.lngLat.lng,we.lngLat.lat]).setDOMContent(Ze).addTo(le)}),le.on("mouseenter","counties",()=>{le.getCanvas().style.cursor="crosshair"}),le.on("mouseleave","counties",()=>{le.getCanvas().style.cursor="pointer"}),le.addControl(new nm),u(le),()=>{le.remove()}}},[]),Zt.useEffect(()=>(M&&(M.setPaintProperty("hex_5km","fill-color",Te(O)),M.setPaintProperty("hex_10km","fill-color",Te(O)),M.setPaintProperty("hex_25km","fill-color",Te(O)),M.setPaintProperty("hex_50km","fill-color",Te(O)),M.triggerRepaint()),()=>{}),[M,P,O]),_r.jsx("div",{id:"App",className:"App",style:{width:"100vw",height:"100vh",zIndex:"0",background:"url('/blitz-the-gap-bc-parks-map/night-sky.png')",position:"relative"},children:_r.jsx("div",{style:{position:"absolute",bottom:40,right:20,zIndex:2e3,pointerEvents:"auto",backgroundColor:"white",padding:"10px",width:75,borderRadius:5},children:wE(ve)})})}function Rc(c,m,p=void 0){const T={};for(const P in c){const O=c[P];let M="",u=!0;for(let J=0;J<O.length;J+=1){const Y=O[J];Y&&(M+=(u===!0?"":" ")+m(Y),u=!1,p&&p[Y]&&(M+=" "+p[Y]))}T[P]=M}return T}function tb(c){var m,p,T="";if(typeof c=="string"||typeof c=="number")T+=c;else if(typeof c=="object")if(Array.isArray(c)){var P=c.length;for(m=0;m<P;m++)c[m]&&(p=tb(c[m]))&&(T&&(T+=" "),T+=p)}else for(p in c)c[p]&&(T&&(T+=" "),T+=p);return T}function To(){for(var c,m,p=0,T="",P=arguments.length;p<P;p++)(c=arguments[p])&&(m=tb(c))&&(T&&(T+=" "),T+=m);return T}function vv({props:c,states:m,muiFormControl:p}){return m.reduce((T,P)=>(T[P]=c[P],p&&typeof c[P]>"u"&&(T[P]=p[P]),T),{})}const rb=Zt.createContext(void 0);function sg(){return Zt.useContext(rb)}function wp(c,...m){const p=new URL(`https://mui.com/production-error/?code=${c}`);return m.forEach(T=>p.searchParams.append("args[]",T)),`Minified MUI error #${c}; visit ${p} for the full message.`}function gi(c){if(typeof c!="string")throw new Error(wp(7));return c.charAt(0).toUpperCase()+c.slice(1)}var b_={exports:{}},Yi={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H0;function TE(){if(H0)return Yi;H0=1;var c=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),M=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),ve=Symbol.for("react.memo"),de=Symbol.for("react.lazy"),Te=Symbol.for("react.view_transition"),le=Symbol.for("react.client.reference");function we(xe){if(typeof xe=="object"&&xe!==null){var Ze=xe.$$typeof;switch(Ze){case c:switch(xe=xe.type,xe){case p:case P:case T:case J:case Y:case Te:return xe;default:switch(xe=xe&&xe.$$typeof,xe){case M:case u:case de:case ve:return xe;case O:return xe;default:return Ze}}case m:return Ze}}}return Yi.ContextConsumer=O,Yi.ContextProvider=M,Yi.Element=c,Yi.ForwardRef=u,Yi.Fragment=p,Yi.Lazy=de,Yi.Memo=ve,Yi.Portal=m,Yi.Profiler=P,Yi.StrictMode=T,Yi.Suspense=J,Yi.SuspenseList=Y,Yi.isContextConsumer=function(xe){return we(xe)===O},Yi.isContextProvider=function(xe){return we(xe)===M},Yi.isElement=function(xe){return typeof xe=="object"&&xe!==null&&xe.$$typeof===c},Yi.isForwardRef=function(xe){return we(xe)===u},Yi.isFragment=function(xe){return we(xe)===p},Yi.isLazy=function(xe){return we(xe)===de},Yi.isMemo=function(xe){return we(xe)===ve},Yi.isPortal=function(xe){return we(xe)===m},Yi.isProfiler=function(xe){return we(xe)===P},Yi.isStrictMode=function(xe){return we(xe)===T},Yi.isSuspense=function(xe){return we(xe)===J},Yi.isSuspenseList=function(xe){return we(xe)===Y},Yi.isValidElementType=function(xe){return typeof xe=="string"||typeof xe=="function"||xe===p||xe===P||xe===T||xe===J||xe===Y||typeof xe=="object"&&xe!==null&&(xe.$$typeof===de||xe.$$typeof===ve||xe.$$typeof===M||xe.$$typeof===O||xe.$$typeof===u||xe.$$typeof===le||xe.getModuleId!==void 0)},Yi.typeOf=we,Yi}var q0;function CE(){return q0||(q0=1,b_.exports=TE()),b_.exports}var nb=CE();function Cd(c){if(typeof c!="object"||c===null)return!1;const m=Object.getPrototypeOf(c);return(m===null||m===Object.prototype||Object.getPrototypeOf(m)===null)&&!(Symbol.toStringTag in c)&&!(Symbol.iterator in c)}function ib(c){if(Zt.isValidElement(c)||nb.isValidElementType(c)||!Cd(c))return c;const m={};return Object.keys(c).forEach(p=>{m[p]=ib(c[p])}),m}function kc(c,m,p={clone:!0}){const T=p.clone?{...c}:c;return Cd(c)&&Cd(m)&&Object.keys(m).forEach(P=>{Zt.isValidElement(m[P])||nb.isValidElementType(m[P])?T[P]=m[P]:Cd(m[P])&&Object.prototype.hasOwnProperty.call(c,P)&&Cd(c[P])?T[P]=kc(c[P],m[P],p):p.clone?T[P]=Cd(m[P])?ib(m[P]):m[P]:T[P]=m[P]}),T}function qm(c,m){return m?kc(c,m,{clone:!1}):c}function PE(c,m){if(!c.containerQueries)return m;const p=Object.keys(m).filter(T=>T.startsWith("@container")).sort((T,P)=>{var M,u;const O=/min-width:\s*([0-9.]+)/;return+(((M=T.match(O))==null?void 0:M[1])||0)-+(((u=P.match(O))==null?void 0:u[1])||0)});return p.length?p.reduce((T,P)=>{const O=m[P];return delete T[P],T[P]=O,T},{...m}):m}function EE(c,m){return m==="@"||m.startsWith("@")&&(c.some(p=>m.startsWith(`@${p}`))||!!m.match(/^@\d/))}function IE(c,m){const p=m.match(/^@([^/]+)?\/?(.+)?$/);if(!p)return null;const[,T,P]=p,O=Number.isNaN(+T)?T||0:+T;return c.containerQueries(P).up(O)}function ME(c){const m=(O,M)=>O.replace("@media",M?`@container ${M}`:"@container");function p(O,M){O.up=(...u)=>m(c.breakpoints.up(...u),M),O.down=(...u)=>m(c.breakpoints.down(...u),M),O.between=(...u)=>m(c.breakpoints.between(...u),M),O.only=(...u)=>m(c.breakpoints.only(...u),M),O.not=(...u)=>{const J=m(c.breakpoints.not(...u),M);return J.includes("not all and")?J.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):J}}const T={},P=O=>(p(T,O),T);return p(P),{...c,containerQueries:P}}const vy={xs:0,sm:600,md:900,lg:1200,xl:1536},K0={keys:["xs","sm","md","lg","xl"],up:c=>`@media (min-width:${vy[c]}px)`},kE={containerQueries:c=>({up:m=>{let p=typeof m=="number"?m:vy[m]||m;return typeof p=="number"&&(p=`${p}px`),c?`@container ${c} (min-width:${p})`:`@container (min-width:${p})`}})};function sf(c,m,p){const T=c.theme||{};if(Array.isArray(m)){const O=T.breakpoints||K0;return m.reduce((M,u,J)=>(M[O.up(O.keys[J])]=p(m[J]),M),{})}if(typeof m=="object"){const O=T.breakpoints||K0;return Object.keys(m).reduce((M,u)=>{if(EE(O.keys,u)){const J=IE(T.containerQueries?T:kE,u);J&&(M[J]=p(m[u],u))}else if(Object.keys(O.values||vy).includes(u)){const J=O.up(u);M[J]=p(m[u],u)}else{const J=u;M[J]=m[J]}return M},{})}return p(m)}function AE(c={}){var p;return((p=c.keys)==null?void 0:p.reduce((T,P)=>{const O=c.up(P);return T[O]={},T},{}))||{}}function RE(c,m){return c.reduce((p,T)=>{const P=p[T];return(!P||Object.keys(P).length===0)&&delete p[T],p},m)}function xy(c,m,p=!0){if(!m||typeof m!="string")return null;if(c&&c.vars&&p){const T=`vars.${m}`.split(".").reduce((P,O)=>P&&P[O]?P[O]:null,c);if(T!=null)return T}return m.split(".").reduce((T,P)=>T&&T[P]!=null?T[P]:null,c)}function ly(c,m,p,T=p){let P;return typeof c=="function"?P=c(p):Array.isArray(c)?P=c[p]||T:P=xy(c,p)||T,m&&(P=m(P,T,c)),P}function Xs(c){const{prop:m,cssProperty:p=c.prop,themeKey:T,transform:P}=c,O=M=>{if(M[m]==null)return null;const u=M[m],J=M.theme,Y=xy(J,T)||{};return sf(M,u,de=>{let Te=ly(Y,P,de);return de===Te&&typeof de=="string"&&(Te=ly(Y,P,`${m}${de==="default"?"":gi(de)}`,de)),p===!1?Te:{[p]:Te}})};return O.propTypes={},O.filterProps=[m],O}function zE(c){const m={};return p=>(m[p]===void 0&&(m[p]=c(p)),m[p])}const LE={m:"margin",p:"padding"},DE={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},X0={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},OE=zE(c=>{if(c.length>2)if(X0[c])c=X0[c];else return[c];const[m,p]=c.split(""),T=LE[m],P=DE[p]||"";return Array.isArray(P)?P.map(O=>T+O):[T+P]}),xv=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],bv=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...xv,...bv];function ag(c,m,p,T){const P=xy(c,m,!0)??p;return typeof P=="number"||typeof P=="string"?O=>typeof O=="string"?O:typeof P=="string"?P.startsWith("var(")&&O===0?0:P.startsWith("var(")&&O===1?P:`calc(${O} * ${P})`:P*O:Array.isArray(P)?O=>{if(typeof O=="string")return O;const M=Math.abs(O),u=P[M];return O>=0?u:typeof u=="number"?-u:typeof u=="string"&&u.startsWith("var(")?`calc(-1 * ${u})`:`-${u}`}:typeof P=="function"?P:()=>{}}function wv(c){return ag(c,"spacing",8)}function lg(c,m){return typeof m=="string"||m==null?m:c(m)}function FE(c,m){return p=>c.reduce((T,P)=>(T[P]=lg(m,p),T),{})}function BE(c,m,p,T){if(!m.includes(p))return null;const P=OE(p),O=FE(P,T),M=c[p];return sf(c,M,O)}function ob(c,m){const p=wv(c.theme);return Object.keys(c).map(T=>BE(c,m,T,p)).reduce(qm,{})}function Ts(c){return ob(c,xv)}Ts.propTypes={};Ts.filterProps=xv;function Cs(c){return ob(c,bv)}Cs.propTypes={};Cs.filterProps=bv;function by(...c){const m=c.reduce((T,P)=>(P.filterProps.forEach(O=>{T[O]=P}),T),{}),p=T=>Object.keys(T).reduce((P,O)=>m[O]?qm(P,m[O](T)):P,{});return p.propTypes={},p.filterProps=c.reduce((T,P)=>T.concat(P.filterProps),[]),p}function sh(c){return typeof c!="number"?c:`${c}px solid`}function uh(c,m){return Xs({prop:c,themeKey:"borders",transform:m})}const NE=uh("border",sh),$E=uh("borderTop",sh),jE=uh("borderRight",sh),UE=uh("borderBottom",sh),VE=uh("borderLeft",sh),ZE=uh("borderColor"),GE=uh("borderTopColor"),WE=uh("borderRightColor"),HE=uh("borderBottomColor"),qE=uh("borderLeftColor"),KE=uh("outline",sh),XE=uh("outlineColor"),wy=c=>{if(c.borderRadius!==void 0&&c.borderRadius!==null){const m=ag(c.theme,"shape.borderRadius",4),p=T=>({borderRadius:lg(m,T)});return sf(c,c.borderRadius,p)}return null};wy.propTypes={};wy.filterProps=["borderRadius"];by(NE,$E,jE,UE,VE,ZE,GE,WE,HE,qE,wy,KE,XE);const Sy=c=>{if(c.gap!==void 0&&c.gap!==null){const m=ag(c.theme,"spacing",8),p=T=>({gap:lg(m,T)});return sf(c,c.gap,p)}return null};Sy.propTypes={};Sy.filterProps=["gap"];const Ty=c=>{if(c.columnGap!==void 0&&c.columnGap!==null){const m=ag(c.theme,"spacing",8),p=T=>({columnGap:lg(m,T)});return sf(c,c.columnGap,p)}return null};Ty.propTypes={};Ty.filterProps=["columnGap"];const Cy=c=>{if(c.rowGap!==void 0&&c.rowGap!==null){const m=ag(c.theme,"spacing",8),p=T=>({rowGap:lg(m,T)});return sf(c,c.rowGap,p)}return null};Cy.propTypes={};Cy.filterProps=["rowGap"];const YE=Xs({prop:"gridColumn"}),QE=Xs({prop:"gridRow"}),JE=Xs({prop:"gridAutoFlow"}),eI=Xs({prop:"gridAutoColumns"}),tI=Xs({prop:"gridAutoRows"}),rI=Xs({prop:"gridTemplateColumns"}),nI=Xs({prop:"gridTemplateRows"}),iI=Xs({prop:"gridTemplateAreas"}),oI=Xs({prop:"gridArea"});by(Sy,Ty,Cy,YE,QE,JE,eI,tI,rI,nI,iI,oI);function tm(c,m){return m==="grey"?m:c}const sI=Xs({prop:"color",themeKey:"palette",transform:tm}),aI=Xs({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:tm}),lI=Xs({prop:"backgroundColor",themeKey:"palette",transform:tm});by(sI,aI,lI);function Mc(c){return c<=1&&c!==0?`${c*100}%`:c}const uI=Xs({prop:"width",transform:Mc}),Sv=c=>{if(c.maxWidth!==void 0&&c.maxWidth!==null){const m=p=>{var P,O,M,u,J;const T=((M=(O=(P=c.theme)==null?void 0:P.breakpoints)==null?void 0:O.values)==null?void 0:M[p])||vy[p];return T?((J=(u=c.theme)==null?void 0:u.breakpoints)==null?void 0:J.unit)!=="px"?{maxWidth:`${T}${c.theme.breakpoints.unit}`}:{maxWidth:T}:{maxWidth:Mc(p)}};return sf(c,c.maxWidth,m)}return null};Sv.filterProps=["maxWidth"];const cI=Xs({prop:"minWidth",transform:Mc}),hI=Xs({prop:"height",transform:Mc}),dI=Xs({prop:"maxHeight",transform:Mc}),fI=Xs({prop:"minHeight",transform:Mc});Xs({prop:"size",cssProperty:"width",transform:Mc});Xs({prop:"size",cssProperty:"height",transform:Mc});const pI=Xs({prop:"boxSizing"});by(uI,Sv,cI,hI,dI,fI,pI);const ug={border:{themeKey:"borders",transform:sh},borderTop:{themeKey:"borders",transform:sh},borderRight:{themeKey:"borders",transform:sh},borderBottom:{themeKey:"borders",transform:sh},borderLeft:{themeKey:"borders",transform:sh},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:sh},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:wy},color:{themeKey:"palette",transform:tm},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:tm},backgroundColor:{themeKey:"palette",transform:tm},p:{style:Cs},pt:{style:Cs},pr:{style:Cs},pb:{style:Cs},pl:{style:Cs},px:{style:Cs},py:{style:Cs},padding:{style:Cs},paddingTop:{style:Cs},paddingRight:{style:Cs},paddingBottom:{style:Cs},paddingLeft:{style:Cs},paddingX:{style:Cs},paddingY:{style:Cs},paddingInline:{style:Cs},paddingInlineStart:{style:Cs},paddingInlineEnd:{style:Cs},paddingBlock:{style:Cs},paddingBlockStart:{style:Cs},paddingBlockEnd:{style:Cs},m:{style:Ts},mt:{style:Ts},mr:{style:Ts},mb:{style:Ts},ml:{style:Ts},mx:{style:Ts},my:{style:Ts},margin:{style:Ts},marginTop:{style:Ts},marginRight:{style:Ts},marginBottom:{style:Ts},marginLeft:{style:Ts},marginX:{style:Ts},marginY:{style:Ts},marginInline:{style:Ts},marginInlineStart:{style:Ts},marginInlineEnd:{style:Ts},marginBlock:{style:Ts},marginBlockStart:{style:Ts},marginBlockEnd:{style:Ts},displayPrint:{cssProperty:!1,transform:c=>({"@media print":{display:c}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Sy},rowGap:{style:Cy},columnGap:{style:Ty},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Mc},maxWidth:{style:Sv},minWidth:{transform:Mc},height:{transform:Mc},maxHeight:{transform:Mc},minHeight:{transform:Mc},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function mI(...c){const m=c.reduce((T,P)=>T.concat(Object.keys(P)),[]),p=new Set(m);return c.every(T=>p.size===Object.keys(T).length)}function gI(c,m){return typeof c=="function"?c(m):c}function yI(){function c(p,T,P,O){const M={[p]:T,theme:P},u=O[p];if(!u)return{[p]:T};const{cssProperty:J=p,themeKey:Y,transform:ve,style:de}=u;if(T==null)return null;if(Y==="typography"&&T==="inherit")return{[p]:T};const Te=xy(P,Y)||{};return de?de(M):sf(M,T,we=>{let xe=ly(Te,ve,we);return we===xe&&typeof we=="string"&&(xe=ly(Te,ve,`${p}${we==="default"?"":gi(we)}`,we)),J===!1?xe:{[J]:xe}})}function m(p){const{sx:T,theme:P={}}=p||{};if(!T)return null;const O=P.unstable_sxConfig??ug;function M(u){let J=u;if(typeof u=="function")J=u(P);else if(typeof u!="object")return u;if(!J)return null;const Y=AE(P.breakpoints),ve=Object.keys(Y);let de=Y;return Object.keys(J).forEach(Te=>{const le=gI(J[Te],P);if(le!=null)if(typeof le=="object")if(O[Te])de=qm(de,c(Te,le,P,O));else{const we=sf({theme:P},le,xe=>({[Te]:xe}));mI(we,le)?de[Te]=m({sx:le,theme:P}):de=qm(de,we)}else de=qm(de,c(Te,le,P,O))}),PE(P,RE(ve,de))}return Array.isArray(T)?T.map(M):M(T)}return m}const im=yI();im.filterProps=["sx"];const _I=c=>{var T;const m={systemProps:{},otherProps:{}},p=((T=c==null?void 0:c.theme)==null?void 0:T.unstable_sxConfig)??ug;return Object.keys(c).forEach(P=>{p[P]?m.systemProps[P]=c[P]:m.otherProps[P]=c[P]}),m};function vI(c){const{sx:m,...p}=c,{systemProps:T,otherProps:P}=_I(p);let O;return Array.isArray(m)?O=[T,...m]:typeof m=="function"?O=(...M)=>{const u=m(...M);return Cd(u)?{...T,...u}:T}:O={...T,...m},{...P,sx:O}}function uy(){return uy=Object.assign?Object.assign.bind():function(c){for(var m=1;m<arguments.length;m++){var p=arguments[m];for(var T in p)({}).hasOwnProperty.call(p,T)&&(c[T]=p[T])}return c},uy.apply(null,arguments)}function xI(c){if(c.sheet)return c.sheet;for(var m=0;m<document.styleSheets.length;m++)if(document.styleSheets[m].ownerNode===c)return document.styleSheets[m]}function bI(c){var m=document.createElement("style");return m.setAttribute("data-emotion",c.key),c.nonce!==void 0&&m.setAttribute("nonce",c.nonce),m.appendChild(document.createTextNode("")),m.setAttribute("data-s",""),m}var wI=function(){function c(p){var T=this;this._insertTag=function(P){var O;T.tags.length===0?T.insertionPoint?O=T.insertionPoint.nextSibling:T.prepend?O=T.container.firstChild:O=T.before:O=T.tags[T.tags.length-1].nextSibling,T.container.insertBefore(P,O),T.tags.push(P)},this.isSpeedy=p.speedy===void 0?!0:p.speedy,this.tags=[],this.ctr=0,this.nonce=p.nonce,this.key=p.key,this.container=p.container,this.prepend=p.prepend,this.insertionPoint=p.insertionPoint,this.before=null}var m=c.prototype;return m.hydrate=function(T){T.forEach(this._insertTag)},m.insert=function(T){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(bI(this));var P=this.tags[this.tags.length-1];if(this.isSpeedy){var O=xI(P);try{O.insertRule(T,O.cssRules.length)}catch{}}else P.appendChild(document.createTextNode(T));this.ctr++},m.flush=function(){this.tags.forEach(function(T){var P;return(P=T.parentNode)==null?void 0:P.removeChild(T)}),this.tags=[],this.ctr=0},c}(),ql="-ms-",cy="-moz-",Di="-webkit-",sb="comm",Tv="rule",Cv="decl",SI="@import",ab="@keyframes",TI="@layer",CI=Math.abs,Py=String.fromCharCode,PI=Object.assign;function EI(c,m){return Il(c,0)^45?(((m<<2^Il(c,0))<<2^Il(c,1))<<2^Il(c,2))<<2^Il(c,3):0}function lb(c){return c.trim()}function II(c,m){return(c=m.exec(c))?c[0]:c}function Oi(c,m,p){return c.replace(m,p)}function q_(c,m){return c.indexOf(m)}function Il(c,m){return c.charCodeAt(m)|0}function Km(c,m,p){return c.slice(m,p)}function Sd(c){return c.length}function Pv(c){return c.length}function Zg(c,m){return m.push(c),c}function MI(c,m){return c.map(m).join("")}var Ey=1,om=1,ub=0,ju=0,ma=0,lm="";function Iy(c,m,p,T,P,O,M){return{value:c,root:m,parent:p,type:T,props:P,children:O,line:Ey,column:om,length:M,return:""}}function Bm(c,m){return PI(Iy("",null,null,"",null,null,0),c,{length:-c.length},m)}function kI(){return ma}function AI(){return ma=ju>0?Il(lm,--ju):0,om--,ma===10&&(om=1,Ey--),ma}function Ac(){return ma=ju<ub?Il(lm,ju++):0,om++,ma===10&&(om=1,Ey++),ma}function Pd(){return Il(lm,ju)}function Qg(){return ju}function cg(c,m){return Km(lm,c,m)}function Xm(c){switch(c){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function cb(c){return Ey=om=1,ub=Sd(lm=c),ju=0,[]}function hb(c){return lm="",c}function Jg(c){return lb(cg(ju-1,K_(c===91?c+2:c===40?c+1:c)))}function RI(c){for(;(ma=Pd())&&ma<33;)Ac();return Xm(c)>2||Xm(ma)>3?"":" "}function zI(c,m){for(;--m&&Ac()&&!(ma<48||ma>102||ma>57&&ma<65||ma>70&&ma<97););return cg(c,Qg()+(m<6&&Pd()==32&&Ac()==32))}function K_(c){for(;Ac();)switch(ma){case c:return ju;case 34:case 39:c!==34&&c!==39&&K_(ma);break;case 40:c===41&&K_(c);break;case 92:Ac();break}return ju}function LI(c,m){for(;Ac()&&c+ma!==57;)if(c+ma===84&&Pd()===47)break;return"/*"+cg(m,ju-1)+"*"+Py(c===47?c:Ac())}function DI(c){for(;!Xm(Pd());)Ac();return cg(c,ju)}function OI(c){return hb(ey("",null,null,null,[""],c=cb(c),0,[0],c))}function ey(c,m,p,T,P,O,M,u,J){for(var Y=0,ve=0,de=M,Te=0,le=0,we=0,xe=1,Ze=1,mt=1,kt=0,Tt="",Je=P,Qe=O,nt=T,yt=Tt;Ze;)switch(we=kt,kt=Ac()){case 40:if(we!=108&&Il(yt,de-1)==58){q_(yt+=Oi(Jg(kt),"&","&\f"),"&\f")!=-1&&(mt=-1);break}case 34:case 39:case 91:yt+=Jg(kt);break;case 9:case 10:case 13:case 32:yt+=RI(we);break;case 92:yt+=zI(Qg()-1,7);continue;case 47:switch(Pd()){case 42:case 47:Zg(FI(LI(Ac(),Qg()),m,p),J);break;default:yt+="/"}break;case 123*xe:u[Y++]=Sd(yt)*mt;case 125*xe:case 59:case 0:switch(kt){case 0:case 125:Ze=0;case 59+ve:mt==-1&&(yt=Oi(yt,/\f/g,"")),le>0&&Sd(yt)-de&&Zg(le>32?Q0(yt+";",T,p,de-1):Q0(Oi(yt," ","")+";",T,p,de-2),J);break;case 59:yt+=";";default:if(Zg(nt=Y0(yt,m,p,Y,ve,P,u,Tt,Je=[],Qe=[],de),O),kt===123)if(ve===0)ey(yt,m,nt,nt,Je,O,de,u,Qe);else switch(Te===99&&Il(yt,3)===110?100:Te){case 100:case 108:case 109:case 115:ey(c,nt,nt,T&&Zg(Y0(c,nt,nt,0,0,P,u,Tt,P,Je=[],de),Qe),P,Qe,de,u,T?Je:Qe);break;default:ey(yt,nt,nt,nt,[""],Qe,0,u,Qe)}}Y=ve=le=0,xe=mt=1,Tt=yt="",de=M;break;case 58:de=1+Sd(yt),le=we;default:if(xe<1){if(kt==123)--xe;else if(kt==125&&xe++==0&&AI()==125)continue}switch(yt+=Py(kt),kt*xe){case 38:mt=ve>0?1:(yt+="\f",-1);break;case 44:u[Y++]=(Sd(yt)-1)*mt,mt=1;break;case 64:Pd()===45&&(yt+=Jg(Ac())),Te=Pd(),ve=de=Sd(Tt=yt+=DI(Qg())),kt++;break;case 45:we===45&&Sd(yt)==2&&(xe=0)}}return O}function Y0(c,m,p,T,P,O,M,u,J,Y,ve){for(var de=P-1,Te=P===0?O:[""],le=Pv(Te),we=0,xe=0,Ze=0;we<T;++we)for(var mt=0,kt=Km(c,de+1,de=CI(xe=M[we])),Tt=c;mt<le;++mt)(Tt=lb(xe>0?Te[mt]+" "+kt:Oi(kt,/&\f/g,Te[mt])))&&(J[Ze++]=Tt);return Iy(c,m,p,P===0?Tv:u,J,Y,ve)}function FI(c,m,p){return Iy(c,m,p,sb,Py(kI()),Km(c,2,-2),0)}function Q0(c,m,p,T){return Iy(c,m,p,Cv,Km(c,0,T),Km(c,T+1,-1),T)}function rm(c,m){for(var p="",T=Pv(c),P=0;P<T;P++)p+=m(c[P],P,c,m)||"";return p}function BI(c,m,p,T){switch(c.type){case TI:if(c.children.length)break;case SI:case Cv:return c.return=c.return||c.value;case sb:return"";case ab:return c.return=c.value+"{"+rm(c.children,T)+"}";case Tv:c.value=c.props.join(",")}return Sd(p=rm(c.children,T))?c.return=c.value+"{"+p+"}":""}function NI(c){var m=Pv(c);return function(p,T,P,O){for(var M="",u=0;u<m;u++)M+=c[u](p,T,P,O)||"";return M}}function $I(c){return function(m){m.root||(m=m.return)&&c(m)}}function db(c){var m=Object.create(null);return function(p){return m[p]===void 0&&(m[p]=c(p)),m[p]}}var jI=function(m,p,T){for(var P=0,O=0;P=O,O=Pd(),P===38&&O===12&&(p[T]=1),!Xm(O);)Ac();return cg(m,ju)},UI=function(m,p){var T=-1,P=44;do switch(Xm(P)){case 0:P===38&&Pd()===12&&(p[T]=1),m[T]+=jI(ju-1,p,T);break;case 2:m[T]+=Jg(P);break;case 4:if(P===44){m[++T]=Pd()===58?"&\f":"",p[T]=m[T].length;break}default:m[T]+=Py(P)}while(P=Ac());return m},VI=function(m,p){return hb(UI(cb(m),p))},J0=new WeakMap,ZI=function(m){if(!(m.type!=="rule"||!m.parent||m.length<1)){for(var p=m.value,T=m.parent,P=m.column===T.column&&m.line===T.line;T.type!=="rule";)if(T=T.parent,!T)return;if(!(m.props.length===1&&p.charCodeAt(0)!==58&&!J0.get(T))&&!P){J0.set(m,!0);for(var O=[],M=VI(p,O),u=T.props,J=0,Y=0;J<M.length;J++)for(var ve=0;ve<u.length;ve++,Y++)m.props[Y]=O[J]?M[J].replace(/&\f/g,u[ve]):u[ve]+" "+M[J]}}},GI=function(m){if(m.type==="decl"){var p=m.value;p.charCodeAt(0)===108&&p.charCodeAt(2)===98&&(m.return="",m.value="")}};function fb(c,m){switch(EI(c,m)){case 5103:return Di+"print-"+c+c;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Di+c+c;case 5349:case 4246:case 4810:case 6968:case 2756:return Di+c+cy+c+ql+c+c;case 6828:case 4268:return Di+c+ql+c+c;case 6165:return Di+c+ql+"flex-"+c+c;case 5187:return Di+c+Oi(c,/(\w+).+(:[^]+)/,Di+"box-$1$2"+ql+"flex-$1$2")+c;case 5443:return Di+c+ql+"flex-item-"+Oi(c,/flex-|-self/,"")+c;case 4675:return Di+c+ql+"flex-line-pack"+Oi(c,/align-content|flex-|-self/,"")+c;case 5548:return Di+c+ql+Oi(c,"shrink","negative")+c;case 5292:return Di+c+ql+Oi(c,"basis","preferred-size")+c;case 6060:return Di+"box-"+Oi(c,"-grow","")+Di+c+ql+Oi(c,"grow","positive")+c;case 4554:return Di+Oi(c,/([^-])(transform)/g,"$1"+Di+"$2")+c;case 6187:return Oi(Oi(Oi(c,/(zoom-|grab)/,Di+"$1"),/(image-set)/,Di+"$1"),c,"")+c;case 5495:case 3959:return Oi(c,/(image-set\([^]*)/,Di+"$1$`$1");case 4968:return Oi(Oi(c,/(.+:)(flex-)?(.*)/,Di+"box-pack:$3"+ql+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Di+c+c;case 4095:case 3583:case 4068:case 2532:return Oi(c,/(.+)-inline(.+)/,Di+"$1$2")+c;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Sd(c)-1-m>6)switch(Il(c,m+1)){case 109:if(Il(c,m+4)!==45)break;case 102:return Oi(c,/(.+:)(.+)-([^]+)/,"$1"+Di+"$2-$3$1"+cy+(Il(c,m+3)==108?"$3":"$2-$3"))+c;case 115:return~q_(c,"stretch")?fb(Oi(c,"stretch","fill-available"),m)+c:c}break;case 4949:if(Il(c,m+1)!==115)break;case 6444:switch(Il(c,Sd(c)-3-(~q_(c,"!important")&&10))){case 107:return Oi(c,":",":"+Di)+c;case 101:return Oi(c,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Di+(Il(c,14)===45?"inline-":"")+"box$3$1"+Di+"$2$3$1"+ql+"$2box$3")+c}break;case 5936:switch(Il(c,m+11)){case 114:return Di+c+ql+Oi(c,/[svh]\w+-[tblr]{2}/,"tb")+c;case 108:return Di+c+ql+Oi(c,/[svh]\w+-[tblr]{2}/,"tb-rl")+c;case 45:return Di+c+ql+Oi(c,/[svh]\w+-[tblr]{2}/,"lr")+c}return Di+c+ql+c+c}return c}var WI=function(m,p,T,P){if(m.length>-1&&!m.return)switch(m.type){case Cv:m.return=fb(m.value,m.length);break;case ab:return rm([Bm(m,{value:Oi(m.value,"@","@"+Di)})],P);case Tv:if(m.length)return MI(m.props,function(O){switch(II(O,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return rm([Bm(m,{props:[Oi(O,/:(read-\w+)/,":"+cy+"$1")]})],P);case"::placeholder":return rm([Bm(m,{props:[Oi(O,/:(plac\w+)/,":"+Di+"input-$1")]}),Bm(m,{props:[Oi(O,/:(plac\w+)/,":"+cy+"$1")]}),Bm(m,{props:[Oi(O,/:(plac\w+)/,ql+"input-$1")]})],P)}return""})}},HI=[WI],qI=function(m){var p=m.key;if(p==="css"){var T=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(T,function(xe){var Ze=xe.getAttribute("data-emotion");Ze.indexOf(" ")!==-1&&(document.head.appendChild(xe),xe.setAttribute("data-s",""))})}var P=m.stylisPlugins||HI,O={},M,u=[];M=m.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+p+' "]'),function(xe){for(var Ze=xe.getAttribute("data-emotion").split(" "),mt=1;mt<Ze.length;mt++)O[Ze[mt]]=!0;u.push(xe)});var J,Y=[ZI,GI];{var ve,de=[BI,$I(function(xe){ve.insert(xe)})],Te=NI(Y.concat(P,de)),le=function(Ze){return rm(OI(Ze),Te)};J=function(Ze,mt,kt,Tt){ve=kt,le(Ze?Ze+"{"+mt.styles+"}":mt.styles),Tt&&(we.inserted[mt.name]=!0)}}var we={key:p,sheet:new wI({key:p,container:M,nonce:m.nonce,speedy:m.speedy,prepend:m.prepend,insertionPoint:m.insertionPoint}),nonce:m.nonce,inserted:O,registered:{},insert:J};return we.sheet.hydrate(u),we},w_={exports:{}},Ui={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ex;function KI(){if(ex)return Ui;ex=1;var c=typeof Symbol=="function"&&Symbol.for,m=c?Symbol.for("react.element"):60103,p=c?Symbol.for("react.portal"):60106,T=c?Symbol.for("react.fragment"):60107,P=c?Symbol.for("react.strict_mode"):60108,O=c?Symbol.for("react.profiler"):60114,M=c?Symbol.for("react.provider"):60109,u=c?Symbol.for("react.context"):60110,J=c?Symbol.for("react.async_mode"):60111,Y=c?Symbol.for("react.concurrent_mode"):60111,ve=c?Symbol.for("react.forward_ref"):60112,de=c?Symbol.for("react.suspense"):60113,Te=c?Symbol.for("react.suspense_list"):60120,le=c?Symbol.for("react.memo"):60115,we=c?Symbol.for("react.lazy"):60116,xe=c?Symbol.for("react.block"):60121,Ze=c?Symbol.for("react.fundamental"):60117,mt=c?Symbol.for("react.responder"):60118,kt=c?Symbol.for("react.scope"):60119;function Tt(Qe){if(typeof Qe=="object"&&Qe!==null){var nt=Qe.$$typeof;switch(nt){case m:switch(Qe=Qe.type,Qe){case J:case Y:case T:case O:case P:case de:return Qe;default:switch(Qe=Qe&&Qe.$$typeof,Qe){case u:case ve:case we:case le:case M:return Qe;default:return nt}}case p:return nt}}}function Je(Qe){return Tt(Qe)===Y}return Ui.AsyncMode=J,Ui.ConcurrentMode=Y,Ui.ContextConsumer=u,Ui.ContextProvider=M,Ui.Element=m,Ui.ForwardRef=ve,Ui.Fragment=T,Ui.Lazy=we,Ui.Memo=le,Ui.Portal=p,Ui.Profiler=O,Ui.StrictMode=P,Ui.Suspense=de,Ui.isAsyncMode=function(Qe){return Je(Qe)||Tt(Qe)===J},Ui.isConcurrentMode=Je,Ui.isContextConsumer=function(Qe){return Tt(Qe)===u},Ui.isContextProvider=function(Qe){return Tt(Qe)===M},Ui.isElement=function(Qe){return typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===m},Ui.isForwardRef=function(Qe){return Tt(Qe)===ve},Ui.isFragment=function(Qe){return Tt(Qe)===T},Ui.isLazy=function(Qe){return Tt(Qe)===we},Ui.isMemo=function(Qe){return Tt(Qe)===le},Ui.isPortal=function(Qe){return Tt(Qe)===p},Ui.isProfiler=function(Qe){return Tt(Qe)===O},Ui.isStrictMode=function(Qe){return Tt(Qe)===P},Ui.isSuspense=function(Qe){return Tt(Qe)===de},Ui.isValidElementType=function(Qe){return typeof Qe=="string"||typeof Qe=="function"||Qe===T||Qe===Y||Qe===O||Qe===P||Qe===de||Qe===Te||typeof Qe=="object"&&Qe!==null&&(Qe.$$typeof===we||Qe.$$typeof===le||Qe.$$typeof===M||Qe.$$typeof===u||Qe.$$typeof===ve||Qe.$$typeof===Ze||Qe.$$typeof===mt||Qe.$$typeof===kt||Qe.$$typeof===xe)},Ui.typeOf=Tt,Ui}var tx;function XI(){return tx||(tx=1,w_.exports=KI()),w_.exports}var S_,rx;function YI(){if(rx)return S_;rx=1;var c=XI(),m={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},p={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},T={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},P={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},O={};O[c.ForwardRef]=T,O[c.Memo]=P;function M(we){return c.isMemo(we)?P:O[we.$$typeof]||m}var u=Object.defineProperty,J=Object.getOwnPropertyNames,Y=Object.getOwnPropertySymbols,ve=Object.getOwnPropertyDescriptor,de=Object.getPrototypeOf,Te=Object.prototype;function le(we,xe,Ze){if(typeof xe!="string"){if(Te){var mt=de(xe);mt&&mt!==Te&&le(we,mt,Ze)}var kt=J(xe);Y&&(kt=kt.concat(Y(xe)));for(var Tt=M(we),Je=M(xe),Qe=0;Qe<kt.length;++Qe){var nt=kt[Qe];if(!p[nt]&&!(Ze&&Ze[nt])&&!(Je&&Je[nt])&&!(Tt&&Tt[nt])){var yt=ve(xe,nt);try{u(we,nt,yt)}catch{}}}}return we}return S_=le,S_}YI();var QI=!0;function pb(c,m,p){var T="";return p.split(" ").forEach(function(P){c[P]!==void 0?m.push(c[P]+";"):P&&(T+=P+" ")}),T}var Ev=function(m,p,T){var P=m.key+"-"+p.name;(T===!1||QI===!1)&&m.registered[P]===void 0&&(m.registered[P]=p.styles)},mb=function(m,p,T){Ev(m,p,T);var P=m.key+"-"+p.name;if(m.inserted[p.name]===void 0){var O=p;do m.insert(p===O?"."+P:"",O,m.sheet,!0),O=O.next;while(O!==void 0)}};function JI(c){for(var m=0,p,T=0,P=c.length;P>=4;++T,P-=4)p=c.charCodeAt(T)&255|(c.charCodeAt(++T)&255)<<8|(c.charCodeAt(++T)&255)<<16|(c.charCodeAt(++T)&255)<<24,p=(p&65535)*1540483477+((p>>>16)*59797<<16),p^=p>>>24,m=(p&65535)*1540483477+((p>>>16)*59797<<16)^(m&65535)*1540483477+((m>>>16)*59797<<16);switch(P){case 3:m^=(c.charCodeAt(T+2)&255)<<16;case 2:m^=(c.charCodeAt(T+1)&255)<<8;case 1:m^=c.charCodeAt(T)&255,m=(m&65535)*1540483477+((m>>>16)*59797<<16)}return m^=m>>>13,m=(m&65535)*1540483477+((m>>>16)*59797<<16),((m^m>>>15)>>>0).toString(36)}var eM={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},tM=/[A-Z]|^ms/g,rM=/_EMO_([^_]+?)_([^]*?)_EMO_/g,gb=function(m){return m.charCodeAt(1)===45},nx=function(m){return m!=null&&typeof m!="boolean"},T_=db(function(c){return gb(c)?c:c.replace(tM,"-$&").toLowerCase()}),ix=function(m,p){switch(m){case"animation":case"animationName":if(typeof p=="string")return p.replace(rM,function(T,P,O){return Td={name:P,styles:O,next:Td},P})}return eM[m]!==1&&!gb(m)&&typeof p=="number"&&p!==0?p+"px":p};function Ym(c,m,p){if(p==null)return"";var T=p;if(T.__emotion_styles!==void 0)return T;switch(typeof p){case"boolean":return"";case"object":{var P=p;if(P.anim===1)return Td={name:P.name,styles:P.styles,next:Td},P.name;var O=p;if(O.styles!==void 0){var M=O.next;if(M!==void 0)for(;M!==void 0;)Td={name:M.name,styles:M.styles,next:Td},M=M.next;var u=O.styles+";";return u}return nM(c,m,p)}case"function":{if(c!==void 0){var J=Td,Y=p(c);return Td=J,Ym(c,m,Y)}break}}var ve=p;if(m==null)return ve;var de=m[ve];return de!==void 0?de:ve}function nM(c,m,p){var T="";if(Array.isArray(p))for(var P=0;P<p.length;P++)T+=Ym(c,m,p[P])+";";else for(var O in p){var M=p[O];if(typeof M!="object"){var u=M;m!=null&&m[u]!==void 0?T+=O+"{"+m[u]+"}":nx(u)&&(T+=T_(O)+":"+ix(O,u)+";")}else if(Array.isArray(M)&&typeof M[0]=="string"&&(m==null||m[M[0]]===void 0))for(var J=0;J<M.length;J++)nx(M[J])&&(T+=T_(O)+":"+ix(O,M[J])+";");else{var Y=Ym(c,m,M);switch(O){case"animation":case"animationName":{T+=T_(O)+":"+Y+";";break}default:T+=O+"{"+Y+"}"}}}return T}var ox=/label:\s*([^\s;{]+)\s*(;|$)/g,Td;function My(c,m,p){if(c.length===1&&typeof c[0]=="object"&&c[0]!==null&&c[0].styles!==void 0)return c[0];var T=!0,P="";Td=void 0;var O=c[0];if(O==null||O.raw===void 0)T=!1,P+=Ym(p,m,O);else{var M=O;P+=M[0]}for(var u=1;u<c.length;u++)if(P+=Ym(p,m,c[u]),T){var J=O;P+=J[u]}ox.lastIndex=0;for(var Y="",ve;(ve=ox.exec(P))!==null;)Y+="-"+ve[1];var de=JI(P)+Y;return{name:de,styles:P,next:Td}}var iM=function(m){return m()},oM=M_.useInsertionEffect?M_.useInsertionEffect:!1,yb=oM||iM,_b=Zt.createContext(typeof HTMLElement<"u"?qI({key:"css"}):null);_b.Provider;var vb=function(m){return Zt.forwardRef(function(p,T){var P=Zt.useContext(_b);return m(p,P,T)})},xb=Zt.createContext({}),Iv={}.hasOwnProperty,X_="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",sM=function(m,p){var T={};for(var P in p)Iv.call(p,P)&&(T[P]=p[P]);return T[X_]=m,T},aM=function(m){var p=m.cache,T=m.serialized,P=m.isStringTag;return Ev(p,T,P),yb(function(){return mb(p,T,P)}),null},lM=vb(function(c,m,p){var T=c.css;typeof T=="string"&&m.registered[T]!==void 0&&(T=m.registered[T]);var P=c[X_],O=[T],M="";typeof c.className=="string"?M=pb(m.registered,O,c.className):c.className!=null&&(M=c.className+" ");var u=My(O,void 0,Zt.useContext(xb));M+=m.key+"-"+u.name;var J={};for(var Y in c)Iv.call(c,Y)&&Y!=="css"&&Y!==X_&&(J[Y]=c[Y]);return J.className=M,p&&(J.ref=p),Zt.createElement(Zt.Fragment,null,Zt.createElement(aM,{cache:m,serialized:u,isStringTag:typeof P=="string"}),Zt.createElement(P,J))}),uM=lM,sx=function(m,p){var T=arguments;if(p==null||!Iv.call(p,"css"))return Zt.createElement.apply(void 0,T);var P=T.length,O=new Array(P);O[0]=uM,O[1]=sM(m,p);for(var M=2;M<P;M++)O[M]=T[M];return Zt.createElement.apply(null,O)};(function(c){var m;m||(m=c.JSX||(c.JSX={}))})(sx||(sx={}));function Mv(){for(var c=arguments.length,m=new Array(c),p=0;p<c;p++)m[p]=arguments[p];return My(m)}function hg(){var c=Mv.apply(void 0,arguments),m="animation-"+c.name;return{name:m,styles:"@keyframes "+m+"{"+c.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var cM=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,hM=db(function(c){return cM.test(c)||c.charCodeAt(0)===111&&c.charCodeAt(1)===110&&c.charCodeAt(2)<91}),dM=hM,fM=function(m){return m!=="theme"},ax=function(m){return typeof m=="string"&&m.charCodeAt(0)>96?dM:fM},lx=function(m,p,T){var P;if(p){var O=p.shouldForwardProp;P=m.__emotion_forwardProp&&O?function(M){return m.__emotion_forwardProp(M)&&O(M)}:O}return typeof P!="function"&&T&&(P=m.__emotion_forwardProp),P},pM=function(m){var p=m.cache,T=m.serialized,P=m.isStringTag;return Ev(p,T,P),yb(function(){return mb(p,T,P)}),null},mM=function c(m,p){var T=m.__emotion_real===m,P=T&&m.__emotion_base||m,O,M;p!==void 0&&(O=p.label,M=p.target);var u=lx(m,p,T),J=u||ax(P),Y=!J("as");return function(){var ve=arguments,de=T&&m.__emotion_styles!==void 0?m.__emotion_styles.slice(0):[];if(O!==void 0&&de.push("label:"+O+";"),ve[0]==null||ve[0].raw===void 0)de.push.apply(de,ve);else{var Te=ve[0];de.push(Te[0]);for(var le=ve.length,we=1;we<le;we++)de.push(ve[we],Te[we])}var xe=vb(function(Ze,mt,kt){var Tt=Y&&Ze.as||P,Je="",Qe=[],nt=Ze;if(Ze.theme==null){nt={};for(var yt in Ze)nt[yt]=Ze[yt];nt.theme=Zt.useContext(xb)}typeof Ze.className=="string"?Je=pb(mt.registered,Qe,Ze.className):Ze.className!=null&&(Je=Ze.className+" ");var ze=My(de.concat(Qe),mt.registered,nt);Je+=mt.key+"-"+ze.name,M!==void 0&&(Je+=" "+M);var $e=Y&&u===void 0?ax(Tt):J,re={};for(var it in Ze)Y&&it==="as"||$e(it)&&(re[it]=Ze[it]);return re.className=Je,kt&&(re.ref=kt),Zt.createElement(Zt.Fragment,null,Zt.createElement(pM,{cache:mt,serialized:ze,isStringTag:typeof Tt=="string"}),Zt.createElement(Tt,re))});return xe.displayName=O!==void 0?O:"Styled("+(typeof P=="string"?P:P.displayName||P.name||"Component")+")",xe.defaultProps=m.defaultProps,xe.__emotion_real=xe,xe.__emotion_base=P,xe.__emotion_styles=de,xe.__emotion_forwardProp=u,Object.defineProperty(xe,"toString",{value:function(){return"."+M}}),xe.withComponent=function(Ze,mt){var kt=c(Ze,uy({},p,mt,{shouldForwardProp:lx(xe,mt,!0)}));return kt.apply(void 0,de)},xe}},gM=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Y_=mM.bind(null);gM.forEach(function(c){Y_[c]=Y_(c)});function yM(c,m){return Y_(c,m)}function _M(c,m){Array.isArray(c.__emotion_styles)&&(c.__emotion_styles=m(c.__emotion_styles))}const ux=[];function cx(c){return ux[0]=c,My(ux)}const vM=c=>{const m=Object.keys(c).map(p=>({key:p,val:c[p]}))||[];return m.sort((p,T)=>p.val-T.val),m.reduce((p,T)=>({...p,[T.key]:T.val}),{})};function xM(c){const{values:m={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:p="px",step:T=5,...P}=c,O=vM(m),M=Object.keys(O);function u(Te){return`@media (min-width:${typeof m[Te]=="number"?m[Te]:Te}${p})`}function J(Te){return`@media (max-width:${(typeof m[Te]=="number"?m[Te]:Te)-T/100}${p})`}function Y(Te,le){const we=M.indexOf(le);return`@media (min-width:${typeof m[Te]=="number"?m[Te]:Te}${p}) and (max-width:${(we!==-1&&typeof m[M[we]]=="number"?m[M[we]]:le)-T/100}${p})`}function ve(Te){return M.indexOf(Te)+1<M.length?Y(Te,M[M.indexOf(Te)+1]):u(Te)}function de(Te){const le=M.indexOf(Te);return le===0?u(M[1]):le===M.length-1?J(M[le]):Y(Te,M[M.indexOf(Te)+1]).replace("@media","@media not all and")}return{keys:M,values:O,up:u,down:J,between:Y,only:ve,not:de,unit:p,...P}}const bM={borderRadius:4};function bb(c=8,m=wv({spacing:c})){if(c.mui)return c;const p=(...T)=>(T.length===0?[1]:T).map(O=>{const M=m(O);return typeof M=="number"?`${M}px`:M}).join(" ");return p.mui=!0,p}function wM(c,m){var T;const p=this;if(p.vars){if(!((T=p.colorSchemes)!=null&&T[c])||typeof p.getColorSchemeSelector!="function")return{};let P=p.getColorSchemeSelector(c);return P==="&"?m:((P.includes("data-")||P.includes("."))&&(P=`*:where(${P.replace(/\s*&$/,"")}) &`),{[P]:m})}return p.palette.mode===c?m:{}}function wb(c={},...m){const{breakpoints:p={},palette:T={},spacing:P,shape:O={},...M}=c,u=xM(p),J=bb(P);let Y=kc({breakpoints:u,direction:"ltr",components:{},palette:{mode:"light",...T},spacing:J,shape:{...bM,...O}},M);return Y=ME(Y),Y.applyStyles=wM,Y=m.reduce((ve,de)=>kc(ve,de),Y),Y.unstable_sxConfig={...ug,...M==null?void 0:M.unstable_sxConfig},Y.unstable_sx=function(de){return im({sx:de,theme:this})},Y}const hx=c=>c,SM=()=>{let c=hx;return{configure(m){c=m},generate(m){return c(m)},reset(){c=hx}}},TM=SM(),CM={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Uu(c,m,p="Mui"){const T=CM[m];return T?`${p}-${T}`:`${TM.generate(c)}-${m}`}function Ml(c,m,p="Mui"){const T={};return m.forEach(P=>{T[P]=Uu(c,P,p)}),T}function Sb(c){const{variants:m,...p}=c,T={variants:m,style:cx(p),isProcessed:!0};return T.style===p||m&&m.forEach(P=>{typeof P.style!="function"&&(P.style=cx(P.style))}),T}const PM=wb();function C_(c){return c!=="ownerState"&&c!=="theme"&&c!=="sx"&&c!=="as"}function EM(c){return c?(m,p)=>p[c]:null}function IM(c,m,p){c.theme=AM(c.theme)?p:c.theme[m]||c.theme}function ty(c,m){const p=typeof m=="function"?m(c):m;if(Array.isArray(p))return p.flatMap(T=>ty(c,T));if(Array.isArray(p==null?void 0:p.variants)){let T;if(p.isProcessed)T=p.style;else{const{variants:P,...O}=p;T=O}return Tb(c,p.variants,[T])}return p!=null&&p.isProcessed?p.style:p}function Tb(c,m,p=[]){var P;let T;e:for(let O=0;O<m.length;O+=1){const M=m[O];if(typeof M.props=="function"){if(T??(T={...c,...c.ownerState,ownerState:c.ownerState}),!M.props(T))continue}else for(const u in M.props)if(c[u]!==M.props[u]&&((P=c.ownerState)==null?void 0:P[u])!==M.props[u])continue e;typeof M.style=="function"?(T??(T={...c,...c.ownerState,ownerState:c.ownerState}),p.push(M.style(T))):p.push(M.style)}return p}function MM(c={}){const{themeId:m,defaultTheme:p=PM,rootShouldForwardProp:T=C_,slotShouldForwardProp:P=C_}=c;function O(u){IM(u,m,p)}return(u,J={})=>{_M(u,Qe=>Qe.filter(nt=>nt!==im));const{name:Y,slot:ve,skipVariantsResolver:de,skipSx:Te,overridesResolver:le=EM(zM(ve)),...we}=J,xe=de!==void 0?de:ve&&ve!=="Root"&&ve!=="root"||!1,Ze=Te||!1;let mt=C_;ve==="Root"||ve==="root"?mt=T:ve?mt=P:RM(u)&&(mt=void 0);const kt=yM(u,{shouldForwardProp:mt,label:kM(),...we}),Tt=Qe=>{if(typeof Qe=="function"&&Qe.__emotion_real!==Qe)return function(yt){return ty(yt,Qe)};if(Cd(Qe)){const nt=Sb(Qe);return nt.variants?function(ze){return ty(ze,nt)}:nt.style}return Qe},Je=(...Qe)=>{const nt=[],yt=Qe.map(Tt),ze=[];if(nt.push(O),Y&&le&&ze.push(function(st){var xr,or;const tr=(or=(xr=st.theme.components)==null?void 0:xr[Y])==null?void 0:or.styleOverrides;if(!tr)return null;const Cr={};for(const xt in tr)Cr[xt]=ty(st,tr[xt]);return le(st,Cr)}),Y&&!xe&&ze.push(function(st){var Cr,xr;const zt=st.theme,tr=(xr=(Cr=zt==null?void 0:zt.components)==null?void 0:Cr[Y])==null?void 0:xr.variants;return tr?Tb(st,tr):null}),Ze||ze.push(im),Array.isArray(yt[0])){const it=yt.shift(),st=new Array(nt.length).fill(""),zt=new Array(ze.length).fill("");let tr;tr=[...st,...it,...zt],tr.raw=[...st,...it.raw,...zt],nt.unshift(tr)}const $e=[...nt,...yt,...ze],re=kt(...$e);return u.muiName&&(re.muiName=u.muiName),re};return kt.withConfig&&(Je.withConfig=kt.withConfig),Je}}function kM(c,m){return void 0}function AM(c){for(const m in c)return!1;return!0}function RM(c){return typeof c=="string"&&c.charCodeAt(0)>96}function zM(c){return c&&c.charAt(0).toLowerCase()+c.slice(1)}function hy(c,m){const p={...m};for(const T in c)if(Object.prototype.hasOwnProperty.call(c,T)){const P=T;if(P==="components"||P==="slots")p[P]={...c[P],...p[P]};else if(P==="componentsProps"||P==="slotProps"){const O=c[P],M=m[P];if(!M)p[P]=O||{};else if(!O)p[P]=M;else{p[P]={...M};for(const u in O)if(Object.prototype.hasOwnProperty.call(O,u)){const J=u;p[P][J]=hy(O[J],M[J])}}}else p[P]===void 0&&(p[P]=c[P])}return p}const Cb=typeof window<"u"?Zt.useLayoutEffect:Zt.useEffect;function LM(c,m=Number.MIN_SAFE_INTEGER,p=Number.MAX_SAFE_INTEGER){return Math.max(m,Math.min(c,p))}function kv(c,m=0,p=1){return LM(c,m,p)}function DM(c){c=c.slice(1);const m=new RegExp(`.{1,${c.length>=6?2:1}}`,"g");let p=c.match(m);return p&&p[0].length===1&&(p=p.map(T=>T+T)),p?`rgb${p.length===4?"a":""}(${p.map((T,P)=>P<3?parseInt(T,16):Math.round(parseInt(T,16)/255*1e3)/1e3).join(", ")})`:""}function Vf(c){if(c.type)return c;if(c.charAt(0)==="#")return Vf(DM(c));const m=c.indexOf("("),p=c.substring(0,m);if(!["rgb","rgba","hsl","hsla","color"].includes(p))throw new Error(wp(9,c));let T=c.substring(m+1,c.length-1),P;if(p==="color"){if(T=T.split(" "),P=T.shift(),T.length===4&&T[3].charAt(0)==="/"&&(T[3]=T[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(P))throw new Error(wp(10,P))}else T=T.split(",");return T=T.map(O=>parseFloat(O)),{type:p,values:T,colorSpace:P}}const OM=c=>{const m=Vf(c);return m.values.slice(0,3).map((p,T)=>m.type.includes("hsl")&&T!==0?`${p}%`:p).join(" ")},Um=(c,m)=>{try{return OM(c)}catch{return c}};function ky(c){const{type:m,colorSpace:p}=c;let{values:T}=c;return m.includes("rgb")?T=T.map((P,O)=>O<3?parseInt(P,10):P):m.includes("hsl")&&(T[1]=`${T[1]}%`,T[2]=`${T[2]}%`),m.includes("color")?T=`${p} ${T.join(" ")}`:T=`${T.join(", ")}`,`${m}(${T})`}function Pb(c){c=Vf(c);const{values:m}=c,p=m[0],T=m[1]/100,P=m[2]/100,O=T*Math.min(P,1-P),M=(Y,ve=(Y+p/30)%12)=>P-O*Math.max(Math.min(ve-3,9-ve,1),-1);let u="rgb";const J=[Math.round(M(0)*255),Math.round(M(8)*255),Math.round(M(4)*255)];return c.type==="hsla"&&(u+="a",J.push(m[3])),ky({type:u,values:J})}function Q_(c){c=Vf(c);let m=c.type==="hsl"||c.type==="hsla"?Vf(Pb(c)).values:c.values;return m=m.map(p=>(c.type!=="color"&&(p/=255),p<=.03928?p/12.92:((p+.055)/1.055)**2.4)),Number((.2126*m[0]+.7152*m[1]+.0722*m[2]).toFixed(3))}function FM(c,m){const p=Q_(c),T=Q_(m);return(Math.max(p,T)+.05)/(Math.min(p,T)+.05)}function ah(c,m){return c=Vf(c),m=kv(m),(c.type==="rgb"||c.type==="hsl")&&(c.type+="a"),c.type==="color"?c.values[3]=`/${m}`:c.values[3]=m,ky(c)}function Gg(c,m,p){try{return ah(c,m)}catch{return c}}function Av(c,m){if(c=Vf(c),m=kv(m),c.type.includes("hsl"))c.values[2]*=1-m;else if(c.type.includes("rgb")||c.type.includes("color"))for(let p=0;p<3;p+=1)c.values[p]*=1-m;return ky(c)}function fo(c,m,p){try{return Av(c,m)}catch{return c}}function Rv(c,m){if(c=Vf(c),m=kv(m),c.type.includes("hsl"))c.values[2]+=(100-c.values[2])*m;else if(c.type.includes("rgb"))for(let p=0;p<3;p+=1)c.values[p]+=(255-c.values[p])*m;else if(c.type.includes("color"))for(let p=0;p<3;p+=1)c.values[p]+=(1-c.values[p])*m;return ky(c)}function po(c,m,p){try{return Rv(c,m)}catch{return c}}function BM(c,m=.15){return Q_(c)>.5?Av(c,m):Rv(c,m)}function Wg(c,m,p){try{return BM(c,m)}catch{return c}}const NM=Zt.createContext(void 0);function $M(c){const{theme:m,name:p,props:T}=c;if(!m||!m.components||!m.components[p])return T;const P=m.components[p];return P.defaultProps?hy(P.defaultProps,T):!P.styleOverrides&&!P.variants?hy(P,T):T}function jM({props:c,name:m}){const p=Zt.useContext(NM);return $M({props:c,name:m,theme:{components:p}})}const dx={theme:void 0};function UM(c){let m,p;return function(P){let O=m;return(O===void 0||P.theme!==p)&&(dx.theme=P.theme,O=Sb(c(dx)),m=O,p=P.theme),O}}function VM(c=""){function m(...T){if(!T.length)return"";const P=T[0];return typeof P=="string"&&!P.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${c?`${c}-`:""}${P}${m(...T.slice(1))})`:`, ${P}`}return(T,...P)=>`var(--${c?`${c}-`:""}${T}${m(...P)})`}const fx=(c,m,p,T=[])=>{let P=c;m.forEach((O,M)=>{M===m.length-1?Array.isArray(P)?P[Number(O)]=p:P&&typeof P=="object"&&(P[O]=p):P&&typeof P=="object"&&(P[O]||(P[O]=T.includes(O)?[]:{}),P=P[O])})},ZM=(c,m,p)=>{function T(P,O=[],M=[]){Object.entries(P).forEach(([u,J])=>{(!p||p&&!p([...O,u]))&&J!=null&&(typeof J=="object"&&Object.keys(J).length>0?T(J,[...O,u],Array.isArray(J)?[...M,u]:M):m([...O,u],J,M))})}T(c)},GM=(c,m)=>typeof m=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(T=>c.includes(T))||c[c.length-1].toLowerCase().includes("opacity")?m:`${m}px`:m;function P_(c,m){const{prefix:p,shouldSkipGeneratingVar:T}=m||{},P={},O={},M={};return ZM(c,(u,J,Y)=>{if((typeof J=="string"||typeof J=="number")&&(!T||!T(u,J))){const ve=`--${p?`${p}-`:""}${u.join("-")}`,de=GM(u,J);Object.assign(P,{[ve]:de}),fx(O,u,`var(${ve})`,Y),fx(M,u,`var(${ve}, ${de})`,Y)}},u=>u[0]==="vars"),{css:P,vars:O,varsWithDefaults:M}}function WM(c,m={}){const{getSelector:p=Ze,disableCssColorScheme:T,colorSchemeSelector:P}=m,{colorSchemes:O={},components:M,defaultColorScheme:u="light",...J}=c,{vars:Y,css:ve,varsWithDefaults:de}=P_(J,m);let Te=de;const le={},{[u]:we,...xe}=O;if(Object.entries(xe||{}).forEach(([Tt,Je])=>{const{vars:Qe,css:nt,varsWithDefaults:yt}=P_(Je,m);Te=kc(Te,yt),le[Tt]={css:nt,vars:Qe}}),we){const{css:Tt,vars:Je,varsWithDefaults:Qe}=P_(we,m);Te=kc(Te,Qe),le[u]={css:Tt,vars:Je}}function Ze(Tt,Je){var nt,yt;let Qe=P;if(P==="class"&&(Qe=".%s"),P==="data"&&(Qe="[data-%s]"),P!=null&&P.startsWith("data-")&&!P.includes("%s")&&(Qe=`[${P}="%s"]`),Tt){if(Qe==="media")return c.defaultColorScheme===Tt?":root":{[`@media (prefers-color-scheme: ${((yt=(nt=O[Tt])==null?void 0:nt.palette)==null?void 0:yt.mode)||Tt})`]:{":root":Je}};if(Qe)return c.defaultColorScheme===Tt?`:root, ${Qe.replace("%s",String(Tt))}`:Qe.replace("%s",String(Tt))}return":root"}return{vars:Te,generateThemeVars:()=>{let Tt={...Y};return Object.entries(le).forEach(([,{vars:Je}])=>{Tt=kc(Tt,Je)}),Tt},generateStyleSheets:()=>{var ze,$e;const Tt=[],Je=c.defaultColorScheme||"light";function Qe(re,it){Object.keys(it).length&&Tt.push(typeof re=="string"?{[re]:{...it}}:re)}Qe(p(void 0,{...ve}),ve);const{[Je]:nt,...yt}=le;if(nt){const{css:re}=nt,it=($e=(ze=O[Je])==null?void 0:ze.palette)==null?void 0:$e.mode,st=!T&&it?{colorScheme:it,...re}:{...re};Qe(p(Je,{...st}),st)}return Object.entries(yt).forEach(([re,{css:it}])=>{var tr,Cr;const st=(Cr=(tr=O[re])==null?void 0:tr.palette)==null?void 0:Cr.mode,zt=!T&&st?{colorScheme:st,...it}:{...it};Qe(p(re,{...zt}),zt)}),Tt}}}function HM(c){return function(p){return c==="media"?`@media (prefers-color-scheme: ${p})`:c?c.startsWith("data-")&&!c.includes("%s")?`[${c}="${p}"] &`:c==="class"?`.${p} &`:c==="data"?`[data-${p}] &`:`${c.replace("%s",p)} &`:"&"}}function E_(c,m){var p,T,P;return Zt.isValidElement(c)&&m.indexOf(c.type.muiName??((P=(T=(p=c.type)==null?void 0:p._payload)==null?void 0:T.value)==null?void 0:P.muiName))!==-1}const Qm={black:"#000",white:"#fff"},qM={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},qp={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},Kp={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},Nm={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},Xp={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},Yp={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},Qp={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function Eb(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Qm.white,default:Qm.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const KM=Eb();function Ib(){return{text:{primary:Qm.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Qm.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const px=Ib();function mx(c,m,p,T){const P=T.light||T,O=T.dark||T*1.5;c[m]||(c.hasOwnProperty(p)?c[m]=c[p]:m==="light"?c.light=Rv(c.main,P):m==="dark"&&(c.dark=Av(c.main,O)))}function XM(c="light"){return c==="dark"?{main:Xp[200],light:Xp[50],dark:Xp[400]}:{main:Xp[700],light:Xp[400],dark:Xp[800]}}function YM(c="light"){return c==="dark"?{main:qp[200],light:qp[50],dark:qp[400]}:{main:qp[500],light:qp[300],dark:qp[700]}}function QM(c="light"){return c==="dark"?{main:Kp[500],light:Kp[300],dark:Kp[700]}:{main:Kp[700],light:Kp[400],dark:Kp[800]}}function JM(c="light"){return c==="dark"?{main:Yp[400],light:Yp[300],dark:Yp[700]}:{main:Yp[700],light:Yp[500],dark:Yp[900]}}function ek(c="light"){return c==="dark"?{main:Qp[400],light:Qp[300],dark:Qp[700]}:{main:Qp[800],light:Qp[500],dark:Qp[900]}}function tk(c="light"){return c==="dark"?{main:Nm[400],light:Nm[300],dark:Nm[700]}:{main:"#ed6c02",light:Nm[500],dark:Nm[900]}}function zv(c){const{mode:m="light",contrastThreshold:p=3,tonalOffset:T=.2,...P}=c,O=c.primary||XM(m),M=c.secondary||YM(m),u=c.error||QM(m),J=c.info||JM(m),Y=c.success||ek(m),ve=c.warning||tk(m);function de(xe){return FM(xe,px.text.primary)>=p?px.text.primary:KM.text.primary}const Te=({color:xe,name:Ze,mainShade:mt=500,lightShade:kt=300,darkShade:Tt=700})=>{if(xe={...xe},!xe.main&&xe[mt]&&(xe.main=xe[mt]),!xe.hasOwnProperty("main"))throw new Error(wp(11,Ze?` (${Ze})`:"",mt));if(typeof xe.main!="string")throw new Error(wp(12,Ze?` (${Ze})`:"",JSON.stringify(xe.main)));return mx(xe,"light",kt,T),mx(xe,"dark",Tt,T),xe.contrastText||(xe.contrastText=de(xe.main)),xe};let le;return m==="light"?le=Eb():m==="dark"&&(le=Ib()),kc({common:{...Qm},mode:m,primary:Te({color:O,name:"primary"}),secondary:Te({color:M,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:Te({color:u,name:"error"}),warning:Te({color:ve,name:"warning"}),info:Te({color:J,name:"info"}),success:Te({color:Y,name:"success"}),grey:qM,contrastThreshold:p,getContrastText:de,augmentColor:Te,tonalOffset:T,...le},P)}function rk(c){const m={};return Object.entries(c).forEach(T=>{const[P,O]=T;typeof O=="object"&&(m[P]=`${O.fontStyle?`${O.fontStyle} `:""}${O.fontVariant?`${O.fontVariant} `:""}${O.fontWeight?`${O.fontWeight} `:""}${O.fontStretch?`${O.fontStretch} `:""}${O.fontSize||""}${O.lineHeight?`/${O.lineHeight} `:""}${O.fontFamily||""}`)}),m}function nk(c,m){return{toolbar:{minHeight:56,[c.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[c.up("sm")]:{minHeight:64}},...m}}function ik(c){return Math.round(c*1e5)/1e5}const gx={textTransform:"uppercase"},yx='"Roboto", "Helvetica", "Arial", sans-serif';function ok(c,m){const{fontFamily:p=yx,fontSize:T=14,fontWeightLight:P=300,fontWeightRegular:O=400,fontWeightMedium:M=500,fontWeightBold:u=700,htmlFontSize:J=16,allVariants:Y,pxToRem:ve,...de}=typeof m=="function"?m(c):m,Te=T/14,le=ve||(Ze=>`${Ze/J*Te}rem`),we=(Ze,mt,kt,Tt,Je)=>({fontFamily:p,fontWeight:Ze,fontSize:le(mt),lineHeight:kt,...p===yx?{letterSpacing:`${ik(Tt/mt)}em`}:{},...Je,...Y}),xe={h1:we(P,96,1.167,-1.5),h2:we(P,60,1.2,-.5),h3:we(O,48,1.167,0),h4:we(O,34,1.235,.25),h5:we(O,24,1.334,0),h6:we(M,20,1.6,.15),subtitle1:we(O,16,1.75,.15),subtitle2:we(M,14,1.57,.1),body1:we(O,16,1.5,.15),body2:we(O,14,1.43,.15),button:we(M,14,1.75,.4,gx),caption:we(O,12,1.66,.4),overline:we(O,12,2.66,1,gx),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return kc({htmlFontSize:J,pxToRem:le,fontFamily:p,fontSize:T,fontWeightLight:P,fontWeightRegular:O,fontWeightMedium:M,fontWeightBold:u,...xe},de,{clone:!1})}const sk=.2,ak=.14,lk=.12;function Vo(...c){return[`${c[0]}px ${c[1]}px ${c[2]}px ${c[3]}px rgba(0,0,0,${sk})`,`${c[4]}px ${c[5]}px ${c[6]}px ${c[7]}px rgba(0,0,0,${ak})`,`${c[8]}px ${c[9]}px ${c[10]}px ${c[11]}px rgba(0,0,0,${lk})`].join(",")}const uk=["none",Vo(0,2,1,-1,0,1,1,0,0,1,3,0),Vo(0,3,1,-2,0,2,2,0,0,1,5,0),Vo(0,3,3,-2,0,3,4,0,0,1,8,0),Vo(0,2,4,-1,0,4,5,0,0,1,10,0),Vo(0,3,5,-1,0,5,8,0,0,1,14,0),Vo(0,3,5,-1,0,6,10,0,0,1,18,0),Vo(0,4,5,-2,0,7,10,1,0,2,16,1),Vo(0,5,5,-3,0,8,10,1,0,3,14,2),Vo(0,5,6,-3,0,9,12,1,0,3,16,2),Vo(0,6,6,-3,0,10,14,1,0,4,18,3),Vo(0,6,7,-4,0,11,15,1,0,4,20,3),Vo(0,7,8,-4,0,12,17,2,0,5,22,4),Vo(0,7,8,-4,0,13,19,2,0,5,24,4),Vo(0,7,9,-4,0,14,21,2,0,5,26,4),Vo(0,8,9,-5,0,15,22,2,0,6,28,5),Vo(0,8,10,-5,0,16,24,2,0,6,30,5),Vo(0,8,11,-5,0,17,26,2,0,6,32,5),Vo(0,9,11,-5,0,18,28,2,0,7,34,6),Vo(0,9,12,-6,0,19,29,2,0,7,36,6),Vo(0,10,13,-6,0,20,31,3,0,8,38,7),Vo(0,10,13,-6,0,21,33,3,0,8,40,7),Vo(0,10,14,-6,0,22,35,3,0,8,42,7),Vo(0,11,14,-7,0,23,36,3,0,9,44,8),Vo(0,11,15,-7,0,24,38,3,0,9,46,8)],ck={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},hk={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function _x(c){return`${Math.round(c)}ms`}function dk(c){if(!c)return 0;const m=c/36;return Math.min(Math.round((4+15*m**.25+m/5)*10),3e3)}function fk(c){const m={...ck,...c.easing},p={...hk,...c.duration};return{getAutoHeightDuration:dk,create:(P=["all"],O={})=>{const{duration:M=p.standard,easing:u=m.easeInOut,delay:J=0,...Y}=O;return(Array.isArray(P)?P:[P]).map(ve=>`${ve} ${typeof M=="string"?M:_x(M)} ${u} ${typeof J=="string"?J:_x(J)}`).join(",")},...c,easing:m,duration:p}}const pk={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function mk(c){return Cd(c)||typeof c>"u"||typeof c=="string"||typeof c=="boolean"||typeof c=="number"||Array.isArray(c)}function Mb(c={}){const m={...c};function p(T){const P=Object.entries(T);for(let O=0;O<P.length;O++){const[M,u]=P[O];!mk(u)||M.startsWith("unstable_")?delete T[M]:Cd(u)&&(T[M]={...u},p(T[M]))}}return p(m),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(m,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function J_(c={},...m){const{breakpoints:p,mixins:T={},spacing:P,palette:O={},transitions:M={},typography:u={},shape:J,...Y}=c;if(c.vars&&c.generateThemeVars===void 0)throw new Error(wp(20));const ve=zv(O),de=wb(c);let Te=kc(de,{mixins:nk(de.breakpoints,T),palette:ve,shadows:uk.slice(),typography:ok(ve,u),transitions:fk(M),zIndex:{...pk}});return Te=kc(Te,Y),Te=m.reduce((le,we)=>kc(le,we),Te),Te.unstable_sxConfig={...ug,...Y==null?void 0:Y.unstable_sxConfig},Te.unstable_sx=function(we){return im({sx:we,theme:this})},Te.toRuntimeSource=Mb,Te}function gk(c){let m;return c<1?m=5.11916*c**2:m=4.5*Math.log(c+1)+2,Math.round(m*10)/1e3}const yk=[...Array(25)].map((c,m)=>{if(m===0)return"none";const p=gk(m);return`linear-gradient(rgba(255 255 255 / ${p}), rgba(255 255 255 / ${p}))`});function kb(c){return{inputPlaceholder:c==="dark"?.5:.42,inputUnderline:c==="dark"?.7:.42,switchTrackDisabled:c==="dark"?.2:.12,switchTrack:c==="dark"?.3:.38}}function Ab(c){return c==="dark"?yk:[]}function _k(c){const{palette:m={mode:"light"},opacity:p,overlays:T,...P}=c,O=zv(m);return{palette:O,opacity:{...kb(O.mode),...p},overlays:T||Ab(O.mode),...P}}function vk(c){var m;return!!c[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!c[0].match(/sxConfig$/)||c[0]==="palette"&&!!((m=c[1])!=null&&m.match(/(mode|contrastThreshold|tonalOffset)/))}const xk=c=>[...[...Array(25)].map((m,p)=>`--${c?`${c}-`:""}overlays-${p}`),`--${c?`${c}-`:""}palette-AppBar-darkBg`,`--${c?`${c}-`:""}palette-AppBar-darkColor`],bk=c=>(m,p)=>{const T=c.rootSelector||":root",P=c.colorSchemeSelector;let O=P;if(P==="class"&&(O=".%s"),P==="data"&&(O="[data-%s]"),P!=null&&P.startsWith("data-")&&!P.includes("%s")&&(O=`[${P}="%s"]`),c.defaultColorScheme===m){if(m==="dark"){const M={};return xk(c.cssVarPrefix).forEach(u=>{M[u]=p[u],delete p[u]}),O==="media"?{[T]:p,"@media (prefers-color-scheme: dark)":{[T]:M}}:O?{[O.replace("%s",m)]:M,[`${T}, ${O.replace("%s",m)}`]:p}:{[T]:{...p,...M}}}if(O&&O!=="media")return`${T}, ${O.replace("%s",String(m))}`}else if(m){if(O==="media")return{[`@media (prefers-color-scheme: ${String(m)})`]:{[T]:p}};if(O)return O.replace("%s",String(m))}return T};function wk(c,m){m.forEach(p=>{c[p]||(c[p]={})})}function $t(c,m,p){!c[m]&&p&&(c[m]=p)}function Vm(c){return typeof c!="string"||!c.startsWith("hsl")?c:Pb(c)}function nf(c,m){`${m}Channel`in c||(c[`${m}Channel`]=Um(Vm(c[m])))}function Sk(c){return typeof c=="number"?`${c}px`:typeof c=="string"||typeof c=="function"||Array.isArray(c)?c:"8px"}const wd=c=>{try{return c()}catch{}},Tk=(c="mui")=>VM(c);function I_(c,m,p,T){if(!m)return;m=m===!0?{}:m;const P=T==="dark"?"dark":"light";if(!p){c[T]=_k({...m,palette:{mode:P,...m==null?void 0:m.palette}});return}const{palette:O,...M}=J_({...p,palette:{mode:P,...m==null?void 0:m.palette}});return c[T]={...m,palette:O,opacity:{...kb(P),...m==null?void 0:m.opacity},overlays:(m==null?void 0:m.overlays)||Ab(P)},M}function Ck(c={},...m){const{colorSchemes:p={light:!0},defaultColorScheme:T,disableCssColorScheme:P=!1,cssVarPrefix:O="mui",shouldSkipGeneratingVar:M=vk,colorSchemeSelector:u=p.light&&p.dark?"media":void 0,rootSelector:J=":root",...Y}=c,ve=Object.keys(p)[0],de=T||(p.light&&ve!=="light"?"light":ve),Te=Tk(O),{[de]:le,light:we,dark:xe,...Ze}=p,mt={...Ze};let kt=le;if((de==="dark"&&!("dark"in p)||de==="light"&&!("light"in p))&&(kt=!0),!kt)throw new Error(wp(21,de));const Tt=I_(mt,kt,Y,de);we&&!mt.light&&I_(mt,we,void 0,"light"),xe&&!mt.dark&&I_(mt,xe,void 0,"dark");let Je={defaultColorScheme:de,...Tt,cssVarPrefix:O,colorSchemeSelector:u,rootSelector:J,getCssVar:Te,colorSchemes:mt,font:{...rk(Tt.typography),...Tt.font},spacing:Sk(Y.spacing)};Object.keys(Je.colorSchemes).forEach($e=>{const re=Je.colorSchemes[$e].palette,it=st=>{const zt=st.split("-"),tr=zt[1],Cr=zt[2];return Te(st,re[tr][Cr])};if(re.mode==="light"&&($t(re.common,"background","#fff"),$t(re.common,"onBackground","#000")),re.mode==="dark"&&($t(re.common,"background","#000"),$t(re.common,"onBackground","#fff")),wk(re,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),re.mode==="light"){$t(re.Alert,"errorColor",fo(re.error.light,.6)),$t(re.Alert,"infoColor",fo(re.info.light,.6)),$t(re.Alert,"successColor",fo(re.success.light,.6)),$t(re.Alert,"warningColor",fo(re.warning.light,.6)),$t(re.Alert,"errorFilledBg",it("palette-error-main")),$t(re.Alert,"infoFilledBg",it("palette-info-main")),$t(re.Alert,"successFilledBg",it("palette-success-main")),$t(re.Alert,"warningFilledBg",it("palette-warning-main")),$t(re.Alert,"errorFilledColor",wd(()=>re.getContrastText(re.error.main))),$t(re.Alert,"infoFilledColor",wd(()=>re.getContrastText(re.info.main))),$t(re.Alert,"successFilledColor",wd(()=>re.getContrastText(re.success.main))),$t(re.Alert,"warningFilledColor",wd(()=>re.getContrastText(re.warning.main))),$t(re.Alert,"errorStandardBg",po(re.error.light,.9)),$t(re.Alert,"infoStandardBg",po(re.info.light,.9)),$t(re.Alert,"successStandardBg",po(re.success.light,.9)),$t(re.Alert,"warningStandardBg",po(re.warning.light,.9)),$t(re.Alert,"errorIconColor",it("palette-error-main")),$t(re.Alert,"infoIconColor",it("palette-info-main")),$t(re.Alert,"successIconColor",it("palette-success-main")),$t(re.Alert,"warningIconColor",it("palette-warning-main")),$t(re.AppBar,"defaultBg",it("palette-grey-100")),$t(re.Avatar,"defaultBg",it("palette-grey-400")),$t(re.Button,"inheritContainedBg",it("palette-grey-300")),$t(re.Button,"inheritContainedHoverBg",it("palette-grey-A100")),$t(re.Chip,"defaultBorder",it("palette-grey-400")),$t(re.Chip,"defaultAvatarColor",it("palette-grey-700")),$t(re.Chip,"defaultIconColor",it("palette-grey-700")),$t(re.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),$t(re.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),$t(re.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),$t(re.LinearProgress,"primaryBg",po(re.primary.main,.62)),$t(re.LinearProgress,"secondaryBg",po(re.secondary.main,.62)),$t(re.LinearProgress,"errorBg",po(re.error.main,.62)),$t(re.LinearProgress,"infoBg",po(re.info.main,.62)),$t(re.LinearProgress,"successBg",po(re.success.main,.62)),$t(re.LinearProgress,"warningBg",po(re.warning.main,.62)),$t(re.Skeleton,"bg",`rgba(${it("palette-text-primaryChannel")} / 0.11)`),$t(re.Slider,"primaryTrack",po(re.primary.main,.62)),$t(re.Slider,"secondaryTrack",po(re.secondary.main,.62)),$t(re.Slider,"errorTrack",po(re.error.main,.62)),$t(re.Slider,"infoTrack",po(re.info.main,.62)),$t(re.Slider,"successTrack",po(re.success.main,.62)),$t(re.Slider,"warningTrack",po(re.warning.main,.62));const st=Wg(re.background.default,.8);$t(re.SnackbarContent,"bg",st),$t(re.SnackbarContent,"color",wd(()=>re.getContrastText(st))),$t(re.SpeedDialAction,"fabHoverBg",Wg(re.background.paper,.15)),$t(re.StepConnector,"border",it("palette-grey-400")),$t(re.StepContent,"border",it("palette-grey-400")),$t(re.Switch,"defaultColor",it("palette-common-white")),$t(re.Switch,"defaultDisabledColor",it("palette-grey-100")),$t(re.Switch,"primaryDisabledColor",po(re.primary.main,.62)),$t(re.Switch,"secondaryDisabledColor",po(re.secondary.main,.62)),$t(re.Switch,"errorDisabledColor",po(re.error.main,.62)),$t(re.Switch,"infoDisabledColor",po(re.info.main,.62)),$t(re.Switch,"successDisabledColor",po(re.success.main,.62)),$t(re.Switch,"warningDisabledColor",po(re.warning.main,.62)),$t(re.TableCell,"border",po(Gg(re.divider,1),.88)),$t(re.Tooltip,"bg",Gg(re.grey[700],.92))}if(re.mode==="dark"){$t(re.Alert,"errorColor",po(re.error.light,.6)),$t(re.Alert,"infoColor",po(re.info.light,.6)),$t(re.Alert,"successColor",po(re.success.light,.6)),$t(re.Alert,"warningColor",po(re.warning.light,.6)),$t(re.Alert,"errorFilledBg",it("palette-error-dark")),$t(re.Alert,"infoFilledBg",it("palette-info-dark")),$t(re.Alert,"successFilledBg",it("palette-success-dark")),$t(re.Alert,"warningFilledBg",it("palette-warning-dark")),$t(re.Alert,"errorFilledColor",wd(()=>re.getContrastText(re.error.dark))),$t(re.Alert,"infoFilledColor",wd(()=>re.getContrastText(re.info.dark))),$t(re.Alert,"successFilledColor",wd(()=>re.getContrastText(re.success.dark))),$t(re.Alert,"warningFilledColor",wd(()=>re.getContrastText(re.warning.dark))),$t(re.Alert,"errorStandardBg",fo(re.error.light,.9)),$t(re.Alert,"infoStandardBg",fo(re.info.light,.9)),$t(re.Alert,"successStandardBg",fo(re.success.light,.9)),$t(re.Alert,"warningStandardBg",fo(re.warning.light,.9)),$t(re.Alert,"errorIconColor",it("palette-error-main")),$t(re.Alert,"infoIconColor",it("palette-info-main")),$t(re.Alert,"successIconColor",it("palette-success-main")),$t(re.Alert,"warningIconColor",it("palette-warning-main")),$t(re.AppBar,"defaultBg",it("palette-grey-900")),$t(re.AppBar,"darkBg",it("palette-background-paper")),$t(re.AppBar,"darkColor",it("palette-text-primary")),$t(re.Avatar,"defaultBg",it("palette-grey-600")),$t(re.Button,"inheritContainedBg",it("palette-grey-800")),$t(re.Button,"inheritContainedHoverBg",it("palette-grey-700")),$t(re.Chip,"defaultBorder",it("palette-grey-700")),$t(re.Chip,"defaultAvatarColor",it("palette-grey-300")),$t(re.Chip,"defaultIconColor",it("palette-grey-300")),$t(re.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),$t(re.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),$t(re.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),$t(re.LinearProgress,"primaryBg",fo(re.primary.main,.5)),$t(re.LinearProgress,"secondaryBg",fo(re.secondary.main,.5)),$t(re.LinearProgress,"errorBg",fo(re.error.main,.5)),$t(re.LinearProgress,"infoBg",fo(re.info.main,.5)),$t(re.LinearProgress,"successBg",fo(re.success.main,.5)),$t(re.LinearProgress,"warningBg",fo(re.warning.main,.5)),$t(re.Skeleton,"bg",`rgba(${it("palette-text-primaryChannel")} / 0.13)`),$t(re.Slider,"primaryTrack",fo(re.primary.main,.5)),$t(re.Slider,"secondaryTrack",fo(re.secondary.main,.5)),$t(re.Slider,"errorTrack",fo(re.error.main,.5)),$t(re.Slider,"infoTrack",fo(re.info.main,.5)),$t(re.Slider,"successTrack",fo(re.success.main,.5)),$t(re.Slider,"warningTrack",fo(re.warning.main,.5));const st=Wg(re.background.default,.98);$t(re.SnackbarContent,"bg",st),$t(re.SnackbarContent,"color",wd(()=>re.getContrastText(st))),$t(re.SpeedDialAction,"fabHoverBg",Wg(re.background.paper,.15)),$t(re.StepConnector,"border",it("palette-grey-600")),$t(re.StepContent,"border",it("palette-grey-600")),$t(re.Switch,"defaultColor",it("palette-grey-300")),$t(re.Switch,"defaultDisabledColor",it("palette-grey-600")),$t(re.Switch,"primaryDisabledColor",fo(re.primary.main,.55)),$t(re.Switch,"secondaryDisabledColor",fo(re.secondary.main,.55)),$t(re.Switch,"errorDisabledColor",fo(re.error.main,.55)),$t(re.Switch,"infoDisabledColor",fo(re.info.main,.55)),$t(re.Switch,"successDisabledColor",fo(re.success.main,.55)),$t(re.Switch,"warningDisabledColor",fo(re.warning.main,.55)),$t(re.TableCell,"border",fo(Gg(re.divider,1),.68)),$t(re.Tooltip,"bg",Gg(re.grey[700],.92))}nf(re.background,"default"),nf(re.background,"paper"),nf(re.common,"background"),nf(re.common,"onBackground"),nf(re,"divider"),Object.keys(re).forEach(st=>{const zt=re[st];st!=="tonalOffset"&&zt&&typeof zt=="object"&&(zt.main&&$t(re[st],"mainChannel",Um(Vm(zt.main))),zt.light&&$t(re[st],"lightChannel",Um(Vm(zt.light))),zt.dark&&$t(re[st],"darkChannel",Um(Vm(zt.dark))),zt.contrastText&&$t(re[st],"contrastTextChannel",Um(Vm(zt.contrastText))),st==="text"&&(nf(re[st],"primary"),nf(re[st],"secondary")),st==="action"&&(zt.active&&nf(re[st],"active"),zt.selected&&nf(re[st],"selected")))})}),Je=m.reduce(($e,re)=>kc($e,re),Je);const Qe={prefix:O,disableCssColorScheme:P,shouldSkipGeneratingVar:M,getSelector:bk(Je)},{vars:nt,generateThemeVars:yt,generateStyleSheets:ze}=WM(Je,Qe);return Je.vars=nt,Object.entries(Je.colorSchemes[Je.defaultColorScheme]).forEach(([$e,re])=>{Je[$e]=re}),Je.generateThemeVars=yt,Je.generateStyleSheets=ze,Je.generateSpacing=function(){return bb(Y.spacing,wv(this))},Je.getColorSchemeSelector=HM(u),Je.spacing=Je.generateSpacing(),Je.shouldSkipGeneratingVar=M,Je.unstable_sxConfig={...ug,...Y==null?void 0:Y.unstable_sxConfig},Je.unstable_sx=function(re){return im({sx:re,theme:this})},Je.toRuntimeSource=Mb,Je}function vx(c,m,p){c.colorSchemes&&p&&(c.colorSchemes[m]={...p!==!0&&p,palette:zv({...p===!0?{}:p.palette,mode:m})})}function Pk(c={},...m){const{palette:p,cssVariables:T=!1,colorSchemes:P=p?void 0:{light:!0},defaultColorScheme:O=p==null?void 0:p.mode,...M}=c,u=O||"light",J=P==null?void 0:P[u],Y={...P,...p?{[u]:{...typeof J!="boolean"&&J,palette:p}}:void 0};if(T===!1){if(!("colorSchemes"in c))return J_(c,...m);let ve=p;"palette"in c||Y[u]&&(Y[u]!==!0?ve=Y[u].palette:u==="dark"&&(ve={mode:"dark"}));const de=J_({...c,palette:ve},...m);return de.defaultColorScheme=u,de.colorSchemes=Y,de.palette.mode==="light"&&(de.colorSchemes.light={...Y.light!==!0&&Y.light,palette:de.palette},vx(de,"dark",Y.dark)),de.palette.mode==="dark"&&(de.colorSchemes.dark={...Y.dark!==!0&&Y.dark,palette:de.palette},vx(de,"light",Y.light)),de}return!p&&!("light"in Y)&&u==="light"&&(Y.light=!0),Ck({...M,colorSchemes:Y,defaultColorScheme:u,...typeof T!="boolean"&&T},...m)}const Ek=Pk(),Ik="$$material";function Mk(c){return c!=="ownerState"&&c!=="theme"&&c!=="sx"&&c!=="as"}const um=c=>Mk(c)&&c!=="classes",Co=MM({themeId:Ik,defaultTheme:Ek,rootShouldForwardProp:um});function kk(){return vI}const ch=UM;function Ak(c){return typeof c.main=="string"}function Rk(c,m=[]){if(!Ak(c))return!1;for(const p of m)if(!c.hasOwnProperty(p)||typeof c[p]!="string")return!1;return!0}function sm(c=[]){return([,m])=>m&&Rk(m,c)}function hh(c){return jM(c)}function zk(c){return Uu("MuiFormLabel",c)}const ry=Ml("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),Lk=c=>{const{classes:m,color:p,focused:T,disabled:P,error:O,filled:M,required:u}=c,J={root:["root",`color${gi(p)}`,P&&"disabled",O&&"error",M&&"filled",T&&"focused",u&&"required"],asterisk:["asterisk",O&&"error"]};return Rc(J,zk,m)},Dk=Co("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(c,m)=>{const{ownerState:p}=c;return[m.root,p.color==="secondary"&&m.colorSecondary,p.filled&&m.filled]}})(ch(({theme:c})=>({color:(c.vars||c).palette.text.secondary,...c.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(c.palette).filter(sm()).map(([m])=>({props:{color:m},style:{[`&.${ry.focused}`]:{color:(c.vars||c).palette[m].main}}})),{props:{},style:{[`&.${ry.disabled}`]:{color:(c.vars||c).palette.text.disabled},[`&.${ry.error}`]:{color:(c.vars||c).palette.error.main}}}]}))),Ok=Co("span",{name:"MuiFormLabel",slot:"Asterisk"})(ch(({theme:c})=>({[`&.${ry.error}`]:{color:(c.vars||c).palette.error.main}}))),Fk=Zt.forwardRef(function(m,p){const T=hh({props:m,name:"MuiFormLabel"}),{children:P,className:O,color:M,component:u="label",disabled:J,error:Y,filled:ve,focused:de,required:Te,...le}=T,we=sg(),xe=vv({props:T,muiFormControl:we,states:["color","required","focused","disabled","error","filled"]}),Ze={...T,color:xe.color||"primary",component:u,disabled:xe.disabled,error:xe.error,filled:xe.filled,focused:xe.focused,required:xe.required},mt=Lk(Ze);return _r.jsxs(Dk,{as:u,ownerState:Ze,className:To(mt.root,O),ref:p,...le,children:[P,xe.required&&_r.jsxs(Ok,{ownerState:Ze,"aria-hidden":!0,className:mt.asterisk,children:["","*"]})]})}),xx=Zt.createContext({});function bx(c){try{return c.matches(":focus-visible")}catch{}return!1}function Jm(...c){const m=Zt.useRef(void 0),p=Zt.useCallback(T=>{const P=c.map(O=>{if(O==null)return null;if(typeof O=="function"){const M=O,u=M(T);return typeof u=="function"?u:()=>{M(null)}}return O.current=T,()=>{O.current=null}});return()=>{P.forEach(O=>O==null?void 0:O())}},c);return Zt.useMemo(()=>c.every(T=>T==null)?null:T=>{m.current&&(m.current(),m.current=void 0),T!=null&&(m.current=p(T))},c)}function ny(c){const m=Zt.useRef(c);return Cb(()=>{m.current=c}),Zt.useRef((...p)=>(0,m.current)(...p)).current}const wx={};function Rb(c,m){const p=Zt.useRef(wx);return p.current===wx&&(p.current=c(m)),p}class dy{constructor(){zm(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new dy}static use(){const m=Rb(dy.create).current,[p,T]=Zt.useState(!1);return m.shouldMount=p,m.setShouldMount=T,Zt.useEffect(m.mountEffect,[p]),m}mount(){return this.mounted||(this.mounted=Nk(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...m){this.mount().then(()=>{var p;return(p=this.ref.current)==null?void 0:p.start(...m)})}stop(...m){this.mount().then(()=>{var p;return(p=this.ref.current)==null?void 0:p.stop(...m)})}pulsate(...m){this.mount().then(()=>{var p;return(p=this.ref.current)==null?void 0:p.pulsate(...m)})}}function Bk(){return dy.use()}function Nk(){let c,m;const p=new Promise((T,P)=>{c=T,m=P});return p.resolve=c,p.reject=m,p}function $k(c,m){if(c==null)return{};var p={};for(var T in c)if({}.hasOwnProperty.call(c,T)){if(m.indexOf(T)!==-1)continue;p[T]=c[T]}return p}function ev(c,m){return ev=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(p,T){return p.__proto__=T,p},ev(c,m)}function jk(c,m){c.prototype=Object.create(m.prototype),c.prototype.constructor=c,ev(c,m)}const Sx=fu.createContext(null);function Uk(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function Lv(c,m){var p=function(O){return m&&Zt.isValidElement(O)?m(O):O},T=Object.create(null);return c&&Zt.Children.map(c,function(P){return P}).forEach(function(P){T[P.key]=p(P)}),T}function Vk(c,m){c=c||{},m=m||{};function p(ve){return ve in m?m[ve]:c[ve]}var T=Object.create(null),P=[];for(var O in c)O in m?P.length&&(T[O]=P,P=[]):P.push(O);var M,u={};for(var J in m){if(T[J])for(M=0;M<T[J].length;M++){var Y=T[J][M];u[T[J][M]]=p(Y)}u[J]=p(J)}for(M=0;M<P.length;M++)u[P[M]]=p(P[M]);return u}function xp(c,m,p){return p[m]!=null?p[m]:c.props[m]}function Zk(c,m){return Lv(c.children,function(p){return Zt.cloneElement(p,{onExited:m.bind(null,p),in:!0,appear:xp(p,"appear",c),enter:xp(p,"enter",c),exit:xp(p,"exit",c)})})}function Gk(c,m,p){var T=Lv(c.children),P=Vk(m,T);return Object.keys(P).forEach(function(O){var M=P[O];if(Zt.isValidElement(M)){var u=O in m,J=O in T,Y=m[O],ve=Zt.isValidElement(Y)&&!Y.props.in;J&&(!u||ve)?P[O]=Zt.cloneElement(M,{onExited:p.bind(null,M),in:!0,exit:xp(M,"exit",c),enter:xp(M,"enter",c)}):!J&&u&&!ve?P[O]=Zt.cloneElement(M,{in:!1}):J&&u&&Zt.isValidElement(Y)&&(P[O]=Zt.cloneElement(M,{onExited:p.bind(null,M),in:Y.props.in,exit:xp(M,"exit",c),enter:xp(M,"enter",c)}))}}),P}var Wk=Object.values||function(c){return Object.keys(c).map(function(m){return c[m]})},Hk={component:"div",childFactory:function(m){return m}},Dv=function(c){jk(m,c);function m(T,P){var O;O=c.call(this,T,P)||this;var M=O.handleExited.bind(Uk(O));return O.state={contextValue:{isMounting:!0},handleExited:M,firstRender:!0},O}var p=m.prototype;return p.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},p.componentWillUnmount=function(){this.mounted=!1},m.getDerivedStateFromProps=function(P,O){var M=O.children,u=O.handleExited,J=O.firstRender;return{children:J?Zk(P,u):Gk(P,M,u),firstRender:!1}},p.handleExited=function(P,O){var M=Lv(this.props.children);P.key in M||(P.props.onExited&&P.props.onExited(O),this.mounted&&this.setState(function(u){var J=uy({},u.children);return delete J[P.key],{children:J}}))},p.render=function(){var P=this.props,O=P.component,M=P.childFactory,u=$k(P,["component","childFactory"]),J=this.state.contextValue,Y=Wk(this.state.children).map(M);return delete u.appear,delete u.enter,delete u.exit,O===null?fu.createElement(Sx.Provider,{value:J},Y):fu.createElement(Sx.Provider,{value:J},fu.createElement(O,u,Y))},m}(fu.Component);Dv.propTypes={};Dv.defaultProps=Hk;const qk=[];function Kk(c){Zt.useEffect(c,qk)}class Ov{constructor(){zm(this,"currentId",null);zm(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});zm(this,"disposeEffect",()=>this.clear)}static create(){return new Ov}start(m,p){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,p()},m)}}function Xk(){const c=Rb(Ov.create).current;return Kk(c.disposeEffect),c}function Yk(c){const{className:m,classes:p,pulsate:T=!1,rippleX:P,rippleY:O,rippleSize:M,in:u,onExited:J,timeout:Y}=c,[ve,de]=Zt.useState(!1),Te=To(m,p.ripple,p.rippleVisible,T&&p.ripplePulsate),le={width:M,height:M,top:-(M/2)+O,left:-(M/2)+P},we=To(p.child,ve&&p.childLeaving,T&&p.childPulsate);return!u&&!ve&&de(!0),Zt.useEffect(()=>{if(!u&&J!=null){const xe=setTimeout(J,Y);return()=>{clearTimeout(xe)}}},[J,u,Y]),_r.jsx("span",{className:Te,style:le,children:_r.jsx("span",{className:we})})}const oh=Ml("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),tv=550,Qk=80,Jk=hg`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,eA=hg`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,tA=hg`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,rA=Co("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),nA=Co(Yk,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${oh.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${Jk};
    animation-duration: ${tv}ms;
    animation-timing-function: ${({theme:c})=>c.transitions.easing.easeInOut};
  }

  &.${oh.ripplePulsate} {
    animation-duration: ${({theme:c})=>c.transitions.duration.shorter}ms;
  }

  & .${oh.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${oh.childLeaving} {
    opacity: 0;
    animation-name: ${eA};
    animation-duration: ${tv}ms;
    animation-timing-function: ${({theme:c})=>c.transitions.easing.easeInOut};
  }

  & .${oh.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${tA};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:c})=>c.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,iA=Zt.forwardRef(function(m,p){const T=hh({props:m,name:"MuiTouchRipple"}),{center:P=!1,classes:O={},className:M,...u}=T,[J,Y]=Zt.useState([]),ve=Zt.useRef(0),de=Zt.useRef(null);Zt.useEffect(()=>{de.current&&(de.current(),de.current=null)},[J]);const Te=Zt.useRef(!1),le=Xk(),we=Zt.useRef(null),xe=Zt.useRef(null),Ze=Zt.useCallback(Je=>{const{pulsate:Qe,rippleX:nt,rippleY:yt,rippleSize:ze,cb:$e}=Je;Y(re=>[...re,_r.jsx(nA,{classes:{ripple:To(O.ripple,oh.ripple),rippleVisible:To(O.rippleVisible,oh.rippleVisible),ripplePulsate:To(O.ripplePulsate,oh.ripplePulsate),child:To(O.child,oh.child),childLeaving:To(O.childLeaving,oh.childLeaving),childPulsate:To(O.childPulsate,oh.childPulsate)},timeout:tv,pulsate:Qe,rippleX:nt,rippleY:yt,rippleSize:ze},ve.current)]),ve.current+=1,de.current=$e},[O]),mt=Zt.useCallback((Je={},Qe={},nt=()=>{})=>{const{pulsate:yt=!1,center:ze=P||Qe.pulsate,fakeElement:$e=!1}=Qe;if((Je==null?void 0:Je.type)==="mousedown"&&Te.current){Te.current=!1;return}(Je==null?void 0:Je.type)==="touchstart"&&(Te.current=!0);const re=$e?null:xe.current,it=re?re.getBoundingClientRect():{width:0,height:0,left:0,top:0};let st,zt,tr;if(ze||Je===void 0||Je.clientX===0&&Je.clientY===0||!Je.clientX&&!Je.touches)st=Math.round(it.width/2),zt=Math.round(it.height/2);else{const{clientX:Cr,clientY:xr}=Je.touches&&Je.touches.length>0?Je.touches[0]:Je;st=Math.round(Cr-it.left),zt=Math.round(xr-it.top)}if(ze)tr=Math.sqrt((2*it.width**2+it.height**2)/3),tr%2===0&&(tr+=1);else{const Cr=Math.max(Math.abs((re?re.clientWidth:0)-st),st)*2+2,xr=Math.max(Math.abs((re?re.clientHeight:0)-zt),zt)*2+2;tr=Math.sqrt(Cr**2+xr**2)}Je!=null&&Je.touches?we.current===null&&(we.current=()=>{Ze({pulsate:yt,rippleX:st,rippleY:zt,rippleSize:tr,cb:nt})},le.start(Qk,()=>{we.current&&(we.current(),we.current=null)})):Ze({pulsate:yt,rippleX:st,rippleY:zt,rippleSize:tr,cb:nt})},[P,Ze,le]),kt=Zt.useCallback(()=>{mt({},{pulsate:!0})},[mt]),Tt=Zt.useCallback((Je,Qe)=>{if(le.clear(),(Je==null?void 0:Je.type)==="touchend"&&we.current){we.current(),we.current=null,le.start(0,()=>{Tt(Je,Qe)});return}we.current=null,Y(nt=>nt.length>0?nt.slice(1):nt),de.current=Qe},[le]);return Zt.useImperativeHandle(p,()=>({pulsate:kt,start:mt,stop:Tt}),[kt,mt,Tt]),_r.jsx(rA,{className:To(oh.root,O.root,M),ref:xe,...u,children:_r.jsx(Dv,{component:null,exit:!0,children:J})})});function oA(c){return Uu("MuiButtonBase",c)}const sA=Ml("MuiButtonBase",["root","disabled","focusVisible"]),aA=c=>{const{disabled:m,focusVisible:p,focusVisibleClassName:T,classes:P}=c,M=Rc({root:["root",m&&"disabled",p&&"focusVisible"]},oA,P);return p&&T&&(M.root+=` ${T}`),M},lA=Co("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${sA.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),Fv=Zt.forwardRef(function(m,p){const T=hh({props:m,name:"MuiButtonBase"}),{action:P,centerRipple:O=!1,children:M,className:u,component:J="button",disabled:Y=!1,disableRipple:ve=!1,disableTouchRipple:de=!1,focusRipple:Te=!1,focusVisibleClassName:le,LinkComponent:we="a",onBlur:xe,onClick:Ze,onContextMenu:mt,onDragLeave:kt,onFocus:Tt,onFocusVisible:Je,onKeyDown:Qe,onKeyUp:nt,onMouseDown:yt,onMouseLeave:ze,onMouseUp:$e,onTouchEnd:re,onTouchMove:it,onTouchStart:st,tabIndex:zt=0,TouchRippleProps:tr,touchRippleRef:Cr,type:xr,...or}=T,xt=Zt.useRef(null),Pt=Bk(),Wt=Jm(Pt.ref,Cr),[Oe,ct]=Zt.useState(!1);Y&&Oe&&ct(!1),Zt.useImperativeHandle(P,()=>({focusVisible:()=>{ct(!0),xt.current.focus()}}),[]);const Ut=Pt.shouldMount&&!ve&&!Y;Zt.useEffect(()=>{Oe&&Te&&!ve&&Pt.pulsate()},[ve,Te,Oe,Pt]);const ur=of(Pt,"start",yt,de),At=of(Pt,"stop",mt,de),ir=of(Pt,"stop",kt,de),Sr=of(Pt,"stop",$e,de),fr=of(Pt,"stop",wr=>{Oe&&wr.preventDefault(),ze&&ze(wr)},de),pr=of(Pt,"start",st,de),Qr=of(Pt,"stop",re,de),Tr=of(Pt,"stop",it,de),tn=of(Pt,"stop",wr=>{bx(wr.target)||ct(!1),xe&&xe(wr)},!1),$r=ny(wr=>{xt.current||(xt.current=wr.currentTarget),bx(wr.target)&&(ct(!0),Je&&Je(wr)),Tt&&Tt(wr)}),br=()=>{const wr=xt.current;return J&&J!=="button"&&!(wr.tagName==="A"&&wr.href)},nn=ny(wr=>{Te&&!wr.repeat&&Oe&&wr.key===" "&&Pt.stop(wr,()=>{Pt.start(wr)}),wr.target===wr.currentTarget&&br()&&wr.key===" "&&wr.preventDefault(),Qe&&Qe(wr),wr.target===wr.currentTarget&&br()&&wr.key==="Enter"&&!Y&&(wr.preventDefault(),Ze&&Ze(wr))}),Hr=ny(wr=>{Te&&wr.key===" "&&Oe&&!wr.defaultPrevented&&Pt.stop(wr,()=>{Pt.pulsate(wr)}),nt&&nt(wr),Ze&&wr.target===wr.currentTarget&&br()&&wr.key===" "&&!wr.defaultPrevented&&Ze(wr)});let dn=J;dn==="button"&&(or.href||or.to)&&(dn=we);const on={};dn==="button"?(on.type=xr===void 0?"button":xr,on.disabled=Y):(!or.href&&!or.to&&(on.role="button"),Y&&(on["aria-disabled"]=Y));const bn=Jm(p,xt),sn={...T,centerRipple:O,component:J,disabled:Y,disableRipple:ve,disableTouchRipple:de,focusRipple:Te,tabIndex:zt,focusVisible:Oe},kn=aA(sn);return _r.jsxs(lA,{as:dn,className:To(kn.root,u),ownerState:sn,onBlur:tn,onClick:Ze,onContextMenu:At,onFocus:$r,onKeyDown:nn,onKeyUp:Hr,onMouseDown:ur,onMouseLeave:fr,onMouseUp:Sr,onDragLeave:ir,onTouchEnd:Qr,onTouchMove:Tr,onTouchStart:pr,ref:bn,tabIndex:Y?-1:zt,type:xr,...on,...or,children:[M,Ut?_r.jsx(iA,{ref:Wt,center:O,...tr}):null]})});function of(c,m,p,T=!1){return ny(P=>(p&&p(P),T||c[m](P),!0))}const Tx=Ml("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),Cx=Ml("MuiListItemIcon",["root","alignItemsFlexStart"]);function uA(c){return Uu("MuiTypography",c)}Ml("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const cA={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},hA=kk(),dA=c=>{const{align:m,gutterBottom:p,noWrap:T,paragraph:P,variant:O,classes:M}=c,u={root:["root",O,c.align!=="inherit"&&`align${gi(m)}`,p&&"gutterBottom",T&&"noWrap",P&&"paragraph"]};return Rc(u,uA,M)},fA=Co("span",{name:"MuiTypography",slot:"Root",overridesResolver:(c,m)=>{const{ownerState:p}=c;return[m.root,p.variant&&m[p.variant],p.align!=="inherit"&&m[`align${gi(p.align)}`],p.noWrap&&m.noWrap,p.gutterBottom&&m.gutterBottom,p.paragraph&&m.paragraph]}})(ch(({theme:c})=>{var m;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(c.typography).filter(([p,T])=>p!=="inherit"&&T&&typeof T=="object").map(([p,T])=>({props:{variant:p},style:T})),...Object.entries(c.palette).filter(sm()).map(([p])=>({props:{color:p},style:{color:(c.vars||c).palette[p].main}})),...Object.entries(((m=c.palette)==null?void 0:m.text)||{}).filter(([,p])=>typeof p=="string").map(([p])=>({props:{color:`text${gi(p)}`},style:{color:(c.vars||c).palette.text[p]}})),{props:({ownerState:p})=>p.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:p})=>p.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:p})=>p.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:p})=>p.paragraph,style:{marginBottom:16}}]}})),Px={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Ex=Zt.forwardRef(function(m,p){const{color:T,...P}=hh({props:m,name:"MuiTypography"}),O=!cA[T],M=hA({...P,...O&&{color:T}}),{align:u="inherit",className:J,component:Y,gutterBottom:ve=!1,noWrap:de=!1,paragraph:Te=!1,variant:le="body1",variantMapping:we=Px,...xe}=M,Ze={...M,align:u,color:T,className:J,component:Y,gutterBottom:ve,noWrap:de,paragraph:Te,variant:le,variantMapping:we},mt=Y||(Te?"p":we[le]||Px[le])||"span",kt=dA(Ze);return _r.jsx(fA,{as:mt,ref:p,className:To(kt.root,J),...xe,ownerState:Ze,style:{...u!=="inherit"&&{"--Typography-textAlign":u},...xe.style}})}),Ix=Ml("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function pA(c){return typeof c=="string"}function mA(c,m,p){return c===void 0||pA(c)?m:{...m,ownerState:{...m.ownerState,...p}}}function gA(c,m,p){return typeof c=="function"?c(m,p):c}function yA(c,m=[]){if(c===void 0)return{};const p={};return Object.keys(c).filter(T=>T.match(/^on[A-Z]/)&&typeof c[T]=="function"&&!m.includes(T)).forEach(T=>{p[T]=c[T]}),p}function Mx(c){if(c===void 0)return{};const m={};return Object.keys(c).filter(p=>!(p.match(/^on[A-Z]/)&&typeof c[p]=="function")).forEach(p=>{m[p]=c[p]}),m}function _A(c){const{getSlotProps:m,additionalProps:p,externalSlotProps:T,externalForwardedProps:P,className:O}=c;if(!m){const le=To(p==null?void 0:p.className,O,P==null?void 0:P.className,T==null?void 0:T.className),we={...p==null?void 0:p.style,...P==null?void 0:P.style,...T==null?void 0:T.style},xe={...p,...P,...T};return le.length>0&&(xe.className=le),Object.keys(we).length>0&&(xe.style=we),{props:xe,internalRef:void 0}}const M=yA({...P,...T}),u=Mx(T),J=Mx(P),Y=m(M),ve=To(Y==null?void 0:Y.className,p==null?void 0:p.className,O,P==null?void 0:P.className,T==null?void 0:T.className),de={...Y==null?void 0:Y.style,...p==null?void 0:p.style,...P==null?void 0:P.style,...T==null?void 0:T.style},Te={...Y,...p,...J,...u};return ve.length>0&&(Te.className=ve),Object.keys(de).length>0&&(Te.style=de),{props:Te,internalRef:Y.ref}}function fy(c,m){const{className:p,elementType:T,ownerState:P,externalForwardedProps:O,internalForwardedProps:M,shouldForwardComponentProp:u=!1,...J}=m,{component:Y,slots:ve={[c]:void 0},slotProps:de={[c]:void 0},...Te}=O,le=ve[c]||T,we=gA(de[c],P),{props:{component:xe,...Ze},internalRef:mt}=_A({className:p,...J,externalForwardedProps:c==="root"?Te:void 0,externalSlotProps:we}),kt=Jm(mt,we==null?void 0:we.ref,m.ref),Tt=c==="root"?xe||Y:xe,Je=mA(le,{...c==="root"&&!Y&&!ve[c]&&M,...c!=="root"&&!ve[c]&&M,...Ze,...Tt&&!u&&{as:Tt},...Tt&&u&&{component:Tt},ref:kt},P);return[le,Je]}function vA(c){return Uu("MuiMenuItem",c)}const $m=Ml("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),xA=(c,m)=>{const{ownerState:p}=c;return[m.root,p.dense&&m.dense,p.divider&&m.divider,!p.disableGutters&&m.gutters]},bA=c=>{const{disabled:m,dense:p,divider:T,disableGutters:P,selected:O,classes:M}=c,J=Rc({root:["root",p&&"dense",m&&"disabled",!P&&"gutters",T&&"divider",O&&"selected"]},vA,M);return{...M,...J}},wA=Co(Fv,{shouldForwardProp:c=>um(c)||c==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:xA})(ch(({theme:c})=>({...c.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(c.vars||c).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${$m.selected}`]:{backgroundColor:c.vars?`rgba(${c.vars.palette.primary.mainChannel} / ${c.vars.palette.action.selectedOpacity})`:ah(c.palette.primary.main,c.palette.action.selectedOpacity),[`&.${$m.focusVisible}`]:{backgroundColor:c.vars?`rgba(${c.vars.palette.primary.mainChannel} / calc(${c.vars.palette.action.selectedOpacity} + ${c.vars.palette.action.focusOpacity}))`:ah(c.palette.primary.main,c.palette.action.selectedOpacity+c.palette.action.focusOpacity)}},[`&.${$m.selected}:hover`]:{backgroundColor:c.vars?`rgba(${c.vars.palette.primary.mainChannel} / calc(${c.vars.palette.action.selectedOpacity} + ${c.vars.palette.action.hoverOpacity}))`:ah(c.palette.primary.main,c.palette.action.selectedOpacity+c.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:c.vars?`rgba(${c.vars.palette.primary.mainChannel} / ${c.vars.palette.action.selectedOpacity})`:ah(c.palette.primary.main,c.palette.action.selectedOpacity)}},[`&.${$m.focusVisible}`]:{backgroundColor:(c.vars||c).palette.action.focus},[`&.${$m.disabled}`]:{opacity:(c.vars||c).palette.action.disabledOpacity},[`& + .${Tx.root}`]:{marginTop:c.spacing(1),marginBottom:c.spacing(1)},[`& + .${Tx.inset}`]:{marginLeft:52},[`& .${Ix.root}`]:{marginTop:0,marginBottom:0},[`& .${Ix.inset}`]:{paddingLeft:36},[`& .${Cx.root}`]:{minWidth:36},variants:[{props:({ownerState:m})=>!m.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:m})=>m.divider,style:{borderBottom:`1px solid ${(c.vars||c).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:m})=>!m.dense,style:{[c.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:m})=>m.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...c.typography.body2,[`& .${Cx.root} svg`]:{fontSize:"1.25rem"}}}]}))),SA=Zt.forwardRef(function(m,p){const T=hh({props:m,name:"MuiMenuItem"}),{autoFocus:P=!1,component:O="li",dense:M=!1,divider:u=!1,disableGutters:J=!1,focusVisibleClassName:Y,role:ve="menuitem",tabIndex:de,className:Te,...le}=T,we=Zt.useContext(xx),xe=Zt.useMemo(()=>({dense:M||we.dense||!1,disableGutters:J}),[we.dense,M,J]),Ze=Zt.useRef(null);Cb(()=>{P&&Ze.current&&Ze.current.focus()},[P]);const mt={...T,dense:xe.dense,divider:u,disableGutters:J},kt=bA(T),Tt=Jm(Ze,p);let Je;return T.disabled||(Je=de!==void 0?de:-1),_r.jsx(xx.Provider,{value:xe,children:_r.jsx(wA,{ref:Tt,role:ve,tabIndex:Je,component:O,focusVisibleClassName:To(kt.focusVisible,Y),className:To(kt.root,Te),...le,ownerState:mt,classes:kt})})});function kx(c){return c!=null&&!(Array.isArray(c)&&c.length===0)}function Ax(c,m=!1){return c&&(kx(c.value)&&c.value!==""||m&&kx(c.defaultValue)&&c.defaultValue!=="")}function TA(c){return c.startAdornment}function CA(c){return Uu("MuiFormControl",c)}Ml("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const PA=c=>{const{classes:m,margin:p,fullWidth:T}=c,P={root:["root",p!=="none"&&`margin${gi(p)}`,T&&"fullWidth"]};return Rc(P,CA,m)},EA=Co("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(c,m)=>{const{ownerState:p}=c;return[m.root,m[`margin${gi(p.margin)}`],p.fullWidth&&m.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),Rx=Zt.forwardRef(function(m,p){const T=hh({props:m,name:"MuiFormControl"}),{children:P,className:O,color:M="primary",component:u="div",disabled:J=!1,error:Y=!1,focused:ve,fullWidth:de=!1,hiddenLabel:Te=!1,margin:le="none",required:we=!1,size:xe="medium",variant:Ze="outlined",...mt}=T,kt={...T,color:M,component:u,disabled:J,error:Y,fullWidth:de,hiddenLabel:Te,margin:le,required:we,size:xe,variant:Ze},Tt=PA(kt),[Je,Qe]=Zt.useState(()=>{let Cr=!1;return P&&Zt.Children.forEach(P,xr=>{if(!E_(xr,["Input","Select"]))return;const or=E_(xr,["Select"])?xr.props.input:xr;or&&TA(or.props)&&(Cr=!0)}),Cr}),[nt,yt]=Zt.useState(()=>{let Cr=!1;return P&&Zt.Children.forEach(P,xr=>{E_(xr,["Input","Select"])&&(Ax(xr.props,!0)||Ax(xr.props.inputProps,!0))&&(Cr=!0)}),Cr}),[ze,$e]=Zt.useState(!1);J&&ze&&$e(!1);const re=ve!==void 0&&!J?ve:ze;let it;Zt.useRef(!1);const st=Zt.useCallback(()=>{yt(!0)},[]),zt=Zt.useCallback(()=>{yt(!1)},[]),tr=Zt.useMemo(()=>({adornedStart:Je,setAdornedStart:Qe,color:M,disabled:J,error:Y,filled:nt,focused:re,fullWidth:de,hiddenLabel:Te,size:xe,onBlur:()=>{$e(!1)},onFocus:()=>{$e(!0)},onEmpty:zt,onFilled:st,registerEffect:it,required:we,variant:Ze}),[Je,M,J,Y,nt,re,de,Te,it,zt,st,we,xe,Ze]);return _r.jsx(rb.Provider,{value:tr,children:_r.jsx(EA,{as:u,ownerState:kt,className:To(Tt.root,O),ref:p,...mt,children:P})})});function IA(c){return Uu("MuiFormControlLabel",c)}const Zm=Ml("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),MA=c=>{const{classes:m,disabled:p,labelPlacement:T,error:P,required:O}=c,M={root:["root",p&&"disabled",`labelPlacement${gi(T)}`,P&&"error",O&&"required"],label:["label",p&&"disabled"],asterisk:["asterisk",P&&"error"]};return Rc(M,IA,m)},kA=Co("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(c,m)=>{const{ownerState:p}=c;return[{[`& .${Zm.label}`]:m.label},m.root,m[`labelPlacement${gi(p.labelPlacement)}`]]}})(ch(({theme:c})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${Zm.disabled}`]:{cursor:"default"},[`& .${Zm.label}`]:{[`&.${Zm.disabled}`]:{color:(c.vars||c).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:m})=>m==="start"||m==="top"||m==="bottom",style:{marginLeft:16}}]}))),AA=Co("span",{name:"MuiFormControlLabel",slot:"Asterisk"})(ch(({theme:c})=>({[`&.${Zm.error}`]:{color:(c.vars||c).palette.error.main}}))),zx=Zt.forwardRef(function(m,p){const T=hh({props:m,name:"MuiFormControlLabel"}),{checked:P,className:O,componentsProps:M={},control:u,disabled:J,disableTypography:Y,inputRef:ve,label:de,labelPlacement:Te="end",name:le,onChange:we,required:xe,slots:Ze={},slotProps:mt={},value:kt,...Tt}=T,Je=sg(),Qe=J??u.props.disabled??(Je==null?void 0:Je.disabled),nt=xe??u.props.required,yt={disabled:Qe,required:nt};["checked","name","onChange","value","inputRef"].forEach(Cr=>{typeof u.props[Cr]>"u"&&typeof T[Cr]<"u"&&(yt[Cr]=T[Cr])});const ze=vv({props:T,muiFormControl:Je,states:["error"]}),$e={...T,disabled:Qe,labelPlacement:Te,required:nt,error:ze.error},re=MA($e),it={slots:Ze,slotProps:{...M,...mt}},[st,zt]=fy("typography",{elementType:Ex,externalForwardedProps:it,ownerState:$e});let tr=de;return tr!=null&&tr.type!==Ex&&!Y&&(tr=_r.jsx(st,{component:"span",...zt,className:To(re.label,zt==null?void 0:zt.className),children:tr})),_r.jsxs(kA,{className:To(re.root,O),ownerState:$e,ref:p,...Tt,children:[Zt.cloneElement(u,yt),nt?_r.jsxs("div",{children:[tr,_r.jsxs(AA,{ownerState:$e,"aria-hidden":!0,className:re.asterisk,children:["","*"]})]}):tr]})});let Lx=0;function RA(c){const[m,p]=Zt.useState(c),T=c||m;return Zt.useEffect(()=>{m==null&&(Lx+=1,p(`mui-${Lx}`))},[m]),T}const zA={...M_},Dx=zA.useId;function zb(c){if(Dx!==void 0){const m=Dx();return c??m}return RA(c)}function LA(...c){return c.reduce((m,p)=>p==null?m:function(...P){m.apply(this,P),p.apply(this,P)},()=>{})}function DA(c){return Uu("MuiSvgIcon",c)}Ml("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const OA=c=>{const{color:m,fontSize:p,classes:T}=c,P={root:["root",m!=="inherit"&&`color${gi(m)}`,`fontSize${gi(p)}`]};return Rc(P,DA,T)},FA=Co("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(c,m)=>{const{ownerState:p}=c;return[m.root,p.color!=="inherit"&&m[`color${gi(p.color)}`],m[`fontSize${gi(p.fontSize)}`]]}})(ch(({theme:c})=>{var m,p,T,P,O,M,u,J,Y,ve,de,Te,le,we;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(P=(m=c.transitions)==null?void 0:m.create)==null?void 0:P.call(m,"fill",{duration:(T=(p=(c.vars??c).transitions)==null?void 0:p.duration)==null?void 0:T.shorter}),variants:[{props:xe=>!xe.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((M=(O=c.typography)==null?void 0:O.pxToRem)==null?void 0:M.call(O,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((J=(u=c.typography)==null?void 0:u.pxToRem)==null?void 0:J.call(u,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((ve=(Y=c.typography)==null?void 0:Y.pxToRem)==null?void 0:ve.call(Y,35))||"2.1875rem"}},...Object.entries((c.vars??c).palette).filter(([,xe])=>xe&&xe.main).map(([xe])=>{var Ze,mt;return{props:{color:xe},style:{color:(mt=(Ze=(c.vars??c).palette)==null?void 0:Ze[xe])==null?void 0:mt.main}}}),{props:{color:"action"},style:{color:(Te=(de=(c.vars??c).palette)==null?void 0:de.action)==null?void 0:Te.active}},{props:{color:"disabled"},style:{color:(we=(le=(c.vars??c).palette)==null?void 0:le.action)==null?void 0:we.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),rv=Zt.forwardRef(function(m,p){const T=hh({props:m,name:"MuiSvgIcon"}),{children:P,className:O,color:M="inherit",component:u="svg",fontSize:J="medium",htmlColor:Y,inheritViewBox:ve=!1,titleAccess:de,viewBox:Te="0 0 24 24",...le}=T,we=Zt.isValidElement(P)&&P.type==="svg",xe={...T,color:M,component:u,fontSize:J,instanceFontSize:m.fontSize,inheritViewBox:ve,viewBox:Te,hasSvgAsChild:we},Ze={};ve||(Ze.viewBox=Te);const mt=OA(xe);return _r.jsxs(FA,{as:u,className:To(mt.root,O),focusable:"false",color:Y,"aria-hidden":de?void 0:!0,role:de?"img":void 0,ref:p,...Ze,...le,...we&&P.props,ownerState:xe,children:[we?P.props.children:P,de?_r.jsx("title",{children:de}):null]})});rv.muiName="SvgIcon";function Ay(c,m){function p(T,P){return _r.jsx(rv,{"data-testid":void 0,ref:P,...T,children:c})}return p.muiName=rv.muiName,Zt.memo(Zt.forwardRef(p))}function Lb(c){const{controlled:m,default:p,name:T,state:P="value"}=c,{current:O}=Zt.useRef(m!==void 0),[M,u]=Zt.useState(p),J=O?m:M,Y=Zt.useCallback(ve=>{O||u(ve)},[]);return[J,Y]}function BA(c){return Uu("PrivateSwitchBase",c)}Ml("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const NA=c=>{const{classes:m,checked:p,disabled:T,edge:P}=c,O={root:["root",p&&"checked",T&&"disabled",P&&`edge${gi(P)}`],input:["input"]};return Rc(O,BA,m)},$A=Co(Fv)({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:c,ownerState:m})=>c==="start"&&m.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:c,ownerState:m})=>c==="end"&&m.size!=="small",style:{marginRight:-12}}]}),jA=Co("input",{shouldForwardProp:um})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),UA=Zt.forwardRef(function(m,p){const{autoFocus:T,checked:P,checkedIcon:O,defaultChecked:M,disabled:u,disableFocusRipple:J=!1,edge:Y=!1,icon:ve,id:de,inputProps:Te,inputRef:le,name:we,onBlur:xe,onChange:Ze,onFocus:mt,readOnly:kt,required:Tt=!1,tabIndex:Je,type:Qe,value:nt,slots:yt={},slotProps:ze={},...$e}=m,[re,it]=Lb({controlled:P,default:!!M,name:"SwitchBase",state:"checked"}),st=sg(),zt=At=>{mt&&mt(At),st&&st.onFocus&&st.onFocus(At)},tr=At=>{xe&&xe(At),st&&st.onBlur&&st.onBlur(At)},Cr=At=>{if(At.nativeEvent.defaultPrevented)return;const ir=At.target.checked;it(ir),Ze&&Ze(At,ir)};let xr=u;st&&typeof xr>"u"&&(xr=st.disabled);const or=Qe==="checkbox"||Qe==="radio",xt={...m,checked:re,disabled:xr,disableFocusRipple:J,edge:Y},Pt=NA(xt),Wt={slots:yt,slotProps:{input:Te,...ze}},[Oe,ct]=fy("root",{ref:p,elementType:$A,className:Pt.root,shouldForwardComponentProp:!0,externalForwardedProps:{...Wt,component:"span",...$e},getSlotProps:At=>({...At,onFocus:ir=>{var Sr;(Sr=At.onFocus)==null||Sr.call(At,ir),zt(ir)},onBlur:ir=>{var Sr;(Sr=At.onBlur)==null||Sr.call(At,ir),tr(ir)}}),ownerState:xt,additionalProps:{centerRipple:!0,focusRipple:!J,disabled:xr,role:void 0,tabIndex:null}}),[Ut,ur]=fy("input",{ref:le,elementType:jA,className:Pt.input,externalForwardedProps:Wt,getSlotProps:At=>({...At,onChange:ir=>{var Sr;(Sr=At.onChange)==null||Sr.call(At,ir),Cr(ir)}}),ownerState:xt,additionalProps:{autoFocus:T,checked:P,defaultChecked:M,disabled:xr,id:or?de:void 0,name:we,readOnly:kt,required:Tt,tabIndex:Je,type:Qe,...Qe==="checkbox"&&nt===void 0?{}:{value:nt}}});return _r.jsxs(Oe,{...ct,children:[_r.jsx(Ut,{...ur}),re?O:ve]})}),VA=Ay(_r.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),ZA=Ay(_r.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"})),GA=Co("span",{shouldForwardProp:um})({position:"relative",display:"flex"}),WA=Co(VA)({transform:"scale(1)"}),HA=Co(ZA)(ch(({theme:c})=>({left:0,position:"absolute",transform:"scale(0)",transition:c.transitions.create("transform",{easing:c.transitions.easing.easeIn,duration:c.transitions.duration.shortest}),variants:[{props:{checked:!0},style:{transform:"scale(1)",transition:c.transitions.create("transform",{easing:c.transitions.easing.easeOut,duration:c.transitions.duration.shortest})}}]})));function Db(c){const{checked:m=!1,classes:p={},fontSize:T}=c,P={...c,checked:m};return _r.jsxs(GA,{className:p.root,ownerState:P,children:[_r.jsx(WA,{fontSize:T,className:p.background,ownerState:P}),_r.jsx(HA,{fontSize:T,className:p.dot,ownerState:P})]})}const Ob=Zt.createContext(void 0);function qA(){return Zt.useContext(Ob)}function KA(c){return Uu("MuiRadio",c)}const Ox=Ml("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),XA=c=>{const{classes:m,color:p,size:T}=c,P={root:["root",`color${gi(p)}`,T!=="medium"&&`size${gi(T)}`]};return{...m,...Rc(P,KA,m)}},YA=Co(UA,{shouldForwardProp:c=>um(c)||c==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(c,m)=>{const{ownerState:p}=c;return[m.root,p.size!=="medium"&&m[`size${gi(p.size)}`],m[`color${gi(p.color)}`]]}})(ch(({theme:c})=>({color:(c.vars||c).palette.text.secondary,[`&.${Ox.disabled}`]:{color:(c.vars||c).palette.action.disabled},variants:[{props:{color:"default",disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:c.vars?`rgba(${c.vars.palette.action.activeChannel} / ${c.vars.palette.action.hoverOpacity})`:ah(c.palette.action.active,c.palette.action.hoverOpacity)}}},...Object.entries(c.palette).filter(sm()).map(([m])=>({props:{color:m,disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:c.vars?`rgba(${c.vars.palette[m].mainChannel} / ${c.vars.palette.action.hoverOpacity})`:ah(c.palette[m].main,c.palette.action.hoverOpacity)}}})),...Object.entries(c.palette).filter(sm()).map(([m])=>({props:{color:m,disabled:!1},style:{[`&.${Ox.checked}`]:{color:(c.vars||c).palette[m].main}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]})));function QA(c,m){return typeof m=="object"&&m!==null?c===m:String(c)===String(m)}const JA=_r.jsx(Db,{checked:!0}),eR=_r.jsx(Db,{}),Fx=Zt.forwardRef(function(m,p){const T=hh({props:m,name:"MuiRadio"}),{checked:P,checkedIcon:O=JA,color:M="primary",icon:u=eR,name:J,onChange:Y,size:ve="medium",className:de,disabled:Te,disableRipple:le=!1,slots:we={},slotProps:xe={},inputProps:Ze,...mt}=T,kt=sg();let Tt=Te;kt&&typeof Tt>"u"&&(Tt=kt.disabled),Tt??(Tt=!1);const Je={...T,disabled:Tt,disableRipple:le,color:M,size:ve},Qe=XA(Je),nt=qA();let yt=P;const ze=LA(Y,nt&&nt.onChange);let $e=J;nt&&(typeof yt>"u"&&(yt=QA(nt.value,T.value)),typeof $e>"u"&&($e=nt.name));const re=xe.input??Ze,[it,st]=fy("root",{ref:p,elementType:YA,className:To(Qe.root,de),shouldForwardComponentProp:!0,externalForwardedProps:{slots:we,slotProps:xe,...mt},getSlotProps:zt=>({...zt,onChange:(tr,...Cr)=>{var xr;(xr=zt.onChange)==null||xr.call(zt,tr,...Cr),ze(tr,...Cr)}}),ownerState:Je,additionalProps:{type:"radio",icon:Zt.cloneElement(u,{fontSize:u.props.fontSize??ve}),checkedIcon:Zt.cloneElement(O,{fontSize:O.props.fontSize??ve}),disabled:Tt,name:$e,checked:yt,slots:we,slotProps:{input:typeof re=="function"?re(Je):re}}});return _r.jsx(it,{...st,classes:Qe})});function tR(c){return Uu("MuiFormGroup",c)}Ml("MuiFormGroup",["root","row","error"]);const rR=c=>{const{classes:m,row:p,error:T}=c;return Rc({root:["root",p&&"row",T&&"error"]},tR,m)},nR=Co("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(c,m)=>{const{ownerState:p}=c;return[m.root,p.row&&m.row]}})({display:"flex",flexDirection:"column",flexWrap:"wrap",variants:[{props:{row:!0},style:{flexDirection:"row"}}]}),iR=Zt.forwardRef(function(m,p){const T=hh({props:m,name:"MuiFormGroup"}),{className:P,row:O=!1,...M}=T,u=sg(),J=vv({props:T,muiFormControl:u,states:["error"]}),Y={...T,row:O,error:J.error},ve=rR(Y);return _r.jsx(nR,{className:To(ve.root,P),ownerState:Y,ref:p,...M})});function oR(c){return Uu("MuiRadioGroup",c)}Ml("MuiRadioGroup",["root","row","error"]);const sR=c=>{const{classes:m,row:p,error:T}=c;return Rc({root:["root",p&&"row",T&&"error"]},oR,m)},aR=Zt.forwardRef(function(m,p){const{actions:T,children:P,className:O,defaultValue:M,name:u,onChange:J,value:Y,...ve}=m,de=Zt.useRef(null),Te=sR(m),[le,we]=Lb({controlled:Y,default:M,name:"RadioGroup"});Zt.useImperativeHandle(T,()=>({focus:()=>{let kt=de.current.querySelector("input:not(:disabled):checked");kt||(kt=de.current.querySelector("input:not(:disabled)")),kt&&kt.focus()}}),[]);const xe=Jm(p,de),Ze=zb(u),mt=Zt.useMemo(()=>({name:Ze,onChange(kt){we(kt.target.value),J&&J(kt,kt.target.value)},value:le}),[Ze,J,we,le]);return _r.jsx(Ob.Provider,{value:mt,children:_r.jsx(iR,{role:"radiogroup",ref:xe,className:To(Te.root,O),...ve,children:P})})}),lR=Ay(_r.jsx("path",{d:"M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"})),uR=Ay(_r.jsx("path",{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6z"}));function cR(c){return Uu("MuiCircularProgress",c)}Ml("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Uf=44,nv=hg`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,iv=hg`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,hR=typeof nv!="string"?Mv`
        animation: ${nv} 1.4s linear infinite;
      `:null,dR=typeof iv!="string"?Mv`
        animation: ${iv} 1.4s ease-in-out infinite;
      `:null,fR=c=>{const{classes:m,variant:p,color:T,disableShrink:P}=c,O={root:["root",p,`color${gi(T)}`],svg:["svg"],circle:["circle",`circle${gi(p)}`,P&&"circleDisableShrink"]};return Rc(O,cR,m)},pR=Co("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(c,m)=>{const{ownerState:p}=c;return[m.root,m[p.variant],m[`color${gi(p.color)}`]]}})(ch(({theme:c})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:c.transitions.create("transform")}},{props:{variant:"indeterminate"},style:hR||{animation:`${nv} 1.4s linear infinite`}},...Object.entries(c.palette).filter(sm()).map(([m])=>({props:{color:m},style:{color:(c.vars||c).palette[m].main}}))]}))),mR=Co("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),gR=Co("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(c,m)=>{const{ownerState:p}=c;return[m.circle,m[`circle${gi(p.variant)}`],p.disableShrink&&m.circleDisableShrink]}})(ch(({theme:c})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:c.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:m})=>m.variant==="indeterminate"&&!m.disableShrink,style:dR||{animation:`${iv} 1.4s ease-in-out infinite`}}]}))),yR=Zt.forwardRef(function(m,p){const T=hh({props:m,name:"MuiCircularProgress"}),{className:P,color:O="primary",disableShrink:M=!1,size:u=40,style:J,thickness:Y=3.6,value:ve=0,variant:de="indeterminate",...Te}=T,le={...T,color:O,disableShrink:M,size:u,thickness:Y,value:ve,variant:de},we=fR(le),xe={},Ze={},mt={};if(de==="determinate"){const kt=2*Math.PI*((Uf-Y)/2);xe.strokeDasharray=kt.toFixed(3),mt["aria-valuenow"]=Math.round(ve),xe.strokeDashoffset=`${((100-ve)/100*kt).toFixed(3)}px`,Ze.transform="rotate(-90deg)"}return _r.jsx(pR,{className:To(we.root,P),style:{width:u,height:u,...Ze,...J},ownerState:le,ref:p,role:"progressbar",...mt,...Te,children:_r.jsx(mR,{className:we.svg,ownerState:le,viewBox:`${Uf/2} ${Uf/2} ${Uf} ${Uf}`,children:_r.jsx(gR,{className:we.circle,style:xe,ownerState:le,cx:Uf,cy:Uf,r:(Uf-Y)/2,fill:"none",strokeWidth:Y})})})});function _R(c){return Uu("MuiButton",c)}const vp=Ml("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),vR=Zt.createContext({}),xR=Zt.createContext(void 0),bR=c=>{const{color:m,disableElevation:p,fullWidth:T,size:P,variant:O,loading:M,loadingPosition:u,classes:J}=c,Y={root:["root",M&&"loading",O,`${O}${gi(m)}`,`size${gi(P)}`,`${O}Size${gi(P)}`,`color${gi(m)}`,p&&"disableElevation",T&&"fullWidth",M&&`loadingPosition${gi(u)}`],startIcon:["icon","startIcon",`iconSize${gi(P)}`],endIcon:["icon","endIcon",`iconSize${gi(P)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},ve=Rc(Y,_R,J);return{...J,...ve}},Fb=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],wR=Co(Fv,{shouldForwardProp:c=>um(c)||c==="classes",name:"MuiButton",slot:"Root",overridesResolver:(c,m)=>{const{ownerState:p}=c;return[m.root,m[p.variant],m[`${p.variant}${gi(p.color)}`],m[`size${gi(p.size)}`],m[`${p.variant}Size${gi(p.size)}`],p.color==="inherit"&&m.colorInherit,p.disableElevation&&m.disableElevation,p.fullWidth&&m.fullWidth,p.loading&&m.loading]}})(ch(({theme:c})=>{const m=c.palette.mode==="light"?c.palette.grey[300]:c.palette.grey[800],p=c.palette.mode==="light"?c.palette.grey.A100:c.palette.grey[700];return{...c.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(c.vars||c).shape.borderRadius,transition:c.transitions.create(["background-color","box-shadow","border-color","color"],{duration:c.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${vp.disabled}`]:{color:(c.vars||c).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(c.vars||c).shadows[2],"&:hover":{boxShadow:(c.vars||c).shadows[4],"@media (hover: none)":{boxShadow:(c.vars||c).shadows[2]}},"&:active":{boxShadow:(c.vars||c).shadows[8]},[`&.${vp.focusVisible}`]:{boxShadow:(c.vars||c).shadows[6]},[`&.${vp.disabled}`]:{color:(c.vars||c).palette.action.disabled,boxShadow:(c.vars||c).shadows[0],backgroundColor:(c.vars||c).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${vp.disabled}`]:{border:`1px solid ${(c.vars||c).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(c.palette).filter(sm()).map(([T])=>({props:{color:T},style:{"--variant-textColor":(c.vars||c).palette[T].main,"--variant-outlinedColor":(c.vars||c).palette[T].main,"--variant-outlinedBorder":c.vars?`rgba(${c.vars.palette[T].mainChannel} / 0.5)`:ah(c.palette[T].main,.5),"--variant-containedColor":(c.vars||c).palette[T].contrastText,"--variant-containedBg":(c.vars||c).palette[T].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(c.vars||c).palette[T].dark,"--variant-textBg":c.vars?`rgba(${c.vars.palette[T].mainChannel} / ${c.vars.palette.action.hoverOpacity})`:ah(c.palette[T].main,c.palette.action.hoverOpacity),"--variant-outlinedBorder":(c.vars||c).palette[T].main,"--variant-outlinedBg":c.vars?`rgba(${c.vars.palette[T].mainChannel} / ${c.vars.palette.action.hoverOpacity})`:ah(c.palette[T].main,c.palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":c.vars?c.vars.palette.Button.inheritContainedBg:m,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":c.vars?c.vars.palette.Button.inheritContainedHoverBg:p,"--variant-textBg":c.vars?`rgba(${c.vars.palette.text.primaryChannel} / ${c.vars.palette.action.hoverOpacity})`:ah(c.palette.text.primary,c.palette.action.hoverOpacity),"--variant-outlinedBg":c.vars?`rgba(${c.vars.palette.text.primaryChannel} / ${c.vars.palette.action.hoverOpacity})`:ah(c.palette.text.primary,c.palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:c.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:c.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:c.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:c.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:c.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:c.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${vp.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${vp.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:c.transitions.create(["background-color","box-shadow","border-color"],{duration:c.transitions.duration.short}),[`&.${vp.loading}`]:{color:"transparent"}}}]}})),SR=Co("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(c,m)=>{const{ownerState:p}=c;return[m.startIcon,p.loading&&m.startIconLoadingStart,m[`iconSize${gi(p.size)}`]]}})(({theme:c})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:c.transitions.create(["opacity"],{duration:c.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...Fb]})),TR=Co("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(c,m)=>{const{ownerState:p}=c;return[m.endIcon,p.loading&&m.endIconLoadingEnd,m[`iconSize${gi(p.size)}`]]}})(({theme:c})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:c.transitions.create(["opacity"],{duration:c.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...Fb]})),CR=Co("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:c})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(c.vars||c).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),Bx=Co("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),PR=Zt.forwardRef(function(m,p){const T=Zt.useContext(vR),P=Zt.useContext(xR),O=hy(T,m),M=hh({props:O,name:"MuiButton"}),{children:u,color:J="primary",component:Y="button",className:ve,disabled:de=!1,disableElevation:Te=!1,disableFocusRipple:le=!1,endIcon:we,focusVisibleClassName:xe,fullWidth:Ze=!1,id:mt,loading:kt=null,loadingIndicator:Tt,loadingPosition:Je="center",size:Qe="medium",startIcon:nt,type:yt,variant:ze="text",...$e}=M,re=zb(mt),it=Tt??_r.jsx(yR,{"aria-labelledby":re,color:"inherit",size:16}),st={...M,color:J,component:Y,disabled:de,disableElevation:Te,disableFocusRipple:le,fullWidth:Ze,loading:kt,loadingIndicator:it,loadingPosition:Je,size:Qe,type:yt,variant:ze},zt=bR(st),tr=(nt||kt&&Je==="start")&&_r.jsx(SR,{className:zt.startIcon,ownerState:st,children:nt||_r.jsx(Bx,{className:zt.loadingIconPlaceholder,ownerState:st})}),Cr=(we||kt&&Je==="end")&&_r.jsx(TR,{className:zt.endIcon,ownerState:st,children:we||_r.jsx(Bx,{className:zt.loadingIconPlaceholder,ownerState:st})}),xr=P||"",or=typeof kt=="boolean"?_r.jsx("span",{className:zt.loadingWrapper,style:{display:"contents"},children:kt&&_r.jsx(CR,{className:zt.loadingIndicator,ownerState:st,children:it})}):null;return _r.jsxs(wR,{ownerState:st,className:To(T.className,zt.root,ve,xr),component:Y,disabled:de||kt,focusRipple:!le,focusVisibleClassName:To(zt.focusVisible,xe),ref:p,type:yt,id:kt?re:mt,...$e,classes:zt,children:[tr,Je!=="end"&&or,u,Je==="end"&&or,Cr]})});function ER(c){const{challenges:m,setChallenge:p,challenge:T,colorBy:P,setColorBy:O}=c,[M,u]=fu.useState([]),[J,Y]=fu.useState(!1);return Zt.useEffect(()=>{u(m.map(ve=>_r.jsx(SA,{value:ve.name,children:ve.name})))},[m]),_r.jsxs("div",{style:{position:"absolute",top:20,left:20,zIndex:1e3,width:"300px",backgroundColor:"white",padding:"10px",borderRadius:"8px",height:J?"30px":"auto",overflow:"hidden",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:[_r.jsx("div",{style:{width:"100%",textAlign:"right"},children:_r.jsxs(PR,{onClick:()=>Y(ve=>!ve),children:[!J&&_r.jsx(lR,{}),J&&_r.jsx(uR,{})]})}),_r.jsx("div",{style:{width:"300px",height:"200px",background:"url('/blitz-the-gap-bc-parks-map/logo.png') no-repeat",marginBottom:"10px",backgroundPosition:"center center",backgroundSize:"contain"}}),_r.jsx(Rx,{variant:"standard",sx:{m:1,minWidth:280},children:_r.jsxs(Rx,{sx:{marginTop:"15px"},children:[_r.jsx(Fk,{id:"row-radio-buttons-group-label",children:"Color by:"}),_r.jsxs(aR,{row:!0,"aria-labelledby":"row-radio-buttons-group-label",name:"row-radio-buttons-group",value:P,onChange:ve=>{O(ve.target.value)},children:[_r.jsx(zx,{value:"obsdens",control:_r.jsx(Fx,{}),label:"Number of observations"}),_r.jsx(zx,{value:"spdens",control:_r.jsx(Fx,{}),label:"Number of species"})]})]})})]})}const{useEffect:NR,useRef:$R}=fu;function IR(){const[c,m]=fu.useState("https://object-arbutus.cloud.computecanada.ca/bq-io/io/inat_canada_heatmaps/All_density_inat_100m.tif"),[p,T]=Zt.useState("All challenges"),[P,O]=Zt.useState("obsdens"),M=[{name:"All challenges",everywhere:!1},{name:"Conservation priorities (MayBAs)",everywhere:!1},{name:"Make a splash",everywhere:!1},{name:"Trailblazers",everywhere:!1},{name:"99 Percent",everywhere:!1},{name:"Revisit the past",everywhere:!1},{name:"Climate gaps",everywhere:!1},{name:"Birders, don't look up!",everywhere:!0},{name:"Getting Even",everywhere:!0},{name:"More than a Monarch",everywhere:!0},{name:"Missing Canadian Species",everywhere:!0}];return _r.jsxs(_r.Fragment,{children:[_r.jsx(ER,{challenges:M,challenge:p,setChallenge:T,colorBy:P,setColorBy:O}),_r.jsx(SE,{COGUrl:c,opacity:100,challenges:M,challenge:p,colorBy:P}),_r.jsx(AP,{effect:"solid",type:"dark",scrollHide:"true",event:"mousemove",eventOff:"mouseleave",delayHide:1e3})]})}const MR=document.getElementById("root"),kR=Nx.createRoot(MR);kR.render(_r.jsx(IR,{}));
