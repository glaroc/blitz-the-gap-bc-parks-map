var ow=Object.defineProperty;var sw=(c,m,p)=>m in c?ow(c,m,{enumerable:!0,configurable:!0,writable:!0,value:p}):c[m]=p;var Lm=(c,m,p)=>sw(c,typeof m!="symbol"?m+"":m,p);function aw(c,m){for(var p=0;p<m.length;p++){const T=m[p];if(typeof T!="string"&&!Array.isArray(T)){for(const P in T)if(P!=="default"&&!(P in c)){const D=Object.getOwnPropertyDescriptor(T,P);D&&Object.defineProperty(c,P,D.get?D:{enumerable:!0,get:()=>T[P]})}}}return Object.freeze(Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}))}(function(){const m=document.createElement("link").relList;if(m&&m.supports&&m.supports("modulepreload"))return;for(const P of document.querySelectorAll('link[rel="modulepreload"]'))T(P);new MutationObserver(P=>{for(const D of P)if(D.type==="childList")for(const M of D.addedNodes)M.tagName==="LINK"&&M.rel==="modulepreload"&&T(M)}).observe(document,{childList:!0,subtree:!0});function p(P){const D={};return P.integrity&&(D.integrity=P.integrity),P.referrerPolicy&&(D.referrerPolicy=P.referrerPolicy),P.crossOrigin==="use-credentials"?D.credentials="include":P.crossOrigin==="anonymous"?D.credentials="omit":D.credentials="same-origin",D}function T(P){if(P.ep)return;P.ep=!0;const D=p(P);fetch(P.href,D)}})();var Fg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function tg(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var qy={exports:{}},Dm={},Ky={exports:{}},Jn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $v;function lw(){if($v)return Jn;$v=1;var c=Symbol.for("react.element"),m=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),M=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),Y=Symbol.for("react.memo"),fe=Symbol.for("react.lazy"),he=Symbol.iterator;function Te(Fe){return Fe===null||typeof Fe!="object"?null:(Fe=he&&Fe[he]||Fe["@@iterator"],typeof Fe=="function"?Fe:null)}var ge={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},we=Object.assign,Ce={};function We(Fe,ht,Vt){this.props=Fe,this.context=ht,this.refs=Ce,this.updater=Vt||ge}We.prototype.isReactComponent={},We.prototype.setState=function(Fe,ht){if(typeof Fe!="object"&&typeof Fe!="function"&&Fe!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Fe,ht,"setState")},We.prototype.forceUpdate=function(Fe){this.updater.enqueueForceUpdate(this,Fe,"forceUpdate")};function gt(){}gt.prototype=We.prototype;function At(Fe,ht,Vt){this.props=Fe,this.context=ht,this.refs=Ce,this.updater=Vt||ge}var Ct=At.prototype=new gt;Ct.constructor=At,we(Ct,We.prototype),Ct.isPureReactComponent=!0;var et=Array.isArray,Je=Object.prototype.hasOwnProperty,it={current:null},_t={key:!0,ref:!0,__self:!0,__source:!0};function Le(Fe,ht,Vt){var cr,Rt={},or=null,Tr=null;if(ht!=null)for(cr in ht.ref!==void 0&&(Tr=ht.ref),ht.key!==void 0&&(or=""+ht.key),ht)Je.call(ht,cr)&&!_t.hasOwnProperty(cr)&&(Rt[cr]=ht[cr]);var pr=arguments.length-2;if(pr===1)Rt.children=Vt;else if(1<pr){for(var mr=Array(pr),Jr=0;Jr<pr;Jr++)mr[Jr]=arguments[Jr+2];Rt.children=mr}if(Fe&&Fe.defaultProps)for(cr in pr=Fe.defaultProps,pr)Rt[cr]===void 0&&(Rt[cr]=pr[cr]);return{$$typeof:c,type:Fe,key:or,ref:Tr,props:Rt,_owner:it.current}}function je(Fe,ht){return{$$typeof:c,type:Fe.type,key:ht,ref:Fe.ref,props:Fe.props,_owner:Fe._owner}}function ne(Fe){return typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===c}function ot(Fe){var ht={"=":"=0",":":"=2"};return"$"+Fe.replace(/[=:]/g,function(Vt){return ht[Vt]})}var at=/\/+/g;function Lt(Fe,ht){return typeof Fe=="object"&&Fe!==null&&Fe.key!=null?ot(""+Fe.key):ht.toString(36)}function rr(Fe,ht,Vt,cr,Rt){var or=typeof Fe;(or==="undefined"||or==="boolean")&&(Fe=null);var Tr=!1;if(Fe===null)Tr=!0;else switch(or){case"string":case"number":Tr=!0;break;case"object":switch(Fe.$$typeof){case c:case m:Tr=!0}}if(Tr)return Tr=Fe,Rt=Rt(Tr),Fe=cr===""?"."+Lt(Tr,0):cr,et(Rt)?(Vt="",Fe!=null&&(Vt=Fe.replace(at,"$&/")+"/"),rr(Rt,ht,Vt,"",function(Jr){return Jr})):Rt!=null&&(ne(Rt)&&(Rt=je(Rt,Vt+(!Rt.key||Tr&&Tr.key===Rt.key?"":(""+Rt.key).replace(at,"$&/")+"/")+Fe)),ht.push(Rt)),1;if(Tr=0,cr=cr===""?".":cr+":",et(Fe))for(var pr=0;pr<Fe.length;pr++){or=Fe[pr];var mr=cr+Lt(or,pr);Tr+=rr(or,ht,Vt,mr,Rt)}else if(mr=Te(Fe),typeof mr=="function")for(Fe=mr.call(Fe),pr=0;!(or=Fe.next()).done;)or=or.value,mr=cr+Lt(or,pr++),Tr+=rr(or,ht,Vt,mr,Rt);else if(or==="object")throw ht=String(Fe),Error("Objects are not valid as a React child (found: "+(ht==="[object Object]"?"object with keys {"+Object.keys(Fe).join(", ")+"}":ht)+"). If you meant to render a collection of children, use an array instead.");return Tr}function Pr(Fe,ht,Vt){if(Fe==null)return Fe;var cr=[],Rt=0;return rr(Fe,cr,"","",function(or){return ht.call(Vt,or,Rt++)}),cr}function xr(Fe){if(Fe._status===-1){var ht=Fe._result;ht=ht(),ht.then(function(Vt){(Fe._status===0||Fe._status===-1)&&(Fe._status=1,Fe._result=Vt)},function(Vt){(Fe._status===0||Fe._status===-1)&&(Fe._status=2,Fe._result=Vt)}),Fe._status===-1&&(Fe._status=0,Fe._result=ht)}if(Fe._status===1)return Fe._result.default;throw Fe._result}var sr={current:null},bt={transition:null},Et={ReactCurrentDispatcher:sr,ReactCurrentBatchConfig:bt,ReactCurrentOwner:it};function Ht(){throw Error("act(...) is not supported in production builds of React.")}return Jn.Children={map:Pr,forEach:function(Fe,ht,Vt){Pr(Fe,function(){ht.apply(this,arguments)},Vt)},count:function(Fe){var ht=0;return Pr(Fe,function(){ht++}),ht},toArray:function(Fe){return Pr(Fe,function(ht){return ht})||[]},only:function(Fe){if(!ne(Fe))throw Error("React.Children.only expected to receive a single React element child.");return Fe}},Jn.Component=We,Jn.Fragment=p,Jn.Profiler=P,Jn.PureComponent=At,Jn.StrictMode=T,Jn.Suspense=te,Jn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Et,Jn.act=Ht,Jn.cloneElement=function(Fe,ht,Vt){if(Fe==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Fe+".");var cr=we({},Fe.props),Rt=Fe.key,or=Fe.ref,Tr=Fe._owner;if(ht!=null){if(ht.ref!==void 0&&(or=ht.ref,Tr=it.current),ht.key!==void 0&&(Rt=""+ht.key),Fe.type&&Fe.type.defaultProps)var pr=Fe.type.defaultProps;for(mr in ht)Je.call(ht,mr)&&!_t.hasOwnProperty(mr)&&(cr[mr]=ht[mr]===void 0&&pr!==void 0?pr[mr]:ht[mr])}var mr=arguments.length-2;if(mr===1)cr.children=Vt;else if(1<mr){pr=Array(mr);for(var Jr=0;Jr<mr;Jr++)pr[Jr]=arguments[Jr+2];cr.children=pr}return{$$typeof:c,type:Fe.type,key:Rt,ref:or,props:cr,_owner:Tr}},Jn.createContext=function(Fe){return Fe={$$typeof:M,_currentValue:Fe,_currentValue2:Fe,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Fe.Provider={$$typeof:D,_context:Fe},Fe.Consumer=Fe},Jn.createElement=Le,Jn.createFactory=function(Fe){var ht=Le.bind(null,Fe);return ht.type=Fe,ht},Jn.createRef=function(){return{current:null}},Jn.forwardRef=function(Fe){return{$$typeof:u,render:Fe}},Jn.isValidElement=ne,Jn.lazy=function(Fe){return{$$typeof:fe,_payload:{_status:-1,_result:Fe},_init:xr}},Jn.memo=function(Fe,ht){return{$$typeof:Y,type:Fe,compare:ht===void 0?null:ht}},Jn.startTransition=function(Fe){var ht=bt.transition;bt.transition={};try{Fe()}finally{bt.transition=ht}},Jn.unstable_act=Ht,Jn.useCallback=function(Fe,ht){return sr.current.useCallback(Fe,ht)},Jn.useContext=function(Fe){return sr.current.useContext(Fe)},Jn.useDebugValue=function(){},Jn.useDeferredValue=function(Fe){return sr.current.useDeferredValue(Fe)},Jn.useEffect=function(Fe,ht){return sr.current.useEffect(Fe,ht)},Jn.useId=function(){return sr.current.useId()},Jn.useImperativeHandle=function(Fe,ht,Vt){return sr.current.useImperativeHandle(Fe,ht,Vt)},Jn.useInsertionEffect=function(Fe,ht){return sr.current.useInsertionEffect(Fe,ht)},Jn.useLayoutEffect=function(Fe,ht){return sr.current.useLayoutEffect(Fe,ht)},Jn.useMemo=function(Fe,ht){return sr.current.useMemo(Fe,ht)},Jn.useReducer=function(Fe,ht,Vt){return sr.current.useReducer(Fe,ht,Vt)},Jn.useRef=function(Fe){return sr.current.useRef(Fe)},Jn.useState=function(Fe){return sr.current.useState(Fe)},Jn.useSyncExternalStore=function(Fe,ht,Vt){return sr.current.useSyncExternalStore(Fe,ht,Vt)},Jn.useTransition=function(){return sr.current.useTransition()},Jn.version="18.3.1",Jn}var jv;function rg(){return jv||(jv=1,Ky.exports=lw()),Ky.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uv;function uw(){if(Uv)return Dm;Uv=1;var c=rg(),m=Symbol.for("react.element"),p=Symbol.for("react.fragment"),T=Object.prototype.hasOwnProperty,P=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,D={key:!0,ref:!0,__self:!0,__source:!0};function M(u,te,Y){var fe,he={},Te=null,ge=null;Y!==void 0&&(Te=""+Y),te.key!==void 0&&(Te=""+te.key),te.ref!==void 0&&(ge=te.ref);for(fe in te)T.call(te,fe)&&!D.hasOwnProperty(fe)&&(he[fe]=te[fe]);if(u&&u.defaultProps)for(fe in te=u.defaultProps,te)he[fe]===void 0&&(he[fe]=te[fe]);return{$$typeof:m,type:u,key:Te,ref:ge,props:he,_owner:P.current}}return Dm.Fragment=p,Dm.jsx=M,Dm.jsxs=M,Dm}var Vv;function cw(){return Vv||(Vv=1,qy.exports=uw()),qy.exports}var wr=cw(),Bg={},Xy={exports:{}},$u={},Yy={exports:{}},Qy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zv;function hw(){return Zv||(Zv=1,function(c){function m(bt,Et){var Ht=bt.length;bt.push(Et);e:for(;0<Ht;){var Fe=Ht-1>>>1,ht=bt[Fe];if(0<P(ht,Et))bt[Fe]=Et,bt[Ht]=ht,Ht=Fe;else break e}}function p(bt){return bt.length===0?null:bt[0]}function T(bt){if(bt.length===0)return null;var Et=bt[0],Ht=bt.pop();if(Ht!==Et){bt[0]=Ht;e:for(var Fe=0,ht=bt.length,Vt=ht>>>1;Fe<Vt;){var cr=2*(Fe+1)-1,Rt=bt[cr],or=cr+1,Tr=bt[or];if(0>P(Rt,Ht))or<ht&&0>P(Tr,Rt)?(bt[Fe]=Tr,bt[or]=Ht,Fe=or):(bt[Fe]=Rt,bt[cr]=Ht,Fe=cr);else if(or<ht&&0>P(Tr,Ht))bt[Fe]=Tr,bt[or]=Ht,Fe=or;else break e}}return Et}function P(bt,Et){var Ht=bt.sortIndex-Et.sortIndex;return Ht!==0?Ht:bt.id-Et.id}if(typeof performance=="object"&&typeof performance.now=="function"){var D=performance;c.unstable_now=function(){return D.now()}}else{var M=Date,u=M.now();c.unstable_now=function(){return M.now()-u}}var te=[],Y=[],fe=1,he=null,Te=3,ge=!1,we=!1,Ce=!1,We=typeof setTimeout=="function"?setTimeout:null,gt=typeof clearTimeout=="function"?clearTimeout:null,At=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Ct(bt){for(var Et=p(Y);Et!==null;){if(Et.callback===null)T(Y);else if(Et.startTime<=bt)T(Y),Et.sortIndex=Et.expirationTime,m(te,Et);else break;Et=p(Y)}}function et(bt){if(Ce=!1,Ct(bt),!we)if(p(te)!==null)we=!0,xr(Je);else{var Et=p(Y);Et!==null&&sr(et,Et.startTime-bt)}}function Je(bt,Et){we=!1,Ce&&(Ce=!1,gt(Le),Le=-1),ge=!0;var Ht=Te;try{for(Ct(Et),he=p(te);he!==null&&(!(he.expirationTime>Et)||bt&&!ot());){var Fe=he.callback;if(typeof Fe=="function"){he.callback=null,Te=he.priorityLevel;var ht=Fe(he.expirationTime<=Et);Et=c.unstable_now(),typeof ht=="function"?he.callback=ht:he===p(te)&&T(te),Ct(Et)}else T(te);he=p(te)}if(he!==null)var Vt=!0;else{var cr=p(Y);cr!==null&&sr(et,cr.startTime-Et),Vt=!1}return Vt}finally{he=null,Te=Ht,ge=!1}}var it=!1,_t=null,Le=-1,je=5,ne=-1;function ot(){return!(c.unstable_now()-ne<je)}function at(){if(_t!==null){var bt=c.unstable_now();ne=bt;var Et=!0;try{Et=_t(!0,bt)}finally{Et?Lt():(it=!1,_t=null)}}else it=!1}var Lt;if(typeof At=="function")Lt=function(){At(at)};else if(typeof MessageChannel<"u"){var rr=new MessageChannel,Pr=rr.port2;rr.port1.onmessage=at,Lt=function(){Pr.postMessage(null)}}else Lt=function(){We(at,0)};function xr(bt){_t=bt,it||(it=!0,Lt())}function sr(bt,Et){Le=We(function(){bt(c.unstable_now())},Et)}c.unstable_IdlePriority=5,c.unstable_ImmediatePriority=1,c.unstable_LowPriority=4,c.unstable_NormalPriority=3,c.unstable_Profiling=null,c.unstable_UserBlockingPriority=2,c.unstable_cancelCallback=function(bt){bt.callback=null},c.unstable_continueExecution=function(){we||ge||(we=!0,xr(Je))},c.unstable_forceFrameRate=function(bt){0>bt||125<bt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):je=0<bt?Math.floor(1e3/bt):5},c.unstable_getCurrentPriorityLevel=function(){return Te},c.unstable_getFirstCallbackNode=function(){return p(te)},c.unstable_next=function(bt){switch(Te){case 1:case 2:case 3:var Et=3;break;default:Et=Te}var Ht=Te;Te=Et;try{return bt()}finally{Te=Ht}},c.unstable_pauseExecution=function(){},c.unstable_requestPaint=function(){},c.unstable_runWithPriority=function(bt,Et){switch(bt){case 1:case 2:case 3:case 4:case 5:break;default:bt=3}var Ht=Te;Te=bt;try{return Et()}finally{Te=Ht}},c.unstable_scheduleCallback=function(bt,Et,Ht){var Fe=c.unstable_now();switch(typeof Ht=="object"&&Ht!==null?(Ht=Ht.delay,Ht=typeof Ht=="number"&&0<Ht?Fe+Ht:Fe):Ht=Fe,bt){case 1:var ht=-1;break;case 2:ht=250;break;case 5:ht=1073741823;break;case 4:ht=1e4;break;default:ht=5e3}return ht=Ht+ht,bt={id:fe++,callback:Et,priorityLevel:bt,startTime:Ht,expirationTime:ht,sortIndex:-1},Ht>Fe?(bt.sortIndex=Ht,m(Y,bt),p(te)===null&&bt===p(Y)&&(Ce?(gt(Le),Le=-1):Ce=!0,sr(et,Ht-Fe))):(bt.sortIndex=ht,m(te,bt),we||ge||(we=!0,xr(Je))),bt},c.unstable_shouldYield=ot,c.unstable_wrapCallback=function(bt){var Et=Te;return function(){var Ht=Te;Te=Et;try{return bt.apply(this,arguments)}finally{Te=Ht}}}}(Qy)),Qy}var Gv;function dw(){return Gv||(Gv=1,Yy.exports=hw()),Yy.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wv;function fw(){if(Wv)return $u;Wv=1;var c=rg(),m=dw();function p(o){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+o,x=1;x<arguments.length;x++)l+="&args[]="+encodeURIComponent(arguments[x]);return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var T=new Set,P={};function D(o,l){M(o,l),M(o+"Capture",l)}function M(o,l){for(P[o]=l,o=0;o<l.length;o++)T.add(l[o])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),te=Object.prototype.hasOwnProperty,Y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,fe={},he={};function Te(o){return te.call(he,o)?!0:te.call(fe,o)?!1:Y.test(o)?he[o]=!0:(fe[o]=!0,!1)}function ge(o,l,x,C){if(x!==null&&x.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return C?!1:x!==null?!x.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function we(o,l,x,C){if(l===null||typeof l>"u"||ge(o,l,x,C))return!0;if(C)return!1;if(x!==null)switch(x.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function Ce(o,l,x,C,z,V,se){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=C,this.attributeNamespace=z,this.mustUseProperty=x,this.propertyName=o,this.type=l,this.sanitizeURL=V,this.removeEmptyString=se}var We={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){We[o]=new Ce(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var l=o[0];We[l]=new Ce(l,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){We[o]=new Ce(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){We[o]=new Ce(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){We[o]=new Ce(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){We[o]=new Ce(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){We[o]=new Ce(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){We[o]=new Ce(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){We[o]=new Ce(o,5,!1,o.toLowerCase(),null,!1,!1)});var gt=/[\-:]([a-z])/g;function At(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var l=o.replace(gt,At);We[l]=new Ce(l,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var l=o.replace(gt,At);We[l]=new Ce(l,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var l=o.replace(gt,At);We[l]=new Ce(l,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){We[o]=new Ce(o,1,!1,o.toLowerCase(),null,!1,!1)}),We.xlinkHref=new Ce("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){We[o]=new Ce(o,1,!1,o.toLowerCase(),null,!0,!0)});function Ct(o,l,x,C){var z=We.hasOwnProperty(l)?We[l]:null;(z!==null?z.type!==0:C||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(we(l,x,z,C)&&(x=null),C||z===null?Te(l)&&(x===null?o.removeAttribute(l):o.setAttribute(l,""+x)):z.mustUseProperty?o[z.propertyName]=x===null?z.type===3?!1:"":x:(l=z.attributeName,C=z.attributeNamespace,x===null?o.removeAttribute(l):(z=z.type,x=z===3||z===4&&x===!0?"":""+x,C?o.setAttributeNS(C,l,x):o.setAttribute(l,x))))}var et=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Je=Symbol.for("react.element"),it=Symbol.for("react.portal"),_t=Symbol.for("react.fragment"),Le=Symbol.for("react.strict_mode"),je=Symbol.for("react.profiler"),ne=Symbol.for("react.provider"),ot=Symbol.for("react.context"),at=Symbol.for("react.forward_ref"),Lt=Symbol.for("react.suspense"),rr=Symbol.for("react.suspense_list"),Pr=Symbol.for("react.memo"),xr=Symbol.for("react.lazy"),sr=Symbol.for("react.offscreen"),bt=Symbol.iterator;function Et(o){return o===null||typeof o!="object"?null:(o=bt&&o[bt]||o["@@iterator"],typeof o=="function"?o:null)}var Ht=Object.assign,Fe;function ht(o){if(Fe===void 0)try{throw Error()}catch(x){var l=x.stack.trim().match(/\n( *(at )?)/);Fe=l&&l[1]||""}return`
`+Fe+o}var Vt=!1;function cr(o,l){if(!o||Vt)return"";Vt=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(It){var C=It}Reflect.construct(o,[],l)}else{try{l.call()}catch(It){C=It}o.call(l.prototype)}else{try{throw Error()}catch(It){C=It}o()}}catch(It){if(It&&C&&typeof It.stack=="string"){for(var z=It.stack.split(`
`),V=C.stack.split(`
`),se=z.length-1,Re=V.length-1;1<=se&&0<=Re&&z[se]!==V[Re];)Re--;for(;1<=se&&0<=Re;se--,Re--)if(z[se]!==V[Re]){if(se!==1||Re!==1)do if(se--,Re--,0>Re||z[se]!==V[Re]){var Ge=`
`+z[se].replace(" at new "," at ");return o.displayName&&Ge.includes("<anonymous>")&&(Ge=Ge.replace("<anonymous>",o.displayName)),Ge}while(1<=se&&0<=Re);break}}}finally{Vt=!1,Error.prepareStackTrace=x}return(o=o?o.displayName||o.name:"")?ht(o):""}function Rt(o){switch(o.tag){case 5:return ht(o.type);case 16:return ht("Lazy");case 13:return ht("Suspense");case 19:return ht("SuspenseList");case 0:case 2:case 15:return o=cr(o.type,!1),o;case 11:return o=cr(o.type.render,!1),o;case 1:return o=cr(o.type,!0),o;default:return""}}function or(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case _t:return"Fragment";case it:return"Portal";case je:return"Profiler";case Le:return"StrictMode";case Lt:return"Suspense";case rr:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case ot:return(o.displayName||"Context")+".Consumer";case ne:return(o._context.displayName||"Context")+".Provider";case at:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case Pr:return l=o.displayName||null,l!==null?l:or(o.type)||"Memo";case xr:l=o._payload,o=o._init;try{return or(o(l))}catch{}}return null}function Tr(o){var l=o.type;switch(o.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=l.render,o=o.displayName||o.name||"",l.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return or(l);case 8:return l===Le?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function pr(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function mr(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Jr(o){var l=mr(o)?"checked":"value",x=Object.getOwnPropertyDescriptor(o.constructor.prototype,l),C=""+o[l];if(!o.hasOwnProperty(l)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var z=x.get,V=x.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return z.call(this)},set:function(se){C=""+se,V.call(this,se)}}),Object.defineProperty(o,l,{enumerable:x.enumerable}),{getValue:function(){return C},setValue:function(se){C=""+se},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function Cr(o){o._valueTracker||(o._valueTracker=Jr(o))}function rn(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var x=l.getValue(),C="";return o&&(C=mr(o)?o.checked?"true":"false":o.value),o=C,o!==x?(l.setValue(o),!0):!1}function jr(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function br(o,l){var x=l.checked;return Ht({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:x??o._wrapperState.initialChecked})}function on(o,l){var x=l.defaultValue==null?"":l.defaultValue,C=l.checked!=null?l.checked:l.defaultChecked;x=pr(l.value!=null?l.value:x),o._wrapperState={initialChecked:C,initialValue:x,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function qr(o,l){l=l.checked,l!=null&&Ct(o,"checked",l,!1)}function fn(o,l){qr(o,l);var x=pr(l.value),C=l.type;if(x!=null)C==="number"?(x===0&&o.value===""||o.value!=x)&&(o.value=""+x):o.value!==""+x&&(o.value=""+x);else if(C==="submit"||C==="reset"){o.removeAttribute("value");return}l.hasOwnProperty("value")?wn(o,l.type,x):l.hasOwnProperty("defaultValue")&&wn(o,l.type,pr(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(o.defaultChecked=!!l.defaultChecked)}function sn(o,l,x){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var C=l.type;if(!(C!=="submit"&&C!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+o._wrapperState.initialValue,x||l===o.value||(o.value=l),o.defaultValue=l}x=o.name,x!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,x!==""&&(o.name=x)}function wn(o,l,x){(l!=="number"||jr(o.ownerDocument)!==o)&&(x==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+x&&(o.defaultValue=""+x))}var an=Array.isArray;function An(o,l,x,C){if(o=o.options,l){l={};for(var z=0;z<x.length;z++)l["$"+x[z]]=!0;for(x=0;x<o.length;x++)z=l.hasOwnProperty("$"+o[x].value),o[x].selected!==z&&(o[x].selected=z),z&&C&&(o[x].defaultSelected=!0)}else{for(x=""+pr(x),l=null,z=0;z<o.length;z++){if(o[z].value===x){o[z].selected=!0,C&&(o[z].defaultSelected=!0);return}l!==null||o[z].disabled||(l=o[z])}l!==null&&(l.selected=!0)}}function Sr(o,l){if(l.dangerouslySetInnerHTML!=null)throw Error(p(91));return Ht({},l,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function Vn(o,l){var x=l.value;if(x==null){if(x=l.children,l=l.defaultValue,x!=null){if(l!=null)throw Error(p(92));if(an(x)){if(1<x.length)throw Error(p(93));x=x[0]}l=x}l==null&&(l=""),x=l}o._wrapperState={initialValue:pr(x)}}function Hn(o,l){var x=pr(l.value),C=pr(l.defaultValue);x!=null&&(x=""+x,x!==o.value&&(o.value=x),l.defaultValue==null&&o.defaultValue!==x&&(o.defaultValue=x)),C!=null&&(o.defaultValue=""+C)}function Ti(o){var l=o.textContent;l===o._wrapperState.initialValue&&l!==""&&l!==null&&(o.value=l)}function ei(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qn(o,l){return o==null||o==="http://www.w3.org/1999/xhtml"?ei(l):o==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var Nn,eo=function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,x,C,z){MSApp.execUnsafeLocalFunction(function(){return o(l,x,C,z)})}:o}(function(o,l){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=l;else{for(Nn=Nn||document.createElement("div"),Nn.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=Nn.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;l.firstChild;)o.appendChild(l.firstChild)}});function Wi(o,l){if(l){var x=o.firstChild;if(x&&x===o.lastChild&&x.nodeType===3){x.nodeValue=l;return}}o.textContent=l}var Zi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ti=["Webkit","ms","Moz","O"];Object.keys(Zi).forEach(function(o){ti.forEach(function(l){l=l+o.charAt(0).toUpperCase()+o.substring(1),Zi[l]=Zi[o]})});function oi(o,l,x){return l==null||typeof l=="boolean"||l===""?"":x||typeof l!="number"||l===0||Zi.hasOwnProperty(o)&&Zi[o]?(""+l).trim():l+"px"}function go(o,l){o=o.style;for(var x in l)if(l.hasOwnProperty(x)){var C=x.indexOf("--")===0,z=oi(x,l[x],C);x==="float"&&(x="cssFloat"),C?o.setProperty(x,z):o[x]=z}}var tt=Ht({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ae(o,l){if(l){if(tt[o]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(p(137,o));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(p(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(p(61))}if(l.style!=null&&typeof l.style!="object")throw Error(p(62))}}function le(o,l){if(o.indexOf("-")===-1)return typeof l.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _e=null;function Me(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Ve=null,pe=null,Ke=null;function He(o){if(o=qo(o)){if(typeof Ve!="function")throw Error(p(280));var l=o.stateNode;l&&(l=tu(l),Ve(o.stateNode,o.type,l))}}function nt(o){pe?Ke?Ke.push(o):Ke=[o]:pe=o}function ft(){if(pe){var o=pe,l=Ke;if(Ke=pe=null,He(o),l)for(o=0;o<l.length;o++)He(l[o])}}function Ye(o,l){return o(l)}function Dt(){}var Yt=!1;function hr(o,l,x){if(Yt)return o(l,x);Yt=!0;try{return Ye(o,l,x)}finally{Yt=!1,(pe!==null||Ke!==null)&&(Dt(),ft())}}function kr(o,l){var x=o.stateNode;if(x===null)return null;var C=tu(x);if(C===null)return null;x=C[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(C=!C.disabled)||(o=o.type,C=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!C;break e;default:o=!1}if(o)return null;if(x&&typeof x!="function")throw Error(p(231,l,typeof x));return x}var Kr=!1;if(u)try{var $r={};Object.defineProperty($r,"passive",{get:function(){Kr=!0}}),window.addEventListener("test",$r,$r),window.removeEventListener("test",$r,$r)}catch{Kr=!1}function Tt(o,l,x,C,z,V,se,Re,Ge){var It=Array.prototype.slice.call(arguments,3);try{l.apply(x,It)}catch(Qt){this.onError(Qt)}}var Sn=!1,_n=null,Tn=!1,Br=null,Ft={onError:function(o){Sn=!0,_n=o}};function Fr(o,l,x,C,z,V,se,Re,Ge){Sn=!1,_n=null,Tt.apply(Ft,arguments)}function nn(o,l,x,C,z,V,se,Re,Ge){if(Fr.apply(this,arguments),Sn){if(Sn){var It=_n;Sn=!1,_n=null}else throw Error(p(198));Tn||(Tn=!0,Br=It)}}function Zn(o){var l=o,x=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(x=l.return),o=l.return;while(o)}return l.tag===3?x:null}function Gn(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function Eo(o){if(Zn(o)!==o)throw Error(p(188))}function cn(o){var l=o.alternate;if(!l){if(l=Zn(o),l===null)throw Error(p(188));return l!==o?null:o}for(var x=o,C=l;;){var z=x.return;if(z===null)break;var V=z.alternate;if(V===null){if(C=z.return,C!==null){x=C;continue}break}if(z.child===V.child){for(V=z.child;V;){if(V===x)return Eo(z),o;if(V===C)return Eo(z),l;V=V.sibling}throw Error(p(188))}if(x.return!==C.return)x=z,C=V;else{for(var se=!1,Re=z.child;Re;){if(Re===x){se=!0,x=z,C=V;break}if(Re===C){se=!0,C=z,x=V;break}Re=Re.sibling}if(!se){for(Re=V.child;Re;){if(Re===x){se=!0,x=V,C=z;break}if(Re===C){se=!0,C=V,x=z;break}Re=Re.sibling}if(!se)throw Error(p(189))}}if(x.alternate!==C)throw Error(p(190))}if(x.tag!==3)throw Error(p(188));return x.stateNode.current===x?o:l}function Qs(o){return o=cn(o),o!==null?Js(o):null}function Js(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var l=Js(o);if(l!==null)return l;o=o.sibling}return null}var Es=m.unstable_scheduleCallback,tl=m.unstable_cancelCallback,Go=m.unstable_shouldYield,Da=m.unstable_requestPaint,hn=m.unstable_now,ui=m.unstable_getCurrentPriorityLevel,Kn=m.unstable_ImmediatePriority,Oa=m.unstable_UserBlockingPriority,os=m.unstable_NormalPriority,Xl=m.unstable_LowPriority,Oo=m.unstable_IdlePriority,to=null,ss=null;function rl(o){if(ss&&typeof ss.onCommitFiberRoot=="function")try{ss.onCommitFiberRoot(to,o,void 0,(o.current.flags&128)===128)}catch{}}var yo=Math.clz32?Math.clz32:mu,ya=Math.log,Yl=Math.LN2;function mu(o){return o>>>=0,o===0?32:31-(ya(o)/Yl|0)|0}var _a=64,Ql=4194304;function Fa(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function Is(o,l){var x=o.pendingLanes;if(x===0)return 0;var C=0,z=o.suspendedLanes,V=o.pingedLanes,se=x&268435455;if(se!==0){var Re=se&~z;Re!==0?C=Fa(Re):(V&=se,V!==0&&(C=Fa(V)))}else se=x&~z,se!==0?C=Fa(se):V!==0&&(C=Fa(V));if(C===0)return 0;if(l!==0&&l!==C&&(l&z)===0&&(z=C&-C,V=l&-l,z>=V||z===16&&(V&4194240)!==0))return l;if((C&4)!==0&&(C|=x&16),l=o.entangledLanes,l!==0)for(o=o.entanglements,l&=C;0<l;)x=31-yo(l),z=1<<x,C|=o[x],l&=~z;return C}function B(o,l){switch(o){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function J(o,l){for(var x=o.suspendedLanes,C=o.pingedLanes,z=o.expirationTimes,V=o.pendingLanes;0<V;){var se=31-yo(V),Re=1<<se,Ge=z[se];Ge===-1?((Re&x)===0||(Re&C)!==0)&&(z[se]=B(Re,l)):Ge<=l&&(o.expiredLanes|=Re),V&=~Re}}function de(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function Ie(){var o=_a;return _a<<=1,(_a&4194240)===0&&(_a=64),o}function yt(o){for(var l=[],x=0;31>x;x++)l.push(o);return l}function ct(o,l,x){o.pendingLanes|=l,l!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,l=31-yo(l),o[l]=x}function Ot(o,l){var x=o.pendingLanes&~l;o.pendingLanes=l,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=l,o.mutableReadLanes&=l,o.entangledLanes&=l,l=o.entanglements;var C=o.eventTimes;for(o=o.expirationTimes;0<x;){var z=31-yo(x),V=1<<z;l[z]=0,C[z]=-1,o[z]=-1,x&=~V}}function ar(o,l){var x=o.entangledLanes|=l;for(o=o.entanglements;x;){var C=31-yo(x),z=1<<C;z&l|o[C]&l&&(o[C]|=l),x&=~z}}var gr=0;function Ar(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var _r,$n,_i,ro,en,as=!1,Io=[],Mo=null,ci=null,hi=null,On=new Map,Ei=new Map,Fn=[],gu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fo(o,l){switch(o){case"focusin":case"focusout":Mo=null;break;case"dragenter":case"dragleave":ci=null;break;case"mouseover":case"mouseout":hi=null;break;case"pointerover":case"pointerout":On.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ei.delete(l.pointerId)}}function no(o,l,x,C,z,V){return o===null||o.nativeEvent!==V?(o={blockedOn:l,domEventName:x,eventSystemFlags:C,nativeEvent:V,targetContainers:[z]},l!==null&&(l=qo(l),l!==null&&$n(l)),o):(o.eventSystemFlags|=C,l=o.targetContainers,z!==null&&l.indexOf(z)===-1&&l.push(z),o)}function ls(o,l,x,C,z){switch(l){case"focusin":return Mo=no(Mo,o,l,x,C,z),!0;case"dragenter":return ci=no(ci,o,l,x,C,z),!0;case"mouseover":return hi=no(hi,o,l,x,C,z),!0;case"pointerover":var V=z.pointerId;return On.set(V,no(On.get(V)||null,o,l,x,C,z)),!0;case"gotpointercapture":return V=z.pointerId,Ei.set(V,no(Ei.get(V)||null,o,l,x,C,z)),!0}return!1}function us(o){var l=fl(o.target);if(l!==null){var x=Zn(l);if(x!==null){if(l=x.tag,l===13){if(l=Gn(x),l!==null){o.blockedOn=l,en(o.priority,function(){_i(x)});return}}else if(l===3&&x.stateNode.current.memoizedState.isDehydrated){o.blockedOn=x.tag===3?x.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Dn(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var x=va(o.domEventName,o.eventSystemFlags,l[0],o.nativeEvent);if(x===null){x=o.nativeEvent;var C=new x.constructor(x.type,x);_e=C,x.target.dispatchEvent(C),_e=null}else return l=qo(x),l!==null&&$n(l),o.blockedOn=x,!1;l.shift()}return!0}function di(o,l,x){Dn(o)&&x.delete(l)}function Dr(){as=!1,Mo!==null&&Dn(Mo)&&(Mo=null),ci!==null&&Dn(ci)&&(ci=null),hi!==null&&Dn(hi)&&(hi=null),On.forEach(di),Ei.forEach(di)}function yr(o,l){o.blockedOn===l&&(o.blockedOn=null,as||(as=!0,m.unstable_scheduleCallback(m.unstable_NormalPriority,Dr)))}function En(o){function l(z){return yr(z,o)}if(0<Io.length){yr(Io[0],o);for(var x=1;x<Io.length;x++){var C=Io[x];C.blockedOn===o&&(C.blockedOn=null)}}for(Mo!==null&&yr(Mo,o),ci!==null&&yr(ci,o),hi!==null&&yr(hi,o),On.forEach(l),Ei.forEach(l),x=0;x<Fn.length;x++)C=Fn[x],C.blockedOn===o&&(C.blockedOn=null);for(;0<Fn.length&&(x=Fn[0],x.blockedOn===null);)us(x),x.blockedOn===null&&Fn.shift()}var Xr=et.ReactCurrentBatchConfig,cs=!0;function io(o,l,x,C){var z=gr,V=Xr.transition;Xr.transition=null;try{gr=1,yu(o,l,x,C)}finally{gr=z,Xr.transition=V}}function nl(o,l,x,C){var z=gr,V=Xr.transition;Xr.transition=null;try{gr=4,yu(o,l,x,C)}finally{gr=z,Xr.transition=V}}function yu(o,l,x,C){if(cs){var z=va(o,l,x,C);if(z===null)Uc(o,l,C,Ba,x),Fo(o,C);else if(ls(z,o,l,x,C))C.stopPropagation();else if(Fo(o,C),l&4&&-1<gu.indexOf(o)){for(;z!==null;){var V=qo(z);if(V!==null&&_r(V),V=va(o,l,x,C),V===null&&Uc(o,l,C,Ba,x),V===z)break;z=V}z!==null&&C.stopPropagation()}else Uc(o,l,C,null,x)}}var Ba=null;function va(o,l,x,C){if(Ba=null,o=Me(C),o=fl(o),o!==null)if(l=Zn(o),l===null)o=null;else if(x=l.tag,x===13){if(o=Gn(l),o!==null)return o;o=null}else if(x===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null);return Ba=o,null}function Jl(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ui()){case Kn:return 1;case Oa:return 4;case os:case Xl:return 16;case Oo:return 536870912;default:return 16}default:return 16}}var fi=null,il=null,hs=null;function ol(){if(hs)return hs;var o,l=il,x=l.length,C,z="value"in fi?fi.value:fi.textContent,V=z.length;for(o=0;o<x&&l[o]===z[o];o++);var se=x-o;for(C=1;C<=se&&l[x-C]===z[V-C];C++);return hs=z.slice(o,1<C?1-C:void 0)}function vi(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function Bi(){return!0}function Na(){return!1}function Ri(o){function l(x,C,z,V,se){this._reactName=x,this._targetInst=z,this.type=C,this.nativeEvent=V,this.target=se,this.currentTarget=null;for(var Re in o)o.hasOwnProperty(Re)&&(x=o[Re],this[Re]=x?x(V):V[Re]);return this.isDefaultPrevented=(V.defaultPrevented!=null?V.defaultPrevented:V.returnValue===!1)?Bi:Na,this.isPropagationStopped=Na,this}return Ht(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var x=this.nativeEvent;x&&(x.preventDefault?x.preventDefault():typeof x.returnValue!="unknown"&&(x.returnValue=!1),this.isDefaultPrevented=Bi)},stopPropagation:function(){var x=this.nativeEvent;x&&(x.stopPropagation?x.stopPropagation():typeof x.cancelBubble!="unknown"&&(x.cancelBubble=!0),this.isPropagationStopped=Bi)},persist:function(){},isPersistent:Bi}),l}var Ii={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xa=Ri(Ii),sl=Ht({},Ii,{view:0,detail:0}),Zu=Ri(sl),_o,Ni,zi,ds=Ht({},sl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ks,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==zi&&(zi&&o.type==="mousemove"?(_o=o.screenX-zi.screenX,Ni=o.screenY-zi.screenY):Ni=_o=0,zi=o),_o)},movementY:function(o){return"movementY"in o?o.movementY:Ni}}),$a=Ri(ds),Ms=Ht({},ds,{dataTransfer:0}),ko=Ri(Ms),Gi=Ht({},sl,{relatedTarget:0}),Xn=Ri(Gi),ja=Ht({},Ii,{animationName:0,elapsedTime:0,pseudoElement:0}),Gu=Ri(ja),Nh=Ht({},Ii,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),_u=Ri(Nh),$h=Ht({},Ii,{data:0}),vu=Ri($h),al={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Al={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ua(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=Rl[o])?!!l[o]:!1}function ks(){return Ua}var Wu=Ht({},sl,{key:function(o){if(o.key){var l=al[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=vi(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Al[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ks,charCode:function(o){return o.type==="keypress"?vi(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?vi(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Hu=Ri(Wu),$=Ht({},ds,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),K=Ri($),ue=Ht({},sl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ks}),Ee=Ri(ue),vt=Ht({},Ii,{propertyName:0,elapsedTime:0,pseudoElement:0}),st=Ri(vt),$t=Ht({},ds,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),lr=Ri($t),Nr=[9,13,27,32],mn=u&&"CompositionEvent"in window,Yr=null;u&&"documentMode"in document&&(Yr=document.documentMode);var pi=u&&"TextEvent"in window&&!Yr,Bo=u&&(!mn||Yr&&8<Yr&&11>=Yr),As=" ",fs=!1;function ea(o,l){switch(o){case"keyup":return Nr.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lc(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var ll=!1;function ul(o,l){switch(o){case"compositionend":return Lc(l);case"keypress":return l.which!==32?null:(fs=!0,As);case"textInput":return o=l.data,o===As&&fs?null:o;default:return null}}function cf(o,l){if(ll)return o==="compositionend"||!mn&&ea(o,l)?(o=ol(),hs=il=fi=null,ll=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Bo&&l.locale!=="ko"?null:l.data;default:return null}}var jh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Uh(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!jh[o.type]:l==="textarea"}function Md(o,l,x,C){nt(C),l=Pu(l,"onChange"),0<l.length&&(x=new xa("onChange","change",null,x,C),o.push({event:x,listeners:l}))}var ta=null,eu=null;function hf(o){Rd(o,0)}function Dc(o){var l=yn(o);if(rn(l))return o}function df(o,l){if(o==="change")return l}var Cn=!1;if(u){var oo;if(u){var Oc="oninput"in document;if(!Oc){var Vh=document.createElement("div");Vh.setAttribute("oninput","return;"),Oc=typeof Vh.oninput=="function"}oo=Oc}else oo=!1;Cn=oo&&(!document.documentMode||9<document.documentMode)}function Zh(){ta&&(ta.detachEvent("onpropertychange",kd),eu=ta=null)}function kd(o){if(o.propertyName==="value"&&Dc(eu)){var l=[];Md(l,eu,o,Me(o)),hr(hf,l)}}function Ad(o,l,x){o==="focusin"?(Zh(),ta=l,eu=x,ta.attachEvent("onpropertychange",kd)):o==="focusout"&&Zh()}function qu(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Dc(eu)}function xu(o,l){if(o==="click")return Dc(l)}function rt(o,l){if(o==="input"||o==="change")return Dc(l)}function Nt(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var St=typeof Object.is=="function"?Object.is:Nt;function Mr(o,l){if(St(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var x=Object.keys(o),C=Object.keys(l);if(x.length!==C.length)return!1;for(C=0;C<x.length;C++){var z=x[C];if(!te.call(l,z)||!St(o[z],l[z]))return!1}return!0}function gn(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Yn(o,l){var x=gn(o);o=0;for(var C;x;){if(x.nodeType===3){if(C=o+x.textContent.length,o<=l&&C>=l)return{node:x,offset:l-o};o=C}e:{for(;x;){if(x.nextSibling){x=x.nextSibling;break e}x=x.parentNode}x=void 0}x=gn(x)}}function so(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?so(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function ri(){for(var o=window,l=jr();l instanceof o.HTMLIFrameElement;){try{var x=typeof l.contentWindow.location.href=="string"}catch{x=!1}if(x)o=l.contentWindow;else break;l=jr(o.document)}return l}function bu(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}function Gh(o){var l=ri(),x=o.focusedElem,C=o.selectionRange;if(l!==x&&x&&x.ownerDocument&&so(x.ownerDocument.documentElement,x)){if(C!==null&&bu(x)){if(l=C.start,o=C.end,o===void 0&&(o=l),"selectionStart"in x)x.selectionStart=l,x.selectionEnd=Math.min(o,x.value.length);else if(o=(l=x.ownerDocument||document)&&l.defaultView||window,o.getSelection){o=o.getSelection();var z=x.textContent.length,V=Math.min(C.start,z);C=C.end===void 0?V:Math.min(C.end,z),!o.extend&&V>C&&(z=C,C=V,V=z),z=Yn(x,V);var se=Yn(x,C);z&&se&&(o.rangeCount!==1||o.anchorNode!==z.node||o.anchorOffset!==z.offset||o.focusNode!==se.node||o.focusOffset!==se.offset)&&(l=l.createRange(),l.setStart(z.node,z.offset),o.removeAllRanges(),V>C?(o.addRange(l),o.extend(se.node,se.offset)):(l.setEnd(se.node,se.offset),o.addRange(l)))}}for(l=[],o=x;o=o.parentNode;)o.nodeType===1&&l.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<l.length;x++)o=l[x],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var ra=u&&"documentMode"in document&&11>=document.documentMode,Rs=null,Fc=null,zs=null,Wo=!1;function Bc(o,l,x){var C=x.window===x?x.document:x.nodeType===9?x:x.ownerDocument;Wo||Rs==null||Rs!==jr(C)||(C=Rs,"selectionStart"in C&&bu(C)?C={start:C.selectionStart,end:C.selectionEnd}:(C=(C.ownerDocument&&C.ownerDocument.defaultView||window).getSelection(),C={anchorNode:C.anchorNode,anchorOffset:C.anchorOffset,focusNode:C.focusNode,focusOffset:C.focusOffset}),zs&&Mr(zs,C)||(zs=C,C=Pu(Fc,"onSelect"),0<C.length&&(l=new xa("onSelect","select",null,l,x),o.push({event:l,listeners:C}),l.target=Rs)))}function Wn(o,l){var x={};return x[o.toLowerCase()]=l.toLowerCase(),x["Webkit"+o]="webkit"+l,x["Moz"+o]="moz"+l,x}var wu={animationend:Wn("Animation","AnimationEnd"),animationiteration:Wn("Animation","AnimationIteration"),animationstart:Wn("Animation","AnimationStart"),transitionend:Wn("Transition","TransitionEnd")},zl={},Su={};u&&(Su=document.createElement("div").style,"AnimationEvent"in window||(delete wu.animationend.animation,delete wu.animationiteration.animation,delete wu.animationstart.animation),"TransitionEvent"in window||delete wu.transitionend.transition);function Ku(o){if(zl[o])return zl[o];if(!wu[o])return o;var l=wu[o],x;for(x in l)if(l.hasOwnProperty(x)&&x in Su)return zl[o]=l[x];return o}var Nc=Ku("animationend"),fh=Ku("animationiteration"),Tu=Ku("animationstart"),na=Ku("transitionend"),Ll=new Map,Wh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ia(o,l){Ll.set(o,l),D(l,[o])}for(var bn=0;bn<Wh.length;bn++){var Xu=Wh[bn],Yu=Xu.toLowerCase(),Hh=Xu[0].toUpperCase()+Xu.slice(1);ia(Yu,"on"+Hh)}ia(Nc,"onAnimationEnd"),ia(fh,"onAnimationIteration"),ia(Tu,"onAnimationStart"),ia("dblclick","onDoubleClick"),ia("focusin","onFocus"),ia("focusout","onBlur"),ia(na,"onTransitionEnd"),M("onMouseEnter",["mouseout","mouseover"]),M("onMouseLeave",["mouseout","mouseover"]),M("onPointerEnter",["pointerout","pointerover"]),M("onPointerLeave",["pointerout","pointerover"]),D("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),D("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),D("onBeforeInput",["compositionend","keypress","textInput","paste"]),D("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),D("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),D("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ba="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qu=new Set("cancel close invalid load scroll toggle".split(" ").concat(ba));function ph(o,l,x){var C=o.type||"unknown-event";o.currentTarget=x,nn(C,l,void 0,o),o.currentTarget=null}function Rd(o,l){l=(l&4)!==0;for(var x=0;x<o.length;x++){var C=o[x],z=C.event;C=C.listeners;e:{var V=void 0;if(l)for(var se=C.length-1;0<=se;se--){var Re=C[se],Ge=Re.instance,It=Re.currentTarget;if(Re=Re.listener,Ge!==V&&z.isPropagationStopped())break e;ph(z,Re,It),V=Ge}else for(se=0;se<C.length;se++){if(Re=C[se],Ge=Re.instance,It=Re.currentTarget,Re=Re.listener,Ge!==V&&z.isPropagationStopped())break e;ph(z,Re,It),V=Ge}}}if(Tn)throw o=Br,Tn=!1,Br=null,o}function Li(o,l){var x=l[ku];x===void 0&&(x=l[ku]=new Set);var C=o+"__bubble";x.has(C)||(jc(l,o,2,!1),x.add(C))}function $c(o,l,x){var C=0;l&&(C|=4),jc(x,o,C,l)}var cl="_reactListening"+Math.random().toString(36).slice(2);function hl(o){if(!o[cl]){o[cl]=!0,T.forEach(function(x){x!=="selectionchange"&&(Qu.has(x)||$c(x,!1,o),$c(x,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[cl]||(l[cl]=!0,$c("selectionchange",!1,l))}}function jc(o,l,x,C){switch(Jl(l)){case 1:var z=io;break;case 4:z=nl;break;default:z=yu}x=z.bind(null,l,x,o),z=void 0,!Kr||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(z=!0),C?z!==void 0?o.addEventListener(l,x,{capture:!0,passive:z}):o.addEventListener(l,x,!0):z!==void 0?o.addEventListener(l,x,{passive:z}):o.addEventListener(l,x,!1)}function Uc(o,l,x,C,z){var V=C;if((l&1)===0&&(l&2)===0&&C!==null)e:for(;;){if(C===null)return;var se=C.tag;if(se===3||se===4){var Re=C.stateNode.containerInfo;if(Re===z||Re.nodeType===8&&Re.parentNode===z)break;if(se===4)for(se=C.return;se!==null;){var Ge=se.tag;if((Ge===3||Ge===4)&&(Ge=se.stateNode.containerInfo,Ge===z||Ge.nodeType===8&&Ge.parentNode===z))return;se=se.return}for(;Re!==null;){if(se=fl(Re),se===null)return;if(Ge=se.tag,Ge===5||Ge===6){C=V=se;continue e}Re=Re.parentNode}}C=C.return}hr(function(){var It=V,Qt=Me(x),ir=[];e:{var Jt=Ll.get(o);if(Jt!==void 0){var Er=xa,Or=o;switch(o){case"keypress":if(vi(x)===0)break e;case"keydown":case"keyup":Er=Hu;break;case"focusin":Or="focus",Er=Xn;break;case"focusout":Or="blur",Er=Xn;break;case"beforeblur":case"afterblur":Er=Xn;break;case"click":if(x.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Er=$a;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Er=ko;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Er=Ee;break;case Nc:case fh:case Tu:Er=Gu;break;case na:Er=st;break;case"scroll":Er=Zu;break;case"wheel":Er=lr;break;case"copy":case"cut":case"paste":Er=_u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Er=K}var Ur=(l&4)!==0,fo=!Ur&&o==="scroll",pt=Ur?Jt!==null?Jt+"Capture":null:Jt;Ur=[];for(var Xe=It,xt;Xe!==null;){xt=Xe;var dr=xt.stateNode;if(xt.tag===5&&dr!==null&&(xt=dr,pt!==null&&(dr=kr(Xe,pt),dr!=null&&Ur.push(Cu(Xe,dr,xt)))),fo)break;Xe=Xe.return}0<Ur.length&&(Jt=new Er(Jt,Or,null,x,Qt),ir.push({event:Jt,listeners:Ur}))}}if((l&7)===0){e:{if(Jt=o==="mouseover"||o==="pointerover",Er=o==="mouseout"||o==="pointerout",Jt&&x!==_e&&(Or=x.relatedTarget||x.fromElement)&&(fl(Or)||Or[Ls]))break e;if((Er||Jt)&&(Jt=Qt.window===Qt?Qt:(Jt=Qt.ownerDocument)?Jt.defaultView||Jt.parentWindow:window,Er?(Or=x.relatedTarget||x.toElement,Er=It,Or=Or?fl(Or):null,Or!==null&&(fo=Zn(Or),Or!==fo||Or.tag!==5&&Or.tag!==6)&&(Or=null)):(Er=null,Or=It),Er!==Or)){if(Ur=$a,dr="onMouseLeave",pt="onMouseEnter",Xe="mouse",(o==="pointerout"||o==="pointerover")&&(Ur=K,dr="onPointerLeave",pt="onPointerEnter",Xe="pointer"),fo=Er==null?Jt:yn(Er),xt=Or==null?Jt:yn(Or),Jt=new Ur(dr,Xe+"leave",Er,x,Qt),Jt.target=fo,Jt.relatedTarget=xt,dr=null,fl(Qt)===It&&(Ur=new Ur(pt,Xe+"enter",Or,x,Qt),Ur.target=xt,Ur.relatedTarget=fo,dr=Ur),fo=dr,Er&&Or)t:{for(Ur=Er,pt=Or,Xe=0,xt=Ur;xt;xt=Dl(xt))Xe++;for(xt=0,dr=pt;dr;dr=Dl(dr))xt++;for(;0<Xe-xt;)Ur=Dl(Ur),Xe--;for(;0<xt-Xe;)pt=Dl(pt),xt--;for(;Xe--;){if(Ur===pt||pt!==null&&Ur===pt.alternate)break t;Ur=Dl(Ur),pt=Dl(pt)}Ur=null}else Ur=null;Er!==null&&$i(ir,Jt,Er,Ur,!1),Or!==null&&fo!==null&&$i(ir,fo,Or,Ur,!0)}}e:{if(Jt=It?yn(It):window,Er=Jt.nodeName&&Jt.nodeName.toLowerCase(),Er==="select"||Er==="input"&&Jt.type==="file")var Zr=df;else if(Uh(Jt))if(Cn)Zr=rt;else{Zr=qu;var un=Ad}else(Er=Jt.nodeName)&&Er.toLowerCase()==="input"&&(Jt.type==="checkbox"||Jt.type==="radio")&&(Zr=xu);if(Zr&&(Zr=Zr(o,It))){Md(ir,Zr,x,Qt);break e}un&&un(o,Jt,It),o==="focusout"&&(un=Jt._wrapperState)&&un.controlled&&Jt.type==="number"&&wn(Jt,"number",Jt.value)}switch(un=It?yn(It):window,o){case"focusin":(Uh(un)||un.contentEditable==="true")&&(Rs=un,Fc=It,zs=null);break;case"focusout":zs=Fc=Rs=null;break;case"mousedown":Wo=!0;break;case"contextmenu":case"mouseup":case"dragend":Wo=!1,Bc(ir,x,Qt);break;case"selectionchange":if(ra)break;case"keydown":case"keyup":Bc(ir,x,Qt)}var Qr;if(mn)e:{switch(o){case"compositionstart":var pn="onCompositionStart";break e;case"compositionend":pn="onCompositionEnd";break e;case"compositionupdate":pn="onCompositionUpdate";break e}pn=void 0}else ll?ea(o,x)&&(pn="onCompositionEnd"):o==="keydown"&&x.keyCode===229&&(pn="onCompositionStart");pn&&(Bo&&x.locale!=="ko"&&(ll||pn!=="onCompositionStart"?pn==="onCompositionEnd"&&ll&&(Qr=ol()):(fi=Qt,il="value"in fi?fi.value:fi.textContent,ll=!0)),un=Pu(It,pn),0<un.length&&(pn=new vu(pn,o,null,x,Qt),ir.push({event:pn,listeners:un}),Qr?pn.data=Qr:(Qr=Lc(x),Qr!==null&&(pn.data=Qr)))),(Qr=pi?ul(o,x):cf(o,x))&&(It=Pu(It,"onBeforeInput"),0<It.length&&(Qt=new vu("onBeforeInput","beforeinput",null,x,Qt),ir.push({event:Qt,listeners:It}),Qt.data=Qr))}Rd(ir,l)})}function Cu(o,l,x){return{instance:o,listener:l,currentTarget:x}}function Pu(o,l){for(var x=l+"Capture",C=[];o!==null;){var z=o,V=z.stateNode;z.tag===5&&V!==null&&(z=V,V=kr(o,x),V!=null&&C.unshift(Cu(o,V,z)),V=kr(o,l),V!=null&&C.push(Cu(o,V,z))),o=o.return}return C}function Dl(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function $i(o,l,x,C,z){for(var V=l._reactName,se=[];x!==null&&x!==C;){var Re=x,Ge=Re.alternate,It=Re.stateNode;if(Ge!==null&&Ge===C)break;Re.tag===5&&It!==null&&(Re=It,z?(Ge=kr(x,V),Ge!=null&&se.unshift(Cu(x,Ge,Re))):z||(Ge=kr(x,V),Ge!=null&&se.push(Cu(x,Ge,Re)))),x=x.return}se.length!==0&&o.push({event:l,listeners:se})}var No=/\r\n?/g,mh=/\u0000|\uFFFD/g;function gh(o){return(typeof o=="string"?o:""+o).replace(No,`
`).replace(mh,"")}function Vc(o,l,x){if(l=gh(l),gh(o)!==l&&x)throw Error(p(425))}function Ju(){}var ec=null,Eu=null;function Zc(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var dl=typeof setTimeout=="function"?setTimeout:void 0,Iu=typeof clearTimeout=="function"?clearTimeout:void 0,tc=typeof Promise=="function"?Promise:void 0,Mu=typeof queueMicrotask=="function"?queueMicrotask:typeof tc<"u"?function(o){return tc.resolve(null).then(o).catch(Ci)}:dl;function Ci(o){setTimeout(function(){throw o})}function Ol(o,l){var x=l,C=0;do{var z=x.nextSibling;if(o.removeChild(x),z&&z.nodeType===8)if(x=z.data,x==="/$"){if(C===0){o.removeChild(z),En(l);return}C--}else x!=="$"&&x!=="$?"&&x!=="$!"||C++;x=z}while(x);En(l)}function vo(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return o}function qh(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var x=o.data;if(x==="$"||x==="$!"||x==="$?"){if(l===0)return o;l--}else x==="/$"&&l++}o=o.previousSibling}return null}var Fl=Math.random().toString(36).slice(2),Va="__reactFiber$"+Fl,Ho="__reactProps$"+Fl,Ls="__reactContainer$"+Fl,ku="__reactEvents$"+Fl,ce="__reactListeners$"+Fl,rc="__reactHandles$"+Fl;function fl(o){var l=o[Va];if(l)return l;for(var x=o.parentNode;x;){if(l=x[Ls]||x[Va]){if(x=l.alternate,l.child!==null||x!==null&&x.child!==null)for(o=qh(o);o!==null;){if(x=o[Va])return x;o=qh(o)}return l}o=x,x=o.parentNode}return null}function qo(o){return o=o[Va]||o[Ls],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function yn(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(p(33))}function tu(o){return o[Ho]||null}var ao=[],pl=-1;function ps(o){return{current:o}}function Mi(o){0>pl||(o.current=ao[pl],ao[pl]=null,pl--)}function Pi(o,l){pl++,ao[pl]=o.current,o.current=l}var wa={},$o=ps(wa),Ko=ps(!1),ms=wa;function ml(o,l){var x=o.type.contextTypes;if(!x)return wa;var C=o.stateNode;if(C&&C.__reactInternalMemoizedUnmaskedChildContext===l)return C.__reactInternalMemoizedMaskedChildContext;var z={},V;for(V in x)z[V]=l[V];return C&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=l,o.__reactInternalMemoizedMaskedChildContext=z),z}function Ds(o){return o=o.childContextTypes,o!=null}function Ao(){Mi(Ko),Mi($o)}function Za(o,l,x){if($o.current!==wa)throw Error(p(168));Pi($o,l),Pi(Ko,x)}function nc(o,l,x){var C=o.stateNode;if(l=l.childContextTypes,typeof C.getChildContext!="function")return x;C=C.getChildContext();for(var z in C)if(!(z in l))throw Error(p(108,Tr(o)||"Unknown",z));return Ht({},x,C)}function Hi(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||wa,ms=$o.current,Pi($o,o),Pi(Ko,Ko.current),!0}function ic(o,l,x){var C=o.stateNode;if(!C)throw Error(p(169));x?(o=nc(o,l,ms),C.__reactInternalMemoizedMergedChildContext=o,Mi(Ko),Mi($o),Pi($o,o)):Mi(Ko),Pi(Ko,x)}var Ga=null,Kh=!1,yh=!1;function _h(o){Ga===null?Ga=[o]:Ga.push(o)}function ru(o){Kh=!0,_h(o)}function Sa(){if(!yh&&Ga!==null){yh=!0;var o=0,l=gr;try{var x=Ga;for(gr=1;o<x.length;o++){var C=x[o];do C=C(!0);while(C!==null)}Ga=null,Kh=!1}catch(z){throw Ga!==null&&(Ga=Ga.slice(o+1)),Es(Kn,Sa),z}finally{gr=l,yh=!1}}return null}var Os=[],ur=0,oc=null,sc=0,Ta=[],Xo=0,gl=null,Wa=1,dn="";function Bl(o,l){Os[ur++]=sc,Os[ur++]=oc,oc=o,sc=l}function ff(o,l,x){Ta[Xo++]=Wa,Ta[Xo++]=dn,Ta[Xo++]=gl,gl=o;var C=Wa;o=dn;var z=32-yo(C)-1;C&=~(1<<z),x+=1;var V=32-yo(l)+z;if(30<V){var se=z-z%5;V=(C&(1<<se)-1).toString(32),C>>=se,z-=se,Wa=1<<32-yo(l)+z|x<<z|C,dn=V+o}else Wa=1<<V|x<<z|C,dn=o}function ac(o){o.return!==null&&(Bl(o,1),ff(o,1,0))}function Au(o){for(;o===oc;)oc=Os[--ur],Os[ur]=null,sc=Os[--ur],Os[ur]=null;for(;o===gl;)gl=Ta[--Xo],Ta[Xo]=null,dn=Ta[--Xo],Ta[Xo]=null,Wa=Ta[--Xo],Ta[Xo]=null}var Yo=null,Fs=null,xi=!1,Bs=null;function Nl(o,l){var x=Qa(5,null,null,0);x.elementType="DELETED",x.stateNode=l,x.return=o,l=o.deletions,l===null?(o.deletions=[x],o.flags|=16):l.push(x)}function lc(o,l){switch(o.tag){case 5:var x=o.type;return l=l.nodeType!==1||x.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(o.stateNode=l,Yo=o,Fs=vo(l.firstChild),!0):!1;case 6:return l=o.pendingProps===""||l.nodeType!==3?null:l,l!==null?(o.stateNode=l,Yo=o,Fs=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(x=gl!==null?{id:Wa,overflow:dn}:null,o.memoizedState={dehydrated:l,treeContext:x,retryLane:1073741824},x=Qa(18,null,null,0),x.stateNode=l,x.return=o,o.child=x,Yo=o,Fs=null,!0):!1;default:return!1}}function nu(o){return(o.mode&1)!==0&&(o.flags&128)===0}function oa(o){if(xi){var l=Fs;if(l){var x=l;if(!lc(o,l)){if(nu(o))throw Error(p(418));l=vo(x.nextSibling);var C=Yo;l&&lc(o,l)?Nl(C,x):(o.flags=o.flags&-4097|2,xi=!1,Yo=o)}}else{if(nu(o))throw Error(p(418));o.flags=o.flags&-4097|2,xi=!1,Yo=o}}}function $l(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;Yo=o}function si(o){if(o!==Yo)return!1;if(!xi)return $l(o),xi=!0,!1;var l;if((l=o.tag!==3)&&!(l=o.tag!==5)&&(l=o.type,l=l!=="head"&&l!=="body"&&!Zc(o.type,o.memoizedProps)),l&&(l=Fs)){if(nu(o))throw uc(),Error(p(418));for(;l;)Nl(o,l),l=vo(l.nextSibling)}if($l(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(p(317));e:{for(o=o.nextSibling,l=0;o;){if(o.nodeType===8){var x=o.data;if(x==="/$"){if(l===0){Fs=vo(o.nextSibling);break e}l--}else x!=="$"&&x!=="$!"&&x!=="$?"||l++}o=o.nextSibling}Fs=null}}else Fs=Yo?vo(o.stateNode.nextSibling):null;return!0}function uc(){for(var o=Fs;o;)o=vo(o.nextSibling)}function Ha(){Fs=Yo=null,xi=!1}function yl(o){Bs===null?Bs=[o]:Bs.push(o)}var zd=et.ReactCurrentBatchConfig;function Gc(o,l,x){if(o=x.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(x._owner){if(x=x._owner,x){if(x.tag!==1)throw Error(p(309));var C=x.stateNode}if(!C)throw Error(p(147,o));var z=C,V=""+o;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===V?l.ref:(l=function(se){var Re=z.refs;se===null?delete Re[V]:Re[V]=se},l._stringRef=V,l)}if(typeof o!="string")throw Error(p(284));if(!x._owner)throw Error(p(290,o))}return o}function cc(o,l){throw o=Object.prototype.toString.call(l),Error(p(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o))}function gs(o){var l=o._init;return l(o._payload)}function Wc(o){function l(pt,Xe){if(o){var xt=pt.deletions;xt===null?(pt.deletions=[Xe],pt.flags|=16):xt.push(Xe)}}function x(pt,Xe){if(!o)return null;for(;Xe!==null;)l(pt,Xe),Xe=Xe.sibling;return null}function C(pt,Xe){for(pt=new Map;Xe!==null;)Xe.key!==null?pt.set(Xe.key,Xe):pt.set(Xe.index,Xe),Xe=Xe.sibling;return pt}function z(pt,Xe){return pt=Tl(pt,Xe),pt.index=0,pt.sibling=null,pt}function V(pt,Xe,xt){return pt.index=xt,o?(xt=pt.alternate,xt!==null?(xt=xt.index,xt<Xe?(pt.flags|=2,Xe):xt):(pt.flags|=2,Xe)):(pt.flags|=1048576,Xe)}function se(pt){return o&&pt.alternate===null&&(pt.flags|=2),pt}function Re(pt,Xe,xt,dr){return Xe===null||Xe.tag!==6?(Xe=ap(xt,pt.mode,dr),Xe.return=pt,Xe):(Xe=z(Xe,xt),Xe.return=pt,Xe)}function Ge(pt,Xe,xt,dr){var Zr=xt.type;return Zr===_t?Qt(pt,Xe,xt.props.children,dr,xt.key):Xe!==null&&(Xe.elementType===Zr||typeof Zr=="object"&&Zr!==null&&Zr.$$typeof===xr&&gs(Zr)===Xe.type)?(dr=z(Xe,xt.props),dr.ref=Gc(pt,Xe,xt),dr.return=pt,dr):(dr=md(xt.type,xt.key,xt.props,null,pt.mode,dr),dr.ref=Gc(pt,Xe,xt),dr.return=pt,dr)}function It(pt,Xe,xt,dr){return Xe===null||Xe.tag!==4||Xe.stateNode.containerInfo!==xt.containerInfo||Xe.stateNode.implementation!==xt.implementation?(Xe=lp(xt,pt.mode,dr),Xe.return=pt,Xe):(Xe=z(Xe,xt.children||[]),Xe.return=pt,Xe)}function Qt(pt,Xe,xt,dr,Zr){return Xe===null||Xe.tag!==7?(Xe=Mh(xt,pt.mode,dr,Zr),Xe.return=pt,Xe):(Xe=z(Xe,xt),Xe.return=pt,Xe)}function ir(pt,Xe,xt){if(typeof Xe=="string"&&Xe!==""||typeof Xe=="number")return Xe=ap(""+Xe,pt.mode,xt),Xe.return=pt,Xe;if(typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case Je:return xt=md(Xe.type,Xe.key,Xe.props,null,pt.mode,xt),xt.ref=Gc(pt,null,Xe),xt.return=pt,xt;case it:return Xe=lp(Xe,pt.mode,xt),Xe.return=pt,Xe;case xr:var dr=Xe._init;return ir(pt,dr(Xe._payload),xt)}if(an(Xe)||Et(Xe))return Xe=Mh(Xe,pt.mode,xt,null),Xe.return=pt,Xe;cc(pt,Xe)}return null}function Jt(pt,Xe,xt,dr){var Zr=Xe!==null?Xe.key:null;if(typeof xt=="string"&&xt!==""||typeof xt=="number")return Zr!==null?null:Re(pt,Xe,""+xt,dr);if(typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case Je:return xt.key===Zr?Ge(pt,Xe,xt,dr):null;case it:return xt.key===Zr?It(pt,Xe,xt,dr):null;case xr:return Zr=xt._init,Jt(pt,Xe,Zr(xt._payload),dr)}if(an(xt)||Et(xt))return Zr!==null?null:Qt(pt,Xe,xt,dr,null);cc(pt,xt)}return null}function Er(pt,Xe,xt,dr,Zr){if(typeof dr=="string"&&dr!==""||typeof dr=="number")return pt=pt.get(xt)||null,Re(Xe,pt,""+dr,Zr);if(typeof dr=="object"&&dr!==null){switch(dr.$$typeof){case Je:return pt=pt.get(dr.key===null?xt:dr.key)||null,Ge(Xe,pt,dr,Zr);case it:return pt=pt.get(dr.key===null?xt:dr.key)||null,It(Xe,pt,dr,Zr);case xr:var un=dr._init;return Er(pt,Xe,xt,un(dr._payload),Zr)}if(an(dr)||Et(dr))return pt=pt.get(xt)||null,Qt(Xe,pt,dr,Zr,null);cc(Xe,dr)}return null}function Or(pt,Xe,xt,dr){for(var Zr=null,un=null,Qr=Xe,pn=Xe=0,vs=null;Qr!==null&&pn<xt.length;pn++){Qr.index>pn?(vs=Qr,Qr=null):vs=Qr.sibling;var li=Jt(pt,Qr,xt[pn],dr);if(li===null){Qr===null&&(Qr=vs);break}o&&Qr&&li.alternate===null&&l(pt,Qr),Xe=V(li,Xe,pn),un===null?Zr=li:un.sibling=li,un=li,Qr=vs}if(pn===xt.length)return x(pt,Qr),xi&&Bl(pt,pn),Zr;if(Qr===null){for(;pn<xt.length;pn++)Qr=ir(pt,xt[pn],dr),Qr!==null&&(Xe=V(Qr,Xe,pn),un===null?Zr=Qr:un.sibling=Qr,un=Qr);return xi&&Bl(pt,pn),Zr}for(Qr=C(pt,Qr);pn<xt.length;pn++)vs=Er(Qr,pt,pn,xt[pn],dr),vs!==null&&(o&&vs.alternate!==null&&Qr.delete(vs.key===null?pn:vs.key),Xe=V(vs,Xe,pn),un===null?Zr=vs:un.sibling=vs,un=vs);return o&&Qr.forEach(function(xc){return l(pt,xc)}),xi&&Bl(pt,pn),Zr}function Ur(pt,Xe,xt,dr){var Zr=Et(xt);if(typeof Zr!="function")throw Error(p(150));if(xt=Zr.call(xt),xt==null)throw Error(p(151));for(var un=Zr=null,Qr=Xe,pn=Xe=0,vs=null,li=xt.next();Qr!==null&&!li.done;pn++,li=xt.next()){Qr.index>pn?(vs=Qr,Qr=null):vs=Qr.sibling;var xc=Jt(pt,Qr,li.value,dr);if(xc===null){Qr===null&&(Qr=vs);break}o&&Qr&&xc.alternate===null&&l(pt,Qr),Xe=V(xc,Xe,pn),un===null?Zr=xc:un.sibling=xc,un=xc,Qr=vs}if(li.done)return x(pt,Qr),xi&&Bl(pt,pn),Zr;if(Qr===null){for(;!li.done;pn++,li=xt.next())li=ir(pt,li.value,dr),li!==null&&(Xe=V(li,Xe,pn),un===null?Zr=li:un.sibling=li,un=li);return xi&&Bl(pt,pn),Zr}for(Qr=C(pt,Qr);!li.done;pn++,li=xt.next())li=Er(Qr,pt,pn,li.value,dr),li!==null&&(o&&li.alternate!==null&&Qr.delete(li.key===null?pn:li.key),Xe=V(li,Xe,pn),un===null?Zr=li:un.sibling=li,un=li);return o&&Qr.forEach(function(mm){return l(pt,mm)}),xi&&Bl(pt,pn),Zr}function fo(pt,Xe,xt,dr){if(typeof xt=="object"&&xt!==null&&xt.type===_t&&xt.key===null&&(xt=xt.props.children),typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case Je:e:{for(var Zr=xt.key,un=Xe;un!==null;){if(un.key===Zr){if(Zr=xt.type,Zr===_t){if(un.tag===7){x(pt,un.sibling),Xe=z(un,xt.props.children),Xe.return=pt,pt=Xe;break e}}else if(un.elementType===Zr||typeof Zr=="object"&&Zr!==null&&Zr.$$typeof===xr&&gs(Zr)===un.type){x(pt,un.sibling),Xe=z(un,xt.props),Xe.ref=Gc(pt,un,xt),Xe.return=pt,pt=Xe;break e}x(pt,un);break}else l(pt,un);un=un.sibling}xt.type===_t?(Xe=Mh(xt.props.children,pt.mode,dr,xt.key),Xe.return=pt,pt=Xe):(dr=md(xt.type,xt.key,xt.props,null,pt.mode,dr),dr.ref=Gc(pt,Xe,xt),dr.return=pt,pt=dr)}return se(pt);case it:e:{for(un=xt.key;Xe!==null;){if(Xe.key===un)if(Xe.tag===4&&Xe.stateNode.containerInfo===xt.containerInfo&&Xe.stateNode.implementation===xt.implementation){x(pt,Xe.sibling),Xe=z(Xe,xt.children||[]),Xe.return=pt,pt=Xe;break e}else{x(pt,Xe);break}else l(pt,Xe);Xe=Xe.sibling}Xe=lp(xt,pt.mode,dr),Xe.return=pt,pt=Xe}return se(pt);case xr:return un=xt._init,fo(pt,Xe,un(xt._payload),dr)}if(an(xt))return Or(pt,Xe,xt,dr);if(Et(xt))return Ur(pt,Xe,xt,dr);cc(pt,xt)}return typeof xt=="string"&&xt!==""||typeof xt=="number"?(xt=""+xt,Xe!==null&&Xe.tag===6?(x(pt,Xe.sibling),Xe=z(Xe,xt),Xe.return=pt,pt=Xe):(x(pt,Xe),Xe=ap(xt,pt.mode,dr),Xe.return=pt,pt=Xe),se(pt)):x(pt,Xe)}return fo}var fr=Wc(!0),Vr=Wc(!1),iu=ps(null),Ns=null,jl=null,Di=null;function _l(){Di=jl=Ns=null}function $s(o){var l=iu.current;Mi(iu),o._currentValue=l}function jo(o,l,x){for(;o!==null;){var C=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,C!==null&&(C.childLanes|=l)):C!==null&&(C.childLanes&l)!==l&&(C.childLanes|=l),o===x)break;o=o.return}}function sa(o,l){Ns=o,Di=jl=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&l)!==0&&(ka=!0),o.firstContext=null)}function jn(o){var l=o._currentValue;if(Di!==o)if(o={context:o,memoizedValue:l,next:null},jl===null){if(Ns===null)throw Error(p(308));jl=o,Ns.dependencies={lanes:0,firstContext:o}}else jl=jl.next=o;return l}var ai=null;function Ru(o){ai===null?ai=[o]:ai.push(o)}function zu(o,l,x,C){var z=l.interleaved;return z===null?(x.next=x,Ru(l)):(x.next=z.next,z.next=x),l.interleaved=x,Ca(o,C)}function Ca(o,l){o.lanes|=l;var x=o.alternate;for(x!==null&&(x.lanes|=l),x=o,o=o.return;o!==null;)o.childLanes|=l,x=o.alternate,x!==null&&(x.childLanes|=l),x=o,o=o.return;return x.tag===3?x.stateNode:null}var Uo=!1;function Hc(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Xh(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function aa(o,l){return{eventTime:o,lane:l,tag:0,payload:null,callback:null,next:null}}function la(o,l,x){var C=o.updateQueue;if(C===null)return null;if(C=C.shared,(Qn&2)!==0){var z=C.pending;return z===null?l.next=l:(l.next=z.next,z.next=l),C.pending=l,Ca(o,x)}return z=C.interleaved,z===null?(l.next=l,Ru(C)):(l.next=z.next,z.next=l),C.interleaved=l,Ca(o,x)}function g(o,l,x){if(l=l.updateQueue,l!==null&&(l=l.shared,(x&4194240)!==0)){var C=l.lanes;C&=o.pendingLanes,x|=C,l.lanes=x,ar(o,x)}}function e(o,l){var x=o.updateQueue,C=o.alternate;if(C!==null&&(C=C.updateQueue,x===C)){var z=null,V=null;if(x=x.firstBaseUpdate,x!==null){do{var se={eventTime:x.eventTime,lane:x.lane,tag:x.tag,payload:x.payload,callback:x.callback,next:null};V===null?z=V=se:V=V.next=se,x=x.next}while(x!==null);V===null?z=V=l:V=V.next=l}else z=V=l;x={baseState:C.baseState,firstBaseUpdate:z,lastBaseUpdate:V,shared:C.shared,effects:C.effects},o.updateQueue=x;return}o=x.lastBaseUpdate,o===null?x.firstBaseUpdate=l:o.next=l,x.lastBaseUpdate=l}function r(o,l,x,C){var z=o.updateQueue;Uo=!1;var V=z.firstBaseUpdate,se=z.lastBaseUpdate,Re=z.shared.pending;if(Re!==null){z.shared.pending=null;var Ge=Re,It=Ge.next;Ge.next=null,se===null?V=It:se.next=It,se=Ge;var Qt=o.alternate;Qt!==null&&(Qt=Qt.updateQueue,Re=Qt.lastBaseUpdate,Re!==se&&(Re===null?Qt.firstBaseUpdate=It:Re.next=It,Qt.lastBaseUpdate=Ge))}if(V!==null){var ir=z.baseState;se=0,Qt=It=Ge=null,Re=V;do{var Jt=Re.lane,Er=Re.eventTime;if((C&Jt)===Jt){Qt!==null&&(Qt=Qt.next={eventTime:Er,lane:0,tag:Re.tag,payload:Re.payload,callback:Re.callback,next:null});e:{var Or=o,Ur=Re;switch(Jt=l,Er=x,Ur.tag){case 1:if(Or=Ur.payload,typeof Or=="function"){ir=Or.call(Er,ir,Jt);break e}ir=Or;break e;case 3:Or.flags=Or.flags&-65537|128;case 0:if(Or=Ur.payload,Jt=typeof Or=="function"?Or.call(Er,ir,Jt):Or,Jt==null)break e;ir=Ht({},ir,Jt);break e;case 2:Uo=!0}}Re.callback!==null&&Re.lane!==0&&(o.flags|=64,Jt=z.effects,Jt===null?z.effects=[Re]:Jt.push(Re))}else Er={eventTime:Er,lane:Jt,tag:Re.tag,payload:Re.payload,callback:Re.callback,next:null},Qt===null?(It=Qt=Er,Ge=ir):Qt=Qt.next=Er,se|=Jt;if(Re=Re.next,Re===null){if(Re=z.shared.pending,Re===null)break;Jt=Re,Re=Jt.next,Jt.next=null,z.lastBaseUpdate=Jt,z.shared.pending=null}}while(!0);if(Qt===null&&(Ge=ir),z.baseState=Ge,z.firstBaseUpdate=It,z.lastBaseUpdate=Qt,l=z.shared.interleaved,l!==null){z=l;do se|=z.lane,z=z.next;while(z!==l)}else V===null&&(z.shared.lanes=0);Yc|=se,o.lanes=se,o.memoizedState=ir}}function a(o,l,x){if(o=l.effects,l.effects=null,o!==null)for(l=0;l<o.length;l++){var C=o[l],z=C.callback;if(z!==null){if(C.callback=null,C=x,typeof z!="function")throw Error(p(191,z));z.call(C)}}}var d={},y=ps(d),w=ps(d),E=ps(d);function A(o){if(o===d)throw Error(p(174));return o}function O(o,l){switch(Pi(E,l),Pi(w,o),Pi(y,d),o=l.nodeType,o){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:qn(null,"");break;default:o=o===8?l.parentNode:l,l=o.namespaceURI||null,o=o.tagName,l=qn(l,o)}Mi(y),Pi(y,l)}function N(){Mi(y),Mi(w),Mi(E)}function W(o){A(E.current);var l=A(y.current),x=qn(l,o.type);l!==x&&(Pi(w,o),Pi(y,x))}function G(o){w.current===o&&(Mi(y),Mi(w))}var Q=ps(0);function ie(o){for(var l=o;l!==null;){if(l.tag===13){var x=l.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||x.data==="$?"||x.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var be=[];function xe(){for(var o=0;o<be.length;o++)be[o]._workInProgressVersionPrimary=null;be.length=0}var Se=et.ReactCurrentDispatcher,Ae=et.ReactCurrentBatchConfig,De=0,ke=null,Oe=null,$e=null,Ue=!1,lt=!1,Mt=0,Qe=0;function dt(){throw Error(p(321))}function Pt(o,l){if(l===null)return!1;for(var x=0;x<l.length&&x<o.length;x++)if(!St(o[x],l[x]))return!1;return!0}function er(o,l,x,C,z,V){if(De=V,ke=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Se.current=o===null||o.memoizedState===null?qa:Ma,o=x(C,z),lt){V=0;do{if(lt=!1,Mt=0,25<=V)throw Error(p(301));V+=1,$e=Oe=null,l.updateQueue=null,Se.current=Qo,o=x(C,z)}while(lt)}if(Se.current=Lu,l=Oe!==null&&Oe.next!==null,De=0,$e=Oe=ke=null,Ue=!1,l)throw Error(p(300));return o}function tr(){var o=Mt!==0;return Mt=0,o}function Bt(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $e===null?ke.memoizedState=$e=o:$e=$e.next=o,$e}function vr(){if(Oe===null){var o=ke.alternate;o=o!==null?o.memoizedState:null}else o=Oe.next;var l=$e===null?ke.memoizedState:$e.next;if(l!==null)$e=l,Oe=o;else{if(o===null)throw Error(p(310));Oe=o,o={memoizedState:Oe.memoizedState,baseState:Oe.baseState,baseQueue:Oe.baseQueue,queue:Oe.queue,next:null},$e===null?ke.memoizedState=$e=o:$e=$e.next=o}return $e}function Gr(o,l){return typeof l=="function"?l(o):l}function In(o){var l=vr(),x=l.queue;if(x===null)throw Error(p(311));x.lastRenderedReducer=o;var C=Oe,z=C.baseQueue,V=x.pending;if(V!==null){if(z!==null){var se=z.next;z.next=V.next,V.next=se}C.baseQueue=z=V,x.pending=null}if(z!==null){V=z.next,C=C.baseState;var Re=se=null,Ge=null,It=V;do{var Qt=It.lane;if((De&Qt)===Qt)Ge!==null&&(Ge=Ge.next={lane:0,action:It.action,hasEagerState:It.hasEagerState,eagerState:It.eagerState,next:null}),C=It.hasEagerState?It.eagerState:o(C,It.action);else{var ir={lane:Qt,action:It.action,hasEagerState:It.hasEagerState,eagerState:It.eagerState,next:null};Ge===null?(Re=Ge=ir,se=C):Ge=Ge.next=ir,ke.lanes|=Qt,Yc|=Qt}It=It.next}while(It!==null&&It!==V);Ge===null?se=C:Ge.next=Re,St(C,l.memoizedState)||(ka=!0),l.memoizedState=C,l.baseState=se,l.baseQueue=Ge,x.lastRenderedState=C}if(o=x.interleaved,o!==null){z=o;do V=z.lane,ke.lanes|=V,Yc|=V,z=z.next;while(z!==o)}else z===null&&(x.lanes=0);return[l.memoizedState,x.dispatch]}function mi(o){var l=vr(),x=l.queue;if(x===null)throw Error(p(311));x.lastRenderedReducer=o;var C=x.dispatch,z=x.pending,V=l.memoizedState;if(z!==null){x.pending=null;var se=z=z.next;do V=o(V,se.action),se=se.next;while(se!==z);St(V,l.memoizedState)||(ka=!0),l.memoizedState=V,l.baseQueue===null&&(l.baseState=V),x.lastRenderedState=V}return[V,C]}function ni(){}function ki(o,l){var x=ke,C=vr(),z=l(),V=!St(C.memoizedState,z);if(V&&(C.memoizedState=z,ka=!0),C=C.queue,ca(Pn.bind(null,x,C,o),[o]),C.getSnapshot!==l||V||$e!==null&&$e.memoizedState.tag&1){if(x.flags|=2048,Rn(9,Mn.bind(null,x,C,z,l),void 0,null),wo===null)throw Error(p(349));(De&30)!==0||Ai(x,l,z)}return z}function Ai(o,l,x){o.flags|=16384,o={getSnapshot:l,value:x},l=ke.updateQueue,l===null?(l={lastEffect:null,stores:null},ke.updateQueue=l,l.stores=[o]):(x=l.stores,x===null?l.stores=[o]:x.push(o))}function Mn(o,l,x,C){l.value=x,l.getSnapshot=C,qi(l)&&xo(o)}function Pn(o,l,x){return x(function(){qi(l)&&xo(o)})}function qi(o){var l=o.getSnapshot;o=o.value;try{var x=l();return!St(o,x)}catch{return!0}}function xo(o){var l=Ca(o,1);l!==null&&ql(l,o,1,-1)}function lo(o){var l=Bt();return typeof o=="function"&&(o=o()),l.memoizedState=l.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gr,lastRenderedState:o},l.queue=o,o=o.dispatch=Ld.bind(null,ke,o),[l.memoizedState,o]}function Rn(o,l,x,C){return o={tag:o,create:l,destroy:x,deps:C,next:null},l=ke.updateQueue,l===null?(l={lastEffect:null,stores:null},ke.updateQueue=l,l.lastEffect=o.next=o):(x=l.lastEffect,x===null?l.lastEffect=o.next=o:(C=x.next,x.next=o,o.next=C,l.lastEffect=o)),o}function vl(){return vr().memoizedState}function ua(o,l,x,C){var z=Bt();ke.flags|=o,z.memoizedState=Rn(1|l,x,void 0,C===void 0?null:C)}function Pa(o,l,x,C){var z=vr();C=C===void 0?null:C;var V=void 0;if(Oe!==null){var se=Oe.memoizedState;if(V=se.destroy,C!==null&&Pt(C,se.deps)){z.memoizedState=Rn(l,x,V,C);return}}ke.flags|=o,z.memoizedState=Rn(1|l,x,V,C)}function Ul(o,l){return ua(8390656,8,o,l)}function ca(o,l){return Pa(2048,8,o,l)}function ou(o,l){return Pa(4,2,o,l)}function js(o,l){return Pa(4,4,o,l)}function Us(o,l){if(typeof l=="function")return o=o(),l(o),function(){l(null)};if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function Vl(o,l,x){return x=x!=null?x.concat([o]):null,Pa(4,4,Us.bind(null,l,o),x)}function Ea(){}function su(o,l){var x=vr();l=l===void 0?null:l;var C=x.memoizedState;return C!==null&&l!==null&&Pt(l,C[1])?C[0]:(x.memoizedState=[o,l],o)}function uo(o,l){var x=vr();l=l===void 0?null:l;var C=x.memoizedState;return C!==null&&l!==null&&Pt(l,C[1])?C[0]:(o=o(),x.memoizedState=[o,l],o)}function co(o,l,x){return(De&21)===0?(o.baseState&&(o.baseState=!1,ka=!0),o.memoizedState=x):(St(x,l)||(x=Ie(),ke.lanes|=x,Yc|=x,o.baseState=!0),l)}function ys(o,l){var x=gr;gr=x!==0&&4>x?x:4,o(!0);var C=Ae.transition;Ae.transition={};try{o(!1),l()}finally{gr=x,Ae.transition=C}}function bi(){return vr().memoizedState}function Yh(o,l,x){var C=Jc(o);if(x={lane:C,action:x,hasEagerState:!1,eagerState:null,next:null},Qh(o))Vs(l,x);else if(x=zu(o,l,x,C),x!==null){var z=Ra();ql(x,o,C,z),Ia(x,l,C)}}function Ld(o,l,x){var C=Jc(o),z={lane:C,action:x,hasEagerState:!1,eagerState:null,next:null};if(Qh(o))Vs(l,z);else{var V=o.alternate;if(o.lanes===0&&(V===null||V.lanes===0)&&(V=l.lastRenderedReducer,V!==null))try{var se=l.lastRenderedState,Re=V(se,x);if(z.hasEagerState=!0,z.eagerState=Re,St(Re,se)){var Ge=l.interleaved;Ge===null?(z.next=z,Ru(l)):(z.next=Ge.next,Ge.next=z),l.interleaved=z;return}}catch{}finally{}x=zu(o,l,z,C),x!==null&&(z=Ra(),ql(x,o,C,z),Ia(x,l,C))}}function Qh(o){var l=o.alternate;return o===ke||l!==null&&l===ke}function Vs(o,l){lt=Ue=!0;var x=o.pending;x===null?l.next=l:(l.next=x.next,x.next=l),o.pending=l}function Ia(o,l,x){if((x&4194240)!==0){var C=l.lanes;C&=o.pendingLanes,x|=C,l.lanes=x,ar(o,x)}}var Lu={readContext:jn,useCallback:dt,useContext:dt,useEffect:dt,useImperativeHandle:dt,useInsertionEffect:dt,useLayoutEffect:dt,useMemo:dt,useReducer:dt,useRef:dt,useState:dt,useDebugValue:dt,useDeferredValue:dt,useTransition:dt,useMutableSource:dt,useSyncExternalStore:dt,useId:dt,unstable_isNewReconciler:!1},qa={readContext:jn,useCallback:function(o,l){return Bt().memoizedState=[o,l===void 0?null:l],o},useContext:jn,useEffect:Ul,useImperativeHandle:function(o,l,x){return x=x!=null?x.concat([o]):null,ua(4194308,4,Us.bind(null,l,o),x)},useLayoutEffect:function(o,l){return ua(4194308,4,o,l)},useInsertionEffect:function(o,l){return ua(4,2,o,l)},useMemo:function(o,l){var x=Bt();return l=l===void 0?null:l,o=o(),x.memoizedState=[o,l],o},useReducer:function(o,l,x){var C=Bt();return l=x!==void 0?x(l):l,C.memoizedState=C.baseState=l,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:l},C.queue=o,o=o.dispatch=Yh.bind(null,ke,o),[C.memoizedState,o]},useRef:function(o){var l=Bt();return o={current:o},l.memoizedState=o},useState:lo,useDebugValue:Ea,useDeferredValue:function(o){return Bt().memoizedState=o},useTransition:function(){var o=lo(!1),l=o[0];return o=ys.bind(null,o[1]),Bt().memoizedState=o,[l,o]},useMutableSource:function(){},useSyncExternalStore:function(o,l,x){var C=ke,z=Bt();if(xi){if(x===void 0)throw Error(p(407));x=x()}else{if(x=l(),wo===null)throw Error(p(349));(De&30)!==0||Ai(C,l,x)}z.memoizedState=x;var V={value:x,getSnapshot:l};return z.queue=V,Ul(Pn.bind(null,C,V,o),[o]),C.flags|=2048,Rn(9,Mn.bind(null,C,V,x,l),void 0,null),x},useId:function(){var o=Bt(),l=wo.identifierPrefix;if(xi){var x=dn,C=Wa;x=(C&~(1<<32-yo(C)-1)).toString(32)+x,l=":"+l+"R"+x,x=Mt++,0<x&&(l+="H"+x.toString(32)),l+=":"}else x=Qe++,l=":"+l+"r"+x.toString(32)+":";return o.memoizedState=l},unstable_isNewReconciler:!1},Ma={readContext:jn,useCallback:su,useContext:jn,useEffect:ca,useImperativeHandle:Vl,useInsertionEffect:ou,useLayoutEffect:js,useMemo:uo,useReducer:In,useRef:vl,useState:function(){return In(Gr)},useDebugValue:Ea,useDeferredValue:function(o){var l=vr();return co(l,Oe.memoizedState,o)},useTransition:function(){var o=In(Gr)[0],l=vr().memoizedState;return[o,l]},useMutableSource:ni,useSyncExternalStore:ki,useId:bi,unstable_isNewReconciler:!1},Qo={readContext:jn,useCallback:su,useContext:jn,useEffect:ca,useImperativeHandle:Vl,useInsertionEffect:ou,useLayoutEffect:js,useMemo:uo,useReducer:mi,useRef:vl,useState:function(){return mi(Gr)},useDebugValue:Ea,useDeferredValue:function(o){var l=vr();return Oe===null?l.memoizedState=o:co(l,Oe.memoizedState,o)},useTransition:function(){var o=mi(Gr)[0],l=vr().memoizedState;return[o,l]},useMutableSource:ni,useSyncExternalStore:ki,useId:bi,unstable_isNewReconciler:!1};function bo(o,l){if(o&&o.defaultProps){l=Ht({},l),o=o.defaultProps;for(var x in o)l[x]===void 0&&(l[x]=o[x]);return l}return l}function hc(o,l,x,C){l=o.memoizedState,x=x(C,l),x=x==null?l:Ht({},l,x),o.memoizedState=x,o.lanes===0&&(o.updateQueue.baseState=x)}var xl={isMounted:function(o){return(o=o._reactInternals)?Zn(o)===o:!1},enqueueSetState:function(o,l,x){o=o._reactInternals;var C=Ra(),z=Jc(o),V=aa(C,z);V.payload=l,x!=null&&(V.callback=x),l=la(o,V,z),l!==null&&(ql(l,o,z,C),g(l,o,z))},enqueueReplaceState:function(o,l,x){o=o._reactInternals;var C=Ra(),z=Jc(o),V=aa(C,z);V.tag=1,V.payload=l,x!=null&&(V.callback=x),l=la(o,V,z),l!==null&&(ql(l,o,z,C),g(l,o,z))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var x=Ra(),C=Jc(o),z=aa(x,C);z.tag=2,l!=null&&(z.callback=l),l=la(o,z,C),l!==null&&(ql(l,o,C,x),g(l,o,C))}};function vh(o,l,x,C,z,V,se){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(C,V,se):l.prototype&&l.prototype.isPureReactComponent?!Mr(x,C)||!Mr(z,V):!0}function qc(o,l,x){var C=!1,z=wa,V=l.contextType;return typeof V=="object"&&V!==null?V=jn(V):(z=Ds(l)?ms:$o.current,C=l.contextTypes,V=(C=C!=null)?ml(o,z):wa),l=new l(x,V),o.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=xl,o.stateNode=l,l._reactInternals=o,C&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=z,o.__reactInternalMemoizedMaskedChildContext=V),l}function Kc(o,l,x,C){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(x,C),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(x,C),l.state!==o&&xl.enqueueReplaceState(l,l.state,null)}function pf(o,l,x,C){var z=o.stateNode;z.props=x,z.state=o.memoizedState,z.refs={},Hc(o);var V=l.contextType;typeof V=="object"&&V!==null?z.context=jn(V):(V=Ds(l)?ms:$o.current,z.context=ml(o,V)),z.state=o.memoizedState,V=l.getDerivedStateFromProps,typeof V=="function"&&(hc(o,l,V,x),z.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof z.getSnapshotBeforeUpdate=="function"||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(l=z.state,typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount(),l!==z.state&&xl.enqueueReplaceState(z,z.state,null),r(o,x,z,C),z.state=o.memoizedState),typeof z.componentDidMount=="function"&&(o.flags|=4194308)}function bl(o,l){try{var x="",C=l;do x+=Rt(C),C=C.return;while(C);var z=x}catch(V){z=`
Error generating stack: `+V.message+`
`+V.stack}return{value:o,source:l,stack:z,digest:null}}function Du(o,l,x){return{value:o,source:null,stack:x??null,digest:l??null}}function xh(o,l){try{console.error(l.value)}catch(x){setTimeout(function(){throw x})}}var Cp=typeof WeakMap=="function"?WeakMap:Map;function bh(o,l,x){x=aa(-1,x),x.tag=3,x.payload={element:null};var C=l.value;return x.callback=function(){Wd||(Wd=!0,fd=C),xh(o,l)},x}function Dd(o,l,x){x=aa(-1,x),x.tag=3;var C=o.type.getDerivedStateFromError;if(typeof C=="function"){var z=l.value;x.payload=function(){return C(z)},x.callback=function(){xh(o,l)}}var V=o.stateNode;return V!==null&&typeof V.componentDidCatch=="function"&&(x.callback=function(){xh(o,l),typeof C!="function"&&(gc===null?gc=new Set([this]):gc.add(this));var se=l.stack;this.componentDidCatch(l.value,{componentStack:se!==null?se:""})}),x}function Od(o,l,x){var C=o.pingCache;if(C===null){C=o.pingCache=new Cp;var z=new Set;C.set(l,z)}else z=C.get(l),z===void 0&&(z=new Set,C.set(l,z));z.has(x)||(z.add(x),o=pm.bind(null,o,l,x),l.then(o,o))}function Wf(o){do{var l;if((l=o.tag===13)&&(l=o.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return o;o=o.return}while(o!==null);return null}function Hf(o,l,x,C,z){return(o.mode&1)===0?(o===l?o.flags|=65536:(o.flags|=128,x.flags|=131072,x.flags&=-52805,x.tag===1&&(x.alternate===null?x.tag=17:(l=aa(-1,1),l.tag=2,la(x,l,1))),x.lanes|=1),o):(o.flags|=65536,o.lanes=z,o)}var Jh=et.ReactCurrentOwner,ka=!1;function Jo(o,l,x,C){l.child=o===null?Vr(l,null,x,C):fr(l,o.child,x,C)}function qf(o,l,x,C,z){x=x.render;var V=l.ref;return sa(l,z),C=er(o,l,x,C,V,z),x=tr(),o!==null&&!ka?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~z,Gl(o,l,z)):(xi&&x&&ac(l),l.flags|=1,Jo(o,l,C,z),l.child)}function mf(o,l,x,C,z){if(o===null){var V=x.type;return typeof V=="function"&&!Pf(V)&&V.defaultProps===void 0&&x.compare===null&&x.defaultProps===void 0?(l.tag=15,l.type=V,ha(o,l,V,C,z)):(o=md(x.type,null,C,l,l.mode,z),o.ref=l.ref,o.return=l,l.child=o)}if(V=o.child,(o.lanes&z)===0){var se=V.memoizedProps;if(x=x.compare,x=x!==null?x:Mr,x(se,C)&&o.ref===l.ref)return Gl(o,l,z)}return l.flags|=1,o=Tl(V,C),o.ref=l.ref,o.return=l,l.child=o}function ha(o,l,x,C,z){if(o!==null){var V=o.memoizedProps;if(Mr(V,C)&&o.ref===l.ref)if(ka=!1,l.pendingProps=C=V,(o.lanes&z)!==0)(o.flags&131072)!==0&&(ka=!0);else return l.lanes=o.lanes,Gl(o,l,z)}return ed(o,l,x,C,z)}function Kf(o,l,x){var C=l.pendingProps,z=C.children,V=o!==null?o.memoizedState:null;if(C.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pi(cd,Ya),Ya|=x;else{if((x&1073741824)===0)return o=V!==null?V.baseLanes|x:x,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:o,cachePool:null,transitions:null},l.updateQueue=null,Pi(cd,Ya),Ya|=o,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},C=V!==null?V.baseLanes:x,Pi(cd,Ya),Ya|=C}else V!==null?(C=V.baseLanes|x,l.memoizedState=null):C=x,Pi(cd,Ya),Ya|=C;return Jo(o,l,z,x),l.child}function wh(o,l){var x=l.ref;(o===null&&x!==null||o!==null&&o.ref!==x)&&(l.flags|=512,l.flags|=2097152)}function ed(o,l,x,C,z){var V=Ds(x)?ms:$o.current;return V=ml(l,V),sa(l,z),x=er(o,l,x,C,V,z),C=tr(),o!==null&&!ka?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~z,Gl(o,l,z)):(xi&&C&&ac(l),l.flags|=1,Jo(o,l,x,z),l.child)}function td(o,l,x,C,z){if(Ds(x)){var V=!0;Hi(l)}else V=!1;if(sa(l,z),l.stateNode===null)da(o,l),qc(l,x,C),pf(l,x,C,z),C=!0;else if(o===null){var se=l.stateNode,Re=l.memoizedProps;se.props=Re;var Ge=se.context,It=x.contextType;typeof It=="object"&&It!==null?It=jn(It):(It=Ds(x)?ms:$o.current,It=ml(l,It));var Qt=x.getDerivedStateFromProps,ir=typeof Qt=="function"||typeof se.getSnapshotBeforeUpdate=="function";ir||typeof se.UNSAFE_componentWillReceiveProps!="function"&&typeof se.componentWillReceiveProps!="function"||(Re!==C||Ge!==It)&&Kc(l,se,C,It),Uo=!1;var Jt=l.memoizedState;se.state=Jt,r(l,C,se,z),Ge=l.memoizedState,Re!==C||Jt!==Ge||Ko.current||Uo?(typeof Qt=="function"&&(hc(l,x,Qt,C),Ge=l.memoizedState),(Re=Uo||vh(l,x,Re,C,Jt,Ge,It))?(ir||typeof se.UNSAFE_componentWillMount!="function"&&typeof se.componentWillMount!="function"||(typeof se.componentWillMount=="function"&&se.componentWillMount(),typeof se.UNSAFE_componentWillMount=="function"&&se.UNSAFE_componentWillMount()),typeof se.componentDidMount=="function"&&(l.flags|=4194308)):(typeof se.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=C,l.memoizedState=Ge),se.props=C,se.state=Ge,se.context=It,C=Re):(typeof se.componentDidMount=="function"&&(l.flags|=4194308),C=!1)}else{se=l.stateNode,Xh(o,l),Re=l.memoizedProps,It=l.type===l.elementType?Re:bo(l.type,Re),se.props=It,ir=l.pendingProps,Jt=se.context,Ge=x.contextType,typeof Ge=="object"&&Ge!==null?Ge=jn(Ge):(Ge=Ds(x)?ms:$o.current,Ge=ml(l,Ge));var Er=x.getDerivedStateFromProps;(Qt=typeof Er=="function"||typeof se.getSnapshotBeforeUpdate=="function")||typeof se.UNSAFE_componentWillReceiveProps!="function"&&typeof se.componentWillReceiveProps!="function"||(Re!==ir||Jt!==Ge)&&Kc(l,se,C,Ge),Uo=!1,Jt=l.memoizedState,se.state=Jt,r(l,C,se,z);var Or=l.memoizedState;Re!==ir||Jt!==Or||Ko.current||Uo?(typeof Er=="function"&&(hc(l,x,Er,C),Or=l.memoizedState),(It=Uo||vh(l,x,It,C,Jt,Or,Ge)||!1)?(Qt||typeof se.UNSAFE_componentWillUpdate!="function"&&typeof se.componentWillUpdate!="function"||(typeof se.componentWillUpdate=="function"&&se.componentWillUpdate(C,Or,Ge),typeof se.UNSAFE_componentWillUpdate=="function"&&se.UNSAFE_componentWillUpdate(C,Or,Ge)),typeof se.componentDidUpdate=="function"&&(l.flags|=4),typeof se.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof se.componentDidUpdate!="function"||Re===o.memoizedProps&&Jt===o.memoizedState||(l.flags|=4),typeof se.getSnapshotBeforeUpdate!="function"||Re===o.memoizedProps&&Jt===o.memoizedState||(l.flags|=1024),l.memoizedProps=C,l.memoizedState=Or),se.props=C,se.state=Or,se.context=Ge,C=It):(typeof se.componentDidUpdate!="function"||Re===o.memoizedProps&&Jt===o.memoizedState||(l.flags|=4),typeof se.getSnapshotBeforeUpdate!="function"||Re===o.memoizedProps&&Jt===o.memoizedState||(l.flags|=1024),C=!1)}return gf(o,l,x,C,V,z)}function gf(o,l,x,C,z,V){wh(o,l);var se=(l.flags&128)!==0;if(!C&&!se)return z&&ic(l,x,!1),Gl(o,l,V);C=l.stateNode,Jh.current=l;var Re=se&&typeof x.getDerivedStateFromError!="function"?null:C.render();return l.flags|=1,o!==null&&se?(l.child=fr(l,o.child,null,V),l.child=fr(l,null,Re,V)):Jo(o,l,Re,V),l.memoizedState=C.state,z&&ic(l,x,!0),l.child}function Xf(o){var l=o.stateNode;l.pendingContext?Za(o,l.pendingContext,l.pendingContext!==l.context):l.context&&Za(o,l.context,!1),O(o,l.containerInfo)}function Ou(o,l,x,C,z){return Ha(),yl(z),l.flags|=256,Jo(o,l,x,C),l.child}var Fd={dehydrated:null,treeContext:null,retryLane:0};function rd(o){return{baseLanes:o,cachePool:null,transitions:null}}function Bd(o,l,x){var C=l.pendingProps,z=Q.current,V=!1,se=(l.flags&128)!==0,Re;if((Re=se)||(Re=o!==null&&o.memoizedState===null?!1:(z&2)!==0),Re?(V=!0,l.flags&=-129):(o===null||o.memoizedState!==null)&&(z|=1),Pi(Q,z&1),o===null)return oa(l),o=l.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((l.mode&1)===0?l.lanes=1:o.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(se=C.children,o=C.fallback,V?(C=l.mode,V=l.child,se={mode:"hidden",children:se},(C&1)===0&&V!==null?(V.childLanes=0,V.pendingProps=se):V=Ef(se,C,0,null),o=Mh(o,C,x,null),V.return=l,o.return=l,V.sibling=o,l.child=V,l.child.memoizedState=rd(x),l.memoizedState=Fd,o):Sh(l,se));if(z=o.memoizedState,z!==null&&(Re=z.dehydrated,Re!==null))return ln(o,l,se,C,Re,z,x);if(V){V=C.fallback,se=l.mode,z=o.child,Re=z.sibling;var Ge={mode:"hidden",children:C.children};return(se&1)===0&&l.child!==z?(C=l.child,C.childLanes=0,C.pendingProps=Ge,l.deletions=null):(C=Tl(z,Ge),C.subtreeFlags=z.subtreeFlags&14680064),Re!==null?V=Tl(Re,V):(V=Mh(V,se,x,null),V.flags|=2),V.return=l,C.return=l,C.sibling=V,l.child=C,C=V,V=l.child,se=o.child.memoizedState,se=se===null?rd(x):{baseLanes:se.baseLanes|x,cachePool:null,transitions:se.transitions},V.memoizedState=se,V.childLanes=o.childLanes&~x,l.memoizedState=Fd,C}return V=o.child,o=V.sibling,C=Tl(V,{mode:"visible",children:C.children}),(l.mode&1)===0&&(C.lanes=x),C.return=l,C.sibling=null,o!==null&&(x=l.deletions,x===null?(l.deletions=[o],l.flags|=16):x.push(o)),l.child=C,l.memoizedState=null,C}function Sh(o,l){return l=Ef({mode:"visible",children:l},o.mode,0,null),l.return=o,o.child=l}function dc(o,l,x,C){return C!==null&&yl(C),fr(l,o.child,null,x),o=Sh(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function ln(o,l,x,C,z,V,se){if(x)return l.flags&256?(l.flags&=-257,C=Du(Error(p(422))),dc(o,l,se,C)):l.memoizedState!==null?(l.child=o.child,l.flags|=128,null):(V=C.fallback,z=l.mode,C=Ef({mode:"visible",children:C.children},z,0,null),V=Mh(V,z,se,null),V.flags|=2,C.return=l,V.return=l,C.sibling=V,l.child=C,(l.mode&1)!==0&&fr(l,o.child,null,se),l.child.memoizedState=rd(se),l.memoizedState=Fd,V);if((l.mode&1)===0)return dc(o,l,se,null);if(z.data==="$!"){if(C=z.nextSibling&&z.nextSibling.dataset,C)var Re=C.dgst;return C=Re,V=Error(p(419)),C=Du(V,C,void 0),dc(o,l,se,C)}if(Re=(se&o.childLanes)!==0,ka||Re){if(C=wo,C!==null){switch(se&-se){case 4:z=2;break;case 16:z=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:z=32;break;case 536870912:z=268435456;break;default:z=0}z=(z&(C.suspendedLanes|se))!==0?0:z,z!==0&&z!==V.retryLane&&(V.retryLane=z,Ca(o,z),ql(C,o,z,-1))}return Sf(),C=Du(Error(p(421))),dc(o,l,se,C)}return z.data==="$?"?(l.flags|=128,l.child=o.child,l=Qd.bind(null,o),z._reactRetry=l,null):(o=V.treeContext,Fs=vo(z.nextSibling),Yo=l,xi=!0,Bs=null,o!==null&&(Ta[Xo++]=Wa,Ta[Xo++]=dn,Ta[Xo++]=gl,Wa=o.id,dn=o.overflow,gl=l),l=Sh(l,C.children),l.flags|=4096,l)}function nd(o,l,x){o.lanes|=l;var C=o.alternate;C!==null&&(C.lanes|=l),jo(o.return,l,x)}function Th(o,l,x,C,z){var V=o.memoizedState;V===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:C,tail:x,tailMode:z}:(V.isBackwards=l,V.rendering=null,V.renderingStartTime=0,V.last=C,V.tail=x,V.tailMode=z)}function Zl(o,l,x){var C=l.pendingProps,z=C.revealOrder,V=C.tail;if(Jo(o,l,C.children,x),C=Q.current,(C&2)!==0)C=C&1|2,l.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&nd(o,x,l);else if(o.tag===19)nd(o,x,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}C&=1}if(Pi(Q,C),(l.mode&1)===0)l.memoizedState=null;else switch(z){case"forwards":for(x=l.child,z=null;x!==null;)o=x.alternate,o!==null&&ie(o)===null&&(z=x),x=x.sibling;x=z,x===null?(z=l.child,l.child=null):(z=x.sibling,x.sibling=null),Th(l,!1,z,x,V);break;case"backwards":for(x=null,z=l.child,l.child=null;z!==null;){if(o=z.alternate,o!==null&&ie(o)===null){l.child=z;break}o=z.sibling,z.sibling=x,x=z,z=o}Th(l,!0,x,null,V);break;case"together":Th(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function da(o,l){(l.mode&1)===0&&o!==null&&(o.alternate=null,l.alternate=null,l.flags|=2)}function Gl(o,l,x){if(o!==null&&(l.dependencies=o.dependencies),Yc|=l.lanes,(x&l.childLanes)===0)return null;if(o!==null&&l.child!==o.child)throw Error(p(153));if(l.child!==null){for(o=l.child,x=Tl(o,o.pendingProps),l.child=x,x.return=l;o.sibling!==null;)o=o.sibling,x=x.sibling=Tl(o,o.pendingProps),x.return=l;x.sibling=null}return l.child}function yf(o,l,x){switch(l.tag){case 3:Xf(l),Ha();break;case 5:W(l);break;case 1:Ds(l.type)&&Hi(l);break;case 4:O(l,l.stateNode.containerInfo);break;case 10:var C=l.type._context,z=l.memoizedProps.value;Pi(iu,C._currentValue),C._currentValue=z;break;case 13:if(C=l.memoizedState,C!==null)return C.dehydrated!==null?(Pi(Q,Q.current&1),l.flags|=128,null):(x&l.child.childLanes)!==0?Bd(o,l,x):(Pi(Q,Q.current&1),o=Gl(o,l,x),o!==null?o.sibling:null);Pi(Q,Q.current&1);break;case 19:if(C=(x&l.childLanes)!==0,(o.flags&128)!==0){if(C)return Zl(o,l,x);l.flags|=128}if(z=l.memoizedState,z!==null&&(z.rendering=null,z.tail=null,z.lastEffect=null),Pi(Q,Q.current),C)break;return null;case 22:case 23:return l.lanes=0,Kf(o,l,x)}return Gl(o,l,x)}var Zs,_f,Pp,Yf;Zs=function(o,l){for(var x=l.child;x!==null;){if(x.tag===5||x.tag===6)o.appendChild(x.stateNode);else if(x.tag!==4&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===l)break;for(;x.sibling===null;){if(x.return===null||x.return===l)return;x=x.return}x.sibling.return=x.return,x=x.sibling}},_f=function(){},Pp=function(o,l,x,C){var z=o.memoizedProps;if(z!==C){o=l.stateNode,A(y.current);var V=null;switch(x){case"input":z=br(o,z),C=br(o,C),V=[];break;case"select":z=Ht({},z,{value:void 0}),C=Ht({},C,{value:void 0}),V=[];break;case"textarea":z=Sr(o,z),C=Sr(o,C),V=[];break;default:typeof z.onClick!="function"&&typeof C.onClick=="function"&&(o.onclick=Ju)}ae(x,C);var se;x=null;for(It in z)if(!C.hasOwnProperty(It)&&z.hasOwnProperty(It)&&z[It]!=null)if(It==="style"){var Re=z[It];for(se in Re)Re.hasOwnProperty(se)&&(x||(x={}),x[se]="")}else It!=="dangerouslySetInnerHTML"&&It!=="children"&&It!=="suppressContentEditableWarning"&&It!=="suppressHydrationWarning"&&It!=="autoFocus"&&(P.hasOwnProperty(It)?V||(V=[]):(V=V||[]).push(It,null));for(It in C){var Ge=C[It];if(Re=z!=null?z[It]:void 0,C.hasOwnProperty(It)&&Ge!==Re&&(Ge!=null||Re!=null))if(It==="style")if(Re){for(se in Re)!Re.hasOwnProperty(se)||Ge&&Ge.hasOwnProperty(se)||(x||(x={}),x[se]="");for(se in Ge)Ge.hasOwnProperty(se)&&Re[se]!==Ge[se]&&(x||(x={}),x[se]=Ge[se])}else x||(V||(V=[]),V.push(It,x)),x=Ge;else It==="dangerouslySetInnerHTML"?(Ge=Ge?Ge.__html:void 0,Re=Re?Re.__html:void 0,Ge!=null&&Re!==Ge&&(V=V||[]).push(It,Ge)):It==="children"?typeof Ge!="string"&&typeof Ge!="number"||(V=V||[]).push(It,""+Ge):It!=="suppressContentEditableWarning"&&It!=="suppressHydrationWarning"&&(P.hasOwnProperty(It)?(Ge!=null&&It==="onScroll"&&Li("scroll",o),V||Re===Ge||(V=[])):(V=V||[]).push(It,Ge))}x&&(V=V||[]).push("style",x);var It=V;(l.updateQueue=It)&&(l.flags|=4)}},Yf=function(o,l,x,C){x!==C&&(l.flags|=4)};function Nd(o,l){if(!xi)switch(o.tailMode){case"hidden":l=o.tail;for(var x=null;l!==null;)l.alternate!==null&&(x=l),l=l.sibling;x===null?o.tail=null:x.sibling=null;break;case"collapsed":x=o.tail;for(var C=null;x!==null;)x.alternate!==null&&(C=x),x=x.sibling;C===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:C.sibling=null}}function Gs(o){var l=o.alternate!==null&&o.alternate.child===o.child,x=0,C=0;if(l)for(var z=o.child;z!==null;)x|=z.lanes|z.childLanes,C|=z.subtreeFlags&14680064,C|=z.flags&14680064,z.return=o,z=z.sibling;else for(z=o.child;z!==null;)x|=z.lanes|z.childLanes,C|=z.subtreeFlags,C|=z.flags,z.return=o,z=z.sibling;return o.subtreeFlags|=C,o.childLanes=x,l}function Qf(o,l,x){var C=l.pendingProps;switch(Au(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gs(l),null;case 1:return Ds(l.type)&&Ao(),Gs(l),null;case 3:return C=l.stateNode,N(),Mi(Ko),Mi($o),xe(),C.pendingContext&&(C.context=C.pendingContext,C.pendingContext=null),(o===null||o.child===null)&&(si(l)?l.flags|=4:o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Bs!==null&&(Ph(Bs),Bs=null))),_f(o,l),Gs(l),null;case 5:G(l);var z=A(E.current);if(x=l.type,o!==null&&l.stateNode!=null)Pp(o,l,x,C,z),o.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!C){if(l.stateNode===null)throw Error(p(166));return Gs(l),null}if(o=A(y.current),si(l)){C=l.stateNode,x=l.type;var V=l.memoizedProps;switch(C[Va]=l,C[Ho]=V,o=(l.mode&1)!==0,x){case"dialog":Li("cancel",C),Li("close",C);break;case"iframe":case"object":case"embed":Li("load",C);break;case"video":case"audio":for(z=0;z<ba.length;z++)Li(ba[z],C);break;case"source":Li("error",C);break;case"img":case"image":case"link":Li("error",C),Li("load",C);break;case"details":Li("toggle",C);break;case"input":on(C,V),Li("invalid",C);break;case"select":C._wrapperState={wasMultiple:!!V.multiple},Li("invalid",C);break;case"textarea":Vn(C,V),Li("invalid",C)}ae(x,V),z=null;for(var se in V)if(V.hasOwnProperty(se)){var Re=V[se];se==="children"?typeof Re=="string"?C.textContent!==Re&&(V.suppressHydrationWarning!==!0&&Vc(C.textContent,Re,o),z=["children",Re]):typeof Re=="number"&&C.textContent!==""+Re&&(V.suppressHydrationWarning!==!0&&Vc(C.textContent,Re,o),z=["children",""+Re]):P.hasOwnProperty(se)&&Re!=null&&se==="onScroll"&&Li("scroll",C)}switch(x){case"input":Cr(C),sn(C,V,!0);break;case"textarea":Cr(C),Ti(C);break;case"select":case"option":break;default:typeof V.onClick=="function"&&(C.onclick=Ju)}C=z,l.updateQueue=C,C!==null&&(l.flags|=4)}else{se=z.nodeType===9?z:z.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=ei(x)),o==="http://www.w3.org/1999/xhtml"?x==="script"?(o=se.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof C.is=="string"?o=se.createElement(x,{is:C.is}):(o=se.createElement(x),x==="select"&&(se=o,C.multiple?se.multiple=!0:C.size&&(se.size=C.size))):o=se.createElementNS(o,x),o[Va]=l,o[Ho]=C,Zs(o,l,!1,!1),l.stateNode=o;e:{switch(se=le(x,C),x){case"dialog":Li("cancel",o),Li("close",o),z=C;break;case"iframe":case"object":case"embed":Li("load",o),z=C;break;case"video":case"audio":for(z=0;z<ba.length;z++)Li(ba[z],o);z=C;break;case"source":Li("error",o),z=C;break;case"img":case"image":case"link":Li("error",o),Li("load",o),z=C;break;case"details":Li("toggle",o),z=C;break;case"input":on(o,C),z=br(o,C),Li("invalid",o);break;case"option":z=C;break;case"select":o._wrapperState={wasMultiple:!!C.multiple},z=Ht({},C,{value:void 0}),Li("invalid",o);break;case"textarea":Vn(o,C),z=Sr(o,C),Li("invalid",o);break;default:z=C}ae(x,z),Re=z;for(V in Re)if(Re.hasOwnProperty(V)){var Ge=Re[V];V==="style"?go(o,Ge):V==="dangerouslySetInnerHTML"?(Ge=Ge?Ge.__html:void 0,Ge!=null&&eo(o,Ge)):V==="children"?typeof Ge=="string"?(x!=="textarea"||Ge!=="")&&Wi(o,Ge):typeof Ge=="number"&&Wi(o,""+Ge):V!=="suppressContentEditableWarning"&&V!=="suppressHydrationWarning"&&V!=="autoFocus"&&(P.hasOwnProperty(V)?Ge!=null&&V==="onScroll"&&Li("scroll",o):Ge!=null&&Ct(o,V,Ge,se))}switch(x){case"input":Cr(o),sn(o,C,!1);break;case"textarea":Cr(o),Ti(o);break;case"option":C.value!=null&&o.setAttribute("value",""+pr(C.value));break;case"select":o.multiple=!!C.multiple,V=C.value,V!=null?An(o,!!C.multiple,V,!1):C.defaultValue!=null&&An(o,!!C.multiple,C.defaultValue,!0);break;default:typeof z.onClick=="function"&&(o.onclick=Ju)}switch(x){case"button":case"input":case"select":case"textarea":C=!!C.autoFocus;break e;case"img":C=!0;break e;default:C=!1}}C&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Gs(l),null;case 6:if(o&&l.stateNode!=null)Yf(o,l,o.memoizedProps,C);else{if(typeof C!="string"&&l.stateNode===null)throw Error(p(166));if(x=A(E.current),A(y.current),si(l)){if(C=l.stateNode,x=l.memoizedProps,C[Va]=l,(V=C.nodeValue!==x)&&(o=Yo,o!==null))switch(o.tag){case 3:Vc(C.nodeValue,x,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&Vc(C.nodeValue,x,(o.mode&1)!==0)}V&&(l.flags|=4)}else C=(x.nodeType===9?x:x.ownerDocument).createTextNode(C),C[Va]=l,l.stateNode=C}return Gs(l),null;case 13:if(Mi(Q),C=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(xi&&Fs!==null&&(l.mode&1)!==0&&(l.flags&128)===0)uc(),Ha(),l.flags|=98560,V=!1;else if(V=si(l),C!==null&&C.dehydrated!==null){if(o===null){if(!V)throw Error(p(318));if(V=l.memoizedState,V=V!==null?V.dehydrated:null,!V)throw Error(p(317));V[Va]=l}else Ha(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Gs(l),V=!1}else Bs!==null&&(Ph(Bs),Bs=null),V=!0;if(!V)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=x,l):(C=C!==null,C!==(o!==null&&o.memoizedState!==null)&&C&&(l.child.flags|=8192,(l.mode&1)!==0&&(o===null||(Q.current&1)!==0?ts===0&&(ts=3):Sf())),l.updateQueue!==null&&(l.flags|=4),Gs(l),null);case 4:return N(),_f(o,l),o===null&&hl(l.stateNode.containerInfo),Gs(l),null;case 10:return $s(l.type._context),Gs(l),null;case 17:return Ds(l.type)&&Ao(),Gs(l),null;case 19:if(Mi(Q),V=l.memoizedState,V===null)return Gs(l),null;if(C=(l.flags&128)!==0,se=V.rendering,se===null)if(C)Nd(V,!1);else{if(ts!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(se=ie(o),se!==null){for(l.flags|=128,Nd(V,!1),C=se.updateQueue,C!==null&&(l.updateQueue=C,l.flags|=4),l.subtreeFlags=0,C=x,x=l.child;x!==null;)V=x,o=C,V.flags&=14680066,se=V.alternate,se===null?(V.childLanes=0,V.lanes=o,V.child=null,V.subtreeFlags=0,V.memoizedProps=null,V.memoizedState=null,V.updateQueue=null,V.dependencies=null,V.stateNode=null):(V.childLanes=se.childLanes,V.lanes=se.lanes,V.child=se.child,V.subtreeFlags=0,V.deletions=null,V.memoizedProps=se.memoizedProps,V.memoizedState=se.memoizedState,V.updateQueue=se.updateQueue,V.type=se.type,o=se.dependencies,V.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),x=x.sibling;return Pi(Q,Q.current&1|2),l.child}o=o.sibling}V.tail!==null&&hn()>mc&&(l.flags|=128,C=!0,Nd(V,!1),l.lanes=4194304)}else{if(!C)if(o=ie(se),o!==null){if(l.flags|=128,C=!0,x=o.updateQueue,x!==null&&(l.updateQueue=x,l.flags|=4),Nd(V,!0),V.tail===null&&V.tailMode==="hidden"&&!se.alternate&&!xi)return Gs(l),null}else 2*hn()-V.renderingStartTime>mc&&x!==1073741824&&(l.flags|=128,C=!0,Nd(V,!1),l.lanes=4194304);V.isBackwards?(se.sibling=l.child,l.child=se):(x=V.last,x!==null?x.sibling=se:l.child=se,V.last=se)}return V.tail!==null?(l=V.tail,V.rendering=l,V.tail=l.sibling,V.renderingStartTime=hn(),l.sibling=null,x=Q.current,Pi(Q,C?x&1|2:x&1),l):(Gs(l),null);case 22:case 23:return ip(),C=l.memoizedState!==null,o!==null&&o.memoizedState!==null!==C&&(l.flags|=8192),C&&(l.mode&1)!==0?(Ya&1073741824)!==0&&(Gs(l),l.subtreeFlags&6&&(l.flags|=8192)):Gs(l),null;case 24:return null;case 25:return null}throw Error(p(156,l.tag))}function Jf(o,l){switch(Au(l),l.tag){case 1:return Ds(l.type)&&Ao(),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return N(),Mi(Ko),Mi($o),xe(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 5:return G(l),null;case 13:if(Mi(Q),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(p(340));Ha()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return Mi(Q),null;case 4:return N(),null;case 10:return $s(l.type._context),null;case 22:case 23:return ip(),null;case 24:return null;default:return null}}var $d=!1,wi=!1,es=typeof WeakSet=="function"?WeakSet:Set,Lr=null;function id(o,l){var x=o.ref;if(x!==null)if(typeof x=="function")try{x(null)}catch(C){Ki(o,l,C)}else x.current=null}function jd(o,l,x){try{x()}catch(C){Ki(o,l,C)}}var Ep=!1;function hm(o,l){if(ec=cs,o=ri(),bu(o)){if("selectionStart"in o)var x={start:o.selectionStart,end:o.selectionEnd};else e:{x=(x=o.ownerDocument)&&x.defaultView||window;var C=x.getSelection&&x.getSelection();if(C&&C.rangeCount!==0){x=C.anchorNode;var z=C.anchorOffset,V=C.focusNode;C=C.focusOffset;try{x.nodeType,V.nodeType}catch{x=null;break e}var se=0,Re=-1,Ge=-1,It=0,Qt=0,ir=o,Jt=null;t:for(;;){for(var Er;ir!==x||z!==0&&ir.nodeType!==3||(Re=se+z),ir!==V||C!==0&&ir.nodeType!==3||(Ge=se+C),ir.nodeType===3&&(se+=ir.nodeValue.length),(Er=ir.firstChild)!==null;)Jt=ir,ir=Er;for(;;){if(ir===o)break t;if(Jt===x&&++It===z&&(Re=se),Jt===V&&++Qt===C&&(Ge=se),(Er=ir.nextSibling)!==null)break;ir=Jt,Jt=ir.parentNode}ir=Er}x=Re===-1||Ge===-1?null:{start:Re,end:Ge}}else x=null}x=x||{start:0,end:0}}else x=null;for(Eu={focusedElem:o,selectionRange:x},cs=!1,Lr=l;Lr!==null;)if(l=Lr,o=l.child,(l.subtreeFlags&1028)!==0&&o!==null)o.return=l,Lr=o;else for(;Lr!==null;){l=Lr;try{var Or=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(Or!==null){var Ur=Or.memoizedProps,fo=Or.memoizedState,pt=l.stateNode,Xe=pt.getSnapshotBeforeUpdate(l.elementType===l.type?Ur:bo(l.type,Ur),fo);pt.__reactInternalSnapshotBeforeUpdate=Xe}break;case 3:var xt=l.stateNode.containerInfo;xt.nodeType===1?xt.textContent="":xt.nodeType===9&&xt.documentElement&&xt.removeChild(xt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163))}}catch(dr){Ki(l,l.return,dr)}if(o=l.sibling,o!==null){o.return=l.return,Lr=o;break}Lr=l.return}return Or=Ep,Ep=!1,Or}function fc(o,l,x){var C=l.updateQueue;if(C=C!==null?C.lastEffect:null,C!==null){var z=C=C.next;do{if((z.tag&o)===o){var V=z.destroy;z.destroy=void 0,V!==void 0&&jd(l,x,V)}z=z.next}while(z!==C)}}function Ud(o,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var x=l=l.next;do{if((x.tag&o)===o){var C=x.create;x.destroy=C()}x=x.next}while(x!==l)}}function od(o){var l=o.ref;if(l!==null){var x=o.stateNode;switch(o.tag){case 5:o=x;break;default:o=x}typeof l=="function"?l(o):l.current=o}}function Ip(o){var l=o.alternate;l!==null&&(o.alternate=null,Ip(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&(delete l[Va],delete l[Ho],delete l[ku],delete l[ce],delete l[rc])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function ep(o){return o.tag===5||o.tag===3||o.tag===4}function sd(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||ep(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function tp(o,l,x){var C=o.tag;if(C===5||C===6)o=o.stateNode,l?x.nodeType===8?x.parentNode.insertBefore(o,l):x.insertBefore(o,l):(x.nodeType===8?(l=x.parentNode,l.insertBefore(o,x)):(l=x,l.appendChild(o)),x=x._reactRootContainer,x!=null||l.onclick!==null||(l.onclick=Ju));else if(C!==4&&(o=o.child,o!==null))for(tp(o,l,x),o=o.sibling;o!==null;)tp(o,l,x),o=o.sibling}function ji(o,l,x){var C=o.tag;if(C===5||C===6)o=o.stateNode,l?x.insertBefore(o,l):x.appendChild(o);else if(C!==4&&(o=o.child,o!==null))for(ji(o,l,x),o=o.sibling;o!==null;)ji(o,l,x),o=o.sibling}var ho=null,Wl=!1;function wl(o,l,x){for(x=x.child;x!==null;)ad(o,l,x),x=x.sibling}function ad(o,l,x){if(ss&&typeof ss.onCommitFiberUnmount=="function")try{ss.onCommitFiberUnmount(to,x)}catch{}switch(x.tag){case 5:wi||id(x,l);case 6:var C=ho,z=Wl;ho=null,wl(o,l,x),ho=C,Wl=z,ho!==null&&(Wl?(o=ho,x=x.stateNode,o.nodeType===8?o.parentNode.removeChild(x):o.removeChild(x)):ho.removeChild(x.stateNode));break;case 18:ho!==null&&(Wl?(o=ho,x=x.stateNode,o.nodeType===8?Ol(o.parentNode,x):o.nodeType===1&&Ol(o,x),En(o)):Ol(ho,x.stateNode));break;case 4:C=ho,z=Wl,ho=x.stateNode.containerInfo,Wl=!0,wl(o,l,x),ho=C,Wl=z;break;case 0:case 11:case 14:case 15:if(!wi&&(C=x.updateQueue,C!==null&&(C=C.lastEffect,C!==null))){z=C=C.next;do{var V=z,se=V.destroy;V=V.tag,se!==void 0&&((V&2)!==0||(V&4)!==0)&&jd(x,l,se),z=z.next}while(z!==C)}wl(o,l,x);break;case 1:if(!wi&&(id(x,l),C=x.stateNode,typeof C.componentWillUnmount=="function"))try{C.props=x.memoizedProps,C.state=x.memoizedState,C.componentWillUnmount()}catch(Re){Ki(x,l,Re)}wl(o,l,x);break;case 21:wl(o,l,x);break;case 22:x.mode&1?(wi=(C=wi)||x.memoizedState!==null,wl(o,l,x),wi=C):wl(o,l,x);break;default:wl(o,l,x)}}function Fu(o){var l=o.updateQueue;if(l!==null){o.updateQueue=null;var x=o.stateNode;x===null&&(x=o.stateNode=new es),l.forEach(function(C){var z=Dp.bind(null,o,C);x.has(C)||(x.add(C),C.then(z,z))})}}function Ka(o,l){var x=l.deletions;if(x!==null)for(var C=0;C<x.length;C++){var z=x[C];try{var V=o,se=l,Re=se;e:for(;Re!==null;){switch(Re.tag){case 5:ho=Re.stateNode,Wl=!1;break e;case 3:ho=Re.stateNode.containerInfo,Wl=!0;break e;case 4:ho=Re.stateNode.containerInfo,Wl=!0;break e}Re=Re.return}if(ho===null)throw Error(p(160));ad(V,se,z),ho=null,Wl=!1;var Ge=z.alternate;Ge!==null&&(Ge.return=null),z.return=null}catch(It){Ki(z,l,It)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)vf(l,o),l=l.sibling}function vf(o,l){var x=o.alternate,C=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Ka(l,o),Aa(o),C&4){try{fc(3,o,o.return),Ud(3,o)}catch(Ur){Ki(o,o.return,Ur)}try{fc(5,o,o.return)}catch(Ur){Ki(o,o.return,Ur)}}break;case 1:Ka(l,o),Aa(o),C&512&&x!==null&&id(x,x.return);break;case 5:if(Ka(l,o),Aa(o),C&512&&x!==null&&id(x,x.return),o.flags&32){var z=o.stateNode;try{Wi(z,"")}catch(Ur){Ki(o,o.return,Ur)}}if(C&4&&(z=o.stateNode,z!=null)){var V=o.memoizedProps,se=x!==null?x.memoizedProps:V,Re=o.type,Ge=o.updateQueue;if(o.updateQueue=null,Ge!==null)try{Re==="input"&&V.type==="radio"&&V.name!=null&&qr(z,V),le(Re,se);var It=le(Re,V);for(se=0;se<Ge.length;se+=2){var Qt=Ge[se],ir=Ge[se+1];Qt==="style"?go(z,ir):Qt==="dangerouslySetInnerHTML"?eo(z,ir):Qt==="children"?Wi(z,ir):Ct(z,Qt,ir,It)}switch(Re){case"input":fn(z,V);break;case"textarea":Hn(z,V);break;case"select":var Jt=z._wrapperState.wasMultiple;z._wrapperState.wasMultiple=!!V.multiple;var Er=V.value;Er!=null?An(z,!!V.multiple,Er,!1):Jt!==!!V.multiple&&(V.defaultValue!=null?An(z,!!V.multiple,V.defaultValue,!0):An(z,!!V.multiple,V.multiple?[]:"",!1))}z[Ho]=V}catch(Ur){Ki(o,o.return,Ur)}}break;case 6:if(Ka(l,o),Aa(o),C&4){if(o.stateNode===null)throw Error(p(162));z=o.stateNode,V=o.memoizedProps;try{z.nodeValue=V}catch(Ur){Ki(o,o.return,Ur)}}break;case 3:if(Ka(l,o),Aa(o),C&4&&x!==null&&x.memoizedState.isDehydrated)try{En(l.containerInfo)}catch(Ur){Ki(o,o.return,Ur)}break;case 4:Ka(l,o),Aa(o);break;case 13:Ka(l,o),Aa(o),z=o.child,z.flags&8192&&(V=z.memoizedState!==null,z.stateNode.isHidden=V,!V||z.alternate!==null&&z.alternate.memoizedState!==null||(xf=hn())),C&4&&Fu(o);break;case 22:if(Qt=x!==null&&x.memoizedState!==null,o.mode&1?(wi=(It=wi)||Qt,Ka(l,o),wi=It):Ka(l,o),Aa(o),C&8192){if(It=o.memoizedState!==null,(o.stateNode.isHidden=It)&&!Qt&&(o.mode&1)!==0)for(Lr=o,Qt=o.child;Qt!==null;){for(ir=Lr=Qt;Lr!==null;){switch(Jt=Lr,Er=Jt.child,Jt.tag){case 0:case 11:case 14:case 15:fc(4,Jt,Jt.return);break;case 1:id(Jt,Jt.return);var Or=Jt.stateNode;if(typeof Or.componentWillUnmount=="function"){C=Jt,x=Jt.return;try{l=C,Or.props=l.memoizedProps,Or.state=l.memoizedState,Or.componentWillUnmount()}catch(Ur){Ki(C,x,Ur)}}break;case 5:id(Jt,Jt.return);break;case 22:if(Jt.memoizedState!==null){Sl(ir);continue}}Er!==null?(Er.return=Jt,Lr=Er):Sl(ir)}Qt=Qt.sibling}e:for(Qt=null,ir=o;;){if(ir.tag===5){if(Qt===null){Qt=ir;try{z=ir.stateNode,It?(V=z.style,typeof V.setProperty=="function"?V.setProperty("display","none","important"):V.display="none"):(Re=ir.stateNode,Ge=ir.memoizedProps.style,se=Ge!=null&&Ge.hasOwnProperty("display")?Ge.display:null,Re.style.display=oi("display",se))}catch(Ur){Ki(o,o.return,Ur)}}}else if(ir.tag===6){if(Qt===null)try{ir.stateNode.nodeValue=It?"":ir.memoizedProps}catch(Ur){Ki(o,o.return,Ur)}}else if((ir.tag!==22&&ir.tag!==23||ir.memoizedState===null||ir===o)&&ir.child!==null){ir.child.return=ir,ir=ir.child;continue}if(ir===o)break e;for(;ir.sibling===null;){if(ir.return===null||ir.return===o)break e;Qt===ir&&(Qt=null),ir=ir.return}Qt===ir&&(Qt=null),ir.sibling.return=ir.return,ir=ir.sibling}}break;case 19:Ka(l,o),Aa(o),C&4&&Fu(o);break;case 21:break;default:Ka(l,o),Aa(o)}}function Aa(o){var l=o.flags;if(l&2){try{e:{for(var x=o.return;x!==null;){if(ep(x)){var C=x;break e}x=x.return}throw Error(p(160))}switch(C.tag){case 5:var z=C.stateNode;C.flags&32&&(Wi(z,""),C.flags&=-33);var V=sd(o);ji(o,V,z);break;case 3:case 4:var se=C.stateNode.containerInfo,Re=sd(o);tp(o,Re,se);break;default:throw Error(p(161))}}catch(Ge){Ki(o,o.return,Ge)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function ld(o,l,x){Lr=o,Xc(o)}function Xc(o,l,x){for(var C=(o.mode&1)!==0;Lr!==null;){var z=Lr,V=z.child;if(z.tag===22&&C){var se=z.memoizedState!==null||$d;if(!se){var Re=z.alternate,Ge=Re!==null&&Re.memoizedState!==null||wi;Re=$d;var It=wi;if($d=se,(wi=Ge)&&!It)for(Lr=z;Lr!==null;)se=Lr,Ge=se.child,se.tag===22&&se.memoizedState!==null?ud(z):Ge!==null?(Ge.return=se,Lr=Ge):ud(z);for(;V!==null;)Lr=V,Xc(V),V=V.sibling;Lr=z,$d=Re,wi=It}Xa(o)}else(z.subtreeFlags&8772)!==0&&V!==null?(V.return=z,Lr=V):Xa(o)}}function Xa(o){for(;Lr!==null;){var l=Lr;if((l.flags&8772)!==0){var x=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:wi||Ud(5,l);break;case 1:var C=l.stateNode;if(l.flags&4&&!wi)if(x===null)C.componentDidMount();else{var z=l.elementType===l.type?x.memoizedProps:bo(l.type,x.memoizedProps);C.componentDidUpdate(z,x.memoizedState,C.__reactInternalSnapshotBeforeUpdate)}var V=l.updateQueue;V!==null&&a(l,V,C);break;case 3:var se=l.updateQueue;if(se!==null){if(x=null,l.child!==null)switch(l.child.tag){case 5:x=l.child.stateNode;break;case 1:x=l.child.stateNode}a(l,se,x)}break;case 5:var Re=l.stateNode;if(x===null&&l.flags&4){x=Re;var Ge=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":Ge.autoFocus&&x.focus();break;case"img":Ge.src&&(x.src=Ge.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var It=l.alternate;if(It!==null){var Qt=It.memoizedState;if(Qt!==null){var ir=Qt.dehydrated;ir!==null&&En(ir)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p(163))}wi||l.flags&512&&od(l)}catch(Jt){Ki(l,l.return,Jt)}}if(l===o){Lr=null;break}if(x=l.sibling,x!==null){x.return=l.return,Lr=x;break}Lr=l.return}}function Sl(o){for(;Lr!==null;){var l=Lr;if(l===o){Lr=null;break}var x=l.sibling;if(x!==null){x.return=l.return,Lr=x;break}Lr=l.return}}function ud(o){for(;Lr!==null;){var l=Lr;try{switch(l.tag){case 0:case 11:case 15:var x=l.return;try{Ud(4,l)}catch(Ge){Ki(l,x,Ge)}break;case 1:var C=l.stateNode;if(typeof C.componentDidMount=="function"){var z=l.return;try{C.componentDidMount()}catch(Ge){Ki(l,z,Ge)}}var V=l.return;try{od(l)}catch(Ge){Ki(l,V,Ge)}break;case 5:var se=l.return;try{od(l)}catch(Ge){Ki(l,se,Ge)}}}catch(Ge){Ki(l,l.return,Ge)}if(l===o){Lr=null;break}var Re=l.sibling;if(Re!==null){Re.return=l.return,Lr=Re;break}Lr=l.return}}var Mp=Math.ceil,Vd=et.ReactCurrentDispatcher,pc=et.ReactCurrentOwner,Hl=et.ReactCurrentBatchConfig,Qn=0,wo=null,So=null,_s=0,Ya=0,cd=ps(0),ts=0,Zd=null,Yc=0,Gd=0,hd=0,dd=null,fa=null,xf=0,mc=1/0,Bu=null,Wd=!1,fd=null,gc=null,Hd=!1,yc=null,rs=0,qd=0,Kd=null,Qc=-1,Ch=0;function Ra(){return(Qn&6)!==0?hn():Qc!==-1?Qc:Qc=hn()}function Jc(o){return(o.mode&1)===0?1:(Qn&2)!==0&&_s!==0?_s&-_s:zd.transition!==null?(Ch===0&&(Ch=Ie()),Ch):(o=gr,o!==0||(o=window.event,o=o===void 0?16:Jl(o.type)),o)}function ql(o,l,x,C){if(50<qd)throw qd=0,Kd=null,Error(p(185));ct(o,x,C),((Qn&2)===0||o!==wo)&&(o===wo&&((Qn&2)===0&&(Gd|=x),ts===4&&eh(o,_s)),za(o,C),x===1&&Qn===0&&(l.mode&1)===0&&(mc=hn()+500,Kh&&Sa()))}function za(o,l){var x=o.callbackNode;J(o,l);var C=Is(o,o===wo?_s:0);if(C===0)x!==null&&tl(x),o.callbackNode=null,o.callbackPriority=0;else if(l=C&-C,o.callbackPriority!==l){if(x!=null&&tl(x),l===1)o.tag===0?ru(Ap.bind(null,o)):_h(Ap.bind(null,o)),Mu(function(){(Qn&6)===0&&Sa()}),x=null;else{switch(Ar(C)){case 1:x=Kn;break;case 4:x=Oa;break;case 16:x=os;break;case 536870912:x=Oo;break;default:x=os}x=sp(x,bf.bind(null,o))}o.callbackPriority=l,o.callbackNode=x}}function bf(o,l){if(Qc=-1,Ch=0,(Qn&6)!==0)throw Error(p(327));var x=o.callbackNode;if(pd()&&o.callbackNode!==x)return null;var C=Is(o,o===wo?_s:0);if(C===0)return null;if((C&30)!==0||(C&o.expiredLanes)!==0||l)l=Xd(o,C);else{l=C;var z=Qn;Qn|=2;var V=wf();(wo!==o||_s!==l)&&(Bu=null,mc=hn()+500,Ih(o,l));do try{dm();break}catch(Re){op(o,Re)}while(!0);_l(),Vd.current=V,Qn=z,So!==null?l=0:(wo=null,_s=0,l=ts)}if(l!==0){if(l===2&&(z=de(o),z!==0&&(C=z,l=rp(o,z))),l===1)throw x=Zd,Ih(o,0),eh(o,C),za(o,hn()),x;if(l===6)eh(o,C);else{if(z=o.current.alternate,(C&30)===0&&!kp(z)&&(l=Xd(o,C),l===2&&(V=de(o),V!==0&&(C=V,l=rp(o,V))),l===1))throw x=Zd,Ih(o,0),eh(o,C),za(o,hn()),x;switch(o.finishedWork=z,o.finishedLanes=C,l){case 0:case 1:throw Error(p(345));case 2:th(o,fa,Bu);break;case 3:if(eh(o,C),(C&130023424)===C&&(l=xf+500-hn(),10<l)){if(Is(o,0)!==0)break;if(z=o.suspendedLanes,(z&C)!==C){Ra(),o.pingedLanes|=o.suspendedLanes&z;break}o.timeoutHandle=dl(th.bind(null,o,fa,Bu),l);break}th(o,fa,Bu);break;case 4:if(eh(o,C),(C&4194240)===C)break;for(l=o.eventTimes,z=-1;0<C;){var se=31-yo(C);V=1<<se,se=l[se],se>z&&(z=se),C&=~V}if(C=z,C=hn()-C,C=(120>C?120:480>C?480:1080>C?1080:1920>C?1920:3e3>C?3e3:4320>C?4320:1960*Mp(C/1960))-C,10<C){o.timeoutHandle=dl(th.bind(null,o,fa,Bu),C);break}th(o,fa,Bu);break;case 5:th(o,fa,Bu);break;default:throw Error(p(329))}}}return za(o,hn()),o.callbackNode===x?bf.bind(null,o):null}function rp(o,l){var x=dd;return o.current.memoizedState.isDehydrated&&(Ih(o,l).flags|=256),o=Xd(o,l),o!==2&&(l=fa,fa=x,l!==null&&Ph(l)),o}function Ph(o){fa===null?fa=o:fa.push.apply(fa,o)}function kp(o){for(var l=o;;){if(l.flags&16384){var x=l.updateQueue;if(x!==null&&(x=x.stores,x!==null))for(var C=0;C<x.length;C++){var z=x[C],V=z.getSnapshot;z=z.value;try{if(!St(V(),z))return!1}catch{return!1}}}if(x=l.child,l.subtreeFlags&16384&&x!==null)x.return=l,l=x;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function eh(o,l){for(l&=~hd,l&=~Gd,o.suspendedLanes|=l,o.pingedLanes&=~l,o=o.expirationTimes;0<l;){var x=31-yo(l),C=1<<x;o[x]=-1,l&=~C}}function Ap(o){if((Qn&6)!==0)throw Error(p(327));pd();var l=Is(o,0);if((l&1)===0)return za(o,hn()),null;var x=Xd(o,l);if(o.tag!==0&&x===2){var C=de(o);C!==0&&(l=C,x=rp(o,C))}if(x===1)throw x=Zd,Ih(o,0),eh(o,l),za(o,hn()),x;if(x===6)throw Error(p(345));return o.finishedWork=o.current.alternate,o.finishedLanes=l,th(o,fa,Bu),za(o,hn()),null}function np(o,l){var x=Qn;Qn|=1;try{return o(l)}finally{Qn=x,Qn===0&&(mc=hn()+500,Kh&&Sa())}}function Eh(o){yc!==null&&yc.tag===0&&(Qn&6)===0&&pd();var l=Qn;Qn|=1;var x=Hl.transition,C=gr;try{if(Hl.transition=null,gr=1,o)return o()}finally{gr=C,Hl.transition=x,Qn=l,(Qn&6)===0&&Sa()}}function ip(){Ya=cd.current,Mi(cd)}function Ih(o,l){o.finishedWork=null,o.finishedLanes=0;var x=o.timeoutHandle;if(x!==-1&&(o.timeoutHandle=-1,Iu(x)),So!==null)for(x=So.return;x!==null;){var C=x;switch(Au(C),C.tag){case 1:C=C.type.childContextTypes,C!=null&&Ao();break;case 3:N(),Mi(Ko),Mi($o),xe();break;case 5:G(C);break;case 4:N();break;case 13:Mi(Q);break;case 19:Mi(Q);break;case 10:$s(C.type._context);break;case 22:case 23:ip()}x=x.return}if(wo=o,So=o=Tl(o.current,null),_s=Ya=l,ts=0,Zd=null,hd=Gd=Yc=0,fa=dd=null,ai!==null){for(l=0;l<ai.length;l++)if(x=ai[l],C=x.interleaved,C!==null){x.interleaved=null;var z=C.next,V=x.pending;if(V!==null){var se=V.next;V.next=z,C.next=se}x.pending=C}ai=null}return o}function op(o,l){do{var x=So;try{if(_l(),Se.current=Lu,Ue){for(var C=ke.memoizedState;C!==null;){var z=C.queue;z!==null&&(z.pending=null),C=C.next}Ue=!1}if(De=0,$e=Oe=ke=null,lt=!1,Mt=0,pc.current=null,x===null||x.return===null){ts=1,Zd=l,So=null;break}e:{var V=o,se=x.return,Re=x,Ge=l;if(l=_s,Re.flags|=32768,Ge!==null&&typeof Ge=="object"&&typeof Ge.then=="function"){var It=Ge,Qt=Re,ir=Qt.tag;if((Qt.mode&1)===0&&(ir===0||ir===11||ir===15)){var Jt=Qt.alternate;Jt?(Qt.updateQueue=Jt.updateQueue,Qt.memoizedState=Jt.memoizedState,Qt.lanes=Jt.lanes):(Qt.updateQueue=null,Qt.memoizedState=null)}var Er=Wf(se);if(Er!==null){Er.flags&=-257,Hf(Er,se,Re,V,l),Er.mode&1&&Od(V,It,l),l=Er,Ge=It;var Or=l.updateQueue;if(Or===null){var Ur=new Set;Ur.add(Ge),l.updateQueue=Ur}else Or.add(Ge);break e}else{if((l&1)===0){Od(V,It,l),Sf();break e}Ge=Error(p(426))}}else if(xi&&Re.mode&1){var fo=Wf(se);if(fo!==null){(fo.flags&65536)===0&&(fo.flags|=256),Hf(fo,se,Re,V,l),yl(bl(Ge,Re));break e}}V=Ge=bl(Ge,Re),ts!==4&&(ts=2),dd===null?dd=[V]:dd.push(V),V=se;do{switch(V.tag){case 3:V.flags|=65536,l&=-l,V.lanes|=l;var pt=bh(V,Ge,l);e(V,pt);break e;case 1:Re=Ge;var Xe=V.type,xt=V.stateNode;if((V.flags&128)===0&&(typeof Xe.getDerivedStateFromError=="function"||xt!==null&&typeof xt.componentDidCatch=="function"&&(gc===null||!gc.has(xt)))){V.flags|=65536,l&=-l,V.lanes|=l;var dr=Dd(V,Re,l);e(V,dr);break e}}V=V.return}while(V!==null)}zp(x)}catch(Zr){l=Zr,So===x&&x!==null&&(So=x=x.return);continue}break}while(!0)}function wf(){var o=Vd.current;return Vd.current=Lu,o===null?Lu:o}function Sf(){(ts===0||ts===3||ts===2)&&(ts=4),wo===null||(Yc&268435455)===0&&(Gd&268435455)===0||eh(wo,_s)}function Xd(o,l){var x=Qn;Qn|=2;var C=wf();(wo!==o||_s!==l)&&(Bu=null,Ih(o,l));do try{Rp();break}catch(z){op(o,z)}while(!0);if(_l(),Qn=x,Vd.current=C,So!==null)throw Error(p(261));return wo=null,_s=0,ts}function Rp(){for(;So!==null;)Yd(So)}function dm(){for(;So!==null&&!Go();)Yd(So)}function Yd(o){var l=Cf(o.alternate,o,Ya);o.memoizedProps=o.pendingProps,l===null?zp(o):So=l,pc.current=null}function zp(o){var l=o;do{var x=l.alternate;if(o=l.return,(l.flags&32768)===0){if(x=Qf(x,l,Ya),x!==null){So=x;return}}else{if(x=Jf(x,l),x!==null){x.flags&=32767,So=x;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{ts=6,So=null;return}}if(l=l.sibling,l!==null){So=l;return}So=l=o}while(l!==null);ts===0&&(ts=5)}function th(o,l,x){var C=gr,z=Hl.transition;try{Hl.transition=null,gr=1,fm(o,l,x,C)}finally{Hl.transition=z,gr=C}return null}function fm(o,l,x,C){do pd();while(yc!==null);if((Qn&6)!==0)throw Error(p(327));x=o.finishedWork;var z=o.finishedLanes;if(x===null)return null;if(o.finishedWork=null,o.finishedLanes=0,x===o.current)throw Error(p(177));o.callbackNode=null,o.callbackPriority=0;var V=x.lanes|x.childLanes;if(Ot(o,V),o===wo&&(So=wo=null,_s=0),(x.subtreeFlags&2064)===0&&(x.flags&2064)===0||Hd||(Hd=!0,sp(os,function(){return pd(),null})),V=(x.flags&15990)!==0,(x.subtreeFlags&15990)!==0||V){V=Hl.transition,Hl.transition=null;var se=gr;gr=1;var Re=Qn;Qn|=4,pc.current=null,hm(o,x),vf(x,o),Gh(Eu),cs=!!ec,Eu=ec=null,o.current=x,ld(x),Da(),Qn=Re,gr=se,Hl.transition=V}else o.current=x;if(Hd&&(Hd=!1,yc=o,rs=z),V=o.pendingLanes,V===0&&(gc=null),rl(x.stateNode),za(o,hn()),l!==null)for(C=o.onRecoverableError,x=0;x<l.length;x++)z=l[x],C(z.value,{componentStack:z.stack,digest:z.digest});if(Wd)throw Wd=!1,o=fd,fd=null,o;return(rs&1)!==0&&o.tag!==0&&pd(),V=o.pendingLanes,(V&1)!==0?o===Kd?qd++:(qd=0,Kd=o):qd=0,Sa(),null}function pd(){if(yc!==null){var o=Ar(rs),l=Hl.transition,x=gr;try{if(Hl.transition=null,gr=16>o?16:o,yc===null)var C=!1;else{if(o=yc,yc=null,rs=0,(Qn&6)!==0)throw Error(p(331));var z=Qn;for(Qn|=4,Lr=o.current;Lr!==null;){var V=Lr,se=V.child;if((Lr.flags&16)!==0){var Re=V.deletions;if(Re!==null){for(var Ge=0;Ge<Re.length;Ge++){var It=Re[Ge];for(Lr=It;Lr!==null;){var Qt=Lr;switch(Qt.tag){case 0:case 11:case 15:fc(8,Qt,V)}var ir=Qt.child;if(ir!==null)ir.return=Qt,Lr=ir;else for(;Lr!==null;){Qt=Lr;var Jt=Qt.sibling,Er=Qt.return;if(Ip(Qt),Qt===It){Lr=null;break}if(Jt!==null){Jt.return=Er,Lr=Jt;break}Lr=Er}}}var Or=V.alternate;if(Or!==null){var Ur=Or.child;if(Ur!==null){Or.child=null;do{var fo=Ur.sibling;Ur.sibling=null,Ur=fo}while(Ur!==null)}}Lr=V}}if((V.subtreeFlags&2064)!==0&&se!==null)se.return=V,Lr=se;else e:for(;Lr!==null;){if(V=Lr,(V.flags&2048)!==0)switch(V.tag){case 0:case 11:case 15:fc(9,V,V.return)}var pt=V.sibling;if(pt!==null){pt.return=V.return,Lr=pt;break e}Lr=V.return}}var Xe=o.current;for(Lr=Xe;Lr!==null;){se=Lr;var xt=se.child;if((se.subtreeFlags&2064)!==0&&xt!==null)xt.return=se,Lr=xt;else e:for(se=Xe;Lr!==null;){if(Re=Lr,(Re.flags&2048)!==0)try{switch(Re.tag){case 0:case 11:case 15:Ud(9,Re)}}catch(Zr){Ki(Re,Re.return,Zr)}if(Re===se){Lr=null;break e}var dr=Re.sibling;if(dr!==null){dr.return=Re.return,Lr=dr;break e}Lr=Re.return}}if(Qn=z,Sa(),ss&&typeof ss.onPostCommitFiberRoot=="function")try{ss.onPostCommitFiberRoot(to,o)}catch{}C=!0}return C}finally{gr=x,Hl.transition=l}}return!1}function Tf(o,l,x){l=bl(x,l),l=bh(o,l,1),o=la(o,l,1),l=Ra(),o!==null&&(ct(o,1,l),za(o,l))}function Ki(o,l,x){if(o.tag===3)Tf(o,o,x);else for(;l!==null;){if(l.tag===3){Tf(l,o,x);break}else if(l.tag===1){var C=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof C.componentDidCatch=="function"&&(gc===null||!gc.has(C))){o=bl(x,o),o=Dd(l,o,1),l=la(l,o,1),o=Ra(),l!==null&&(ct(l,1,o),za(l,o));break}}l=l.return}}function pm(o,l,x){var C=o.pingCache;C!==null&&C.delete(l),l=Ra(),o.pingedLanes|=o.suspendedLanes&x,wo===o&&(_s&x)===x&&(ts===4||ts===3&&(_s&130023424)===_s&&500>hn()-xf?Ih(o,0):hd|=x),za(o,l)}function Lp(o,l){l===0&&((o.mode&1)===0?l=1:(l=Ql,Ql<<=1,(Ql&130023424)===0&&(Ql=4194304)));var x=Ra();o=Ca(o,l),o!==null&&(ct(o,l,x),za(o,x))}function Qd(o){var l=o.memoizedState,x=0;l!==null&&(x=l.retryLane),Lp(o,x)}function Dp(o,l){var x=0;switch(o.tag){case 13:var C=o.stateNode,z=o.memoizedState;z!==null&&(x=z.retryLane);break;case 19:C=o.stateNode;break;default:throw Error(p(314))}C!==null&&C.delete(l),Lp(o,x)}var Cf;Cf=function(o,l,x){if(o!==null)if(o.memoizedProps!==l.pendingProps||Ko.current)ka=!0;else{if((o.lanes&x)===0&&(l.flags&128)===0)return ka=!1,yf(o,l,x);ka=(o.flags&131072)!==0}else ka=!1,xi&&(l.flags&1048576)!==0&&ff(l,sc,l.index);switch(l.lanes=0,l.tag){case 2:var C=l.type;da(o,l),o=l.pendingProps;var z=ml(l,$o.current);sa(l,x),z=er(null,l,C,o,z,x);var V=tr();return l.flags|=1,typeof z=="object"&&z!==null&&typeof z.render=="function"&&z.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,Ds(C)?(V=!0,Hi(l)):V=!1,l.memoizedState=z.state!==null&&z.state!==void 0?z.state:null,Hc(l),z.updater=xl,l.stateNode=z,z._reactInternals=l,pf(l,C,o,x),l=gf(null,l,C,!0,V,x)):(l.tag=0,xi&&V&&ac(l),Jo(null,l,z,x),l=l.child),l;case 16:C=l.elementType;e:{switch(da(o,l),o=l.pendingProps,z=C._init,C=z(C._payload),l.type=C,z=l.tag=Op(C),o=bo(C,o),z){case 0:l=ed(null,l,C,o,x);break e;case 1:l=td(null,l,C,o,x);break e;case 11:l=qf(null,l,C,o,x);break e;case 14:l=mf(null,l,C,bo(C.type,o),x);break e}throw Error(p(306,C,""))}return l;case 0:return C=l.type,z=l.pendingProps,z=l.elementType===C?z:bo(C,z),ed(o,l,C,z,x);case 1:return C=l.type,z=l.pendingProps,z=l.elementType===C?z:bo(C,z),td(o,l,C,z,x);case 3:e:{if(Xf(l),o===null)throw Error(p(387));C=l.pendingProps,V=l.memoizedState,z=V.element,Xh(o,l),r(l,C,null,x);var se=l.memoizedState;if(C=se.element,V.isDehydrated)if(V={element:C,isDehydrated:!1,cache:se.cache,pendingSuspenseBoundaries:se.pendingSuspenseBoundaries,transitions:se.transitions},l.updateQueue.baseState=V,l.memoizedState=V,l.flags&256){z=bl(Error(p(423)),l),l=Ou(o,l,C,x,z);break e}else if(C!==z){z=bl(Error(p(424)),l),l=Ou(o,l,C,x,z);break e}else for(Fs=vo(l.stateNode.containerInfo.firstChild),Yo=l,xi=!0,Bs=null,x=Vr(l,null,C,x),l.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(Ha(),C===z){l=Gl(o,l,x);break e}Jo(o,l,C,x)}l=l.child}return l;case 5:return W(l),o===null&&oa(l),C=l.type,z=l.pendingProps,V=o!==null?o.memoizedProps:null,se=z.children,Zc(C,z)?se=null:V!==null&&Zc(C,V)&&(l.flags|=32),wh(o,l),Jo(o,l,se,x),l.child;case 6:return o===null&&oa(l),null;case 13:return Bd(o,l,x);case 4:return O(l,l.stateNode.containerInfo),C=l.pendingProps,o===null?l.child=fr(l,null,C,x):Jo(o,l,C,x),l.child;case 11:return C=l.type,z=l.pendingProps,z=l.elementType===C?z:bo(C,z),qf(o,l,C,z,x);case 7:return Jo(o,l,l.pendingProps,x),l.child;case 8:return Jo(o,l,l.pendingProps.children,x),l.child;case 12:return Jo(o,l,l.pendingProps.children,x),l.child;case 10:e:{if(C=l.type._context,z=l.pendingProps,V=l.memoizedProps,se=z.value,Pi(iu,C._currentValue),C._currentValue=se,V!==null)if(St(V.value,se)){if(V.children===z.children&&!Ko.current){l=Gl(o,l,x);break e}}else for(V=l.child,V!==null&&(V.return=l);V!==null;){var Re=V.dependencies;if(Re!==null){se=V.child;for(var Ge=Re.firstContext;Ge!==null;){if(Ge.context===C){if(V.tag===1){Ge=aa(-1,x&-x),Ge.tag=2;var It=V.updateQueue;if(It!==null){It=It.shared;var Qt=It.pending;Qt===null?Ge.next=Ge:(Ge.next=Qt.next,Qt.next=Ge),It.pending=Ge}}V.lanes|=x,Ge=V.alternate,Ge!==null&&(Ge.lanes|=x),jo(V.return,x,l),Re.lanes|=x;break}Ge=Ge.next}}else if(V.tag===10)se=V.type===l.type?null:V.child;else if(V.tag===18){if(se=V.return,se===null)throw Error(p(341));se.lanes|=x,Re=se.alternate,Re!==null&&(Re.lanes|=x),jo(se,x,l),se=V.sibling}else se=V.child;if(se!==null)se.return=V;else for(se=V;se!==null;){if(se===l){se=null;break}if(V=se.sibling,V!==null){V.return=se.return,se=V;break}se=se.return}V=se}Jo(o,l,z.children,x),l=l.child}return l;case 9:return z=l.type,C=l.pendingProps.children,sa(l,x),z=jn(z),C=C(z),l.flags|=1,Jo(o,l,C,x),l.child;case 14:return C=l.type,z=bo(C,l.pendingProps),z=bo(C.type,z),mf(o,l,C,z,x);case 15:return ha(o,l,l.type,l.pendingProps,x);case 17:return C=l.type,z=l.pendingProps,z=l.elementType===C?z:bo(C,z),da(o,l),l.tag=1,Ds(C)?(o=!0,Hi(l)):o=!1,sa(l,x),qc(l,C,z),pf(l,C,z,x),gf(null,l,C,!0,o,x);case 19:return Zl(o,l,x);case 22:return Kf(o,l,x)}throw Error(p(156,l.tag))};function sp(o,l){return Es(o,l)}function Ro(o,l,x,C){this.tag=o,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=C,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qa(o,l,x,C){return new Ro(o,l,x,C)}function Pf(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Op(o){if(typeof o=="function")return Pf(o)?1:0;if(o!=null){if(o=o.$$typeof,o===at)return 11;if(o===Pr)return 14}return 2}function Tl(o,l){var x=o.alternate;return x===null?(x=Qa(o.tag,l,o.key,o.mode),x.elementType=o.elementType,x.type=o.type,x.stateNode=o.stateNode,x.alternate=o,o.alternate=x):(x.pendingProps=l,x.type=o.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=o.flags&14680064,x.childLanes=o.childLanes,x.lanes=o.lanes,x.child=o.child,x.memoizedProps=o.memoizedProps,x.memoizedState=o.memoizedState,x.updateQueue=o.updateQueue,l=o.dependencies,x.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},x.sibling=o.sibling,x.index=o.index,x.ref=o.ref,x}function md(o,l,x,C,z,V){var se=2;if(C=o,typeof o=="function")Pf(o)&&(se=1);else if(typeof o=="string")se=5;else e:switch(o){case _t:return Mh(x.children,z,V,l);case Le:se=8,z|=8;break;case je:return o=Qa(12,x,l,z|2),o.elementType=je,o.lanes=V,o;case Lt:return o=Qa(13,x,l,z),o.elementType=Lt,o.lanes=V,o;case rr:return o=Qa(19,x,l,z),o.elementType=rr,o.lanes=V,o;case sr:return Ef(x,z,V,l);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case ne:se=10;break e;case ot:se=9;break e;case at:se=11;break e;case Pr:se=14;break e;case xr:se=16,C=null;break e}throw Error(p(130,o==null?o:typeof o,""))}return l=Qa(se,x,l,z),l.elementType=o,l.type=C,l.lanes=V,l}function Mh(o,l,x,C){return o=Qa(7,o,C,l),o.lanes=x,o}function Ef(o,l,x,C){return o=Qa(22,o,C,l),o.elementType=sr,o.lanes=x,o.stateNode={isHidden:!1},o}function ap(o,l,x){return o=Qa(6,o,null,l),o.lanes=x,o}function lp(o,l,x){return l=Qa(4,o.children!==null?o.children:[],o.key,l),l.lanes=x,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}function Fp(o,l,x,C,z){this.tag=l,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=C,this.onRecoverableError=z,this.mutableSourceEagerHydrationData=null}function Ws(o,l,x,C,z,V,se,Re,Ge){return o=new Fp(o,l,x,Re,Ge),l===1?(l=1,V===!0&&(l|=8)):l=0,V=Qa(3,null,null,l),o.current=V,V.stateNode=o,V.memoizedState={element:C,isDehydrated:x,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hc(V),o}function up(o,l,x){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:it,key:C==null?null:""+C,children:o,containerInfo:l,implementation:x}}function cp(o){if(!o)return wa;o=o._reactInternals;e:{if(Zn(o)!==o||o.tag!==1)throw Error(p(170));var l=o;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(Ds(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(p(171))}if(o.tag===1){var x=o.type;if(Ds(x))return nc(o,x,l)}return l}function _c(o,l,x,C,z,V,se,Re,Ge){return o=Ws(x,C,!0,o,z,V,se,Re,Ge),o.context=cp(null),x=o.current,C=Ra(),z=Jc(x),V=aa(C,z),V.callback=l??null,la(x,V,z),o.current.lanes=z,ct(o,z,C),za(o,C),o}function kh(o,l,x,C){var z=l.current,V=Ra(),se=Jc(z);return x=cp(x),l.context===null?l.context=x:l.pendingContext=x,l=aa(V,se),l.payload={element:o},C=C===void 0?null:C,C!==null&&(l.callback=C),o=la(z,l,se),o!==null&&(ql(o,z,se,V),g(o,z,se)),se}function rh(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function Ah(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var x=o.retryLane;o.retryLane=x!==0&&x<l?x:l}}function gd(o,l){Ah(o,l),(o=o.alternate)&&Ah(o,l)}function If(){return null}var Bp=typeof reportError=="function"?reportError:function(o){console.error(o)};function Mf(o){this._internalRoot=o}yd.prototype.render=Mf.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(p(409));kh(o,l,null,null)},yd.prototype.unmount=Mf.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;Eh(function(){kh(null,o,null,null)}),l[Ls]=null}};function yd(o){this._internalRoot=o}yd.prototype.unstable_scheduleHydration=function(o){if(o){var l=ro();o={blockedOn:null,target:o,priority:l};for(var x=0;x<Fn.length&&l!==0&&l<Fn[x].priority;x++);Fn.splice(x,0,o),x===0&&us(o)}};function kf(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function Af(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function hp(){}function Np(o,l,x,C,z){if(z){if(typeof C=="function"){var V=C;C=function(){var It=rh(se);V.call(It)}}var se=_c(l,C,o,0,null,!1,!1,"",hp);return o._reactRootContainer=se,o[Ls]=se.current,hl(o.nodeType===8?o.parentNode:o),Eh(),se}for(;z=o.lastChild;)o.removeChild(z);if(typeof C=="function"){var Re=C;C=function(){var It=rh(Ge);Re.call(It)}}var Ge=Ws(o,0,!1,null,null,!1,!1,"",hp);return o._reactRootContainer=Ge,o[Ls]=Ge.current,hl(o.nodeType===8?o.parentNode:o),Eh(function(){kh(l,Ge,x,C)}),Ge}function vc(o,l,x,C,z){var V=x._reactRootContainer;if(V){var se=V;if(typeof z=="function"){var Re=z;z=function(){var Ge=rh(se);Re.call(Ge)}}kh(l,se,o,z)}else se=Np(x,l,o,z,C);return rh(se)}_r=function(o){switch(o.tag){case 3:var l=o.stateNode;if(l.current.memoizedState.isDehydrated){var x=Fa(l.pendingLanes);x!==0&&(ar(l,x|1),za(l,hn()),(Qn&6)===0&&(mc=hn()+500,Sa()))}break;case 13:Eh(function(){var C=Ca(o,1);if(C!==null){var z=Ra();ql(C,o,1,z)}}),gd(o,1)}},$n=function(o){if(o.tag===13){var l=Ca(o,134217728);if(l!==null){var x=Ra();ql(l,o,134217728,x)}gd(o,134217728)}},_i=function(o){if(o.tag===13){var l=Jc(o),x=Ca(o,l);if(x!==null){var C=Ra();ql(x,o,l,C)}gd(o,l)}},ro=function(){return gr},en=function(o,l){var x=gr;try{return gr=o,l()}finally{gr=x}},Ve=function(o,l,x){switch(l){case"input":if(fn(o,x),l=x.name,x.type==="radio"&&l!=null){for(x=o;x.parentNode;)x=x.parentNode;for(x=x.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<x.length;l++){var C=x[l];if(C!==o&&C.form===o.form){var z=tu(C);if(!z)throw Error(p(90));rn(C),fn(C,z)}}}break;case"textarea":Hn(o,x);break;case"select":l=x.value,l!=null&&An(o,!!x.multiple,l,!1)}},Ye=np,Dt=Eh;var dp={usingClientEntryPoint:!1,Events:[qo,yn,tu,nt,ft,np]},Jd={findFiberByHostInstance:fl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$p={bundleType:Jd.bundleType,version:Jd.version,rendererPackageName:Jd.rendererPackageName,rendererConfig:Jd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:et.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=Qs(o),o===null?null:o.stateNode},findFiberByHostInstance:Jd.findFiberByHostInstance||If,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rf.isDisabled&&Rf.supportsFiber)try{to=Rf.inject($p),ss=Rf}catch{}}return $u.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dp,$u.createPortal=function(o,l){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kf(l))throw Error(p(200));return up(o,l,null,x)},$u.createRoot=function(o,l){if(!kf(o))throw Error(p(299));var x=!1,C="",z=Bp;return l!=null&&(l.unstable_strictMode===!0&&(x=!0),l.identifierPrefix!==void 0&&(C=l.identifierPrefix),l.onRecoverableError!==void 0&&(z=l.onRecoverableError)),l=Ws(o,1,!1,null,null,x,!1,C,z),o[Ls]=l.current,hl(o.nodeType===8?o.parentNode:o),new Mf(l)},$u.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(p(188)):(o=Object.keys(o).join(","),Error(p(268,o)));return o=Qs(l),o=o===null?null:o.stateNode,o},$u.flushSync=function(o){return Eh(o)},$u.hydrate=function(o,l,x){if(!Af(l))throw Error(p(200));return vc(null,o,l,!0,x)},$u.hydrateRoot=function(o,l,x){if(!kf(o))throw Error(p(405));var C=x!=null&&x.hydratedSources||null,z=!1,V="",se=Bp;if(x!=null&&(x.unstable_strictMode===!0&&(z=!0),x.identifierPrefix!==void 0&&(V=x.identifierPrefix),x.onRecoverableError!==void 0&&(se=x.onRecoverableError)),l=_c(l,null,o,1,x??null,z,!1,V,se),o[Ls]=l.current,hl(o),C)for(o=0;o<C.length;o++)x=C[o],z=x._getVersion,z=z(x._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[x,z]:l.mutableSourceEagerHydrationData.push(x,z);return new yd(l)},$u.render=function(o,l,x){if(!Af(l))throw Error(p(200));return vc(null,o,l,!1,x)},$u.unmountComponentAtNode=function(o){if(!Af(o))throw Error(p(40));return o._reactRootContainer?(Eh(function(){vc(null,null,o,!1,function(){o._reactRootContainer=null,o[Ls]=null})}),!0):!1},$u.unstable_batchedUpdates=np,$u.unstable_renderSubtreeIntoContainer=function(o,l,x,C){if(!Af(x))throw Error(p(200));if(o==null||o._reactInternals===void 0)throw Error(p(38));return vc(o,l,x,!1,C)},$u.version="18.3.1-next-f1338f8080-20240426",$u}var Hv;function pw(){if(Hv)return Xy.exports;Hv=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(m){console.error(m)}}return c(),Xy.exports=fw(),Xy.exports}var qv;function mw(){if(qv)return Bg;qv=1;var c=pw();return Bg.createRoot=c.createRoot,Bg.hydrateRoot=c.hydrateRoot,Bg}var jx=mw();const gw=tg(jx);var Gt=rg();const pu=tg(Gt),k_=aw({__proto__:null,default:pu},[Gt]);var Jy={exports:{}},e_,Kv;function yw(){if(Kv)return e_;Kv=1;var c="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return e_=c,e_}var t_,Xv;function _w(){if(Xv)return t_;Xv=1;var c=yw();function m(){}function p(){}return p.resetWarningCache=m,t_=function(){function T(M,u,te,Y,fe,he){if(he!==c){var Te=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw Te.name="Invariant Violation",Te}}T.isRequired=T;function P(){return T}var D={array:T,bigint:T,bool:T,func:T,number:T,object:T,string:T,symbol:T,any:T,arrayOf:P,element:T,elementType:T,instanceOf:P,node:T,objectOf:P,oneOf:P,oneOfType:P,shape:P,exact:P,checkPropTypes:p,resetWarningCache:m};return D.PropTypes=D,D},t_}var Yv;function vw(){return Yv||(Yv=1,Jy.exports=_w()()),Jy.exports}var xw=vw();const Bn=tg(xw);var Qv=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),bw=new Uint8Array(16);function ww(){if(!Qv)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Qv(bw)}var Ux=[];for(var Ng=0;Ng<256;++Ng)Ux[Ng]=(Ng+256).toString(16).substr(1);function Sw(c,m){var p=0,T=Ux;return[T[c[p++]],T[c[p++]],T[c[p++]],T[c[p++]],"-",T[c[p++]],T[c[p++]],"-",T[c[p++]],T[c[p++]],"-",T[c[p++]],T[c[p++]],"-",T[c[p++]],T[c[p++]],T[c[p++]],T[c[p++]],T[c[p++]],T[c[p++]]].join("")}function Tw(c,m,p){var T=m&&p||0;typeof c=="string"&&(m=c==="binary"?new Array(16):null,c=null),c=c||{};var P=c.random||(c.rng||ww)();if(P[6]=P[6]&15|64,P[8]=P[8]&63|128,m)for(var D=0;D<16;++D)m[T+D]=P[D];return m||Sw(P)}function Jv(c,m){var p=Object.keys(c);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(c);m&&(T=T.filter(function(P){return Object.getOwnPropertyDescriptor(c,P).enumerable})),p.push.apply(p,T)}return p}function A_(c){for(var m=1;m<arguments.length;m++){var p=arguments[m]!=null?arguments[m]:{};m%2?Jv(Object(p),!0).forEach(function(T){Wm(c,T,p[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(p)):Jv(Object(p)).forEach(function(T){Object.defineProperty(c,T,Object.getOwnPropertyDescriptor(p,T))})}return c}function Cw(c,m){if(!(c instanceof m))throw new TypeError("Cannot call a class as a function")}function e0(c,m){for(var p=0;p<m.length;p++){var T=m[p];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(c,T.key,T)}}function Pw(c,m,p){return m&&e0(c.prototype,m),p&&e0(c,p),Object.defineProperty(c,"prototype",{writable:!1}),c}function Wm(c,m,p){return m in c?Object.defineProperty(c,m,{value:p,enumerable:!0,configurable:!0,writable:!0}):c[m]=p,c}function sy(){return sy=Object.assign?Object.assign.bind():function(c){for(var m=1;m<arguments.length;m++){var p=arguments[m];for(var T in p)Object.prototype.hasOwnProperty.call(p,T)&&(c[T]=p[T])}return c},sy.apply(this,arguments)}function Ew(c,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(m&&m.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),Object.defineProperty(c,"prototype",{writable:!1}),m&&R_(c,m)}function ay(c){return ay=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(p){return p.__proto__||Object.getPrototypeOf(p)},ay(c)}function R_(c,m){return R_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(T,P){return T.__proto__=P,T},R_(c,m)}function Iw(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Mw(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function kw(c,m){if(m&&(typeof m=="object"||typeof m=="function"))return m;if(m!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mw(c)}function Aw(c){var m=Iw();return function(){var T=ay(c),P;if(m){var D=ay(this).constructor;P=Reflect.construct(T,arguments,D)}else P=T.apply(this,arguments);return kw(this,P)}}function Rw(c,m){if(c){if(typeof c=="string")return t0(c,m);var p=Object.prototype.toString.call(c).slice(8,-1);if(p==="Object"&&c.constructor&&(p=c.constructor.name),p==="Map"||p==="Set")return Array.from(c);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return t0(c,m)}}function t0(c,m){(m==null||m>c.length)&&(m=c.length);for(var p=0,T=new Array(m);p<m;p++)T[p]=c[p];return T}function zw(c,m){var p=typeof Symbol<"u"&&c[Symbol.iterator]||c["@@iterator"];if(!p){if(Array.isArray(c)||(p=Rw(c))||m){p&&(c=p);var T=0,P=function(){};return{s:P,n:function(){return T>=c.length?{done:!0}:{done:!1,value:c[T++]}},e:function(te){throw te},f:P}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var D=!0,M=!1,u;return{s:function(){p=p.call(c)},n:function(){var te=p.next();return D=te.done,te},e:function(te){M=!0,u=te},f:function(){try{!D&&p.return!=null&&p.return()}finally{if(M)throw u}}}}var r0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$g=function(c){return c&&c.Math==Math&&c},lf=$g(typeof globalThis=="object"&&globalThis)||$g(typeof window=="object"&&window)||$g(typeof self=="object"&&self)||$g(typeof r0=="object"&&r0)||function(){return this}()||Function("return this")(),sv={},uf=function(c){try{return!!c()}catch{return!0}},Lw=uf,Gf=!Lw(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),Dw=uf,av=!Dw(function(){var c=(function(){}).bind();return typeof c!="function"||c.hasOwnProperty("prototype")}),Ow=av,jg=Function.prototype.call,lv=Ow?jg.bind(jg):function(){return jg.apply(jg,arguments)},Vx={},Zx={}.propertyIsEnumerable,Gx=Object.getOwnPropertyDescriptor,Fw=Gx&&!Zx.call({1:2},1);Vx.f=Fw?function(m){var p=Gx(this,m);return!!p&&p.enumerable}:Zx;var Wx=function(c,m){return{enumerable:!(c&1),configurable:!(c&2),writable:!(c&4),value:m}},Hx=av,qx=Function.prototype,z_=qx.call,Bw=Hx&&qx.bind.bind(z_,z_),Kx=function(c){return Hx?Bw(c):function(){return z_.apply(c,arguments)}},Xx=Kx,Nw=Xx({}.toString),$w=Xx("".slice),gy=function(c){return $w(Nw(c),8,-1)},jw=gy,Uw=Kx,Id=function(c){if(jw(c)==="Function")return Uw(c)},Vw=Id,Zw=uf,Gw=gy,r_=Object,Ww=Vw("".split),Yx=Zw(function(){return!r_("z").propertyIsEnumerable(0)})?function(c){return Gw(c)=="String"?Ww(c,""):r_(c)}:r_,Qx=function(c){return c==null},Hw=Qx,qw=TypeError,Jx=function(c){if(Hw(c))throw qw("Can't call method on "+c);return c},Kw=Yx,Xw=Jx,yy=function(c){return Kw(Xw(c))},L_=typeof document=="object"&&document.all,Yw=typeof L_>"u"&&L_!==void 0,e1={all:L_,IS_HTMLDDA:Yw},t1=e1,Qw=t1.all,uh=t1.IS_HTMLDDA?function(c){return typeof c=="function"||c===Qw}:function(c){return typeof c=="function"},n0=uh,r1=e1,Jw=r1.all,ng=r1.IS_HTMLDDA?function(c){return typeof c=="object"?c!==null:n0(c)||c===Jw}:function(c){return typeof c=="object"?c!==null:n0(c)},n_=lf,e2=uh,t2=function(c){return e2(c)?c:void 0},ig=function(c,m){return arguments.length<2?t2(n_[c]):n_[c]&&n_[c][m]},r2=Id,n2=r2({}.isPrototypeOf),i2=ig,o2=i2("navigator","userAgent")||"",n1=lf,i_=o2,i0=n1.process,o0=n1.Deno,s0=i0&&i0.versions||o0&&o0.version,a0=s0&&s0.v8,Bh,ly;a0&&(Bh=a0.split("."),ly=Bh[0]>0&&Bh[0]<4?1:+(Bh[0]+Bh[1]));!ly&&i_&&(Bh=i_.match(/Edge\/(\d+)/),(!Bh||Bh[1]>=74)&&(Bh=i_.match(/Chrome\/(\d+)/),Bh&&(ly=+Bh[1])));var s2=ly,l0=s2,a2=uf,i1=!!Object.getOwnPropertySymbols&&!a2(function(){var c=Symbol();return!String(c)||!(Object(c)instanceof Symbol)||!Symbol.sham&&l0&&l0<41}),l2=i1,o1=l2&&!Symbol.sham&&typeof Symbol.iterator=="symbol",u2=ig,c2=uh,h2=n2,d2=o1,f2=Object,s1=d2?function(c){return typeof c=="symbol"}:function(c){var m=u2("Symbol");return c2(m)&&h2(m.prototype,f2(c))},p2=String,m2=function(c){try{return p2(c)}catch{return"Object"}},g2=uh,y2=m2,_2=TypeError,a1=function(c){if(g2(c))return c;throw _2(y2(c)+" is not a function")},v2=a1,x2=Qx,b2=function(c,m){var p=c[m];return x2(p)?void 0:v2(p)},o_=lv,s_=uh,a_=ng,w2=TypeError,S2=function(c,m){var p,T;if(m==="string"&&s_(p=c.toString)&&!a_(T=o_(p,c))||s_(p=c.valueOf)&&!a_(T=o_(p,c))||m!=="string"&&s_(p=c.toString)&&!a_(T=o_(p,c)))return T;throw w2("Can't convert object to primitive value")},uv={exports:{}},u0=lf,T2=Object.defineProperty,cv=function(c,m){try{T2(u0,c,{value:m,configurable:!0,writable:!0})}catch{u0[c]=m}return m},C2=lf,P2=cv,c0="__core-js_shared__",E2=C2[c0]||P2(c0,{}),hv=E2,h0=hv;(uv.exports=function(c,m){return h0[c]||(h0[c]=m!==void 0?m:{})})("versions",[]).push({version:"3.25.5",mode:"global",copyright:" 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.5/LICENSE",source:"https://github.com/zloirock/core-js"});var I2=Jx,M2=Object,l1=function(c){return M2(I2(c))},k2=Id,A2=l1,R2=k2({}.hasOwnProperty),Tp=Object.hasOwn||function(m,p){return R2(A2(m),p)},z2=Id,L2=0,D2=Math.random(),O2=z2(1 .toString),u1=function(c){return"Symbol("+(c===void 0?"":c)+")_"+O2(++L2+D2,36)},F2=lf,B2=uv.exports,d0=Tp,N2=u1,f0=i1,c1=o1,Wp=B2("wks"),wp=F2.Symbol,p0=wp&&wp.for,$2=c1?wp:wp&&wp.withoutSetter||N2,og=function(c){if(!d0(Wp,c)||!(f0||typeof Wp[c]=="string")){var m="Symbol."+c;f0&&d0(wp,c)?Wp[c]=wp[c]:c1&&p0?Wp[c]=p0(m):Wp[c]=$2(m)}return Wp[c]},j2=lv,m0=ng,g0=s1,U2=b2,V2=S2,Z2=og,G2=TypeError,W2=Z2("toPrimitive"),H2=function(c,m){if(!m0(c)||g0(c))return c;var p=U2(c,W2),T;if(p){if(m===void 0&&(m="default"),T=j2(p,c,m),!m0(T)||g0(T))return T;throw G2("Can't convert object to primitive value")}return m===void 0&&(m="number"),V2(c,m)},q2=H2,K2=s1,h1=function(c){var m=q2(c,"string");return K2(m)?m:m+""},X2=lf,y0=ng,D_=X2.document,Y2=y0(D_)&&y0(D_.createElement),d1=function(c){return Y2?D_.createElement(c):{}},Q2=Gf,J2=uf,eS=d1,f1=!Q2&&!J2(function(){return Object.defineProperty(eS("div"),"a",{get:function(){return 7}}).a!=7}),tS=Gf,rS=lv,nS=Vx,iS=Wx,oS=yy,sS=h1,aS=Tp,lS=f1,_0=Object.getOwnPropertyDescriptor;sv.f=tS?_0:function(m,p){if(m=oS(m),p=sS(p),lS)try{return _0(m,p)}catch{}if(aS(m,p))return iS(!rS(nS.f,m,p),m[p])};var lm={},uS=Gf,cS=uf,p1=uS&&cS(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),hS=ng,dS=String,fS=TypeError,_y=function(c){if(hS(c))return c;throw fS(dS(c)+" is not an object")},pS=Gf,mS=f1,gS=p1,Ug=_y,v0=h1,yS=TypeError,l_=Object.defineProperty,_S=Object.getOwnPropertyDescriptor,u_="enumerable",c_="configurable",h_="writable";lm.f=pS?gS?function(m,p,T){if(Ug(m),p=v0(p),Ug(T),typeof m=="function"&&p==="prototype"&&"value"in T&&h_ in T&&!T[h_]){var P=_S(m,p);P&&P[h_]&&(m[p]=T.value,T={configurable:c_ in T?T[c_]:P[c_],enumerable:u_ in T?T[u_]:P[u_],writable:!1})}return l_(m,p,T)}:l_:function(m,p,T){if(Ug(m),p=v0(p),Ug(T),mS)try{return l_(m,p,T)}catch{}if("get"in T||"set"in T)throw yS("Accessors not supported");return"value"in T&&(m[p]=T.value),m};var vS=Gf,xS=lm,bS=Wx,m1=vS?function(c,m,p){return xS.f(c,m,bS(1,p))}:function(c,m,p){return c[m]=p,c},g1={exports:{}},O_=Gf,wS=Tp,y1=Function.prototype,SS=O_&&Object.getOwnPropertyDescriptor,TS=wS(y1,"name"),CS=TS&&(!O_||O_&&SS(y1,"name").configurable),PS={CONFIGURABLE:CS},ES=Id,IS=uh,F_=hv,MS=ES(Function.toString);IS(F_.inspectSource)||(F_.inspectSource=function(c){return MS(c)});var _1=F_.inspectSource,kS=lf,AS=uh,x0=kS.WeakMap,RS=AS(x0)&&/native code/.test(String(x0)),zS=uv.exports,LS=u1,b0=zS("keys"),v1=function(c){return b0[c]||(b0[c]=LS(c))},dv={},DS=RS,x1=lf,OS=m1,d_=Tp,f_=hv,FS=v1,BS=dv,w0="Object already initialized",S0=x1.TypeError,NS=x1.WeakMap,B_,uy,N_,$S=function(c){return N_(c)?uy(c):B_(c,{})};if(DS||f_.state){var wd=f_.state||(f_.state=new NS);wd.get=wd.get,wd.has=wd.has,wd.set=wd.set,B_=function(c,m){if(wd.has(c))throw S0(w0);return m.facade=c,wd.set(c,m),m},uy=function(c){return wd.get(c)||{}},N_=function(c){return wd.has(c)}}else{var Hp=FS("state");BS[Hp]=!0,B_=function(c,m){if(d_(c,Hp))throw S0(w0);return m.facade=c,OS(c,Hp,m),m},uy=function(c){return d_(c,Hp)?c[Hp]:{}},N_=function(c){return d_(c,Hp)}}var jS={get:uy,enforce:$S},US=uf,VS=uh,Vg=Tp,$_=Gf,ZS=PS.CONFIGURABLE,GS=_1,b1=jS,WS=b1.enforce,HS=b1.get,Kg=Object.defineProperty,qS=$_&&!US(function(){return Kg(function(){},"length",{value:8}).length!==8}),KS=String(String).split("String"),XS=g1.exports=function(c,m,p){String(m).slice(0,7)==="Symbol("&&(m="["+String(m).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),p&&p.getter&&(m="get "+m),p&&p.setter&&(m="set "+m),(!Vg(c,"name")||ZS&&c.name!==m)&&($_?Kg(c,"name",{value:m,configurable:!0}):c.name=m),qS&&p&&Vg(p,"arity")&&c.length!==p.arity&&Kg(c,"length",{value:p.arity});try{p&&Vg(p,"constructor")&&p.constructor?$_&&Kg(c,"prototype",{writable:!1}):c.prototype&&(c.prototype=void 0)}catch{}var T=WS(c);return Vg(T,"source")||(T.source=KS.join(typeof m=="string"?m:"")),c};Function.prototype.toString=XS(function(){return VS(this)&&HS(this).source||GS(this)},"toString");var YS=uh,QS=lm,JS=g1.exports,eT=cv,tT=function(c,m,p,T){T||(T={});var P=T.enumerable,D=T.name!==void 0?T.name:m;if(YS(p)&&JS(p,D,T),T.global)P?c[m]=p:eT(m,p);else{try{T.unsafe?c[m]&&(P=!0):delete c[m]}catch{}P?c[m]=p:QS.f(c,m,{value:p,enumerable:!1,configurable:!T.nonConfigurable,writable:!T.nonWritable})}return c},w1={},rT=Math.ceil,nT=Math.floor,iT=Math.trunc||function(m){var p=+m;return(p>0?nT:rT)(p)},oT=iT,S1=function(c){var m=+c;return m!==m||m===0?0:oT(m)},sT=S1,aT=Math.max,lT=Math.min,uT=function(c,m){var p=sT(c);return p<0?aT(p+m,0):lT(p,m)},cT=S1,hT=Math.min,dT=function(c){return c>0?hT(cT(c),9007199254740991):0},fT=dT,T1=function(c){return fT(c.length)},pT=yy,mT=uT,gT=T1,yT=function(c){return function(m,p,T){var P=pT(m),D=gT(P),M=mT(T,D),u;if(c&&p!=p){for(;D>M;)if(u=P[M++],u!=u)return!0}else for(;D>M;M++)if((c||M in P)&&P[M]===p)return c||M||0;return!c&&-1}},_T={indexOf:yT(!1)},vT=Id,p_=Tp,xT=yy,bT=_T.indexOf,wT=dv,T0=vT([].push),C1=function(c,m){var p=xT(c),T=0,P=[],D;for(D in p)!p_(wT,D)&&p_(p,D)&&T0(P,D);for(;m.length>T;)p_(p,D=m[T++])&&(~bT(P,D)||T0(P,D));return P},fv=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],ST=C1,TT=fv,CT=TT.concat("length","prototype");w1.f=Object.getOwnPropertyNames||function(m){return ST(m,CT)};var P1={};P1.f=Object.getOwnPropertySymbols;var PT=ig,ET=Id,IT=w1,MT=P1,kT=_y,AT=ET([].concat),RT=PT("Reflect","ownKeys")||function(m){var p=IT.f(kT(m)),T=MT.f;return T?AT(p,T(m)):p},C0=Tp,zT=RT,LT=sv,DT=lm,OT=function(c,m,p){for(var T=zT(m),P=DT.f,D=LT.f,M=0;M<T.length;M++){var u=T[M];!C0(c,u)&&!(p&&C0(p,u))&&P(c,u,D(m,u))}},FT=uf,BT=uh,NT=/#|\.prototype\./,sg=function(c,m){var p=jT[$T(c)];return p==VT?!0:p==UT?!1:BT(m)?FT(m):!!m},$T=sg.normalize=function(c){return String(c).replace(NT,".").toLowerCase()},jT=sg.data={},UT=sg.NATIVE="N",VT=sg.POLYFILL="P",ZT=sg,m_=lf,GT=sv.f,WT=m1,HT=tT,qT=cv,KT=OT,XT=ZT,YT=function(c,m){var p=c.target,T=c.global,P=c.stat,D,M,u,te,Y,fe;if(T?M=m_:P?M=m_[p]||qT(p,{}):M=(m_[p]||{}).prototype,M)for(u in m){if(Y=m[u],c.dontCallGetSet?(fe=GT(M,u),te=fe&&fe.value):te=M[u],D=XT(T?u:p+(P?".":"#")+u,c.forced),!D&&te!==void 0){if(typeof Y==typeof te)continue;KT(Y,te)}(c.sham||te&&te.sham)&&WT(Y,"sham",!0),HT(M,u,Y,c)}},P0=Id,QT=a1,JT=av,eC=P0(P0.bind),tC=function(c,m){return QT(c),m===void 0?c:JT?eC(c,m):function(){return c.apply(m,arguments)}},rC=gy,nC=Array.isArray||function(m){return rC(m)=="Array"},iC=og,oC=iC("toStringTag"),E1={};E1[oC]="z";var sC=String(E1)==="[object z]",aC=sC,lC=uh,Xg=gy,uC=og,cC=uC("toStringTag"),hC=Object,dC=Xg(function(){return arguments}())=="Arguments",fC=function(c,m){try{return c[m]}catch{}},pC=aC?Xg:function(c){var m,p,T;return c===void 0?"Undefined":c===null?"Null":typeof(p=fC(m=hC(c),cC))=="string"?p:dC?Xg(m):(T=Xg(m))=="Object"&&lC(m.callee)?"Arguments":T},mC=Id,gC=uf,I1=uh,yC=pC,_C=ig,vC=_1,M1=function(){},xC=[],k1=_C("Reflect","construct"),pv=/^\s*(?:class|function)\b/,bC=mC(pv.exec),wC=!pv.exec(M1),Om=function(m){if(!I1(m))return!1;try{return k1(M1,xC,m),!0}catch{return!1}},A1=function(m){if(!I1(m))return!1;switch(yC(m)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return wC||!!bC(pv,vC(m))}catch{return!0}};A1.sham=!0;var SC=!k1||gC(function(){var c;return Om(Om.call)||!Om(Object)||!Om(function(){c=!0})||c})?A1:Om,E0=nC,TC=SC,CC=ng,PC=og,EC=PC("species"),I0=Array,IC=function(c){var m;return E0(c)&&(m=c.constructor,TC(m)&&(m===I0||E0(m.prototype))?m=void 0:CC(m)&&(m=m[EC],m===null&&(m=void 0))),m===void 0?I0:m},MC=IC,kC=function(c,m){return new(MC(c))(m===0?0:m)},AC=tC,RC=Id,zC=Yx,LC=l1,DC=T1,OC=kC,M0=RC([].push),FC=function(c){var m=c==1,p=c==2,T=c==3,P=c==4,D=c==6,M=c==7,u=c==5||D;return function(te,Y,fe,he){for(var Te=LC(te),ge=zC(Te),we=AC(Y,fe),Ce=DC(ge),We=0,gt=he||OC,At=m?gt(te,Ce):p||M?gt(te,0):void 0,Ct,et;Ce>We;We++)if((u||We in ge)&&(Ct=ge[We],et=we(Ct,We,Te),c))if(m)At[We]=et;else if(et)switch(c){case 3:return!0;case 5:return Ct;case 6:return We;case 2:M0(At,Ct)}else switch(c){case 4:return!1;case 7:M0(At,Ct)}return D?-1:T||P?P:At}},BC={find:FC(5)},R1={},NC=C1,$C=fv,jC=Object.keys||function(m){return NC(m,$C)},UC=Gf,VC=p1,ZC=lm,GC=_y,WC=yy,HC=jC;R1.f=UC&&!VC?Object.defineProperties:function(m,p){GC(m);for(var T=WC(p),P=HC(p),D=P.length,M=0,u;D>M;)ZC.f(m,u=P[M++],T[u]);return m};var qC=ig,KC=qC("document","documentElement"),XC=_y,YC=R1,k0=fv,QC=dv,JC=KC,eP=d1,tP=v1,A0=">",R0="<",j_="prototype",U_="script",z1=tP("IE_PROTO"),g_=function(){},L1=function(c){return R0+U_+A0+c+R0+"/"+U_+A0},z0=function(c){c.write(L1("")),c.close();var m=c.parentWindow.Object;return c=null,m},rP=function(){var c=eP("iframe"),m="java"+U_+":",p;return c.style.display="none",JC.appendChild(c),c.src=String(m),p=c.contentWindow.document,p.open(),p.write(L1("document.F=Object")),p.close(),p.F},Zg,Yg=function(){try{Zg=new ActiveXObject("htmlfile")}catch{}Yg=typeof document<"u"?document.domain&&Zg?z0(Zg):rP():z0(Zg);for(var c=k0.length;c--;)delete Yg[j_][k0[c]];return Yg()};QC[z1]=!0;var nP=Object.create||function(m,p){var T;return m!==null?(g_[j_]=XC(m),T=new g_,g_[j_]=null,T[z1]=m):T=Yg(),p===void 0?T:YC.f(T,p)},iP=og,oP=nP,sP=lm.f,V_=iP("unscopables"),Z_=Array.prototype;Z_[V_]==null&&sP(Z_,V_,{configurable:!0,value:oP(null)});var aP=function(c){Z_[V_][c]=!0},lP=YT,uP=BC.find,cP=aP,G_="find",D1=!0;G_ in[]&&Array(1)[G_](function(){D1=!1});lP({target:"Array",proto:!0,forced:D1},{find:function(m){return uP(this,m,arguments.length>1?arguments[1]:void 0)}});cP(G_);var oh={GLOBAL:{HIDE:"__react_tooltip_hide_event",REBUILD:"__react_tooltip_rebuild_event",SHOW:"__react_tooltip_show_event"}},y_=function(m,p){var T;typeof window.CustomEvent=="function"?T=new window.CustomEvent(m,{detail:p}):(T=document.createEvent("Event"),T.initEvent(m,!1,!0,p)),window.dispatchEvent(T)};function hP(c){c.hide=function(m){y_(oh.GLOBAL.HIDE,{target:m})},c.rebuild=function(){y_(oh.GLOBAL.REBUILD)},c.show=function(m){y_(oh.GLOBAL.SHOW,{target:m})},c.prototype.globalRebuild=function(){this.mount&&(this.unbindListener(),this.bindListener())},c.prototype.globalShow=function(m){if(this.mount){var p=m&&m.detail&&m.detail.target&&!0||!1;this.showTooltip({currentTarget:p&&m.detail.target},!0)}},c.prototype.globalHide=function(m){if(this.mount){var p=m&&m.detail&&m.detail.target&&!0||!1;this.hideTooltip({currentTarget:p&&m.detail.target},p)}}}function dP(c){c.prototype.bindWindowEvents=function(m){window.removeEventListener(oh.GLOBAL.HIDE,this.globalHide),window.addEventListener(oh.GLOBAL.HIDE,this.globalHide,!1),window.removeEventListener(oh.GLOBAL.REBUILD,this.globalRebuild),window.addEventListener(oh.GLOBAL.REBUILD,this.globalRebuild,!1),window.removeEventListener(oh.GLOBAL.SHOW,this.globalShow),window.addEventListener(oh.GLOBAL.SHOW,this.globalShow,!1),m&&(window.removeEventListener("resize",this.onWindowResize),window.addEventListener("resize",this.onWindowResize,!1))},c.prototype.unbindWindowEvents=function(){window.removeEventListener(oh.GLOBAL.HIDE,this.globalHide),window.removeEventListener(oh.GLOBAL.REBUILD,this.globalRebuild),window.removeEventListener(oh.GLOBAL.SHOW,this.globalShow),window.removeEventListener("resize",this.onWindowResize)},c.prototype.onWindowResize=function(){this.mount&&this.hideTooltip()}}var O1=function(m,p){var T=this.state.show,P=this.props.id,D=this.isCapture(p.currentTarget),M=p.currentTarget.getAttribute("currentItem");D||p.stopPropagation(),T&&M==="true"?m||this.hideTooltip(p):(p.currentTarget.setAttribute("currentItem","true"),fP(p.currentTarget,this.getTargetArray(P)),this.showTooltip(p))},fP=function(m,p){for(var T=0;T<p.length;T++)m!==p[T]?p[T].setAttribute("currentItem","false"):p[T].setAttribute("currentItem","true")},__={id:"9b69f92e-d3fe-498b-b1b4-c5e63a51b0cf",set:function(m,p,T){if(this.id in m){var P=m[this.id];P[p]=T}else Object.defineProperty(m,this.id,{configurable:!0,value:Wm({},p,T)})},get:function(m,p){var T=m[this.id];if(T!==void 0)return T[p]}};function pP(c){c.prototype.isCustomEvent=function(m){var p=this.state.event;return p||!!m.getAttribute("data-event")},c.prototype.customBindListener=function(m){var p=this,T=this.state,P=T.event,D=T.eventOff,M=m.getAttribute("data-event")||P,u=m.getAttribute("data-event-off")||D;M.split(" ").forEach(function(te){m.removeEventListener(te,__.get(m,te));var Y=O1.bind(p,u);__.set(m,te,Y),m.addEventListener(te,Y,!1)}),u&&u.split(" ").forEach(function(te){m.removeEventListener(te,p.hideTooltip),m.addEventListener(te,p.hideTooltip,!1)})},c.prototype.customUnbindListener=function(m){var p=this.state,T=p.event,P=p.eventOff,D=T||m.getAttribute("data-event"),M=P||m.getAttribute("data-event-off");m.removeEventListener(D,__.get(m,T)),M&&m.removeEventListener(M,this.hideTooltip)}}function mP(c){c.prototype.isCapture=function(m){return m&&m.getAttribute("data-iscapture")==="true"||this.props.isCapture||!1}}function gP(c){c.prototype.getEffect=function(m){var p=m.getAttribute("data-effect");return p||this.props.effect||"float"}}var yP=function(m){var p={};for(var T in m)typeof m[T]=="function"?p[T]=m[T].bind(m):p[T]=m[T];return p},Fm=function(m,p,T){for(var P=p.respectEffect,D=P===void 0?!1:P,M=p.customEvent,u=M===void 0?!1:M,te=this.props.id,Y=null,fe,he=T.target,Te;Y===null&&he!==null;)Te=he,Y=he.getAttribute("data-tip")||null,fe=he.getAttribute("data-for")||null,he=he.parentElement;if(he=Te||T.target,!(this.isCustomEvent(he)&&!u)){var ge=te==null&&fe==null||fe===te;if(Y!=null&&(!D||this.getEffect(he)==="float")&&ge){var we=yP(T);we.currentTarget=he,m(we)}}},L0=function(m,p){var T={};return m.forEach(function(P){var D=P.getAttribute(p);D&&D.split(" ").forEach(function(M){return T[M]=!0})}),T},D0=function(){return document.getElementsByTagName("body")[0]};function _P(c){c.prototype.isBodyMode=function(){return!!this.props.bodyMode},c.prototype.bindBodyListener=function(m){var p=this,T=this.state,P=T.event,D=T.eventOff,M=T.possibleCustomEvents,u=T.possibleCustomEventsOff,te=D0(),Y=L0(m,"data-event"),fe=L0(m,"data-event-off");P!=null&&(Y[P]=!0),D!=null&&(fe[D]=!0),M.split(" ").forEach(function(Ce){return Y[Ce]=!0}),u.split(" ").forEach(function(Ce){return fe[Ce]=!0}),this.unbindBodyListener(te);var he=this.bodyModeListeners={};P==null&&(he.mouseover=Fm.bind(this,this.showTooltip,{}),he.mousemove=Fm.bind(this,this.updateTooltip,{respectEffect:!0}),he.mouseout=Fm.bind(this,this.hideTooltip,{}));for(var Te in Y)he[Te]=Fm.bind(this,function(Ce){var We=Ce.currentTarget.getAttribute("data-event-off")||D;O1.call(p,We,Ce)},{customEvent:!0});for(var ge in fe)he[ge]=Fm.bind(this,this.hideTooltip,{customEvent:!0});for(var we in he)te.addEventListener(we,he[we])},c.prototype.unbindBodyListener=function(m){m=m||D0();var p=this.bodyModeListeners;for(var T in p)m.removeEventListener(T,p[T])}}var vP=function(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver};function xP(c){c.prototype.bindRemovalTracker=function(){var m=this,p=vP();if(p!=null){var T=new p(function(P){for(var D=0;D<P.length;D++)for(var M=P[D],u=0;u<M.removedNodes.length;u++){var te=M.removedNodes[u];if(te===m.state.currentTarget){m.hideTooltip();return}}});T.observe(window.document,{childList:!0,subtree:!0}),this.removalTracker=T}},c.prototype.unbindRemovalTracker=function(){this.removalTracker&&(this.removalTracker.disconnect(),this.removalTracker=null)}}function O0(c,m,p,T,P,D,M){var u=W_(p),te=u.width,Y=u.height,fe=W_(m),he=fe.width,Te=fe.height,ge=bP(c,m,D),we=ge.mouseX,Ce=ge.mouseY,We=wP(D,he,Te,te,Y),gt=SP(M),At=gt.extraOffsetX,Ct=gt.extraOffsetY,et=window.innerWidth,Je=window.innerHeight,it=TP(p),_t=it.parentTop,Le=it.parentLeft,je=function(Rt){var or=We[Rt].l;return we+or+At},ne=function(Rt){var or=We[Rt].r;return we+or+At},ot=function(Rt){var or=We[Rt].t;return Ce+or+Ct},at=function(Rt){var or=We[Rt].b;return Ce+or+Ct},Lt=function(Rt){return je(Rt)<0},rr=function(Rt){return ne(Rt)>et},Pr=function(Rt){return ot(Rt)<0},xr=function(Rt){return at(Rt)>Je},sr=function(Rt){return Lt(Rt)||rr(Rt)||Pr(Rt)||xr(Rt)},bt=function(Rt){return!sr(Rt)},Et={top:bt("top"),bottom:bt("bottom"),left:bt("left"),right:bt("right")};function Ht(){var cr=P.split(",").concat(T,["top","bottom","left","right"]),Rt=zw(cr),or;try{for(Rt.s();!(or=Rt.n()).done;){var Tr=or.value;if(Et[Tr])return Tr}}catch(pr){Rt.e(pr)}finally{Rt.f()}return T}var Fe=Ht(),ht=!1,Vt;return Fe&&Fe!==T&&(ht=!0,Vt=Fe),ht?{isNewState:!0,newState:{place:Vt}}:{isNewState:!1,position:{left:parseInt(je(T)-Le,10),top:parseInt(ot(T)-_t,10)}}}var W_=function(m){var p=m.getBoundingClientRect(),T=p.height,P=p.width;return{height:parseInt(T,10),width:parseInt(P,10)}},bP=function(m,p,T){var P=p.getBoundingClientRect(),D=P.top,M=P.left,u=W_(p),te=u.width,Y=u.height;return T==="float"?{mouseX:m.clientX,mouseY:m.clientY}:{mouseX:M+te/2,mouseY:D+Y/2}},wP=function(m,p,T,P,D){var M,u,te,Y,fe=3,he=2,Te=12;return m==="float"?(M={l:-(P/2),r:P/2,t:-(D+fe+he),b:-3},te={l:-(P/2),r:P/2,t:fe+Te,b:D+fe+he+Te},Y={l:-(P+fe+he),r:-3,t:-(D/2),b:D/2},u={l:fe,r:P+fe+he,t:-(D/2),b:D/2}):m==="solid"&&(M={l:-(P/2),r:P/2,t:-(T/2+D+he),b:-(T/2)},te={l:-(P/2),r:P/2,t:T/2,b:T/2+D+he},Y={l:-(P+p/2+he),r:-(p/2),t:-(D/2),b:D/2},u={l:p/2,r:P+p/2+he,t:-(D/2),b:D/2}),{top:M,bottom:te,left:Y,right:u}},SP=function(m){var p=0,T=0;Object.prototype.toString.apply(m)==="[object String]"&&(m=JSON.parse(m.toString().replace(/'/g,'"')));for(var P in m)P==="top"?T-=parseInt(m[P],10):P==="bottom"?T+=parseInt(m[P],10):P==="left"?p-=parseInt(m[P],10):P==="right"&&(p+=parseInt(m[P],10));return{extraOffsetX:p,extraOffsetY:T}},TP=function(m){for(var p=m;p;){var T=window.getComputedStyle(p);if(T.getPropertyValue("transform")!=="none"||T.getPropertyValue("will-change")==="transform")break;p=p.parentElement}var P=p&&p.getBoundingClientRect().top||0,D=p&&p.getBoundingClientRect().left||0;return{parentTop:P,parentLeft:D}};function F0(c,m,p,T){if(m)return m;if(p!=null)return p;if(p===null)return null;var P=/<br\s*\/?>/;return!T||T==="false"||!P.test(c)?c:c.split(P).map(function(D,M){return pu.createElement("span",{key:M,className:"multi-line"},D)})}function B0(c){var m={};return Object.keys(c).filter(function(p){return/(^aria-\w+$|^role$)/.test(p)}).forEach(function(p){m[p]=c[p]}),m}function v_(c){var m=c.length;return c.hasOwnProperty?Array.prototype.slice.call(c):new Array(m).fill().map(function(p){return c[p]})}function CP(){return"t"+Tw()}var PP=`.__react_component_tooltip {
  border-radius: 3px;
  display: inline-block;
  font-size: 13px;
  left: -999em;
  opacity: 0;
  position: fixed;
  pointer-events: none;
  transition: opacity 0.3s ease-out;
  top: -999em;
  visibility: hidden;
  z-index: 999;
}
.__react_component_tooltip.allow_hover, .__react_component_tooltip.allow_click {
  pointer-events: auto;
}
.__react_component_tooltip::before, .__react_component_tooltip::after {
  content: "";
  width: 0;
  height: 0;
  position: absolute;
}
.__react_component_tooltip.show {
  opacity: 0.9;
  margin-top: 0;
  margin-left: 0;
  visibility: visible;
}
.__react_component_tooltip.place-top::before {
  bottom: 0;
  left: 50%;
  margin-left: -11px;
}
.__react_component_tooltip.place-bottom::before {
  top: 0;
  left: 50%;
  margin-left: -11px;
}
.__react_component_tooltip.place-left::before {
  right: 0;
  top: 50%;
  margin-top: -9px;
}
.__react_component_tooltip.place-right::before {
  left: 0;
  top: 50%;
  margin-top: -9px;
}
.__react_component_tooltip .multi-line {
  display: block;
  padding: 2px 0;
  text-align: center;
}`,N0={dark:{text:"#fff",background:"#222",border:"transparent",arrow:"#222"},success:{text:"#fff",background:"#8DC572",border:"transparent",arrow:"#8DC572"},warning:{text:"#fff",background:"#F0AD4E",border:"transparent",arrow:"#F0AD4E"},error:{text:"#fff",background:"#BE6464",border:"transparent",arrow:"#BE6464"},info:{text:"#fff",background:"#337AB7",border:"transparent",arrow:"#337AB7"},light:{text:"#222",background:"#fff",border:"transparent",arrow:"#fff"}};function EP(c){return N0[c]?A_({},N0[c]):void 0}var IP="8px 21px",MP={tooltip:3,arrow:0};function kP(c,m,p,T,P,D){return AP(c,RP(m,p,T),P,D)}function AP(c,m){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:IP,T=arguments.length>3&&arguments[3]!==void 0?arguments[3]:MP,P=m.text,D=m.background,M=m.border,u=m.arrow,te=T.arrow,Y=T.tooltip;return`
  	.`.concat(c,` {
	    color: `).concat(P,`;
	    background: `).concat(D,`;
	    border: 1px solid `).concat(M,`;
	    border-radius: `).concat(Y,`px;
	    padding: `).concat(p,`;
  	}

  	.`).concat(c,`.place-top {
        margin-top: -10px;
    }
    .`).concat(c,`.place-top::before {
        content: "";
        background-color: inherit;
        position: absolute;
        z-index: 2;
        width: 20px;
        height: 12px;
    }
    .`).concat(c,`.place-top::after {
        content: "";
        position: absolute;
        width: 10px;
        height: 10px;
        border-top-right-radius: `).concat(te,`px;
        border: 1px solid `).concat(M,`;
        background-color: `).concat(u,`;
        z-index: -2;
        bottom: -6px;
        left: 50%;
        margin-left: -6px;
        transform: rotate(135deg);
    }

    .`).concat(c,`.place-bottom {
        margin-top: 10px;
    }
    .`).concat(c,`.place-bottom::before {
        content: "";
        background-color: inherit;
        position: absolute;
        z-index: -1;
        width: 18px;
        height: 10px;
    }
    .`).concat(c,`.place-bottom::after {
        content: "";
        position: absolute;
        width: 10px;
        height: 10px;
        border-top-right-radius: `).concat(te,`px;
        border: 1px solid `).concat(M,`;
        background-color: `).concat(u,`;
        z-index: -2;
        top: -6px;
        left: 50%;
        margin-left: -6px;
        transform: rotate(45deg);
    }

    .`).concat(c,`.place-left {
        margin-left: -10px;
    }
    .`).concat(c,`.place-left::before {
        content: "";
        background-color: inherit;
        position: absolute;
        z-index: -1;
        width: 10px;
        height: 18px;
    }
    .`).concat(c,`.place-left::after {
        content: "";
        position: absolute;
        width: 10px;
        height: 10px;
        border-top-right-radius: `).concat(te,`px;
        border: 1px solid `).concat(M,`;
        background-color: `).concat(u,`;
        z-index: -2;
        right: -6px;
        top: 50%;
        margin-top: -6px;
        transform: rotate(45deg);
    }

    .`).concat(c,`.place-right {
        margin-left: 10px;
    }
    .`).concat(c,`.place-right::before {
        content: "";
        background-color: inherit;
        position: absolute;
        z-index: -1;
        width: 10px;
        height: 18px;
    }
    .`).concat(c,`.place-right::after {
        content: "";
        position: absolute;
        width: 10px;
        height: 10px;
        border-top-right-radius: `).concat(te,`px;
        border: 1px solid `).concat(M,`;
        background-color: `).concat(u,`;
        z-index: -2;
        left: -6px;
        top: 50%;
        margin-top: -6px;
        transform: rotate(-135deg);
    }
  `)}function RP(c,m,p){var T=c.text,P=c.background,D=c.border,M=c.arrow?c.arrow:c.background,u=EP(m);return T&&(u.text=T),P&&(u.background=P),p&&(D?u.border=D:u.border=m==="light"?"black":"white"),M&&(u.arrow=M),u}var ju,Bm,zP=hP(ju=dP(ju=pP(ju=mP(ju=gP(ju=_P(ju=xP(ju=(Bm=function(c){Ew(p,c);var m=Aw(p);function p(T){var P;return Cw(this,p),P=m.call(this,T),P.state={uuid:T.uuid||CP(),place:T.place||"top",desiredPlace:T.place||"top",type:T.type||"dark",effect:T.effect||"float",show:!1,border:!1,borderClass:"border",customColors:{},customRadius:{},offset:{},padding:T.padding,extraClass:"",html:!1,delayHide:0,delayShow:0,event:T.event||null,eventOff:T.eventOff||null,currentEvent:null,currentTarget:null,ariaProps:B0(T),isEmptyTip:!1,disable:!1,possibleCustomEvents:T.possibleCustomEvents||"",possibleCustomEventsOff:T.possibleCustomEventsOff||"",originTooltip:null,isMultiline:!1},P.bind(["showTooltip","updateTooltip","hideTooltip","hideTooltipOnScroll","getTooltipContent","globalRebuild","globalShow","globalHide","onWindowResize","mouseOnToolTip"]),P.mount=!0,P.delayShowLoop=null,P.delayHideLoop=null,P.delayReshow=null,P.intervalUpdateContent=null,P}return Pw(p,[{key:"bind",value:function(P){var D=this;P.forEach(function(M){D[M]=D[M].bind(D)})}},{key:"componentDidMount",value:function(){var P=this.props;P.insecure;var D=P.resizeHide,M=P.disableInternalStyle;this.mount=!0,this.bindListener(),this.bindWindowEvents(D),M||this.injectStyles()}},{key:"componentWillUnmount",value:function(){this.mount=!1,this.clearTimer(),this.unbindListener(),this.removeScrollListener(this.state.currentTarget),this.unbindWindowEvents()}},{key:"injectStyles",value:function(){var P=this.tooltipRef;if(P){for(var D=P.parentNode;D.parentNode;)D=D.parentNode;var M;switch(D.constructor.name){case"Document":case"HTMLDocument":case void 0:M=D.head;break;case"ShadowRoot":default:M=D;break}if(!M.querySelector("style[data-react-tooltip]")){var u=document.createElement("style");u.textContent=PP,u.setAttribute("data-react-tooltip","true"),M.appendChild(u)}}}},{key:"mouseOnToolTip",value:function(){var P=this.state.show;return P&&this.tooltipRef?(this.tooltipRef.matches||(this.tooltipRef.msMatchesSelector?this.tooltipRef.matches=this.tooltipRef.msMatchesSelector:this.tooltipRef.matches=this.tooltipRef.mozMatchesSelector),this.tooltipRef.matches(":hover")):!1}},{key:"getTargetArray",value:function(P){var D=[],M;if(!P)M="[data-tip]:not([data-for])";else{var u=P.replace(/\\/g,"\\\\").replace(/"/g,'\\"');M='[data-tip][data-for="'.concat(u,'"]')}return v_(document.getElementsByTagName("*")).filter(function(te){return te.shadowRoot}).forEach(function(te){D=D.concat(v_(te.shadowRoot.querySelectorAll(M)))}),D.concat(v_(document.querySelectorAll(M)))}},{key:"bindListener",value:function(){var P=this,D=this.props,M=D.id,u=D.globalEventOff,te=D.isCapture,Y=this.getTargetArray(M);Y.forEach(function(fe){fe.getAttribute("currentItem")===null&&fe.setAttribute("currentItem","false"),P.unbindBasicListener(fe),P.isCustomEvent(fe)&&P.customUnbindListener(fe)}),this.isBodyMode()?this.bindBodyListener(Y):Y.forEach(function(fe){var he=P.isCapture(fe),Te=P.getEffect(fe);if(P.isCustomEvent(fe)){P.customBindListener(fe);return}fe.addEventListener("mouseenter",P.showTooltip,he),fe.addEventListener("focus",P.showTooltip,he),Te==="float"&&fe.addEventListener("mousemove",P.updateTooltip,he),fe.addEventListener("mouseleave",P.hideTooltip,he),fe.addEventListener("blur",P.hideTooltip,he)}),u&&(window.removeEventListener(u,this.hideTooltip),window.addEventListener(u,this.hideTooltip,te)),this.bindRemovalTracker()}},{key:"unbindListener",value:function(){var P=this,D=this.props,M=D.id,u=D.globalEventOff;if(this.isBodyMode())this.unbindBodyListener();else{var te=this.getTargetArray(M);te.forEach(function(Y){P.unbindBasicListener(Y),P.isCustomEvent(Y)&&P.customUnbindListener(Y)})}u&&window.removeEventListener(u,this.hideTooltip),this.unbindRemovalTracker()}},{key:"unbindBasicListener",value:function(P){var D=this.isCapture(P);P.removeEventListener("mouseenter",this.showTooltip,D),P.removeEventListener("mousemove",this.updateTooltip,D),P.removeEventListener("mouseleave",this.hideTooltip,D)}},{key:"getTooltipContent",value:function(){var P=this.props,D=P.getContent,M=P.children,u;return D&&(Array.isArray(D)?u=D[0]&&D[0](this.state.originTooltip):u=D(this.state.originTooltip)),F0(this.state.originTooltip,M,u,this.state.isMultiline)}},{key:"isEmptyTip",value:function(P){return typeof P=="string"&&P===""||P===null}},{key:"showTooltip",value:function(P,D){if(this.tooltipRef){if(D){var M=this.getTargetArray(this.props.id),u=M.some(function(Le){return Le===P.currentTarget});if(!u)return}var te=this.props,Y=te.multiline,fe=te.getContent,he=P.currentTarget.getAttribute("data-tip"),Te=P.currentTarget.getAttribute("data-multiline")||Y||!1,ge=P instanceof window.FocusEvent||D,we=!0;P.currentTarget.getAttribute("data-scroll-hide")?we=P.currentTarget.getAttribute("data-scroll-hide")==="true":this.props.scrollHide!=null&&(we=this.props.scrollHide),P&&P.currentTarget&&P.currentTarget.setAttribute&&P.currentTarget.setAttribute("aria-describedby",this.props.id||this.state.uuid);var Ce=P.currentTarget.getAttribute("data-place")||this.props.place||"top",We=ge&&"solid"||this.getEffect(P.currentTarget),gt=P.currentTarget.getAttribute("data-offset")||this.props.offset||{},At=O0(P,P.currentTarget,this.tooltipRef,Ce.split(",")[0],Ce,We,gt);At.position&&this.props.overridePosition&&(At.position=this.props.overridePosition(At.position,P,P.currentTarget,this.tooltipRef,Ce,Ce,We,gt));var Ct=At.isNewState?At.newState.place:Ce.split(",")[0];this.clearTimer();var et=P.currentTarget,Je=this.state.show?et.getAttribute("data-delay-update")||this.props.delayUpdate:0,it=this,_t=function(){it.setState({originTooltip:he,isMultiline:Te,desiredPlace:Ce,place:Ct,type:et.getAttribute("data-type")||it.props.type||"dark",customColors:{text:et.getAttribute("data-text-color")||it.props.textColor||null,background:et.getAttribute("data-background-color")||it.props.backgroundColor||null,border:et.getAttribute("data-border-color")||it.props.borderColor||null,arrow:et.getAttribute("data-arrow-color")||it.props.arrowColor||null},customRadius:{tooltip:et.getAttribute("data-tooltip-radius")||it.props.tooltipRadius||"3",arrow:et.getAttribute("data-arrow-radius")||it.props.arrowRadius||"0"},effect:We,offset:gt,padding:et.getAttribute("data-padding")||it.props.padding,html:(et.getAttribute("data-html")?et.getAttribute("data-html")==="true":it.props.html)||!1,delayShow:et.getAttribute("data-delay-show")||it.props.delayShow||0,delayHide:et.getAttribute("data-delay-hide")||it.props.delayHide||0,delayUpdate:et.getAttribute("data-delay-update")||it.props.delayUpdate||0,border:(et.getAttribute("data-border")?et.getAttribute("data-border")==="true":it.props.border)||!1,borderClass:et.getAttribute("data-border-class")||it.props.borderClass||"border",extraClass:et.getAttribute("data-class")||it.props.class||it.props.className||"",disable:(et.getAttribute("data-tip-disable")?et.getAttribute("data-tip-disable")==="true":it.props.disable)||!1,currentTarget:et},function(){we&&it.addScrollListener(it.state.currentTarget),it.updateTooltip(P),fe&&Array.isArray(fe)&&(it.intervalUpdateContent=setInterval(function(){if(it.mount){var je=it.props.getContent,ne=F0(he,"",je[0](),Te),ot=it.isEmptyTip(ne);it.setState({isEmptyTip:ot}),it.updatePosition()}},fe[1]))})};Je?this.delayReshow=setTimeout(_t,Je):_t()}}},{key:"updateTooltip",value:function(P){var D=this,M=this.state,u=M.delayShow,te=M.disable,Y=this.props,fe=Y.afterShow,he=Y.disable,Te=this.getTooltipContent(),ge=P.currentTarget||P.target;if(!this.mouseOnToolTip()&&!(this.isEmptyTip(Te)||te||he)){var we=this.state.show?0:parseInt(u,10),Ce=function(){if(Array.isArray(Te)&&Te.length>0||Te){var gt=!D.state.show;D.setState({currentEvent:P,currentTarget:ge,show:!0},function(){D.updatePosition(function(){gt&&fe&&fe(P)})})}};this.delayShowLoop&&clearTimeout(this.delayShowLoop),we?this.delayShowLoop=setTimeout(Ce,we):(this.delayShowLoop=null,Ce())}}},{key:"listenForTooltipExit",value:function(){var P=this.state.show;P&&this.tooltipRef&&this.tooltipRef.addEventListener("mouseleave",this.hideTooltip)}},{key:"removeListenerForTooltipExit",value:function(){var P=this.state.show;P&&this.tooltipRef&&this.tooltipRef.removeEventListener("mouseleave",this.hideTooltip)}},{key:"hideTooltip",value:function(P,D){var M=this,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{isScroll:!1},te=this.state.disable,Y=u.isScroll,fe=Y?0:this.state.delayHide,he=this.props,Te=he.afterHide,ge=he.disable,we=this.getTooltipContent();if(this.mount&&!(this.isEmptyTip(we)||te||ge)){if(D){var Ce=this.getTargetArray(this.props.id),We=Ce.some(function(At){return At===P.currentTarget});if(!We||!this.state.show)return}P&&P.currentTarget&&P.currentTarget.removeAttribute&&P.currentTarget.removeAttribute("aria-describedby");var gt=function(){var Ct=M.state.show;if(M.mouseOnToolTip()){M.listenForTooltipExit();return}M.removeListenerForTooltipExit(),M.setState({show:!1},function(){M.removeScrollListener(M.state.currentTarget),Ct&&Te&&Te(P)})};this.clearTimer(),fe?this.delayHideLoop=setTimeout(gt,parseInt(fe,10)):gt()}}},{key:"hideTooltipOnScroll",value:function(P,D){this.hideTooltip(P,D,{isScroll:!0})}},{key:"addScrollListener",value:function(P){var D=this.isCapture(P);window.addEventListener("scroll",this.hideTooltipOnScroll,D)}},{key:"removeScrollListener",value:function(P){var D=this.isCapture(P);window.removeEventListener("scroll",this.hideTooltipOnScroll,D)}},{key:"updatePosition",value:function(P){var D=this,M=this.state,u=M.currentEvent,te=M.currentTarget,Y=M.place,fe=M.desiredPlace,he=M.effect,Te=M.offset,ge=this.tooltipRef,we=O0(u,te,ge,Y,fe,he,Te);if(we.position&&this.props.overridePosition&&(we.position=this.props.overridePosition(we.position,u,te,ge,Y,fe,he,Te)),we.isNewState)return this.setState(we.newState,function(){D.updatePosition(P)});P&&typeof P=="function"&&P(),ge.style.left=we.position.left+"px",ge.style.top=we.position.top+"px"}},{key:"clearTimer",value:function(){this.delayShowLoop&&(clearTimeout(this.delayShowLoop),this.delayShowLoop=null),this.delayHideLoop&&(clearTimeout(this.delayHideLoop),this.delayHideLoop=null),this.delayReshow&&(clearTimeout(this.delayReshow),this.delayReshow=null),this.intervalUpdateContent&&(clearInterval(this.intervalUpdateContent),this.intervalUpdateContent=null)}},{key:"hasCustomColors",value:function(){var P=this;return!!(Object.keys(this.state.customColors).find(function(D){return D!=="border"&&P.state.customColors[D]})||this.state.border&&this.state.customColors.border)}},{key:"render",value:function(){var P=this,D=this.state,M=D.extraClass,u=D.html,te=D.ariaProps,Y=D.disable,fe=D.uuid,he=this.getTooltipContent(),Te=this.isEmptyTip(he),ge=this.props.disableInternalStyle?"":kP(this.state.uuid,this.state.customColors,this.state.type,this.state.border,this.state.padding,this.state.customRadius),we="__react_component_tooltip"+" ".concat(this.state.uuid)+(this.state.show&&!Y&&!Te?" show":"")+(this.state.border?" "+this.state.borderClass:"")+" place-".concat(this.state.place)+" type-".concat(this.hasCustomColors()?"custom":this.state.type)+(this.props.delayUpdate?" allow_hover":"")+(this.props.clickable?" allow_click":""),Ce=this.props.wrapper;p.supportedWrappers.indexOf(Ce)<0&&(Ce=p.defaultProps.wrapper);var We=[we,M].filter(Boolean).join(" ");if(u){var gt="".concat(he).concat(ge?`
<style aria-hidden="true">`.concat(ge,"</style>"):"");return pu.createElement(Ce,sy({className:"".concat(We),id:this.props.id||fe,ref:function(Ct){return P.tooltipRef=Ct}},te,{"data-id":"tooltip",dangerouslySetInnerHTML:{__html:gt}}))}else return pu.createElement(Ce,sy({className:"".concat(We),id:this.props.id||fe},te,{ref:function(Ct){return P.tooltipRef=Ct},"data-id":"tooltip"}),ge&&pu.createElement("style",{dangerouslySetInnerHTML:{__html:ge},"aria-hidden":"true"}),he)}}],[{key:"propTypes",get:function(){return{uuid:Bn.string,children:Bn.any,place:Bn.string,type:Bn.string,effect:Bn.string,offset:Bn.object,padding:Bn.string,multiline:Bn.bool,border:Bn.bool,borderClass:Bn.string,textColor:Bn.string,backgroundColor:Bn.string,borderColor:Bn.string,arrowColor:Bn.string,arrowRadius:Bn.string,tooltipRadius:Bn.string,insecure:Bn.bool,class:Bn.string,className:Bn.string,id:Bn.string,html:Bn.bool,delayHide:Bn.number,delayUpdate:Bn.number,delayShow:Bn.number,event:Bn.string,eventOff:Bn.string,isCapture:Bn.bool,globalEventOff:Bn.string,getContent:Bn.any,afterShow:Bn.func,afterHide:Bn.func,overridePosition:Bn.func,disable:Bn.bool,scrollHide:Bn.bool,resizeHide:Bn.bool,wrapper:Bn.string,bodyMode:Bn.bool,possibleCustomEvents:Bn.string,possibleCustomEventsOff:Bn.string,clickable:Bn.bool,disableInternalStyle:Bn.bool}}},{key:"getDerivedStateFromProps",value:function(P,D){var M=D.ariaProps,u=B0(P),te=Object.keys(u).some(function(Y){return u[Y]!==M[Y]});return te?A_(A_({},D),{},{ariaProps:u}):null}}]),p}(pu.Component),Wm(Bm,"defaultProps",{insecure:!0,resizeHide:!0,wrapper:"div",clickable:!1}),Wm(Bm,"supportedWrappers",["div","span"]),Wm(Bm,"displayName","ReactTooltip"),Bm))||ju)||ju)||ju)||ju)||ju)||ju)||ju,Qg={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.5.0/LICENSE.txt
 */var LP=Qg.exports,$0;function DP(){return $0||($0=1,function(c,m){(function(p,T){c.exports=T()})(LP,function(){var p={},T={};function P(M,u,te){if(T[M]=te,M==="index"){var Y="var sharedModule = {}; ("+T.shared+")(sharedModule); ("+T.worker+")(sharedModule);",fe={};return T.shared(fe),T.index(p,fe),typeof window<"u"&&p.setWorkerUrl(window.URL.createObjectURL(new Blob([Y],{type:"text/javascript"}))),p}}P("shared",["exports"],function(M){function u(i,t,n,s){return new(n||(n=Promise))(function(f,v){function b(R){try{k(s.next(R))}catch(F){v(F)}}function S(R){try{k(s.throw(R))}catch(F){v(F)}}function k(R){var F;R.done?f(R.value):(F=R.value,F instanceof n?F:new n(function(j){j(F)})).then(b,S)}k((s=s.apply(i,t||[])).next())})}function te(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Y,fe;function he(){if(fe)return Y;function i(t,n){this.x=t,this.y=n}return fe=1,Y=i,i.prototype={clone:function(){return new i(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,n){return this.clone()._rotateAround(t,n)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var n=t.x-this.x,s=t.y-this.y;return n*n+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,n){return Math.atan2(this.x*n-this.y*t,this.x*t+this.y*n)},_matMult:function(t){var n=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=n,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var n=Math.cos(t),s=Math.sin(t),f=s*this.x+n*this.y;return this.x=n*this.x-s*this.y,this.y=f,this},_rotateAround:function(t,n){var s=Math.cos(t),f=Math.sin(t),v=n.y+f*(this.x-n.x)+s*(this.y-n.y);return this.x=n.x+s*(this.x-n.x)-f*(this.y-n.y),this.y=v,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},i.convert=function(t){return t instanceof i?t:Array.isArray(t)?new i(t[0],t[1]):t},Y}typeof SuppressedError=="function"&&SuppressedError;var Te,ge,we=te(he()),Ce=function(){if(ge)return Te;function i(t,n,s,f){this.cx=3*t,this.bx=3*(s-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(f-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=n,this.p2x=s,this.p2y=f}return ge=1,Te=i,i.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,n){if(n===void 0&&(n=1e-6),t<0)return 0;if(t>1)return 1;for(var s=t,f=0;f<8;f++){var v=this.sampleCurveX(s)-t;if(Math.abs(v)<n)return s;var b=this.sampleCurveDerivativeX(s);if(Math.abs(b)<1e-6)break;s-=v/b}var S=0,k=1;for(s=t,f=0;f<20&&(v=this.sampleCurveX(s),!(Math.abs(v-t)<n));f++)t>v?S=s:k=s,s=.5*(k-S)+S;return s},solve:function(t,n){return this.sampleCurveY(this.solveCurveX(t,n))}},Te}(),We=te(Ce);let gt,At;function Ct(){return gt==null&&(gt=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),gt}function et(){if(At==null&&(At=!1,Ct())){const t=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(t){for(let s=0;s<5*5;s++){const f=4*s;t.fillStyle=`rgb(${f},${f+1},${f+2})`,t.fillRect(s%5,Math.floor(s/5),1,1)}const n=t.getImageData(0,0,5,5).data;for(let s=0;s<5*5*4;s++)if(s%4!=3&&n[s]!==s){At=!0;break}}}return At||!1}var Je=1e-6,it=typeof Float32Array<"u"?Float32Array:Array;function _t(){var i=new it(9);return it!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[5]=0,i[6]=0,i[7]=0),i[0]=1,i[4]=1,i[8]=1,i}function Le(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function je(){var i=new it(3);return it!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0),i}function ne(i){return Math.hypot(i[0],i[1],i[2])}function ot(i,t,n){var s=new it(3);return s[0]=i,s[1]=t,s[2]=n,s}Math.hypot||(Math.hypot=function(){for(var i=0,t=arguments.length;t--;)i+=arguments[t]*arguments[t];return Math.sqrt(i)});var at,Lt=ne;function rr(i,t,n){var s=t[0],f=t[1],v=t[2],b=t[3];return i[0]=n[0]*s+n[4]*f+n[8]*v+n[12]*b,i[1]=n[1]*s+n[5]*f+n[9]*v+n[13]*b,i[2]=n[2]*s+n[6]*f+n[10]*v+n[14]*b,i[3]=n[3]*s+n[7]*f+n[11]*v+n[15]*b,i}function Pr(){var i=new it(4);return it!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0),i[3]=1,i}function xr(){var i=new it(2);return it!=Float32Array&&(i[0]=0,i[1]=0),i}function sr(i,t){var n=new it(2);return n[0]=i,n[1]=t,n}je(),at=new it(4),it!=Float32Array&&(at[0]=0,at[1]=0,at[2]=0,at[3]=0),je(),ot(1,0,0),ot(0,1,0),Pr(),Pr(),_t(),xr();const bt=8192;function Et(i,t,n){return t*(bt/(i.tileSize*Math.pow(2,n-i.tileID.overscaledZ)))}function Ht(i,t){return(i%t+t)%t}function Fe(i,t,n){return i*(1-n)+t*n}function ht(i){if(i<=0)return 0;if(i>=1)return 1;const t=i*i,n=t*i;return 4*(i<.5?n:3*(i-t)+n-.75)}function Vt(i,t,n,s){const f=new We(i,t,n,s);return v=>f.solve(v)}const cr=Vt(.25,.1,.25,1);function Rt(i,t,n){return Math.min(n,Math.max(t,i))}function or(i,t,n){const s=n-t,f=((i-t)%s+s)%s+t;return f===t?n:f}function Tr(i,...t){for(const n of t)for(const s in n)i[s]=n[s];return i}let pr=1;function mr(i,t,n){const s={};for(const f in i)s[f]=t.call(this,i[f],f,i);return s}function Jr(i,t,n){const s={};for(const f in i)t.call(this,i[f],f,i)&&(s[f]=i[f]);return s}function Cr(i){return Array.isArray(i)?i.map(Cr):typeof i=="object"&&i?mr(i,Cr):i}const rn={};function jr(i){rn[i]||(typeof console<"u"&&console.warn(i),rn[i]=!0)}function br(i,t,n){return(n.y-i.y)*(t.x-i.x)>(t.y-i.y)*(n.x-i.x)}function on(i){return typeof WorkerGlobalScope<"u"&&i!==void 0&&i instanceof WorkerGlobalScope}let qr=null;function fn(i){return typeof ImageBitmap<"u"&&i instanceof ImageBitmap}const sn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function wn(i,t,n,s,f){return u(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const v=new VideoFrame(i,{timestamp:0});try{const b=v==null?void 0:v.format;if(!b||!b.startsWith("BGR")&&!b.startsWith("RGB"))throw new Error(`Unrecognized format ${b}`);const S=b.startsWith("BGR"),k=new Uint8ClampedArray(s*f*4);if(yield v.copyTo(k,function(R,F,j,H,X){const ee=4*Math.max(1,0),oe=(Math.max(0,j)-j)*H*4+ee,ye=4*H,Pe=Math.max(0,F),Ze=Math.max(0,j);return{rect:{x:Pe,y:Ze,width:Math.min(R.width,F+H)-Pe,height:Math.min(R.height,j+X)-Ze},layout:[{offset:oe,stride:ye}]}}(i,t,n,s,f)),S)for(let R=0;R<k.length;R+=4){const F=k[R];k[R]=k[R+2],k[R+2]=F}return k}finally{v.close()}})}let an,An;function Sr(i,t,n,s){return i.addEventListener(t,n,s),{unsubscribe:()=>{i.removeEventListener(t,n,s)}}}function Vn(i){return i*Math.PI/180}function Hn(i){return i/Math.PI*180}const Ti={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},ei={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},qn="AbortError";function Nn(){return new Error(qn)}const eo={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Wi(i){return eo.REGISTERED_PROTOCOLS[i.substring(0,i.indexOf("://"))]}const Zi="global-dispatcher";class ti extends Error{constructor(t,n,s,f){super(`AJAXError: ${n} (${t}): ${s}`),this.status=t,this.statusText=n,this.url=s,this.body=f}}const oi=()=>on(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,go=function(i,t){if(/:\/\//.test(i.url)&&!/^https?:|^file:/.test(i.url)){const s=Wi(i.url);if(s)return s(i,t);if(on(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:i,targetMapId:Zi},t)}if(!(/^file:/.test(n=i.url)||/^file:/.test(oi())&&!/^\w+:/.test(n))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(s,f){return u(this,void 0,void 0,function*(){const v=new Request(s.url,{method:s.method||"GET",body:s.body,credentials:s.credentials,headers:s.headers,cache:s.cache,referrer:oi(),signal:f.signal});let b,S;s.type!=="json"||v.headers.has("Accept")||v.headers.set("Accept","application/json");try{b=yield fetch(v)}catch(R){throw new ti(0,R.message,s.url,new Blob)}if(!b.ok){const R=yield b.blob();throw new ti(b.status,b.statusText,s.url,R)}S=s.type==="arrayBuffer"||s.type==="image"?b.arrayBuffer():s.type==="json"?b.json():b.text();const k=yield S;if(f.signal.aborted)throw Nn();return{data:k,cacheControl:b.headers.get("Cache-Control"),expires:b.headers.get("Expires")}})}(i,t);if(on(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:i,mustQueue:!0,targetMapId:Zi},t)}var n;return function(s,f){return new Promise((v,b)=>{var S;const k=new XMLHttpRequest;k.open(s.method||"GET",s.url,!0),s.type!=="arrayBuffer"&&s.type!=="image"||(k.responseType="arraybuffer");for(const R in s.headers)k.setRequestHeader(R,s.headers[R]);s.type==="json"&&(k.responseType="text",!((S=s.headers)===null||S===void 0)&&S.Accept||k.setRequestHeader("Accept","application/json")),k.withCredentials=s.credentials==="include",k.onerror=()=>{b(new Error(k.statusText))},k.onload=()=>{if(!f.signal.aborted)if((k.status>=200&&k.status<300||k.status===0)&&k.response!==null){let R=k.response;if(s.type==="json")try{R=JSON.parse(k.response)}catch(F){return void b(F)}v({data:R,cacheControl:k.getResponseHeader("Cache-Control"),expires:k.getResponseHeader("Expires")})}else{const R=new Blob([k.response],{type:k.getResponseHeader("Content-Type")});b(new ti(k.status,k.statusText,s.url,R))}},f.signal.addEventListener("abort",()=>{k.abort(),b(Nn())}),k.send(s.body)})}(i,t)};function tt(i){if(!i||i.indexOf("://")<=0||i.indexOf("data:image/")===0||i.indexOf("blob:")===0)return!0;const t=new URL(i),n=window.location;return t.protocol===n.protocol&&t.host===n.host}function ae(i,t,n){n[i]&&n[i].indexOf(t)!==-1||(n[i]=n[i]||[],n[i].push(t))}function le(i,t,n){if(n&&n[i]){const s=n[i].indexOf(t);s!==-1&&n[i].splice(s,1)}}class _e{constructor(t,n={}){Tr(this,n),this.type=t}}class Me extends _e{constructor(t,n={}){super("error",Tr({error:t},n))}}class Ve{on(t,n){return this._listeners=this._listeners||{},ae(t,n,this._listeners),{unsubscribe:()=>{this.off(t,n)}}}off(t,n){return le(t,n,this._listeners),le(t,n,this._oneTimeListeners),this}once(t,n){return n?(this._oneTimeListeners=this._oneTimeListeners||{},ae(t,n,this._oneTimeListeners),this):new Promise(s=>this.once(t,s))}fire(t,n){typeof t=="string"&&(t=new _e(t,n||{}));const s=t.type;if(this.listens(s)){t.target=this;const f=this._listeners&&this._listeners[s]?this._listeners[s].slice():[];for(const S of f)S.call(this,t);const v=this._oneTimeListeners&&this._oneTimeListeners[s]?this._oneTimeListeners[s].slice():[];for(const S of v)le(s,S,this._oneTimeListeners),S.call(this,t);const b=this._eventedParent;b&&(Tr(t,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),b.fire(t))}else t instanceof Me&&console.error(t.error);return this}listens(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)}setEventedParent(t,n){return this._eventedParent=t,this._eventedParentData=n,this}}var pe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Ke=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function He(i,t){const n={};for(const s in i)s!=="ref"&&(n[s]=i[s]);return Ke.forEach(s=>{s in t&&(n[s]=t[s])}),n}function nt(i,t){if(Array.isArray(i)){if(!Array.isArray(t)||i.length!==t.length)return!1;for(let n=0;n<i.length;n++)if(!nt(i[n],t[n]))return!1;return!0}if(typeof i=="object"&&i!==null&&t!==null){if(typeof t!="object"||Object.keys(i).length!==Object.keys(t).length)return!1;for(const n in i)if(!nt(i[n],t[n]))return!1;return!0}return i===t}function ft(i,t){i.push(t)}function Ye(i,t,n){ft(n,{command:"addSource",args:[i,t[i]]})}function Dt(i,t,n){ft(t,{command:"removeSource",args:[i]}),n[i]=!0}function Yt(i,t,n,s){Dt(i,n,s),Ye(i,t,n)}function hr(i,t,n){let s;for(s in i[n])if(Object.prototype.hasOwnProperty.call(i[n],s)&&s!=="data"&&!nt(i[n][s],t[n][s]))return!1;for(s in t[n])if(Object.prototype.hasOwnProperty.call(t[n],s)&&s!=="data"&&!nt(i[n][s],t[n][s]))return!1;return!0}function kr(i,t,n,s,f,v){i=i||{},t=t||{};for(const b in i)Object.prototype.hasOwnProperty.call(i,b)&&(nt(i[b],t[b])||n.push({command:v,args:[s,b,t[b],f]}));for(const b in t)Object.prototype.hasOwnProperty.call(t,b)&&!Object.prototype.hasOwnProperty.call(i,b)&&(nt(i[b],t[b])||n.push({command:v,args:[s,b,t[b],f]}))}function Kr(i){return i.id}function $r(i,t){return i[t.id]=t,i}class Tt{constructor(t,n,s,f){this.message=(t?`${t}: `:"")+s,f&&(this.identifier=f),n!=null&&n.__line__&&(this.line=n.__line__)}}function Sn(i,...t){for(const n of t)for(const s in n)i[s]=n[s];return i}class _n extends Error{constructor(t,n){super(n),this.message=n,this.key=t}}class Tn{constructor(t,n=[]){this.parent=t,this.bindings={};for(const[s,f]of n)this.bindings[s]=f}concat(t){return new Tn(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const Br={kind:"null"},Ft={kind:"number"},Fr={kind:"string"},nn={kind:"boolean"},Zn={kind:"color"},Gn={kind:"projectionDefinition"},Eo={kind:"object"},cn={kind:"value"},Qs={kind:"collator"},Js={kind:"formatted"},Es={kind:"padding"},tl={kind:"colorArray"},Go={kind:"numberArray"},Da={kind:"resolvedImage"},hn={kind:"variableAnchorOffsetCollection"};function ui(i,t){return{kind:"array",itemType:i,N:t}}function Kn(i){if(i.kind==="array"){const t=Kn(i.itemType);return typeof i.N=="number"?`array<${t}, ${i.N}>`:i.itemType.kind==="value"?"array":`array<${t}>`}return i.kind}const Oa=[Br,Ft,Fr,nn,Zn,Gn,Js,Eo,ui(cn),Es,Go,tl,Da,hn];function os(i,t){if(t.kind==="error")return null;if(i.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!os(i.itemType,t.itemType))&&(typeof i.N!="number"||i.N===t.N))return null}else{if(i.kind===t.kind)return null;if(i.kind==="value"){for(const n of Oa)if(!os(n,t))return null}}return`Expected ${Kn(i)} but found ${Kn(t)} instead.`}function Xl(i,t){return t.some(n=>n.kind===i.kind)}function Oo(i,t){return t.some(n=>n==="null"?i===null:n==="array"?Array.isArray(i):n==="object"?i&&!Array.isArray(i)&&typeof i=="object":n===typeof i)}function to(i,t){return i.kind==="array"&&t.kind==="array"?i.itemType.kind===t.itemType.kind&&typeof i.N=="number":i.kind===t.kind}const ss=.96422,rl=.82521,yo=4/29,ya=6/29,Yl=3*ya*ya,mu=ya*ya*ya,_a=Math.PI/180,Ql=180/Math.PI;function Fa(i){return(i%=360)<0&&(i+=360),i}function Is([i,t,n,s]){let f,v;const b=J((.2225045*(i=B(i))+.7168786*(t=B(t))+.0606169*(n=B(n)))/1);i===t&&t===n?f=v=b:(f=J((.4360747*i+.3850649*t+.1430804*n)/ss),v=J((.0139322*i+.0971045*t+.7141733*n)/rl));const S=116*b-16;return[S<0?0:S,500*(f-b),200*(b-v),s]}function B(i){return i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function J(i){return i>mu?Math.pow(i,1/3):i/Yl+yo}function de([i,t,n,s]){let f=(i+16)/116,v=isNaN(t)?f:f+t/500,b=isNaN(n)?f:f-n/200;return f=1*yt(f),v=ss*yt(v),b=rl*yt(b),[Ie(3.1338561*v-1.6168667*f-.4906146*b),Ie(-.9787684*v+1.9161415*f+.033454*b),Ie(.0719453*v-.2289914*f+1.4052427*b),s]}function Ie(i){return(i=i<=.00304?12.92*i:1.055*Math.pow(i,1/2.4)-.055)<0?0:i>1?1:i}function yt(i){return i>ya?i*i*i:Yl*(i-yo)}const ct=Object.hasOwn||function(i,t){return Object.prototype.hasOwnProperty.call(i,t)};function Ot(i,t){return ct(i,t)?i[t]:void 0}function ar(i){return parseInt(i.padEnd(2,i),16)/255}function gr(i,t){return Ar(t?i/100:i,0,1)}function Ar(i,t,n){return Math.min(Math.max(t,i),n)}function _r(i){return!i.some(Number.isNaN)}const $n={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function _i(i,t,n){return i+n*(t-i)}function ro(i,t,n){return i.map((s,f)=>_i(s,t[f],n))}class en{constructor(t,n,s,f=1,v=!0){this.r=t,this.g=n,this.b=s,this.a=f,v||(this.r*=f,this.g*=f,this.b*=f,f||this.overwriteGetter("rgb",[t,n,s,f]))}static parse(t){if(t instanceof en)return t;if(typeof t!="string")return;const n=function(s){if((s=s.toLowerCase().trim())==="transparent")return[0,0,0,0];const f=Ot($n,s);if(f){const[b,S,k]=f;return[b/255,S/255,k/255,1]}if(s.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(s)){const b=s.length<6?1:2;let S=1;return[ar(s.slice(S,S+=b)),ar(s.slice(S,S+=b)),ar(s.slice(S,S+=b)),ar(s.slice(S,S+b)||"ff")]}if(s.startsWith("rgb")){const b=s.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(b){const[S,k,R,F,j,H,X,ee,oe,ye,Pe,Ze]=b,ze=[F||" ",X||" ",ye].join("");if(ze==="  "||ze==="  /"||ze===",,"||ze===",,,"){const q=[R,H,oe].join(""),me=q==="%%%"?100:q===""?255:0;if(me){const Be=[Ar(+k/me,0,1),Ar(+j/me,0,1),Ar(+ee/me,0,1),Pe?gr(+Pe,Ze):1];if(_r(Be))return Be}}return}}const v=s.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[b,S,k,R,F,j,H,X,ee]=v,oe=[k||" ",F||" ",H].join("");if(oe==="  "||oe==="  /"||oe===",,"||oe===",,,"){const ye=[+S,Ar(+R,0,100),Ar(+j,0,100),X?gr(+X,ee):1];if(_r(ye))return function([Pe,Ze,ze,q]){function me(Be){const mt=(Be+Pe/30)%12,Ut=Ze*Math.min(ze,1-ze);return ze-Ut*Math.max(-1,Math.min(mt-3,9-mt,1))}return Pe=Fa(Pe),Ze/=100,ze/=100,[me(0),me(8),me(4),q]}(ye)}}}(t);return n?new en(...n,!1):void 0}get rgb(){const{r:t,g:n,b:s,a:f}=this,v=f||1/0;return this.overwriteGetter("rgb",[t/v,n/v,s/v,f])}get hcl(){return this.overwriteGetter("hcl",function(t){const[n,s,f,v]=Is(t),b=Math.sqrt(s*s+f*f);return[Math.round(1e4*b)?Fa(Math.atan2(f,s)*Ql):NaN,b,n,v]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Is(this.rgb))}overwriteGetter(t,n){return Object.defineProperty(this,t,{value:n}),n}toString(){const[t,n,s,f]=this.rgb;return`rgba(${[t,n,s].map(v=>Math.round(255*v)).join(",")},${f})`}static interpolate(t,n,s,f="rgb"){switch(f){case"rgb":{const[v,b,S,k]=ro(t.rgb,n.rgb,s);return new en(v,b,S,k,!1)}case"hcl":{const[v,b,S,k]=t.hcl,[R,F,j,H]=n.hcl;let X,ee;if(isNaN(v)||isNaN(R))isNaN(v)?isNaN(R)?X=NaN:(X=R,S!==1&&S!==0||(ee=F)):(X=v,j!==1&&j!==0||(ee=b));else{let ze=R-v;R>v&&ze>180?ze-=360:R<v&&v-R>180&&(ze+=360),X=v+s*ze}const[oe,ye,Pe,Ze]=function([ze,q,me,Be]){return ze=isNaN(ze)?0:ze*_a,de([me,Math.cos(ze)*q,Math.sin(ze)*q,Be])}([X,ee??_i(b,F,s),_i(S,j,s),_i(k,H,s)]);return new en(oe,ye,Pe,Ze,!1)}case"lab":{const[v,b,S,k]=de(ro(t.lab,n.lab,s));return new en(v,b,S,k,!1)}}}}en.black=new en(0,0,0,1),en.white=new en(1,1,1,1),en.transparent=new en(0,0,0,0),en.red=new en(1,0,0,1);class as{constructor(t,n,s){this.sensitivity=t?n?"variant":"case":n?"accent":"base",this.locale=s,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,n){return this.collator.compare(t,n)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const Io=["bottom","center","top"];class Mo{constructor(t,n,s,f,v,b){this.text=t,this.image=n,this.scale=s,this.fontStack=f,this.textColor=v,this.verticalAlign=b}}class ci{constructor(t){this.sections=t}static fromString(t){return new ci([new Mo(t,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(t=>t.text.length!==0||t.image&&t.image.name.length!==0)}static factory(t){return t instanceof ci?t:ci.fromString(t)}toString(){return this.sections.length===0?"":this.sections.map(t=>t.text).join("")}}class hi{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof hi)return t;if(typeof t=="number")return new hi([t,t,t,t]);if(Array.isArray(t)&&!(t.length<1||t.length>4)){for(const n of t)if(typeof n!="number")return;switch(t.length){case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]]}return new hi(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,n,s){return new hi(ro(t.values,n.values,s))}}class On{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof On)return t;if(typeof t=="number")return new On([t]);if(Array.isArray(t)){for(const n of t)if(typeof n!="number")return;return new On(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,n,s){return new On(ro(t.values,n.values,s))}}class Ei{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof Ei)return t;if(typeof t=="string"){const s=en.parse(t);return s?new Ei([s]):void 0}if(!Array.isArray(t))return;const n=[];for(const s of t){if(typeof s!="string")return;const f=en.parse(s);if(!f)return;n.push(f)}return new Ei(n)}toString(){return JSON.stringify(this.values)}static interpolate(t,n,s,f="rgb"){const v=[];if(t.values.length!=n.values.length)throw new Error(`colorArray: Arrays have mismatched length (${t.values.length} vs. ${n.values.length}), cannot interpolate.`);for(let b=0;b<t.values.length;b++)v.push(en.interpolate(t.values[b],n.values[b],s,f));return new Ei(v)}}class Fn extends Error{constructor(t){super(t),this.name="RuntimeError"}toJSON(){return this.message}}const gu=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Fo{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof Fo)return t;if(Array.isArray(t)&&!(t.length<1)&&t.length%2==0){for(let n=0;n<t.length;n+=2){const s=t[n],f=t[n+1];if(typeof s!="string"||!gu.has(s)||!Array.isArray(f)||f.length!==2||typeof f[0]!="number"||typeof f[1]!="number")return}return new Fo(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,n,s){const f=t.values,v=n.values;if(f.length!==v.length)throw new Fn(`Cannot interpolate values of different length. from: ${t.toString()}, to: ${n.toString()}`);const b=[];for(let S=0;S<f.length;S+=2){if(f[S]!==v[S])throw new Fn(`Cannot interpolate values containing mismatched anchors. from[${S}]: ${f[S]}, to[${S}]: ${v[S]}`);b.push(f[S]);const[k,R]=f[S+1],[F,j]=v[S+1];b.push([_i(k,F,s),_i(R,j,s)])}return new Fo(b)}}class no{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new no({name:t,available:!1}):null}}class ls{constructor(t,n,s){this.from=t,this.to=n,this.transition=s}static interpolate(t,n,s){return new ls(t,n,s)}static parse(t){return t instanceof ls?t:Array.isArray(t)&&t.length===3&&typeof t[0]=="string"&&typeof t[1]=="string"&&typeof t[2]=="number"?new ls(t[0],t[1],t[2]):typeof t=="object"&&typeof t.from=="string"&&typeof t.to=="string"&&typeof t.transition=="number"?new ls(t.from,t.to,t.transition):typeof t=="string"?new ls(t,t,1):void 0}}function us(i,t,n,s){return typeof i=="number"&&i>=0&&i<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof n=="number"&&n>=0&&n<=255?s===void 0||typeof s=="number"&&s>=0&&s<=1?null:`Invalid rgba value [${[i,t,n,s].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof s=="number"?[i,t,n,s]:[i,t,n]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Dn(i){if(i===null||typeof i=="string"||typeof i=="boolean"||typeof i=="number"||i instanceof ls||i instanceof en||i instanceof as||i instanceof ci||i instanceof hi||i instanceof On||i instanceof Ei||i instanceof Fo||i instanceof no)return!0;if(Array.isArray(i)){for(const t of i)if(!Dn(t))return!1;return!0}if(typeof i=="object"){for(const t in i)if(!Dn(i[t]))return!1;return!0}return!1}function di(i){if(i===null)return Br;if(typeof i=="string")return Fr;if(typeof i=="boolean")return nn;if(typeof i=="number")return Ft;if(i instanceof en)return Zn;if(i instanceof ls)return Gn;if(i instanceof as)return Qs;if(i instanceof ci)return Js;if(i instanceof hi)return Es;if(i instanceof On)return Go;if(i instanceof Ei)return tl;if(i instanceof Fo)return hn;if(i instanceof no)return Da;if(Array.isArray(i)){const t=i.length;let n;for(const s of i){const f=di(s);if(n){if(n===f)continue;n=cn;break}n=f}return ui(n||cn,t)}return Eo}function Dr(i){const t=typeof i;return i===null?"":t==="string"||t==="number"||t==="boolean"?String(i):i instanceof en||i instanceof ls||i instanceof ci||i instanceof hi||i instanceof On||i instanceof Ei||i instanceof Fo||i instanceof no?i.toString():JSON.stringify(i)}class yr{constructor(t,n){this.type=t,this.value=n}static parse(t,n){if(t.length!==2)return n.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!Dn(t[1]))return n.error("invalid value");const s=t[1];let f=di(s);const v=n.expectedType;return f.kind!=="array"||f.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(f=v),new yr(f,s)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const En={string:Fr,number:Ft,boolean:nn,object:Eo};class Xr{constructor(t,n){this.type=t,this.args=n}static parse(t,n){if(t.length<2)return n.error("Expected at least one argument.");let s,f=1;const v=t[0];if(v==="array"){let S,k;if(t.length>2){const R=t[1];if(typeof R!="string"||!(R in En)||R==="object")return n.error('The item type argument of "array" must be one of string, number, boolean',1);S=En[R],f++}else S=cn;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return n.error('The length argument to "array" must be a positive integer literal',2);k=t[2],f++}s=ui(S,k)}else{if(!En[v])throw new Error(`Types doesn't contain name = ${v}`);s=En[v]}const b=[];for(;f<t.length;f++){const S=n.parse(t[f],f,cn);if(!S)return null;b.push(S)}return new Xr(s,b)}evaluate(t){for(let n=0;n<this.args.length;n++){const s=this.args[n].evaluate(t);if(!os(this.type,di(s)))return s;if(n===this.args.length-1)throw new Fn(`Expected value to be of type ${Kn(this.type)}, but found ${Kn(di(s))} instead.`)}throw new Error}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const cs={"to-boolean":nn,"to-color":Zn,"to-number":Ft,"to-string":Fr};class io{constructor(t,n){this.type=t,this.args=n}static parse(t,n){if(t.length<2)return n.error("Expected at least one argument.");const s=t[0];if(!cs[s])throw new Error(`Can't parse ${s} as it is not part of the known types`);if((s==="to-boolean"||s==="to-string")&&t.length!==2)return n.error("Expected one argument.");const f=cs[s],v=[];for(let b=1;b<t.length;b++){const S=n.parse(t[b],b,cn);if(!S)return null;v.push(S)}return new io(f,v)}evaluate(t){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(t);case"color":{let n,s;for(const f of this.args){if(n=f.evaluate(t),s=null,n instanceof en)return n;if(typeof n=="string"){const v=t.parseColor(n);if(v)return v}else if(Array.isArray(n)&&(s=n.length<3||n.length>4?`Invalid rgba value ${JSON.stringify(n)}: expected an array containing either three or four numeric values.`:us(n[0],n[1],n[2],n[3]),!s))return new en(n[0]/255,n[1]/255,n[2]/255,n[3])}throw new Fn(s||`Could not parse color from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"padding":{let n;for(const s of this.args){n=s.evaluate(t);const f=hi.parse(n);if(f)return f}throw new Fn(`Could not parse padding from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"numberArray":{let n;for(const s of this.args){n=s.evaluate(t);const f=On.parse(n);if(f)return f}throw new Fn(`Could not parse numberArray from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"colorArray":{let n;for(const s of this.args){n=s.evaluate(t);const f=Ei.parse(n);if(f)return f}throw new Fn(`Could not parse colorArray from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"variableAnchorOffsetCollection":{let n;for(const s of this.args){n=s.evaluate(t);const f=Fo.parse(n);if(f)return f}throw new Fn(`Could not parse variableAnchorOffsetCollection from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"number":{let n=null;for(const s of this.args){if(n=s.evaluate(t),n===null)return 0;const f=Number(n);if(!isNaN(f))return f}throw new Fn(`Could not convert ${JSON.stringify(n)} to number.`)}case"formatted":return ci.fromString(Dr(this.args[0].evaluate(t)));case"resolvedImage":return no.fromString(Dr(this.args[0].evaluate(t)));case"projectionDefinition":return this.args[0].evaluate(t);default:return Dr(this.args[0].evaluate(t))}}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const nl=["Unknown","Point","LineString","Polygon"];class yu{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?nl[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let n=this._parseColorCache.get(t);return n||(n=en.parse(t),this._parseColorCache.set(t,n)),n}}class Ba{constructor(t,n,s=[],f,v=new Tn,b=[]){this.registry=t,this.path=s,this.key=s.map(S=>`[${S}]`).join(""),this.scope=v,this.errors=b,this.expectedType=f,this._isConstant=n}parse(t,n,s,f,v={}){return n?this.concat(n,s,f)._parse(t,v):this._parse(t,v)}_parse(t,n){function s(f,v,b){return b==="assert"?new Xr(v,[f]):b==="coerce"?new io(v,[f]):f}if(t!==null&&typeof t!="string"&&typeof t!="boolean"&&typeof t!="number"||(t=["literal",t]),Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const f=t[0];if(typeof f!="string")return this.error(`Expression name must be a string, but found ${typeof f} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[f];if(v){let b=v.parse(t,this);if(!b)return null;if(this.expectedType){const S=this.expectedType,k=b.type;if(S.kind!=="string"&&S.kind!=="number"&&S.kind!=="boolean"&&S.kind!=="object"&&S.kind!=="array"||k.kind!=="value"){if(S.kind==="projectionDefinition"&&["string","array"].includes(k.kind)||["color","formatted","resolvedImage"].includes(S.kind)&&["value","string"].includes(k.kind)||["padding","numberArray"].includes(S.kind)&&["value","number","array"].includes(k.kind)||S.kind==="colorArray"&&["value","string","array"].includes(k.kind)||S.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(k.kind))b=s(b,S,n.typeAnnotation||"coerce");else if(this.checkSubtype(S,k))return null}else b=s(b,S,n.typeAnnotation||"assert")}if(!(b instanceof yr)&&b.type.kind!=="resolvedImage"&&this._isConstant(b)){const S=new yu;try{b=new yr(b.type,b.evaluate(S))}catch(k){return this.error(k.message),null}}return b}return this.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(t===void 0?"'undefined' value invalid. Use null instead.":typeof t=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,n,s){const f=typeof t=="number"?this.path.concat(t):this.path,v=s?this.scope.concat(s):this.scope;return new Ba(this.registry,this._isConstant,f,n||null,v,this.errors)}error(t,...n){const s=`${this.key}${n.map(f=>`[${f}]`).join("")}`;this.errors.push(new _n(s,t))}checkSubtype(t,n){const s=os(t,n);return s&&this.error(s),s}}class va{constructor(t,n){this.type=n.type,this.bindings=[].concat(t),this.result=n}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const n of this.bindings)t(n[1]);t(this.result)}static parse(t,n){if(t.length<4)return n.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const s=[];for(let v=1;v<t.length-1;v+=2){const b=t[v];if(typeof b!="string")return n.error(`Expected string, but found ${typeof b} instead.`,v);if(/[^a-zA-Z0-9_]/.test(b))return n.error("Variable names must contain only alphanumeric characters or '_'.",v);const S=n.parse(t[v+1],v+1);if(!S)return null;s.push([b,S])}const f=n.parse(t[t.length-1],t.length-1,n.expectedType,s);return f?new va(s,f):null}outputDefined(){return this.result.outputDefined()}}class Jl{constructor(t,n){this.type=n.type,this.name=t,this.boundExpression=n}static parse(t,n){if(t.length!==2||typeof t[1]!="string")return n.error("'var' expression requires exactly one string literal argument.");const s=t[1];return n.scope.has(s)?new Jl(s,n.scope.get(s)):n.error(`Unknown variable "${s}". Make sure "${s}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}}class fi{constructor(t,n,s){this.type=t,this.index=n,this.input=s}static parse(t,n){if(t.length!==3)return n.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const s=n.parse(t[1],1,Ft),f=n.parse(t[2],2,ui(n.expectedType||cn));return s&&f?new fi(f.type.itemType,s,f):null}evaluate(t){const n=this.index.evaluate(t),s=this.input.evaluate(t);if(n<0)throw new Fn(`Array index out of bounds: ${n} < 0.`);if(n>=s.length)throw new Fn(`Array index out of bounds: ${n} > ${s.length-1}.`);if(n!==Math.floor(n))throw new Fn(`Array index must be an integer, but found ${n} instead.`);return s[n]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}}class il{constructor(t,n){this.type=nn,this.needle=t,this.haystack=n}static parse(t,n){if(t.length!==3)return n.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const s=n.parse(t[1],1,cn),f=n.parse(t[2],2,cn);return s&&f?Xl(s.type,[nn,Fr,Ft,Br,cn])?new il(s,f):n.error(`Expected first argument to be of type boolean, string, number or null, but found ${Kn(s.type)} instead`):null}evaluate(t){const n=this.needle.evaluate(t),s=this.haystack.evaluate(t);if(!s)return!1;if(!Oo(n,["boolean","string","number","null"]))throw new Fn(`Expected first argument to be of type boolean, string, number or null, but found ${Kn(di(n))} instead.`);if(!Oo(s,["string","array"]))throw new Fn(`Expected second argument to be of type array or string, but found ${Kn(di(s))} instead.`);return s.indexOf(n)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}}class hs{constructor(t,n,s){this.type=Ft,this.needle=t,this.haystack=n,this.fromIndex=s}static parse(t,n){if(t.length<=2||t.length>=5)return n.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const s=n.parse(t[1],1,cn),f=n.parse(t[2],2,cn);if(!s||!f)return null;if(!Xl(s.type,[nn,Fr,Ft,Br,cn]))return n.error(`Expected first argument to be of type boolean, string, number or null, but found ${Kn(s.type)} instead`);if(t.length===4){const v=n.parse(t[3],3,Ft);return v?new hs(s,f,v):null}return new hs(s,f)}evaluate(t){const n=this.needle.evaluate(t),s=this.haystack.evaluate(t);if(!Oo(n,["boolean","string","number","null"]))throw new Fn(`Expected first argument to be of type boolean, string, number or null, but found ${Kn(di(n))} instead.`);let f;if(this.fromIndex&&(f=this.fromIndex.evaluate(t)),Oo(s,["string"])){const v=s.indexOf(n,f);return v===-1?-1:[...s.slice(0,v)].length}if(Oo(s,["array"]))return s.indexOf(n,f);throw new Fn(`Expected second argument to be of type array or string, but found ${Kn(di(s))} instead.`)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}}class ol{constructor(t,n,s,f,v,b){this.inputType=t,this.type=n,this.input=s,this.cases=f,this.outputs=v,this.otherwise=b}static parse(t,n){if(t.length<5)return n.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return n.error("Expected an even number of arguments.");let s,f;n.expectedType&&n.expectedType.kind!=="value"&&(f=n.expectedType);const v={},b=[];for(let R=2;R<t.length-1;R+=2){let F=t[R];const j=t[R+1];Array.isArray(F)||(F=[F]);const H=n.concat(R);if(F.length===0)return H.error("Expected at least one branch label.");for(const ee of F){if(typeof ee!="number"&&typeof ee!="string")return H.error("Branch labels must be numbers or strings.");if(typeof ee=="number"&&Math.abs(ee)>Number.MAX_SAFE_INTEGER)return H.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ee=="number"&&Math.floor(ee)!==ee)return H.error("Numeric branch labels must be integer values.");if(s){if(H.checkSubtype(s,di(ee)))return null}else s=di(ee);if(v[String(ee)]!==void 0)return H.error("Branch labels must be unique.");v[String(ee)]=b.length}const X=n.parse(j,R,f);if(!X)return null;f=f||X.type,b.push(X)}const S=n.parse(t[1],1,cn);if(!S)return null;const k=n.parse(t[t.length-1],t.length-1,f);return k?S.type.kind!=="value"&&n.concat(1).checkSubtype(s,S.type)?null:new ol(s,f,S,v,b,k):null}evaluate(t){const n=this.input.evaluate(t);return(di(n)===this.inputType&&this.outputs[this.cases[n]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}}class vi{constructor(t,n,s){this.type=t,this.branches=n,this.otherwise=s}static parse(t,n){if(t.length<4)return n.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return n.error("Expected an odd number of arguments.");let s;n.expectedType&&n.expectedType.kind!=="value"&&(s=n.expectedType);const f=[];for(let b=1;b<t.length-1;b+=2){const S=n.parse(t[b],b,nn);if(!S)return null;const k=n.parse(t[b+1],b+1,s);if(!k)return null;f.push([S,k]),s=s||k.type}const v=n.parse(t[t.length-1],t.length-1,s);if(!v)return null;if(!s)throw new Error("Can't infer output type");return new vi(s,f,v)}evaluate(t){for(const[n,s]of this.branches)if(n.evaluate(t))return s.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[n,s]of this.branches)t(n),t(s);t(this.otherwise)}outputDefined(){return this.branches.every(([t,n])=>n.outputDefined())&&this.otherwise.outputDefined()}}class Bi{constructor(t,n,s,f){this.type=t,this.input=n,this.beginIndex=s,this.endIndex=f}static parse(t,n){if(t.length<=2||t.length>=5)return n.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const s=n.parse(t[1],1,cn),f=n.parse(t[2],2,Ft);if(!s||!f)return null;if(!Xl(s.type,[ui(cn),Fr,cn]))return n.error(`Expected first argument to be of type array or string, but found ${Kn(s.type)} instead`);if(t.length===4){const v=n.parse(t[3],3,Ft);return v?new Bi(s.type,s,f,v):null}return new Bi(s.type,s,f)}evaluate(t){const n=this.input.evaluate(t),s=this.beginIndex.evaluate(t);let f;if(this.endIndex&&(f=this.endIndex.evaluate(t)),Oo(n,["string"]))return[...n].slice(s,f).join("");if(Oo(n,["array"]))return n.slice(s,f);throw new Fn(`Expected first argument to be of type array or string, but found ${Kn(di(n))} instead.`)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}}function Na(i,t){const n=i.length-1;let s,f,v=0,b=n,S=0;for(;v<=b;)if(S=Math.floor((v+b)/2),s=i[S],f=i[S+1],s<=t){if(S===n||t<f)return S;v=S+1}else{if(!(s>t))throw new Fn("Input is not a number.");b=S-1}return 0}class Ri{constructor(t,n,s){this.type=t,this.input=n,this.labels=[],this.outputs=[];for(const[f,v]of s)this.labels.push(f),this.outputs.push(v)}static parse(t,n){if(t.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return n.error("Expected an even number of arguments.");const s=n.parse(t[1],1,Ft);if(!s)return null;const f=[];let v=null;n.expectedType&&n.expectedType.kind!=="value"&&(v=n.expectedType);for(let b=1;b<t.length;b+=2){const S=b===1?-1/0:t[b],k=t[b+1],R=b,F=b+1;if(typeof S!="number")return n.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',R);if(f.length&&f[f.length-1][0]>=S)return n.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',R);const j=n.parse(k,F,v);if(!j)return null;v=v||j.type,f.push([S,j])}return new Ri(v,s,f)}evaluate(t){const n=this.labels,s=this.outputs;if(n.length===1)return s[0].evaluate(t);const f=this.input.evaluate(t);if(f<=n[0])return s[0].evaluate(t);const v=n.length;return f>=n[v-1]?s[v-1].evaluate(t):s[Na(n,f)].evaluate(t)}eachChild(t){t(this.input);for(const n of this.outputs)t(n)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function Ii(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var xa,sl,Zu=function(){if(sl)return xa;function i(t,n,s,f){this.cx=3*t,this.bx=3*(s-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(f-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=n,this.p2x=s,this.p2y=f}return sl=1,xa=i,i.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,n){if(n===void 0&&(n=1e-6),t<0)return 0;if(t>1)return 1;for(var s=t,f=0;f<8;f++){var v=this.sampleCurveX(s)-t;if(Math.abs(v)<n)return s;var b=this.sampleCurveDerivativeX(s);if(Math.abs(b)<1e-6)break;s-=v/b}var S=0,k=1;for(s=t,f=0;f<20&&(v=this.sampleCurveX(s),!(Math.abs(v-t)<n));f++)t>v?S=s:k=s,s=.5*(k-S)+S;return s},solve:function(t,n){return this.sampleCurveY(this.solveCurveX(t,n))}},xa}(),_o=Ii(Zu);class Ni{constructor(t,n,s,f,v){this.type=t,this.operator=n,this.interpolation=s,this.input=f,this.labels=[],this.outputs=[];for(const[b,S]of v)this.labels.push(b),this.outputs.push(S)}static interpolationFactor(t,n,s,f){let v=0;if(t.name==="exponential")v=zi(n,t.base,s,f);else if(t.name==="linear")v=zi(n,1,s,f);else if(t.name==="cubic-bezier"){const b=t.controlPoints;v=new _o(b[0],b[1],b[2],b[3]).solve(zi(n,1,s,f))}return v}static parse(t,n){let[s,f,v,...b]=t;if(!Array.isArray(f)||f.length===0)return n.error("Expected an interpolation type expression.",1);if(f[0]==="linear")f={name:"linear"};else if(f[0]==="exponential"){const R=f[1];if(typeof R!="number")return n.error("Exponential interpolation requires a numeric base.",1,1);f={name:"exponential",base:R}}else{if(f[0]!=="cubic-bezier")return n.error(`Unknown interpolation type ${String(f[0])}`,1,0);{const R=f.slice(1);if(R.length!==4||R.some(F=>typeof F!="number"||F<0||F>1))return n.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);f={name:"cubic-bezier",controlPoints:R}}}if(t.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return n.error("Expected an even number of arguments.");if(v=n.parse(v,2,Ft),!v)return null;const S=[];let k=null;s!=="interpolate-hcl"&&s!=="interpolate-lab"||n.expectedType==tl?n.expectedType&&n.expectedType.kind!=="value"&&(k=n.expectedType):k=Zn;for(let R=0;R<b.length;R+=2){const F=b[R],j=b[R+1],H=R+3,X=R+4;if(typeof F!="number")return n.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',H);if(S.length&&S[S.length-1][0]>=F)return n.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',H);const ee=n.parse(j,X,k);if(!ee)return null;k=k||ee.type,S.push([F,ee])}return to(k,Ft)||to(k,Gn)||to(k,Zn)||to(k,Es)||to(k,Go)||to(k,tl)||to(k,hn)||to(k,ui(Ft))?new Ni(k,s,f,v,S):n.error(`Type ${Kn(k)} is not interpolatable.`)}evaluate(t){const n=this.labels,s=this.outputs;if(n.length===1)return s[0].evaluate(t);const f=this.input.evaluate(t);if(f<=n[0])return s[0].evaluate(t);const v=n.length;if(f>=n[v-1])return s[v-1].evaluate(t);const b=Na(n,f),S=Ni.interpolationFactor(this.interpolation,f,n[b],n[b+1]),k=s[b].evaluate(t),R=s[b+1].evaluate(t);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return _i(k,R,S);case"color":return en.interpolate(k,R,S);case"padding":return hi.interpolate(k,R,S);case"colorArray":return Ei.interpolate(k,R,S);case"numberArray":return On.interpolate(k,R,S);case"variableAnchorOffsetCollection":return Fo.interpolate(k,R,S);case"array":return ro(k,R,S);case"projectionDefinition":return ls.interpolate(k,R,S)}case"interpolate-hcl":switch(this.type.kind){case"color":return en.interpolate(k,R,S,"hcl");case"colorArray":return Ei.interpolate(k,R,S,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return en.interpolate(k,R,S,"lab");case"colorArray":return Ei.interpolate(k,R,S,"lab")}}}eachChild(t){t(this.input);for(const n of this.outputs)t(n)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function zi(i,t,n,s){const f=s-n,v=i-n;return f===0?0:t===1?v/f:(Math.pow(t,v)-1)/(Math.pow(t,f)-1)}const ds={color:en.interpolate,number:_i,padding:hi.interpolate,numberArray:On.interpolate,colorArray:Ei.interpolate,variableAnchorOffsetCollection:Fo.interpolate,array:ro};class $a{constructor(t,n){this.type=t,this.args=n}static parse(t,n){if(t.length<2)return n.error("Expected at least one argument.");let s=null;const f=n.expectedType;f&&f.kind!=="value"&&(s=f);const v=[];for(const S of t.slice(1)){const k=n.parse(S,1+v.length,s,void 0,{typeAnnotation:"omit"});if(!k)return null;s=s||k.type,v.push(k)}if(!s)throw new Error("No output type");const b=f&&v.some(S=>os(f,S.type));return new $a(b?cn:s,v)}evaluate(t){let n,s=null,f=0;for(const v of this.args)if(f++,s=v.evaluate(t),s&&s instanceof no&&!s.available&&(n||(n=s.name),s=null,f===this.args.length&&(s=n)),s!==null)break;return s}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}function Ms(i,t){return i==="=="||i==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function ko(i,t,n,s){return s.compare(t,n)===0}function Gi(i,t,n){const s=i!=="=="&&i!=="!=";return class F1{constructor(v,b,S){this.type=nn,this.lhs=v,this.rhs=b,this.collator=S,this.hasUntypedArgument=v.type.kind==="value"||b.type.kind==="value"}static parse(v,b){if(v.length!==3&&v.length!==4)return b.error("Expected two or three arguments.");const S=v[0];let k=b.parse(v[1],1,cn);if(!k)return null;if(!Ms(S,k.type))return b.concat(1).error(`"${S}" comparisons are not supported for type '${Kn(k.type)}'.`);let R=b.parse(v[2],2,cn);if(!R)return null;if(!Ms(S,R.type))return b.concat(2).error(`"${S}" comparisons are not supported for type '${Kn(R.type)}'.`);if(k.type.kind!==R.type.kind&&k.type.kind!=="value"&&R.type.kind!=="value")return b.error(`Cannot compare types '${Kn(k.type)}' and '${Kn(R.type)}'.`);s&&(k.type.kind==="value"&&R.type.kind!=="value"?k=new Xr(R.type,[k]):k.type.kind!=="value"&&R.type.kind==="value"&&(R=new Xr(k.type,[R])));let F=null;if(v.length===4){if(k.type.kind!=="string"&&R.type.kind!=="string"&&k.type.kind!=="value"&&R.type.kind!=="value")return b.error("Cannot use collator to compare non-string types.");if(F=b.parse(v[3],3,Qs),!F)return null}return new F1(k,R,F)}evaluate(v){const b=this.lhs.evaluate(v),S=this.rhs.evaluate(v);if(s&&this.hasUntypedArgument){const k=di(b),R=di(S);if(k.kind!==R.kind||k.kind!=="string"&&k.kind!=="number")throw new Fn(`Expected arguments for "${i}" to be (string, string) or (number, number), but found (${k.kind}, ${R.kind}) instead.`)}if(this.collator&&!s&&this.hasUntypedArgument){const k=di(b),R=di(S);if(k.kind!=="string"||R.kind!=="string")return t(v,b,S)}return this.collator?n(v,b,S,this.collator.evaluate(v)):t(v,b,S)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}}}const Xn=Gi("==",function(i,t,n){return t===n},ko),ja=Gi("!=",function(i,t,n){return t!==n},function(i,t,n,s){return!ko(0,t,n,s)}),Gu=Gi("<",function(i,t,n){return t<n},function(i,t,n,s){return s.compare(t,n)<0}),Nh=Gi(">",function(i,t,n){return t>n},function(i,t,n,s){return s.compare(t,n)>0}),_u=Gi("<=",function(i,t,n){return t<=n},function(i,t,n,s){return s.compare(t,n)<=0}),$h=Gi(">=",function(i,t,n){return t>=n},function(i,t,n,s){return s.compare(t,n)>=0});class vu{constructor(t,n,s){this.type=Qs,this.locale=s,this.caseSensitive=t,this.diacriticSensitive=n}static parse(t,n){if(t.length!==2)return n.error("Expected one argument.");const s=t[1];if(typeof s!="object"||Array.isArray(s))return n.error("Collator options argument must be an object.");const f=n.parse(s["case-sensitive"]!==void 0&&s["case-sensitive"],1,nn);if(!f)return null;const v=n.parse(s["diacritic-sensitive"]!==void 0&&s["diacritic-sensitive"],1,nn);if(!v)return null;let b=null;return s.locale&&(b=n.parse(s.locale,1,Fr),!b)?null:new vu(f,v,b)}evaluate(t){return new as(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}}class al{constructor(t,n,s,f,v){this.type=Fr,this.number=t,this.locale=n,this.currency=s,this.minFractionDigits=f,this.maxFractionDigits=v}static parse(t,n){if(t.length!==3)return n.error("Expected two arguments.");const s=n.parse(t[1],1,Ft);if(!s)return null;const f=t[2];if(typeof f!="object"||Array.isArray(f))return n.error("NumberFormat options argument must be an object.");let v=null;if(f.locale&&(v=n.parse(f.locale,1,Fr),!v))return null;let b=null;if(f.currency&&(b=n.parse(f.currency,1,Fr),!b))return null;let S=null;if(f["min-fraction-digits"]&&(S=n.parse(f["min-fraction-digits"],1,Ft),!S))return null;let k=null;return f["max-fraction-digits"]&&(k=n.parse(f["max-fraction-digits"],1,Ft),!k)?null:new al(s,v,b,S,k)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}}class Al{constructor(t){this.type=Js,this.sections=t}static parse(t,n){if(t.length<2)return n.error("Expected at least one argument.");const s=t[1];if(!Array.isArray(s)&&typeof s=="object")return n.error("First argument must be an image or text section.");const f=[];let v=!1;for(let b=1;b<=t.length-1;++b){const S=t[b];if(v&&typeof S=="object"&&!Array.isArray(S)){v=!1;let k=null;if(S["font-scale"]&&(k=n.parse(S["font-scale"],1,Ft),!k))return null;let R=null;if(S["text-font"]&&(R=n.parse(S["text-font"],1,ui(Fr)),!R))return null;let F=null;if(S["text-color"]&&(F=n.parse(S["text-color"],1,Zn),!F))return null;let j=null;if(S["vertical-align"]){if(typeof S["vertical-align"]=="string"&&!Io.includes(S["vertical-align"]))return n.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${S["vertical-align"]}' instead.`);if(j=n.parse(S["vertical-align"],1,Fr),!j)return null}const H=f[f.length-1];H.scale=k,H.font=R,H.textColor=F,H.verticalAlign=j}else{const k=n.parse(t[b],1,cn);if(!k)return null;const R=k.type.kind;if(R!=="string"&&R!=="value"&&R!=="null"&&R!=="resolvedImage")return n.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,f.push({content:k,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Al(f)}evaluate(t){return new ci(this.sections.map(n=>{const s=n.content.evaluate(t);return di(s)===Da?new Mo("",s,null,null,null,n.verticalAlign?n.verticalAlign.evaluate(t):null):new Mo(Dr(s),null,n.scale?n.scale.evaluate(t):null,n.font?n.font.evaluate(t).join(","):null,n.textColor?n.textColor.evaluate(t):null,n.verticalAlign?n.verticalAlign.evaluate(t):null)}))}eachChild(t){for(const n of this.sections)t(n.content),n.scale&&t(n.scale),n.font&&t(n.font),n.textColor&&t(n.textColor),n.verticalAlign&&t(n.verticalAlign)}outputDefined(){return!1}}class Rl{constructor(t){this.type=Da,this.input=t}static parse(t,n){if(t.length!==2)return n.error("Expected two arguments.");const s=n.parse(t[1],1,Fr);return s?new Rl(s):n.error("No image name provided.")}evaluate(t){const n=this.input.evaluate(t),s=no.fromString(n);return s&&t.availableImages&&(s.available=t.availableImages.indexOf(n)>-1),s}eachChild(t){t(this.input)}outputDefined(){return!1}}class Ua{constructor(t){this.type=Ft,this.input=t}static parse(t,n){if(t.length!==2)return n.error(`Expected 1 argument, but found ${t.length-1} instead.`);const s=n.parse(t[1],1);return s?s.type.kind!=="array"&&s.type.kind!=="string"&&s.type.kind!=="value"?n.error(`Expected argument of type string or array, but found ${Kn(s.type)} instead.`):new Ua(s):null}evaluate(t){const n=this.input.evaluate(t);if(typeof n=="string")return[...n].length;if(Array.isArray(n))return n.length;throw new Fn(`Expected value to be of type string or array, but found ${Kn(di(n))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}}const ks=8192;function Wu(i,t){const n=(180+i[0])/360,s=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i[1]*Math.PI/360)))/360,f=Math.pow(2,t.z);return[Math.round(n*f*ks),Math.round(s*f*ks)]}function Hu(i,t){const n=Math.pow(2,t.z);return[(f=(i[0]/ks+t.x)/n,360*f-180),(s=(i[1]/ks+t.y)/n,360/Math.PI*Math.atan(Math.exp((180-360*s)*Math.PI/180))-90)];var s,f}function $(i,t){i[0]=Math.min(i[0],t[0]),i[1]=Math.min(i[1],t[1]),i[2]=Math.max(i[2],t[0]),i[3]=Math.max(i[3],t[1])}function K(i,t){return!(i[0]<=t[0]||i[2]>=t[2]||i[1]<=t[1]||i[3]>=t[3])}function ue(i,t,n){const s=i[0]-t[0],f=i[1]-t[1],v=i[0]-n[0],b=i[1]-n[1];return s*b-v*f==0&&s*v<=0&&f*b<=0}function Ee(i,t,n,s){return(f=[s[0]-n[0],s[1]-n[1]])[0]*(v=[t[0]-i[0],t[1]-i[1]])[1]-f[1]*v[0]!=0&&!(!mn(i,t,n,s)||!mn(n,s,i,t));var f,v}function vt(i,t,n){for(const s of n)for(let f=0;f<s.length-1;++f)if(Ee(i,t,s[f],s[f+1]))return!0;return!1}function st(i,t,n=!1){let s=!1;for(const S of t)for(let k=0;k<S.length-1;k++){if(ue(i,S[k],S[k+1]))return n;(v=S[k])[1]>(f=i)[1]!=(b=S[k+1])[1]>f[1]&&f[0]<(b[0]-v[0])*(f[1]-v[1])/(b[1]-v[1])+v[0]&&(s=!s)}var f,v,b;return s}function $t(i,t){for(const n of t)if(st(i,n))return!0;return!1}function lr(i,t){for(const n of i)if(!st(n,t))return!1;for(let n=0;n<i.length-1;++n)if(vt(i[n],i[n+1],t))return!1;return!0}function Nr(i,t){for(const n of t)if(lr(i,n))return!0;return!1}function mn(i,t,n,s){const f=s[0]-n[0],v=s[1]-n[1],b=(i[0]-n[0])*v-f*(i[1]-n[1]),S=(t[0]-n[0])*v-f*(t[1]-n[1]);return b>0&&S<0||b<0&&S>0}function Yr(i,t,n){const s=[];for(let f=0;f<i.length;f++){const v=[];for(let b=0;b<i[f].length;b++){const S=Wu(i[f][b],n);$(t,S),v.push(S)}s.push(v)}return s}function pi(i,t,n){const s=[];for(let f=0;f<i.length;f++){const v=Yr(i[f],t,n);s.push(v)}return s}function Bo(i,t,n,s){if(i[0]<n[0]||i[0]>n[2]){const f=.5*s;let v=i[0]-n[0]>f?-s:n[0]-i[0]>f?s:0;v===0&&(v=i[0]-n[2]>f?-s:n[2]-i[0]>f?s:0),i[0]+=v}$(t,i)}function As(i,t,n,s){const f=Math.pow(2,s.z)*ks,v=[s.x*ks,s.y*ks],b=[];for(const S of i)for(const k of S){const R=[k.x+v[0],k.y+v[1]];Bo(R,t,n,f),b.push(R)}return b}function fs(i,t,n,s){const f=Math.pow(2,s.z)*ks,v=[s.x*ks,s.y*ks],b=[];for(const k of i){const R=[];for(const F of k){const j=[F.x+v[0],F.y+v[1]];$(t,j),R.push(j)}b.push(R)}if(t[2]-t[0]<=f/2){(S=t)[0]=S[1]=1/0,S[2]=S[3]=-1/0;for(const k of b)for(const R of k)Bo(R,t,n,f)}var S;return b}class ea{constructor(t,n){this.type=nn,this.geojson=t,this.geometries=n}static parse(t,n){if(t.length!==2)return n.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Dn(t[1])){const s=t[1];if(s.type==="FeatureCollection"){const f=[];for(const v of s.features){const{type:b,coordinates:S}=v.geometry;b==="Polygon"&&f.push(S),b==="MultiPolygon"&&f.push(...S)}if(f.length)return new ea(s,{type:"MultiPolygon",coordinates:f})}else if(s.type==="Feature"){const f=s.geometry.type;if(f==="Polygon"||f==="MultiPolygon")return new ea(s,s.geometry)}else if(s.type==="Polygon"||s.type==="MultiPolygon")return new ea(s,s)}return n.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return function(n,s){const f=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],b=n.canonicalID();if(s.type==="Polygon"){const S=Yr(s.coordinates,v,b),k=As(n.geometry(),f,v,b);if(!K(f,v))return!1;for(const R of k)if(!st(R,S))return!1}if(s.type==="MultiPolygon"){const S=pi(s.coordinates,v,b),k=As(n.geometry(),f,v,b);if(!K(f,v))return!1;for(const R of k)if(!$t(R,S))return!1}return!0}(t,this.geometries);if(t.geometryType()==="LineString")return function(n,s){const f=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],b=n.canonicalID();if(s.type==="Polygon"){const S=Yr(s.coordinates,v,b),k=fs(n.geometry(),f,v,b);if(!K(f,v))return!1;for(const R of k)if(!lr(R,S))return!1}if(s.type==="MultiPolygon"){const S=pi(s.coordinates,v,b),k=fs(n.geometry(),f,v,b);if(!K(f,v))return!1;for(const R of k)if(!Nr(R,S))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Lc=class{constructor(i=[],t=(n,s)=>n<s?-1:n>s?1:0){if(this.data=i,this.length=this.data.length,this.compare=t,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(i){this.data.push(i),this._up(this.length++)}pop(){if(this.length===0)return;const i=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),i}peek(){return this.data[0]}_up(i){const{data:t,compare:n}=this,s=t[i];for(;i>0;){const f=i-1>>1,v=t[f];if(n(s,v)>=0)break;t[i]=v,i=f}t[i]=s}_down(i){const{data:t,compare:n}=this,s=this.length>>1,f=t[i];for(;i<s;){let v=1+(i<<1);const b=v+1;if(b<this.length&&n(t[b],t[v])<0&&(v=b),n(t[v],f)>=0)break;t[i]=t[v],i=v}t[i]=f}};function ll(i,t,n=0,s=i.length-1,f=cf){for(;s>n;){if(s-n>600){const k=s-n+1,R=t-n+1,F=Math.log(k),j=.5*Math.exp(2*F/3),H=.5*Math.sqrt(F*j*(k-j)/k)*(R-k/2<0?-1:1);ll(i,t,Math.max(n,Math.floor(t-R*j/k+H)),Math.min(s,Math.floor(t+(k-R)*j/k+H)),f)}const v=i[t];let b=n,S=s;for(ul(i,n,t),f(i[s],v)>0&&ul(i,n,s);b<S;){for(ul(i,b,S),b++,S--;f(i[b],v)<0;)b++;for(;f(i[S],v)>0;)S--}f(i[n],v)===0?ul(i,n,S):(S++,ul(i,S,s)),S<=t&&(n=S+1),t<=S&&(s=S-1)}}function ul(i,t,n){const s=i[t];i[t]=i[n],i[n]=s}function cf(i,t){return i<t?-1:i>t?1:0}function jh(i,t){if(i.length<=1)return[i];const n=[];let s,f;for(const v of i){const b=Md(v);b!==0&&(v.area=Math.abs(b),f===void 0&&(f=b<0),f===b<0?(s&&n.push(s),s=[v]):s.push(v))}if(s&&n.push(s),t>1)for(let v=0;v<n.length;v++)n[v].length<=t||(ll(n[v],t,1,n[v].length-1,Uh),n[v]=n[v].slice(0,t));return n}function Uh(i,t){return t.area-i.area}function Md(i){let t=0;for(let n,s,f=0,v=i.length,b=v-1;f<v;b=f++)n=i[f],s=i[b],t+=(s.x-n.x)*(n.y+s.y);return t}const ta=1/298.257223563,eu=ta*(2-ta),hf=Math.PI/180;class Dc{constructor(t){const n=6378.137*hf*1e3,s=Math.cos(t*hf),f=1/(1-eu*(1-s*s)),v=Math.sqrt(f);this.kx=n*v*s,this.ky=n*v*f*(1-eu)}distance(t,n){const s=this.wrap(t[0]-n[0])*this.kx,f=(t[1]-n[1])*this.ky;return Math.sqrt(s*s+f*f)}pointOnLine(t,n){let s,f,v,b,S=1/0;for(let k=0;k<t.length-1;k++){let R=t[k][0],F=t[k][1],j=this.wrap(t[k+1][0]-R)*this.kx,H=(t[k+1][1]-F)*this.ky,X=0;j===0&&H===0||(X=(this.wrap(n[0]-R)*this.kx*j+(n[1]-F)*this.ky*H)/(j*j+H*H),X>1?(R=t[k+1][0],F=t[k+1][1]):X>0&&(R+=j/this.kx*X,F+=H/this.ky*X)),j=this.wrap(n[0]-R)*this.kx,H=(n[1]-F)*this.ky;const ee=j*j+H*H;ee<S&&(S=ee,s=R,f=F,v=k,b=X)}return{point:[s,f],index:v,t:Math.max(0,Math.min(1,b))}}wrap(t){for(;t<-180;)t+=360;for(;t>180;)t-=360;return t}}function df(i,t){return t[0]-i[0]}function Cn(i){return i[1]-i[0]+1}function oo(i,t){return i[1]>=i[0]&&i[1]<t}function Oc(i,t){if(i[0]>i[1])return[null,null];const n=Cn(i);if(t){if(n===2)return[i,null];const f=Math.floor(n/2);return[[i[0],i[0]+f],[i[0]+f,i[1]]]}if(n===1)return[i,null];const s=Math.floor(n/2)-1;return[[i[0],i[0]+s],[i[0]+s+1,i[1]]]}function Vh(i,t){if(!oo(t,i.length))return[1/0,1/0,-1/0,-1/0];const n=[1/0,1/0,-1/0,-1/0];for(let s=t[0];s<=t[1];++s)$(n,i[s]);return n}function Zh(i){const t=[1/0,1/0,-1/0,-1/0];for(const n of i)for(const s of n)$(t,s);return t}function kd(i){return i[0]!==-1/0&&i[1]!==-1/0&&i[2]!==1/0&&i[3]!==1/0}function Ad(i,t,n){if(!kd(i)||!kd(t))return NaN;let s=0,f=0;return i[2]<t[0]&&(s=t[0]-i[2]),i[0]>t[2]&&(s=i[0]-t[2]),i[1]>t[3]&&(f=i[1]-t[3]),i[3]<t[1]&&(f=t[1]-i[3]),n.distance([0,0],[s,f])}function qu(i,t,n){const s=n.pointOnLine(t,i);return n.distance(i,s.point)}function xu(i,t,n,s,f){const v=Math.min(qu(i,[n,s],f),qu(t,[n,s],f)),b=Math.min(qu(n,[i,t],f),qu(s,[i,t],f));return Math.min(v,b)}function rt(i,t,n,s,f){if(!oo(t,i.length)||!oo(s,n.length))return 1/0;let v=1/0;for(let b=t[0];b<t[1];++b){const S=i[b],k=i[b+1];for(let R=s[0];R<s[1];++R){const F=n[R],j=n[R+1];if(Ee(S,k,F,j))return 0;v=Math.min(v,xu(S,k,F,j,f))}}return v}function Nt(i,t,n,s,f){if(!oo(t,i.length)||!oo(s,n.length))return NaN;let v=1/0;for(let b=t[0];b<=t[1];++b)for(let S=s[0];S<=s[1];++S)if(v=Math.min(v,f.distance(i[b],n[S])),v===0)return v;return v}function St(i,t,n){if(st(i,t,!0))return 0;let s=1/0;for(const f of t){const v=f[0],b=f[f.length-1];if(v!==b&&(s=Math.min(s,qu(i,[b,v],n)),s===0))return s;const S=n.pointOnLine(f,i);if(s=Math.min(s,n.distance(i,S.point)),s===0)return s}return s}function Mr(i,t,n,s){if(!oo(t,i.length))return NaN;for(let v=t[0];v<=t[1];++v)if(st(i[v],n,!0))return 0;let f=1/0;for(let v=t[0];v<t[1];++v){const b=i[v],S=i[v+1];for(const k of n)for(let R=0,F=k.length,j=F-1;R<F;j=R++){const H=k[j],X=k[R];if(Ee(b,S,H,X))return 0;f=Math.min(f,xu(b,S,H,X,s))}}return f}function gn(i,t){for(const n of i)for(const s of n)if(st(s,t,!0))return!0;return!1}function Yn(i,t,n,s=1/0){const f=Zh(i),v=Zh(t);if(s!==1/0&&Ad(f,v,n)>=s)return s;if(K(f,v)){if(gn(i,t))return 0}else if(gn(t,i))return 0;let b=1/0;for(const S of i)for(let k=0,R=S.length,F=R-1;k<R;F=k++){const j=S[F],H=S[k];for(const X of t)for(let ee=0,oe=X.length,ye=oe-1;ee<oe;ye=ee++){const Pe=X[ye],Ze=X[ee];if(Ee(j,H,Pe,Ze))return 0;b=Math.min(b,xu(j,H,Pe,Ze,n))}}return b}function so(i,t,n,s,f,v){if(!v)return;const b=Ad(Vh(s,v),f,n);b<t&&i.push([b,v,[0,0]])}function ri(i,t,n,s,f,v,b){if(!v||!b)return;const S=Ad(Vh(s,v),Vh(f,b),n);S<t&&i.push([S,v,b])}function bu(i,t,n,s,f=1/0){let v=Math.min(s.distance(i[0],n[0][0]),f);if(v===0)return v;const b=new Lc([[0,[0,i.length-1],[0,0]]],df),S=Zh(n);for(;b.length>0;){const k=b.pop();if(k[0]>=v)continue;const R=k[1],F=t?50:100;if(Cn(R)<=F){if(!oo(R,i.length))return NaN;if(t){const j=Mr(i,R,n,s);if(isNaN(j)||j===0)return j;v=Math.min(v,j)}else for(let j=R[0];j<=R[1];++j){const H=St(i[j],n,s);if(v=Math.min(v,H),v===0)return 0}}else{const j=Oc(R,t);so(b,v,s,i,S,j[0]),so(b,v,s,i,S,j[1])}}return v}function Gh(i,t,n,s,f,v=1/0){let b=Math.min(v,f.distance(i[0],n[0]));if(b===0)return b;const S=new Lc([[0,[0,i.length-1],[0,n.length-1]]],df);for(;S.length>0;){const k=S.pop();if(k[0]>=b)continue;const R=k[1],F=k[2],j=t?50:100,H=s?50:100;if(Cn(R)<=j&&Cn(F)<=H){if(!oo(R,i.length)&&oo(F,n.length))return NaN;let X;if(t&&s)X=rt(i,R,n,F,f),b=Math.min(b,X);else if(t&&!s){const ee=i.slice(R[0],R[1]+1);for(let oe=F[0];oe<=F[1];++oe)if(X=qu(n[oe],ee,f),b=Math.min(b,X),b===0)return b}else if(!t&&s){const ee=n.slice(F[0],F[1]+1);for(let oe=R[0];oe<=R[1];++oe)if(X=qu(i[oe],ee,f),b=Math.min(b,X),b===0)return b}else X=Nt(i,R,n,F,f),b=Math.min(b,X)}else{const X=Oc(R,t),ee=Oc(F,s);ri(S,b,f,i,n,X[0],ee[0]),ri(S,b,f,i,n,X[0],ee[1]),ri(S,b,f,i,n,X[1],ee[0]),ri(S,b,f,i,n,X[1],ee[1])}}return b}function ra(i){return i.type==="MultiPolygon"?i.coordinates.map(t=>({type:"Polygon",coordinates:t})):i.type==="MultiLineString"?i.coordinates.map(t=>({type:"LineString",coordinates:t})):i.type==="MultiPoint"?i.coordinates.map(t=>({type:"Point",coordinates:t})):[i]}class Rs{constructor(t,n){this.type=Ft,this.geojson=t,this.geometries=n}static parse(t,n){if(t.length!==2)return n.error(`'distance' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Dn(t[1])){const s=t[1];if(s.type==="FeatureCollection")return new Rs(s,s.features.map(f=>ra(f.geometry)).flat());if(s.type==="Feature")return new Rs(s,ra(s.geometry));if("type"in s&&"coordinates"in s)return new Rs(s,ra(s))}return n.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return function(n,s){const f=n.geometry(),v=f.flat().map(k=>Hu([k.x,k.y],n.canonical));if(f.length===0)return NaN;const b=new Dc(v[0][1]);let S=1/0;for(const k of s){switch(k.type){case"Point":S=Math.min(S,Gh(v,!1,[k.coordinates],!1,b,S));break;case"LineString":S=Math.min(S,Gh(v,!1,k.coordinates,!0,b,S));break;case"Polygon":S=Math.min(S,bu(v,!1,k.coordinates,b,S))}if(S===0)return S}return S}(t,this.geometries);if(t.geometryType()==="LineString")return function(n,s){const f=n.geometry(),v=f.flat().map(k=>Hu([k.x,k.y],n.canonical));if(f.length===0)return NaN;const b=new Dc(v[0][1]);let S=1/0;for(const k of s){switch(k.type){case"Point":S=Math.min(S,Gh(v,!0,[k.coordinates],!1,b,S));break;case"LineString":S=Math.min(S,Gh(v,!0,k.coordinates,!0,b,S));break;case"Polygon":S=Math.min(S,bu(v,!0,k.coordinates,b,S))}if(S===0)return S}return S}(t,this.geometries);if(t.geometryType()==="Polygon")return function(n,s){const f=n.geometry();if(f.length===0||f[0].length===0)return NaN;const v=jh(f,0).map(k=>k.map(R=>R.map(F=>Hu([F.x,F.y],n.canonical)))),b=new Dc(v[0][0][0][1]);let S=1/0;for(const k of s)for(const R of v){switch(k.type){case"Point":S=Math.min(S,bu([k.coordinates],!1,R,b,S));break;case"LineString":S=Math.min(S,bu(k.coordinates,!0,R,b,S));break;case"Polygon":S=Math.min(S,Yn(R,k.coordinates,b,S))}if(S===0)return S}return S}(t,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class Fc{constructor(t){this.type=cn,this.key=t}static parse(t,n){if(t.length!==2)return n.error(`Expected 1 argument, but found ${t.length-1} instead.`);const s=t[1];return s==null?n.error("Global state property must be defined."):typeof s!="string"?n.error(`Global state property must be string, but found ${typeof t[1]} instead.`):new Fc(s)}evaluate(t){var n;const s=(n=t.globals)===null||n===void 0?void 0:n.globalState;return s&&Object.keys(s).length!==0?Ot(s,this.key):null}eachChild(){}outputDefined(){return!1}}const zs={"==":Xn,"!=":ja,">":Nh,"<":Gu,">=":$h,"<=":_u,array:Xr,at:fi,boolean:Xr,case:vi,coalesce:$a,collator:vu,format:Al,image:Rl,in:il,"index-of":hs,interpolate:Ni,"interpolate-hcl":Ni,"interpolate-lab":Ni,length:Ua,let:va,literal:yr,match:ol,number:Xr,"number-format":al,object:Xr,slice:Bi,step:Ri,string:Xr,"to-boolean":io,"to-color":io,"to-number":io,"to-string":io,var:Jl,within:ea,distance:Rs,"global-state":Fc};class Wo{constructor(t,n,s,f){this.name=t,this.type=n,this._evaluate=s,this.args=f}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}static parse(t,n){const s=t[0],f=Wo.definitions[s];if(!f)return n.error(`Unknown expression "${s}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(f)?f[0]:f.type,b=Array.isArray(f)?[[f[1],f[2]]]:f.overloads,S=b.filter(([R])=>!Array.isArray(R)||R.length===t.length-1);let k=null;for(const[R,F]of S){k=new Ba(n.registry,Su,n.path,null,n.scope);const j=[];let H=!1;for(let X=1;X<t.length;X++){const ee=t[X],oe=Array.isArray(R)?R[X-1]:R.type,ye=k.parse(ee,1+j.length,oe);if(!ye){H=!0;break}j.push(ye)}if(!H)if(Array.isArray(R)&&R.length!==j.length)k.error(`Expected ${R.length} arguments, but found ${j.length} instead.`);else{for(let X=0;X<j.length;X++){const ee=Array.isArray(R)?R[X]:R.type,oe=j[X];k.concat(X+1).checkSubtype(ee,oe.type)}if(k.errors.length===0)return new Wo(s,v,F,j)}}if(S.length===1)n.errors.push(...k.errors);else{const R=(S.length?S:b).map(([j])=>{return H=j,Array.isArray(H)?`(${H.map(Kn).join(", ")})`:`(${Kn(H.type)}...)`;var H}).join(" | "),F=[];for(let j=1;j<t.length;j++){const H=n.parse(t[j],1+F.length);if(!H)return null;F.push(Kn(H.type))}n.error(`Expected arguments of type ${R}, but found (${F.join(", ")}) instead.`)}return null}static register(t,n){Wo.definitions=n;for(const s in n)t[s]=Wo}}function Bc(i,[t,n,s,f]){t=t.evaluate(i),n=n.evaluate(i),s=s.evaluate(i);const v=f?f.evaluate(i):1,b=us(t,n,s,v);if(b)throw new Fn(b);return new en(t/255,n/255,s/255,v,!1)}function Wn(i,t){return i in t}function wu(i,t){const n=t[i];return n===void 0?null:n}function zl(i){return{type:i}}function Su(i){if(i instanceof Jl)return Su(i.boundExpression);if(i instanceof Wo&&i.name==="error"||i instanceof vu||i instanceof ea||i instanceof Rs||i instanceof Fc)return!1;const t=i instanceof io||i instanceof Xr;let n=!0;return i.eachChild(s=>{n=t?n&&Su(s):n&&s instanceof yr}),!!n&&Ku(i)&&fh(i,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Ku(i){if(i instanceof Wo&&(i.name==="get"&&i.args.length===1||i.name==="feature-state"||i.name==="has"&&i.args.length===1||i.name==="properties"||i.name==="geometry-type"||i.name==="id"||/^filter-/.test(i.name))||i instanceof ea||i instanceof Rs)return!1;let t=!0;return i.eachChild(n=>{t&&!Ku(n)&&(t=!1)}),t}function Nc(i){if(i instanceof Wo&&i.name==="feature-state")return!1;let t=!0;return i.eachChild(n=>{t&&!Nc(n)&&(t=!1)}),t}function fh(i,t){if(i instanceof Wo&&t.indexOf(i.name)>=0)return!1;let n=!0;return i.eachChild(s=>{n&&!fh(s,t)&&(n=!1)}),n}function Tu(i){return{result:"success",value:i}}function na(i){return{result:"error",value:i}}function Ll(i){return i["property-type"]==="data-driven"||i["property-type"]==="cross-faded-data-driven"}function Wh(i){return!!i.expression&&i.expression.parameters.indexOf("zoom")>-1}function ia(i){return!!i.expression&&i.expression.interpolated}function bn(i){return i instanceof Number?"number":i instanceof String?"string":i instanceof Boolean?"boolean":Array.isArray(i)?"array":i===null?"null":typeof i}function Xu(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)&&di(i)===Eo}function Yu(i){return i}function Hh(i,t){const n=i.stops&&typeof i.stops[0][0]=="object",s=n||!(n||i.property!==void 0),f=i.type||(ia(t)?"exponential":"interval"),v=function(F){switch(F.type){case"color":return en.parse;case"padding":return hi.parse;case"numberArray":return On.parse;case"colorArray":return Ei.parse;default:return null}}(t);if(v&&((i=Sn({},i)).stops&&(i.stops=i.stops.map(F=>[F[0],v(F[1])])),i.default=v(i.default?i.default:t.default)),i.colorSpace&&(b=i.colorSpace)!=="rgb"&&b!=="hcl"&&b!=="lab")throw new Error(`Unknown color space: "${i.colorSpace}"`);var b;const S=function(F){switch(F){case"exponential":return Rd;case"interval":return ph;case"categorical":return Qu;case"identity":return Li;default:throw new Error(`Unknown function type "${F}"`)}}(f);let k,R;if(f==="categorical"){k=Object.create(null);for(const F of i.stops)k[F[0]]=F[1];R=typeof i.stops[0][0]}if(n){const F={},j=[];for(let ee=0;ee<i.stops.length;ee++){const oe=i.stops[ee],ye=oe[0].zoom;F[ye]===void 0&&(F[ye]={zoom:ye,type:i.type,property:i.property,default:i.default,stops:[]},j.push(ye)),F[ye].stops.push([oe[0].value,oe[1]])}const H=[];for(const ee of j)H.push([F[ee].zoom,Hh(F[ee],t)]);const X={name:"linear"};return{kind:"composite",interpolationType:X,interpolationFactor:Ni.interpolationFactor.bind(void 0,X),zoomStops:H.map(ee=>ee[0]),evaluate:({zoom:ee},oe)=>Rd({stops:H,base:i.base},t,ee).evaluate(ee,oe)}}if(s){const F=f==="exponential"?{name:"exponential",base:i.base!==void 0?i.base:1}:null;return{kind:"camera",interpolationType:F,interpolationFactor:Ni.interpolationFactor.bind(void 0,F),zoomStops:i.stops.map(j=>j[0]),evaluate:({zoom:j})=>S(i,t,j,k,R)}}return{kind:"source",evaluate(F,j){const H=j&&j.properties?j.properties[i.property]:void 0;return H===void 0?ba(i.default,t.default):S(i,t,H,k,R)}}}function ba(i,t,n){return i!==void 0?i:t!==void 0?t:n!==void 0?n:void 0}function Qu(i,t,n,s,f){return ba(typeof n===f?s[n]:void 0,i.default,t.default)}function ph(i,t,n){if(bn(n)!=="number")return ba(i.default,t.default);const s=i.stops.length;if(s===1||n<=i.stops[0][0])return i.stops[0][1];if(n>=i.stops[s-1][0])return i.stops[s-1][1];const f=Na(i.stops.map(v=>v[0]),n);return i.stops[f][1]}function Rd(i,t,n){const s=i.base!==void 0?i.base:1;if(bn(n)!=="number")return ba(i.default,t.default);const f=i.stops.length;if(f===1||n<=i.stops[0][0])return i.stops[0][1];if(n>=i.stops[f-1][0])return i.stops[f-1][1];const v=Na(i.stops.map(F=>F[0]),n),b=function(F,j,H,X){const ee=X-H,oe=F-H;return ee===0?0:j===1?oe/ee:(Math.pow(j,oe)-1)/(Math.pow(j,ee)-1)}(n,s,i.stops[v][0],i.stops[v+1][0]),S=i.stops[v][1],k=i.stops[v+1][1],R=ds[t.type]||Yu;return typeof S.evaluate=="function"?{evaluate(...F){const j=S.evaluate.apply(void 0,F),H=k.evaluate.apply(void 0,F);if(j!==void 0&&H!==void 0)return R(j,H,b,i.colorSpace)}}:R(S,k,b,i.colorSpace)}function Li(i,t,n){switch(t.type){case"color":n=en.parse(n);break;case"formatted":n=ci.fromString(n.toString());break;case"resolvedImage":n=no.fromString(n.toString());break;case"padding":n=hi.parse(n);break;case"colorArray":n=Ei.parse(n);break;case"numberArray":n=On.parse(n);break;default:bn(n)===t.type||t.type==="enum"&&t.values[n]||(n=void 0)}return ba(n,i.default,t.default)}Wo.register(zs,{error:[{kind:"error"},[Fr],(i,[t])=>{throw new Fn(t.evaluate(i))}],typeof:[Fr,[cn],(i,[t])=>Kn(di(t.evaluate(i)))],"to-rgba":[ui(Ft,4),[Zn],(i,[t])=>{const[n,s,f,v]=t.evaluate(i).rgb;return[255*n,255*s,255*f,v]}],rgb:[Zn,[Ft,Ft,Ft],Bc],rgba:[Zn,[Ft,Ft,Ft,Ft],Bc],has:{type:nn,overloads:[[[Fr],(i,[t])=>Wn(t.evaluate(i),i.properties())],[[Fr,Eo],(i,[t,n])=>Wn(t.evaluate(i),n.evaluate(i))]]},get:{type:cn,overloads:[[[Fr],(i,[t])=>wu(t.evaluate(i),i.properties())],[[Fr,Eo],(i,[t,n])=>wu(t.evaluate(i),n.evaluate(i))]]},"feature-state":[cn,[Fr],(i,[t])=>wu(t.evaluate(i),i.featureState||{})],properties:[Eo,[],i=>i.properties()],"geometry-type":[Fr,[],i=>i.geometryType()],id:[cn,[],i=>i.id()],zoom:[Ft,[],i=>i.globals.zoom],"heatmap-density":[Ft,[],i=>i.globals.heatmapDensity||0],"line-progress":[Ft,[],i=>i.globals.lineProgress||0],accumulated:[cn,[],i=>i.globals.accumulated===void 0?null:i.globals.accumulated],"+":[Ft,zl(Ft),(i,t)=>{let n=0;for(const s of t)n+=s.evaluate(i);return n}],"*":[Ft,zl(Ft),(i,t)=>{let n=1;for(const s of t)n*=s.evaluate(i);return n}],"-":{type:Ft,overloads:[[[Ft,Ft],(i,[t,n])=>t.evaluate(i)-n.evaluate(i)],[[Ft],(i,[t])=>-t.evaluate(i)]]},"/":[Ft,[Ft,Ft],(i,[t,n])=>t.evaluate(i)/n.evaluate(i)],"%":[Ft,[Ft,Ft],(i,[t,n])=>t.evaluate(i)%n.evaluate(i)],ln2:[Ft,[],()=>Math.LN2],pi:[Ft,[],()=>Math.PI],e:[Ft,[],()=>Math.E],"^":[Ft,[Ft,Ft],(i,[t,n])=>Math.pow(t.evaluate(i),n.evaluate(i))],sqrt:[Ft,[Ft],(i,[t])=>Math.sqrt(t.evaluate(i))],log10:[Ft,[Ft],(i,[t])=>Math.log(t.evaluate(i))/Math.LN10],ln:[Ft,[Ft],(i,[t])=>Math.log(t.evaluate(i))],log2:[Ft,[Ft],(i,[t])=>Math.log(t.evaluate(i))/Math.LN2],sin:[Ft,[Ft],(i,[t])=>Math.sin(t.evaluate(i))],cos:[Ft,[Ft],(i,[t])=>Math.cos(t.evaluate(i))],tan:[Ft,[Ft],(i,[t])=>Math.tan(t.evaluate(i))],asin:[Ft,[Ft],(i,[t])=>Math.asin(t.evaluate(i))],acos:[Ft,[Ft],(i,[t])=>Math.acos(t.evaluate(i))],atan:[Ft,[Ft],(i,[t])=>Math.atan(t.evaluate(i))],min:[Ft,zl(Ft),(i,t)=>Math.min(...t.map(n=>n.evaluate(i)))],max:[Ft,zl(Ft),(i,t)=>Math.max(...t.map(n=>n.evaluate(i)))],abs:[Ft,[Ft],(i,[t])=>Math.abs(t.evaluate(i))],round:[Ft,[Ft],(i,[t])=>{const n=t.evaluate(i);return n<0?-Math.round(-n):Math.round(n)}],floor:[Ft,[Ft],(i,[t])=>Math.floor(t.evaluate(i))],ceil:[Ft,[Ft],(i,[t])=>Math.ceil(t.evaluate(i))],"filter-==":[nn,[Fr,cn],(i,[t,n])=>i.properties()[t.value]===n.value],"filter-id-==":[nn,[cn],(i,[t])=>i.id()===t.value],"filter-type-==":[nn,[Fr],(i,[t])=>i.geometryType()===t.value],"filter-<":[nn,[Fr,cn],(i,[t,n])=>{const s=i.properties()[t.value],f=n.value;return typeof s==typeof f&&s<f}],"filter-id-<":[nn,[cn],(i,[t])=>{const n=i.id(),s=t.value;return typeof n==typeof s&&n<s}],"filter->":[nn,[Fr,cn],(i,[t,n])=>{const s=i.properties()[t.value],f=n.value;return typeof s==typeof f&&s>f}],"filter-id->":[nn,[cn],(i,[t])=>{const n=i.id(),s=t.value;return typeof n==typeof s&&n>s}],"filter-<=":[nn,[Fr,cn],(i,[t,n])=>{const s=i.properties()[t.value],f=n.value;return typeof s==typeof f&&s<=f}],"filter-id-<=":[nn,[cn],(i,[t])=>{const n=i.id(),s=t.value;return typeof n==typeof s&&n<=s}],"filter->=":[nn,[Fr,cn],(i,[t,n])=>{const s=i.properties()[t.value],f=n.value;return typeof s==typeof f&&s>=f}],"filter-id->=":[nn,[cn],(i,[t])=>{const n=i.id(),s=t.value;return typeof n==typeof s&&n>=s}],"filter-has":[nn,[cn],(i,[t])=>t.value in i.properties()],"filter-has-id":[nn,[],i=>i.id()!==null&&i.id()!==void 0],"filter-type-in":[nn,[ui(Fr)],(i,[t])=>t.value.indexOf(i.geometryType())>=0],"filter-id-in":[nn,[ui(cn)],(i,[t])=>t.value.indexOf(i.id())>=0],"filter-in-small":[nn,[Fr,ui(cn)],(i,[t,n])=>n.value.indexOf(i.properties()[t.value])>=0],"filter-in-large":[nn,[Fr,ui(cn)],(i,[t,n])=>function(s,f,v,b){for(;v<=b;){const S=v+b>>1;if(f[S]===s)return!0;f[S]>s?b=S-1:v=S+1}return!1}(i.properties()[t.value],n.value,0,n.value.length-1)],all:{type:nn,overloads:[[[nn,nn],(i,[t,n])=>t.evaluate(i)&&n.evaluate(i)],[zl(nn),(i,t)=>{for(const n of t)if(!n.evaluate(i))return!1;return!0}]]},any:{type:nn,overloads:[[[nn,nn],(i,[t,n])=>t.evaluate(i)||n.evaluate(i)],[zl(nn),(i,t)=>{for(const n of t)if(n.evaluate(i))return!0;return!1}]]},"!":[nn,[nn],(i,[t])=>!t.evaluate(i)],"is-supported-script":[nn,[Fr],(i,[t])=>{const n=i.globals&&i.globals.isSupportedScript;return!n||n(t.evaluate(i))}],upcase:[Fr,[Fr],(i,[t])=>t.evaluate(i).toUpperCase()],downcase:[Fr,[Fr],(i,[t])=>t.evaluate(i).toLowerCase()],concat:[Fr,zl(cn),(i,t)=>t.map(n=>Dr(n.evaluate(i))).join("")],"resolved-locale":[Fr,[Qs],(i,[t])=>t.evaluate(i).resolvedLocale()]});class $c{constructor(t,n){this.expression=t,this._warningHistory={},this._evaluator=new yu,this._defaultValue=n?function(s){if(s.type==="color"&&Xu(s.default))return new en(0,0,0,0);switch(s.type){case"color":return en.parse(s.default)||null;case"padding":return hi.parse(s.default)||null;case"numberArray":return On.parse(s.default)||null;case"colorArray":return Ei.parse(s.default)||null;case"variableAnchorOffsetCollection":return Fo.parse(s.default)||null;case"projectionDefinition":return ls.parse(s.default)||null;default:return s.default===void 0?null:s.default}}(n):null,this._enumValues=n&&n.type==="enum"?n.values:null}evaluateWithoutErrorHandling(t,n,s,f,v,b){return this._evaluator.globals=t,this._evaluator.feature=n,this._evaluator.featureState=s,this._evaluator.canonical=f,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=b,this.expression.evaluate(this._evaluator)}evaluate(t,n,s,f,v,b){this._evaluator.globals=t,this._evaluator.feature=n||null,this._evaluator.featureState=s||null,this._evaluator.canonical=f,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=b||null;try{const S=this.expression.evaluate(this._evaluator);if(S==null||typeof S=="number"&&S!=S)return this._defaultValue;if(this._enumValues&&!(S in this._enumValues))throw new Fn(`Expected value to be one of ${Object.keys(this._enumValues).map(k=>JSON.stringify(k)).join(", ")}, but found ${JSON.stringify(S)} instead.`);return S}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}}}function cl(i){return Array.isArray(i)&&i.length>0&&typeof i[0]=="string"&&i[0]in zs}function hl(i,t){const n=new Ba(zs,Su,[],t?function(f){const v={color:Zn,string:Fr,number:Ft,enum:Fr,boolean:nn,formatted:Js,padding:Es,numberArray:Go,colorArray:tl,projectionDefinition:Gn,resolvedImage:Da,variableAnchorOffsetCollection:hn};return f.type==="array"?ui(v[f.value]||cn,f.length):v[f.type]}(t):void 0),s=n.parse(i,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return s?Tu(new $c(s,t)):na(n.errors)}class jc{constructor(t,n){this.kind=t,this._styleExpression=n,this.isStateDependent=t!=="constant"&&!Nc(n.expression)}evaluateWithoutErrorHandling(t,n,s,f,v,b){return this._styleExpression.evaluateWithoutErrorHandling(t,n,s,f,v,b)}evaluate(t,n,s,f,v,b){return this._styleExpression.evaluate(t,n,s,f,v,b)}}class Uc{constructor(t,n,s,f){this.kind=t,this.zoomStops=s,this._styleExpression=n,this.isStateDependent=t!=="camera"&&!Nc(n.expression),this.interpolationType=f}evaluateWithoutErrorHandling(t,n,s,f,v,b){return this._styleExpression.evaluateWithoutErrorHandling(t,n,s,f,v,b)}evaluate(t,n,s,f,v,b){return this._styleExpression.evaluate(t,n,s,f,v,b)}interpolationFactor(t,n,s){return this.interpolationType?Ni.interpolationFactor(this.interpolationType,t,n,s):0}}function Cu(i,t){const n=hl(i,t);if(n.result==="error")return n;const s=n.value.expression,f=Ku(s);if(!f&&!Ll(t))return na([new _n("","data expressions not supported")]);const v=fh(s,["zoom"]);if(!v&&!Wh(t))return na([new _n("","zoom expressions not supported")]);const b=Dl(s);return b||v?b instanceof _n?na([b]):b instanceof Ni&&!ia(t)?na([new _n("",'"interpolate" expressions cannot be used with this property')]):Tu(b?new Uc(f?"camera":"composite",n.value,b.labels,b instanceof Ni?b.interpolation:void 0):new jc(f?"constant":"source",n.value)):na([new _n("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Pu{constructor(t,n){this._parameters=t,this._specification=n,Sn(this,Hh(this._parameters,this._specification))}static deserialize(t){return new Pu(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function Dl(i){let t=null;if(i instanceof va)t=Dl(i.result);else if(i instanceof $a){for(const n of i.args)if(t=Dl(n),t)break}else(i instanceof Ri||i instanceof Ni)&&i.input instanceof Wo&&i.input.name==="zoom"&&(t=i);return t instanceof _n||i.eachChild(n=>{const s=Dl(n);s instanceof _n?t=s:!t&&s?t=new _n("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&s&&t!==s&&(t=new _n("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}function $i(i){if(i===!0||i===!1)return!0;if(!Array.isArray(i)||i.length===0)return!1;switch(i[0]){case"has":return i.length>=2&&i[1]!=="$id"&&i[1]!=="$type";case"in":return i.length>=3&&(typeof i[1]!="string"||Array.isArray(i[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return i.length!==3||Array.isArray(i[1])||Array.isArray(i[2]);case"any":case"all":for(const t of i.slice(1))if(!$i(t)&&typeof t!="boolean")return!1;return!0;default:return!0}}const No={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function mh(i){if(i==null)return{filter:()=>!0,needGeometry:!1};$i(i)||(i=Ju(i));const t=hl(i,No);if(t.result==="error")throw new Error(t.value.map(n=>`${n.key}: ${n.message}`).join(", "));return{filter:(n,s,f)=>t.value.evaluate(n,s,{},f),needGeometry:Vc(i)}}function gh(i,t){return i<t?-1:i>t?1:0}function Vc(i){if(!Array.isArray(i))return!1;if(i[0]==="within"||i[0]==="distance")return!0;for(let t=1;t<i.length;t++)if(Vc(i[t]))return!0;return!1}function Ju(i){if(!i)return!0;const t=i[0];return i.length<=1?t!=="any":t==="=="?ec(i[1],i[2],"=="):t==="!="?dl(ec(i[1],i[2],"==")):t==="<"||t===">"||t==="<="||t===">="?ec(i[1],i[2],t):t==="any"?(n=i.slice(1),["any"].concat(n.map(Ju))):t==="all"?["all"].concat(i.slice(1).map(Ju)):t==="none"?["all"].concat(i.slice(1).map(Ju).map(dl)):t==="in"?Eu(i[1],i.slice(2)):t==="!in"?dl(Eu(i[1],i.slice(2))):t==="has"?Zc(i[1]):t!=="!has"||dl(Zc(i[1]));var n}function ec(i,t,n){switch(i){case"$type":return[`filter-type-${n}`,t];case"$id":return[`filter-id-${n}`,t];default:return[`filter-${n}`,i,t]}}function Eu(i,t){if(t.length===0)return!1;switch(i){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(n=>typeof n!=typeof t[0])?["filter-in-large",i,["literal",t.sort(gh)]]:["filter-in-small",i,["literal",t]]}}function Zc(i){switch(i){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",i]}}function dl(i){return["!",i]}function Iu(i){const t=typeof i;if(t==="number"||t==="boolean"||t==="string"||i==null)return JSON.stringify(i);if(Array.isArray(i)){let f="[";for(const v of i)f+=`${Iu(v)},`;return`${f}]`}const n=Object.keys(i).sort();let s="{";for(let f=0;f<n.length;f++)s+=`${JSON.stringify(n[f])}:${Iu(i[n[f]])},`;return`${s}}`}function tc(i){let t="";for(const n of Ke)t+=`/${Iu(i[n])}`;return t}function Mu(i){const t=i.value;return t?[new Tt(i.key,t,"constants have been deprecated as of v8")]:[]}function Ci(i){return i instanceof Number||i instanceof String||i instanceof Boolean?i.valueOf():i}function Ol(i){if(Array.isArray(i))return i.map(Ol);if(i instanceof Object&&!(i instanceof Number||i instanceof String||i instanceof Boolean)){const t={};for(const n in i)t[n]=Ol(i[n]);return t}return Ci(i)}function vo(i){const t=i.key,n=i.value,s=i.valueSpec||{},f=i.objectElementValidators||{},v=i.style,b=i.styleSpec,S=i.validateSpec;let k=[];const R=bn(n);if(R!=="object")return[new Tt(t,n,`object expected, ${R} found`)];for(const F in n){const j=F.split(".")[0],H=Ot(s,j)||s["*"];let X;if(Ot(f,j))X=f[j];else if(Ot(s,j))X=S;else if(f["*"])X=f["*"];else{if(!s["*"]){k.push(new Tt(t,n[F],`unknown property "${F}"`));continue}X=S}k=k.concat(X({key:(t&&`${t}.`)+F,value:n[F],valueSpec:H,style:v,styleSpec:b,object:n,objectKey:F,validateSpec:S},n))}for(const F in s)f[F]||s[F].required&&s[F].default===void 0&&n[F]===void 0&&k.push(new Tt(t,n,`missing required property "${F}"`));return k}function qh(i){const t=i.value,n=i.valueSpec,s=i.style,f=i.styleSpec,v=i.key,b=i.arrayElementValidator||i.validateSpec;if(bn(t)!=="array")return[new Tt(v,t,`array expected, ${bn(t)} found`)];if(n.length&&t.length!==n.length)return[new Tt(v,t,`array length ${n.length} expected, length ${t.length} found`)];if(n["min-length"]&&t.length<n["min-length"])return[new Tt(v,t,`array length at least ${n["min-length"]} expected, length ${t.length} found`)];let S={type:n.value,values:n.values};f.$version<7&&(S.function=n.function),bn(n.value)==="object"&&(S=n.value);let k=[];for(let R=0;R<t.length;R++)k=k.concat(b({array:t,arrayIndex:R,value:t[R],valueSpec:S,validateSpec:i.validateSpec,style:s,styleSpec:f,key:`${v}[${R}]`}));return k}function Fl(i){const t=i.key,n=i.value,s=i.valueSpec;let f=bn(n);return f==="number"&&n!=n&&(f="NaN"),f!=="number"?[new Tt(t,n,`number expected, ${f} found`)]:"minimum"in s&&n<s.minimum?[new Tt(t,n,`${n} is less than the minimum value ${s.minimum}`)]:"maximum"in s&&n>s.maximum?[new Tt(t,n,`${n} is greater than the maximum value ${s.maximum}`)]:[]}function Va(i){const t=i.valueSpec,n=Ci(i.value.type);let s,f,v,b={};const S=n!=="categorical"&&i.value.property===void 0,k=!S,R=bn(i.value.stops)==="array"&&bn(i.value.stops[0])==="array"&&bn(i.value.stops[0][0])==="object",F=vo({key:i.key,value:i.value,valueSpec:i.styleSpec.function,validateSpec:i.validateSpec,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{stops:function(X){if(n==="identity")return[new Tt(X.key,X.value,'identity function may not have a "stops" property')];let ee=[];const oe=X.value;return ee=ee.concat(qh({key:X.key,value:oe,valueSpec:X.valueSpec,validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec,arrayElementValidator:j})),bn(oe)==="array"&&oe.length===0&&ee.push(new Tt(X.key,oe,"array must have at least one stop")),ee},default:function(X){return X.validateSpec({key:X.key,value:X.value,valueSpec:t,validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec})}}});return n==="identity"&&S&&F.push(new Tt(i.key,i.value,'missing required property "property"')),n==="identity"||i.value.stops||F.push(new Tt(i.key,i.value,'missing required property "stops"')),n==="exponential"&&i.valueSpec.expression&&!ia(i.valueSpec)&&F.push(new Tt(i.key,i.value,"exponential functions not supported")),i.styleSpec.$version>=8&&(k&&!Ll(i.valueSpec)?F.push(new Tt(i.key,i.value,"property functions not supported")):S&&!Wh(i.valueSpec)&&F.push(new Tt(i.key,i.value,"zoom functions not supported"))),n!=="categorical"&&!R||i.value.property!==void 0||F.push(new Tt(i.key,i.value,'"property" property is required')),F;function j(X){let ee=[];const oe=X.value,ye=X.key;if(bn(oe)!=="array")return[new Tt(ye,oe,`array expected, ${bn(oe)} found`)];if(oe.length!==2)return[new Tt(ye,oe,`array length 2 expected, length ${oe.length} found`)];if(R){if(bn(oe[0])!=="object")return[new Tt(ye,oe,`object expected, ${bn(oe[0])} found`)];if(oe[0].zoom===void 0)return[new Tt(ye,oe,"object stop key must have zoom")];if(oe[0].value===void 0)return[new Tt(ye,oe,"object stop key must have value")];if(v&&v>Ci(oe[0].zoom))return[new Tt(ye,oe[0].zoom,"stop zoom values must appear in ascending order")];Ci(oe[0].zoom)!==v&&(v=Ci(oe[0].zoom),f=void 0,b={}),ee=ee.concat(vo({key:`${ye}[0]`,value:oe[0],valueSpec:{zoom:{}},validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec,objectElementValidators:{zoom:Fl,value:H}}))}else ee=ee.concat(H({key:`${ye}[0]`,value:oe[0],validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec},oe));return cl(Ol(oe[1]))?ee.concat([new Tt(`${ye}[1]`,oe[1],"expressions are not allowed in function stops.")]):ee.concat(X.validateSpec({key:`${ye}[1]`,value:oe[1],valueSpec:t,validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec}))}function H(X,ee){const oe=bn(X.value),ye=Ci(X.value),Pe=X.value!==null?X.value:ee;if(s){if(oe!==s)return[new Tt(X.key,Pe,`${oe} stop domain type must match previous stop domain type ${s}`)]}else s=oe;if(oe!=="number"&&oe!=="string"&&oe!=="boolean")return[new Tt(X.key,Pe,"stop domain value must be a number, string, or boolean")];if(oe!=="number"&&n!=="categorical"){let Ze=`number expected, ${oe} found`;return Ll(t)&&n===void 0&&(Ze+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Tt(X.key,Pe,Ze)]}return n!=="categorical"||oe!=="number"||isFinite(ye)&&Math.floor(ye)===ye?n!=="categorical"&&oe==="number"&&f!==void 0&&ye<f?[new Tt(X.key,Pe,"stop domain values must appear in ascending order")]:(f=ye,n==="categorical"&&ye in b?[new Tt(X.key,Pe,"stop domain values must be unique")]:(b[ye]=!0,[])):[new Tt(X.key,Pe,`integer expected, found ${ye}`)]}}function Ho(i){const t=(i.expressionContext==="property"?Cu:hl)(Ol(i.value),i.valueSpec);if(t.result==="error")return t.value.map(s=>new Tt(`${i.key}${s.key}`,i.value,s.message));const n=t.value.expression||t.value._styleExpression.expression;if(i.expressionContext==="property"&&i.propertyKey==="text-font"&&!n.outputDefined())return[new Tt(i.key,i.value,`Invalid data expression for "${i.propertyKey}". Output values must be contained as literals within the expression.`)];if(i.expressionContext==="property"&&i.propertyType==="layout"&&!Nc(n))return[new Tt(i.key,i.value,'"feature-state" data expressions are not supported with layout properties.')];if(i.expressionContext==="filter"&&!Nc(n))return[new Tt(i.key,i.value,'"feature-state" data expressions are not supported with filters.')];if(i.expressionContext&&i.expressionContext.indexOf("cluster")===0){if(!fh(n,["zoom","feature-state"]))return[new Tt(i.key,i.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(i.expressionContext==="cluster-initial"&&!Ku(n))return[new Tt(i.key,i.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ls(i){const t=i.key,n=i.value,s=bn(n);return s!=="string"?[new Tt(t,n,`color expected, ${s} found`)]:en.parse(String(n))?[]:[new Tt(t,n,`color expected, "${n}" found`)]}function ku(i){const t=i.key,n=i.value,s=i.valueSpec,f=[];return Array.isArray(s.values)?s.values.indexOf(Ci(n))===-1&&f.push(new Tt(t,n,`expected one of [${s.values.join(", ")}], ${JSON.stringify(n)} found`)):Object.keys(s.values).indexOf(Ci(n))===-1&&f.push(new Tt(t,n,`expected one of [${Object.keys(s.values).join(", ")}], ${JSON.stringify(n)} found`)),f}function ce(i){return $i(Ol(i.value))?Ho(Sn({},i,{expressionContext:"filter",valueSpec:{value:"boolean"}})):rc(i)}function rc(i){const t=i.value,n=i.key;if(bn(t)!=="array")return[new Tt(n,t,`array expected, ${bn(t)} found`)];const s=i.styleSpec;let f,v=[];if(t.length<1)return[new Tt(n,t,"filter array must have at least 1 element")];switch(v=v.concat(ku({key:`${n}[0]`,value:t[0],valueSpec:s.filter_operator,style:i.style,styleSpec:i.styleSpec})),Ci(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&Ci(t[1])==="$type"&&v.push(new Tt(n,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":t.length!==3&&v.push(new Tt(n,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(f=bn(t[1]),f!=="string"&&v.push(new Tt(`${n}[1]`,t[1],`string expected, ${f} found`)));for(let b=2;b<t.length;b++)f=bn(t[b]),Ci(t[1])==="$type"?v=v.concat(ku({key:`${n}[${b}]`,value:t[b],valueSpec:s.geometry_type,style:i.style,styleSpec:i.styleSpec})):f!=="string"&&f!=="number"&&f!=="boolean"&&v.push(new Tt(`${n}[${b}]`,t[b],`string, number, or boolean expected, ${f} found`));break;case"any":case"all":case"none":for(let b=1;b<t.length;b++)v=v.concat(rc({key:`${n}[${b}]`,value:t[b],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":f=bn(t[1]),t.length!==2?v.push(new Tt(n,t,`filter array for "${t[0]}" operator must have 2 elements`)):f!=="string"&&v.push(new Tt(`${n}[1]`,t[1],`string expected, ${f} found`))}return v}function fl(i,t){const n=i.key,s=i.validateSpec,f=i.style,v=i.styleSpec,b=i.value,S=i.objectKey,k=v[`${t}_${i.layerType}`];if(!k)return[];const R=S.match(/^(.*)-transition$/);if(t==="paint"&&R&&k[R[1]]&&k[R[1]].transition)return s({key:n,value:b,valueSpec:v.transition,style:f,styleSpec:v});const F=i.valueSpec||k[S];if(!F)return[new Tt(n,b,`unknown property "${S}"`)];let j;if(bn(b)==="string"&&Ll(F)&&!F.tokens&&(j=/^{([^}]+)}$/.exec(b)))return[new Tt(n,b,`"${S}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(j[1])} }\`.`)];const H=[];return i.layerType==="symbol"&&(S==="text-field"&&f&&!f.glyphs&&H.push(new Tt(n,b,'use of "text-field" requires a style "glyphs" property')),S==="text-font"&&Xu(Ol(b))&&Ci(b.type)==="identity"&&H.push(new Tt(n,b,'"text-font" does not support identity functions'))),H.concat(s({key:i.key,value:b,valueSpec:F,style:f,styleSpec:v,expressionContext:"property",propertyType:t,propertyKey:S}))}function qo(i){return fl(i,"paint")}function yn(i){return fl(i,"layout")}function tu(i){let t=[];const n=i.value,s=i.key,f=i.style,v=i.styleSpec;if(bn(n)!=="object")return[new Tt(s,n,`object expected, ${bn(n)} found`)];n.type||n.ref||t.push(new Tt(s,n,'either "type" or "ref" is required'));let b=Ci(n.type);const S=Ci(n.ref);if(n.id){const k=Ci(n.id);for(let R=0;R<i.arrayIndex;R++){const F=f.layers[R];Ci(F.id)===k&&t.push(new Tt(s,n.id,`duplicate layer id "${n.id}", previously used at line ${F.id.__line__}`))}}if("ref"in n){let k;["type","source","source-layer","filter","layout"].forEach(R=>{R in n&&t.push(new Tt(s,n[R],`"${R}" is prohibited for ref layers`))}),f.layers.forEach(R=>{Ci(R.id)===S&&(k=R)}),k?k.ref?t.push(new Tt(s,n.ref,"ref cannot reference another ref layer")):b=Ci(k.type):t.push(new Tt(s,n.ref,`ref layer "${S}" not found`))}else if(b!=="background")if(n.source){const k=f.sources&&f.sources[n.source],R=k&&Ci(k.type);k?R==="vector"&&b==="raster"?t.push(new Tt(s,n.source,`layer "${n.id}" requires a raster source`)):R!=="raster-dem"&&b==="hillshade"?t.push(new Tt(s,n.source,`layer "${n.id}" requires a raster-dem source`)):R==="raster"&&b!=="raster"?t.push(new Tt(s,n.source,`layer "${n.id}" requires a vector source`)):R!=="vector"||n["source-layer"]?R==="raster-dem"&&b!=="hillshade"?t.push(new Tt(s,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):b!=="line"||!n.paint||!n.paint["line-gradient"]||R==="geojson"&&k.lineMetrics||t.push(new Tt(s,n,`layer "${n.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new Tt(s,n,`layer "${n.id}" must specify a "source-layer"`)):t.push(new Tt(s,n.source,`source "${n.source}" not found`))}else t.push(new Tt(s,n,'missing required property "source"'));return t=t.concat(vo({key:s,value:n,valueSpec:v.layer,style:i.style,styleSpec:i.styleSpec,validateSpec:i.validateSpec,objectElementValidators:{"*":()=>[],type:()=>i.validateSpec({key:`${s}.type`,value:n.type,valueSpec:v.layer.type,style:i.style,styleSpec:i.styleSpec,validateSpec:i.validateSpec,object:n,objectKey:"type"}),filter:ce,layout:k=>vo({layer:n,key:k.key,value:k.value,style:k.style,styleSpec:k.styleSpec,validateSpec:k.validateSpec,objectElementValidators:{"*":R=>yn(Sn({layerType:b},R))}}),paint:k=>vo({layer:n,key:k.key,value:k.value,style:k.style,styleSpec:k.styleSpec,validateSpec:k.validateSpec,objectElementValidators:{"*":R=>qo(Sn({layerType:b},R))}})}})),t}function ao(i){const t=i.value,n=i.key,s=bn(t);return s!=="string"?[new Tt(n,t,`string expected, ${s} found`)]:[]}const pl={promoteId:function({key:i,value:t}){if(bn(t)==="string")return ao({key:i,value:t});{const n=[];for(const s in t)n.push(...ao({key:`${i}.${s}`,value:t[s]}));return n}}};function ps(i){const t=i.value,n=i.key,s=i.styleSpec,f=i.style,v=i.validateSpec;if(!t.type)return[new Tt(n,t,'"type" is required')];const b=Ci(t.type);let S;switch(b){case"vector":case"raster":return S=vo({key:n,value:t,valueSpec:s[`source_${b.replace("-","_")}`],style:i.style,styleSpec:s,objectElementValidators:pl,validateSpec:v}),S;case"raster-dem":return S=function(k){var R;const F=(R=k.sourceName)!==null&&R!==void 0?R:"",j=k.value,H=k.styleSpec,X=H.source_raster_dem,ee=k.style;let oe=[];const ye=bn(j);if(j===void 0)return oe;if(ye!=="object")return oe.push(new Tt("source_raster_dem",j,`object expected, ${ye} found`)),oe;const Pe=Ci(j.encoding)==="custom",Ze=["redFactor","greenFactor","blueFactor","baseShift"],ze=k.value.encoding?`"${k.value.encoding}"`:"Default";for(const q in j)!Pe&&Ze.includes(q)?oe.push(new Tt(q,j[q],`In "${F}": "${q}" is only valid when "encoding" is set to "custom". ${ze} encoding found`)):X[q]?oe=oe.concat(k.validateSpec({key:q,value:j[q],valueSpec:X[q],validateSpec:k.validateSpec,style:ee,styleSpec:H})):oe.push(new Tt(q,j[q],`unknown property "${q}"`));return oe}({sourceName:n,value:t,style:i.style,styleSpec:s,validateSpec:v}),S;case"geojson":if(S=vo({key:n,value:t,valueSpec:s.source_geojson,style:f,styleSpec:s,validateSpec:v,objectElementValidators:pl}),t.cluster)for(const k in t.clusterProperties){const[R,F]=t.clusterProperties[k],j=typeof R=="string"?[R,["accumulated"],["get",k]]:R;S.push(...Ho({key:`${n}.${k}.map`,value:F,expressionContext:"cluster-map"})),S.push(...Ho({key:`${n}.${k}.reduce`,value:j,expressionContext:"cluster-reduce"}))}return S;case"video":return vo({key:n,value:t,valueSpec:s.source_video,style:f,validateSpec:v,styleSpec:s});case"image":return vo({key:n,value:t,valueSpec:s.source_image,style:f,validateSpec:v,styleSpec:s});case"canvas":return[new Tt(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ku({key:`${n}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Mi(i){const t=i.value,n=i.styleSpec,s=n.light,f=i.style;let v=[];const b=bn(t);if(t===void 0)return v;if(b!=="object")return v=v.concat([new Tt("light",t,`object expected, ${b} found`)]),v;for(const S in t){const k=S.match(/^(.*)-transition$/);v=v.concat(k&&s[k[1]]&&s[k[1]].transition?i.validateSpec({key:S,value:t[S],valueSpec:n.transition,validateSpec:i.validateSpec,style:f,styleSpec:n}):s[S]?i.validateSpec({key:S,value:t[S],valueSpec:s[S],validateSpec:i.validateSpec,style:f,styleSpec:n}):[new Tt(S,t[S],`unknown property "${S}"`)])}return v}function Pi(i){const t=i.value,n=i.styleSpec,s=n.sky,f=i.style,v=bn(t);if(t===void 0)return[];if(v!=="object")return[new Tt("sky",t,`object expected, ${v} found`)];let b=[];for(const S in t)b=b.concat(s[S]?i.validateSpec({key:S,value:t[S],valueSpec:s[S],style:f,styleSpec:n}):[new Tt(S,t[S],`unknown property "${S}"`)]);return b}function wa(i){const t=i.value,n=i.styleSpec,s=n.terrain,f=i.style;let v=[];const b=bn(t);if(t===void 0)return v;if(b!=="object")return v=v.concat([new Tt("terrain",t,`object expected, ${b} found`)]),v;for(const S in t)v=v.concat(s[S]?i.validateSpec({key:S,value:t[S],valueSpec:s[S],validateSpec:i.validateSpec,style:f,styleSpec:n}):[new Tt(S,t[S],`unknown property "${S}"`)]);return v}function $o(i){let t=[];const n=i.value,s=i.key;if(Array.isArray(n)){const f=[],v=[];for(const b in n)n[b].id&&f.includes(n[b].id)&&t.push(new Tt(s,n,`all the sprites' ids must be unique, but ${n[b].id} is duplicated`)),f.push(n[b].id),n[b].url&&v.includes(n[b].url)&&t.push(new Tt(s,n,`all the sprites' URLs must be unique, but ${n[b].url} is duplicated`)),v.push(n[b].url),t=t.concat(vo({key:`${s}[${b}]`,value:n[b],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:i.validateSpec}));return t}return ao({key:s,value:n})}function Ko(i){return t=i.value,t&&t.constructor===Object?[]:[new Tt(i.key,i.value,`object expected, ${bn(i.value)} found`)];var t}const ms={"*":()=>[],array:qh,boolean:function(i){const t=i.value,n=i.key,s=bn(t);return s!=="boolean"?[new Tt(n,t,`boolean expected, ${s} found`)]:[]},number:Fl,color:Ls,constants:Mu,enum:ku,filter:ce,function:Va,layer:tu,object:vo,source:ps,light:Mi,sky:Pi,terrain:wa,projection:function(i){const t=i.value,n=i.styleSpec,s=n.projection,f=i.style,v=bn(t);if(t===void 0)return[];if(v!=="object")return[new Tt("projection",t,`object expected, ${v} found`)];let b=[];for(const S in t)b=b.concat(s[S]?i.validateSpec({key:S,value:t[S],valueSpec:s[S],style:f,styleSpec:n}):[new Tt(S,t[S],`unknown property "${S}"`)]);return b},projectionDefinition:function(i){const t=i.key;let n=i.value;n=n instanceof String?n.valueOf():n;const s=bn(n);return s!=="array"||function(f){return Array.isArray(f)&&f.length===3&&typeof f[0]=="string"&&typeof f[1]=="string"&&typeof f[2]=="number"}(n)||function(f){return!!["interpolate","step","literal"].includes(f[0])}(n)?["array","string"].includes(s)?[]:[new Tt(t,n,`projection expected, invalid type "${s}" found`)]:[new Tt(t,n,`projection expected, invalid array ${JSON.stringify(n)} found`)]},string:ao,formatted:function(i){return ao(i).length===0?[]:Ho(i)},resolvedImage:function(i){return ao(i).length===0?[]:Ho(i)},padding:function(i){const t=i.key,n=i.value;if(bn(n)==="array"){if(n.length<1||n.length>4)return[new Tt(t,n,`padding requires 1 to 4 values; ${n.length} values found`)];const s={type:"number"};let f=[];for(let v=0;v<n.length;v++)f=f.concat(i.validateSpec({key:`${t}[${v}]`,value:n[v],validateSpec:i.validateSpec,valueSpec:s}));return f}return Fl({key:t,value:n,valueSpec:{}})},numberArray:function(i){const t=i.key,n=i.value;if(bn(n)==="array"){const s={type:"number"};if(n.length<1)return[new Tt(t,n,"array length at least 1 expected, length 0 found")];let f=[];for(let v=0;v<n.length;v++)f=f.concat(i.validateSpec({key:`${t}[${v}]`,value:n[v],validateSpec:i.validateSpec,valueSpec:s}));return f}return Fl({key:t,value:n,valueSpec:{}})},colorArray:function(i){const t=i.key,n=i.value;if(bn(n)==="array"){if(n.length<1)return[new Tt(t,n,"array length at least 1 expected, length 0 found")];let s=[];for(let f=0;f<n.length;f++)s=s.concat(Ls({key:`${t}[${f}]`,value:n[f]}));return s}return Ls({key:t,value:n})},variableAnchorOffsetCollection:function(i){const t=i.key,n=i.value,s=bn(n),f=i.styleSpec;if(s!=="array"||n.length<1||n.length%2!=0)return[new Tt(t,n,"variableAnchorOffsetCollection requires a non-empty array of even length")];let v=[];for(let b=0;b<n.length;b+=2)v=v.concat(ku({key:`${t}[${b}]`,value:n[b],valueSpec:f.layout_symbol["text-anchor"]})),v=v.concat(qh({key:`${t}[${b+1}]`,value:n[b+1],valueSpec:{length:2,value:"number"},validateSpec:i.validateSpec,style:i.style,styleSpec:f}));return v},sprite:$o,state:Ko};function ml(i){const t=i.value,n=i.valueSpec,s=i.styleSpec;return i.validateSpec=ml,n.expression&&Xu(Ci(t))?Va(i):n.expression&&cl(Ol(t))?Ho(i):n.type&&ms[n.type]?ms[n.type](i):vo(Sn({},i,{valueSpec:n.type?s[n.type]:n}))}function Ds(i){const t=i.value,n=i.key,s=ao(i);return s.length||(t.indexOf("{fontstack}")===-1&&s.push(new Tt(n,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&s.push(new Tt(n,t,'"glyphs" url must include a "{range}" token'))),s}function Ao(i,t=pe){let n=[];return n=n.concat(ml({key:"",value:i,valueSpec:t.$root,styleSpec:t,style:i,validateSpec:ml,objectElementValidators:{glyphs:Ds,"*":()=>[]}})),i.constants&&(n=n.concat(Mu({key:"constants",value:i.constants}))),nc(n)}function Za(i){return function(t){return i({...t,validateSpec:ml})}}function nc(i){return[].concat(i).sort((t,n)=>t.line-n.line)}function Hi(i){return function(...t){return nc(i.apply(this,t))}}Ao.source=Hi(Za(ps)),Ao.sprite=Hi(Za($o)),Ao.glyphs=Hi(Za(Ds)),Ao.light=Hi(Za(Mi)),Ao.sky=Hi(Za(Pi)),Ao.terrain=Hi(Za(wa)),Ao.state=Hi(Za(Ko)),Ao.layer=Hi(Za(tu)),Ao.filter=Hi(Za(ce)),Ao.paintProperty=Hi(Za(qo)),Ao.layoutProperty=Hi(Za(yn));const ic=Ao,Ga=ic.light,Kh=ic.sky,yh=ic.paintProperty,_h=ic.layoutProperty;function ru(i,t){let n=!1;if(t&&t.length)for(const s of t)i.fire(new Me(new Error(s.message))),n=!0;return n}class Sa{constructor(t,n,s){const f=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;const b=new Int32Array(this.arrayBuffer);t=b[0],this.d=(n=b[1])+2*(s=b[2]);for(let k=0;k<this.d*this.d;k++){const R=b[3+k],F=b[3+k+1];f.push(R===F?null:b.subarray(R,F))}const S=b[3+f.length+1];this.keys=b.subarray(b[3+f.length],S),this.bboxes=b.subarray(S),this.insert=this._insertReadonly}else{this.d=n+2*s;for(let b=0;b<this.d*this.d;b++)f.push([]);this.keys=[],this.bboxes=[]}this.n=n,this.extent=t,this.padding=s,this.scale=n/t,this.uid=0;const v=s/n*t;this.min=-v,this.max=t+v}insert(t,n,s,f,v){this._forEachCell(n,s,f,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(t),this.bboxes.push(n),this.bboxes.push(s),this.bboxes.push(f),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(t,n,s,f,v,b){this.cells[v].push(b)}query(t,n,s,f,v){const b=this.min,S=this.max;if(t<=b&&n<=b&&S<=s&&S<=f&&!v)return Array.prototype.slice.call(this.keys);{const k=[];return this._forEachCell(t,n,s,f,this._queryCell,k,{},v),k}}_queryCell(t,n,s,f,v,b,S,k){const R=this.cells[v];if(R!==null){const F=this.keys,j=this.bboxes;for(let H=0;H<R.length;H++){const X=R[H];if(S[X]===void 0){const ee=4*X;(k?k(j[ee+0],j[ee+1],j[ee+2],j[ee+3]):t<=j[ee+2]&&n<=j[ee+3]&&s>=j[ee+0]&&f>=j[ee+1])?(S[X]=!0,b.push(F[X])):S[X]=!1}}}}_forEachCell(t,n,s,f,v,b,S,k){const R=this._convertToCellCoord(t),F=this._convertToCellCoord(n),j=this._convertToCellCoord(s),H=this._convertToCellCoord(f);for(let X=R;X<=j;X++)for(let ee=F;ee<=H;ee++){const oe=this.d*ee+X;if((!k||k(this._convertFromCellCoord(X),this._convertFromCellCoord(ee),this._convertFromCellCoord(X+1),this._convertFromCellCoord(ee+1)))&&v.call(this,t,n,s,f,oe,b,S,k))return}}_convertFromCellCoord(t){return(t-this.padding)/this.scale}_convertToCellCoord(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const t=this.cells,n=3+this.cells.length+1+1;let s=0;for(let b=0;b<this.cells.length;b++)s+=this.cells[b].length;const f=new Int32Array(n+s+this.keys.length+this.bboxes.length);f[0]=this.extent,f[1]=this.n,f[2]=this.padding;let v=n;for(let b=0;b<t.length;b++){const S=t[b];f[3+b]=v,f.set(S,v),v+=S.length}return f[3+t.length]=v,f.set(this.keys,v),v+=this.keys.length,f[3+t.length+1]=v,f.set(this.bboxes,v),v+=this.bboxes.length,f.buffer}static serialize(t,n){const s=t.toArrayBuffer();return n&&n.push(s),{buffer:s}}static deserialize(t){return new Sa(t.buffer)}}const Os={};function ur(i,t,n={}){if(Os[i])throw new Error(`${i} is already registered.`);Object.defineProperty(t,"_classRegistryKey",{value:i,writeable:!1}),Os[i]={klass:t,omit:n.omit||[],shallow:n.shallow||[]}}ur("Object",Object),ur("TransferableGridIndex",Sa),ur("Color",en),ur("Error",Error),ur("AJAXError",ti),ur("ResolvedImage",no),ur("StylePropertyFunction",Pu),ur("StyleExpression",$c,{omit:["_evaluator"]}),ur("ZoomDependentExpression",Uc),ur("ZoomConstantExpression",jc),ur("CompoundExpression",Wo,{omit:["_evaluate"]});for(const i in zs)zs[i]._classRegistryKey||ur(`Expression_${i}`,zs[i]);function oc(i){return i&&typeof ArrayBuffer<"u"&&(i instanceof ArrayBuffer||i.constructor&&i.constructor.name==="ArrayBuffer")}function sc(i){return i.$name||i.constructor._classRegistryKey}function Ta(i){return!function(t){if(t===null||typeof t!="object")return!1;const n=sc(t);return!(!n||n==="Object")}(i)&&(i==null||typeof i=="boolean"||typeof i=="number"||typeof i=="string"||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp||i instanceof Blob||i instanceof Error||oc(i)||fn(i)||ArrayBuffer.isView(i)||i instanceof ImageData)}function Xo(i,t){if(Ta(i))return(oc(i)||fn(i))&&t&&t.push(i),ArrayBuffer.isView(i)&&t&&t.push(i.buffer),i instanceof ImageData&&t&&t.push(i.data.buffer),i;if(Array.isArray(i)){const v=[];for(const b of i)v.push(Xo(b,t));return v}if(typeof i!="object")throw new Error("can't serialize object of type "+typeof i);const n=sc(i);if(!n)throw new Error(`can't serialize object of unregistered class ${i.constructor.name}`);if(!Os[n])throw new Error(`${n} is not registered.`);const{klass:s}=Os[n],f=s.serialize?s.serialize(i,t):{};if(s.serialize){if(t&&f===t[t.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const v in i){if(!i.hasOwnProperty(v)||Os[n].omit.indexOf(v)>=0)continue;const b=i[v];f[v]=Os[n].shallow.indexOf(v)>=0?b:Xo(b,t)}i instanceof Error&&(f.message=i.message)}if(f.$name)throw new Error("$name property is reserved for worker serialization logic.");return n!=="Object"&&(f.$name=n),f}function gl(i){if(Ta(i))return i;if(Array.isArray(i))return i.map(gl);if(typeof i!="object")throw new Error("can't deserialize object of type "+typeof i);const t=sc(i)||"Object";if(!Os[t])throw new Error(`can't deserialize unregistered class ${t}`);const{klass:n}=Os[t];if(!n)throw new Error(`can't deserialize unregistered class ${t}`);if(n.deserialize)return n.deserialize(i);const s=Object.create(n.prototype);for(const f of Object.keys(i)){if(f==="$name")continue;const v=i[f];s[f]=Os[t].shallow.indexOf(f)>=0?v:gl(v)}return s}class Wa{constructor(){this.first=!0}update(t,n){const s=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=s,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=s,!0):(this.lastFloorZoom>s?(this.lastIntegerZoom=s+1,this.lastIntegerZoomTime=n):this.lastFloorZoom<s&&(this.lastIntegerZoom=s,this.lastIntegerZoomTime=n),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=s,!0))}}const dn={"Latin-1 Supplement":i=>i>=128&&i<=255,"Hangul Jamo":i=>i>=4352&&i<=4607,Khmer:i=>i>=6016&&i<=6143,"General Punctuation":i=>i>=8192&&i<=8303,"Letterlike Symbols":i=>i>=8448&&i<=8527,"Number Forms":i=>i>=8528&&i<=8591,"Miscellaneous Technical":i=>i>=8960&&i<=9215,"Control Pictures":i=>i>=9216&&i<=9279,"Optical Character Recognition":i=>i>=9280&&i<=9311,"Enclosed Alphanumerics":i=>i>=9312&&i<=9471,"Geometric Shapes":i=>i>=9632&&i<=9727,"Miscellaneous Symbols":i=>i>=9728&&i<=9983,"Miscellaneous Symbols and Arrows":i=>i>=11008&&i<=11263,"Ideographic Description Characters":i=>i>=12272&&i<=12287,"CJK Symbols and Punctuation":i=>i>=12288&&i<=12351,Hiragana:i=>i>=12352&&i<=12447,Katakana:i=>i>=12448&&i<=12543,Kanbun:i=>i>=12688&&i<=12703,"CJK Strokes":i=>i>=12736&&i<=12783,"Enclosed CJK Letters and Months":i=>i>=12800&&i<=13055,"CJK Compatibility":i=>i>=13056&&i<=13311,"Yijing Hexagram Symbols":i=>i>=19904&&i<=19967,"CJK Unified Ideographs":i=>i>=19968&&i<=40959,"Hangul Syllables":i=>i>=44032&&i<=55215,"Private Use Area":i=>i>=57344&&i<=63743,"Vertical Forms":i=>i>=65040&&i<=65055,"CJK Compatibility Forms":i=>i>=65072&&i<=65103,"Small Form Variants":i=>i>=65104&&i<=65135,"Halfwidth and Fullwidth Forms":i=>i>=65280&&i<=65519};function Bl(i){for(const t of i)if(xi(t.charCodeAt(0)))return!0;return!1}function ff(i){for(const t of i)if(!Yo(t.charCodeAt(0)))return!1;return!0}function ac(i){const t=i.map(n=>{try{return new RegExp(`\\p{sc=${n}}`,"u").source}catch{return null}}).filter(n=>n);return new RegExp(t.join("|"),"u")}const Au=ac(["Arab","Dupl","Mong","Ougr","Syrc"]);function Yo(i){return!Au.test(String.fromCodePoint(i))}const Fs=ac(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function xi(i){return!(i!==746&&i!==747&&(i<4352||!(dn["CJK Compatibility Forms"](i)&&!(i>=65097&&i<=65103)||dn["CJK Compatibility"](i)||dn["CJK Strokes"](i)||!(!dn["CJK Symbols and Punctuation"](i)||i>=12296&&i<=12305||i>=12308&&i<=12319||i===12336)||dn["Enclosed CJK Letters and Months"](i)||dn["Ideographic Description Characters"](i)||dn.Kanbun(i)||dn.Katakana(i)&&i!==12540||!(!dn["Halfwidth and Fullwidth Forms"](i)||i===65288||i===65289||i===65293||i>=65306&&i<=65310||i===65339||i===65341||i===65343||i>=65371&&i<=65503||i===65507||i>=65512&&i<=65519)||!(!dn["Small Form Variants"](i)||i>=65112&&i<=65118||i>=65123&&i<=65126)||dn["Vertical Forms"](i)||dn["Yijing Hexagram Symbols"](i)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(i))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(i))||Fs.test(String.fromCodePoint(i)))))}function Bs(i){return!(xi(i)||function(t){return!!(dn["Latin-1 Supplement"](t)&&(t===167||t===169||t===174||t===177||t===188||t===189||t===190||t===215||t===247)||dn["General Punctuation"](t)&&(t===8214||t===8224||t===8225||t===8240||t===8241||t===8251||t===8252||t===8258||t===8263||t===8264||t===8265||t===8273)||dn["Letterlike Symbols"](t)||dn["Number Forms"](t)||dn["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||t===9003||t>=9085&&t<=9114||t>=9150&&t<=9165||t===9167||t>=9169&&t<=9179||t>=9186&&t<=9215)||dn["Control Pictures"](t)&&t!==9251||dn["Optical Character Recognition"](t)||dn["Enclosed Alphanumerics"](t)||dn["Geometric Shapes"](t)||dn["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||dn["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||dn["CJK Symbols and Punctuation"](t)||dn.Katakana(t)||dn["Private Use Area"](t)||dn["CJK Compatibility Forms"](t)||dn["Small Form Variants"](t)||dn["Halfwidth and Fullwidth Forms"](t)||t===8734||t===8756||t===8757||t>=9984&&t<=10087||t>=10102&&t<=10131||t===65532||t===65533)}(i))}const Nl=ac(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function lc(i){return Nl.test(String.fromCodePoint(i))}function nu(i,t){return!(!t&&lc(i)||i>=2304&&i<=3583||i>=3840&&i<=4255||dn.Khmer(i))}function oa(i){for(const t of i)if(lc(t.charCodeAt(0)))return!0;return!1}const $l=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(i){this.pluginStatus=i.pluginStatus,this.pluginURL=i.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(i){if($l.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=i.applyArabicShaping,this.processBidirectionalText=i.processBidirectionalText,this.processStyledBidirectionalText=i.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(i,t){return u(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(i.pluginStatus!=="loading")return this.setState(i),i;const n=i.pluginURL,s=new Promise(v=>{this.loadScriptResolve=v});t(n);const f=new Promise(v=>setTimeout(()=>v(),this.TIMEOUT));if(yield Promise.race([s,f]),this.isParsed()){const v={pluginStatus:"loaded",pluginURL:n};return this.setState(v),v}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${n}`)})}};class si{constructor(t,n){this.zoom=t,n?(this.now=n.now,this.fadeDuration=n.fadeDuration,this.zoomHistory=n.zoomHistory,this.transition=n.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Wa,this.transition={})}isSupportedScript(t){return function(n,s){for(const f of n)if(!nu(f.charCodeAt(0),s))return!1;return!0}(t,$l.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const t=this.zoom,n=t-Math.floor(t),s=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:n+(1-n)*s}:{fromScale:.5,toScale:1,t:1-(1-s)*n}}}class uc{constructor(t,n){this.property=t,this.value=n,this.expression=function(s,f){if(Xu(s))return new Pu(s,f);if(cl(s)){const v=Cu(s,f);if(v.result==="error")throw new Error(v.value.map(b=>`${b.key}: ${b.message}`).join(", "));return v.value}{let v=s;return f.type==="color"&&typeof s=="string"?v=en.parse(s):f.type!=="padding"||typeof s!="number"&&!Array.isArray(s)?f.type!=="numberArray"||typeof s!="number"&&!Array.isArray(s)?f.type!=="colorArray"||typeof s!="string"&&!Array.isArray(s)?f.type==="variableAnchorOffsetCollection"&&Array.isArray(s)?v=Fo.parse(s):f.type==="projectionDefinition"&&typeof s=="string"&&(v=ls.parse(s)):v=Ei.parse(s):v=On.parse(s):v=hi.parse(s),{kind:"constant",evaluate:()=>v}}}(n===void 0?t.specification.default:n,t.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(t,n,s){return this.property.possiblyEvaluate(this,t,n,s)}}class Ha{constructor(t){this.property=t,this.value=new uc(t,void 0)}transitioned(t,n){return new zd(this.property,this.value,n,Tr({},t.transition,this.transition),t.now)}untransitioned(){return new zd(this.property,this.value,null,{},0)}}class yl{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return Cr(this._values[t].value.value)}setValue(t,n){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new Ha(this._values[t].property)),this._values[t].value=new uc(this._values[t].property,n===null?void 0:Cr(n))}getTransition(t){return Cr(this._values[t].transition)}setTransition(t,n){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new Ha(this._values[t].property)),this._values[t].transition=Cr(n)||void 0}serialize(){const t={};for(const n of Object.keys(this._values)){const s=this.getValue(n);s!==void 0&&(t[n]=s);const f=this.getTransition(n);f!==void 0&&(t[`${n}-transition`]=f)}return t}transitioned(t,n){const s=new Gc(this._properties);for(const f of Object.keys(this._values))s._values[f]=this._values[f].transitioned(t,n._values[f]);return s}untransitioned(){const t=new Gc(this._properties);for(const n of Object.keys(this._values))t._values[n]=this._values[n].untransitioned();return t}}class zd{constructor(t,n,s,f,v){this.property=t,this.value=n,this.begin=v+f.delay||0,this.end=this.begin+f.duration||0,t.specification.transition&&(f.delay||f.duration)&&(this.prior=s)}possiblyEvaluate(t,n,s){const f=t.now||0,v=this.value.possiblyEvaluate(t,n,s),b=this.prior;if(b){if(f>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(f<this.begin)return b.possiblyEvaluate(t,n,s);{const S=(f-this.begin)/(this.end-this.begin);return this.property.interpolate(b.possiblyEvaluate(t,n,s),v,ht(S))}}return v}}class Gc{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,n,s){const f=new Wc(this._properties);for(const v of Object.keys(this._values))f._values[v]=this._values[v].possiblyEvaluate(t,n,s);return f}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class cc{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}hasValue(t){return this._values[t].value!==void 0}getValue(t){return Cr(this._values[t].value)}setValue(t,n){this._values[t]=new uc(this._values[t].property,n===null?void 0:Cr(n))}serialize(){const t={};for(const n of Object.keys(this._values)){const s=this.getValue(n);s!==void 0&&(t[n]=s)}return t}possiblyEvaluate(t,n,s){const f=new Wc(this._properties);for(const v of Object.keys(this._values))f._values[v]=this._values[v].possiblyEvaluate(t,n,s);return f}}class gs{constructor(t,n,s){this.property=t,this.value=n,this.parameters=s}isConstant(){return this.value.kind==="constant"}constantOr(t){return this.value.kind==="constant"?this.value.value:t}evaluate(t,n,s,f){return this.property.evaluate(this.value,this.parameters,t,n,s,f)}}class Wc{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class fr{constructor(t){this.specification=t}possiblyEvaluate(t,n){if(t.isDataDriven())throw new Error("Value should not be data driven");return t.expression.evaluate(n)}interpolate(t,n,s){const f=ds[this.specification.type];return f?f(t,n,s):t}}class Vr{constructor(t,n){this.specification=t,this.overrides=n}possiblyEvaluate(t,n,s,f){return new gs(this,t.expression.kind==="constant"||t.expression.kind==="camera"?{kind:"constant",value:t.expression.evaluate(n,null,{},s,f)}:t.expression,n)}interpolate(t,n,s){if(t.value.kind!=="constant"||n.value.kind!=="constant")return t;if(t.value.value===void 0||n.value.value===void 0)return new gs(this,{kind:"constant",value:void 0},t.parameters);const f=ds[this.specification.type];if(f){const v=f(t.value.value,n.value.value,s);return new gs(this,{kind:"constant",value:v},t.parameters)}return t}evaluate(t,n,s,f,v,b){return t.kind==="constant"?t.value:t.evaluate(n,s,f,v,b)}}class iu extends Vr{possiblyEvaluate(t,n,s,f){if(t.value===void 0)return new gs(this,{kind:"constant",value:void 0},n);if(t.expression.kind==="constant"){const v=t.expression.evaluate(n,null,{},s,f),b=t.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,S=this._calculate(b,b,b,n);return new gs(this,{kind:"constant",value:S},n)}if(t.expression.kind==="camera"){const v=this._calculate(t.expression.evaluate({zoom:n.zoom-1}),t.expression.evaluate({zoom:n.zoom}),t.expression.evaluate({zoom:n.zoom+1}),n);return new gs(this,{kind:"constant",value:v},n)}return new gs(this,t.expression,n)}evaluate(t,n,s,f,v,b){if(t.kind==="source"){const S=t.evaluate(n,s,f,v,b);return this._calculate(S,S,S,n)}return t.kind==="composite"?this._calculate(t.evaluate({zoom:Math.floor(n.zoom)-1},s,f),t.evaluate({zoom:Math.floor(n.zoom)},s,f),t.evaluate({zoom:Math.floor(n.zoom)+1},s,f),n):t.value}_calculate(t,n,s,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:t,to:n}:{from:s,to:n}}interpolate(t){return t}}class Ns{constructor(t){this.specification=t}possiblyEvaluate(t,n,s,f){if(t.value!==void 0){if(t.expression.kind==="constant"){const v=t.expression.evaluate(n,null,{},s,f);return this._calculate(v,v,v,n)}return this._calculate(t.expression.evaluate(new si(Math.floor(n.zoom-1),n)),t.expression.evaluate(new si(Math.floor(n.zoom),n)),t.expression.evaluate(new si(Math.floor(n.zoom+1),n)),n)}}_calculate(t,n,s,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:t,to:n}:{from:s,to:n}}interpolate(t){return t}}class jl{constructor(t){this.specification=t}possiblyEvaluate(t,n,s,f){return!!t.expression.evaluate(n,null,{},s,f)}interpolate(){return!1}}class Di{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const n in t){const s=t[n];s.specification.overridable&&this.overridableProperties.push(n);const f=this.defaultPropertyValues[n]=new uc(s,void 0),v=this.defaultTransitionablePropertyValues[n]=new Ha(s);this.defaultTransitioningPropertyValues[n]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[n]=f.possiblyEvaluate({})}}}ur("DataDrivenProperty",Vr),ur("DataConstantProperty",fr),ur("CrossFadedDataDrivenProperty",iu),ur("CrossFadedProperty",Ns),ur("ColorRampProperty",jl);const _l="-transition";class $s extends Ve{constructor(t,n){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1},t.type!=="custom"&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,t.type!=="background"&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),n.layout&&(this._unevaluatedLayout=new cc(n.layout)),n.paint)){this._transitionablePaint=new yl(n.paint);for(const s in t.paint)this.setPaintProperty(s,t.paint[s],{validate:!1});for(const s in t.layout)this.setLayoutProperty(s,t.layout[s],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Wc(n.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return t==="visibility"?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,n,s={}){n!=null&&this._validate(_h,`layers.${this.id}.layout.${t}`,t,n,s)||(t!=="visibility"?this._unevaluatedLayout.setValue(t,n):this.visibility=n)}getPaintProperty(t){return t.endsWith(_l)?this._transitionablePaint.getTransition(t.slice(0,-11)):this._transitionablePaint.getValue(t)}setPaintProperty(t,n,s={}){if(n!=null&&this._validate(yh,`layers.${this.id}.paint.${t}`,t,n,s))return!1;if(t.endsWith(_l))return this._transitionablePaint.setTransition(t.slice(0,-11),n||void 0),!1;{const f=this._transitionablePaint._values[t],v=f.property.specification["property-type"]==="cross-faded-data-driven",b=f.value.isDataDriven(),S=f.value;this._transitionablePaint.setValue(t,n),this._handleSpecialPaintPropertyUpdate(t);const k=this._transitionablePaint._values[t].value;return k.isDataDriven()||b||v||this._handleOverridablePaintPropertyUpdate(t,S,k)}}_handleSpecialPaintPropertyUpdate(t){}_handleOverridablePaintPropertyUpdate(t,n,s){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||this.visibility==="none"}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,n){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,n)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,n)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),Jr(t,(n,s)=>!(n===void 0||s==="layout"&&!Object.keys(n).length||s==="paint"&&!Object.keys(n).length))}_validate(t,n,s,f,v={}){return(!v||v.validate!==!1)&&ru(this,t.call(ic,{key:n,layerType:this.type,objectKey:s,value:f,styleSpec:pe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const n=this.paint.get(t);if(n instanceof gs&&Ll(n.property.specification)&&(n.value.kind==="source"||n.value.kind==="composite")&&n.value.isStateDependent)return!0}return!1}}const jo={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class sa{constructor(t,n){this._structArray=t,this._pos1=n*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class jn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,n){return t._trim(),n&&(t.isTransferred=!0,n.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const n=Object.create(this.prototype);return n.arrayBuffer=t.arrayBuffer,n.length=t.length,n.capacity=t.arrayBuffer.byteLength/n.bytesPerElement,n._refreshViews(),n}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const n=this.uint8;this._refreshViews(),n&&this.uint8.set(n)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function ai(i,t=1){let n=0,s=0;return{members:i.map(f=>{const v=jo[f.type].BYTES_PER_ELEMENT,b=n=Ru(n,Math.max(t,v)),S=f.components||1;return s=Math.max(s,v),n+=v*S,{name:f.name,type:f.type,components:S,offset:b}}),size:Ru(n,Math.max(s,t)),alignment:t}}function Ru(i,t){return Math.ceil(i/t)*t}class zu extends jn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,n){const s=this.length;return this.resize(s+1),this.emplace(s,t,n)}emplace(t,n,s){const f=2*t;return this.int16[f+0]=n,this.int16[f+1]=s,t}}zu.prototype.bytesPerElement=4,ur("StructArrayLayout2i4",zu);class Ca extends jn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,n,s){const f=this.length;return this.resize(f+1),this.emplace(f,t,n,s)}emplace(t,n,s,f){const v=3*t;return this.int16[v+0]=n,this.int16[v+1]=s,this.int16[v+2]=f,t}}Ca.prototype.bytesPerElement=6,ur("StructArrayLayout3i6",Ca);class Uo extends jn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,n,s,f){const v=this.length;return this.resize(v+1),this.emplace(v,t,n,s,f)}emplace(t,n,s,f,v){const b=4*t;return this.int16[b+0]=n,this.int16[b+1]=s,this.int16[b+2]=f,this.int16[b+3]=v,t}}Uo.prototype.bytesPerElement=8,ur("StructArrayLayout4i8",Uo);class Hc extends jn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,n,s,f,v,b){const S=this.length;return this.resize(S+1),this.emplace(S,t,n,s,f,v,b)}emplace(t,n,s,f,v,b,S){const k=6*t;return this.int16[k+0]=n,this.int16[k+1]=s,this.int16[k+2]=f,this.int16[k+3]=v,this.int16[k+4]=b,this.int16[k+5]=S,t}}Hc.prototype.bytesPerElement=12,ur("StructArrayLayout2i4i12",Hc);class Xh extends jn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,n,s,f,v,b){const S=this.length;return this.resize(S+1),this.emplace(S,t,n,s,f,v,b)}emplace(t,n,s,f,v,b,S){const k=4*t,R=8*t;return this.int16[k+0]=n,this.int16[k+1]=s,this.uint8[R+4]=f,this.uint8[R+5]=v,this.uint8[R+6]=b,this.uint8[R+7]=S,t}}Xh.prototype.bytesPerElement=8,ur("StructArrayLayout2i4ub8",Xh);class aa extends jn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,n){const s=this.length;return this.resize(s+1),this.emplace(s,t,n)}emplace(t,n,s){const f=2*t;return this.float32[f+0]=n,this.float32[f+1]=s,t}}aa.prototype.bytesPerElement=8,ur("StructArrayLayout2f8",aa);class la extends jn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,n,s,f,v,b,S,k,R,F){const j=this.length;return this.resize(j+1),this.emplace(j,t,n,s,f,v,b,S,k,R,F)}emplace(t,n,s,f,v,b,S,k,R,F,j){const H=10*t;return this.uint16[H+0]=n,this.uint16[H+1]=s,this.uint16[H+2]=f,this.uint16[H+3]=v,this.uint16[H+4]=b,this.uint16[H+5]=S,this.uint16[H+6]=k,this.uint16[H+7]=R,this.uint16[H+8]=F,this.uint16[H+9]=j,t}}la.prototype.bytesPerElement=20,ur("StructArrayLayout10ui20",la);class g extends jn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,n,s,f,v,b,S,k,R,F,j,H){const X=this.length;return this.resize(X+1),this.emplace(X,t,n,s,f,v,b,S,k,R,F,j,H)}emplace(t,n,s,f,v,b,S,k,R,F,j,H,X){const ee=12*t;return this.int16[ee+0]=n,this.int16[ee+1]=s,this.int16[ee+2]=f,this.int16[ee+3]=v,this.uint16[ee+4]=b,this.uint16[ee+5]=S,this.uint16[ee+6]=k,this.uint16[ee+7]=R,this.int16[ee+8]=F,this.int16[ee+9]=j,this.int16[ee+10]=H,this.int16[ee+11]=X,t}}g.prototype.bytesPerElement=24,ur("StructArrayLayout4i4ui4i24",g);class e extends jn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,n,s){const f=this.length;return this.resize(f+1),this.emplace(f,t,n,s)}emplace(t,n,s,f){const v=3*t;return this.float32[v+0]=n,this.float32[v+1]=s,this.float32[v+2]=f,t}}e.prototype.bytesPerElement=12,ur("StructArrayLayout3f12",e);class r extends jn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const n=this.length;return this.resize(n+1),this.emplace(n,t)}emplace(t,n){return this.uint32[1*t+0]=n,t}}r.prototype.bytesPerElement=4,ur("StructArrayLayout1ul4",r);class a extends jn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,n,s,f,v,b,S,k,R){const F=this.length;return this.resize(F+1),this.emplace(F,t,n,s,f,v,b,S,k,R)}emplace(t,n,s,f,v,b,S,k,R,F){const j=10*t,H=5*t;return this.int16[j+0]=n,this.int16[j+1]=s,this.int16[j+2]=f,this.int16[j+3]=v,this.int16[j+4]=b,this.int16[j+5]=S,this.uint32[H+3]=k,this.uint16[j+8]=R,this.uint16[j+9]=F,t}}a.prototype.bytesPerElement=20,ur("StructArrayLayout6i1ul2ui20",a);class d extends jn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,n,s,f,v,b){const S=this.length;return this.resize(S+1),this.emplace(S,t,n,s,f,v,b)}emplace(t,n,s,f,v,b,S){const k=6*t;return this.int16[k+0]=n,this.int16[k+1]=s,this.int16[k+2]=f,this.int16[k+3]=v,this.int16[k+4]=b,this.int16[k+5]=S,t}}d.prototype.bytesPerElement=12,ur("StructArrayLayout2i2i2i12",d);class y extends jn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,n,s,f,v){const b=this.length;return this.resize(b+1),this.emplace(b,t,n,s,f,v)}emplace(t,n,s,f,v,b){const S=4*t,k=8*t;return this.float32[S+0]=n,this.float32[S+1]=s,this.float32[S+2]=f,this.int16[k+6]=v,this.int16[k+7]=b,t}}y.prototype.bytesPerElement=16,ur("StructArrayLayout2f1f2i16",y);class w extends jn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,n,s,f,v,b){const S=this.length;return this.resize(S+1),this.emplace(S,t,n,s,f,v,b)}emplace(t,n,s,f,v,b,S){const k=16*t,R=4*t,F=8*t;return this.uint8[k+0]=n,this.uint8[k+1]=s,this.float32[R+1]=f,this.float32[R+2]=v,this.int16[F+6]=b,this.int16[F+7]=S,t}}w.prototype.bytesPerElement=16,ur("StructArrayLayout2ub2f2i16",w);class E extends jn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,n,s){const f=this.length;return this.resize(f+1),this.emplace(f,t,n,s)}emplace(t,n,s,f){const v=3*t;return this.uint16[v+0]=n,this.uint16[v+1]=s,this.uint16[v+2]=f,t}}E.prototype.bytesPerElement=6,ur("StructArrayLayout3ui6",E);class A extends jn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,n,s,f,v,b,S,k,R,F,j,H,X,ee,oe,ye,Pe){const Ze=this.length;return this.resize(Ze+1),this.emplace(Ze,t,n,s,f,v,b,S,k,R,F,j,H,X,ee,oe,ye,Pe)}emplace(t,n,s,f,v,b,S,k,R,F,j,H,X,ee,oe,ye,Pe,Ze){const ze=24*t,q=12*t,me=48*t;return this.int16[ze+0]=n,this.int16[ze+1]=s,this.uint16[ze+2]=f,this.uint16[ze+3]=v,this.uint32[q+2]=b,this.uint32[q+3]=S,this.uint32[q+4]=k,this.uint16[ze+10]=R,this.uint16[ze+11]=F,this.uint16[ze+12]=j,this.float32[q+7]=H,this.float32[q+8]=X,this.uint8[me+36]=ee,this.uint8[me+37]=oe,this.uint8[me+38]=ye,this.uint32[q+10]=Pe,this.int16[ze+22]=Ze,t}}A.prototype.bytesPerElement=48,ur("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",A);class O extends jn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,n,s,f,v,b,S,k,R,F,j,H,X,ee,oe,ye,Pe,Ze,ze,q,me,Be,mt,Ut,wt,kt,Xt,Zt){const Kt=this.length;return this.resize(Kt+1),this.emplace(Kt,t,n,s,f,v,b,S,k,R,F,j,H,X,ee,oe,ye,Pe,Ze,ze,q,me,Be,mt,Ut,wt,kt,Xt,Zt)}emplace(t,n,s,f,v,b,S,k,R,F,j,H,X,ee,oe,ye,Pe,Ze,ze,q,me,Be,mt,Ut,wt,kt,Xt,Zt,Kt){const zt=32*t,Ir=16*t;return this.int16[zt+0]=n,this.int16[zt+1]=s,this.int16[zt+2]=f,this.int16[zt+3]=v,this.int16[zt+4]=b,this.int16[zt+5]=S,this.int16[zt+6]=k,this.int16[zt+7]=R,this.uint16[zt+8]=F,this.uint16[zt+9]=j,this.uint16[zt+10]=H,this.uint16[zt+11]=X,this.uint16[zt+12]=ee,this.uint16[zt+13]=oe,this.uint16[zt+14]=ye,this.uint16[zt+15]=Pe,this.uint16[zt+16]=Ze,this.uint16[zt+17]=ze,this.uint16[zt+18]=q,this.uint16[zt+19]=me,this.uint16[zt+20]=Be,this.uint16[zt+21]=mt,this.uint16[zt+22]=Ut,this.uint32[Ir+12]=wt,this.float32[Ir+13]=kt,this.float32[Ir+14]=Xt,this.uint16[zt+30]=Zt,this.uint16[zt+31]=Kt,t}}O.prototype.bytesPerElement=64,ur("StructArrayLayout8i15ui1ul2f2ui64",O);class N extends jn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const n=this.length;return this.resize(n+1),this.emplace(n,t)}emplace(t,n){return this.float32[1*t+0]=n,t}}N.prototype.bytesPerElement=4,ur("StructArrayLayout1f4",N);class W extends jn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,n,s){const f=this.length;return this.resize(f+1),this.emplace(f,t,n,s)}emplace(t,n,s,f){const v=3*t;return this.uint16[6*t+0]=n,this.float32[v+1]=s,this.float32[v+2]=f,t}}W.prototype.bytesPerElement=12,ur("StructArrayLayout1ui2f12",W);class G extends jn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,n,s){const f=this.length;return this.resize(f+1),this.emplace(f,t,n,s)}emplace(t,n,s,f){const v=4*t;return this.uint32[2*t+0]=n,this.uint16[v+2]=s,this.uint16[v+3]=f,t}}G.prototype.bytesPerElement=8,ur("StructArrayLayout1ul2ui8",G);class Q extends jn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,n){const s=this.length;return this.resize(s+1),this.emplace(s,t,n)}emplace(t,n,s){const f=2*t;return this.uint16[f+0]=n,this.uint16[f+1]=s,t}}Q.prototype.bytesPerElement=4,ur("StructArrayLayout2ui4",Q);class ie extends jn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const n=this.length;return this.resize(n+1),this.emplace(n,t)}emplace(t,n){return this.uint16[1*t+0]=n,t}}ie.prototype.bytesPerElement=2,ur("StructArrayLayout1ui2",ie);class be extends jn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,n,s,f){const v=this.length;return this.resize(v+1),this.emplace(v,t,n,s,f)}emplace(t,n,s,f,v){const b=4*t;return this.float32[b+0]=n,this.float32[b+1]=s,this.float32[b+2]=f,this.float32[b+3]=v,t}}be.prototype.bytesPerElement=16,ur("StructArrayLayout4f16",be);class xe extends sa{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new we(this.anchorPointX,this.anchorPointY)}}xe.prototype.size=20;class Se extends a{get(t){return new xe(this,t)}}ur("CollisionBoxArray",Se);class Ae extends sa{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(t){this._structArray.uint8[this._pos1+37]=t}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(t){this._structArray.uint8[this._pos1+38]=t}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(t){this._structArray.uint32[this._pos4+10]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Ae.prototype.size=48;class De extends A{get(t){return new Ae(this,t)}}ur("PlacedSymbolArray",De);class ke extends sa{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(t){this._structArray.uint32[this._pos4+12]=t}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}ke.prototype.size=64;class Oe extends O{get(t){return new ke(this,t)}}ur("SymbolInstanceArray",Oe);class $e extends N{getoffsetX(t){return this.float32[1*t+0]}}ur("GlyphOffsetArray",$e);class Ue extends Ca{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}ur("SymbolLineVertexArray",Ue);class lt extends sa{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}lt.prototype.size=12;class Mt extends W{get(t){return new lt(this,t)}}ur("TextAnchorOffsetArray",Mt);class Qe extends sa{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Qe.prototype.size=8;class dt extends G{get(t){return new Qe(this,t)}}ur("FeatureIndexArray",dt);class Pt extends zu{}class er extends zu{}class tr extends zu{}class Bt extends Hc{}class vr extends Xh{}class Gr extends aa{}class In extends la{}class mi extends g{}class ni extends e{}class ki extends r{}class Ai extends d{}class Mn extends w{}class Pn extends E{}class qi extends Q{}const xo=ai([{name:"a_pos",components:2,type:"Int16"}],4),{members:lo}=xo;class Rn{constructor(t=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=t}prepareSegment(t,n,s,f){const v=this.segments[this.segments.length-1];return t>Rn.MAX_VERTEX_ARRAY_LENGTH&&jr(`Max vertices per segment is ${Rn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Rn.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!v||v.vertexLength+t>Rn.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==f?this.createNewSegment(n,s,f):v}createNewSegment(t,n,s){const f={vertexOffset:t.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0,vaos:{}};return s!==void 0&&(f.sortKey=s),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(f),f}getOrCreateLatestSegment(t,n,s){return this.prepareSegment(0,t,n,s)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const t of this.segments)for(const n in t.vaos)t.vaos[n].destroy()}static simpleSegment(t,n,s,f){return new Rn([{vertexOffset:t,primitiveOffset:n,vertexLength:s,primitiveLength:f,vaos:{},sortKey:0}])}}function vl(i,t){return 256*(i=Rt(Math.floor(i),0,255))+Rt(Math.floor(t),0,255)}Rn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ur("SegmentVector",Rn);const ua=ai([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Pa,Ul,ca,ou={exports:{}},js={exports:{}},Us={exports:{}},Vl=function(){if(ca)return ou.exports;ca=1;var i=(Pa||(Pa=1,js.exports=function(n,s){var f,v,b,S,k,R,F,j;for(v=n.length-(f=3&n.length),b=s,k=3432918353,R=461845907,j=0;j<v;)F=255&n.charCodeAt(j)|(255&n.charCodeAt(++j))<<8|(255&n.charCodeAt(++j))<<16|(255&n.charCodeAt(++j))<<24,++j,b=27492+(65535&(S=5*(65535&(b=(b^=F=(65535&(F=(F=(65535&F)*k+(((F>>>16)*k&65535)<<16)&4294967295)<<15|F>>>17))*R+(((F>>>16)*R&65535)<<16)&4294967295)<<13|b>>>19))+((5*(b>>>16)&65535)<<16)&4294967295))+((58964+(S>>>16)&65535)<<16);switch(F=0,f){case 3:F^=(255&n.charCodeAt(j+2))<<16;case 2:F^=(255&n.charCodeAt(j+1))<<8;case 1:b^=F=(65535&(F=(F=(65535&(F^=255&n.charCodeAt(j)))*k+(((F>>>16)*k&65535)<<16)&4294967295)<<15|F>>>17))*R+(((F>>>16)*R&65535)<<16)&4294967295}return b^=n.length,b=2246822507*(65535&(b^=b>>>16))+((2246822507*(b>>>16)&65535)<<16)&4294967295,b=3266489909*(65535&(b^=b>>>13))+((3266489909*(b>>>16)&65535)<<16)&4294967295,(b^=b>>>16)>>>0}),js.exports),t=(Ul||(Ul=1,Us.exports=function(n,s){for(var f,v=n.length,b=s^v,S=0;v>=4;)f=1540483477*(65535&(f=255&n.charCodeAt(S)|(255&n.charCodeAt(++S))<<8|(255&n.charCodeAt(++S))<<16|(255&n.charCodeAt(++S))<<24))+((1540483477*(f>>>16)&65535)<<16),b=1540483477*(65535&b)+((1540483477*(b>>>16)&65535)<<16)^(f=1540483477*(65535&(f^=f>>>24))+((1540483477*(f>>>16)&65535)<<16)),v-=4,++S;switch(v){case 3:b^=(255&n.charCodeAt(S+2))<<16;case 2:b^=(255&n.charCodeAt(S+1))<<8;case 1:b=1540483477*(65535&(b^=255&n.charCodeAt(S)))+((1540483477*(b>>>16)&65535)<<16)}return b=1540483477*(65535&(b^=b>>>13))+((1540483477*(b>>>16)&65535)<<16),(b^=b>>>15)>>>0}),Us.exports);return ou.exports=i,ou.exports.murmur3=i,ou.exports.murmur2=t,ou.exports}(),Ea=te(Vl);class su{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,n,s,f){this.ids.push(uo(t)),this.positions.push(n,s,f)}getPositions(t){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const n=uo(t);let s=0,f=this.ids.length-1;for(;s<f;){const b=s+f>>1;this.ids[b]>=n?f=b:s=b+1}const v=[];for(;this.ids[s]===n;)v.push({index:this.positions[3*s],start:this.positions[3*s+1],end:this.positions[3*s+2]}),s++;return v}static serialize(t,n){const s=new Float64Array(t.ids),f=new Uint32Array(t.positions);return co(s,f,0,s.length-1),n&&n.push(s.buffer,f.buffer),{ids:s,positions:f}}static deserialize(t){const n=new su;return n.ids=t.ids,n.positions=t.positions,n.indexed=!0,n}}function uo(i){const t=+i;return!isNaN(t)&&t<=Number.MAX_SAFE_INTEGER?t:Ea(String(i))}function co(i,t,n,s){for(;n<s;){const f=i[n+s>>1];let v=n-1,b=s+1;for(;;){do v++;while(i[v]<f);do b--;while(i[b]>f);if(v>=b)break;ys(i,v,b),ys(t,3*v,3*b),ys(t,3*v+1,3*b+1),ys(t,3*v+2,3*b+2)}b-n<s-b?(co(i,t,n,b),n=b+1):(co(i,t,b+1,s),s=b)}}function ys(i,t,n){const s=i[t];i[t]=i[n],i[n]=s}ur("FeaturePositionMap",su);class bi{constructor(t,n){this.gl=t.gl,this.location=n}}class Yh extends bi{constructor(t,n){super(t,n),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}class Ld extends bi{constructor(t,n){super(t,n),this.current=[0,0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}class Qh extends bi{constructor(t,n){super(t,n),this.current=en.transparent}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}const Vs=new Float32Array(16);function Ia(i){return[vl(255*i.r,255*i.g),vl(255*i.b,255*i.a)]}class Lu{constructor(t,n,s){this.value=t,this.uniformNames=n.map(f=>`u_${f}`),this.type=s}setUniform(t,n,s){t.set(s.constantOr(this.value))}getBinding(t,n,s){return this.type==="color"?new Qh(t,n):new Yh(t,n)}}class qa{constructor(t,n){this.uniformNames=n.map(s=>`u_${s}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,n){this.pixelRatioFrom=n.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=n.tlbr,this.patternTo=t.tlbr}setUniform(t,n,s,f){const v=f==="u_pattern_to"?this.patternTo:f==="u_pattern_from"?this.patternFrom:f==="u_pixel_ratio_to"?this.pixelRatioTo:f==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&t.set(v)}getBinding(t,n,s){return s.substr(0,9)==="u_pattern"?new Ld(t,n):new Yh(t,n)}}class Ma{constructor(t,n,s,f){this.expression=t,this.type=s,this.maxValue=0,this.paintVertexAttributes=n.map(v=>({name:`a_${v}`,type:"Float32",components:s==="color"?2:1,offset:0})),this.paintVertexArray=new f}populatePaintArray(t,n,s,f,v){const b=this.paintVertexArray.length,S=this.expression.evaluate(new si(0),n,{},f,[],v);this.paintVertexArray.resize(t),this._setPaintValue(b,t,S)}updatePaintArray(t,n,s,f){const v=this.expression.evaluate({zoom:0},s,f);this._setPaintValue(t,n,v)}_setPaintValue(t,n,s){if(this.type==="color"){const f=Ia(s);for(let v=t;v<n;v++)this.paintVertexArray.emplace(v,f[0],f[1])}else{for(let f=t;f<n;f++)this.paintVertexArray.emplace(f,s);this.maxValue=Math.max(this.maxValue,Math.abs(s))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Qo{constructor(t,n,s,f,v,b){this.expression=t,this.uniformNames=n.map(S=>`u_${S}_t`),this.type=s,this.useIntegerZoom=f,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=n.map(S=>({name:`a_${S}`,type:"Float32",components:s==="color"?4:2,offset:0})),this.paintVertexArray=new b}populatePaintArray(t,n,s,f,v){const b=this.expression.evaluate(new si(this.zoom),n,{},f,[],v),S=this.expression.evaluate(new si(this.zoom+1),n,{},f,[],v),k=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(k,t,b,S)}updatePaintArray(t,n,s,f){const v=this.expression.evaluate({zoom:this.zoom},s,f),b=this.expression.evaluate({zoom:this.zoom+1},s,f);this._setPaintValue(t,n,v,b)}_setPaintValue(t,n,s,f){if(this.type==="color"){const v=Ia(s),b=Ia(f);for(let S=t;S<n;S++)this.paintVertexArray.emplace(S,v[0],v[1],b[0],b[1])}else{for(let v=t;v<n;v++)this.paintVertexArray.emplace(v,s,f);this.maxValue=Math.max(this.maxValue,Math.abs(s),Math.abs(f))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,n){const s=this.useIntegerZoom?Math.floor(n.zoom):n.zoom,f=Rt(this.expression.interpolationFactor(s,this.zoom,this.zoom+1),0,1);t.set(f)}getBinding(t,n,s){return new Yh(t,n)}}class bo{constructor(t,n,s,f,v,b){this.expression=t,this.type=n,this.useIntegerZoom=s,this.zoom=f,this.layerId=b,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(t,n,s){const f=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(f,t,n.patterns&&n.patterns[this.layerId],s)}updatePaintArray(t,n,s,f,v){this._setPaintValues(t,n,s.patterns&&s.patterns[this.layerId],v)}_setPaintValues(t,n,s,f){if(!f||!s)return;const{min:v,mid:b,max:S}=s,k=f[v],R=f[b],F=f[S];if(k&&R&&F)for(let j=t;j<n;j++)this.zoomInPaintVertexArray.emplace(j,R.tl[0],R.tl[1],R.br[0],R.br[1],k.tl[0],k.tl[1],k.br[0],k.br[1],R.pixelRatio,k.pixelRatio),this.zoomOutPaintVertexArray.emplace(j,R.tl[0],R.tl[1],R.br[0],R.br[1],F.tl[0],F.tl[1],F.br[0],F.br[1],R.pixelRatio,F.pixelRatio)}upload(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,ua.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,ua.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class hc{constructor(t,n,s){this.binders={},this._buffers=[];const f=[];for(const v in t.paint._values){if(!s(v))continue;const b=t.paint.get(v);if(!(b instanceof gs&&Ll(b.property.specification)))continue;const S=vh(v,t.type),k=b.value,R=b.property.specification.type,F=b.property.useIntegerZoom,j=b.property.specification["property-type"],H=j==="cross-faded"||j==="cross-faded-data-driven";if(k.kind==="constant")this.binders[v]=H?new qa(k.value,S):new Lu(k.value,S,R),f.push(`/u_${v}`);else if(k.kind==="source"||H){const X=qc(v,R,"source");this.binders[v]=H?new bo(k,R,F,n,X,t.id):new Ma(k,S,R,X),f.push(`/a_${v}`)}else{const X=qc(v,R,"composite");this.binders[v]=new Qo(k,S,R,F,n,X),f.push(`/z_${v}`)}}this.cacheKey=f.sort().join("")}getMaxValue(t){const n=this.binders[t];return n instanceof Ma||n instanceof Qo?n.maxValue:0}populatePaintArrays(t,n,s,f,v){for(const b in this.binders){const S=this.binders[b];(S instanceof Ma||S instanceof Qo||S instanceof bo)&&S.populatePaintArray(t,n,s,f,v)}}setConstantPatternPositions(t,n){for(const s in this.binders){const f=this.binders[s];f instanceof qa&&f.setConstantPatternPositions(t,n)}}updatePaintArrays(t,n,s,f,v){let b=!1;for(const S in t){const k=n.getPositions(S);for(const R of k){const F=s.feature(R.index);for(const j in this.binders){const H=this.binders[j];if((H instanceof Ma||H instanceof Qo||H instanceof bo)&&H.expression.isStateDependent===!0){const X=f.paint.get(j);H.expression=X.value,H.updatePaintArray(R.start,R.end,F,t[S],v),b=!0}}}}return b}defines(){const t=[];for(const n in this.binders){const s=this.binders[n];(s instanceof Lu||s instanceof qa)&&t.push(...s.uniformNames.map(f=>`#define HAS_UNIFORM_${f}`))}return t}getBinderAttributes(){const t=[];for(const n in this.binders){const s=this.binders[n];if(s instanceof Ma||s instanceof Qo)for(let f=0;f<s.paintVertexAttributes.length;f++)t.push(s.paintVertexAttributes[f].name);else if(s instanceof bo)for(let f=0;f<ua.members.length;f++)t.push(ua.members[f].name)}return t}getBinderUniforms(){const t=[];for(const n in this.binders){const s=this.binders[n];if(s instanceof Lu||s instanceof qa||s instanceof Qo)for(const f of s.uniformNames)t.push(f)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,n){const s=[];for(const f in this.binders){const v=this.binders[f];if(v instanceof Lu||v instanceof qa||v instanceof Qo){for(const b of v.uniformNames)if(n[b]){const S=v.getBinding(t,n[b],b);s.push({name:b,property:f,binding:S})}}}return s}setUniforms(t,n,s,f){for(const{name:v,property:b,binding:S}of n)this.binders[b].setUniform(S,f,s.get(b),v)}updatePaintBuffers(t){this._buffers=[];for(const n in this.binders){const s=this.binders[n];if(t&&s instanceof bo){const f=t.fromScale===2?s.zoomInPaintVertexBuffer:s.zoomOutPaintVertexBuffer;f&&this._buffers.push(f)}else(s instanceof Ma||s instanceof Qo)&&s.paintVertexBuffer&&this._buffers.push(s.paintVertexBuffer)}}upload(t){for(const n in this.binders){const s=this.binders[n];(s instanceof Ma||s instanceof Qo||s instanceof bo)&&s.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const n=this.binders[t];(n instanceof Ma||n instanceof Qo||n instanceof bo)&&n.destroy()}}}class xl{constructor(t,n,s=()=>!0){this.programConfigurations={};for(const f of t)this.programConfigurations[f.id]=new hc(f,n,s);this.needsUpload=!1,this._featureMap=new su,this._bufferOffset=0}populatePaintArrays(t,n,s,f,v,b){for(const S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(t,n,f,v,b);n.id!==void 0&&this._featureMap.add(n.id,s,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,n,s,f){for(const v of s)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(t,this._featureMap,n,v,f)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const n in this.programConfigurations)this.programConfigurations[n].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}function vh(i,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[i]||[i.replace(`${t}-`,"").replace(/-/g,"_")]}function qc(i,t,n){const s={color:{source:aa,composite:be},number:{source:N,composite:aa}},f=function(v){return{"line-pattern":{source:In,composite:In},"fill-pattern":{source:In,composite:In},"fill-extrusion-pattern":{source:In,composite:In}}[v]}(i);return f&&f[n]||s[t][n]}ur("ConstantBinder",Lu),ur("CrossFadedConstantBinder",qa),ur("SourceExpressionBinder",Ma),ur("CrossFadedCompositeBinder",bo),ur("CompositeExpressionBinder",Qo),ur("ProgramConfiguration",hc,{omit:["_buffers"]}),ur("ProgramConfigurationSet",xl);const Kc=Math.pow(2,14)-1,pf=-Kc-1;function bl(i){const t=bt/i.extent,n=i.loadGeometry();for(let s=0;s<n.length;s++){const f=n[s];for(let v=0;v<f.length;v++){const b=f[v],S=Math.round(b.x*t),k=Math.round(b.y*t);b.x=Rt(S,pf,Kc),b.y=Rt(k,pf,Kc),(S<b.x||S>b.x+1||k<b.y||k>b.y+1)&&jr("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return n}function Du(i,t){return{type:i.type,id:i.id,properties:i.properties,geometry:t?bl(i):[]}}const xh=-32768;function Cp(i,t,n,s,f){i.emplaceBack(xh+8*t+s,xh+8*n+f)}class bh{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(n=>n.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new er,this.indexArray=new Pn,this.segments=new Rn,this.programConfigurations=new xl(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id)}populate(t,n,s){const f=this.layers[0],v=[];let b=null,S=!1,k=f.type==="heatmap";if(f.type==="circle"){const F=f;b=F.layout.get("circle-sort-key"),S=!b.isConstant(),k=k||F.paint.get("circle-pitch-alignment")==="map"}const R=k?n.subdivisionGranularity.circle:1;for(const{feature:F,id:j,index:H,sourceLayerIndex:X}of t){const ee=this.layers[0]._featureFilter.needGeometry,oe=Du(F,ee);if(!this.layers[0]._featureFilter.filter(new si(this.zoom),oe,s))continue;const ye=S?b.evaluate(oe,{},s):void 0,Pe={id:j,properties:F.properties,type:F.type,sourceLayerIndex:X,index:H,geometry:ee?oe.geometry:bl(F),patterns:{},sortKey:ye};v.push(Pe)}S&&v.sort((F,j)=>F.sortKey-j.sortKey);for(const F of v){const{geometry:j,index:H,sourceLayerIndex:X}=F,ee=t[H].feature;this.addFeature(F,j,H,s,R),n.featureIndex.insert(ee,j,H,X,this.index)}}update(t,n,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,n,this.stateDependentLayers,s)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,lo),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,n,s,f,v=1){let b;switch(v){case 1:b=[0,7];break;case 3:b=[0,2,5,7];break;case 5:b=[0,1,3,4,6,7];break;case 7:b=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${v}; valid values are 1, 3, 5, 7.`)}const S=b.length;for(const k of n)for(const R of k){const F=R.x,j=R.y;if(F<0||F>=bt||j<0||j>=bt)continue;const H=this.segments.prepareSegment(S*S,this.layoutVertexArray,this.indexArray,t.sortKey),X=H.vertexLength;for(let ee=0;ee<S;ee++)for(let oe=0;oe<S;oe++)Cp(this.layoutVertexArray,F,j,b[oe],b[ee]);for(let ee=0;ee<S-1;ee++)for(let oe=0;oe<S-1;oe++){const ye=X+ee*S+oe,Pe=X+(ee+1)*S+oe;this.indexArray.emplaceBack(ye,Pe+1,ye+1),this.indexArray.emplaceBack(ye,Pe,Pe+1)}H.vertexLength+=S*S,H.primitiveLength+=(S-1)*(S-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,s,{},f)}}function Dd(i,t){for(let n=0;n<i.length;n++)if(ha(t,i[n]))return!0;for(let n=0;n<t.length;n++)if(ha(i,t[n]))return!0;return!!Jh(i,t)}function Od(i,t,n){return!!ha(i,t)||!!Jo(t,i,n)}function Wf(i,t){if(i.length===1)return mf(t,i[0]);for(let n=0;n<t.length;n++){const s=t[n];for(let f=0;f<s.length;f++)if(ha(i,s[f]))return!0}for(let n=0;n<i.length;n++)if(mf(t,i[n]))return!0;for(let n=0;n<t.length;n++)if(Jh(i,t[n]))return!0;return!1}function Hf(i,t,n){if(i.length>1){if(Jh(i,t))return!0;for(let s=0;s<t.length;s++)if(Jo(t[s],i,n))return!0}for(let s=0;s<i.length;s++)if(Jo(i[s],t,n))return!0;return!1}function Jh(i,t){if(i.length===0||t.length===0)return!1;for(let n=0;n<i.length-1;n++){const s=i[n],f=i[n+1];for(let v=0;v<t.length-1;v++)if(ka(s,f,t[v],t[v+1]))return!0}return!1}function ka(i,t,n,s){return br(i,n,s)!==br(t,n,s)&&br(i,t,n)!==br(i,t,s)}function Jo(i,t,n){const s=n*n;if(t.length===1)return i.distSqr(t[0])<s;for(let f=1;f<t.length;f++)if(qf(i,t[f-1],t[f])<s)return!0;return!1}function qf(i,t,n){const s=t.distSqr(n);if(s===0)return i.distSqr(t);const f=((i.x-t.x)*(n.x-t.x)+(i.y-t.y)*(n.y-t.y))/s;return i.distSqr(f<0?t:f>1?n:n.sub(t)._mult(f)._add(t))}function mf(i,t){for(let n=0;n<i.length;n++)if(ha(i[n],t))return!0;return!1}function ha(i,t){let n=!1;for(let s=0,f=i.length-1;s<i.length;f=s++){const v=i[s],b=i[f];v.y>t.y!=b.y>t.y&&t.x<(b.x-v.x)*(t.y-v.y)/(b.y-v.y)+v.x&&(n=!n)}return n}function Kf(i,t,n){const s=n[0],f=n[2];if(i.x<s.x&&t.x<s.x||i.x>f.x&&t.x>f.x||i.y<s.y&&t.y<s.y||i.y>f.y&&t.y>f.y)return!1;const v=br(i,t,n[0]);return v!==br(i,t,n[1])||v!==br(i,t,n[2])||v!==br(i,t,n[3])}function wh(i,t,n){const s=t.paint.get(i).value;return s.kind==="constant"?s.value:n.programConfigurations.get(t.id).getMaxValue(i)}function ed(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function td(i,t,n,s,f){if(!t[0]&&!t[1])return i;const v=we.convert(t)._mult(f);n==="viewport"&&v._rotate(-s);const b=[];for(let S=0;S<i.length;S++)b.push(i[S].sub(v));return b}let gf,Xf;ur("CircleBucket",bh,{omit:["layers"]});var Ou={get paint(){return Xf=Xf||new Di({"circle-radius":new Vr(pe.paint_circle["circle-radius"]),"circle-color":new Vr(pe.paint_circle["circle-color"]),"circle-blur":new Vr(pe.paint_circle["circle-blur"]),"circle-opacity":new Vr(pe.paint_circle["circle-opacity"]),"circle-translate":new fr(pe.paint_circle["circle-translate"]),"circle-translate-anchor":new fr(pe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new fr(pe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new fr(pe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Vr(pe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Vr(pe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Vr(pe.paint_circle["circle-stroke-opacity"])})},get layout(){return gf=gf||new Di({"circle-sort-key":new Vr(pe.layout_circle["circle-sort-key"])})}};class Fd extends $s{constructor(t){super(t,Ou)}createBucket(t){return new bh(t)}queryRadius(t){const n=t;return wh("circle-radius",this,n)+wh("circle-stroke-width",this,n)+ed(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:t,feature:n,featureState:s,geometry:f,transform:v,pixelsToTileUnits:b,unwrappedTileID:S,getElevation:k}){const R=td(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-v.bearingInRadians,b),F=this.paint.get("circle-radius").evaluate(n,s)+this.paint.get("circle-stroke-width").evaluate(n,s),j=this.paint.get("circle-pitch-alignment")==="map",H=j?R:function(ee,oe,ye,Pe){return ee.map(Ze=>rd(Ze,oe,ye,Pe))}(R,v,S,k),X=j?F*b:F;for(const ee of f)for(const oe of ee){const ye=j?oe:rd(oe,v,S,k);let Pe=X;const Ze=v.projectTileCoordinates(oe.x,oe.y,S,k).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Pe*=Ze/v.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Pe*=v.cameraToCenterDistance/Ze),Od(H,ye,Pe))return!0}return!1}}function rd(i,t,n,s){const f=t.projectTileCoordinates(i.x,i.y,n,s).point;return new we((.5*f.x+.5)*t.width,(.5*-f.y+.5)*t.height)}class Bd extends bh{}let Sh;ur("HeatmapBucket",Bd,{omit:["layers"]});var dc={get paint(){return Sh=Sh||new Di({"heatmap-radius":new Vr(pe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Vr(pe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new fr(pe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new jl(pe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new fr(pe.paint_heatmap["heatmap-opacity"])})}};function ln(i,{width:t,height:n},s,f){if(f){if(f instanceof Uint8ClampedArray)f=new Uint8Array(f.buffer);else if(f.length!==t*n*s)throw new RangeError(`mismatched image size. expected: ${f.length} but got: ${t*n*s}`)}else f=new Uint8Array(t*n*s);return i.width=t,i.height=n,i.data=f,i}function nd(i,{width:t,height:n},s){if(t===i.width&&n===i.height)return;const f=ln({},{width:t,height:n},s);Th(i,f,{x:0,y:0},{x:0,y:0},{width:Math.min(i.width,t),height:Math.min(i.height,n)},s),i.width=t,i.height=n,i.data=f.data}function Th(i,t,n,s,f,v){if(f.width===0||f.height===0)return t;if(f.width>i.width||f.height>i.height||n.x>i.width-f.width||n.y>i.height-f.height)throw new RangeError("out of range source coordinates for image copy");if(f.width>t.width||f.height>t.height||s.x>t.width-f.width||s.y>t.height-f.height)throw new RangeError("out of range destination coordinates for image copy");const b=i.data,S=t.data;if(b===S)throw new Error("srcData equals dstData, so image is already copied");for(let k=0;k<f.height;k++){const R=((n.y+k)*i.width+n.x)*v,F=((s.y+k)*t.width+s.x)*v;for(let j=0;j<f.width*v;j++)S[F+j]=b[R+j]}return t}class Zl{constructor(t,n){ln(this,t,1,n)}resize(t){nd(this,t,1)}clone(){return new Zl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,n,s,f,v){Th(t,n,s,f,v,1)}}class da{constructor(t,n){ln(this,t,4,n)}resize(t){nd(this,t,4)}replace(t,n){n?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new da({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,n,s,f,v){Th(t,n,s,f,v,4)}}function Gl(i){const t={},n=i.resolution||256,s=i.clips?i.clips.length:1,f=i.image||new da({width:n,height:s});if(Math.log(n)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${n}`);const v=(b,S,k)=>{t[i.evaluationKey]=k;const R=i.expression.evaluate(t);f.data[b+S+0]=Math.floor(255*R.r/R.a),f.data[b+S+1]=Math.floor(255*R.g/R.a),f.data[b+S+2]=Math.floor(255*R.b/R.a),f.data[b+S+3]=Math.floor(255*R.a)};if(i.clips)for(let b=0,S=0;b<s;++b,S+=4*n)for(let k=0,R=0;k<n;k++,R+=4){const F=k/(n-1),{start:j,end:H}=i.clips[b];v(S,R,j*(1-F)+H*F)}else for(let b=0,S=0;b<n;b++,S+=4)v(0,S,b/(n-1));return f}ur("AlphaImage",Zl),ur("RGBAImage",da);const yf="big-fb";class Zs extends $s{createBucket(t){return new Bd(t)}constructor(t){super(t,dc),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){t==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Gl({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(yf)&&this.heatmapFbos.delete(yf)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let _f;var Pp={get paint(){return _f=_f||new Di({"hillshade-illumination-direction":new fr(pe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new fr(pe.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new fr(pe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new fr(pe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new fr(pe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new fr(pe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new fr(pe.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new fr(pe.paint_hillshade["hillshade-method"])})}};class Yf extends $s{constructor(t){super(t,Pp),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let t=this.paint.get("hillshade-illumination-direction").values,n=this.paint.get("hillshade-illumination-altitude").values,s=this.paint.get("hillshade-highlight-color").values,f=this.paint.get("hillshade-shadow-color").values;const v=Math.max(t.length,n.length,s.length,f.length);t=t.concat(Array(v-t.length).fill(t.at(-1))),n=n.concat(Array(v-n.length).fill(n.at(-1))),s=s.concat(Array(v-s.length).fill(s.at(-1))),f=f.concat(Array(v-f.length).fill(f.at(-1)));const b=n.map(Vn);return{directionRadians:t.map(Vn),altitudeRadians:b,shadowColor:f,highlightColor:s}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const Nd=ai([{name:"a_pos",components:2,type:"Int16"}],4),{members:Gs}=Nd;function Qf(i,t,n){const s=n.patternDependencies;let f=!1;for(const v of t){const b=v.paint.get(`${i}-pattern`);b.isConstant()||(f=!0);const S=b.constantOr(null);S&&(f=!0,s[S.to]=!0,s[S.from]=!0)}return f}function Jf(i,t,n,s,f){const v=f.patternDependencies;for(const b of t){const S=b.paint.get(`${i}-pattern`).value;if(S.kind!=="constant"){let k=S.evaluate({zoom:s-1},n,{},f.availableImages),R=S.evaluate({zoom:s},n,{},f.availableImages),F=S.evaluate({zoom:s+1},n,{},f.availableImages);k=k&&k.name?k.name:k,R=R&&R.name?R.name:R,F=F&&F.name?F.name:F,v[k]=!0,v[R]=!0,v[F]=!0,n.patterns[b.id]={min:k,mid:R,max:F}}}return n}function $d(i,t,n,s,f){let v;if(f===function(b,S,k,R){let F=0;for(let j=S,H=k-R;j<k;j+=R)F+=(b[H]-b[j])*(b[j+1]+b[H+1]),H=j;return F}(i,t,n,s)>0)for(let b=t;b<n;b+=s)v=vf(b/s|0,i[b],i[b+1],v);else for(let b=n-s;b>=t;b-=s)v=vf(b/s|0,i[b],i[b+1],v);return v&&ho(v,v.next)&&(Aa(v),v=v.next),v}function wi(i,t){if(!i)return i;t||(t=i);let n,s=i;do if(n=!1,s.steiner||!ho(s,s.next)&&ji(s.prev,s,s.next)!==0)s=s.next;else{if(Aa(s),s=t=s.prev,s===s.next)break;n=!0}while(n||s!==t);return t}function es(i,t,n,s,f,v,b){if(!i)return;!b&&v&&function(k,R,F,j){let H=k;do H.z===0&&(H.z=od(H.x,H.y,R,F,j)),H.prevZ=H.prev,H.nextZ=H.next,H=H.next;while(H!==k);H.prevZ.nextZ=null,H.prevZ=null,function(X){let ee,oe=1;do{let ye,Pe=X;X=null;let Ze=null;for(ee=0;Pe;){ee++;let ze=Pe,q=0;for(let Be=0;Be<oe&&(q++,ze=ze.nextZ,ze);Be++);let me=oe;for(;q>0||me>0&&ze;)q!==0&&(me===0||!ze||Pe.z<=ze.z)?(ye=Pe,Pe=Pe.nextZ,q--):(ye=ze,ze=ze.nextZ,me--),Ze?Ze.nextZ=ye:X=ye,ye.prevZ=Ze,Ze=ye;Pe=ze}Ze.nextZ=null,oe*=2}while(ee>1)}(H)}(i,s,f,v);let S=i;for(;i.prev!==i.next;){const k=i.prev,R=i.next;if(v?id(i,s,f,v):Lr(i))t.push(k.i,i.i,R.i),Aa(i),i=R.next,S=R.next;else if((i=R)===S){b?b===1?es(i=jd(wi(i),t),t,n,s,f,v,2):b===2&&Ep(i,t,n,s,f,v):es(wi(i),t,n,s,f,v,1);break}}}function Lr(i){const t=i.prev,n=i,s=i.next;if(ji(t,n,s)>=0)return!1;const f=t.x,v=n.x,b=s.x,S=t.y,k=n.y,R=s.y,F=Math.min(f,v,b),j=Math.min(S,k,R),H=Math.max(f,v,b),X=Math.max(S,k,R);let ee=s.next;for(;ee!==t;){if(ee.x>=F&&ee.x<=H&&ee.y>=j&&ee.y<=X&&sd(f,S,v,k,b,R,ee.x,ee.y)&&ji(ee.prev,ee,ee.next)>=0)return!1;ee=ee.next}return!0}function id(i,t,n,s){const f=i.prev,v=i,b=i.next;if(ji(f,v,b)>=0)return!1;const S=f.x,k=v.x,R=b.x,F=f.y,j=v.y,H=b.y,X=Math.min(S,k,R),ee=Math.min(F,j,H),oe=Math.max(S,k,R),ye=Math.max(F,j,H),Pe=od(X,ee,t,n,s),Ze=od(oe,ye,t,n,s);let ze=i.prevZ,q=i.nextZ;for(;ze&&ze.z>=Pe&&q&&q.z<=Ze;){if(ze.x>=X&&ze.x<=oe&&ze.y>=ee&&ze.y<=ye&&ze!==f&&ze!==b&&sd(S,F,k,j,R,H,ze.x,ze.y)&&ji(ze.prev,ze,ze.next)>=0||(ze=ze.prevZ,q.x>=X&&q.x<=oe&&q.y>=ee&&q.y<=ye&&q!==f&&q!==b&&sd(S,F,k,j,R,H,q.x,q.y)&&ji(q.prev,q,q.next)>=0))return!1;q=q.nextZ}for(;ze&&ze.z>=Pe;){if(ze.x>=X&&ze.x<=oe&&ze.y>=ee&&ze.y<=ye&&ze!==f&&ze!==b&&sd(S,F,k,j,R,H,ze.x,ze.y)&&ji(ze.prev,ze,ze.next)>=0)return!1;ze=ze.prevZ}for(;q&&q.z<=Ze;){if(q.x>=X&&q.x<=oe&&q.y>=ee&&q.y<=ye&&q!==f&&q!==b&&sd(S,F,k,j,R,H,q.x,q.y)&&ji(q.prev,q,q.next)>=0)return!1;q=q.nextZ}return!0}function jd(i,t){let n=i;do{const s=n.prev,f=n.next.next;!ho(s,f)&&Wl(s,n,n.next,f)&&Fu(s,f)&&Fu(f,s)&&(t.push(s.i,n.i,f.i),Aa(n),Aa(n.next),n=i=f),n=n.next}while(n!==i);return wi(n)}function Ep(i,t,n,s,f,v){let b=i;do{let S=b.next.next;for(;S!==b.prev;){if(b.i!==S.i&&tp(b,S)){let k=Ka(b,S);return b=wi(b,b.next),k=wi(k,k.next),es(b,t,n,s,f,v,0),void es(k,t,n,s,f,v,0)}S=S.next}b=b.next}while(b!==i)}function hm(i,t){let n=i.x-t.x;return n===0&&(n=i.y-t.y,n===0)&&(n=(i.next.y-i.y)/(i.next.x-i.x)-(t.next.y-t.y)/(t.next.x-t.x)),n}function fc(i,t){const n=function(f,v){let b=v;const S=f.x,k=f.y;let R,F=-1/0;if(ho(f,b))return b;do{if(ho(f,b.next))return b.next;if(k<=b.y&&k>=b.next.y&&b.next.y!==b.y){const oe=b.x+(k-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if(oe<=S&&oe>F&&(F=oe,R=b.x<b.next.x?b:b.next,oe===S))return R}b=b.next}while(b!==v);if(!R)return null;const j=R,H=R.x,X=R.y;let ee=1/0;b=R;do{if(S>=b.x&&b.x>=H&&S!==b.x&&ep(k<X?S:F,k,H,X,k<X?F:S,k,b.x,b.y)){const oe=Math.abs(k-b.y)/(S-b.x);Fu(b,f)&&(oe<ee||oe===ee&&(b.x>R.x||b.x===R.x&&Ud(R,b)))&&(R=b,ee=oe)}b=b.next}while(b!==j);return R}(i,t);if(!n)return t;const s=Ka(n,i);return wi(s,s.next),wi(n,n.next)}function Ud(i,t){return ji(i.prev,i,t.prev)<0&&ji(t.next,i,i.next)<0}function od(i,t,n,s,f){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-n)*f|0)|i<<8))|i<<4))|i<<2))|i<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-s)*f|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Ip(i){let t=i,n=i;do(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next;while(t!==i);return n}function ep(i,t,n,s,f,v,b,S){return(f-b)*(t-S)>=(i-b)*(v-S)&&(i-b)*(s-S)>=(n-b)*(t-S)&&(n-b)*(v-S)>=(f-b)*(s-S)}function sd(i,t,n,s,f,v,b,S){return!(i===b&&t===S)&&ep(i,t,n,s,f,v,b,S)}function tp(i,t){return i.next.i!==t.i&&i.prev.i!==t.i&&!function(n,s){let f=n;do{if(f.i!==n.i&&f.next.i!==n.i&&f.i!==s.i&&f.next.i!==s.i&&Wl(f,f.next,n,s))return!0;f=f.next}while(f!==n);return!1}(i,t)&&(Fu(i,t)&&Fu(t,i)&&function(n,s){let f=n,v=!1;const b=(n.x+s.x)/2,S=(n.y+s.y)/2;do f.y>S!=f.next.y>S&&f.next.y!==f.y&&b<(f.next.x-f.x)*(S-f.y)/(f.next.y-f.y)+f.x&&(v=!v),f=f.next;while(f!==n);return v}(i,t)&&(ji(i.prev,i,t.prev)||ji(i,t.prev,t))||ho(i,t)&&ji(i.prev,i,i.next)>0&&ji(t.prev,t,t.next)>0)}function ji(i,t,n){return(t.y-i.y)*(n.x-t.x)-(t.x-i.x)*(n.y-t.y)}function ho(i,t){return i.x===t.x&&i.y===t.y}function Wl(i,t,n,s){const f=ad(ji(i,t,n)),v=ad(ji(i,t,s)),b=ad(ji(n,s,i)),S=ad(ji(n,s,t));return f!==v&&b!==S||!(f!==0||!wl(i,n,t))||!(v!==0||!wl(i,s,t))||!(b!==0||!wl(n,i,s))||!(S!==0||!wl(n,t,s))}function wl(i,t,n){return t.x<=Math.max(i.x,n.x)&&t.x>=Math.min(i.x,n.x)&&t.y<=Math.max(i.y,n.y)&&t.y>=Math.min(i.y,n.y)}function ad(i){return i>0?1:i<0?-1:0}function Fu(i,t){return ji(i.prev,i,i.next)<0?ji(i,t,i.next)>=0&&ji(i,i.prev,t)>=0:ji(i,t,i.prev)<0||ji(i,i.next,t)<0}function Ka(i,t){const n=ld(i.i,i.x,i.y),s=ld(t.i,t.x,t.y),f=i.next,v=t.prev;return i.next=t,t.prev=i,n.next=f,f.prev=n,s.next=n,n.prev=s,v.next=s,s.prev=v,s}function vf(i,t,n,s){const f=ld(i,t,n);return s?(f.next=s.next,f.prev=s,s.next.prev=f,s.next=f):(f.prev=f,f.next=f),f}function Aa(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function ld(i,t,n){return{i,x:t,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Xc{constructor(t,n){if(n>t)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=t,this._minGranularity=n}getGranularityForZoomLevel(t){return Math.max(Math.floor(this._baseZoomGranularity/(1<<t)),this._minGranularity,1)}}class Xa{constructor(t){this.fill=t.fill,this.line=t.line,this.tile=t.tile,this.stencil=t.stencil,this.circle=t.circle}}Xa.noSubdivision=new Xa({fill:new Xc(0,0),line:new Xc(0,0),tile:new Xc(0,0),stencil:new Xc(0,0),circle:1}),ur("SubdivisionGranularityExpression",Xc),ur("SubdivisionGranularitySetting",Xa);const Sl=-32768,ud=32767;class Mp{constructor(t,n){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=t,this._granularityCellSize=bt/t,this._canonical=n}_getKey(t,n){return(t+=32768)<<16|(n+=32768)<<0}_vertexToIndex(t,n){if(t<-32768||n<-32768||t>32767||n>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const s=0|Math.round(t),f=0|Math.round(n),v=this._getKey(s,f);if(this._vertexDictionary.has(v))return this._vertexDictionary.get(v);const b=this._vertexBuffer.length/2;return this._vertexDictionary.set(v,b),this._vertexBuffer.push(s,f),b}_subdivideTrianglesScanline(t){if(this._granularity<2)return function(f,v){const b=[];for(let S=0;S<v.length;S+=3){const k=v[S],R=v[S+1],F=v[S+2],j=f[2*k],H=f[2*k+1];(f[2*R]-j)*(f[2*F+1]-H)-(f[2*R+1]-H)*(f[2*F]-j)>0?(b.push(k),b.push(F),b.push(R)):(b.push(k),b.push(R),b.push(F))}return b}(this._vertexBuffer,t);const n=[],s=t.length;for(let f=0;f<s;f+=3){const v=[t[f+0],t[f+1],t[f+2]],b=[this._vertexBuffer[2*t[f+0]+0],this._vertexBuffer[2*t[f+0]+1],this._vertexBuffer[2*t[f+1]+0],this._vertexBuffer[2*t[f+1]+1],this._vertexBuffer[2*t[f+2]+0],this._vertexBuffer[2*t[f+2]+1]];let S=1/0,k=1/0,R=-1/0,F=-1/0;for(let oe=0;oe<3;oe++){const ye=b[2*oe],Pe=b[2*oe+1];S=Math.min(S,ye),R=Math.max(R,ye),k=Math.min(k,Pe),F=Math.max(F,Pe)}if(S===R||k===F)continue;const j=Math.floor(S/this._granularityCellSize),H=Math.ceil(R/this._granularityCellSize),X=Math.floor(k/this._granularityCellSize),ee=Math.ceil(F/this._granularityCellSize);if(j!==H||X!==ee)for(let oe=X;oe<ee;oe++){const ye=this._scanlineGenerateVertexRingForCellRow(oe,b,v);Hl(this._vertexBuffer,ye,n)}else n.push(...v)}return n}_scanlineGenerateVertexRingForCellRow(t,n,s){const f=t*this._granularityCellSize,v=f+this._granularityCellSize,b=[];for(let S=0;S<3;S++){const k=n[2*S],R=n[2*S+1],F=n[2*(S+1)%6],j=n[(2*(S+1)+1)%6],H=n[2*(S+2)%6],X=n[(2*(S+2)+1)%6],ee=F-k,oe=j-R,ye=ee===0,Pe=oe===0,Ze=(f-R)/oe,ze=(v-R)/oe,q=Math.min(Ze,ze),me=Math.max(Ze,ze);if(!Pe&&(q>=1||me<=0)||Pe&&(R<f||R>v)){j>=f&&j<=v&&b.push(s[(S+1)%3]);continue}!Pe&&q>0&&b.push(this._vertexToIndex(k+ee*q,R+oe*q));const Be=k+ee*Math.max(q,0),mt=k+ee*Math.min(me,1);ye||this._generateIntraEdgeVertices(b,k,R,F,j,Be,mt),!Pe&&me<1&&b.push(this._vertexToIndex(k+ee*me,R+oe*me)),(Pe||j>=f&&j<=v)&&b.push(s[(S+1)%3]),!Pe&&(j<=f||j>=v)&&this._generateInterEdgeVertices(b,k,R,F,j,H,X,mt,f,v)}return b}_generateIntraEdgeVertices(t,n,s,f,v,b,S){const k=f-n,R=v-s,F=R===0,j=F?Math.min(n,f):Math.min(b,S),H=F?Math.max(n,f):Math.max(b,S),X=Math.floor(j/this._granularityCellSize)+1,ee=Math.ceil(H/this._granularityCellSize)-1;if(F?n<f:b<S)for(let oe=X;oe<=ee;oe++){const ye=oe*this._granularityCellSize;t.push(this._vertexToIndex(ye,s+R*(ye-n)/k))}else for(let oe=ee;oe>=X;oe--){const ye=oe*this._granularityCellSize;t.push(this._vertexToIndex(ye,s+R*(ye-n)/k))}}_generateInterEdgeVertices(t,n,s,f,v,b,S,k,R,F){const j=v-s,H=b-f,X=S-v,ee=(R-v)/X,oe=(F-v)/X,ye=Math.min(ee,oe),Pe=Math.max(ee,oe),Ze=f+H*ye;let ze=Math.floor(Math.min(Ze,k)/this._granularityCellSize)+1,q=Math.ceil(Math.max(Ze,k)/this._granularityCellSize)-1,me=k<Ze;const Be=X===0;if(Be&&(S===R||S===F))return;if(Be||ye>=1||Pe<=0){const Ut=s-S,wt=b+(n-b)*Math.min((R-S)/Ut,(F-S)/Ut);ze=Math.floor(Math.min(wt,k)/this._granularityCellSize)+1,q=Math.ceil(Math.max(wt,k)/this._granularityCellSize)-1,me=k<wt}const mt=j>0?F:R;if(me)for(let Ut=ze;Ut<=q;Ut++)t.push(this._vertexToIndex(Ut*this._granularityCellSize,mt));else for(let Ut=q;Ut>=ze;Ut--)t.push(this._vertexToIndex(Ut*this._granularityCellSize,mt))}_generateOutline(t){const n=[];for(const s of t){const f=pc(s,this._granularity,!0),v=this._pointArrayToIndices(f),b=[];for(let S=1;S<v.length;S++)b.push(v[S-1]),b.push(v[S]);n.push(b)}return n}_handlePoles(t){let n=!1,s=!1;this._canonical&&(this._canonical.y===0&&(n=!0),this._canonical.y===(1<<this._canonical.z)-1&&(s=!0)),(n||s)&&this._fillPoles(t,n,s)}_ensureNoPoleVertices(){const t=this._vertexBuffer;for(let n=0;n<t.length;n+=2){const s=t[n+1];s===Sl&&(t[n+1]=-32767),s===ud&&(t[n+1]=32766)}}_generatePoleQuad(t,n,s,f,v,b){f>v!=(b===Sl)?(t.push(n),t.push(s),t.push(this._vertexToIndex(f,b)),t.push(s),t.push(this._vertexToIndex(v,b)),t.push(this._vertexToIndex(f,b))):(t.push(s),t.push(n),t.push(this._vertexToIndex(f,b)),t.push(this._vertexToIndex(v,b)),t.push(s),t.push(this._vertexToIndex(f,b)))}_fillPoles(t,n,s){const f=this._vertexBuffer,v=bt,b=t.length;for(let S=2;S<b;S+=3){const k=t[S-2],R=t[S-1],F=t[S],j=f[2*k],H=f[2*k+1],X=f[2*R],ee=f[2*R+1],oe=f[2*F],ye=f[2*F+1];n&&(H===0&&ee===0&&this._generatePoleQuad(t,k,R,j,X,Sl),ee===0&&ye===0&&this._generatePoleQuad(t,R,F,X,oe,Sl),ye===0&&H===0&&this._generatePoleQuad(t,F,k,oe,j,Sl)),s&&(H===v&&ee===v&&this._generatePoleQuad(t,k,R,j,X,ud),ee===v&&ye===v&&this._generatePoleQuad(t,R,F,X,oe,ud),ye===v&&H===v&&this._generatePoleQuad(t,F,k,oe,j,ud))}}_initializeVertices(t){for(let n=0;n<t.length;n+=2)this._vertexToIndex(t[n],t[n+1])}subdividePolygonInternal(t,n){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:s,holeIndices:f}=function(S){const k=[],R=[];for(const F of S)if(F.length!==0){F!==S[0]&&k.push(R.length/2);for(let j=0;j<F.length;j++)R.push(F[j].x),R.push(F[j].y)}return{flattened:R,holeIndices:k}}(t);let v;this._initializeVertices(s);try{const S=function(R,F,j=2){const H=F&&F.length,X=H?F[0]*j:R.length;let ee=$d(R,0,X,j,!0);const oe=[];if(!ee||ee.next===ee.prev)return oe;let ye,Pe,Ze;if(H&&(ee=function(ze,q,me,Be){const mt=[];for(let Ut=0,wt=q.length;Ut<wt;Ut++){const kt=$d(ze,q[Ut]*Be,Ut<wt-1?q[Ut+1]*Be:ze.length,Be,!1);kt===kt.next&&(kt.steiner=!0),mt.push(Ip(kt))}mt.sort(hm);for(let Ut=0;Ut<mt.length;Ut++)me=fc(mt[Ut],me);return me}(R,F,ee,j)),R.length>80*j){ye=1/0,Pe=1/0;let ze=-1/0,q=-1/0;for(let me=j;me<X;me+=j){const Be=R[me],mt=R[me+1];Be<ye&&(ye=Be),mt<Pe&&(Pe=mt),Be>ze&&(ze=Be),mt>q&&(q=mt)}Ze=Math.max(ze-ye,q-Pe),Ze=Ze!==0?32767/Ze:0}return es(ee,oe,j,ye,Pe,Ze,0),oe}(s,f),k=this._convertIndices(s,S);v=this._subdivideTrianglesScanline(k)}catch(S){console.error(S)}let b=[];return n&&(b=this._generateOutline(t)),this._ensureNoPoleVertices(),this._handlePoles(v),{verticesFlattened:this._vertexBuffer,indicesTriangles:v,indicesLineList:b}}_convertIndices(t,n){const s=[];for(let f=0;f<n.length;f++)s.push(this._vertexToIndex(t[2*n[f]],t[2*n[f]+1]));return s}_pointArrayToIndices(t){const n=[];for(let s=0;s<t.length;s++){const f=t[s];n.push(this._vertexToIndex(f.x,f.y))}return n}}function Vd(i,t,n,s=!0){return new Mp(n,t).subdividePolygonInternal(i,s)}function pc(i,t,n=!1){if(!i||i.length<1)return[];if(i.length<2)return[];const s=i[0],f=i[i.length-1],v=n&&(s.x!==f.x||s.y!==f.y);if(t<2)return v?[...i,i[0]]:[...i];const b=Math.floor(bt/t),S=[];S.push(new we(i[0].x,i[0].y));const k=i.length,R=v?k:k-1;for(let F=0;F<R;F++){const j=i[F],H=F<k-1?i[F+1]:i[0],X=j.x,ee=j.y,oe=H.x,ye=H.y,Pe=X!==oe,Ze=ee!==ye;if(!Pe&&!Ze)continue;const ze=oe-X,q=ye-ee,me=Math.abs(ze),Be=Math.abs(q);let mt=X,Ut=ee;for(;;){const kt=ze>0?(Math.floor(mt/b)+1)*b:(Math.ceil(mt/b)-1)*b,Xt=q>0?(Math.floor(Ut/b)+1)*b:(Math.ceil(Ut/b)-1)*b,Zt=Math.abs(mt-kt),Kt=Math.abs(Ut-Xt),zt=Math.abs(mt-oe),Ir=Math.abs(Ut-ye),Hr=Pe?Zt/me:Number.POSITIVE_INFINITY,Wr=Ze?Kt/Be:Number.POSITIVE_INFINITY;if((zt<=Zt||!Pe)&&(Ir<=Kt||!Ze))break;if(Hr<Wr&&Pe||!Ze){mt=kt,Ut+=q*Hr;const zr=new we(mt,Math.round(Ut));S[S.length-1].x===zr.x&&S[S.length-1].y===zr.y||S.push(zr)}else{mt+=ze*Wr,Ut=Xt;const zr=new we(Math.round(mt),Ut);S[S.length-1].x===zr.x&&S[S.length-1].y===zr.y||S.push(zr)}}const wt=new we(oe,ye);S[S.length-1].x===wt.x&&S[S.length-1].y===wt.y||S.push(wt)}return S}function Hl(i,t,n){if(t.length===0)throw new Error("Subdivision vertex ring is empty.");let s=0,f=i[2*t[0]];for(let k=1;k<t.length;k++){const R=i[2*t[k]];R<f&&(f=R,s=k)}const v=t.length;let b=s,S=(b+1)%v;for(;;){const k=b-1>=0?b-1:v-1,R=(S+1)%v,F=i[2*t[k]],j=i[2*t[R]],H=i[2*t[b]],X=i[2*t[b]+1],ee=i[2*t[S]+1];let oe=!1;if(F<j)oe=!0;else if(F>j)oe=!1;else{const ye=ee-X,Pe=-(i[2*t[S]]-H),Ze=X<ee?1:-1;((F-H)*ye+(i[2*t[k]+1]-X)*Pe)*Ze>((j-H)*ye+(i[2*t[R]+1]-X)*Pe)*Ze&&(oe=!0)}if(oe){const ye=t[k],Pe=t[b],Ze=t[S];ye!==Pe&&ye!==Ze&&Pe!==Ze&&n.push(Ze,Pe,ye),b--,b<0&&(b=v-1)}else{const ye=t[R],Pe=t[b],Ze=t[S];ye!==Pe&&ye!==Ze&&Pe!==Ze&&n.push(Ze,Pe,ye),S++,S>=v&&(S=0)}if(k===R)break}}function Qn(i,t,n,s,f,v,b,S,k){const R=f.length/2,F=b&&S&&k;if(R<Rn.MAX_VERTEX_ARRAY_LENGTH){const j=t.prepareSegment(R,n,s),H=j.vertexLength;for(let oe=0;oe<v.length;oe+=3)s.emplaceBack(H+v[oe],H+v[oe+1],H+v[oe+2]);let X,ee;j.vertexLength+=R,j.primitiveLength+=v.length/3,F&&(ee=b.prepareSegment(R,n,S),X=ee.vertexLength,ee.vertexLength+=R);for(let oe=0;oe<f.length;oe+=2)i(f[oe],f[oe+1]);if(F)for(let oe=0;oe<k.length;oe++){const ye=k[oe];for(let Pe=1;Pe<ye.length;Pe+=2)S.emplaceBack(X+ye[Pe-1],X+ye[Pe]);ee.primitiveLength+=ye.length/2}}else(function(j,H,X,ee,oe,ye){const Pe=[];for(let Be=0;Be<ee.length/2;Be++)Pe.push(-1);const Ze={count:0};let ze=0,q=j.getOrCreateLatestSegment(H,X),me=q.vertexLength;for(let Be=2;Be<oe.length;Be+=3){const mt=oe[Be-2],Ut=oe[Be-1],wt=oe[Be];let kt=Pe[mt]<ze,Xt=Pe[Ut]<ze,Zt=Pe[wt]<ze;q.vertexLength+((kt?1:0)+(Xt?1:0)+(Zt?1:0))>Rn.MAX_VERTEX_ARRAY_LENGTH&&(q=j.createNewSegment(H,X),ze=Ze.count,kt=!0,Xt=!0,Zt=!0,me=0);const Kt=wo(Pe,ee,ye,Ze,mt,kt,q),zt=wo(Pe,ee,ye,Ze,Ut,Xt,q),Ir=wo(Pe,ee,ye,Ze,wt,Zt,q);X.emplaceBack(me+Kt-ze,me+zt-ze,me+Ir-ze),q.primitiveLength++}})(t,n,s,f,v,i),F&&function(j,H,X,ee,oe,ye){const Pe=[];for(let Be=0;Be<ee.length/2;Be++)Pe.push(-1);const Ze={count:0};let ze=0,q=j.getOrCreateLatestSegment(H,X),me=q.vertexLength;for(let Be=0;Be<oe.length;Be++){const mt=oe[Be];for(let Ut=1;Ut<oe[Be].length;Ut+=2){const wt=mt[Ut-1],kt=mt[Ut];let Xt=Pe[wt]<ze,Zt=Pe[kt]<ze;q.vertexLength+((Xt?1:0)+(Zt?1:0))>Rn.MAX_VERTEX_ARRAY_LENGTH&&(q=j.createNewSegment(H,X),ze=Ze.count,Xt=!0,Zt=!0,me=0);const Kt=wo(Pe,ee,ye,Ze,wt,Xt,q),zt=wo(Pe,ee,ye,Ze,kt,Zt,q);X.emplaceBack(me+Kt-ze,me+zt-ze),q.primitiveLength++}}}(b,n,S,f,k,i),t.forceNewSegmentOnNextPrepare(),b==null||b.forceNewSegmentOnNextPrepare()}function wo(i,t,n,s,f,v,b){if(v){const S=s.count;return n(t[2*f],t[2*f+1]),i[f]=s.count,s.count++,b.vertexLength++,S}return i[f]}class So{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(n=>n.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new tr,this.indexArray=new Pn,this.indexArray2=new qi,this.programConfigurations=new xl(t.layers,t.zoom),this.segments=new Rn,this.segments2=new Rn,this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id)}populate(t,n,s){this.hasPattern=Qf("fill",this.layers,n);const f=this.layers[0].layout.get("fill-sort-key"),v=!f.isConstant(),b=[];for(const{feature:S,id:k,index:R,sourceLayerIndex:F}of t){const j=this.layers[0]._featureFilter.needGeometry,H=Du(S,j);if(!this.layers[0]._featureFilter.filter(new si(this.zoom),H,s))continue;const X=v?f.evaluate(H,{},s,n.availableImages):void 0,ee={id:k,properties:S.properties,type:S.type,sourceLayerIndex:F,index:R,geometry:j?H.geometry:bl(S),patterns:{},sortKey:X};b.push(ee)}v&&b.sort((S,k)=>S.sortKey-k.sortKey);for(const S of b){const{geometry:k,index:R,sourceLayerIndex:F}=S;if(this.hasPattern){const j=Jf("fill",this.layers,S,this.zoom,n);this.patternFeatures.push(j)}else this.addFeature(S,k,R,s,{},n.subdivisionGranularity);n.featureIndex.insert(t[R].feature,k,R,F,this.index)}}update(t,n,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,n,this.stateDependentLayers,s)}addFeatures(t,n,s){for(const f of this.patternFeatures)this.addFeature(f,f.geometry,f.index,n,s,t.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Gs),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,n,s,f,v,b){for(const S of jh(n,500)){const k=Vd(S,f,b.fill.getGranularityForZoomLevel(f.z)),R=this.layoutVertexArray;Qn((F,j)=>{R.emplaceBack(F,j)},this.segments,this.layoutVertexArray,this.indexArray,k.verticesFlattened,k.indicesTriangles,this.segments2,this.indexArray2,k.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,s,v,f)}}let _s,Ya;ur("FillBucket",So,{omit:["layers","patternFeatures"]});var cd={get paint(){return Ya=Ya||new Di({"fill-antialias":new fr(pe.paint_fill["fill-antialias"]),"fill-opacity":new Vr(pe.paint_fill["fill-opacity"]),"fill-color":new Vr(pe.paint_fill["fill-color"]),"fill-outline-color":new Vr(pe.paint_fill["fill-outline-color"]),"fill-translate":new fr(pe.paint_fill["fill-translate"]),"fill-translate-anchor":new fr(pe.paint_fill["fill-translate-anchor"]),"fill-pattern":new iu(pe.paint_fill["fill-pattern"])})},get layout(){return _s=_s||new Di({"fill-sort-key":new Vr(pe.layout_fill["fill-sort-key"])})}};class ts extends $s{constructor(t){super(t,cd)}recalculate(t,n){super.recalculate(t,n);const s=this.paint._values["fill-outline-color"];s.value.kind==="constant"&&s.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new So(t)}queryRadius(){return ed(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:t,geometry:n,transform:s,pixelsToTileUnits:f}){return Wf(td(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-s.bearingInRadians,f),n)}isTileClipped(){return!0}}const Zd=ai([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Yc=ai([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Gd}=Zd;var hd,dd,fa,xf,mc,Bu,Wd,fd={};function gc(){if(dd)return hd;dd=1;var i=he();function t(f,v,b,S,k){this.properties={},this.extent=b,this.type=0,this._pbf=f,this._geometry=-1,this._keys=S,this._values=k,f.readFields(n,this,v)}function n(f,v,b){f==1?v.id=b.readVarint():f==2?function(S,k){for(var R=S.readVarint()+S.pos;S.pos<R;){var F=k._keys[S.readVarint()],j=k._values[S.readVarint()];k.properties[F]=j}}(b,v):f==3?v.type=b.readVarint():f==4&&(v._geometry=b.pos)}function s(f){for(var v,b,S=0,k=0,R=f.length,F=R-1;k<R;F=k++)S+=((b=f[F]).x-(v=f[k]).x)*(v.y+b.y);return S}return hd=t,t.types=["Unknown","Point","LineString","Polygon"],t.prototype.loadGeometry=function(){var f=this._pbf;f.pos=this._geometry;for(var v,b=f.readVarint()+f.pos,S=1,k=0,R=0,F=0,j=[];f.pos<b;){if(k<=0){var H=f.readVarint();S=7&H,k=H>>3}if(k--,S===1||S===2)R+=f.readSVarint(),F+=f.readSVarint(),S===1&&(v&&j.push(v),v=[]),v.push(new i(R,F));else{if(S!==7)throw new Error("unknown command "+S);v&&v.push(v[0].clone())}}return v&&j.push(v),j},t.prototype.bbox=function(){var f=this._pbf;f.pos=this._geometry;for(var v=f.readVarint()+f.pos,b=1,S=0,k=0,R=0,F=1/0,j=-1/0,H=1/0,X=-1/0;f.pos<v;){if(S<=0){var ee=f.readVarint();b=7&ee,S=ee>>3}if(S--,b===1||b===2)(k+=f.readSVarint())<F&&(F=k),k>j&&(j=k),(R+=f.readSVarint())<H&&(H=R),R>X&&(X=R);else if(b!==7)throw new Error("unknown command "+b)}return[F,H,j,X]},t.prototype.toGeoJSON=function(f,v,b){var S,k,R=this.extent*Math.pow(2,b),F=this.extent*f,j=this.extent*v,H=this.loadGeometry(),X=t.types[this.type];function ee(Pe){for(var Ze=0;Ze<Pe.length;Ze++){var ze=Pe[Ze];Pe[Ze]=[360*(ze.x+F)/R-180,360/Math.PI*Math.atan(Math.exp((180-360*(ze.y+j)/R)*Math.PI/180))-90]}}switch(this.type){case 1:var oe=[];for(S=0;S<H.length;S++)oe[S]=H[S][0];ee(H=oe);break;case 2:for(S=0;S<H.length;S++)ee(H[S]);break;case 3:for(H=function(Pe){var Ze=Pe.length;if(Ze<=1)return[Pe];for(var ze,q,me=[],Be=0;Be<Ze;Be++){var mt=s(Pe[Be]);mt!==0&&(q===void 0&&(q=mt<0),q===mt<0?(ze&&me.push(ze),ze=[Pe[Be]]):ze.push(Pe[Be]))}return ze&&me.push(ze),me}(H),S=0;S<H.length;S++)for(k=0;k<H[S].length;k++)ee(H[S][k])}H.length===1?H=H[0]:X="Multi"+X;var ye={type:"Feature",geometry:{type:X,coordinates:H},properties:this.properties};return"id"in this&&(ye.id=this.id),ye},hd}function Hd(){if(xf)return fa;xf=1;var i=gc();function t(s,f){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=s,this._keys=[],this._values=[],this._features=[],s.readFields(n,this,f),this.length=this._features.length}function n(s,f,v){s===15?f.version=v.readVarint():s===1?f.name=v.readString():s===5?f.extent=v.readVarint():s===2?f._features.push(v.pos):s===3?f._keys.push(v.readString()):s===4&&f._values.push(function(b){for(var S=null,k=b.readVarint()+b.pos;b.pos<k;){var R=b.readVarint()>>3;S=R===1?b.readString():R===2?b.readFloat():R===3?b.readDouble():R===4?b.readVarint64():R===5?b.readVarint():R===6?b.readSVarint():R===7?b.readBoolean():null}return S}(v))}return fa=t,t.prototype.feature=function(s){if(s<0||s>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[s];var f=this._pbf.readVarint()+this._pbf.pos;return new i(this._pbf,f,this.extent,this._keys,this._values)},fa}function yc(){return Wd||(Wd=1,fd.VectorTile=function(){if(Bu)return mc;Bu=1;var i=Hd();function t(n,s,f){if(n===3){var v=new i(f,f.readVarint()+f.pos);v.length&&(s[v.name]=v)}}return mc=function(n,s){this.layers=n.readFields(t,{},s)},mc}(),fd.VectorTileFeature=gc(),fd.VectorTileLayer=Hd()),fd}var rs=te(yc());const qd=rs.VectorTileFeature.types,Kd=Math.pow(2,13);function Qc(i,t,n,s,f,v,b,S){i.emplaceBack(t,n,2*Math.floor(s*Kd)+b,f*Kd*2,v*Kd*2,Math.round(S))}class Ch{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(n=>n.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Bt,this.centroidVertexArray=new Pt,this.indexArray=new Pn,this.programConfigurations=new xl(t.layers,t.zoom),this.segments=new Rn,this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id)}populate(t,n,s){this.features=[],this.hasPattern=Qf("fill-extrusion",this.layers,n);for(const{feature:f,id:v,index:b,sourceLayerIndex:S}of t){const k=this.layers[0]._featureFilter.needGeometry,R=Du(f,k);if(!this.layers[0]._featureFilter.filter(new si(this.zoom),R,s))continue;const F={id:v,sourceLayerIndex:S,index:b,geometry:k?R.geometry:bl(f),properties:f.properties,type:f.type,patterns:{}};this.hasPattern?this.features.push(Jf("fill-extrusion",this.layers,F,this.zoom,n)):this.addFeature(F,F.geometry,b,s,{},n.subdivisionGranularity),n.featureIndex.insert(f,F.geometry,b,S,this.index,!0)}}addFeatures(t,n,s){for(const f of this.features){const{geometry:v}=f;this.addFeature(f,v,f.index,n,s,t.subdivisionGranularity)}}update(t,n,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,n,this.stateDependentLayers,s)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Gd),this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,Yc.members,!0),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(t,n,s,f,v,b){for(const S of jh(n,500)){const k={x:0,y:0,sampleCount:0},R=this.layoutVertexArray.length;this.processPolygon(k,f,t,S,b);const F=this.layoutVertexArray.length-R,j=Math.floor(k.x/k.sampleCount),H=Math.floor(k.y/k.sampleCount);for(let X=0;X<F;X++)this.centroidVertexArray.emplaceBack(j,H)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,s,v,f)}processPolygon(t,n,s,f,v){if(f.length<1||ql(f[0]))return;for(const j of f)j.length!==0&&Ra(t,j);const b={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},S=v.fill.getGranularityForZoomLevel(n.z),k=qd[s.type]==="Polygon";for(const j of f){if(j.length===0||ql(j))continue;const H=pc(j,S,k);this._generateSideFaces(H,b)}if(!k)return;const R=Vd(f,n,S,!1),F=this.layoutVertexArray;Qn((j,H)=>{Qc(F,j,H,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,R.verticesFlattened,R.indicesTriangles)}_generateSideFaces(t,n){let s=0;for(let f=1;f<t.length;f++){const v=t[f],b=t[f-1];if(Jc(v,b))continue;n.segment.vertexLength+4>Rn.MAX_VERTEX_ARRAY_LENGTH&&(n.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const S=v.sub(b)._perp()._unit(),k=b.dist(v);s+k>32768&&(s=0),Qc(this.layoutVertexArray,v.x,v.y,S.x,S.y,0,0,s),Qc(this.layoutVertexArray,v.x,v.y,S.x,S.y,0,1,s),s+=k,Qc(this.layoutVertexArray,b.x,b.y,S.x,S.y,0,0,s),Qc(this.layoutVertexArray,b.x,b.y,S.x,S.y,0,1,s);const R=n.segment.vertexLength;this.indexArray.emplaceBack(R,R+2,R+1),this.indexArray.emplaceBack(R+1,R+2,R+3),n.segment.vertexLength+=4,n.segment.primitiveLength+=2}}}function Ra(i,t){for(let n=0;n<t.length;n++){const s=t[n];n===t.length-1&&t[0].x===s.x&&t[0].y===s.y||(i.x+=s.x,i.y+=s.y,i.sampleCount++)}}function Jc(i,t){return i.x===t.x&&(i.x<0||i.x>bt)||i.y===t.y&&(i.y<0||i.y>bt)}function ql(i){return i.every(t=>t.x<0)||i.every(t=>t.x>bt)||i.every(t=>t.y<0)||i.every(t=>t.y>bt)}let za;ur("FillExtrusionBucket",Ch,{omit:["layers","features"]});var bf={get paint(){return za=za||new Di({"fill-extrusion-opacity":new fr(pe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Vr(pe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new fr(pe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new fr(pe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new iu(pe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Vr(pe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Vr(pe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new fr(pe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class rp extends $s{constructor(t){super(t,bf)}createBucket(t){return new Ch(t)}queryRadius(){return ed(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:t,feature:n,featureState:s,geometry:f,transform:v,pixelsToTileUnits:b,pixelPosMatrix:S}){const k=td(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-v.bearingInRadians,b),R=this.paint.get("fill-extrusion-height").evaluate(n,s),F=this.paint.get("fill-extrusion-base").evaluate(n,s),j=function(X,ee,oe){const ye=[];for(const Pe of X){const Ze=[Pe.x,Pe.y,0,1];rr(Ze,Ze,ee),ye.push(new we(Ze[0]/Ze[3],Ze[1]/Ze[3]))}return ye}(k,S),H=function(X,ee,oe,ye){const Pe=[],Ze=[],ze=ye[8]*ee,q=ye[9]*ee,me=ye[10]*ee,Be=ye[11]*ee,mt=ye[8]*oe,Ut=ye[9]*oe,wt=ye[10]*oe,kt=ye[11]*oe;for(const Xt of X){const Zt=[],Kt=[];for(const zt of Xt){const Ir=zt.x,Hr=zt.y,Wr=ye[0]*Ir+ye[4]*Hr+ye[12],zr=ye[1]*Ir+ye[5]*Hr+ye[13],zn=ye[2]*Ir+ye[6]*Hr+ye[14],Xi=ye[3]*Ir+ye[7]*Hr+ye[15],ns=zn+me,ma=Xi+Be,uu=Wr+mt,Pl=zr+Ut,Hs=zn+wt,Yi=Xi+kt,bs=new we((Wr+ze)/ma,(zr+q)/ma);bs.z=ns/ma,Zt.push(bs);const qs=new we(uu/Yi,Pl/Yi);qs.z=Hs/Yi,Kt.push(qs)}Pe.push(Zt),Ze.push(Kt)}return[Pe,Ze]}(f,F,R,S);return function(X,ee,oe){let ye=1/0;Wf(oe,ee)&&(ye=kp(oe,ee[0]));for(let Pe=0;Pe<ee.length;Pe++){const Ze=ee[Pe],ze=X[Pe];for(let q=0;q<Ze.length-1;q++){const me=Ze[q],Be=[me,Ze[q+1],ze[q+1],ze[q],me];Dd(oe,Be)&&(ye=Math.min(ye,kp(oe,Be)))}}return ye!==1/0&&ye}(H[0],H[1],j)}}function Ph(i,t){return i.x*t.x+i.y*t.y}function kp(i,t){if(i.length===1){let n=0;const s=t[n++];let f;for(;!f||s.equals(f);)if(f=t[n++],!f)return 1/0;for(;n<t.length;n++){const v=t[n],b=i[0],S=f.sub(s),k=v.sub(s),R=b.sub(s),F=Ph(S,S),j=Ph(S,k),H=Ph(k,k),X=Ph(R,S),ee=Ph(R,k),oe=F*H-j*j,ye=(H*X-j*ee)/oe,Pe=(F*ee-j*X)/oe,Ze=s.z*(1-ye-Pe)+f.z*ye+v.z*Pe;if(isFinite(Ze))return Ze}return 1/0}{let n=1/0;for(const s of t)n=Math.min(n,s.z);return n}}const eh=ai([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Ap}=eh,np=ai([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Eh}=np,ip=rs.VectorTileFeature.types,Ih=Math.cos(Math.PI/180*37.5),op=Math.pow(2,14)/.5;class wf{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(n=>n.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(n=>{this.gradients[n.id]={}}),this.layoutVertexArray=new vr,this.layoutVertexArray2=new Gr,this.indexArray=new Pn,this.programConfigurations=new xl(t.layers,t.zoom),this.segments=new Rn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id)}populate(t,n,s){this.hasPattern=Qf("line",this.layers,n);const f=this.layers[0].layout.get("line-sort-key"),v=!f.isConstant(),b=[];for(const{feature:S,id:k,index:R,sourceLayerIndex:F}of t){const j=this.layers[0]._featureFilter.needGeometry,H=Du(S,j);if(!this.layers[0]._featureFilter.filter(new si(this.zoom),H,s))continue;const X=v?f.evaluate(H,{},s):void 0,ee={id:k,properties:S.properties,type:S.type,sourceLayerIndex:F,index:R,geometry:j?H.geometry:bl(S),patterns:{},sortKey:X};b.push(ee)}v&&b.sort((S,k)=>S.sortKey-k.sortKey);for(const S of b){const{geometry:k,index:R,sourceLayerIndex:F}=S;if(this.hasPattern){const j=Jf("line",this.layers,S,this.zoom,n);this.patternFeatures.push(j)}else this.addFeature(S,k,R,s,{},n.subdivisionGranularity);n.featureIndex.insert(t[R].feature,k,R,F,this.index)}}update(t,n,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,n,this.stateDependentLayers,s)}addFeatures(t,n,s){for(const f of this.patternFeatures)this.addFeature(f,f.geometry,f.index,n,s,t.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,Eh)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ap),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,n,s,f,v,b){const S=this.layers[0].layout,k=S.get("line-join").evaluate(t,{}),R=S.get("line-cap"),F=S.get("line-miter-limit"),j=S.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const H of n)this.addLine(H,t,k,R,F,j,f,b);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,s,v,f)}addLine(t,n,s,f,v,b,S,k){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,t=pc(t,S?k.line.getGranularityForZoomLevel(S.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ze=0;ze<t.length-1;ze++)this.totalDistance+=t[ze].dist(t[ze+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const R=ip[n.type]==="Polygon";let F=t.length;for(;F>=2&&t[F-1].equals(t[F-2]);)F--;let j=0;for(;j<F-1&&t[j].equals(t[j+1]);)j++;if(F<(R?3:2))return;s==="bevel"&&(v=1.05);const H=this.overscaling<=16?15*bt/(512*this.overscaling):0,X=this.segments.prepareSegment(10*F,this.layoutVertexArray,this.indexArray);let ee,oe,ye,Pe,Ze;this.e1=this.e2=-1,R&&(ee=t[F-2],Ze=t[j].sub(ee)._unit()._perp());for(let ze=j;ze<F;ze++){if(ye=ze===F-1?R?t[j+1]:void 0:t[ze+1],ye&&t[ze].equals(ye))continue;Ze&&(Pe=Ze),ee&&(oe=ee),ee=t[ze],Ze=ye?ye.sub(ee)._unit()._perp():Pe,Pe=Pe||Ze;let q=Pe.add(Ze);q.x===0&&q.y===0||q._unit();const me=Pe.x*Ze.x+Pe.y*Ze.y,Be=q.x*Ze.x+q.y*Ze.y,mt=Be!==0?1/Be:1/0,Ut=2*Math.sqrt(2-2*Be),wt=Be<Ih&&oe&&ye,kt=Pe.x*Ze.y-Pe.y*Ze.x>0;if(wt&&ze>j){const Kt=ee.dist(oe);if(Kt>2*H){const zt=ee.sub(ee.sub(oe)._mult(H/Kt)._round());this.updateDistance(oe,zt),this.addCurrentVertex(zt,Pe,0,0,X),oe=zt}}const Xt=oe&&ye;let Zt=Xt?s:R?"butt":f;if(Xt&&Zt==="round"&&(mt<b?Zt="miter":mt<=2&&(Zt="fakeround")),Zt==="miter"&&mt>v&&(Zt="bevel"),Zt==="bevel"&&(mt>2&&(Zt="flipbevel"),mt<v&&(Zt="miter")),oe&&this.updateDistance(oe,ee),Zt==="miter")q._mult(mt),this.addCurrentVertex(ee,q,0,0,X);else if(Zt==="flipbevel"){if(mt>100)q=Ze.mult(-1);else{const Kt=mt*Pe.add(Ze).mag()/Pe.sub(Ze).mag();q._perp()._mult(Kt*(kt?-1:1))}this.addCurrentVertex(ee,q,0,0,X),this.addCurrentVertex(ee,q.mult(-1),0,0,X)}else if(Zt==="bevel"||Zt==="fakeround"){const Kt=-Math.sqrt(mt*mt-1),zt=kt?Kt:0,Ir=kt?0:Kt;if(oe&&this.addCurrentVertex(ee,Pe,zt,Ir,X),Zt==="fakeround"){const Hr=Math.round(180*Ut/Math.PI/20);for(let Wr=1;Wr<Hr;Wr++){let zr=Wr/Hr;if(zr!==.5){const Xi=zr-.5;zr+=zr*Xi*(zr-1)*((1.0904+me*(me*(3.55645-1.43519*me)-3.2452))*Xi*Xi+(.848013+me*(.215638*me-1.06021)))}const zn=Ze.sub(Pe)._mult(zr)._add(Pe)._unit()._mult(kt?-1:1);this.addHalfVertex(ee,zn.x,zn.y,!1,kt,0,X)}}ye&&this.addCurrentVertex(ee,Ze,-zt,-Ir,X)}else if(Zt==="butt")this.addCurrentVertex(ee,q,0,0,X);else if(Zt==="square"){const Kt=oe?1:-1;this.addCurrentVertex(ee,q,Kt,Kt,X)}else Zt==="round"&&(oe&&(this.addCurrentVertex(ee,Pe,0,0,X),this.addCurrentVertex(ee,Pe,1,1,X,!0)),ye&&(this.addCurrentVertex(ee,Ze,-1,-1,X,!0),this.addCurrentVertex(ee,Ze,0,0,X)));if(wt&&ze<F-1){const Kt=ee.dist(ye);if(Kt>2*H){const zt=ee.add(ye.sub(ee)._mult(H/Kt)._round());this.updateDistance(ee,zt),this.addCurrentVertex(zt,Ze,0,0,X),ee=zt}}}}addCurrentVertex(t,n,s,f,v,b=!1){const S=n.y*f-n.x,k=-n.y-n.x*f;this.addHalfVertex(t,n.x+n.y*s,n.y-n.x*s,b,!1,s,v),this.addHalfVertex(t,S,k,b,!0,-f,v),this.distance>op/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(t,n,s,f,v,b))}addHalfVertex({x:t,y:n},s,f,v,b,S,k){const R=.5*(this.lineClips?this.scaledDistance*(op-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t<<1)+(v?1:0),(n<<1)+(b?1:0),Math.round(63*s)+128,Math.round(63*f)+128,1+(S===0?0:S<0?-1:1)|(63&R)<<2,R>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const F=k.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,F,this.e2),k.primitiveLength++),b?this.e2=F:this.e1=F}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(t,n){this.distance+=t.dist(n),this.updateScaledDistance()}}let Sf,Xd;ur("LineBucket",wf,{omit:["layers","patternFeatures"]});var Rp={get paint(){return Xd=Xd||new Di({"line-opacity":new Vr(pe.paint_line["line-opacity"]),"line-color":new Vr(pe.paint_line["line-color"]),"line-translate":new fr(pe.paint_line["line-translate"]),"line-translate-anchor":new fr(pe.paint_line["line-translate-anchor"]),"line-width":new Vr(pe.paint_line["line-width"]),"line-gap-width":new Vr(pe.paint_line["line-gap-width"]),"line-offset":new Vr(pe.paint_line["line-offset"]),"line-blur":new Vr(pe.paint_line["line-blur"]),"line-dasharray":new Ns(pe.paint_line["line-dasharray"]),"line-pattern":new iu(pe.paint_line["line-pattern"]),"line-gradient":new jl(pe.paint_line["line-gradient"])})},get layout(){return Sf=Sf||new Di({"line-cap":new fr(pe.layout_line["line-cap"]),"line-join":new Vr(pe.layout_line["line-join"]),"line-miter-limit":new fr(pe.layout_line["line-miter-limit"]),"line-round-limit":new fr(pe.layout_line["line-round-limit"]),"line-sort-key":new Vr(pe.layout_line["line-sort-key"])})}};class dm extends Vr{possiblyEvaluate(t,n){return n=new si(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),super.possiblyEvaluate(t,n)}evaluate(t,n,s,f){return n=Tr({},n,{zoom:Math.floor(n.zoom)}),super.evaluate(t,n,s,f)}}let Yd;class zp extends $s{constructor(t){super(t,Rp),this.gradientVersion=0,Yd||(Yd=new dm(Rp.paint.properties["line-width"].specification),Yd.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(t){if(t==="line-gradient"){const n=this.gradientExpression();this.stepInterpolant=!!function(s){return s._styleExpression!==void 0}(n)&&n._styleExpression.expression instanceof Ri,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(t,n){super.recalculate(t,n),this.paint._values["line-floorwidth"]=Yd.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new wf(t)}queryRadius(t){const n=t,s=th(wh("line-width",this,n),wh("line-gap-width",this,n)),f=wh("line-offset",this,n);return s/2+Math.abs(f)+ed(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:t,feature:n,featureState:s,geometry:f,transform:v,pixelsToTileUnits:b}){const S=td(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-v.bearingInRadians,b),k=b/2*th(this.paint.get("line-width").evaluate(n,s),this.paint.get("line-gap-width").evaluate(n,s)),R=this.paint.get("line-offset").evaluate(n,s);return R&&(f=function(F,j){const H=[];for(let X=0;X<F.length;X++){const ee=F[X],oe=[];for(let ye=0;ye<ee.length;ye++){const Pe=ee[ye-1],Ze=ee[ye],ze=ee[ye+1],q=ye===0?new we(0,0):Ze.sub(Pe)._unit()._perp(),me=ye===ee.length-1?new we(0,0):ze.sub(Ze)._unit()._perp(),Be=q._add(me)._unit(),mt=Be.x*me.x+Be.y*me.y;mt!==0&&Be._mult(1/mt),oe.push(Be._mult(j)._add(Ze))}H.push(oe)}return H}(f,R*b)),function(F,j,H){for(let X=0;X<j.length;X++){const ee=j[X];if(F.length>=3){for(let oe=0;oe<ee.length;oe++)if(ha(F,ee[oe]))return!0}if(Hf(F,ee,H))return!0}return!1}(S,f,k)}isTileClipped(){return!0}}function th(i,t){return t>0?t+2*i:i}const fm=ai([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),pd=ai([{name:"a_projected_pos",components:3,type:"Float32"}],4);ai([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Tf=ai([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);ai([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Ki=ai([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),pm=ai([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Lp(i,t,n){return i.sections.forEach(s=>{s.text=function(f,v,b){const S=v.layout.get("text-transform").evaluate(b,{});return S==="uppercase"?f=f.toLocaleUpperCase():S==="lowercase"&&(f=f.toLocaleLowerCase()),$l.applyArabicShaping&&(f=$l.applyArabicShaping(f)),f}(s.text,t,n)}),i}ai([{name:"triangle",components:3,type:"Uint16"}]),ai([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ai([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),ai([{type:"Float32",name:"offsetX"}]),ai([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),ai([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Qd={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var Dp,Cf,sp,Ro=24,Qa={};function Pf(){return Dp||(Dp=1,Qa.read=function(i,t,n,s,f){var v,b,S=8*f-s-1,k=(1<<S)-1,R=k>>1,F=-7,j=n?f-1:0,H=n?-1:1,X=i[t+j];for(j+=H,v=X&(1<<-F)-1,X>>=-F,F+=S;F>0;v=256*v+i[t+j],j+=H,F-=8);for(b=v&(1<<-F)-1,v>>=-F,F+=s;F>0;b=256*b+i[t+j],j+=H,F-=8);if(v===0)v=1-R;else{if(v===k)return b?NaN:1/0*(X?-1:1);b+=Math.pow(2,s),v-=R}return(X?-1:1)*b*Math.pow(2,v-s)},Qa.write=function(i,t,n,s,f,v){var b,S,k,R=8*v-f-1,F=(1<<R)-1,j=F>>1,H=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,X=s?0:v-1,ee=s?1:-1,oe=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(S=isNaN(t)?1:0,b=F):(b=Math.floor(Math.log(t)/Math.LN2),t*(k=Math.pow(2,-b))<1&&(b--,k*=2),(t+=b+j>=1?H/k:H*Math.pow(2,1-j))*k>=2&&(b++,k/=2),b+j>=F?(S=0,b=F):b+j>=1?(S=(t*k-1)*Math.pow(2,f),b+=j):(S=t*Math.pow(2,j-1)*Math.pow(2,f),b=0));f>=8;i[n+X]=255&S,X+=ee,S/=256,f-=8);for(b=b<<f|S,R+=f;R>0;i[n+X]=255&b,X+=ee,b/=256,R-=8);i[n+X-ee]|=128*oe}),Qa}function Op(){if(sp)return Cf;sp=1,Cf=t;var i=Pf();function t(q){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(q)?q:new Uint8Array(q||0),this.pos=0,this.type=0,this.length=this.buf.length}t.Varint=0,t.Fixed64=1,t.Bytes=2,t.Fixed32=5;var n=4294967296,s=1/n,f=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function v(q){return q.type===t.Bytes?q.readVarint()+q.pos:q.pos+1}function b(q,me,Be){return Be?4294967296*me+(q>>>0):4294967296*(me>>>0)+(q>>>0)}function S(q,me,Be){var mt=me<=16383?1:me<=2097151?2:me<=268435455?3:Math.floor(Math.log(me)/(7*Math.LN2));Be.realloc(mt);for(var Ut=Be.pos-1;Ut>=q;Ut--)Be.buf[Ut+mt]=Be.buf[Ut]}function k(q,me){for(var Be=0;Be<q.length;Be++)me.writeVarint(q[Be])}function R(q,me){for(var Be=0;Be<q.length;Be++)me.writeSVarint(q[Be])}function F(q,me){for(var Be=0;Be<q.length;Be++)me.writeFloat(q[Be])}function j(q,me){for(var Be=0;Be<q.length;Be++)me.writeDouble(q[Be])}function H(q,me){for(var Be=0;Be<q.length;Be++)me.writeBoolean(q[Be])}function X(q,me){for(var Be=0;Be<q.length;Be++)me.writeFixed32(q[Be])}function ee(q,me){for(var Be=0;Be<q.length;Be++)me.writeSFixed32(q[Be])}function oe(q,me){for(var Be=0;Be<q.length;Be++)me.writeFixed64(q[Be])}function ye(q,me){for(var Be=0;Be<q.length;Be++)me.writeSFixed64(q[Be])}function Pe(q,me){return(q[me]|q[me+1]<<8|q[me+2]<<16)+16777216*q[me+3]}function Ze(q,me,Be){q[Be]=me,q[Be+1]=me>>>8,q[Be+2]=me>>>16,q[Be+3]=me>>>24}function ze(q,me){return(q[me]|q[me+1]<<8|q[me+2]<<16)+(q[me+3]<<24)}return t.prototype={destroy:function(){this.buf=null},readFields:function(q,me,Be){for(Be=Be||this.length;this.pos<Be;){var mt=this.readVarint(),Ut=mt>>3,wt=this.pos;this.type=7&mt,q(Ut,me,this),this.pos===wt&&this.skip(mt)}return me},readMessage:function(q,me){return this.readFields(q,me,this.readVarint()+this.pos)},readFixed32:function(){var q=Pe(this.buf,this.pos);return this.pos+=4,q},readSFixed32:function(){var q=ze(this.buf,this.pos);return this.pos+=4,q},readFixed64:function(){var q=Pe(this.buf,this.pos)+Pe(this.buf,this.pos+4)*n;return this.pos+=8,q},readSFixed64:function(){var q=Pe(this.buf,this.pos)+ze(this.buf,this.pos+4)*n;return this.pos+=8,q},readFloat:function(){var q=i.read(this.buf,this.pos,!0,23,4);return this.pos+=4,q},readDouble:function(){var q=i.read(this.buf,this.pos,!0,52,8);return this.pos+=8,q},readVarint:function(q){var me,Be,mt=this.buf;return me=127&(Be=mt[this.pos++]),Be<128?me:(me|=(127&(Be=mt[this.pos++]))<<7,Be<128?me:(me|=(127&(Be=mt[this.pos++]))<<14,Be<128?me:(me|=(127&(Be=mt[this.pos++]))<<21,Be<128?me:function(Ut,wt,kt){var Xt,Zt,Kt=kt.buf;if(Xt=(112&(Zt=Kt[kt.pos++]))>>4,Zt<128||(Xt|=(127&(Zt=Kt[kt.pos++]))<<3,Zt<128)||(Xt|=(127&(Zt=Kt[kt.pos++]))<<10,Zt<128)||(Xt|=(127&(Zt=Kt[kt.pos++]))<<17,Zt<128)||(Xt|=(127&(Zt=Kt[kt.pos++]))<<24,Zt<128)||(Xt|=(1&(Zt=Kt[kt.pos++]))<<31,Zt<128))return b(Ut,Xt,wt);throw new Error("Expected varint not more than 10 bytes")}(me|=(15&(Be=mt[this.pos]))<<28,q,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var q=this.readVarint();return q%2==1?(q+1)/-2:q/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var q=this.readVarint()+this.pos,me=this.pos;return this.pos=q,q-me>=12&&f?function(Be,mt,Ut){return f.decode(Be.subarray(mt,Ut))}(this.buf,me,q):function(Be,mt,Ut){for(var wt="",kt=mt;kt<Ut;){var Xt,Zt,Kt,zt=Be[kt],Ir=null,Hr=zt>239?4:zt>223?3:zt>191?2:1;if(kt+Hr>Ut)break;Hr===1?zt<128&&(Ir=zt):Hr===2?(192&(Xt=Be[kt+1]))==128&&(Ir=(31&zt)<<6|63&Xt)<=127&&(Ir=null):Hr===3?(Zt=Be[kt+2],(192&(Xt=Be[kt+1]))==128&&(192&Zt)==128&&((Ir=(15&zt)<<12|(63&Xt)<<6|63&Zt)<=2047||Ir>=55296&&Ir<=57343)&&(Ir=null)):Hr===4&&(Zt=Be[kt+2],Kt=Be[kt+3],(192&(Xt=Be[kt+1]))==128&&(192&Zt)==128&&(192&Kt)==128&&((Ir=(15&zt)<<18|(63&Xt)<<12|(63&Zt)<<6|63&Kt)<=65535||Ir>=1114112)&&(Ir=null)),Ir===null?(Ir=65533,Hr=1):Ir>65535&&(Ir-=65536,wt+=String.fromCharCode(Ir>>>10&1023|55296),Ir=56320|1023&Ir),wt+=String.fromCharCode(Ir),kt+=Hr}return wt}(this.buf,me,q)},readBytes:function(){var q=this.readVarint()+this.pos,me=this.buf.subarray(this.pos,q);return this.pos=q,me},readPackedVarint:function(q,me){if(this.type!==t.Bytes)return q.push(this.readVarint(me));var Be=v(this);for(q=q||[];this.pos<Be;)q.push(this.readVarint(me));return q},readPackedSVarint:function(q){if(this.type!==t.Bytes)return q.push(this.readSVarint());var me=v(this);for(q=q||[];this.pos<me;)q.push(this.readSVarint());return q},readPackedBoolean:function(q){if(this.type!==t.Bytes)return q.push(this.readBoolean());var me=v(this);for(q=q||[];this.pos<me;)q.push(this.readBoolean());return q},readPackedFloat:function(q){if(this.type!==t.Bytes)return q.push(this.readFloat());var me=v(this);for(q=q||[];this.pos<me;)q.push(this.readFloat());return q},readPackedDouble:function(q){if(this.type!==t.Bytes)return q.push(this.readDouble());var me=v(this);for(q=q||[];this.pos<me;)q.push(this.readDouble());return q},readPackedFixed32:function(q){if(this.type!==t.Bytes)return q.push(this.readFixed32());var me=v(this);for(q=q||[];this.pos<me;)q.push(this.readFixed32());return q},readPackedSFixed32:function(q){if(this.type!==t.Bytes)return q.push(this.readSFixed32());var me=v(this);for(q=q||[];this.pos<me;)q.push(this.readSFixed32());return q},readPackedFixed64:function(q){if(this.type!==t.Bytes)return q.push(this.readFixed64());var me=v(this);for(q=q||[];this.pos<me;)q.push(this.readFixed64());return q},readPackedSFixed64:function(q){if(this.type!==t.Bytes)return q.push(this.readSFixed64());var me=v(this);for(q=q||[];this.pos<me;)q.push(this.readSFixed64());return q},skip:function(q){var me=7&q;if(me===t.Varint)for(;this.buf[this.pos++]>127;);else if(me===t.Bytes)this.pos=this.readVarint()+this.pos;else if(me===t.Fixed32)this.pos+=4;else{if(me!==t.Fixed64)throw new Error("Unimplemented type: "+me);this.pos+=8}},writeTag:function(q,me){this.writeVarint(q<<3|me)},realloc:function(q){for(var me=this.length||16;me<this.pos+q;)me*=2;if(me!==this.length){var Be=new Uint8Array(me);Be.set(this.buf),this.buf=Be,this.length=me}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(q){this.realloc(4),Ze(this.buf,q,this.pos),this.pos+=4},writeSFixed32:function(q){this.realloc(4),Ze(this.buf,q,this.pos),this.pos+=4},writeFixed64:function(q){this.realloc(8),Ze(this.buf,-1&q,this.pos),Ze(this.buf,Math.floor(q*s),this.pos+4),this.pos+=8},writeSFixed64:function(q){this.realloc(8),Ze(this.buf,-1&q,this.pos),Ze(this.buf,Math.floor(q*s),this.pos+4),this.pos+=8},writeVarint:function(q){(q=+q||0)>268435455||q<0?function(me,Be){var mt,Ut;if(me>=0?(mt=me%4294967296|0,Ut=me/4294967296|0):(Ut=~(-me/4294967296),4294967295^(mt=~(-me%4294967296))?mt=mt+1|0:(mt=0,Ut=Ut+1|0)),me>=18446744073709552e3||me<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Be.realloc(10),function(wt,kt,Xt){Xt.buf[Xt.pos++]=127&wt|128,wt>>>=7,Xt.buf[Xt.pos++]=127&wt|128,wt>>>=7,Xt.buf[Xt.pos++]=127&wt|128,wt>>>=7,Xt.buf[Xt.pos++]=127&wt|128,Xt.buf[Xt.pos]=127&(wt>>>=7)}(mt,0,Be),function(wt,kt){var Xt=(7&wt)<<4;kt.buf[kt.pos++]|=Xt|((wt>>>=3)?128:0),wt&&(kt.buf[kt.pos++]=127&wt|((wt>>>=7)?128:0),wt&&(kt.buf[kt.pos++]=127&wt|((wt>>>=7)?128:0),wt&&(kt.buf[kt.pos++]=127&wt|((wt>>>=7)?128:0),wt&&(kt.buf[kt.pos++]=127&wt|((wt>>>=7)?128:0),wt&&(kt.buf[kt.pos++]=127&wt)))))}(Ut,Be)}(q,this):(this.realloc(4),this.buf[this.pos++]=127&q|(q>127?128:0),q<=127||(this.buf[this.pos++]=127&(q>>>=7)|(q>127?128:0),q<=127||(this.buf[this.pos++]=127&(q>>>=7)|(q>127?128:0),q<=127||(this.buf[this.pos++]=q>>>7&127))))},writeSVarint:function(q){this.writeVarint(q<0?2*-q-1:2*q)},writeBoolean:function(q){this.writeVarint(!!q)},writeString:function(q){q=String(q),this.realloc(4*q.length),this.pos++;var me=this.pos;this.pos=function(mt,Ut,wt){for(var kt,Xt,Zt=0;Zt<Ut.length;Zt++){if((kt=Ut.charCodeAt(Zt))>55295&&kt<57344){if(!Xt){kt>56319||Zt+1===Ut.length?(mt[wt++]=239,mt[wt++]=191,mt[wt++]=189):Xt=kt;continue}if(kt<56320){mt[wt++]=239,mt[wt++]=191,mt[wt++]=189,Xt=kt;continue}kt=Xt-55296<<10|kt-56320|65536,Xt=null}else Xt&&(mt[wt++]=239,mt[wt++]=191,mt[wt++]=189,Xt=null);kt<128?mt[wt++]=kt:(kt<2048?mt[wt++]=kt>>6|192:(kt<65536?mt[wt++]=kt>>12|224:(mt[wt++]=kt>>18|240,mt[wt++]=kt>>12&63|128),mt[wt++]=kt>>6&63|128),mt[wt++]=63&kt|128)}return wt}(this.buf,q,this.pos);var Be=this.pos-me;Be>=128&&S(me,Be,this),this.pos=me-1,this.writeVarint(Be),this.pos+=Be},writeFloat:function(q){this.realloc(4),i.write(this.buf,q,this.pos,!0,23,4),this.pos+=4},writeDouble:function(q){this.realloc(8),i.write(this.buf,q,this.pos,!0,52,8),this.pos+=8},writeBytes:function(q){var me=q.length;this.writeVarint(me),this.realloc(me);for(var Be=0;Be<me;Be++)this.buf[this.pos++]=q[Be]},writeRawMessage:function(q,me){this.pos++;var Be=this.pos;q(me,this);var mt=this.pos-Be;mt>=128&&S(Be,mt,this),this.pos=Be-1,this.writeVarint(mt),this.pos+=mt},writeMessage:function(q,me,Be){this.writeTag(q,t.Bytes),this.writeRawMessage(me,Be)},writePackedVarint:function(q,me){me.length&&this.writeMessage(q,k,me)},writePackedSVarint:function(q,me){me.length&&this.writeMessage(q,R,me)},writePackedBoolean:function(q,me){me.length&&this.writeMessage(q,H,me)},writePackedFloat:function(q,me){me.length&&this.writeMessage(q,F,me)},writePackedDouble:function(q,me){me.length&&this.writeMessage(q,j,me)},writePackedFixed32:function(q,me){me.length&&this.writeMessage(q,X,me)},writePackedSFixed32:function(q,me){me.length&&this.writeMessage(q,ee,me)},writePackedFixed64:function(q,me){me.length&&this.writeMessage(q,oe,me)},writePackedSFixed64:function(q,me){me.length&&this.writeMessage(q,ye,me)},writeBytesField:function(q,me){this.writeTag(q,t.Bytes),this.writeBytes(me)},writeFixed32Field:function(q,me){this.writeTag(q,t.Fixed32),this.writeFixed32(me)},writeSFixed32Field:function(q,me){this.writeTag(q,t.Fixed32),this.writeSFixed32(me)},writeFixed64Field:function(q,me){this.writeTag(q,t.Fixed64),this.writeFixed64(me)},writeSFixed64Field:function(q,me){this.writeTag(q,t.Fixed64),this.writeSFixed64(me)},writeVarintField:function(q,me){this.writeTag(q,t.Varint),this.writeVarint(me)},writeSVarintField:function(q,me){this.writeTag(q,t.Varint),this.writeSVarint(me)},writeStringField:function(q,me){this.writeTag(q,t.Bytes),this.writeString(me)},writeFloatField:function(q,me){this.writeTag(q,t.Fixed32),this.writeFloat(me)},writeDoubleField:function(q,me){this.writeTag(q,t.Fixed64),this.writeDouble(me)},writeBooleanField:function(q,me){this.writeVarintField(q,!!me)}},Cf}var Tl=te(Op());const md=3;function Mh(i,t,n){i===1&&n.readMessage(Ef,t)}function Ef(i,t,n){if(i===3){const{id:s,bitmap:f,width:v,height:b,left:S,top:k,advance:R}=n.readMessage(ap,{});t.push({id:s,bitmap:new Zl({width:v+2*md,height:b+2*md},f),metrics:{width:v,height:b,left:S,top:k,advance:R}})}}function ap(i,t,n){i===1?t.id=n.readVarint():i===2?t.bitmap=n.readBytes():i===3?t.width=n.readVarint():i===4?t.height=n.readVarint():i===5?t.left=n.readSVarint():i===6?t.top=n.readSVarint():i===7&&(t.advance=n.readVarint())}const lp=md;function Fp(i){let t=0,n=0;for(const b of i)t+=b.w*b.h,n=Math.max(n,b.w);i.sort((b,S)=>S.h-b.h);const s=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),n),h:1/0}];let f=0,v=0;for(const b of i)for(let S=s.length-1;S>=0;S--){const k=s[S];if(!(b.w>k.w||b.h>k.h)){if(b.x=k.x,b.y=k.y,v=Math.max(v,b.y+b.h),f=Math.max(f,b.x+b.w),b.w===k.w&&b.h===k.h){const R=s.pop();S<s.length&&(s[S]=R)}else b.h===k.h?(k.x+=b.w,k.w-=b.w):b.w===k.w?(k.y+=b.h,k.h-=b.h):(s.push({x:k.x+b.w,y:k.y,w:k.w-b.w,h:b.h}),k.y+=b.h,k.h-=b.h);break}}return{w:f,h:v,fill:t/(f*v)||0}}const Ws=1;class up{constructor(t,{pixelRatio:n,version:s,stretchX:f,stretchY:v,content:b,textFitWidth:S,textFitHeight:k}){this.paddedRect=t,this.pixelRatio=n,this.stretchX=f,this.stretchY=v,this.content=b,this.version=s,this.textFitWidth=S,this.textFitHeight=k}get tl(){return[this.paddedRect.x+Ws,this.paddedRect.y+Ws]}get br(){return[this.paddedRect.x+this.paddedRect.w-Ws,this.paddedRect.y+this.paddedRect.h-Ws]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Ws)/this.pixelRatio,(this.paddedRect.h-2*Ws)/this.pixelRatio]}}class cp{constructor(t,n){const s={},f={};this.haveRenderCallbacks=[];const v=[];this.addImages(t,s,v),this.addImages(n,f,v);const{w:b,h:S}=Fp(v),k=new da({width:b||1,height:S||1});for(const R in t){const F=t[R],j=s[R].paddedRect;da.copy(F.data,k,{x:0,y:0},{x:j.x+Ws,y:j.y+Ws},F.data)}for(const R in n){const F=n[R],j=f[R].paddedRect,H=j.x+Ws,X=j.y+Ws,ee=F.data.width,oe=F.data.height;da.copy(F.data,k,{x:0,y:0},{x:H,y:X},F.data),da.copy(F.data,k,{x:0,y:oe-1},{x:H,y:X-1},{width:ee,height:1}),da.copy(F.data,k,{x:0,y:0},{x:H,y:X+oe},{width:ee,height:1}),da.copy(F.data,k,{x:ee-1,y:0},{x:H-1,y:X},{width:1,height:oe}),da.copy(F.data,k,{x:0,y:0},{x:H+ee,y:X},{width:1,height:oe})}this.image=k,this.iconPositions=s,this.patternPositions=f}addImages(t,n,s){for(const f in t){const v=t[f],b={x:0,y:0,w:v.data.width+2*Ws,h:v.data.height+2*Ws};s.push(b),n[f]=new up(b,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(f)}}patchUpdatedImages(t,n){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const s in t.updatedImages)this.patchUpdatedImage(this.iconPositions[s],t.getImage(s),n),this.patchUpdatedImage(this.patternPositions[s],t.getImage(s),n)}patchUpdatedImage(t,n,s){if(!t||!n||t.version===n.version)return;t.version=n.version;const[f,v]=t.tl;s.update(n.data,void 0,{x:f,y:v})}}var _c;ur("ImagePosition",up),ur("ImageAtlas",cp),M.al=void 0,(_c=M.al||(M.al={}))[_c.none=0]="none",_c[_c.horizontal=1]="horizontal",_c[_c.vertical=2]="vertical",_c[_c.horizontalOnly=3]="horizontalOnly";const kh=-17;class rh{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(t,n,s){const f=new rh;return f.scale=t||1,f.fontStack=n,f.verticalAlign=s||"bottom",f}static forImage(t,n){const s=new rh;return s.imageName=t,s.verticalAlign=n||"bottom",s}}class Ah{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,n){const s=new Ah;for(let f=0;f<t.sections.length;f++){const v=t.sections[f];v.image?s.addImageSection(v):s.addTextSection(v,n)}return s}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(){this.text=function(t){let n="";for(let s=0;s<t.length;s++){const f=t.charCodeAt(s+1)||null,v=t.charCodeAt(s-1)||null;n+=f&&Bs(f)&&!Qd[t[s+1]]||v&&Bs(v)&&!Qd[t[s-1]]||!Qd[t[s]]?t[s]:Qd[t[s]]}return n}(this.text)}trim(){let t=0;for(let s=0;s<this.text.length&&If[this.text.charCodeAt(s)];s++)t++;let n=this.text.length;for(let s=this.text.length-1;s>=0&&s>=t&&If[this.text.charCodeAt(s)];s--)n--;this.text=this.text.substring(t,n),this.sectionIndex=this.sectionIndex.slice(t,n)}substring(t,n){const s=new Ah;return s.text=this.text.substring(t,n),s.sectionIndex=this.sectionIndex.slice(t,n),s.sections=this.sections,s}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((t,n)=>Math.max(t,this.sections[n].scale),0)}getMaxImageSize(t){let n=0,s=0;for(let f=0;f<this.length();f++){const v=this.getSection(f);if(v.imageName){const b=t[v.imageName];if(!b)continue;const S=b.displaySize;n=Math.max(n,S[0]),s=Math.max(s,S[1])}}return{maxImageWidth:n,maxImageHeight:s}}addTextSection(t,n){this.text+=t.text,this.sections.push(rh.forText(t.scale,t.fontStack||n,t.verticalAlign));const s=this.sections.length-1;for(let f=0;f<t.text.length;++f)this.sectionIndex.push(s)}addImageSection(t){const n=t.image?t.image.name:"";if(n.length===0)return void jr("Can't add FormattedSection with an empty image.");const s=this.getNextImageSectionCharCode();s?(this.text+=String.fromCharCode(s),this.sections.push(rh.forImage(n,t.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):jr("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function gd(i,t,n,s,f,v,b,S,k,R,F,j,H,X,ee){const oe=Ah.fromFeature(i,f);let ye;j===M.al.vertical&&oe.verticalizePunctuation();const{processBidirectionalText:Pe,processStyledBidirectionalText:Ze}=$l;if(Pe&&oe.sections.length===1){ye=[];const me=Pe(oe.toString(),vc(oe,R,v,t,s,X));for(const Be of me){const mt=new Ah;mt.text=Be,mt.sections=oe.sections;for(let Ut=0;Ut<Be.length;Ut++)mt.sectionIndex.push(0);ye.push(mt)}}else if(Ze){ye=[];const me=Ze(oe.text,oe.sectionIndex,vc(oe,R,v,t,s,X));for(const Be of me){const mt=new Ah;mt.text=Be[0],mt.sectionIndex=Be[1],mt.sections=oe.sections,ye.push(mt)}}else ye=function(me,Be){const mt=[],Ut=me.text;let wt=0;for(const kt of Be)mt.push(me.substring(wt,kt)),wt=kt;return wt<Ut.length&&mt.push(me.substring(wt,Ut.length)),mt}(oe,vc(oe,R,v,t,s,X));const ze=[],q={positionedLines:ze,text:oe.toString(),top:F[1],bottom:F[1],left:F[0],right:F[0],writingMode:j,iconsInText:!1,verticalizable:!1};return function(me,Be,mt,Ut,wt,kt,Xt,Zt,Kt,zt,Ir,Hr){let Wr=0,zr=0,zn=0,Xi=0;const ns=Zt==="right"?1:Zt==="left"?0:.5,ma=Ro/Hr;let uu=0;for(const Yi of wt){Yi.trim();const bs=Yi.getMaxScale(),qs={positionedGlyphs:[],lineOffset:0};me.positionedLines[uu]=qs;const Ks=qs.positionedGlyphs;let Ja=0;if(!Yi.length()){zr+=kt,++uu;continue}const cu=Jd(Ut,Yi,ma);for(let El=0;El<Yi.length();El++){const is=Yi.getSection(El),Ss=Yi.getSectionIndex(El),Ts=Yi.getCharCode(El),Vo=Rf(Kt,Ir,Ts);let Ui;if(is.imageName){if(me.iconsInText=!0,is.scale=is.scale*ma,Ui=l(is,Vo,bs,cu,Ut),!Ui)continue;Ja=Math.max(Ja,Ui.imageOffset)}else if(Ui=o(is,Ts,Vo,cu,Be,mt),!Ui)continue;const{rect:Sc,metrics:Bf,baselineOffset:Tc}=Ui;Ks.push({glyph:Ts,imageName:is.imageName,x:Wr,y:zr+Tc+kh,vertical:Vo,scale:is.scale,fontStack:is.fontStack,sectionIndex:Ss,metrics:Bf,rect:Sc}),Vo?(me.verticalizable=!0,Wr+=(is.imageName?Bf.advance:Ro)*is.scale+zt):Wr+=Bf.advance*is.scale+zt}Ks.length!==0&&(zn=Math.max(Wr-zt,zn),x(Ks,0,Ks.length-1,ns)),Wr=0,qs.lineOffset=Math.max(Ja,(bs-1)*Ro);const ws=kt*bs+Ja;zr+=ws,Xi=Math.max(ws,Xi),++uu}const{horizontalAlign:Pl,verticalAlign:Hs}=dp(Xt);(function(Yi,bs,qs,Ks,Ja,cu,ws,El,is){const Ss=(bs-qs)*Ja;let Ts=0;Ts=cu!==ws?-El*Ks-kh:-Ks*is*ws+.5*ws;for(const Vo of Yi)for(const Ui of Vo.positionedGlyphs)Ui.x+=Ss,Ui.y+=Ts})(me.positionedLines,ns,Pl,Hs,zn,Xi,kt,zr,wt.length),me.top+=-Hs*zr,me.bottom=me.top+zr,me.left+=-Pl*zn,me.right=me.left+zn}(q,t,n,s,ye,b,S,k,j,R,H,ee),!function(me){for(const Be of me)if(Be.positionedGlyphs.length!==0)return!1;return!0}(ze)&&q}const If={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Bp={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},Mf={40:!0};function yd(i,t,n,s,f,v){if(t.imageName){const b=s[t.imageName];return b?b.displaySize[0]*t.scale*Ro/v+f:0}{const b=n[t.fontStack],S=b&&b[i];return S?S.metrics.advance*t.scale+f:0}}function kf(i,t,n,s){const f=Math.pow(i-t,2);return s?i<t?f/2:2*f:f+Math.abs(n)*n}function Af(i,t,n){let s=0;return i===10&&(s-=1e4),n&&(s+=150),i!==40&&i!==65288||(s+=50),t!==41&&t!==65289||(s+=50),s}function hp(i,t,n,s,f,v){let b=null,S=kf(t,n,f,v);for(const k of s){const R=kf(t-k.x,n,f,v)+k.badness;R<=S&&(b=k,S=R)}return{index:i,x:t,priorBreak:b,badness:S}}function Np(i){return i?Np(i.priorBreak).concat(i.index):[]}function vc(i,t,n,s,f,v){if(!i)return[];const b=[],S=function(j,H,X,ee,oe,ye){let Pe=0;for(let Ze=0;Ze<j.length();Ze++){const ze=j.getSection(Ze);Pe+=yd(j.getCharCode(Ze),ze,ee,oe,H,ye)}return Pe/Math.max(1,Math.ceil(Pe/X))}(i,t,n,s,f,v),k=i.text.indexOf("")>=0;let R=0;for(let j=0;j<i.length();j++){const H=i.getSection(j),X=i.getCharCode(j);if(If[X]||(R+=yd(X,H,s,f,t,v)),j<i.length()-1){const ee=!((F=X)<11904)&&(!!dn["CJK Compatibility Forms"](F)||!!dn["CJK Compatibility"](F)||!!dn["CJK Strokes"](F)||!!dn["CJK Symbols and Punctuation"](F)||!!dn["Enclosed CJK Letters and Months"](F)||!!dn["Halfwidth and Fullwidth Forms"](F)||!!dn["Ideographic Description Characters"](F)||!!dn["Vertical Forms"](F)||Fs.test(String.fromCodePoint(F)));(Bp[X]||ee||H.imageName||j!==i.length()-2&&Mf[i.getCharCode(j+1)])&&b.push(hp(j+1,R,S,b,Af(X,i.getCharCode(j+1),ee&&k),!1))}}var F;return Np(hp(i.length(),R,S,b,0,!0))}function dp(i){let t=.5,n=.5;switch(i){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(i){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:t,verticalAlign:n}}function Jd(i,t,n){const s=t.getMaxScale()*Ro,{maxImageWidth:f,maxImageHeight:v}=t.getMaxImageSize(i),b=Math.max(s,v*n);return{verticalLineContentWidth:Math.max(s,f*n),horizontalLineContentHeight:b}}function $p(i){switch(i){case"top":return 0;case"center":return .5;default:return 1}}function Rf(i,t,n){return!(i===M.al.horizontal||!t&&!xi(n)||t&&(If[n]||(s=n,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(s)))));var s}function o(i,t,n,s,f,v){const b=v[i.fontStack],S=function(R,F,j,H){if(R&&R.rect)return R;const X=F[j.fontStack],ee=X&&X[H];return ee?{rect:null,metrics:ee.metrics}:null}(b&&b[t],f,i,t);if(S===null)return null;let k;if(n)k=s.verticalLineContentWidth-i.scale*Ro;else{const R=$p(i.verticalAlign);k=(s.horizontalLineContentHeight-i.scale*Ro)*R}return{rect:S.rect,metrics:S.metrics,baselineOffset:k}}function l(i,t,n,s,f){const v=f[i.imageName];if(!v)return null;const b=v.paddedRect,S=v.displaySize,k={width:S[0],height:S[1],left:Ws,top:-3,advance:t?S[1]:S[0]};let R;if(t)R=s.verticalLineContentWidth-S[1]*i.scale;else{const F=$p(i.verticalAlign);R=(s.horizontalLineContentHeight-S[1]*i.scale)*F}return{rect:b,metrics:k,baselineOffset:R,imageOffset:(t?S[0]:S[1])*i.scale-Ro*n}}function x(i,t,n,s){if(s===0)return;const f=i[n],v=(i[n].x+f.metrics.advance*f.scale)*s;for(let b=t;b<=n;b++)i[b].x-=v}function C(i,t,n){const{horizontalAlign:s,verticalAlign:f}=dp(n),v=t[0]-i.displaySize[0]*s,b=t[1]-i.displaySize[1]*f;return{image:i,top:b,bottom:b+i.displaySize[1],left:v,right:v+i.displaySize[0]}}function z(i){var t,n;let s=i.left,f=i.top,v=i.right-s,b=i.bottom-f;const S=(t=i.image.textFitWidth)!==null&&t!==void 0?t:"stretchOrShrink",k=(n=i.image.textFitHeight)!==null&&n!==void 0?n:"stretchOrShrink",R=(i.image.content[2]-i.image.content[0])/(i.image.content[3]-i.image.content[1]);if(k==="proportional"){if(S==="stretchOnly"&&v/b<R||S==="proportional"){const F=Math.ceil(b*R);s*=F/v,v=F}}else if(S==="proportional"&&k==="stretchOnly"&&R!==0&&v/b>R){const F=Math.ceil(v/R);f*=F/b,b=F}return{x1:s,y1:f,x2:s+v,y2:f+b}}function V(i,t,n,s,f,v){const b=i.image;let S;if(b.content){const ye=b.content,Pe=b.pixelRatio||1;S=[ye[0]/Pe,ye[1]/Pe,b.displaySize[0]-ye[2]/Pe,b.displaySize[1]-ye[3]/Pe]}const k=t.left*v,R=t.right*v;let F,j,H,X;n==="width"||n==="both"?(X=f[0]+k-s[3],j=f[0]+R+s[1]):(X=f[0]+(k+R-b.displaySize[0])/2,j=X+b.displaySize[0]);const ee=t.top*v,oe=t.bottom*v;return n==="height"||n==="both"?(F=f[1]+ee-s[0],H=f[1]+oe+s[2]):(F=f[1]+(ee+oe-b.displaySize[1])/2,H=F+b.displaySize[1]),{image:b,top:F,right:j,bottom:H,left:X,collisionPadding:S}}const se=255,Re=128,Ge=se*Re;function It(i,t){const{expression:n}=t;if(n.kind==="constant")return{kind:"constant",layoutSize:n.evaluate(new si(i+1))};if(n.kind==="source")return{kind:"source"};{const{zoomStops:s,interpolationType:f}=n;let v=0;for(;v<s.length&&s[v]<=i;)v++;v=Math.max(0,v-1);let b=v;for(;b<s.length&&s[b]<i+1;)b++;b=Math.min(s.length-1,b);const S=s[v],k=s[b];return n.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:k,interpolationType:f}:{kind:"camera",minZoom:S,maxZoom:k,minSize:n.evaluate(new si(S)),maxSize:n.evaluate(new si(k)),interpolationType:f}}}function Qt(i,t,n){let s="never";const f=i.get(t);return f?s=f:i.get(n)&&(s="always"),s}const ir=rs.VectorTileFeature.types,Jt=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Er(i,t,n,s,f,v,b,S,k,R,F,j,H){const X=S?Math.min(Ge,Math.round(S[0])):0,ee=S?Math.min(Ge,Math.round(S[1])):0;i.emplaceBack(t,n,Math.round(32*s),Math.round(32*f),v,b,(X<<1)+(k?1:0),ee,16*R,16*F,256*j,256*H)}function Or(i,t,n){i.emplaceBack(t.x,t.y,n),i.emplaceBack(t.x,t.y,n),i.emplaceBack(t.x,t.y,n),i.emplaceBack(t.x,t.y,n)}function Ur(i){for(const t of i.sections)if(oa(t.text))return!0;return!1}class fo{constructor(t){this.layoutVertexArray=new mi,this.indexArray=new Pn,this.programConfigurations=t,this.segments=new Rn,this.dynamicLayoutVertexArray=new ni,this.opacityVertexArray=new ki,this.hasVisibleVertices=!1,this.placedSymbolArray=new De}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(t,n,s,f){this.isEmpty()||(s&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,fm.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,n),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,pd.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,Jt,!0),this.opacityVertexBuffer.itemSize=1),(s||f)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}ur("SymbolBuffers",fo);class pt{constructor(t,n,s){this.layoutVertexArray=new t,this.layoutAttributes=n,this.indexArray=new s,this.segments=new Rn,this.collisionVertexArray=new Mn}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,Tf.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}ur("CollisionBuffers",pt);class Xe{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(b=>b.id),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const n=this.layers[0]._unevaluatedLayout._values;this.textSizeData=It(this.zoom,n["text-size"]),this.iconSizeData=It(this.zoom,n["icon-size"]);const s=this.layers[0].layout,f=s.get("symbol-sort-key"),v=s.get("symbol-z-order");this.canOverlap=Qt(s,"text-overlap","text-allow-overlap")!=="never"||Qt(s,"icon-overlap","icon-allow-overlap")!=="never"||s.get("text-ignore-placement")||s.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!f.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,s.get("symbol-placement")==="point"&&(this.writingModes=s.get("text-writing-mode").map(b=>M.al[b])),this.stateDependentLayerIds=this.layers.filter(b=>b.isStateDependent()).map(b=>b.id),this.sourceID=t.sourceID}createArrays(){this.text=new fo(new xl(this.layers,this.zoom,t=>/^text/.test(t))),this.icon=new fo(new xl(this.layers,this.zoom,t=>/^icon/.test(t))),this.glyphOffsetArray=new $e,this.lineVertexArray=new Ue,this.symbolInstances=new Oe,this.textAnchorOffsets=new Mt}calculateGlyphDependencies(t,n,s,f,v){for(let b=0;b<t.length;b++)if(n[t.charCodeAt(b)]=!0,(s||f)&&v){const S=Qd[t.charAt(b)];S&&(n[S.charCodeAt(0)]=!0)}}populate(t,n,s){const f=this.layers[0],v=f.layout,b=v.get("text-font"),S=v.get("text-field"),k=v.get("icon-image"),R=(S.value.kind!=="constant"||S.value.value instanceof ci&&!S.value.value.isEmpty()||S.value.value.toString().length>0)&&(b.value.kind!=="constant"||b.value.value.length>0),F=k.value.kind!=="constant"||!!k.value.value||Object.keys(k.parameters).length>0,j=v.get("symbol-sort-key");if(this.features=[],!R&&!F)return;const H=n.iconDependencies,X=n.glyphDependencies,ee=n.availableImages,oe=new si(this.zoom);for(const{feature:ye,id:Pe,index:Ze,sourceLayerIndex:ze}of t){const q=f._featureFilter.needGeometry,me=Du(ye,q);if(!f._featureFilter.filter(oe,me,s))continue;let Be,mt;if(q||(me.geometry=bl(ye)),R){const wt=f.getValueAndResolveTokens("text-field",me,s,ee),kt=ci.factory(wt),Xt=this.hasRTLText=this.hasRTLText||Ur(kt);(!Xt||$l.getRTLTextPluginStatus()==="unavailable"||Xt&&$l.isParsed())&&(Be=Lp(kt,f,me))}if(F){const wt=f.getValueAndResolveTokens("icon-image",me,s,ee);mt=wt instanceof no?wt:no.fromString(wt)}if(!Be&&!mt)continue;const Ut=this.sortFeaturesByKey?j.evaluate(me,{},s):void 0;if(this.features.push({id:Pe,text:Be,icon:mt,index:Ze,sourceLayerIndex:ze,geometry:me.geometry,properties:ye.properties,type:ir[ye.type],sortKey:Ut}),mt&&(H[mt.name]=!0),Be){const wt=b.evaluate(me,{},s).join(","),kt=v.get("text-rotation-alignment")!=="viewport"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(M.al.vertical)>=0;for(const Xt of Be.sections)if(Xt.image)H[Xt.image.name]=!0;else{const Zt=Bl(Be.toString()),Kt=Xt.fontStack||wt,zt=X[Kt]=X[Kt]||{};this.calculateGlyphDependencies(Xt.text,zt,kt,this.allowVerticalPlacement,Zt)}}}v.get("symbol-placement")==="line"&&(this.features=function(ye){const Pe={},Ze={},ze=[];let q=0;function me(wt){ze.push(ye[wt]),q++}function Be(wt,kt,Xt){const Zt=Ze[wt];return delete Ze[wt],Ze[kt]=Zt,ze[Zt].geometry[0].pop(),ze[Zt].geometry[0]=ze[Zt].geometry[0].concat(Xt[0]),Zt}function mt(wt,kt,Xt){const Zt=Pe[kt];return delete Pe[kt],Pe[wt]=Zt,ze[Zt].geometry[0].shift(),ze[Zt].geometry[0]=Xt[0].concat(ze[Zt].geometry[0]),Zt}function Ut(wt,kt,Xt){const Zt=Xt?kt[0][kt[0].length-1]:kt[0][0];return`${wt}:${Zt.x}:${Zt.y}`}for(let wt=0;wt<ye.length;wt++){const kt=ye[wt],Xt=kt.geometry,Zt=kt.text?kt.text.toString():null;if(!Zt){me(wt);continue}const Kt=Ut(Zt,Xt),zt=Ut(Zt,Xt,!0);if(Kt in Ze&&zt in Pe&&Ze[Kt]!==Pe[zt]){const Ir=mt(Kt,zt,Xt),Hr=Be(Kt,zt,ze[Ir].geometry);delete Pe[Kt],delete Ze[zt],Ze[Ut(Zt,ze[Hr].geometry,!0)]=Hr,ze[Ir].geometry=null}else Kt in Ze?Be(Kt,zt,Xt):zt in Pe?mt(Kt,zt,Xt):(me(wt),Pe[Kt]=q-1,Ze[zt]=q-1)}return ze.filter(wt=>wt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ye,Pe)=>ye.sortKey-Pe.sortKey)}update(t,n,s){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,n,this.layers,s),this.icon.programConfigurations.updatePaintArrays(t,n,this.layers,s))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,n){const s=this.lineVertexArray.length;if(t.segment!==void 0){let f=t.dist(n[t.segment+1]),v=t.dist(n[t.segment]);const b={};for(let S=t.segment+1;S<n.length;S++)b[S]={x:n[S].x,y:n[S].y,tileUnitDistanceFromAnchor:f},S<n.length-1&&(f+=n[S+1].dist(n[S]));for(let S=t.segment||0;S>=0;S--)b[S]={x:n[S].x,y:n[S].y,tileUnitDistanceFromAnchor:v},S>0&&(v+=n[S-1].dist(n[S]));for(let S=0;S<n.length;S++){const k=b[S];this.lineVertexArray.emplaceBack(k.x,k.y,k.tileUnitDistanceFromAnchor)}}return{lineStartIndex:s,lineLength:this.lineVertexArray.length-s}}addSymbols(t,n,s,f,v,b,S,k,R,F,j,H){const X=t.indexArray,ee=t.layoutVertexArray,oe=t.segments.prepareSegment(4*n.length,ee,X,this.canOverlap?b.sortKey:void 0),ye=this.glyphOffsetArray.length,Pe=oe.vertexLength,Ze=this.allowVerticalPlacement&&S===M.al.vertical?Math.PI/2:0,ze=b.text&&b.text.sections;for(let q=0;q<n.length;q++){const{tl:me,tr:Be,bl:mt,br:Ut,tex:wt,pixelOffsetTL:kt,pixelOffsetBR:Xt,minFontScaleX:Zt,minFontScaleY:Kt,glyphOffset:zt,isSDF:Ir,sectionIndex:Hr}=n[q],Wr=oe.vertexLength,zr=zt[1];Er(ee,k.x,k.y,me.x,zr+me.y,wt.x,wt.y,s,Ir,kt.x,kt.y,Zt,Kt),Er(ee,k.x,k.y,Be.x,zr+Be.y,wt.x+wt.w,wt.y,s,Ir,Xt.x,kt.y,Zt,Kt),Er(ee,k.x,k.y,mt.x,zr+mt.y,wt.x,wt.y+wt.h,s,Ir,kt.x,Xt.y,Zt,Kt),Er(ee,k.x,k.y,Ut.x,zr+Ut.y,wt.x+wt.w,wt.y+wt.h,s,Ir,Xt.x,Xt.y,Zt,Kt),Or(t.dynamicLayoutVertexArray,k,Ze),X.emplaceBack(Wr,Wr+2,Wr+1),X.emplaceBack(Wr+1,Wr+2,Wr+3),oe.vertexLength+=4,oe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(zt[0]),q!==n.length-1&&Hr===n[q+1].sectionIndex||t.programConfigurations.populatePaintArrays(ee.length,b,b.index,{},H,ze&&ze[Hr])}t.placedSymbolArray.emplaceBack(k.x,k.y,ye,this.glyphOffsetArray.length-ye,Pe,R,F,k.segment,s?s[0]:0,s?s[1]:0,f[0],f[1],S,0,!1,0,j)}_addCollisionDebugVertex(t,n,s,f,v,b){return n.emplaceBack(0,0),t.emplaceBack(s.x,s.y,f,v,Math.round(b.x),Math.round(b.y))}addCollisionDebugVertices(t,n,s,f,v,b,S){const k=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),R=k.vertexLength,F=v.layoutVertexArray,j=v.collisionVertexArray,H=S.anchorX,X=S.anchorY;this._addCollisionDebugVertex(F,j,b,H,X,new we(t,n)),this._addCollisionDebugVertex(F,j,b,H,X,new we(s,n)),this._addCollisionDebugVertex(F,j,b,H,X,new we(s,f)),this._addCollisionDebugVertex(F,j,b,H,X,new we(t,f)),k.vertexLength+=4;const ee=v.indexArray;ee.emplaceBack(R,R+1),ee.emplaceBack(R+1,R+2),ee.emplaceBack(R+2,R+3),ee.emplaceBack(R+3,R),k.primitiveLength+=4}addDebugCollisionBoxes(t,n,s,f){for(let v=t;v<n;v++){const b=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(b.x1,b.y1,b.x2,b.y2,f?this.textCollisionBox:this.iconCollisionBox,b.anchorPoint,s)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new pt(Ai,Ki.members,qi),this.iconCollisionBox=new pt(Ai,Ki.members,qi);for(let t=0;t<this.symbolInstances.length;t++){const n=this.symbolInstances.get(t);this.addDebugCollisionBoxes(n.textBoxStartIndex,n.textBoxEndIndex,n,!0),this.addDebugCollisionBoxes(n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n,!0),this.addDebugCollisionBoxes(n.iconBoxStartIndex,n.iconBoxEndIndex,n,!1),this.addDebugCollisionBoxes(n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex,n,!1)}}_deserializeCollisionBoxesForSymbol(t,n,s,f,v,b,S,k,R){const F={};for(let j=n;j<s;j++){const H=t.get(j);F.textBox={x1:H.x1,y1:H.y1,x2:H.x2,y2:H.y2,anchorPointX:H.anchorPointX,anchorPointY:H.anchorPointY},F.textFeatureIndex=H.featureIndex;break}for(let j=f;j<v;j++){const H=t.get(j);F.verticalTextBox={x1:H.x1,y1:H.y1,x2:H.x2,y2:H.y2,anchorPointX:H.anchorPointX,anchorPointY:H.anchorPointY},F.verticalTextFeatureIndex=H.featureIndex;break}for(let j=b;j<S;j++){const H=t.get(j);F.iconBox={x1:H.x1,y1:H.y1,x2:H.x2,y2:H.y2,anchorPointX:H.anchorPointX,anchorPointY:H.anchorPointY},F.iconFeatureIndex=H.featureIndex;break}for(let j=k;j<R;j++){const H=t.get(j);F.verticalIconBox={x1:H.x1,y1:H.y1,x2:H.x2,y2:H.y2,anchorPointX:H.anchorPointX,anchorPointY:H.anchorPointY},F.verticalIconFeatureIndex=H.featureIndex;break}return F}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let n=0;n<this.symbolInstances.length;n++){const s=this.symbolInstances.get(n);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,s.textBoxStartIndex,s.textBoxEndIndex,s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s.iconBoxStartIndex,s.iconBoxEndIndex,s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,n){const s=t.placedSymbolArray.get(n),f=s.vertexStartIndex+4*s.numGlyphs;for(let v=s.vertexStartIndex;v<f;v+=4)t.indexArray.emplaceBack(v,v+2,v+1),t.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const n=Math.sin(t),s=Math.cos(t),f=[],v=[],b=[];for(let S=0;S<this.symbolInstances.length;++S){b.push(S);const k=this.symbolInstances.get(S);f.push(0|Math.round(n*k.anchorX+s*k.anchorY)),v.push(k.featureIndex)}return b.sort((S,k)=>f[S]-f[k]||v[k]-v[S]),b}addToSortKeyRanges(t,n){const s=this.sortKeyRanges[this.sortKeyRanges.length-1];s&&s.sortKey===n?s.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:n,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const n of this.symbolInstanceIndexes){const s=this.symbolInstances.get(n);this.featureSortOrder.push(s.featureIndex),[s.rightJustifiedTextSymbolIndex,s.centerJustifiedTextSymbolIndex,s.leftJustifiedTextSymbolIndex].forEach((f,v,b)=>{f>=0&&b.indexOf(f)===v&&this.addIndicesForPlacedSymbol(this.text,f)}),s.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,s.verticalPlacedTextSymbolIndex),s.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,s.placedIconSymbolIndex),s.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,s.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let xt,dr;ur("SymbolBucket",Xe,{omit:["layers","collisionBoxArray","features","compareText"]}),Xe.MAX_GLYPHS=65535,Xe.addDynamicAttributes=Or;var Zr={get paint(){return dr=dr||new Di({"icon-opacity":new Vr(pe.paint_symbol["icon-opacity"]),"icon-color":new Vr(pe.paint_symbol["icon-color"]),"icon-halo-color":new Vr(pe.paint_symbol["icon-halo-color"]),"icon-halo-width":new Vr(pe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Vr(pe.paint_symbol["icon-halo-blur"]),"icon-translate":new fr(pe.paint_symbol["icon-translate"]),"icon-translate-anchor":new fr(pe.paint_symbol["icon-translate-anchor"]),"text-opacity":new Vr(pe.paint_symbol["text-opacity"]),"text-color":new Vr(pe.paint_symbol["text-color"],{runtimeType:Zn,getOverride:i=>i.textColor,hasOverride:i=>!!i.textColor}),"text-halo-color":new Vr(pe.paint_symbol["text-halo-color"]),"text-halo-width":new Vr(pe.paint_symbol["text-halo-width"]),"text-halo-blur":new Vr(pe.paint_symbol["text-halo-blur"]),"text-translate":new fr(pe.paint_symbol["text-translate"]),"text-translate-anchor":new fr(pe.paint_symbol["text-translate-anchor"])})},get layout(){return xt=xt||new Di({"symbol-placement":new fr(pe.layout_symbol["symbol-placement"]),"symbol-spacing":new fr(pe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new fr(pe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Vr(pe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new fr(pe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new fr(pe.layout_symbol["icon-allow-overlap"]),"icon-overlap":new fr(pe.layout_symbol["icon-overlap"]),"icon-ignore-placement":new fr(pe.layout_symbol["icon-ignore-placement"]),"icon-optional":new fr(pe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new fr(pe.layout_symbol["icon-rotation-alignment"]),"icon-size":new Vr(pe.layout_symbol["icon-size"]),"icon-text-fit":new fr(pe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new fr(pe.layout_symbol["icon-text-fit-padding"]),"icon-image":new Vr(pe.layout_symbol["icon-image"]),"icon-rotate":new Vr(pe.layout_symbol["icon-rotate"]),"icon-padding":new Vr(pe.layout_symbol["icon-padding"]),"icon-keep-upright":new fr(pe.layout_symbol["icon-keep-upright"]),"icon-offset":new Vr(pe.layout_symbol["icon-offset"]),"icon-anchor":new Vr(pe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new fr(pe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new fr(pe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new fr(pe.layout_symbol["text-rotation-alignment"]),"text-field":new Vr(pe.layout_symbol["text-field"]),"text-font":new Vr(pe.layout_symbol["text-font"]),"text-size":new Vr(pe.layout_symbol["text-size"]),"text-max-width":new Vr(pe.layout_symbol["text-max-width"]),"text-line-height":new fr(pe.layout_symbol["text-line-height"]),"text-letter-spacing":new Vr(pe.layout_symbol["text-letter-spacing"]),"text-justify":new Vr(pe.layout_symbol["text-justify"]),"text-radial-offset":new Vr(pe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new fr(pe.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Vr(pe.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Vr(pe.layout_symbol["text-anchor"]),"text-max-angle":new fr(pe.layout_symbol["text-max-angle"]),"text-writing-mode":new fr(pe.layout_symbol["text-writing-mode"]),"text-rotate":new Vr(pe.layout_symbol["text-rotate"]),"text-padding":new fr(pe.layout_symbol["text-padding"]),"text-keep-upright":new fr(pe.layout_symbol["text-keep-upright"]),"text-transform":new Vr(pe.layout_symbol["text-transform"]),"text-offset":new Vr(pe.layout_symbol["text-offset"]),"text-allow-overlap":new fr(pe.layout_symbol["text-allow-overlap"]),"text-overlap":new fr(pe.layout_symbol["text-overlap"]),"text-ignore-placement":new fr(pe.layout_symbol["text-ignore-placement"]),"text-optional":new fr(pe.layout_symbol["text-optional"])})}};class un{constructor(t){if(t.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=t.property.overrides?t.property.overrides.runtimeType:Br,this.defaultValue=t}evaluate(t){if(t.formattedSection){const n=this.defaultValue.property.overrides;if(n&&n.hasOverride(t.formattedSection))return n.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}ur("FormatSectionOverride",un,{omit:["defaultValue"]});class Qr extends $s{constructor(t){super(t,Zr)}recalculate(t,n){if(super.recalculate(t,n),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const s=this.layout.get("text-writing-mode");if(s){const f=[];for(const v of s)f.indexOf(v)<0&&f.push(v);this.layout._values["text-writing-mode"]=f}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(t,n,s,f){const v=this.layout.get(t).evaluate(n,{},s,f),b=this._unevaluatedLayout._values[t];return b.isDataDriven()||cl(b.value)||!v?v:function(S,k){return k.replace(/{([^{}]+)}/g,(R,F)=>S&&F in S?String(S[F]):"")}(n.properties,v)}createBucket(t){return new Xe(t)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const t of Zr.paint.overridableProperties){if(!Qr.hasPaintOverride(this.layout,t))continue;const n=this.paint.get(t),s=new un(n),f=new $c(s,n.property.specification);let v=null;v=n.value.kind==="constant"||n.value.kind==="source"?new jc("source",f):new Uc("composite",f,n.value.zoomStops),this.paint._values[t]=new gs(n.property,v,n.parameters)}}_handleOverridablePaintPropertyUpdate(t,n,s){return!(!this.layout||n.isDataDriven()||s.isDataDriven())&&Qr.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,n){const s=t.get("text-field"),f=Zr.paint.properties[n];let v=!1;const b=S=>{for(const k of S)if(f.overrides&&f.overrides.hasOverride(k))return void(v=!0)};if(s.value.kind==="constant"&&s.value.value instanceof ci)b(s.value.value.sections);else if(s.value.kind==="source"){const S=R=>{v||(R instanceof yr&&di(R.value)===Js?b(R.value.sections):R instanceof Al?b(R.sections):R.eachChild(S))},k=s.value;k._styleExpression&&S(k._styleExpression.expression)}return v}}let pn;var vs={get paint(){return pn=pn||new Di({"background-color":new fr(pe.paint_background["background-color"]),"background-pattern":new Ns(pe.paint_background["background-pattern"]),"background-opacity":new fr(pe.paint_background["background-opacity"])})}};class li extends $s{constructor(t){super(t,vs)}}let xc;var mm={get paint(){return xc=xc||new Di({"raster-opacity":new fr(pe.paint_raster["raster-opacity"]),"raster-hue-rotate":new fr(pe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new fr(pe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new fr(pe.paint_raster["raster-brightness-max"]),"raster-saturation":new fr(pe.paint_raster["raster-saturation"]),"raster-contrast":new fr(pe.paint_raster["raster-contrast"]),"raster-resampling":new fr(pe.paint_raster["raster-resampling"]),"raster-fade-duration":new fr(pe.paint_raster["raster-fade-duration"])})}};class zy extends $s{constructor(t){super(t,mm)}}class Ly extends $s{constructor(t){super(t,{}),this.onAdd=n=>{this.implementation.onAdd&&this.implementation.onAdd(n,n.painter.context.gl)},this.onRemove=n=>{this.implementation.onRemove&&this.implementation.onRemove(n,n.painter.context.gl)},this.implementation=t}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Dy{constructor(t){this._methodToThrottle=t,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Oy={once:!0},gm=63710088e-1;class _d{constructor(t,n){if(isNaN(t)||isNaN(n))throw new Error(`Invalid LngLat object: (${t}, ${n})`);if(this.lng=+t,this.lat=+n,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new _d(or(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const n=Math.PI/180,s=this.lat*n,f=t.lat*n,v=Math.sin(s)*Math.sin(f)+Math.cos(s)*Math.cos(f)*Math.cos((t.lng-this.lng)*n);return gm*Math.acos(Math.min(v,1))}static convert(t){if(t instanceof _d)return t;if(Array.isArray(t)&&(t.length===2||t.length===3))return new _d(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&typeof t=="object"&&t!==null)return new _d(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const pg=2*Math.PI*gm;function mg(i){return pg*Math.cos(i*Math.PI/180)}function Nu(i){return(180+i)/360}function gg(i){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360}function yg(i,t){return i/mg(t)}function Rh(i){return 360/Math.PI*Math.atan(Math.exp((180-360*i)*Math.PI/180))-90}function kn(i,t){return i*mg(Rh(t))}class fp{constructor(t,n,s=0){this.x=+t,this.y=+n,this.z=+s}static fromLngLat(t,n=0){const s=_d.convert(t);return new fp(Nu(s.lng),gg(s.lat),yg(n,s.lat))}toLngLat(){return new _d(360*this.x-180,Rh(this.y))}toAltitude(){return kn(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/pg*(t=Rh(this.y),1/Math.cos(t*Math.PI/180));var t}}function Cl(i,t,n){var s=2*Math.PI*6378137/256/Math.pow(2,n);return[i*s-2*Math.PI*6378137/2,t*s-2*Math.PI*6378137/2]}class zo{constructor(t,n,s){if(!function(f,v,b){return!(f<0||f>25||b<0||b>=Math.pow(2,f)||v<0||v>=Math.pow(2,f))}(t,n,s))throw new Error(`x=${n}, y=${s}, z=${t} outside of bounds. 0<=x<${Math.pow(2,t)}, 0<=y<${Math.pow(2,t)} 0<=z<=25 `);this.z=t,this.x=n,this.y=s,this.key=zf(0,t,t,n,s)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,n,s){const f=(b=this.y,S=this.z,k=Cl(256*(v=this.x),256*(b=Math.pow(2,S)-b-1),S),R=Cl(256*(v+1),256*(b+1),S),k[0]+","+k[1]+","+R[0]+","+R[1]);var v,b,S,k,R;const F=function(j,H,X){let ee,oe="";for(let ye=j;ye>0;ye--)ee=1<<ye-1,oe+=(H&ee?1:0)+(X&ee?2:0);return oe}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(s==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,n>1?"@2x":"").replace(/{quadkey}/g,F).replace(/{bbox-epsg-3857}/g,f)}isChildOf(t){const n=this.z-t.z;return n>0&&t.x===this.x>>n&&t.y===this.y>>n}getTilePoint(t){const n=Math.pow(2,this.z);return new we((t.x*n-this.x)*bt,(t.y*n-this.y)*bt)}toString(){return`${this.z}/${this.x}/${this.y}`}}class _g{constructor(t,n){this.wrap=t,this.canonical=n,this.key=zf(t,n.z,n.z,n.x,n.y)}}class xs{constructor(t,n,s,f,v){if(this.terrainRttPosMatrix32f=null,t<s)throw new Error(`overscaledZ should be >= z; overscaledZ = ${t}; z = ${s}`);this.overscaledZ=t,this.wrap=n,this.canonical=new zo(s,+f,+v),this.key=zf(n,t,s,f,v)}clone(){return new xs(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const n=this.canonical.z-t;return t>this.canonical.z?new xs(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new xs(t,this.wrap,t,this.canonical.x>>n,this.canonical.y>>n)}calculateScaledKey(t,n){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const s=this.canonical.z-t;return t>this.canonical.z?zf(this.wrap*+n,t,this.canonical.z,this.canonical.x,this.canonical.y):zf(this.wrap*+n,t,t,this.canonical.x>>s,this.canonical.y>>s)}isChildOf(t){if(t.wrap!==this.wrap)return!1;const n=this.canonical.z-t.canonical.z;return t.overscaledZ===0||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>n&&t.canonical.y===this.canonical.y>>n}children(t){if(this.overscaledZ>=t)return[new xs(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const n=this.canonical.z+1,s=2*this.canonical.x,f=2*this.canonical.y;return[new xs(n,this.wrap,n,s,f),new xs(n,this.wrap,n,s+1,f),new xs(n,this.wrap,n,s,f+1),new xs(n,this.wrap,n,s+1,f+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new xs(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new xs(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new _g(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(t){return this.canonical.getTilePoint(new fp(t.x-this.wrap,t.y))}}function zf(i,t,n,s,f){(i*=2)<0&&(i=-1*i-1);const v=1<<n;return(v*v*i+v*f+s).toString(36)+n.toString(36)+t.toString(36)}ur("CanonicalTileID",zo),ur("OverscaledTileID",xs,{omit:["terrainRttPosMatrix32f"]});class vg{constructor(t,n,s,f=1,v=1,b=1,S=0){if(this.uid=t,n.height!==n.width)throw new RangeError("DEM tiles must be square");if(s&&!["mapbox","terrarium","custom"].includes(s))return void jr(`"${s}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=n.height;const k=this.dim=n.height-2;switch(this.data=new Uint32Array(n.data.buffer),s){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=f,this.greenFactor=v,this.blueFactor=b,this.baseShift=S;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let R=0;R<k;R++)this.data[this._idx(-1,R)]=this.data[this._idx(0,R)],this.data[this._idx(k,R)]=this.data[this._idx(k-1,R)],this.data[this._idx(R,-1)]=this.data[this._idx(R,0)],this.data[this._idx(R,k)]=this.data[this._idx(R,k-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(k,-1)]=this.data[this._idx(k-1,0)],this.data[this._idx(-1,k)]=this.data[this._idx(0,k-1)],this.data[this._idx(k,k)]=this.data[this._idx(k-1,k-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let R=0;R<k;R++)for(let F=0;F<k;F++){const j=this.get(R,F);j>this.max&&(this.max=j),j<this.min&&(this.min=j)}}get(t,n){const s=new Uint8Array(this.data.buffer),f=4*this._idx(t,n);return this.unpack(s[f],s[f+1],s[f+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(t,n){if(t<-1||t>=this.dim+1||n<-1||n>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(n+1)*this.stride+(t+1)}unpack(t,n,s){return t*this.redFactor+n*this.greenFactor+s*this.blueFactor-this.baseShift}getPixels(){return new da({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,n,s){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let f=n*this.dim,v=n*this.dim+this.dim,b=s*this.dim,S=s*this.dim+this.dim;switch(n){case-1:f=v-1;break;case 1:v=f+1}switch(s){case-1:b=S-1;break;case 1:S=b+1}const k=-n*this.dim,R=-s*this.dim;for(let F=b;F<S;F++)for(let j=f;j<v;j++)this.data[this._idx(j,F)]=t.data[this._idx(j+k,F+R)]}}ur("DEMData",vg);class xg{constructor(t){this._stringToNumber={},this._numberToString=[];for(let n=0;n<t.length;n++){const s=t[n];this._stringToNumber[s]=n,this._numberToString[n]=s}}encode(t){return this._stringToNumber[t]}decode(t){if(t>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${t} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[t]}}class bg{constructor(t,n,s,f,v){this.type="Feature",this._vectorTileFeature=t,t._z=n,t._x=s,t._y=f,this.properties=t.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={geometry:this.geometry};for(const n in this)n!=="_geometry"&&n!=="_vectorTileFeature"&&(t[n]=this[n]);return t}}class wg{constructor(t,n){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Sa(bt,16,0),this.grid3D=new Sa(bt,16,0),this.featureIndexArray=new dt,this.promoteId=n}insert(t,n,s,f,v,b){const S=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(s,f,v);const k=b?this.grid3D:this.grid;for(let R=0;R<n.length;R++){const F=n[R],j=[1/0,1/0,-1/0,-1/0];for(let H=0;H<F.length;H++){const X=F[H];j[0]=Math.min(j[0],X.x),j[1]=Math.min(j[1],X.y),j[2]=Math.max(j[2],X.x),j[3]=Math.max(j[3],X.y)}j[0]<bt&&j[1]<bt&&j[2]>=0&&j[3]>=0&&k.insert(S,j[0],j[1],j[2],j[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new rs.VectorTile(new Tl(this.rawTileData)).layers,this.sourceLayerCoder=new xg(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(t,n,s,f){this.loadVTLayers();const v=t.params,b=bt/t.tileSize/t.scale,S=mh(v.filter),k=t.queryGeometry,R=t.queryPadding*b,F=Sg(k),j=this.grid.query(F.minX-R,F.minY-R,F.maxX+R,F.maxY+R),H=Sg(t.cameraQueryGeometry),X=this.grid3D.query(H.minX-R,H.minY-R,H.maxX+R,H.maxY+R,(ye,Pe,Ze,ze)=>function(q,me,Be,mt,Ut){for(const kt of q)if(me<=kt.x&&Be<=kt.y&&mt>=kt.x&&Ut>=kt.y)return!0;const wt=[new we(me,Be),new we(me,Ut),new we(mt,Ut),new we(mt,Be)];if(q.length>2){for(const kt of wt)if(ha(q,kt))return!0}for(let kt=0;kt<q.length-1;kt++)if(Kf(q[kt],q[kt+1],wt))return!0;return!1}(t.cameraQueryGeometry,ye-R,Pe-R,Ze+R,ze+R));for(const ye of X)j.push(ye);j.sort(zh);const ee={};let oe;for(let ye=0;ye<j.length;ye++){const Pe=j[ye];if(Pe===oe)continue;oe=Pe;const Ze=this.featureIndexArray.get(Pe);let ze=null;this.loadMatchingFeature(ee,Ze.bucketIndex,Ze.sourceLayerIndex,Ze.featureIndex,S,v.layers,v.availableImages,n,s,f,(q,me,Be)=>(ze||(ze=bl(q)),me.queryIntersectsFeature({queryGeometry:k,feature:q,featureState:Be,geometry:ze,zoom:this.z,transform:t.transform,pixelsToTileUnits:b,pixelPosMatrix:t.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:t.getElevation})))}return ee}loadMatchingFeature(t,n,s,f,v,b,S,k,R,F,j){const H=this.bucketLayerIDs[n];if(b&&!H.some(ye=>b.has(ye)))return;const X=this.sourceLayerCoder.decode(s),ee=this.vtLayers[X].feature(f);if(v.needGeometry){const ye=Du(ee,!0);if(!v.filter(new si(this.tileID.overscaledZ),ye,this.tileID.canonical))return}else if(!v.filter(new si(this.tileID.overscaledZ),ee))return;const oe=this.getId(ee,X);for(let ye=0;ye<H.length;ye++){const Pe=H[ye];if(b&&!b.has(Pe))continue;const Ze=k[Pe];if(!Ze)continue;let ze={};oe&&F&&(ze=F.getState(Ze.sourceLayer||"_geojsonTileLayer",oe));const q=Tr({},R[Pe]);q.paint=jp(q.paint,Ze.paint,ee,ze,S),q.layout=jp(q.layout,Ze.layout,ee,ze,S);const me=!j||j(ee,Ze,ze);if(!me)continue;const Be=new bg(ee,this.z,this.x,this.y,oe);Be.layer=q;let mt=t[Pe];mt===void 0&&(mt=t[Pe]=[]),mt.push({featureIndex:f,feature:Be,intersectionZ:me})}}lookupSymbolFeatures(t,n,s,f,v,b,S,k){const R={};this.loadVTLayers();const F=mh(v);for(const j of t)this.loadMatchingFeature(R,s,f,j,F,b,S,k,n);return R}hasLayer(t){for(const n of this.bucketLayerIDs)for(const s of n)if(t===s)return!0;return!1}getId(t,n){var s;let f=t.id;return this.promoteId&&(f=t.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[n]],typeof f=="boolean"&&(f=Number(f)),f===void 0&&(!((s=t.properties)===null||s===void 0)&&s.cluster)&&this.promoteId&&(f=Number(t.properties.cluster_id))),f}}function jp(i,t,n,s,f){return mr(i,(v,b)=>{const S=t instanceof Wc?t.get(b):null;return S&&S.evaluate?S.evaluate(n,s,f):S})}function Sg(i){let t=1/0,n=1/0,s=-1/0,f=-1/0;for(const v of i)t=Math.min(t,v.x),n=Math.min(n,v.y),s=Math.max(s,v.x),f=Math.max(f,v.y);return{minX:t,minY:n,maxX:s,maxY:f}}function zh(i,t){return t-i}function ym(i,t,n,s,f){const v=[];for(let b=0;b<i.length;b++){const S=i[b];let k;for(let R=0;R<S.length-1;R++){let F=S[R],j=S[R+1];F.x<t&&j.x<t||(F.x<t?F=new we(t,F.y+(t-F.x)/(j.x-F.x)*(j.y-F.y))._round():j.x<t&&(j=new we(t,F.y+(t-F.x)/(j.x-F.x)*(j.y-F.y))._round()),F.y<n&&j.y<n||(F.y<n?F=new we(F.x+(n-F.y)/(j.y-F.y)*(j.x-F.x),n)._round():j.y<n&&(j=new we(F.x+(n-F.y)/(j.y-F.y)*(j.x-F.x),n)._round()),F.x>=s&&j.x>=s||(F.x>=s?F=new we(s,F.y+(s-F.x)/(j.x-F.x)*(j.y-F.y))._round():j.x>=s&&(j=new we(s,F.y+(s-F.x)/(j.x-F.x)*(j.y-F.y))._round()),F.y>=f&&j.y>=f||(F.y>=f?F=new we(F.x+(f-F.y)/(j.y-F.y)*(j.x-F.x),f)._round():j.y>=f&&(j=new we(F.x+(f-F.y)/(j.y-F.y)*(j.x-F.x),f)._round()),k&&F.equals(k[k.length-1])||(k=[F],v.push(k)),k.push(j)))))}}return v}ur("FeatureIndex",wg,{omit:["rawTileData","sourceLayerCoder"]});class bc extends we{constructor(t,n,s,f){super(t,n),this.angle=s,f!==void 0&&(this.segment=f)}clone(){return new bc(this.x,this.y,this.angle,this.segment)}}function To(i,t,n,s,f){if(t.segment===void 0||n===0)return!0;let v=t,b=t.segment+1,S=0;for(;S>-n/2;){if(b--,b<0)return!1;S-=i[b].dist(v),v=i[b]}S+=i[b].dist(i[b+1]),b++;const k=[];let R=0;for(;S<n/2;){const F=i[b],j=i[b+1];if(!j)return!1;let H=i[b-1].angleTo(F)-F.angleTo(j);for(H=Math.abs((H+3*Math.PI)%(2*Math.PI)-Math.PI),k.push({distance:S,angleDelta:H}),R+=H;S-k[0].distance>s;)R-=k.shift().angleDelta;if(R>f)return!1;b++,S+=F.dist(j)}return!0}function Lo(i){let t=0;for(let n=0;n<i.length-1;n++)t+=i[n].dist(i[n+1]);return t}function _m(i,t,n){return i?.6*t*n:0}function Tg(i,t){return Math.max(i?i.right-i.left:0,t?t.right-t.left:0)}function Fy(i,t,n,s,f,v){const b=_m(n,f,v),S=Tg(n,s)*v;let k=0;const R=Lo(i)/2;for(let F=0;F<i.length-1;F++){const j=i[F],H=i[F+1],X=j.dist(H);if(k+X>R){const ee=(R-k)/X,oe=ds.number(j.x,H.x,ee),ye=ds.number(j.y,H.y,ee),Pe=new bc(oe,ye,H.angleTo(j),F);return Pe._round(),!b||To(i,Pe,S,b,t)?Pe:void 0}k+=X}}function By(i,t,n,s,f,v,b,S,k){const R=_m(s,v,b),F=Tg(s,f),j=F*b,H=i[0].x===0||i[0].x===k||i[0].y===0||i[0].y===k;return t-j<t/4&&(t=j+t/4),Cg(i,H?t/2*S%t:(F/2+2*v)*b*S%t,t,R,n,j,H,!1,k)}function Cg(i,t,n,s,f,v,b,S,k){const R=v/2,F=Lo(i);let j=0,H=t-n,X=[];for(let ee=0;ee<i.length-1;ee++){const oe=i[ee],ye=i[ee+1],Pe=oe.dist(ye),Ze=ye.angleTo(oe);for(;H+n<j+Pe;){H+=n;const ze=(H-j)/Pe,q=ds.number(oe.x,ye.x,ze),me=ds.number(oe.y,ye.y,ze);if(q>=0&&q<k&&me>=0&&me<k&&H-R>=0&&H+R<=F){const Be=new bc(q,me,Ze,ee);Be._round(),s&&!To(i,Be,v,s,f)||X.push(Be)}}j+=Pe}return S||X.length||b||(X=Cg(i,j/2,n,s,f,v,b,!0,k)),X}ur("Anchor",bc);const pp=Ws;function Pg(i,t,n,s){const f=[],v=i.image,b=v.pixelRatio,S=v.paddedRect.w-2*pp,k=v.paddedRect.h-2*pp;let R={x1:i.left,y1:i.top,x2:i.right,y2:i.bottom};const F=v.stretchX||[[0,S]],j=v.stretchY||[[0,k]],H=(zt,Ir)=>zt+Ir[1]-Ir[0],X=F.reduce(H,0),ee=j.reduce(H,0),oe=S-X,ye=k-ee;let Pe=0,Ze=X,ze=0,q=ee,me=0,Be=oe,mt=0,Ut=ye;if(v.content&&s){const zt=v.content,Ir=zt[2]-zt[0],Hr=zt[3]-zt[1];(v.textFitWidth||v.textFitHeight)&&(R=z(i)),Pe=mp(F,0,zt[0]),ze=mp(j,0,zt[1]),Ze=mp(F,zt[0],zt[2]),q=mp(j,zt[1],zt[3]),me=zt[0]-Pe,mt=zt[1]-ze,Be=Ir-Ze,Ut=Hr-q}const wt=R.x1,kt=R.y1,Xt=R.x2-wt,Zt=R.y2-kt,Kt=(zt,Ir,Hr,Wr)=>{const zr=Df(zt.stretch-Pe,Ze,Xt,wt),zn=Up(zt.fixed-me,Be,zt.stretch,X),Xi=Df(Ir.stretch-ze,q,Zt,kt),ns=Up(Ir.fixed-mt,Ut,Ir.stretch,ee),ma=Df(Hr.stretch-Pe,Ze,Xt,wt),uu=Up(Hr.fixed-me,Be,Hr.stretch,X),Pl=Df(Wr.stretch-ze,q,Zt,kt),Hs=Up(Wr.fixed-mt,Ut,Wr.stretch,ee),Yi=new we(zr,Xi),bs=new we(ma,Xi),qs=new we(ma,Pl),Ks=new we(zr,Pl),Ja=new we(zn/b,ns/b),cu=new we(uu/b,Hs/b),ws=t*Math.PI/180;if(ws){const Ss=Math.sin(ws),Ts=Math.cos(ws),Vo=[Ts,-Ss,Ss,Ts];Yi._matMult(Vo),bs._matMult(Vo),Ks._matMult(Vo),qs._matMult(Vo)}const El=zt.stretch+zt.fixed,is=Ir.stretch+Ir.fixed;return{tl:Yi,tr:bs,bl:Ks,br:qs,tex:{x:v.paddedRect.x+pp+El,y:v.paddedRect.y+pp+is,w:Hr.stretch+Hr.fixed-El,h:Wr.stretch+Wr.fixed-is},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ja,pixelOffsetBR:cu,minFontScaleX:Be/b/Xt,minFontScaleY:Ut/b/Zt,isSDF:n}};if(s&&(v.stretchX||v.stretchY)){const zt=Lf(F,oe,X),Ir=Lf(j,ye,ee);for(let Hr=0;Hr<zt.length-1;Hr++){const Wr=zt[Hr],zr=zt[Hr+1];for(let zn=0;zn<Ir.length-1;zn++)f.push(Kt(Wr,Ir[zn],zr,Ir[zn+1]))}}else f.push(Kt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:k+1}));return f}function mp(i,t,n){let s=0;for(const f of i)s+=Math.max(t,Math.min(n,f[1]))-Math.max(t,Math.min(n,f[0]));return s}function Lf(i,t,n){const s=[{fixed:-1,stretch:0}];for(const[f,v]of i){const b=s[s.length-1];s.push({fixed:f-b.stretch,stretch:b.stretch}),s.push({fixed:f-b.stretch,stretch:b.stretch+(v-f)})}return s.push({fixed:t+pp,stretch:n}),s}function Df(i,t,n,s){return i/t*n+s}function Up(i,t,n,s){return i-t*n/s}class gp{constructor(t,n,s,f,v,b,S,k,R,F){var j;if(this.boxStartIndex=t.length,R){let H=b.top,X=b.bottom;const ee=b.collisionPadding;ee&&(H-=ee[1],X+=ee[3]);let oe=X-H;oe>0&&(oe=Math.max(10,oe),this.circleDiameter=oe)}else{const H=!((j=b.image)===null||j===void 0)&&j.content&&(b.image.textFitWidth||b.image.textFitHeight)?z(b):{x1:b.left,y1:b.top,x2:b.right,y2:b.bottom};H.y1=H.y1*S-k[0],H.y2=H.y2*S+k[2],H.x1=H.x1*S-k[3],H.x2=H.x2*S+k[1];const X=b.collisionPadding;if(X&&(H.x1-=X[0]*S,H.y1-=X[1]*S,H.x2+=X[2]*S,H.y2+=X[3]*S),F){const ee=new we(H.x1,H.y1),oe=new we(H.x2,H.y1),ye=new we(H.x1,H.y2),Pe=new we(H.x2,H.y2),Ze=F*Math.PI/180;ee._rotate(Ze),oe._rotate(Ze),ye._rotate(Ze),Pe._rotate(Ze),H.x1=Math.min(ee.x,oe.x,ye.x,Pe.x),H.x2=Math.max(ee.x,oe.x,ye.x,Pe.x),H.y1=Math.min(ee.y,oe.y,ye.y,Pe.y),H.y2=Math.max(ee.y,oe.y,ye.y,Pe.y)}t.emplaceBack(n.x,n.y,H.x1,H.y1,H.x2,H.y2,s,f,v)}this.boxEndIndex=t.length}}class Vp{constructor(t=[],n=(s,f)=>s<f?-1:s>f?1:0){if(this.data=t,this.length=this.data.length,this.compare=n,this.length>0)for(let s=(this.length>>1)-1;s>=0;s--)this._down(s)}push(t){this.data.push(t),this._up(this.length++)}pop(){if(this.length===0)return;const t=this.data[0],n=this.data.pop();return--this.length>0&&(this.data[0]=n,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:n,compare:s}=this,f=n[t];for(;t>0;){const v=t-1>>1,b=n[v];if(s(f,b)>=0)break;n[t]=b,t=v}n[t]=f}_down(t){const{data:n,compare:s}=this,f=this.length>>1,v=n[t];for(;t<f;){let b=1+(t<<1);const S=b+1;if(S<this.length&&s(n[S],n[b])<0&&(b=S),s(n[b],v)>=0)break;n[t]=n[b],t=b}n[t]=v}}function au(i,t=1,n=!1){let s=1/0,f=1/0,v=-1/0,b=-1/0;const S=i[0];for(let X=0;X<S.length;X++){const ee=S[X];(!X||ee.x<s)&&(s=ee.x),(!X||ee.y<f)&&(f=ee.y),(!X||ee.x>v)&&(v=ee.x),(!X||ee.y>b)&&(b=ee.y)}const k=Math.min(v-s,b-f);let R=k/2;const F=new Vp([],Of);if(k===0)return new we(s,f);for(let X=s;X<v;X+=k)for(let ee=f;ee<b;ee+=k)F.push(new Ff(X+R,ee+R,R,i));let j=function(X){let ee=0,oe=0,ye=0;const Pe=X[0];for(let Ze=0,ze=Pe.length,q=ze-1;Ze<ze;q=Ze++){const me=Pe[Ze],Be=Pe[q],mt=me.x*Be.y-Be.x*me.y;oe+=(me.x+Be.x)*mt,ye+=(me.y+Be.y)*mt,ee+=3*mt}return new Ff(oe/ee,ye/ee,0,X)}(i),H=F.length;for(;F.length;){const X=F.pop();(X.d>j.d||!j.d)&&(j=X,n&&console.log("found best %d after %d probes",Math.round(1e4*X.d)/1e4,H)),X.max-j.d<=t||(R=X.h/2,F.push(new Ff(X.p.x-R,X.p.y-R,R,i)),F.push(new Ff(X.p.x+R,X.p.y-R,R,i)),F.push(new Ff(X.p.x-R,X.p.y+R,R,i)),F.push(new Ff(X.p.x+R,X.p.y+R,R,i)),H+=4)}return n&&(console.log(`num probes: ${H}`),console.log(`best distance: ${j.d}`)),j.p}function Of(i,t){return t.max-i.max}function Ff(i,t,n,s){this.p=new we(i,t),this.h=n,this.d=function(f,v){let b=!1,S=1/0;for(let k=0;k<v.length;k++){const R=v[k];for(let F=0,j=R.length,H=j-1;F<j;H=F++){const X=R[F],ee=R[H];X.y>f.y!=ee.y>f.y&&f.x<(ee.x-X.x)*(f.y-X.y)/(ee.y-X.y)+X.x&&(b=!b),S=Math.min(S,qf(f,X,ee))}}return(b?1:-1)*Math.sqrt(S)}(this.p,s),this.max=this.d+this.h*Math.SQRT2}var pa;M.aB=void 0,(pa=M.aB||(M.aB={}))[pa.center=1]="center",pa[pa.left=2]="left",pa[pa.right=3]="right",pa[pa.top=4]="top",pa[pa.bottom=5]="bottom",pa[pa["top-left"]=6]="top-left",pa[pa["top-right"]=7]="top-right",pa[pa["bottom-left"]=8]="bottom-left",pa[pa["bottom-right"]=9]="bottom-right";const vd=7,vm=Number.POSITIVE_INFINITY;function Eg(i,t){return t[1]!==vm?function(n,s,f){let v=0,b=0;switch(s=Math.abs(s),f=Math.abs(f),n){case"top-right":case"top-left":case"top":b=f-vd;break;case"bottom-right":case"bottom-left":case"bottom":b=-f+vd}switch(n){case"top-right":case"bottom-right":case"right":v=-s;break;case"top-left":case"bottom-left":case"left":v=s}return[v,b]}(i,t[0],t[1]):function(n,s){let f=0,v=0;s<0&&(s=0);const b=s/Math.SQRT2;switch(n){case"top-right":case"top-left":v=b-vd;break;case"bottom-right":case"bottom-left":v=-b+vd;break;case"bottom":v=-s+vd;break;case"top":v=s-vd}switch(n){case"top-right":case"bottom-right":f=-b;break;case"top-left":case"bottom-left":f=b;break;case"left":f=s;break;case"right":f=-s}return[f,v]}(i,t[0])}function xm(i,t,n){var s;const f=i.layout,v=(s=f.get("text-variable-anchor-offset"))===null||s===void 0?void 0:s.evaluate(t,{},n);if(v){const S=v.values,k=[];for(let R=0;R<S.length;R+=2){const F=k[R]=S[R],j=S[R+1].map(H=>H*Ro);F.startsWith("top")?j[1]-=vd:F.startsWith("bottom")&&(j[1]+=vd),k[R+1]=j}return new Fo(k)}const b=f.get("text-variable-anchor");if(b){let S;S=i._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[f.get("text-radial-offset").evaluate(t,{},n)*Ro,vm]:f.get("text-offset").evaluate(t,{},n).map(R=>R*Ro);const k=[];for(const R of b)k.push(R,Eg(R,S));return new Fo(k)}return null}function wc(i){switch(i){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Ln(i,t,n,s,f,v,b,S,k,R,F,j){let H=v.textMaxSize.evaluate(t,{});H===void 0&&(H=b);const X=i.layers[0].layout,ee=X.get("icon-offset").evaluate(t,{},F),oe=lu(n.horizontal),ye=b/24,Pe=i.tilePixelRatio*ye,Ze=i.tilePixelRatio*H/24,ze=i.tilePixelRatio*S,q=i.tilePixelRatio*X.get("symbol-spacing"),me=X.get("text-padding")*i.tilePixelRatio,Be=function(Hr,Wr,zr,zn=1){const Xi=Hr.get("icon-padding").evaluate(Wr,{},zr),ns=Xi&&Xi.values;return[ns[0]*zn,ns[1]*zn,ns[2]*zn,ns[3]*zn]}(X,t,F,i.tilePixelRatio),mt=X.get("text-max-angle")/180*Math.PI,Ut=X.get("text-rotation-alignment")!=="viewport"&&X.get("symbol-placement")!=="point",wt=X.get("icon-rotation-alignment")==="map"&&X.get("symbol-placement")!=="point",kt=X.get("symbol-placement"),Xt=q/2,Zt=X.get("icon-text-fit");let Kt;s&&Zt!=="none"&&(i.allowVerticalPlacement&&n.vertical&&(Kt=V(s,n.vertical,Zt,X.get("icon-text-fit-padding"),ee,ye)),oe&&(s=V(s,oe,Zt,X.get("icon-text-fit-padding"),ee,ye)));const zt=F?j.line.getGranularityForZoomLevel(F.z):1,Ir=(Hr,Wr)=>{Wr.x<0||Wr.x>=bt||Wr.y<0||Wr.y>=bt||function(zr,zn,Xi,ns,ma,uu,Pl,Hs,Yi,bs,qs,Ks,Ja,cu,ws,El,is,Ss,Ts,Vo,Ui,Sc,Bf,Tc,$y){const Nf=zr.addToLineVertexArray(zn,Xi);let ef,$f,bd,tf,Mm=0,Ag=0,Rg=0,zg=0,_p=-1,km=-1;const Lh={};let Lg=Ea("");if(zr.allowVerticalPlacement&&ns.vertical){const La=Hs.layout.get("text-rotate").evaluate(Ui,{},Tc)+90;bd=new gp(Yi,zn,bs,qs,Ks,ns.vertical,Ja,cu,ws,La),Pl&&(tf=new gp(Yi,zn,bs,qs,Ks,Pl,is,Ss,ws,La))}if(ma){const La=Hs.layout.get("icon-rotate").evaluate(Ui,{}),hu=Hs.layout.get("icon-text-fit")!=="none",Dh=Pg(ma,La,Bf,hu),du=Pl?Pg(Pl,La,Bf,hu):void 0;$f=new gp(Yi,zn,bs,qs,Ks,ma,is,Ss,!1,La),Mm=4*Dh.length;const rf=zr.iconSizeData;let nh=null;rf.kind==="source"?(nh=[Re*Hs.layout.get("icon-size").evaluate(Ui,{})],nh[0]>Ge&&jr(`${zr.layerIds[0]}: Value for "icon-size" is >= ${se}. Reduce your "icon-size".`)):rf.kind==="composite"&&(nh=[Re*Sc.compositeIconSizes[0].evaluate(Ui,{},Tc),Re*Sc.compositeIconSizes[1].evaluate(Ui,{},Tc)],(nh[0]>Ge||nh[1]>Ge)&&jr(`${zr.layerIds[0]}: Value for "icon-size" is >= ${se}. Reduce your "icon-size".`)),zr.addSymbols(zr.icon,Dh,nh,Vo,Ts,Ui,M.al.none,zn,Nf.lineStartIndex,Nf.lineLength,-1,Tc),_p=zr.icon.placedSymbolArray.length-1,du&&(Ag=4*du.length,zr.addSymbols(zr.icon,du,nh,Vo,Ts,Ui,M.al.vertical,zn,Nf.lineStartIndex,Nf.lineLength,-1,Tc),km=zr.icon.placedSymbolArray.length-1)}const Il=Object.keys(ns.horizontal);for(const La of Il){const hu=ns.horizontal[La];if(!ef){Lg=Ea(hu.text);const du=Hs.layout.get("text-rotate").evaluate(Ui,{},Tc);ef=new gp(Yi,zn,bs,qs,Ks,hu,Ja,cu,ws,du)}const Dh=hu.positionedLines.length===1;if(Rg+=bm(zr,zn,hu,uu,Hs,ws,Ui,El,Nf,ns.vertical?M.al.horizontal:M.al.horizontalOnly,Dh?Il:[La],Lh,_p,Sc,Tc),Dh)break}ns.vertical&&(zg+=bm(zr,zn,ns.vertical,uu,Hs,ws,Ui,El,Nf,M.al.vertical,["vertical"],Lh,km,Sc,Tc));const Am=ef?ef.boxStartIndex:zr.collisionBoxArray.length,jy=ef?ef.boxEndIndex:zr.collisionBoxArray.length,Uy=bd?bd.boxStartIndex:zr.collisionBoxArray.length,Vy=bd?bd.boxEndIndex:zr.collisionBoxArray.length,Zy=$f?$f.boxStartIndex:zr.collisionBoxArray.length,Rm=$f?$f.boxEndIndex:zr.collisionBoxArray.length,Gy=tf?tf.boxStartIndex:zr.collisionBoxArray.length,zm=tf?tf.boxEndIndex:zr.collisionBoxArray.length;let Cc=-1;const Gp=(La,hu)=>La&&La.circleDiameter?Math.max(La.circleDiameter,hu):hu;Cc=Gp(ef,Cc),Cc=Gp(bd,Cc),Cc=Gp($f,Cc),Cc=Gp(tf,Cc);const Dg=Cc>-1?1:0;Dg&&(Cc*=$y/Ro),zr.glyphOffsetArray.length>=Xe.MAX_GLYPHS&&jr("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Ui.sortKey!==void 0&&zr.addToSortKeyRanges(zr.symbolInstances.length,Ui.sortKey);const Wy=xm(Hs,Ui,Tc),[Og,Hy]=function(La,hu){const Dh=La.length,du=hu==null?void 0:hu.values;if((du==null?void 0:du.length)>0)for(let rf=0;rf<du.length;rf+=2){const nh=du[rf+1];La.emplaceBack(M.aB[du[rf]],nh[0],nh[1])}return[Dh,La.length]}(zr.textAnchorOffsets,Wy);zr.symbolInstances.emplaceBack(zn.x,zn.y,Lh.right>=0?Lh.right:-1,Lh.center>=0?Lh.center:-1,Lh.left>=0?Lh.left:-1,Lh.vertical||-1,_p,km,Lg,Am,jy,Uy,Vy,Zy,Rm,Gy,zm,bs,Rg,zg,Mm,Ag,Dg,0,Ja,Cc,Og,Hy)}(i,Wr,Hr,n,s,f,Kt,i.layers[0],i.collisionBoxArray,t.index,t.sourceLayerIndex,i.index,Pe,[me,me,me,me],Ut,k,ze,Be,wt,ee,t,v,R,F,b)};if(kt==="line")for(const Hr of ym(t.geometry,0,0,bt,bt)){const Wr=pc(Hr,zt),zr=By(Wr,q,mt,n.vertical||oe,s,24,Ze,i.overscaling,bt);for(const zn of zr)oe&&Ig(i,oe.text,Xt,zn)||Ir(Wr,zn)}else if(kt==="line-center"){for(const Hr of t.geometry)if(Hr.length>1){const Wr=pc(Hr,zt),zr=Fy(Wr,mt,n.vertical||oe,s,24,Ze);zr&&Ir(Wr,zr)}}else if(t.type==="Polygon")for(const Hr of jh(t.geometry,0)){const Wr=au(Hr,16);Ir(pc(Hr[0],zt,!0),new bc(Wr.x,Wr.y,0))}else if(t.type==="LineString")for(const Hr of t.geometry){const Wr=pc(Hr,zt);Ir(Wr,new bc(Wr[0].x,Wr[0].y,0))}else if(t.type==="Point")for(const Hr of t.geometry)for(const Wr of Hr)Ir([Wr],new bc(Wr.x,Wr.y,0))}function bm(i,t,n,s,f,v,b,S,k,R,F,j,H,X,ee){const oe=function(Ze,ze,q,me,Be,mt,Ut,wt){const kt=me.layout.get("text-rotate").evaluate(mt,{})*Math.PI/180,Xt=[];for(const Zt of ze.positionedLines)for(const Kt of Zt.positionedGlyphs){if(!Kt.rect)continue;const zt=Kt.rect||{};let Ir=lp+1,Hr=!0,Wr=1,zr=0;const zn=(Be||wt)&&Kt.vertical,Xi=Kt.metrics.advance*Kt.scale/2;if(wt&&ze.verticalizable&&(zr=Zt.lineOffset/2-(Kt.imageName?-(Ro-Kt.metrics.width*Kt.scale)/2:(Kt.scale-1)*Ro)),Kt.imageName){const Ss=Ut[Kt.imageName];Hr=Ss.sdf,Wr=Ss.pixelRatio,Ir=Ws/Wr}const ns=Be?[Kt.x+Xi,Kt.y]:[0,0];let ma=Be?[0,0]:[Kt.x+Xi+q[0],Kt.y+q[1]-zr],uu=[0,0];zn&&(uu=ma,ma=[0,0]);const Pl=Kt.metrics.isDoubleResolution?2:1,Hs=(Kt.metrics.left-Ir)*Kt.scale-Xi+ma[0],Yi=(-Kt.metrics.top-Ir)*Kt.scale+ma[1],bs=Hs+zt.w/Pl*Kt.scale/Wr,qs=Yi+zt.h/Pl*Kt.scale/Wr,Ks=new we(Hs,Yi),Ja=new we(bs,Yi),cu=new we(Hs,qs),ws=new we(bs,qs);if(zn){const Ss=new we(-Xi,Xi-kh),Ts=-Math.PI/2,Vo=Ro/2-Xi,Ui=new we(5-kh-Vo,-(Kt.imageName?Vo:0)),Sc=new we(...uu);Ks._rotateAround(Ts,Ss)._add(Ui)._add(Sc),Ja._rotateAround(Ts,Ss)._add(Ui)._add(Sc),cu._rotateAround(Ts,Ss)._add(Ui)._add(Sc),ws._rotateAround(Ts,Ss)._add(Ui)._add(Sc)}if(kt){const Ss=Math.sin(kt),Ts=Math.cos(kt),Vo=[Ts,-Ss,Ss,Ts];Ks._matMult(Vo),Ja._matMult(Vo),cu._matMult(Vo),ws._matMult(Vo)}const El=new we(0,0),is=new we(0,0);Xt.push({tl:Ks,tr:Ja,bl:cu,br:ws,tex:zt,writingMode:ze.writingMode,glyphOffset:ns,sectionIndex:Kt.sectionIndex,isSDF:Hr,pixelOffsetTL:El,pixelOffsetBR:is,minFontScaleX:0,minFontScaleY:0})}return Xt}(0,n,S,f,v,b,s,i.allowVerticalPlacement),ye=i.textSizeData;let Pe=null;ye.kind==="source"?(Pe=[Re*f.layout.get("text-size").evaluate(b,{})],Pe[0]>Ge&&jr(`${i.layerIds[0]}: Value for "text-size" is >= ${se}. Reduce your "text-size".`)):ye.kind==="composite"&&(Pe=[Re*X.compositeTextSizes[0].evaluate(b,{},ee),Re*X.compositeTextSizes[1].evaluate(b,{},ee)],(Pe[0]>Ge||Pe[1]>Ge)&&jr(`${i.layerIds[0]}: Value for "text-size" is >= ${se}. Reduce your "text-size".`)),i.addSymbols(i.text,oe,Pe,S,v,b,R,t,k.lineStartIndex,k.lineLength,H,ee);for(const Ze of F)j[Ze]=i.text.placedSymbolArray.length-1;return 4*oe.length}function lu(i){for(const t in i)return i[t];return null}function Ig(i,t,n,s){const f=i.compareText;if(t in f){const v=f[t];for(let b=v.length-1;b>=0;b--)if(s.dist(v[b])<n)return!0}else f[t]=[];return f[t].push(s),!1}const Mg=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Si{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[n,s]=new Uint8Array(t,0,2);if(n!==219)throw new Error("Data does not appear to be in a KDBush format.");const f=s>>4;if(f!==1)throw new Error(`Got v${f} data when expected v1.`);const v=Mg[15&s];if(!v)throw new Error("Unrecognized array type.");const[b]=new Uint16Array(t,2,1),[S]=new Uint32Array(t,4,1);return new Si(S,b,v,t)}constructor(t,n=64,s=Float64Array,f){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+n,2),65535),this.ArrayType=s,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const v=Mg.indexOf(this.ArrayType),b=2*t*this.ArrayType.BYTES_PER_ELEMENT,S=t*this.IndexArrayType.BYTES_PER_ELEMENT,k=(8-S%8)%8;if(v<0)throw new Error(`Unexpected typed array class: ${s}.`);f&&f instanceof ArrayBuffer?(this.data=f,this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+S+k,2*t),this._pos=2*t,this._finished=!0):(this.data=new ArrayBuffer(8+b+S+k),this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+S+k,2*t),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+v]),new Uint16Array(this.data,2,1)[0]=n,new Uint32Array(this.data,4,1)[0]=t)}add(t,n){const s=this._pos>>1;return this.ids[s]=s,this.coords[this._pos++]=t,this.coords[this._pos++]=n,s}finish(){const t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return wm(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,n,s,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:b,nodeSize:S}=this,k=[0,v.length-1,0],R=[];for(;k.length;){const F=k.pop()||0,j=k.pop()||0,H=k.pop()||0;if(j-H<=S){for(let ye=H;ye<=j;ye++){const Pe=b[2*ye],Ze=b[2*ye+1];Pe>=t&&Pe<=s&&Ze>=n&&Ze<=f&&R.push(v[ye])}continue}const X=H+j>>1,ee=b[2*X],oe=b[2*X+1];ee>=t&&ee<=s&&oe>=n&&oe<=f&&R.push(v[X]),(F===0?t<=ee:n<=oe)&&(k.push(H),k.push(X-1),k.push(1-F)),(F===0?s>=ee:f>=oe)&&(k.push(X+1),k.push(j),k.push(1-F))}return R}within(t,n,s){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:f,coords:v,nodeSize:b}=this,S=[0,f.length-1,0],k=[],R=s*s;for(;S.length;){const F=S.pop()||0,j=S.pop()||0,H=S.pop()||0;if(j-H<=b){for(let ye=H;ye<=j;ye++)kg(v[2*ye],v[2*ye+1],t,n)<=R&&k.push(f[ye]);continue}const X=H+j>>1,ee=v[2*X],oe=v[2*X+1];kg(ee,oe,t,n)<=R&&k.push(f[X]),(F===0?t-s<=ee:n-s<=oe)&&(S.push(H),S.push(X-1),S.push(1-F)),(F===0?t+s>=ee:n+s>=oe)&&(S.push(X+1),S.push(j),S.push(1-F))}return k}}function wm(i,t,n,s,f,v){if(f-s<=n)return;const b=s+f>>1;Sm(i,t,b,s,f,v),wm(i,t,n,s,b-1,1-v),wm(i,t,n,b+1,f,1-v)}function Sm(i,t,n,s,f,v){for(;f>s;){if(f-s>600){const R=f-s+1,F=n-s+1,j=Math.log(R),H=.5*Math.exp(2*j/3),X=.5*Math.sqrt(j*H*(R-H)/R)*(F-R/2<0?-1:1);Sm(i,t,n,Math.max(s,Math.floor(n-F*H/R+X)),Math.min(f,Math.floor(n+(R-F)*H/R+X)),v)}const b=t[2*n+v];let S=s,k=f;for(xd(i,t,s,n),t[2*f+v]>b&&xd(i,t,s,f);S<k;){for(xd(i,t,S,k),S++,k--;t[2*S+v]<b;)S++;for(;t[2*k+v]>b;)k--}t[2*s+v]===b?xd(i,t,s,k):(k++,xd(i,t,k,f)),k<=n&&(s=k+1),n<=k&&(f=k-1)}}function xd(i,t,n,s){Tm(i,n,s),Tm(t,2*n,2*s),Tm(t,2*n+1,2*s+1)}function Tm(i,t,n){const s=i[t];i[t]=i[n],i[n]=s}function kg(i,t,n,s){const f=i-n,v=t-s;return f*f+v*v}var Cm;M.co=void 0,(Cm=M.co||(M.co={})).create="create",Cm.load="load",Cm.fullLoad="fullLoad";let Zp=null,yp=[];const Pm=1e3/60,Em="loadTime",Im="fullLoadTime",Ny={mark(i){performance.mark(i)},frame(i){const t=i;Zp!=null&&yp.push(t-Zp),Zp=t},clearMetrics(){Zp=null,yp=[],performance.clearMeasures(Em),performance.clearMeasures(Im);for(const i in M.co)performance.clearMarks(M.co[i])},getPerformanceMetrics(){performance.measure(Em,M.co.create,M.co.load),performance.measure(Im,M.co.create,M.co.fullLoad);const i=performance.getEntriesByName(Em)[0].duration,t=performance.getEntriesByName(Im)[0].duration,n=yp.length,s=1/(yp.reduce((v,b)=>v+b,0)/n/1e3),f=yp.filter(v=>v>Pm).reduce((v,b)=>v+(b-Pm)/Pm,0);return{loadTime:i,fullLoadTime:t,fps:s,percentDroppedFrames:f/(n+f)*100,totalFrames:n}}};M.$=fp,M.A=it,M.B=ds,M.C=si,M.D=fr,M.E=Ve,M.F=Kh,M.G=function(i){if(qr==null){const t=i.navigator?i.navigator.userAgent:null;qr=!!i.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return qr},M.H=class{constructor(i,t){this.target=i,this.mapId=t,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new Dy(()=>this.process()),this.subscription=Sr(this.target,"message",n=>this.receive(n),!1),this.globalScope=on(self)?i:window}registerMessageHandler(i,t){this.messageHandlers[i]=t}sendAsync(i,t){return new Promise((n,s)=>{const f=Math.round(1e18*Math.random()).toString(36).substring(0,10),v=t?Sr(t.signal,"abort",()=>{v==null||v.unsubscribe(),delete this.resolveRejects[f];const k={id:f,type:"<cancel>",origin:location.origin,targetMapId:i.targetMapId,sourceMapId:this.mapId};this.target.postMessage(k)},Oy):null;this.resolveRejects[f]={resolve:k=>{v==null||v.unsubscribe(),n(k)},reject:k=>{v==null||v.unsubscribe(),s(k)}};const b=[],S=Object.assign(Object.assign({},i),{id:f,sourceMapId:this.mapId,origin:location.origin,data:Xo(i.data,b)});this.target.postMessage(S,{transfer:b})})}receive(i){const t=i.data,n=t.id;if(!(t.origin!=="file://"&&location.origin!=="file://"&&t.origin!=="resource://android"&&location.origin!=="resource://android"&&t.origin!==location.origin||t.targetMapId&&this.mapId!==t.targetMapId)){if(t.type==="<cancel>"){delete this.tasks[n];const s=this.abortControllers[n];return delete this.abortControllers[n],void(s&&s.abort())}if(on(self)||t.mustQueue)return this.tasks[n]=t,this.taskQueue.push(n),void this.invoker.trigger();this.processTask(n,t)}}process(){if(this.taskQueue.length===0)return;const i=this.taskQueue.shift(),t=this.tasks[i];delete this.tasks[i],this.taskQueue.length>0&&this.invoker.trigger(),t&&this.processTask(i,t)}processTask(i,t){return u(this,void 0,void 0,function*(){if(t.type==="<response>"){const f=this.resolveRejects[i];return delete this.resolveRejects[i],f?void(t.error?f.reject(gl(t.error)):f.resolve(gl(t.data))):void 0}if(!this.messageHandlers[t.type])return void this.completeTask(i,new Error(`Could not find a registered handler for ${t.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const n=gl(t.data),s=new AbortController;this.abortControllers[i]=s;try{const f=yield this.messageHandlers[t.type](t.sourceMapId,n,s);this.completeTask(i,null,f)}catch(f){this.completeTask(i,f)}})}completeTask(i,t,n){const s=[];delete this.abortControllers[i];const f={id:i,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:t?Xo(t):null,data:Xo(n,s)};this.target.postMessage(f,{transfer:s})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},M.I=up,M.J=Zi,M.K=function(){var i=new it(16);return it!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0),i[0]=1,i[5]=1,i[10]=1,i[15]=1,i},M.L=function(i,t,n){var s,f,v,b,S,k,R,F,j,H,X,ee,oe=n[0],ye=n[1],Pe=n[2];return t===i?(i[12]=t[0]*oe+t[4]*ye+t[8]*Pe+t[12],i[13]=t[1]*oe+t[5]*ye+t[9]*Pe+t[13],i[14]=t[2]*oe+t[6]*ye+t[10]*Pe+t[14],i[15]=t[3]*oe+t[7]*ye+t[11]*Pe+t[15]):(f=t[1],v=t[2],b=t[3],S=t[4],k=t[5],R=t[6],F=t[7],j=t[8],H=t[9],X=t[10],ee=t[11],i[0]=s=t[0],i[1]=f,i[2]=v,i[3]=b,i[4]=S,i[5]=k,i[6]=R,i[7]=F,i[8]=j,i[9]=H,i[10]=X,i[11]=ee,i[12]=s*oe+S*ye+j*Pe+t[12],i[13]=f*oe+k*ye+H*Pe+t[13],i[14]=v*oe+R*ye+X*Pe+t[14],i[15]=b*oe+F*ye+ee*Pe+t[15]),i},M.M=function(i,t,n){var s=n[0],f=n[1],v=n[2];return i[0]=t[0]*s,i[1]=t[1]*s,i[2]=t[2]*s,i[3]=t[3]*s,i[4]=t[4]*f,i[5]=t[5]*f,i[6]=t[6]*f,i[7]=t[7]*f,i[8]=t[8]*v,i[9]=t[9]*v,i[10]=t[10]*v,i[11]=t[11]*v,i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15],i},M.N=function(i,t,n){var s=t[0],f=t[1],v=t[2],b=t[3],S=t[4],k=t[5],R=t[6],F=t[7],j=t[8],H=t[9],X=t[10],ee=t[11],oe=t[12],ye=t[13],Pe=t[14],Ze=t[15],ze=n[0],q=n[1],me=n[2],Be=n[3];return i[0]=ze*s+q*S+me*j+Be*oe,i[1]=ze*f+q*k+me*H+Be*ye,i[2]=ze*v+q*R+me*X+Be*Pe,i[3]=ze*b+q*F+me*ee+Be*Ze,i[4]=(ze=n[4])*s+(q=n[5])*S+(me=n[6])*j+(Be=n[7])*oe,i[5]=ze*f+q*k+me*H+Be*ye,i[6]=ze*v+q*R+me*X+Be*Pe,i[7]=ze*b+q*F+me*ee+Be*Ze,i[8]=(ze=n[8])*s+(q=n[9])*S+(me=n[10])*j+(Be=n[11])*oe,i[9]=ze*f+q*k+me*H+Be*ye,i[10]=ze*v+q*R+me*X+Be*Pe,i[11]=ze*b+q*F+me*ee+Be*Ze,i[12]=(ze=n[12])*s+(q=n[13])*S+(me=n[14])*j+(Be=n[15])*oe,i[13]=ze*f+q*k+me*H+Be*ye,i[14]=ze*v+q*R+me*X+Be*Pe,i[15]=ze*b+q*F+me*ee+Be*Ze,i},M.O=function(i,t){const n={};for(let s=0;s<t.length;s++){const f=t[s];f in i&&(n[f]=i[f])}return n},M.P=we,M.Q=_d,M.R=da,M.S=gg,M.T=yl,M.U=Nu,M.V=Ct,M.W=et,M.X=wn,M.Y=xs,M.Z=bt,M._=u,M.a=eo,M.a$=function(i,t,n){var s=Math.sin(n),f=Math.cos(n),v=t[4],b=t[5],S=t[6],k=t[7],R=t[8],F=t[9],j=t[10],H=t[11];return t!==i&&(i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15]),i[4]=v*f+R*s,i[5]=b*f+F*s,i[6]=S*f+j*s,i[7]=k*f+H*s,i[8]=R*f-v*s,i[9]=F*f-b*s,i[10]=j*f-S*s,i[11]=H*f-k*s,i},M.a0=25,M.a1=zo,M.a2=i=>{const t=window.document.createElement("video");return t.muted=!0,new Promise(n=>{t.onloadstart=()=>{n(t)};for(const s of i){const f=window.document.createElement("source");tt(s)||(t.crossOrigin="Anonymous"),f.src=s,t.appendChild(f)}})},M.a3=Tt,M.a4=function(){return pr++},M.a5=Se,M.a6=Xe,M.a7=mh,M.a8=Du,M.a9=bg,M.aA=function(i,t,n,s,f=!1){if(!n[0]&&!n[1])return[0,0];const v=f?s==="map"?-i.bearingInRadians:0:s==="viewport"?i.bearingInRadians:0;if(v){const b=Math.sin(v),S=Math.cos(v);n=[n[0]*S-n[1]*b,n[0]*b+n[1]*S]}return[f?n[0]:Et(t,n[0],i.zoom),f?n[1]:Et(t,n[1],i.zoom)]},M.aC=Qt,M.aD=wc,M.aE=dp,M.aF=Si,M.aG=ai,M.aH=Xa,M.aI=Pt,M.aJ=Rn,M.aK=Pn,M.aL=or,M.aM=Hn,M.aN=kn,M.aO=function(i,t,n){return i[0]=t[0]*n,i[1]=t[1]*n,i[2]=t[2]*n,i},M.aP=function(i,t,n){return i[0]=t[0]+n[0],i[1]=t[1]+n[1],i[2]=t[2]+n[2],i},M.aQ=function(i){var t=new it(3);return t[0]=i[0],t[1]=i[1],t[2]=i[2],t},M.aR=function(i,t,n){return i[0]=t[0]*n[0],i[1]=t[1]*n[1],i[2]=t[2]*n[2],i[3]=t[3]*n[3],i},M.aS=function(i,t,n){return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],i},M.aT=function(i,t){var n=t[0],s=t[1],f=t[2],v=n*n+s*s+f*f;return v>0&&(v=1/Math.sqrt(v)),i[0]=t[0]*v,i[1]=t[1]*v,i[2]=t[2]*v,i},M.aU=function(i,t,n){var s=t[0],f=t[1],v=t[2],b=n[0],S=n[1],k=n[2];return i[0]=f*k-v*S,i[1]=v*b-s*k,i[2]=s*S-f*b,i},M.aV=function(i,t){return i[0]*t[0]+i[1]*t[1]+i[2]*t[2]},M.aW=_g,M.aX=zf,M.aY=function(i,t,n,s,f){var v,b=1/Math.tan(t/2);return i[0]=b/n,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=b,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=-1,i[12]=0,i[13]=0,i[15]=0,f!=null&&f!==1/0?(i[10]=(f+s)*(v=1/(s-f)),i[14]=2*f*s*v):(i[10]=-1,i[14]=-2*s),i},M.aZ=function(i){var t=new it(16);return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],t},M.a_=function(i,t,n){var s=Math.sin(n),f=Math.cos(n),v=t[0],b=t[1],S=t[2],k=t[3],R=t[4],F=t[5],j=t[6],H=t[7];return t!==i&&(i[8]=t[8],i[9]=t[9],i[10]=t[10],i[11]=t[11],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15]),i[0]=v*f+R*s,i[1]=b*f+F*s,i[2]=S*f+j*s,i[3]=k*f+H*s,i[4]=R*f-v*s,i[5]=F*f-b*s,i[6]=j*f-S*s,i[7]=H*f-k*s,i},M.aa=function(i){const t={};if(i.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(n,s,f,v)=>{const b=f||v;return t[s]=!b||b.toLowerCase(),""}),t["max-age"]){const n=parseInt(t["max-age"],10);isNaN(n)?delete t["max-age"]:t["max-age"]=n}return t},M.ab=Vn,M.ac=function(i){return Math.pow(2,i)},M.ad=Le,M.ae=Rt,M.af=85.051129,M.ag=yg,M.ah=function(i){return Math.log(i)/Math.LN2},M.ai=function(i){var t=i[0],n=i[1];return t*t+n*n},M.aj=function(i,t){const n=[];for(const s in i)s in t||n.push(s);return n},M.ak=function(i,t){let n=0,s=0;if(i.kind==="constant")s=i.layoutSize;else if(i.kind!=="source"){const{interpolationType:f,minZoom:v,maxZoom:b}=i,S=f?Rt(Ni.interpolationFactor(f,t,v,b),0,1):0;i.kind==="camera"?s=ds.number(i.minSize,i.maxSize,S):n=S}return{uSizeT:n,uSize:s}},M.am=function(i,{uSize:t,uSizeT:n},{lowerSize:s,upperSize:f}){return i.kind==="source"?s/Re:i.kind==="composite"?ds.number(s/Re,f/Re,n):t},M.an=function(i,t){var n=t[0],s=t[1],f=t[2],v=t[3],b=t[4],S=t[5],k=t[6],R=t[7],F=t[8],j=t[9],H=t[10],X=t[11],ee=t[12],oe=t[13],ye=t[14],Pe=t[15],Ze=n*S-s*b,ze=n*k-f*b,q=n*R-v*b,me=s*k-f*S,Be=s*R-v*S,mt=f*R-v*k,Ut=F*oe-j*ee,wt=F*ye-H*ee,kt=F*Pe-X*ee,Xt=j*ye-H*oe,Zt=j*Pe-X*oe,Kt=H*Pe-X*ye,zt=Ze*Kt-ze*Zt+q*Xt+me*kt-Be*wt+mt*Ut;return zt?(i[0]=(S*Kt-k*Zt+R*Xt)*(zt=1/zt),i[1]=(f*Zt-s*Kt-v*Xt)*zt,i[2]=(oe*mt-ye*Be+Pe*me)*zt,i[3]=(H*Be-j*mt-X*me)*zt,i[4]=(k*kt-b*Kt-R*wt)*zt,i[5]=(n*Kt-f*kt+v*wt)*zt,i[6]=(ye*q-ee*mt-Pe*ze)*zt,i[7]=(F*mt-H*q+X*ze)*zt,i[8]=(b*Zt-S*kt+R*Ut)*zt,i[9]=(s*kt-n*Zt-v*Ut)*zt,i[10]=(ee*Be-oe*q+Pe*Ze)*zt,i[11]=(j*q-F*Be-X*Ze)*zt,i[12]=(S*wt-b*Xt-k*Ut)*zt,i[13]=(n*Xt-s*wt+f*Ut)*zt,i[14]=(oe*ze-ee*me-ye*Ze)*zt,i[15]=(F*me-j*ze+H*Ze)*zt,i):null},M.ao=xr,M.ap=function(i){return Math.hypot(i[0],i[1])},M.aq=function(i){return i[0]=0,i[1]=0,i},M.ar=function(i,t,n){return i[0]=t[0]*n,i[1]=t[1]*n,i},M.as=Or,M.at=rr,M.au=function(i,t,n,s){const f=t.y-i.y,v=t.x-i.x,b=s.y-n.y,S=s.x-n.x,k=b*v-S*f;if(k===0)return null;const R=(S*(i.y-n.y)-b*(i.x-n.x))/k;return new we(i.x+R*v,i.y+R*f)},M.av=ym,M.aw=Dd,M.ax=function(i){let t=1/0,n=1/0,s=-1/0,f=-1/0;for(const v of i)t=Math.min(t,v.x),n=Math.min(n,v.y),s=Math.max(s,v.x),f=Math.max(f,v.y);return[t,n,s,f]},M.ay=Ro,M.az=Et,M.b=fn,M.b$=class extends ie{},M.b0=function(){const i=new Float32Array(16);return Le(i),i},M.b1=function(){const i=new Float64Array(16);return Le(i),i},M.b2=function(){return new Float64Array(16)},M.b3=function(i,t,n){const s=new Float64Array(4);return function(f,v,b,S){var k=.5*Math.PI/180;v*=k,b*=k,S*=k;var R=Math.sin(v),F=Math.cos(v),j=Math.sin(b),H=Math.cos(b),X=Math.sin(S),ee=Math.cos(S);f[0]=R*H*ee-F*j*X,f[1]=F*j*ee+R*H*X,f[2]=F*H*X-R*j*ee,f[3]=F*H*ee+R*j*X}(s,i,t-90,n),s},M.b4=function(i,t,n,s){var f,v,b,S,k,R=t[0],F=t[1],j=t[2],H=t[3],X=n[0],ee=n[1],oe=n[2],ye=n[3];return(v=R*X+F*ee+j*oe+H*ye)<0&&(v=-v,X=-X,ee=-ee,oe=-oe,ye=-ye),1-v>Je?(f=Math.acos(v),b=Math.sin(f),S=Math.sin((1-s)*f)/b,k=Math.sin(s*f)/b):(S=1-s,k=s),i[0]=S*R+k*X,i[1]=S*F+k*ee,i[2]=S*j+k*oe,i[3]=S*H+k*ye,i},M.b5=function(i){const t=new Float64Array(9);var n,s,f,v,b,S,k,R,F,j,H,X,ee,oe,ye,Pe,Ze,ze;j=(f=(s=i)[0])*(k=f+f),H=(v=s[1])*k,ee=(b=s[2])*k,oe=b*(R=v+v),Pe=(S=s[3])*k,Ze=S*R,ze=S*(F=b+b),(n=t)[0]=1-(X=v*R)-(ye=b*F),n[3]=H-ze,n[6]=ee+Ze,n[1]=H+ze,n[4]=1-j-ye,n[7]=oe-Pe,n[2]=ee-Ze,n[5]=oe+Pe,n[8]=1-j-X;const q=Hn(-Math.asin(Rt(t[2],-1,1)));let me,Be;return Math.hypot(t[5],t[8])<.001?(me=0,Be=-Hn(Math.atan2(t[3],t[4]))):(me=Hn(t[5]===0&&t[8]===0?0:Math.atan2(t[5],t[8])),Be=Hn(t[1]===0&&t[0]===0?0:Math.atan2(t[1],t[0]))),{roll:me,pitch:q+90,bearing:Be}},M.b6=function(i,t){return i.roll==t.roll&&i.pitch==t.pitch&&i.bearing==t.bearing},M.b7=en,M.b8=Yh,M.b9=Sl,M.bA=function(i){if(i.type==="custom")return new Ly(i);switch(i.type){case"background":return new li(i);case"circle":return new Fd(i);case"fill":return new ts(i);case"fill-extrusion":return new rp(i);case"heatmap":return new Zs(i);case"hillshade":return new Yf(i);case"line":return new zp(i);case"raster":return new zy(i);case"symbol":return new Qr(i)}},M.bB=Cr,M.bC=function(i,t){if(!i)return[{command:"setStyle",args:[t]}];let n=[];try{if(!nt(i.version,t.version))return[{command:"setStyle",args:[t]}];nt(i.center,t.center)||n.push({command:"setCenter",args:[t.center]}),nt(i.state,t.state)||n.push({command:"setGlobalState",args:[t.state]}),nt(i.centerAltitude,t.centerAltitude)||n.push({command:"setCenterAltitude",args:[t.centerAltitude]}),nt(i.zoom,t.zoom)||n.push({command:"setZoom",args:[t.zoom]}),nt(i.bearing,t.bearing)||n.push({command:"setBearing",args:[t.bearing]}),nt(i.pitch,t.pitch)||n.push({command:"setPitch",args:[t.pitch]}),nt(i.roll,t.roll)||n.push({command:"setRoll",args:[t.roll]}),nt(i.sprite,t.sprite)||n.push({command:"setSprite",args:[t.sprite]}),nt(i.glyphs,t.glyphs)||n.push({command:"setGlyphs",args:[t.glyphs]}),nt(i.transition,t.transition)||n.push({command:"setTransition",args:[t.transition]}),nt(i.light,t.light)||n.push({command:"setLight",args:[t.light]}),nt(i.terrain,t.terrain)||n.push({command:"setTerrain",args:[t.terrain]}),nt(i.sky,t.sky)||n.push({command:"setSky",args:[t.sky]}),nt(i.projection,t.projection)||n.push({command:"setProjection",args:[t.projection]});const s={},f=[];(function(b,S,k,R){let F;for(F in S=S||{},b=b||{})Object.prototype.hasOwnProperty.call(b,F)&&(Object.prototype.hasOwnProperty.call(S,F)||Dt(F,k,R));for(F in S)Object.prototype.hasOwnProperty.call(S,F)&&(Object.prototype.hasOwnProperty.call(b,F)?nt(b[F],S[F])||(b[F].type==="geojson"&&S[F].type==="geojson"&&hr(b,S,F)?ft(k,{command:"setGeoJSONSourceData",args:[F,S[F].data]}):Yt(F,S,k,R)):Ye(F,S,k))})(i.sources,t.sources,f,s);const v=[];i.layers&&i.layers.forEach(b=>{"source"in b&&s[b.source]?n.push({command:"removeLayer",args:[b.id]}):v.push(b)}),n=n.concat(f),function(b,S,k){S=S||[];const R=(b=b||[]).map(Kr),F=S.map(Kr),j=b.reduce($r,{}),H=S.reduce($r,{}),X=R.slice(),ee=Object.create(null);let oe,ye,Pe,Ze,ze;for(let q=0,me=0;q<R.length;q++)oe=R[q],Object.prototype.hasOwnProperty.call(H,oe)?me++:(ft(k,{command:"removeLayer",args:[oe]}),X.splice(X.indexOf(oe,me),1));for(let q=0,me=0;q<F.length;q++)oe=F[F.length-1-q],X[X.length-1-q]!==oe&&(Object.prototype.hasOwnProperty.call(j,oe)?(ft(k,{command:"removeLayer",args:[oe]}),X.splice(X.lastIndexOf(oe,X.length-me),1)):me++,Ze=X[X.length-q],ft(k,{command:"addLayer",args:[H[oe],Ze]}),X.splice(X.length-q,0,oe),ee[oe]=!0);for(let q=0;q<F.length;q++)if(oe=F[q],ye=j[oe],Pe=H[oe],!ee[oe]&&!nt(ye,Pe))if(nt(ye.source,Pe.source)&&nt(ye["source-layer"],Pe["source-layer"])&&nt(ye.type,Pe.type)){for(ze in kr(ye.layout,Pe.layout,k,oe,null,"setLayoutProperty"),kr(ye.paint,Pe.paint,k,oe,null,"setPaintProperty"),nt(ye.filter,Pe.filter)||ft(k,{command:"setFilter",args:[oe,Pe.filter]}),nt(ye.minzoom,Pe.minzoom)&&nt(ye.maxzoom,Pe.maxzoom)||ft(k,{command:"setLayerZoomRange",args:[oe,Pe.minzoom,Pe.maxzoom]}),ye)Object.prototype.hasOwnProperty.call(ye,ze)&&ze!=="layout"&&ze!=="paint"&&ze!=="filter"&&ze!=="metadata"&&ze!=="minzoom"&&ze!=="maxzoom"&&(ze.indexOf("paint.")===0?kr(ye[ze],Pe[ze],k,oe,ze.slice(6),"setPaintProperty"):nt(ye[ze],Pe[ze])||ft(k,{command:"setLayerProperty",args:[oe,ze,Pe[ze]]}));for(ze in Pe)Object.prototype.hasOwnProperty.call(Pe,ze)&&!Object.prototype.hasOwnProperty.call(ye,ze)&&ze!=="layout"&&ze!=="paint"&&ze!=="filter"&&ze!=="metadata"&&ze!=="minzoom"&&ze!=="maxzoom"&&(ze.indexOf("paint.")===0?kr(ye[ze],Pe[ze],k,oe,ze.slice(6),"setPaintProperty"):nt(ye[ze],Pe[ze])||ft(k,{command:"setLayerProperty",args:[oe,ze,Pe[ze]]}))}else ft(k,{command:"removeLayer",args:[oe]}),Ze=X[X.lastIndexOf(oe)+1],ft(k,{command:"addLayer",args:[Pe,Ze]})}(v,t.layers,n)}catch(s){console.warn("Unable to compute style diff:",s),n=[{command:"setStyle",args:[t]}]}return n},M.bD=function(i){const t=[],n=i.id;return n===void 0&&t.push({message:`layers.${n}: missing required property "id"`}),i.render===void 0&&t.push({message:`layers.${n}: missing required method "render"`}),i.renderingMode&&i.renderingMode!=="2d"&&i.renderingMode!=="3d"&&t.push({message:`layers.${n}: property "renderingMode" must be either "2d" or "3d"`}),t},M.bE=function i(t,n){if(Array.isArray(t)){if(!Array.isArray(n)||t.length!==n.length)return!1;for(let s=0;s<t.length;s++)if(!i(t[s],n[s]))return!1;return!0}if(typeof t=="object"&&t!==null&&n!==null){if(typeof n!="object"||Object.keys(t).length!==Object.keys(n).length)return!1;for(const s in t)if(!i(t[s],n[s]))return!1;return!0}return t===n},M.bF=mr,M.bG=Jr,M.bH=class extends bi{constructor(i,t){super(i,t),this.current=0}set(i){this.current!==i&&(this.current=i,this.gl.uniform1i(this.location,i))}},M.bI=Qh,M.bJ=class extends bi{constructor(i,t){super(i,t),this.current=Vs}set(i){if(i[12]!==this.current[12]||i[0]!==this.current[0])return this.current=i,void this.gl.uniformMatrix4fv(this.location,!1,i);for(let t=1;t<16;t++)if(i[t]!==this.current[t]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);break}}},M.bK=Ld,M.bL=class extends bi{constructor(i,t){super(i,t),this.current=[0,0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]||(this.current=i,this.gl.uniform3f(this.location,i[0],i[1],i[2]))}},M.bM=class extends bi{constructor(i,t){super(i,t),this.current=[0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]||(this.current=i,this.gl.uniform2f(this.location,i[0],i[1]))}},M.bN=_t,M.bO=function(i,t){var n=Math.sin(t),s=Math.cos(t);return i[0]=s,i[1]=n,i[2]=0,i[3]=-n,i[4]=s,i[5]=0,i[6]=0,i[7]=0,i[8]=1,i},M.bP=function(i,t,n){var s=t[0],f=t[1],v=t[2];return i[0]=s*n[0]+f*n[3]+v*n[6],i[1]=s*n[1]+f*n[4]+v*n[7],i[2]=s*n[2]+f*n[5]+v*n[8],i},M.bQ=function(i,t,n,s,f,v,b){var S=1/(t-n),k=1/(s-f),R=1/(v-b);return i[0]=-2*S,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=-2*k,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2*R,i[11]=0,i[12]=(t+n)*S,i[13]=(f+s)*k,i[14]=(b+v)*R,i[15]=1,i},M.bR=class extends bi{constructor(i,t){super(i,t),this.current=new Array}set(i){if(i!=this.current){this.current=i;const t=new Float32Array(4*i.length);for(let n=0;n<i.length;n++)t[4*n]=i[n].r,t[4*n+1]=i[n].g,t[4*n+2]=i[n].b,t[4*n+3]=i[n].a;this.gl.uniform4fv(this.location,t)}}},M.bS=class extends bi{constructor(i,t){super(i,t),this.current=new Array}set(i){if(i!=this.current){this.current=i;const t=new Float32Array(i);this.gl.uniform1fv(this.location,t)}}},M.bT=class extends y{},M.bU=pm,M.bV=class extends E{},M.bW=yf,M.bX=function(i){return i<=1?1:Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))},M.bY=Gl,M.bZ=function(i,t,n){var s=t[0],f=t[1],v=t[2],b=n[3]*s+n[7]*f+n[11]*v+n[15];return i[0]=(n[0]*s+n[4]*f+n[8]*v+n[12])/(b=b||1),i[1]=(n[1]*s+n[5]*f+n[9]*v+n[13])/b,i[2]=(n[2]*s+n[6]*f+n[10]*v+n[14])/b,i},M.b_=class extends Uo{},M.ba=ud,M.bb=Xc,M.bc=Fe,M.bd=ht,M.be=ls,M.bf=function(i,t,n,s,f){return Fe(s,f,Rt((i-t)/(n-t),0,1))},M.bg=Ht,M.bh=function(){return new Float64Array(3)},M.bi=function(i,t,n,s){return i[0]=t[0]+n[0]*s,i[1]=t[1]+n[1]*s,i[2]=t[2]+n[2]*s,i},M.bj=Lt,M.bk=function(){return new Float64Array(4)},M.bl=function(i,t,n,s){var f=[],v=[];return f[0]=t[0]-n[0],f[1]=t[1]-n[1],f[2]=t[2]-n[2],v[0]=f[0]*Math.cos(s)-f[1]*Math.sin(s),v[1]=f[0]*Math.sin(s)+f[1]*Math.cos(s),v[2]=f[2],i[0]=v[0]+n[0],i[1]=v[1]+n[1],i[2]=v[2]+n[2],i},M.bm=function(i,t,n,s){var f=[],v=[];return f[0]=t[0]-n[0],f[1]=t[1]-n[1],f[2]=t[2]-n[2],v[0]=f[0],v[1]=f[1]*Math.cos(s)-f[2]*Math.sin(s),v[2]=f[1]*Math.sin(s)+f[2]*Math.cos(s),i[0]=v[0]+n[0],i[1]=v[1]+n[1],i[2]=v[2]+n[2],i},M.bn=function(i,t,n,s){var f=[],v=[];return f[0]=t[0]-n[0],f[1]=t[1]-n[1],f[2]=t[2]-n[2],v[0]=f[2]*Math.sin(s)+f[0]*Math.cos(s),v[1]=f[1],v[2]=f[2]*Math.cos(s)-f[0]*Math.sin(s),i[0]=v[0]+n[0],i[1]=v[1]+n[1],i[2]=v[2]+n[2],i},M.bo=ne,M.bp=function(i,t,n){var s=Math.sin(n),f=Math.cos(n),v=t[0],b=t[1],S=t[2],k=t[3],R=t[8],F=t[9],j=t[10],H=t[11];return t!==i&&(i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15]),i[0]=v*f-R*s,i[1]=b*f-F*s,i[2]=S*f-j*s,i[3]=k*f-H*s,i[8]=v*s+R*f,i[9]=b*s+F*f,i[10]=S*s+j*f,i[11]=k*s+H*f,i},M.bq=function(i,t){const n=Ht(i,360),s=Ht(t,360),f=s-n,v=s>n?f-360:f+360;return Math.abs(f)<Math.abs(v)?f:v},M.br=function(i){return i[0]=0,i[1]=0,i[2]=0,i},M.bs=function(i,t,n,s){const f=Math.sqrt(i*i+t*t),v=Math.sqrt(n*n+s*s);i/=f,t/=f,n/=v,s/=v;const b=Math.acos(i*n+t*s);return-t*n+i*s>0?b:-b},M.bt=function(i,t){return i[0]*t[0]+i[1]*t[1]+i[2]*t[2]+i[3]},M.bu=gm,M.bv=function(i,t){const n=Ht(i,2*Math.PI),s=Ht(t,2*Math.PI);return Math.min(Math.abs(n-s),Math.abs(n-s+2*Math.PI),Math.abs(n-s-2*Math.PI))},M.bw=function(){const i={},t=pe.$version;for(const n in pe.$root){const s=pe.$root[n];if(s.required){let f=null;f=n==="version"?t:s.type==="array"?[]:{},f!=null&&(i[n]=f)}}return i},M.bx=Wa,M.by=oi,M.bz=function(i){i=i.slice();const t=Object.create(null);for(let n=0;n<i.length;n++)t[i[n].id]=i[n];for(let n=0;n<i.length;n++)"ref"in i[n]&&(i[n]=He(i[n],t[i[n].ref]));return i},M.c=Nn,M.c0=function(i,t){return i[0]===t[0]&&i[1]===t[1]&&i[2]===t[2]&&i[3]===t[3]&&i[4]===t[4]&&i[5]===t[5]&&i[6]===t[6]&&i[7]===t[7]&&i[8]===t[8]&&i[9]===t[9]&&i[10]===t[10]&&i[11]===t[11]&&i[12]===t[12]&&i[13]===t[13]&&i[14]===t[14]&&i[15]===t[15]},M.c1=function(i,t){var n=i[0],s=i[1],f=i[2],v=i[3],b=i[4],S=i[5],k=i[6],R=i[7],F=i[8],j=i[9],H=i[10],X=i[11],ee=i[12],oe=i[13],ye=i[14],Pe=i[15],Ze=t[0],ze=t[1],q=t[2],me=t[3],Be=t[4],mt=t[5],Ut=t[6],wt=t[7],kt=t[8],Xt=t[9],Zt=t[10],Kt=t[11],zt=t[12],Ir=t[13],Hr=t[14],Wr=t[15];return Math.abs(n-Ze)<=Je*Math.max(1,Math.abs(n),Math.abs(Ze))&&Math.abs(s-ze)<=Je*Math.max(1,Math.abs(s),Math.abs(ze))&&Math.abs(f-q)<=Je*Math.max(1,Math.abs(f),Math.abs(q))&&Math.abs(v-me)<=Je*Math.max(1,Math.abs(v),Math.abs(me))&&Math.abs(b-Be)<=Je*Math.max(1,Math.abs(b),Math.abs(Be))&&Math.abs(S-mt)<=Je*Math.max(1,Math.abs(S),Math.abs(mt))&&Math.abs(k-Ut)<=Je*Math.max(1,Math.abs(k),Math.abs(Ut))&&Math.abs(R-wt)<=Je*Math.max(1,Math.abs(R),Math.abs(wt))&&Math.abs(F-kt)<=Je*Math.max(1,Math.abs(F),Math.abs(kt))&&Math.abs(j-Xt)<=Je*Math.max(1,Math.abs(j),Math.abs(Xt))&&Math.abs(H-Zt)<=Je*Math.max(1,Math.abs(H),Math.abs(Zt))&&Math.abs(X-Kt)<=Je*Math.max(1,Math.abs(X),Math.abs(Kt))&&Math.abs(ee-zt)<=Je*Math.max(1,Math.abs(ee),Math.abs(zt))&&Math.abs(oe-Ir)<=Je*Math.max(1,Math.abs(oe),Math.abs(Ir))&&Math.abs(ye-Hr)<=Je*Math.max(1,Math.abs(ye),Math.abs(Hr))&&Math.abs(Pe-Wr)<=Je*Math.max(1,Math.abs(Pe),Math.abs(Wr))},M.c2=function(i,t){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],i[9]=t[9],i[10]=t[10],i[11]=t[11],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15],i},M.c3=i=>i.type==="symbol",M.c4=i=>i.type==="circle",M.c5=i=>i.type==="heatmap",M.c6=i=>i.type==="line",M.c7=i=>i.type==="fill",M.c8=i=>i.type==="fill-extrusion",M.c9=i=>i.type==="hillshade",M.cA=So,M.cB=Ch,M.cC=rs,M.cD=Tl,M.cE=class{constructor(i){this._marks={start:[i.url,"start"].join("#"),end:[i.url,"end"].join("#"),measure:i.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let i=performance.getEntriesByName(this._marks.measure);return i.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),i=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),i}},M.cF=function(i,t,n,s,f){return u(this,void 0,void 0,function*(){if(et())try{return yield wn(i,t,n,s,f)}catch{}return function(v,b,S,k,R){const F=v.width,j=v.height;an&&An||(an=new OffscreenCanvas(F,j),An=an.getContext("2d",{willReadFrequently:!0})),an.width=F,an.height=j,An.drawImage(v,0,0,F,j);const H=An.getImageData(b,S,k,R);return An.clearRect(0,0,F,j),H.data}(i,t,n,s,f)})},M.cG=vg,M.cH=te,M.cI=he,M.cJ=yc,M.cK=Op,M.cL=hl,M.cM=$l,M.ca=i=>i.type==="raster",M.cb=i=>i.type==="background",M.cc=i=>i.type==="custom",M.cd=Vt,M.ce=function(i,t,n){const s=sr(t.x-n.x,t.y-n.y),f=sr(i.x-n.x,i.y-n.y);var v,b;return Hn(Math.atan2(s[0]*f[1]-s[1]*f[0],(v=s)[0]*(b=f)[0]+v[1]*b[1]))},M.cf=cr,M.cg=function(i,t){return ei[t]&&(i instanceof MouseEvent||i instanceof WheelEvent)},M.ch=function(i,t){return Ti[t]&&"touches"in i},M.ci=function(i){return Ti[i]||ei[i]},M.cj=function(i,t,n){var s=t[0],f=t[1];return i[0]=n[0]*s+n[4]*f+n[12],i[1]=n[1]*s+n[5]*f+n[13],i},M.ck=function(i,t){const{x:n,y:s}=fp.fromLngLat(t);return!(i<0||i>25||s<0||s>=1||n<0||n>=1)},M.cl=function(i,t){return i[0]=t[0],i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=t[1],i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=t[2],i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i},M.cm=class extends Ca{},M.cn=Ny,M.cp=function(i){return i.message===qn},M.cq=ti,M.cr=function(i,t){eo.REGISTERED_PROTOCOLS[i]=t},M.cs=function(i){delete eo.REGISTERED_PROTOCOLS[i]},M.ct=function(i,t){const n={};for(let f=0;f<i.length;f++){const v=t&&t[i[f].id]||tc(i[f]);t&&(t[i[f].id]=v);let b=n[v];b||(b=n[v]=[]),b.push(i[f])}const s=[];for(const f in n)s.push(n[f]);return s},M.cu=ur,M.cv=xg,M.cw=wg,M.cx=cp,M.cy=function(i){i.bucket.createArrays(),i.bucket.tilePixelRatio=bt/(512*i.bucket.overscaling),i.bucket.compareText={},i.bucket.iconsNeedLinear=!1;const t=i.bucket.layers[0],n=t.layout,s=t._unevaluatedLayout._values,f={layoutIconSize:s["icon-size"].possiblyEvaluate(new si(i.bucket.zoom+1),i.canonical),layoutTextSize:s["text-size"].possiblyEvaluate(new si(i.bucket.zoom+1),i.canonical),textMaxSize:s["text-size"].possiblyEvaluate(new si(18))};if(i.bucket.textSizeData.kind==="composite"){const{minZoom:R,maxZoom:F}=i.bucket.textSizeData;f.compositeTextSizes=[s["text-size"].possiblyEvaluate(new si(R),i.canonical),s["text-size"].possiblyEvaluate(new si(F),i.canonical)]}if(i.bucket.iconSizeData.kind==="composite"){const{minZoom:R,maxZoom:F}=i.bucket.iconSizeData;f.compositeIconSizes=[s["icon-size"].possiblyEvaluate(new si(R),i.canonical),s["icon-size"].possiblyEvaluate(new si(F),i.canonical)]}const v=n.get("text-line-height")*Ro,b=n.get("text-rotation-alignment")!=="viewport"&&n.get("symbol-placement")!=="point",S=n.get("text-keep-upright"),k=n.get("text-size");for(const R of i.bucket.features){const F=n.get("text-font").evaluate(R,{},i.canonical).join(","),j=k.evaluate(R,{},i.canonical),H=f.layoutTextSize.evaluate(R,{},i.canonical),X=f.layoutIconSize.evaluate(R,{},i.canonical),ee={horizontal:{},vertical:void 0},oe=R.text;let ye,Pe=[0,0];if(oe){const q=oe.toString(),me=n.get("text-letter-spacing").evaluate(R,{},i.canonical)*Ro,Be=ff(q)?me:0,mt=n.get("text-anchor").evaluate(R,{},i.canonical),Ut=xm(t,R,i.canonical);if(!Ut){const Zt=n.get("text-radial-offset").evaluate(R,{},i.canonical);Pe=Zt?Eg(mt,[Zt*Ro,vm]):n.get("text-offset").evaluate(R,{},i.canonical).map(Kt=>Kt*Ro)}let wt=b?"center":n.get("text-justify").evaluate(R,{},i.canonical);const kt=n.get("symbol-placement")==="point"?n.get("text-max-width").evaluate(R,{},i.canonical)*Ro:1/0,Xt=()=>{i.bucket.allowVerticalPlacement&&Bl(q)&&(ee.vertical=gd(oe,i.glyphMap,i.glyphPositions,i.imagePositions,F,kt,v,mt,"left",Be,Pe,M.al.vertical,!0,H,j))};if(!b&&Ut){const Zt=new Set;if(wt==="auto")for(let zt=0;zt<Ut.values.length;zt+=2)Zt.add(wc(Ut.values[zt]));else Zt.add(wt);let Kt=!1;for(const zt of Zt)if(!ee.horizontal[zt])if(Kt)ee.horizontal[zt]=ee.horizontal[0];else{const Ir=gd(oe,i.glyphMap,i.glyphPositions,i.imagePositions,F,kt,v,"center",zt,Be,Pe,M.al.horizontal,!1,H,j);Ir&&(ee.horizontal[zt]=Ir,Kt=Ir.positionedLines.length===1)}Xt()}else{wt==="auto"&&(wt=wc(mt));const Zt=gd(oe,i.glyphMap,i.glyphPositions,i.imagePositions,F,kt,v,mt,wt,Be,Pe,M.al.horizontal,!1,H,j);Zt&&(ee.horizontal[wt]=Zt),Xt(),Bl(q)&&b&&S&&(ee.vertical=gd(oe,i.glyphMap,i.glyphPositions,i.imagePositions,F,kt,v,mt,wt,Be,Pe,M.al.vertical,!1,H,j))}}let Ze=!1;if(R.icon&&R.icon.name){const q=i.imageMap[R.icon.name];q&&(ye=C(i.imagePositions[R.icon.name],n.get("icon-offset").evaluate(R,{},i.canonical),n.get("icon-anchor").evaluate(R,{},i.canonical)),Ze=!!q.sdf,i.bucket.sdfIcons===void 0?i.bucket.sdfIcons=Ze:i.bucket.sdfIcons!==Ze&&jr("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(q.pixelRatio!==i.bucket.pixelRatio||n.get("icon-rotate").constantOr(1)!==0)&&(i.bucket.iconsNeedLinear=!0))}const ze=lu(ee.horizontal)||ee.vertical;i.bucket.iconsInText=!!ze&&ze.iconsInText,(ze||ye)&&Ln(i.bucket,R,ee,ye,i.imageMap,f,H,X,Pe,Ze,i.canonical,i.subdivisionGranularity)}i.showCollisionBoxes&&i.bucket.generateCollisionDebugBuffers()},M.cz=wf,M.d=tt,M.e=Tr,M.f=i=>u(void 0,void 0,void 0,function*(){if(i.byteLength===0)return createImageBitmap(new ImageData(1,1));const t=new Blob([new Uint8Array(i)],{type:"image/png"});try{return createImageBitmap(t)}catch(n){throw new Error(`Could not load image because of ${n.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),M.g=Wi,M.h=i=>new Promise((t,n)=>{const s=new Image;s.onload=()=>{t(s),URL.revokeObjectURL(s.src),s.onload=null,window.requestAnimationFrame(()=>{s.src=sn})},s.onerror=()=>n(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const f=new Blob([new Uint8Array(i)],{type:"image/png"});s.src=i.byteLength?URL.createObjectURL(f):sn}),M.i=on,M.j=(i,t)=>go(Tr(i,{type:"json"}),t),M.k=Me,M.l=_e,M.m=go,M.n=(i,t)=>go(Tr(i,{type:"arrayBuffer"}),t),M.o=function(i){return new Tl(i).readFields(Mh,[])},M.p=Fp,M.q=Zl,M.r=Di,M.s=Sr,M.t=Ga,M.u=dn,M.v=pe,M.w=jr,M.x=ru,M.y=ic,M.z=function([i,t,n]){return t+=90,t*=Math.PI/180,n*=Math.PI/180,{x:i*Math.cos(t)*Math.sin(n),y:i*Math.sin(t)*Math.sin(n),z:i*Math.cos(n)}}}),P("worker",["./shared"],function(M){class u{constructor(ae){this.keyCache={},ae&&this.replace(ae)}replace(ae){this._layerConfigs={},this._layers={},this.update(ae,[])}update(ae,le){for(const Me of ae){this._layerConfigs[Me.id]=Me;const Ve=this._layers[Me.id]=M.bA(Me);Ve._featureFilter=M.a7(Ve.filter),this.keyCache[Me.id]&&delete this.keyCache[Me.id]}for(const Me of le)delete this.keyCache[Me],delete this._layerConfigs[Me],delete this._layers[Me];this.familiesBySource={};const _e=M.ct(Object.values(this._layerConfigs),this.keyCache);for(const Me of _e){const Ve=Me.map(Ye=>this._layers[Ye.id]),pe=Ve[0];if(pe.visibility==="none")continue;const Ke=pe.source||"";let He=this.familiesBySource[Ke];He||(He=this.familiesBySource[Ke]={});const nt=pe.sourceLayer||"_geojsonTileLayer";let ft=He[nt];ft||(ft=He[nt]=[]),ft.push(Ve)}}}class te{constructor(ae){const le={},_e=[];for(const Ke in ae){const He=ae[Ke],nt=le[Ke]={};for(const ft in He){const Ye=He[+ft];if(!Ye||Ye.bitmap.width===0||Ye.bitmap.height===0)continue;const Dt={x:0,y:0,w:Ye.bitmap.width+2,h:Ye.bitmap.height+2};_e.push(Dt),nt[ft]={rect:Dt,metrics:Ye.metrics}}}const{w:Me,h:Ve}=M.p(_e),pe=new M.q({width:Me||1,height:Ve||1});for(const Ke in ae){const He=ae[Ke];for(const nt in He){const ft=He[+nt];if(!ft||ft.bitmap.width===0||ft.bitmap.height===0)continue;const Ye=le[Ke][nt].rect;M.q.copy(ft.bitmap,pe,{x:0,y:0},{x:Ye.x+1,y:Ye.y+1},ft.bitmap)}}this.image=pe,this.positions=le}}M.cu("GlyphAtlas",te);class Y{constructor(ae){this.tileID=new M.Y(ae.tileID.overscaledZ,ae.tileID.wrap,ae.tileID.canonical.z,ae.tileID.canonical.x,ae.tileID.canonical.y),this.uid=ae.uid,this.zoom=ae.zoom,this.pixelRatio=ae.pixelRatio,this.tileSize=ae.tileSize,this.source=ae.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ae.showCollisionBoxes,this.collectResourceTiming=!!ae.collectResourceTiming,this.returnDependencies=!!ae.returnDependencies,this.promoteId=ae.promoteId,this.inFlightDependencies=[]}parse(ae,le,_e,Me,Ve){return M._(this,void 0,void 0,function*(){this.status="parsing",this.data=ae,this.collisionBoxArray=new M.a5;const pe=new M.cv(Object.keys(ae.layers).sort()),Ke=new M.cw(this.tileID,this.promoteId);Ke.bucketLayerIDs=[];const He={},nt={featureIndex:Ke,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:_e,subdivisionGranularity:Ve},ft=le.familiesBySource[this.source];for(const Br in ft){const Ft=ae.layers[Br];if(!Ft)continue;Ft.version===1&&M.w(`Vector tile source "${this.source}" layer "${Br}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Fr=pe.encode(Br),nn=[];for(let Zn=0;Zn<Ft.length;Zn++){const Gn=Ft.feature(Zn),Eo=Ke.getId(Gn,Br);nn.push({feature:Gn,id:Eo,index:Zn,sourceLayerIndex:Fr})}for(const Zn of ft[Br]){const Gn=Zn[0];Gn.source!==this.source&&M.w(`layer.source = ${Gn.source} does not equal this.source = ${this.source}`),Gn.minzoom&&this.zoom<Math.floor(Gn.minzoom)||Gn.maxzoom&&this.zoom>=Gn.maxzoom||Gn.visibility!=="none"&&(fe(Zn,this.zoom,_e),(He[Gn.id]=Gn.createBucket({index:Ke.bucketLayerIDs.length,layers:Zn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Fr,sourceID:this.source})).populate(nn,nt,this.tileID.canonical),Ke.bucketLayerIDs.push(Zn.map(Eo=>Eo.id)))}}const Ye=M.bF(nt.glyphDependencies,Br=>Object.keys(Br).map(Number));this.inFlightDependencies.forEach(Br=>Br==null?void 0:Br.abort()),this.inFlightDependencies=[];let Dt=Promise.resolve({});if(Object.keys(Ye).length){const Br=new AbortController;this.inFlightDependencies.push(Br),Dt=Me.sendAsync({type:"GG",data:{stacks:Ye,source:this.source,tileID:this.tileID,type:"glyphs"}},Br)}const Yt=Object.keys(nt.iconDependencies);let hr=Promise.resolve({});if(Yt.length){const Br=new AbortController;this.inFlightDependencies.push(Br),hr=Me.sendAsync({type:"GI",data:{icons:Yt,source:this.source,tileID:this.tileID,type:"icons"}},Br)}const kr=Object.keys(nt.patternDependencies);let Kr=Promise.resolve({});if(kr.length){const Br=new AbortController;this.inFlightDependencies.push(Br),Kr=Me.sendAsync({type:"GI",data:{icons:kr,source:this.source,tileID:this.tileID,type:"patterns"}},Br)}const[$r,Tt,Sn]=yield Promise.all([Dt,hr,Kr]),_n=new te($r),Tn=new M.cx(Tt,Sn);for(const Br in He){const Ft=He[Br];Ft instanceof M.a6?(fe(Ft.layers,this.zoom,_e),M.cy({bucket:Ft,glyphMap:$r,glyphPositions:_n.positions,imageMap:Tt,imagePositions:Tn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:nt.subdivisionGranularity})):Ft.hasPattern&&(Ft instanceof M.cz||Ft instanceof M.cA||Ft instanceof M.cB)&&(fe(Ft.layers,this.zoom,_e),Ft.addFeatures(nt,this.tileID.canonical,Tn.patternPositions))}return this.status="done",{buckets:Object.values(He).filter(Br=>!Br.isEmpty()),featureIndex:Ke,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:_n.image,imageAtlas:Tn,glyphMap:this.returnDependencies?$r:null,iconMap:this.returnDependencies?Tt:null,glyphPositions:this.returnDependencies?_n.positions:null}})}}function fe(tt,ae,le){const _e=new M.C(ae);for(const Me of tt)Me.recalculate(_e,le)}class he{constructor(ae,le,_e){this.actor=ae,this.layerIndex=le,this.availableImages=_e,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(ae,le){return M._(this,void 0,void 0,function*(){const _e=yield M.n(ae.request,le);try{return{vectorTile:new M.cC.VectorTile(new M.cD(_e.data)),rawData:_e.data,cacheControl:_e.cacheControl,expires:_e.expires}}catch(Me){const Ve=new Uint8Array(_e.data);let pe=`Unable to parse the tile at ${ae.request.url}, `;throw pe+=Ve[0]===31&&Ve[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Me.message}`,new Error(pe)}})}loadTile(ae){return M._(this,void 0,void 0,function*(){const le=ae.uid,_e=!!(ae&&ae.request&&ae.request.collectResourceTiming)&&new M.cE(ae.request),Me=new Y(ae);this.loading[le]=Me;const Ve=new AbortController;Me.abort=Ve;try{const pe=yield this.loadVectorTile(ae,Ve);if(delete this.loading[le],!pe)return null;const Ke=pe.rawData,He={};pe.expires&&(He.expires=pe.expires),pe.cacheControl&&(He.cacheControl=pe.cacheControl);const nt={};if(_e){const Ye=_e.finish();Ye&&(nt.resourceTiming=JSON.parse(JSON.stringify(Ye)))}Me.vectorTile=pe.vectorTile;const ft=Me.parse(pe.vectorTile,this.layerIndex,this.availableImages,this.actor,ae.subdivisionGranularity);this.loaded[le]=Me,this.fetching[le]={rawTileData:Ke,cacheControl:He,resourceTiming:nt};try{const Ye=yield ft;return M.e({rawTileData:Ke.slice(0)},Ye,He,nt)}finally{delete this.fetching[le]}}catch(pe){throw delete this.loading[le],Me.status="done",this.loaded[le]=Me,pe}})}reloadTile(ae){return M._(this,void 0,void 0,function*(){const le=ae.uid;if(!this.loaded||!this.loaded[le])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const _e=this.loaded[le];if(_e.showCollisionBoxes=ae.showCollisionBoxes,_e.status==="parsing"){const Me=yield _e.parse(_e.vectorTile,this.layerIndex,this.availableImages,this.actor,ae.subdivisionGranularity);let Ve;if(this.fetching[le]){const{rawTileData:pe,cacheControl:Ke,resourceTiming:He}=this.fetching[le];delete this.fetching[le],Ve=M.e({rawTileData:pe.slice(0)},Me,Ke,He)}else Ve=Me;return Ve}if(_e.status==="done"&&_e.vectorTile)return _e.parse(_e.vectorTile,this.layerIndex,this.availableImages,this.actor,ae.subdivisionGranularity)})}abortTile(ae){return M._(this,void 0,void 0,function*(){const le=this.loading,_e=ae.uid;le&&le[_e]&&le[_e].abort&&(le[_e].abort.abort(),delete le[_e])})}removeTile(ae){return M._(this,void 0,void 0,function*(){this.loaded&&this.loaded[ae.uid]&&delete this.loaded[ae.uid]})}}class Te{constructor(){this.loaded={}}loadTile(ae){return M._(this,void 0,void 0,function*(){const{uid:le,encoding:_e,rawImageData:Me,redFactor:Ve,greenFactor:pe,blueFactor:Ke,baseShift:He}=ae,nt=Me.width+2,ft=Me.height+2,Ye=M.b(Me)?new M.R({width:nt,height:ft},yield M.cF(Me,-1,-1,nt,ft)):Me,Dt=new M.cG(le,Ye,_e,Ve,pe,Ke,He);return this.loaded=this.loaded||{},this.loaded[le]=Dt,Dt})}removeTile(ae){const le=this.loaded,_e=ae.uid;le&&le[_e]&&delete le[_e]}}var ge,we,Ce=function(){if(we)return ge;function tt(le,_e){if(le.length!==0){ae(le[0],_e);for(var Me=1;Me<le.length;Me++)ae(le[Me],!_e)}}function ae(le,_e){for(var Me=0,Ve=0,pe=0,Ke=le.length,He=Ke-1;pe<Ke;He=pe++){var nt=(le[pe][0]-le[He][0])*(le[He][1]+le[pe][1]),ft=Me+nt;Ve+=Math.abs(Me)>=Math.abs(nt)?Me-ft+nt:nt-ft+Me,Me=ft}Me+Ve>=0!=!!_e&&le.reverse()}return we=1,ge=function le(_e,Me){var Ve,pe=_e&&_e.type;if(pe==="FeatureCollection")for(Ve=0;Ve<_e.features.length;Ve++)le(_e.features[Ve],Me);else if(pe==="GeometryCollection")for(Ve=0;Ve<_e.geometries.length;Ve++)le(_e.geometries[Ve],Me);else if(pe==="Feature")le(_e.geometry,Me);else if(pe==="Polygon")tt(_e.coordinates,Me);else if(pe==="MultiPolygon")for(Ve=0;Ve<_e.coordinates.length;Ve++)tt(_e.coordinates[Ve],Me);return _e}}(),We=M.cH(Ce);const gt=M.cC.VectorTileFeature.prototype.toGeoJSON;class At{constructor(ae){this._feature=ae,this.extent=M.Z,this.type=ae.type,this.properties=ae.tags,"id"in ae&&!isNaN(ae.id)&&(this.id=parseInt(ae.id,10))}loadGeometry(){if(this._feature.type===1){const ae=[];for(const le of this._feature.geometry)ae.push([new M.P(le[0],le[1])]);return ae}{const ae=[];for(const le of this._feature.geometry){const _e=[];for(const Me of le)_e.push(new M.P(Me[0],Me[1]));ae.push(_e)}return ae}}toGeoJSON(ae,le,_e){return gt.call(this,ae,le,_e)}}class Ct{constructor(ae){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=M.Z,this.length=ae.length,this._features=ae}feature(ae){return new At(this._features[ae])}}var et,Je,it,_t={exports:{}},Le=function(){if(it)return _t.exports;it=1;var tt=M.cK(),ae=function(){if(Je)return et;Je=1;var ft=M.cI(),Ye=M.cJ().VectorTileFeature;function Dt(hr,kr){this.options=kr||{},this.features=hr,this.length=hr.length}function Yt(hr,kr){this.id=typeof hr.id=="number"?hr.id:void 0,this.type=hr.type,this.rawGeometry=hr.type===1?[hr.geometry]:hr.geometry,this.properties=hr.tags,this.extent=kr||4096}return et=Dt,Dt.prototype.feature=function(hr){return new Yt(this.features[hr],this.options.extent)},Yt.prototype.loadGeometry=function(){var hr=this.rawGeometry;this.geometry=[];for(var kr=0;kr<hr.length;kr++){for(var Kr=hr[kr],$r=[],Tt=0;Tt<Kr.length;Tt++)$r.push(new ft(Kr[Tt][0],Kr[Tt][1]));this.geometry.push($r)}return this.geometry},Yt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var hr=this.geometry,kr=1/0,Kr=-1/0,$r=1/0,Tt=-1/0,Sn=0;Sn<hr.length;Sn++)for(var _n=hr[Sn],Tn=0;Tn<_n.length;Tn++){var Br=_n[Tn];kr=Math.min(kr,Br.x),Kr=Math.max(Kr,Br.x),$r=Math.min($r,Br.y),Tt=Math.max(Tt,Br.y)}return[kr,$r,Kr,Tt]},Yt.prototype.toGeoJSON=Ye.prototype.toGeoJSON,et}();function le(ft){var Ye=new tt;return function(Dt,Yt){for(var hr in Dt.layers)Yt.writeMessage(3,_e,Dt.layers[hr])}(ft,Ye),Ye.finish()}function _e(ft,Ye){var Dt;Ye.writeVarintField(15,ft.version||1),Ye.writeStringField(1,ft.name||""),Ye.writeVarintField(5,ft.extent||4096);var Yt={keys:[],values:[],keycache:{},valuecache:{}};for(Dt=0;Dt<ft.length;Dt++)Yt.feature=ft.feature(Dt),Ye.writeMessage(2,Me,Yt);var hr=Yt.keys;for(Dt=0;Dt<hr.length;Dt++)Ye.writeStringField(3,hr[Dt]);var kr=Yt.values;for(Dt=0;Dt<kr.length;Dt++)Ye.writeMessage(4,nt,kr[Dt])}function Me(ft,Ye){var Dt=ft.feature;Dt.id!==void 0&&Ye.writeVarintField(1,Dt.id),Ye.writeMessage(2,Ve,ft),Ye.writeVarintField(3,Dt.type),Ye.writeMessage(4,He,Dt)}function Ve(ft,Ye){var Dt=ft.feature,Yt=ft.keys,hr=ft.values,kr=ft.keycache,Kr=ft.valuecache;for(var $r in Dt.properties){var Tt=Dt.properties[$r],Sn=kr[$r];if(Tt!==null){Sn===void 0&&(Yt.push($r),kr[$r]=Sn=Yt.length-1),Ye.writeVarint(Sn);var _n=typeof Tt;_n!=="string"&&_n!=="boolean"&&_n!=="number"&&(Tt=JSON.stringify(Tt));var Tn=_n+":"+Tt,Br=Kr[Tn];Br===void 0&&(hr.push(Tt),Kr[Tn]=Br=hr.length-1),Ye.writeVarint(Br)}}}function pe(ft,Ye){return(Ye<<3)+(7&ft)}function Ke(ft){return ft<<1^ft>>31}function He(ft,Ye){for(var Dt=ft.loadGeometry(),Yt=ft.type,hr=0,kr=0,Kr=Dt.length,$r=0;$r<Kr;$r++){var Tt=Dt[$r],Sn=1;Yt===1&&(Sn=Tt.length),Ye.writeVarint(pe(1,Sn));for(var _n=Yt===3?Tt.length-1:Tt.length,Tn=0;Tn<_n;Tn++){Tn===1&&Yt!==1&&Ye.writeVarint(pe(2,_n-1));var Br=Tt[Tn].x-hr,Ft=Tt[Tn].y-kr;Ye.writeVarint(Ke(Br)),Ye.writeVarint(Ke(Ft)),hr+=Br,kr+=Ft}Yt===3&&Ye.writeVarint(pe(7,1))}}function nt(ft,Ye){var Dt=typeof ft;Dt==="string"?Ye.writeStringField(1,ft):Dt==="boolean"?Ye.writeBooleanField(7,ft):Dt==="number"&&(ft%1!=0?Ye.writeDoubleField(3,ft):ft<0?Ye.writeSVarintField(6,ft):Ye.writeVarintField(5,ft))}return _t.exports=le,_t.exports.fromVectorTileJs=le,_t.exports.fromGeojsonVt=function(ft,Ye){Ye=Ye||{};var Dt={};for(var Yt in ft)Dt[Yt]=new ae(ft[Yt].features,Ye),Dt[Yt].name=Yt,Dt[Yt].version=Ye.version,Dt[Yt].extent=Ye.extent;return le({layers:Dt})},_t.exports.GeoJSONWrapper=ae,_t.exports}(),je=M.cH(Le);const ne={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:tt=>tt},ot=Math.fround||(at=new Float32Array(1),tt=>(at[0]=+tt,at[0]));var at;const Lt=3,rr=5,Pr=6;class xr{constructor(ae){this.options=Object.assign(Object.create(ne),ae),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ae){const{log:le,minZoom:_e,maxZoom:Me}=this.options;le&&console.time("total time");const Ve=`prepare ${ae.length} points`;le&&console.time(Ve),this.points=ae;const pe=[];for(let He=0;He<ae.length;He++){const nt=ae[He];if(!nt.geometry)continue;const[ft,Ye]=nt.geometry.coordinates,Dt=ot(Et(ft)),Yt=ot(Ht(Ye));pe.push(Dt,Yt,1/0,He,-1,1),this.options.reduce&&pe.push(0)}let Ke=this.trees[Me+1]=this._createTree(pe);le&&console.timeEnd(Ve);for(let He=Me;He>=_e;He--){const nt=+Date.now();Ke=this.trees[He]=this._createTree(this._cluster(Ke,He)),le&&console.log("z%d: %d clusters in %dms",He,Ke.numItems,+Date.now()-nt)}return le&&console.timeEnd("total time"),this}getClusters(ae,le){let _e=((ae[0]+180)%360+360)%360-180;const Me=Math.max(-90,Math.min(90,ae[1]));let Ve=ae[2]===180?180:((ae[2]+180)%360+360)%360-180;const pe=Math.max(-90,Math.min(90,ae[3]));if(ae[2]-ae[0]>=360)_e=-180,Ve=180;else if(_e>Ve){const Ye=this.getClusters([_e,Me,180,pe],le),Dt=this.getClusters([-180,Me,Ve,pe],le);return Ye.concat(Dt)}const Ke=this.trees[this._limitZoom(le)],He=Ke.range(Et(_e),Ht(pe),Et(Ve),Ht(Me)),nt=Ke.data,ft=[];for(const Ye of He){const Dt=this.stride*Ye;ft.push(nt[Dt+rr]>1?sr(nt,Dt,this.clusterProps):this.points[nt[Dt+Lt]])}return ft}getChildren(ae){const le=this._getOriginId(ae),_e=this._getOriginZoom(ae),Me="No cluster with the specified id.",Ve=this.trees[_e];if(!Ve)throw new Error(Me);const pe=Ve.data;if(le*this.stride>=pe.length)throw new Error(Me);const Ke=this.options.radius/(this.options.extent*Math.pow(2,_e-1)),He=Ve.within(pe[le*this.stride],pe[le*this.stride+1],Ke),nt=[];for(const ft of He){const Ye=ft*this.stride;pe[Ye+4]===ae&&nt.push(pe[Ye+rr]>1?sr(pe,Ye,this.clusterProps):this.points[pe[Ye+Lt]])}if(nt.length===0)throw new Error(Me);return nt}getLeaves(ae,le,_e){const Me=[];return this._appendLeaves(Me,ae,le=le||10,_e=_e||0,0),Me}getTile(ae,le,_e){const Me=this.trees[this._limitZoom(ae)],Ve=Math.pow(2,ae),{extent:pe,radius:Ke}=this.options,He=Ke/pe,nt=(_e-He)/Ve,ft=(_e+1+He)/Ve,Ye={features:[]};return this._addTileFeatures(Me.range((le-He)/Ve,nt,(le+1+He)/Ve,ft),Me.data,le,_e,Ve,Ye),le===0&&this._addTileFeatures(Me.range(1-He/Ve,nt,1,ft),Me.data,Ve,_e,Ve,Ye),le===Ve-1&&this._addTileFeatures(Me.range(0,nt,He/Ve,ft),Me.data,-1,_e,Ve,Ye),Ye.features.length?Ye:null}getClusterExpansionZoom(ae){let le=this._getOriginZoom(ae)-1;for(;le<=this.options.maxZoom;){const _e=this.getChildren(ae);if(le++,_e.length!==1)break;ae=_e[0].properties.cluster_id}return le}_appendLeaves(ae,le,_e,Me,Ve){const pe=this.getChildren(le);for(const Ke of pe){const He=Ke.properties;if(He&&He.cluster?Ve+He.point_count<=Me?Ve+=He.point_count:Ve=this._appendLeaves(ae,He.cluster_id,_e,Me,Ve):Ve<Me?Ve++:ae.push(Ke),ae.length===_e)break}return Ve}_createTree(ae){const le=new M.aF(ae.length/this.stride|0,this.options.nodeSize,Float32Array);for(let _e=0;_e<ae.length;_e+=this.stride)le.add(ae[_e],ae[_e+1]);return le.finish(),le.data=ae,le}_addTileFeatures(ae,le,_e,Me,Ve,pe){for(const Ke of ae){const He=Ke*this.stride,nt=le[He+rr]>1;let ft,Ye,Dt;if(nt)ft=bt(le,He,this.clusterProps),Ye=le[He],Dt=le[He+1];else{const kr=this.points[le[He+Lt]];ft=kr.properties;const[Kr,$r]=kr.geometry.coordinates;Ye=Et(Kr),Dt=Ht($r)}const Yt={type:1,geometry:[[Math.round(this.options.extent*(Ye*Ve-_e)),Math.round(this.options.extent*(Dt*Ve-Me))]],tags:ft};let hr;hr=nt||this.options.generateId?le[He+Lt]:this.points[le[He+Lt]].id,hr!==void 0&&(Yt.id=hr),pe.features.push(Yt)}}_limitZoom(ae){return Math.max(this.options.minZoom,Math.min(Math.floor(+ae),this.options.maxZoom+1))}_cluster(ae,le){const{radius:_e,extent:Me,reduce:Ve,minPoints:pe}=this.options,Ke=_e/(Me*Math.pow(2,le)),He=ae.data,nt=[],ft=this.stride;for(let Ye=0;Ye<He.length;Ye+=ft){if(He[Ye+2]<=le)continue;He[Ye+2]=le;const Dt=He[Ye],Yt=He[Ye+1],hr=ae.within(He[Ye],He[Ye+1],Ke),kr=He[Ye+rr];let Kr=kr;for(const $r of hr){const Tt=$r*ft;He[Tt+2]>le&&(Kr+=He[Tt+rr])}if(Kr>kr&&Kr>=pe){let $r,Tt=Dt*kr,Sn=Yt*kr,_n=-1;const Tn=((Ye/ft|0)<<5)+(le+1)+this.points.length;for(const Br of hr){const Ft=Br*ft;if(He[Ft+2]<=le)continue;He[Ft+2]=le;const Fr=He[Ft+rr];Tt+=He[Ft]*Fr,Sn+=He[Ft+1]*Fr,He[Ft+4]=Tn,Ve&&($r||($r=this._map(He,Ye,!0),_n=this.clusterProps.length,this.clusterProps.push($r)),Ve($r,this._map(He,Ft)))}He[Ye+4]=Tn,nt.push(Tt/Kr,Sn/Kr,1/0,Tn,-1,Kr),Ve&&nt.push(_n)}else{for(let $r=0;$r<ft;$r++)nt.push(He[Ye+$r]);if(Kr>1)for(const $r of hr){const Tt=$r*ft;if(!(He[Tt+2]<=le)){He[Tt+2]=le;for(let Sn=0;Sn<ft;Sn++)nt.push(He[Tt+Sn])}}}}return nt}_getOriginId(ae){return ae-this.points.length>>5}_getOriginZoom(ae){return(ae-this.points.length)%32}_map(ae,le,_e){if(ae[le+rr]>1){const pe=this.clusterProps[ae[le+Pr]];return _e?Object.assign({},pe):pe}const Me=this.points[ae[le+Lt]].properties,Ve=this.options.map(Me);return _e&&Ve===Me?Object.assign({},Ve):Ve}}function sr(tt,ae,le){return{type:"Feature",id:tt[ae+Lt],properties:bt(tt,ae,le),geometry:{type:"Point",coordinates:[(_e=tt[ae],360*(_e-.5)),Fe(tt[ae+1])]}};var _e}function bt(tt,ae,le){const _e=tt[ae+rr],Me=_e>=1e4?`${Math.round(_e/1e3)}k`:_e>=1e3?Math.round(_e/100)/10+"k":_e,Ve=tt[ae+Pr],pe=Ve===-1?{}:Object.assign({},le[Ve]);return Object.assign(pe,{cluster:!0,cluster_id:tt[ae+Lt],point_count:_e,point_count_abbreviated:Me})}function Et(tt){return tt/360+.5}function Ht(tt){const ae=Math.sin(tt*Math.PI/180),le=.5-.25*Math.log((1+ae)/(1-ae))/Math.PI;return le<0?0:le>1?1:le}function Fe(tt){const ae=(180-360*tt)*Math.PI/180;return 360*Math.atan(Math.exp(ae))/Math.PI-90}function ht(tt,ae,le,_e){let Me=_e;const Ve=ae+(le-ae>>1);let pe,Ke=le-ae;const He=tt[ae],nt=tt[ae+1],ft=tt[le],Ye=tt[le+1];for(let Dt=ae+3;Dt<le;Dt+=3){const Yt=Vt(tt[Dt],tt[Dt+1],He,nt,ft,Ye);if(Yt>Me)pe=Dt,Me=Yt;else if(Yt===Me){const hr=Math.abs(Dt-Ve);hr<Ke&&(pe=Dt,Ke=hr)}}Me>_e&&(pe-ae>3&&ht(tt,ae,pe,_e),tt[pe+2]=Me,le-pe>3&&ht(tt,pe,le,_e))}function Vt(tt,ae,le,_e,Me,Ve){let pe=Me-le,Ke=Ve-_e;if(pe!==0||Ke!==0){const He=((tt-le)*pe+(ae-_e)*Ke)/(pe*pe+Ke*Ke);He>1?(le=Me,_e=Ve):He>0&&(le+=pe*He,_e+=Ke*He)}return pe=tt-le,Ke=ae-_e,pe*pe+Ke*Ke}function cr(tt,ae,le,_e){const Me={id:tt??null,type:ae,geometry:le,tags:_e,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(ae==="Point"||ae==="MultiPoint"||ae==="LineString")Rt(Me,le);else if(ae==="Polygon")Rt(Me,le[0]);else if(ae==="MultiLineString")for(const Ve of le)Rt(Me,Ve);else if(ae==="MultiPolygon")for(const Ve of le)Rt(Me,Ve[0]);return Me}function Rt(tt,ae){for(let le=0;le<ae.length;le+=3)tt.minX=Math.min(tt.minX,ae[le]),tt.minY=Math.min(tt.minY,ae[le+1]),tt.maxX=Math.max(tt.maxX,ae[le]),tt.maxY=Math.max(tt.maxY,ae[le+1])}function or(tt,ae,le,_e){if(!ae.geometry)return;const Me=ae.geometry.coordinates;if(Me&&Me.length===0)return;const Ve=ae.geometry.type,pe=Math.pow(le.tolerance/((1<<le.maxZoom)*le.extent),2);let Ke=[],He=ae.id;if(le.promoteId?He=ae.properties[le.promoteId]:le.generateId&&(He=_e||0),Ve==="Point")Tr(Me,Ke);else if(Ve==="MultiPoint")for(const nt of Me)Tr(nt,Ke);else if(Ve==="LineString")pr(Me,Ke,pe,!1);else if(Ve==="MultiLineString"){if(le.lineMetrics){for(const nt of Me)Ke=[],pr(nt,Ke,pe,!1),tt.push(cr(He,"LineString",Ke,ae.properties));return}mr(Me,Ke,pe,!1)}else if(Ve==="Polygon")mr(Me,Ke,pe,!0);else{if(Ve!=="MultiPolygon"){if(Ve==="GeometryCollection"){for(const nt of ae.geometry.geometries)or(tt,{id:He,geometry:nt,properties:ae.properties},le,_e);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const nt of Me){const ft=[];mr(nt,ft,pe,!0),Ke.push(ft)}}tt.push(cr(He,Ve,Ke,ae.properties))}function Tr(tt,ae){ae.push(Jr(tt[0]),Cr(tt[1]),0)}function pr(tt,ae,le,_e){let Me,Ve,pe=0;for(let He=0;He<tt.length;He++){const nt=Jr(tt[He][0]),ft=Cr(tt[He][1]);ae.push(nt,ft,0),He>0&&(pe+=_e?(Me*ft-nt*Ve)/2:Math.sqrt(Math.pow(nt-Me,2)+Math.pow(ft-Ve,2))),Me=nt,Ve=ft}const Ke=ae.length-3;ae[2]=1,ht(ae,0,Ke,le),ae[Ke+2]=1,ae.size=Math.abs(pe),ae.start=0,ae.end=ae.size}function mr(tt,ae,le,_e){for(let Me=0;Me<tt.length;Me++){const Ve=[];pr(tt[Me],Ve,le,_e),ae.push(Ve)}}function Jr(tt){return tt/360+.5}function Cr(tt){const ae=Math.sin(tt*Math.PI/180),le=.5-.25*Math.log((1+ae)/(1-ae))/Math.PI;return le<0?0:le>1?1:le}function rn(tt,ae,le,_e,Me,Ve,pe,Ke){if(_e/=ae,Ve>=(le/=ae)&&pe<_e)return tt;if(pe<le||Ve>=_e)return null;const He=[];for(const nt of tt){const ft=nt.geometry;let Ye=nt.type;const Dt=Me===0?nt.minX:nt.minY,Yt=Me===0?nt.maxX:nt.maxY;if(Dt>=le&&Yt<_e){He.push(nt);continue}if(Yt<le||Dt>=_e)continue;let hr=[];if(Ye==="Point"||Ye==="MultiPoint")jr(ft,hr,le,_e,Me);else if(Ye==="LineString")br(ft,hr,le,_e,Me,!1,Ke.lineMetrics);else if(Ye==="MultiLineString")qr(ft,hr,le,_e,Me,!1);else if(Ye==="Polygon")qr(ft,hr,le,_e,Me,!0);else if(Ye==="MultiPolygon")for(const kr of ft){const Kr=[];qr(kr,Kr,le,_e,Me,!0),Kr.length&&hr.push(Kr)}if(hr.length){if(Ke.lineMetrics&&Ye==="LineString"){for(const kr of hr)He.push(cr(nt.id,Ye,kr,nt.tags));continue}Ye!=="LineString"&&Ye!=="MultiLineString"||(hr.length===1?(Ye="LineString",hr=hr[0]):Ye="MultiLineString"),Ye!=="Point"&&Ye!=="MultiPoint"||(Ye=hr.length===3?"Point":"MultiPoint"),He.push(cr(nt.id,Ye,hr,nt.tags))}}return He.length?He:null}function jr(tt,ae,le,_e,Me){for(let Ve=0;Ve<tt.length;Ve+=3){const pe=tt[Ve+Me];pe>=le&&pe<=_e&&fn(ae,tt[Ve],tt[Ve+1],tt[Ve+2])}}function br(tt,ae,le,_e,Me,Ve,pe){let Ke=on(tt);const He=Me===0?sn:wn;let nt,ft,Ye=tt.start;for(let Kr=0;Kr<tt.length-3;Kr+=3){const $r=tt[Kr],Tt=tt[Kr+1],Sn=tt[Kr+2],_n=tt[Kr+3],Tn=tt[Kr+4],Br=Me===0?$r:Tt,Ft=Me===0?_n:Tn;let Fr=!1;pe&&(nt=Math.sqrt(Math.pow($r-_n,2)+Math.pow(Tt-Tn,2))),Br<le?Ft>le&&(ft=He(Ke,$r,Tt,_n,Tn,le),pe&&(Ke.start=Ye+nt*ft)):Br>_e?Ft<_e&&(ft=He(Ke,$r,Tt,_n,Tn,_e),pe&&(Ke.start=Ye+nt*ft)):fn(Ke,$r,Tt,Sn),Ft<le&&Br>=le&&(ft=He(Ke,$r,Tt,_n,Tn,le),Fr=!0),Ft>_e&&Br<=_e&&(ft=He(Ke,$r,Tt,_n,Tn,_e),Fr=!0),!Ve&&Fr&&(pe&&(Ke.end=Ye+nt*ft),ae.push(Ke),Ke=on(tt)),pe&&(Ye+=nt)}let Dt=tt.length-3;const Yt=tt[Dt],hr=tt[Dt+1],kr=Me===0?Yt:hr;kr>=le&&kr<=_e&&fn(Ke,Yt,hr,tt[Dt+2]),Dt=Ke.length-3,Ve&&Dt>=3&&(Ke[Dt]!==Ke[0]||Ke[Dt+1]!==Ke[1])&&fn(Ke,Ke[0],Ke[1],Ke[2]),Ke.length&&ae.push(Ke)}function on(tt){const ae=[];return ae.size=tt.size,ae.start=tt.start,ae.end=tt.end,ae}function qr(tt,ae,le,_e,Me,Ve){for(const pe of tt)br(pe,ae,le,_e,Me,Ve,!1)}function fn(tt,ae,le,_e){tt.push(ae,le,_e)}function sn(tt,ae,le,_e,Me,Ve){const pe=(Ve-ae)/(_e-ae);return fn(tt,Ve,le+(Me-le)*pe,1),pe}function wn(tt,ae,le,_e,Me,Ve){const pe=(Ve-le)/(Me-le);return fn(tt,ae+(_e-ae)*pe,Ve,1),pe}function an(tt,ae){const le=[];for(let _e=0;_e<tt.length;_e++){const Me=tt[_e],Ve=Me.type;let pe;if(Ve==="Point"||Ve==="MultiPoint"||Ve==="LineString")pe=An(Me.geometry,ae);else if(Ve==="MultiLineString"||Ve==="Polygon"){pe=[];for(const Ke of Me.geometry)pe.push(An(Ke,ae))}else if(Ve==="MultiPolygon"){pe=[];for(const Ke of Me.geometry){const He=[];for(const nt of Ke)He.push(An(nt,ae));pe.push(He)}}le.push(cr(Me.id,Ve,pe,Me.tags))}return le}function An(tt,ae){const le=[];le.size=tt.size,tt.start!==void 0&&(le.start=tt.start,le.end=tt.end);for(let _e=0;_e<tt.length;_e+=3)le.push(tt[_e]+ae,tt[_e+1],tt[_e+2]);return le}function Sr(tt,ae){if(tt.transformed)return tt;const le=1<<tt.z,_e=tt.x,Me=tt.y;for(const Ve of tt.features){const pe=Ve.geometry,Ke=Ve.type;if(Ve.geometry=[],Ke===1)for(let He=0;He<pe.length;He+=2)Ve.geometry.push(Vn(pe[He],pe[He+1],ae,le,_e,Me));else for(let He=0;He<pe.length;He++){const nt=[];for(let ft=0;ft<pe[He].length;ft+=2)nt.push(Vn(pe[He][ft],pe[He][ft+1],ae,le,_e,Me));Ve.geometry.push(nt)}}return tt.transformed=!0,tt}function Vn(tt,ae,le,_e,Me,Ve){return[Math.round(le*(tt*_e-Me)),Math.round(le*(ae*_e-Ve))]}function Hn(tt,ae,le,_e,Me){const Ve=ae===Me.maxZoom?0:Me.tolerance/((1<<ae)*Me.extent),pe={features:[],numPoints:0,numSimplified:0,numFeatures:tt.length,source:null,x:le,y:_e,z:ae,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Ke of tt)Ti(pe,Ke,Ve,Me);return pe}function Ti(tt,ae,le,_e){const Me=ae.geometry,Ve=ae.type,pe=[];if(tt.minX=Math.min(tt.minX,ae.minX),tt.minY=Math.min(tt.minY,ae.minY),tt.maxX=Math.max(tt.maxX,ae.maxX),tt.maxY=Math.max(tt.maxY,ae.maxY),Ve==="Point"||Ve==="MultiPoint")for(let Ke=0;Ke<Me.length;Ke+=3)pe.push(Me[Ke],Me[Ke+1]),tt.numPoints++,tt.numSimplified++;else if(Ve==="LineString")ei(pe,Me,tt,le,!1,!1);else if(Ve==="MultiLineString"||Ve==="Polygon")for(let Ke=0;Ke<Me.length;Ke++)ei(pe,Me[Ke],tt,le,Ve==="Polygon",Ke===0);else if(Ve==="MultiPolygon")for(let Ke=0;Ke<Me.length;Ke++){const He=Me[Ke];for(let nt=0;nt<He.length;nt++)ei(pe,He[nt],tt,le,!0,nt===0)}if(pe.length){let Ke=ae.tags||null;if(Ve==="LineString"&&_e.lineMetrics){Ke={};for(const nt in ae.tags)Ke[nt]=ae.tags[nt];Ke.mapbox_clip_start=Me.start/Me.size,Ke.mapbox_clip_end=Me.end/Me.size}const He={geometry:pe,type:Ve==="Polygon"||Ve==="MultiPolygon"?3:Ve==="LineString"||Ve==="MultiLineString"?2:1,tags:Ke};ae.id!==null&&(He.id=ae.id),tt.features.push(He)}}function ei(tt,ae,le,_e,Me,Ve){const pe=_e*_e;if(_e>0&&ae.size<(Me?pe:_e))return void(le.numPoints+=ae.length/3);const Ke=[];for(let He=0;He<ae.length;He+=3)(_e===0||ae[He+2]>pe)&&(le.numSimplified++,Ke.push(ae[He],ae[He+1])),le.numPoints++;Me&&function(He,nt){let ft=0;for(let Ye=0,Dt=He.length,Yt=Dt-2;Ye<Dt;Yt=Ye,Ye+=2)ft+=(He[Ye]-He[Yt])*(He[Ye+1]+He[Yt+1]);if(ft>0===nt)for(let Ye=0,Dt=He.length;Ye<Dt/2;Ye+=2){const Yt=He[Ye],hr=He[Ye+1];He[Ye]=He[Dt-2-Ye],He[Ye+1]=He[Dt-1-Ye],He[Dt-2-Ye]=Yt,He[Dt-1-Ye]=hr}}(Ke,Ve),tt.push(Ke)}const qn={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Nn{constructor(ae,le){const _e=(le=this.options=function(Ve,pe){for(const Ke in pe)Ve[Ke]=pe[Ke];return Ve}(Object.create(qn),le)).debug;if(_e&&console.time("preprocess data"),le.maxZoom<0||le.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(le.promoteId&&le.generateId)throw new Error("promoteId and generateId cannot be used together.");let Me=function(Ve,pe){const Ke=[];if(Ve.type==="FeatureCollection")for(let He=0;He<Ve.features.length;He++)or(Ke,Ve.features[He],pe,He);else or(Ke,Ve.type==="Feature"?Ve:{geometry:Ve},pe);return Ke}(ae,le);this.tiles={},this.tileCoords=[],_e&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",le.indexMaxZoom,le.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Me=function(Ve,pe){const Ke=pe.buffer/pe.extent;let He=Ve;const nt=rn(Ve,1,-1-Ke,Ke,0,-1,2,pe),ft=rn(Ve,1,1-Ke,2+Ke,0,-1,2,pe);return(nt||ft)&&(He=rn(Ve,1,-Ke,1+Ke,0,-1,2,pe)||[],nt&&(He=an(nt,1).concat(He)),ft&&(He=He.concat(an(ft,-1)))),He}(Me,le),Me.length&&this.splitTile(Me,0,0,0),_e&&(Me.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ae,le,_e,Me,Ve,pe,Ke){const He=[ae,le,_e,Me],nt=this.options,ft=nt.debug;for(;He.length;){Me=He.pop(),_e=He.pop(),le=He.pop(),ae=He.pop();const Ye=1<<le,Dt=eo(le,_e,Me);let Yt=this.tiles[Dt];if(!Yt&&(ft>1&&console.time("creation"),Yt=this.tiles[Dt]=Hn(ae,le,_e,Me,nt),this.tileCoords.push({z:le,x:_e,y:Me}),ft)){ft>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",le,_e,Me,Yt.numFeatures,Yt.numPoints,Yt.numSimplified),console.timeEnd("creation"));const Fr=`z${le}`;this.stats[Fr]=(this.stats[Fr]||0)+1,this.total++}if(Yt.source=ae,Ve==null){if(le===nt.indexMaxZoom||Yt.numPoints<=nt.indexMaxPoints)continue}else{if(le===nt.maxZoom||le===Ve)continue;if(Ve!=null){const Fr=Ve-le;if(_e!==pe>>Fr||Me!==Ke>>Fr)continue}}if(Yt.source=null,ae.length===0)continue;ft>1&&console.time("clipping");const hr=.5*nt.buffer/nt.extent,kr=.5-hr,Kr=.5+hr,$r=1+hr;let Tt=null,Sn=null,_n=null,Tn=null,Br=rn(ae,Ye,_e-hr,_e+Kr,0,Yt.minX,Yt.maxX,nt),Ft=rn(ae,Ye,_e+kr,_e+$r,0,Yt.minX,Yt.maxX,nt);ae=null,Br&&(Tt=rn(Br,Ye,Me-hr,Me+Kr,1,Yt.minY,Yt.maxY,nt),Sn=rn(Br,Ye,Me+kr,Me+$r,1,Yt.minY,Yt.maxY,nt),Br=null),Ft&&(_n=rn(Ft,Ye,Me-hr,Me+Kr,1,Yt.minY,Yt.maxY,nt),Tn=rn(Ft,Ye,Me+kr,Me+$r,1,Yt.minY,Yt.maxY,nt),Ft=null),ft>1&&console.timeEnd("clipping"),He.push(Tt||[],le+1,2*_e,2*Me),He.push(Sn||[],le+1,2*_e,2*Me+1),He.push(_n||[],le+1,2*_e+1,2*Me),He.push(Tn||[],le+1,2*_e+1,2*Me+1)}}getTile(ae,le,_e){ae=+ae,le=+le,_e=+_e;const Me=this.options,{extent:Ve,debug:pe}=Me;if(ae<0||ae>24)return null;const Ke=1<<ae,He=eo(ae,le=le+Ke&Ke-1,_e);if(this.tiles[He])return Sr(this.tiles[He],Ve);pe>1&&console.log("drilling down to z%d-%d-%d",ae,le,_e);let nt,ft=ae,Ye=le,Dt=_e;for(;!nt&&ft>0;)ft--,Ye>>=1,Dt>>=1,nt=this.tiles[eo(ft,Ye,Dt)];return nt&&nt.source?(pe>1&&(console.log("found parent tile z%d-%d-%d",ft,Ye,Dt),console.time("drilling down")),this.splitTile(nt.source,ft,Ye,Dt,ae,le,_e),pe>1&&console.timeEnd("drilling down"),this.tiles[He]?Sr(this.tiles[He],Ve):null):null}}function eo(tt,ae,le){return 32*((1<<tt)*le+ae)+tt}function Wi(tt,ae){return ae?tt.properties[ae]:tt.id}function Zi(tt,ae){if(tt==null)return!0;if(tt.type==="Feature")return Wi(tt,ae)!=null;if(tt.type==="FeatureCollection"){const le=new Set;for(const _e of tt.features){const Me=Wi(_e,ae);if(Me==null||le.has(Me))return!1;le.add(Me)}return!0}return!1}function ti(tt,ae){const le=new Map;if(tt!=null)if(tt.type==="Feature")le.set(Wi(tt,ae),tt);else for(const _e of tt.features)le.set(Wi(_e,ae),_e);return le}class oi extends he{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(ae,le){return M._(this,void 0,void 0,function*(){const _e=ae.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Me=this._geoJSONIndex.getTile(_e.z,_e.x,_e.y);if(!Me)return null;const Ve=new Ct(Me.features);let pe=je(Ve);return pe.byteOffset===0&&pe.byteLength===pe.buffer.byteLength||(pe=new Uint8Array(pe)),{vectorTile:Ve,rawData:pe.buffer}})}loadData(ae){return M._(this,void 0,void 0,function*(){var le;(le=this._pendingRequest)===null||le===void 0||le.abort();const _e=!!(ae&&ae.request&&ae.request.collectResourceTiming)&&new M.cE(ae.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(ae,this._pendingRequest),this._geoJSONIndex=ae.cluster?new xr(function({superclusterOptions:pe,clusterProperties:Ke}){if(!Ke||!pe)return pe;const He={},nt={},ft={accumulated:null,zoom:0},Ye={properties:null},Dt=Object.keys(Ke);for(const Yt of Dt){const[hr,kr]=Ke[Yt],Kr=M.cL(kr),$r=M.cL(typeof hr=="string"?[hr,["accumulated"],["get",Yt]]:hr);He[Yt]=Kr.value,nt[Yt]=$r.value}return pe.map=Yt=>{Ye.properties=Yt;const hr={};for(const kr of Dt)hr[kr]=He[kr].evaluate(ft,Ye);return hr},pe.reduce=(Yt,hr)=>{Ye.properties=hr;for(const kr of Dt)ft.accumulated=Yt[kr],Yt[kr]=nt[kr].evaluate(ft,Ye)},pe}(ae)).load((yield this._pendingData).features):(Me=yield this._pendingData,new Nn(Me,ae.geojsonVtOptions)),this.loaded={};const Ve={};if(_e){const pe=_e.finish();pe&&(Ve.resourceTiming={},Ve.resourceTiming[ae.source]=JSON.parse(JSON.stringify(pe)))}return Ve}catch(Ve){if(delete this._pendingRequest,M.cp(Ve))return{abandoned:!0};throw Ve}var Me})}getData(){return M._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(ae){const le=this.loaded;return le&&le[ae.uid]?super.reloadTile(ae):this.loadTile(ae)}loadAndProcessGeoJSON(ae,le){return M._(this,void 0,void 0,function*(){let _e=yield this.loadGeoJSON(ae,le);if(delete this._pendingRequest,typeof _e!="object")throw new Error(`Input data given to '${ae.source}' is not a valid GeoJSON object.`);if(We(_e,!0),ae.filter){const Me=M.cL(ae.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Me.result==="error")throw new Error(Me.value.map(pe=>`${pe.key}: ${pe.message}`).join(", "));_e={type:"FeatureCollection",features:_e.features.filter(pe=>Me.value.evaluate({zoom:0},pe))}}return _e})}loadGeoJSON(ae,le){return M._(this,void 0,void 0,function*(){const{promoteId:_e}=ae;if(ae.request){const Me=yield M.j(ae.request,le);return this._dataUpdateable=Zi(Me.data,_e)?ti(Me.data,_e):void 0,Me.data}if(typeof ae.data=="string")try{const Me=JSON.parse(ae.data);return this._dataUpdateable=Zi(Me,_e)?ti(Me,_e):void 0,Me}catch{throw new Error(`Input data given to '${ae.source}' is not a valid GeoJSON object.`)}if(!ae.dataDiff)throw new Error(`Input data given to '${ae.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ae.source}`);return function(Me,Ve,pe){var Ke,He,nt,ft;if(Ve.removeAll&&Me.clear(),Ve.remove)for(const Ye of Ve.remove)Me.delete(Ye);if(Ve.add)for(const Ye of Ve.add){const Dt=Wi(Ye,pe);Dt!=null&&Me.set(Dt,Ye)}if(Ve.update)for(const Ye of Ve.update){let Dt=Me.get(Ye.id);if(Dt==null)continue;const Yt=!Ye.removeAllProperties&&(((Ke=Ye.removeProperties)===null||Ke===void 0?void 0:Ke.length)>0||((He=Ye.addOrUpdateProperties)===null||He===void 0?void 0:He.length)>0);if((Ye.newGeometry||Ye.removeAllProperties||Yt)&&(Dt=Object.assign({},Dt),Me.set(Ye.id,Dt),Yt&&(Dt.properties=Object.assign({},Dt.properties))),Ye.newGeometry&&(Dt.geometry=Ye.newGeometry),Ye.removeAllProperties)Dt.properties={};else if(((nt=Ye.removeProperties)===null||nt===void 0?void 0:nt.length)>0)for(const hr of Ye.removeProperties)Object.prototype.hasOwnProperty.call(Dt.properties,hr)&&delete Dt.properties[hr];if(((ft=Ye.addOrUpdateProperties)===null||ft===void 0?void 0:ft.length)>0)for(const{key:hr,value:kr}of Ye.addOrUpdateProperties)Dt.properties[hr]=kr}}(this._dataUpdateable,ae.dataDiff,_e),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(ae){return M._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(ae){return this._geoJSONIndex.getClusterExpansionZoom(ae.clusterId)}getClusterChildren(ae){return this._geoJSONIndex.getChildren(ae.clusterId)}getClusterLeaves(ae){return this._geoJSONIndex.getLeaves(ae.clusterId,ae.limit,ae.offset)}}class go{constructor(ae){this.self=ae,this.actor=new M.H(ae),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(le,_e)=>{if(this.externalWorkerSourceTypes[le])throw new Error(`Worker source with name "${le}" already registered.`);this.externalWorkerSourceTypes[le]=_e},this.self.addProtocol=M.cr,this.self.removeProtocol=M.cs,this.self.registerRTLTextPlugin=le=>{M.cM.setMethods(le)},this.actor.registerMessageHandler("LDT",(le,_e)=>this._getDEMWorkerSource(le,_e.source).loadTile(_e)),this.actor.registerMessageHandler("RDT",(le,_e)=>M._(this,void 0,void 0,function*(){this._getDEMWorkerSource(le,_e.source).removeTile(_e)})),this.actor.registerMessageHandler("GCEZ",(le,_e)=>M._(this,void 0,void 0,function*(){return this._getWorkerSource(le,_e.type,_e.source).getClusterExpansionZoom(_e)})),this.actor.registerMessageHandler("GCC",(le,_e)=>M._(this,void 0,void 0,function*(){return this._getWorkerSource(le,_e.type,_e.source).getClusterChildren(_e)})),this.actor.registerMessageHandler("GCL",(le,_e)=>M._(this,void 0,void 0,function*(){return this._getWorkerSource(le,_e.type,_e.source).getClusterLeaves(_e)})),this.actor.registerMessageHandler("LD",(le,_e)=>this._getWorkerSource(le,_e.type,_e.source).loadData(_e)),this.actor.registerMessageHandler("GD",(le,_e)=>this._getWorkerSource(le,_e.type,_e.source).getData()),this.actor.registerMessageHandler("LT",(le,_e)=>this._getWorkerSource(le,_e.type,_e.source).loadTile(_e)),this.actor.registerMessageHandler("RT",(le,_e)=>this._getWorkerSource(le,_e.type,_e.source).reloadTile(_e)),this.actor.registerMessageHandler("AT",(le,_e)=>this._getWorkerSource(le,_e.type,_e.source).abortTile(_e)),this.actor.registerMessageHandler("RMT",(le,_e)=>this._getWorkerSource(le,_e.type,_e.source).removeTile(_e)),this.actor.registerMessageHandler("RS",(le,_e)=>M._(this,void 0,void 0,function*(){if(!this.workerSources[le]||!this.workerSources[le][_e.type]||!this.workerSources[le][_e.type][_e.source])return;const Me=this.workerSources[le][_e.type][_e.source];delete this.workerSources[le][_e.type][_e.source],Me.removeSource!==void 0&&Me.removeSource(_e)})),this.actor.registerMessageHandler("RM",le=>M._(this,void 0,void 0,function*(){delete this.layerIndexes[le],delete this.availableImages[le],delete this.workerSources[le],delete this.demWorkerSources[le]})),this.actor.registerMessageHandler("SR",(le,_e)=>M._(this,void 0,void 0,function*(){this.referrer=_e})),this.actor.registerMessageHandler("SRPS",(le,_e)=>this._syncRTLPluginState(le,_e)),this.actor.registerMessageHandler("IS",(le,_e)=>M._(this,void 0,void 0,function*(){this.self.importScripts(_e)})),this.actor.registerMessageHandler("SI",(le,_e)=>this._setImages(le,_e)),this.actor.registerMessageHandler("UL",(le,_e)=>M._(this,void 0,void 0,function*(){this._getLayerIndex(le).update(_e.layers,_e.removedIds)})),this.actor.registerMessageHandler("SL",(le,_e)=>M._(this,void 0,void 0,function*(){this._getLayerIndex(le).replace(_e)}))}_setImages(ae,le){return M._(this,void 0,void 0,function*(){this.availableImages[ae]=le;for(const _e in this.workerSources[ae]){const Me=this.workerSources[ae][_e];for(const Ve in Me)Me[Ve].availableImages=le}})}_syncRTLPluginState(ae,le){return M._(this,void 0,void 0,function*(){return yield M.cM.syncState(le,this.self.importScripts)})}_getAvailableImages(ae){let le=this.availableImages[ae];return le||(le=[]),le}_getLayerIndex(ae){let le=this.layerIndexes[ae];return le||(le=this.layerIndexes[ae]=new u),le}_getWorkerSource(ae,le,_e){if(this.workerSources[ae]||(this.workerSources[ae]={}),this.workerSources[ae][le]||(this.workerSources[ae][le]={}),!this.workerSources[ae][le][_e]){const Me={sendAsync:(Ve,pe)=>(Ve.targetMapId=ae,this.actor.sendAsync(Ve,pe))};switch(le){case"vector":this.workerSources[ae][le][_e]=new he(Me,this._getLayerIndex(ae),this._getAvailableImages(ae));break;case"geojson":this.workerSources[ae][le][_e]=new oi(Me,this._getLayerIndex(ae),this._getAvailableImages(ae));break;default:this.workerSources[ae][le][_e]=new this.externalWorkerSourceTypes[le](Me,this._getLayerIndex(ae),this._getAvailableImages(ae))}}return this.workerSources[ae][le][_e]}_getDEMWorkerSource(ae,le){return this.demWorkerSources[ae]||(this.demWorkerSources[ae]={}),this.demWorkerSources[ae][le]||(this.demWorkerSources[ae][le]=new Te),this.demWorkerSources[ae][le]}}return M.i(self)&&(self.worker=new go(self)),go}),P("index",["exports","./shared"],function(M,u){var te="5.5.0";function Y(){var g=new u.A(4);return u.A!=Float32Array&&(g[1]=0,g[2]=0),g[0]=1,g[3]=1,g}let fe,he;const Te={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(g,e,r){const a=requestAnimationFrame(y=>{d(),e(y)}),{unsubscribe:d}=u.s(g.signal,"abort",()=>{d(),cancelAnimationFrame(a),r(u.c())},!1)},frameAsync(g){return new Promise((e,r)=>{this.frame(g,e,r)})},getImageData(g,e=0){return this.getImageCanvasContext(g).getImageData(-e,-e,g.width+2*e,g.height+2*e)},getImageCanvasContext(g){const e=window.document.createElement("canvas"),r=e.getContext("2d",{willReadFrequently:!0});if(!r)throw new Error("failed to create canvas 2d context");return e.width=g.width,e.height=g.height,r.drawImage(g,0,0,g.width,g.height),r},resolveURL:g=>(fe||(fe=document.createElement("a")),fe.href=g,fe.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(he==null&&(he=matchMedia("(prefers-reduced-motion: reduce)")),he.matches)}};class ge{static testProp(e){if(!ge.docStyle)return e[0];for(let r=0;r<e.length;r++)if(e[r]in ge.docStyle)return e[r];return e[0]}static create(e,r,a){const d=window.document.createElement(e);return r!==void 0&&(d.className=r),a&&a.appendChild(d),d}static createNS(e,r){return window.document.createElementNS(e,r)}static disableDrag(){ge.docStyle&&ge.selectProp&&(ge.userSelect=ge.docStyle[ge.selectProp],ge.docStyle[ge.selectProp]="none")}static enableDrag(){ge.docStyle&&ge.selectProp&&(ge.docStyle[ge.selectProp]=ge.userSelect)}static setTransform(e,r){e.style[ge.transformProp]=r}static addEventListener(e,r,a,d={}){e.addEventListener(r,a,"passive"in d?d:d.capture)}static removeEventListener(e,r,a,d={}){e.removeEventListener(r,a,"passive"in d?d:d.capture)}static suppressClickInternal(e){e.preventDefault(),e.stopPropagation(),window.removeEventListener("click",ge.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",ge.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",ge.suppressClickInternal,!0)},0)}static getScale(e){const r=e.getBoundingClientRect();return{x:r.width/e.offsetWidth||1,y:r.height/e.offsetHeight||1,boundingClientRect:r}}static getPoint(e,r,a){const d=r.boundingClientRect;return new u.P((a.clientX-d.left)/r.x-e.clientLeft,(a.clientY-d.top)/r.y-e.clientTop)}static mousePos(e,r){const a=ge.getScale(e);return ge.getPoint(e,a,r)}static touchPos(e,r){const a=[],d=ge.getScale(e);for(let y=0;y<r.length;y++)a.push(ge.getPoint(e,d,r[y]));return a}static mouseButton(e){return e.button}static remove(e){e.parentNode&&e.parentNode.removeChild(e)}static sanitize(e){const r=new DOMParser().parseFromString(e,"text/html").body||document.createElement("body"),a=r.querySelectorAll("script");for(const d of a)d.remove();return ge.clean(r),r.innerHTML}static isPossiblyDangerous(e,r){const a=r.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(e)||!a.includes("javascript:")&&!a.includes("data:"))||!!e.startsWith("on")||void 0}static clean(e){const r=e.children;for(const a of r)ge.removeAttributes(a),ge.clean(a)}static removeAttributes(e){for(const{name:r,value:a}of e.attributes)ge.isPossiblyDangerous(r,a)&&e.removeAttribute(r)}}ge.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,ge.selectProp=ge.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),ge.transformProp=ge.testProp(["transform","WebkitTransform"]);const we={supported:!1,testSupport:function(g){!gt&&We&&(At?Ct(g):Ce=g)}};let Ce,We,gt=!1,At=!1;function Ct(g){const e=g.createTexture();g.bindTexture(g.TEXTURE_2D,e);try{if(g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,We),g.isContextLost())return;we.supported=!0}catch{}g.deleteTexture(e),gt=!0}var et;typeof document<"u"&&(We=document.createElement("img"),We.onload=()=>{Ce&&Ct(Ce),Ce=null,At=!0},We.onerror=()=>{gt=!0,Ce=null},We.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(g){let e,r,a,d;g.resetRequestQueue=()=>{e=[],r=0,a=0,d={}},g.addThrottleControl=A=>{const O=a++;return d[O]=A,O},g.removeThrottleControl=A=>{delete d[A],w()},g.getImage=(A,O,N=!0)=>new Promise((W,G)=>{we.supported&&(A.headers||(A.headers={}),A.headers.accept="image/webp,*/*"),u.e(A,{type:"image"}),e.push({abortController:O,requestParameters:A,supportImageRefresh:N,state:"queued",onError:Q=>{G(Q)},onSuccess:Q=>{W(Q)}}),w()});const y=A=>u._(this,void 0,void 0,function*(){A.state="running";const{requestParameters:O,supportImageRefresh:N,onError:W,onSuccess:G,abortController:Q}=A,ie=N===!1&&!u.i(self)&&!u.g(O.url)&&(!O.headers||Object.keys(O.headers).reduce((Se,Ae)=>Se&&Ae==="accept",!0));r++;const be=ie?E(O,Q):u.m(O,Q);try{const Se=yield be;delete A.abortController,A.state="completed",Se.data instanceof HTMLImageElement||u.b(Se.data)?G(Se):Se.data&&G({data:yield(xe=Se.data,typeof createImageBitmap=="function"?u.f(xe):u.h(xe)),cacheControl:Se.cacheControl,expires:Se.expires})}catch(Se){delete A.abortController,W(Se)}finally{r--,w()}var xe}),w=()=>{const A=(()=>{for(const O of Object.keys(d))if(d[O]())return!0;return!1})()?u.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:u.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let O=r;O<A&&e.length>0;O++){const N=e.shift();N.abortController.signal.aborted?O--:y(N)}},E=(A,O)=>new Promise((N,W)=>{const G=new Image,Q=A.url,ie=A.credentials;ie&&ie==="include"?G.crossOrigin="use-credentials":(ie&&ie==="same-origin"||!u.d(Q))&&(G.crossOrigin="anonymous"),O.signal.addEventListener("abort",()=>{G.src="",W(u.c())}),G.fetchPriority="high",G.onload=()=>{G.onerror=G.onload=null,N({data:G})},G.onerror=()=>{G.onerror=G.onload=null,O.signal.aborted||W(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},G.src=Q})}(et||(et={})),et.resetRequestQueue();class Je{constructor(e){this._transformRequestFn=e}transformRequest(e,r){return this._transformRequestFn&&this._transformRequestFn(e,r)||{url:e}}setTransformRequest(e){this._transformRequestFn=e}}function it(g){const e=[];if(typeof g=="string")e.push({id:"default",url:g});else if(g&&g.length>0){const r=[];for(const{id:a,url:d}of g){const y=`${a}${d}`;r.indexOf(y)===-1&&(r.push(y),e.push({id:a,url:d}))}}return e}function _t(g,e,r){try{const a=new URL(g);return a.pathname+=`${e}${r}`,a.toString()}catch{throw new Error(`Invalid sprite URL "${g}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}class Le{constructor(e,r,a,d){this.context=e,this.format=a,this.texture=e.gl.createTexture(),this.update(r,d)}update(e,r,a){const{width:d,height:y}=e,w=!(this.size&&this.size[0]===d&&this.size[1]===y||a),{context:E}=this,{gl:A}=E;if(this.useMipmap=!!(r&&r.useMipmap),A.bindTexture(A.TEXTURE_2D,this.texture),E.pixelStoreUnpackFlipY.set(!1),E.pixelStoreUnpack.set(1),E.pixelStoreUnpackPremultiplyAlpha.set(this.format===A.RGBA&&(!r||r.premultiply!==!1)),w)this.size=[d,y],e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||u.b(e)?A.texImage2D(A.TEXTURE_2D,0,this.format,this.format,A.UNSIGNED_BYTE,e):A.texImage2D(A.TEXTURE_2D,0,this.format,d,y,0,this.format,A.UNSIGNED_BYTE,e.data);else{const{x:O,y:N}=a||{x:0,y:0};e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||u.b(e)?A.texSubImage2D(A.TEXTURE_2D,0,O,N,A.RGBA,A.UNSIGNED_BYTE,e):A.texSubImage2D(A.TEXTURE_2D,0,O,N,d,y,A.RGBA,A.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&A.generateMipmap(A.TEXTURE_2D),E.pixelStoreUnpackFlipY.setDefault(),E.pixelStoreUnpack.setDefault(),E.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(e,r,a){const{context:d}=this,{gl:y}=d;y.bindTexture(y.TEXTURE_2D,this.texture),a!==y.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(a=y.LINEAR),e!==this.filter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,e),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,a||e),this.filter=e),r!==this.wrap&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,r),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,r),this.wrap=r)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}function je(g){const{userImage:e}=g;return!!(e&&e.render&&e.render())&&(g.data.replace(new Uint8Array(e.data.buffer)),!0)}class ne extends u.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new u.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(e){if(this.loaded!==e&&(this.loaded=e,e)){for(const{ids:r,promiseResolve:a}of this.requestors)a(this._getImagesForIds(r));this.requestors=[]}}getImage(e){const r=this.images[e];if(r&&!r.data&&r.spriteData){const a=r.spriteData;r.data=new u.R({width:a.width,height:a.height},a.context.getImageData(a.x,a.y,a.width,a.height).data),r.spriteData=null}return r}addImage(e,r){if(this.images[e])throw new Error(`Image id ${e} already exist, use updateImage instead`);this._validate(e,r)&&(this.images[e]=r)}_validate(e,r){let a=!0;const d=r.data||r.spriteData;return this._validateStretch(r.stretchX,d&&d.width)||(this.fire(new u.k(new Error(`Image "${e}" has invalid "stretchX" value`))),a=!1),this._validateStretch(r.stretchY,d&&d.height)||(this.fire(new u.k(new Error(`Image "${e}" has invalid "stretchY" value`))),a=!1),this._validateContent(r.content,r)||(this.fire(new u.k(new Error(`Image "${e}" has invalid "content" value`))),a=!1),a}_validateStretch(e,r){if(!e)return!0;let a=0;for(const d of e){if(d[0]<a||d[1]<d[0]||r<d[1])return!1;a=d[1]}return!0}_validateContent(e,r){if(!e)return!0;if(e.length!==4)return!1;const a=r.spriteData,d=a&&a.width||r.data.width,y=a&&a.height||r.data.height;return!(e[0]<0||d<e[0]||e[1]<0||y<e[1]||e[2]<0||d<e[2]||e[3]<0||y<e[3]||e[2]<e[0]||e[3]<e[1])}updateImage(e,r,a=!0){const d=this.getImage(e);if(a&&(d.data.width!==r.data.width||d.data.height!==r.data.height))throw new Error(`size mismatch between old image (${d.data.width}x${d.data.height}) and new image (${r.data.width}x${r.data.height}).`);r.version=d.version+1,this.images[e]=r,this.updatedImages[e]=!0}removeImage(e){const r=this.images[e];delete this.images[e],delete this.patterns[e],r.userImage&&r.userImage.onRemove&&r.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(e){return new Promise((r,a)=>{let d=!0;if(!this.isLoaded())for(const y of e)this.images[y]||(d=!1);this.isLoaded()||d?r(this._getImagesForIds(e)):this.requestors.push({ids:e,promiseResolve:r})})}_getImagesForIds(e){const r={};for(const a of e){let d=this.getImage(a);d||(this.fire(new u.l("styleimagemissing",{id:a})),d=this.getImage(a)),d?r[a]={data:d.data.clone(),pixelRatio:d.pixelRatio,sdf:d.sdf,version:d.version,stretchX:d.stretchX,stretchY:d.stretchY,content:d.content,textFitWidth:d.textFitWidth,textFitHeight:d.textFitHeight,hasRenderCallback:!!(d.userImage&&d.userImage.render)}:u.w(`Image "${a}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return r}getPixelSize(){const{width:e,height:r}=this.atlasImage;return{width:e,height:r}}getPattern(e){const r=this.patterns[e],a=this.getImage(e);if(!a)return null;if(r&&r.position.version===a.version)return r.position;if(r)r.position.version=a.version;else{const d={w:a.data.width+2,h:a.data.height+2,x:0,y:0},y=new u.I(d,a);this.patterns[e]={bin:d,position:y}}return this._updatePatternAtlas(),this.patterns[e].position}bind(e){const r=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Le(e,this.atlasImage,r.RGBA),this.atlasTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}_updatePatternAtlas(){const e=[];for(const y in this.patterns)e.push(this.patterns[y].bin);const{w:r,h:a}=u.p(e),d=this.atlasImage;d.resize({width:r||1,height:a||1});for(const y in this.patterns){const{bin:w}=this.patterns[y],E=w.x+1,A=w.y+1,O=this.getImage(y).data,N=O.width,W=O.height;u.R.copy(O,d,{x:0,y:0},{x:E,y:A},{width:N,height:W}),u.R.copy(O,d,{x:0,y:W-1},{x:E,y:A-1},{width:N,height:1}),u.R.copy(O,d,{x:0,y:0},{x:E,y:A+W},{width:N,height:1}),u.R.copy(O,d,{x:N-1,y:0},{x:E-1,y:A},{width:1,height:W}),u.R.copy(O,d,{x:0,y:0},{x:E+N,y:A},{width:1,height:W})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(e){for(const r of e){if(this.callbackDispatchedThisFrame[r])continue;this.callbackDispatchedThisFrame[r]=!0;const a=this.getImage(r);a||u.w(`Image with ID: "${r}" was not found`),je(a)&&this.updateImage(r,a)}}}const ot=1e20;function at(g,e,r,a,d,y,w,E,A){for(let O=e;O<e+a;O++)Lt(g,r*y+O,y,d,w,E,A);for(let O=r;O<r+d;O++)Lt(g,O*y+e,1,a,w,E,A)}function Lt(g,e,r,a,d,y,w){y[0]=0,w[0]=-1e20,w[1]=ot,d[0]=g[e];for(let E=1,A=0,O=0;E<a;E++){d[E]=g[e+E*r];const N=E*E;do{const W=y[A];O=(d[E]-d[W]+N-W*W)/(E-W)/2}while(O<=w[A]&&--A>-1);A++,y[A]=E,w[A]=O,w[A+1]=ot}for(let E=0,A=0;E<a;E++){for(;w[A+1]<E;)A++;const O=y[A],N=E-O;g[e+E*r]=d[O]+N*N}}class rr{constructor(e,r){this.requestManager=e,this.localIdeographFontFamily=r,this.entries={}}setURL(e){this.url=e}getGlyphs(e){return u._(this,void 0,void 0,function*(){const r=[];for(const y in e)for(const w of e[y])r.push(this._getAndCacheGlyphsPromise(y,w));const a=yield Promise.all(r),d={};for(const{stack:y,id:w,glyph:E}of a)d[y]||(d[y]={}),d[y][w]=E&&{id:E.id,bitmap:E.bitmap.clone(),metrics:E.metrics};return d})}_getAndCacheGlyphsPromise(e,r){return u._(this,void 0,void 0,function*(){let a=this.entries[e];a||(a=this.entries[e]={glyphs:{},requests:{},ranges:{}});let d=a.glyphs[r];if(d!==void 0)return{stack:e,id:r,glyph:d};if(d=this._tinySDF(a,e,r),d)return a.glyphs[r]=d,{stack:e,id:r,glyph:d};const y=Math.floor(r/256);if(256*y>65535)throw new Error("glyphs > 65535 not supported");if(a.ranges[y])return{stack:e,id:r,glyph:d};if(!this.url)throw new Error("glyphsUrl is not set");if(!a.requests[y]){const E=rr.loadGlyphRange(e,y,this.url,this.requestManager);a.requests[y]=E}const w=yield a.requests[y];for(const E in w)this._doesCharSupportLocalGlyph(+E)||(a.glyphs[+E]=w[+E]);return a.ranges[y]=!0,{stack:e,id:r,glyph:w[r]||null}})}_doesCharSupportLocalGlyph(e){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(e))||u.u["CJK Unified Ideographs"](e)||u.u["Hangul Syllables"](e)||u.u.Hiragana(e)||u.u.Katakana(e)||u.u["CJK Symbols and Punctuation"](e)||u.u["Halfwidth and Fullwidth Forms"](e))}_tinySDF(e,r,a){const d=this.localIdeographFontFamily;if(!d||!this._doesCharSupportLocalGlyph(a))return;let y=e.tinySDF;if(!y){let E="400";/bold/i.test(r)?E="900":/medium/i.test(r)?E="500":/light/i.test(r)&&(E="200"),y=e.tinySDF=new rr.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:d,fontWeight:E})}const w=y.draw(String.fromCharCode(a));return{id:a,bitmap:new u.q({width:w.width||60,height:w.height||60},w.data),metrics:{width:w.glyphWidth/2||24,height:w.glyphHeight/2||24,left:w.glyphLeft/2+.5||0,top:w.glyphTop/2-27.5||-8,advance:w.glyphAdvance/2||24,isDoubleResolution:!0}}}}rr.loadGlyphRange=function(g,e,r,a){return u._(this,void 0,void 0,function*(){const d=256*e,y=d+255,w=a.transformRequest(r.replace("{fontstack}",g).replace("{range}",`${d}-${y}`),"Glyphs"),E=yield u.n(w,new AbortController);if(!E||!E.data)throw new Error(`Could not load glyph range. range: ${e}, ${d}-${y}`);const A={};for(const O of u.o(E.data))A[O.id]=O;return A})},rr.TinySDF=class{constructor({fontSize:g=24,buffer:e=3,radius:r=8,cutoff:a=.25,fontFamily:d="sans-serif",fontWeight:y="normal",fontStyle:w="normal"}={}){this.buffer=e,this.cutoff=a,this.radius=r;const E=this.size=g+4*e,A=this._createCanvas(E),O=this.ctx=A.getContext("2d",{willReadFrequently:!0});O.font=`${w} ${y} ${g}px ${d}`,O.textBaseline="alphabetic",O.textAlign="left",O.fillStyle="black",this.gridOuter=new Float64Array(E*E),this.gridInner=new Float64Array(E*E),this.f=new Float64Array(E),this.z=new Float64Array(E+1),this.v=new Uint16Array(E)}_createCanvas(g){const e=document.createElement("canvas");return e.width=e.height=g,e}draw(g){const{width:e,actualBoundingBoxAscent:r,actualBoundingBoxDescent:a,actualBoundingBoxLeft:d,actualBoundingBoxRight:y}=this.ctx.measureText(g),w=Math.ceil(r),E=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(y-d))),A=Math.min(this.size-this.buffer,w+Math.ceil(a)),O=E+2*this.buffer,N=A+2*this.buffer,W=Math.max(O*N,0),G=new Uint8ClampedArray(W),Q={data:G,width:O,height:N,glyphWidth:E,glyphHeight:A,glyphTop:w,glyphLeft:0,glyphAdvance:e};if(E===0||A===0)return Q;const{ctx:ie,buffer:be,gridInner:xe,gridOuter:Se}=this;ie.clearRect(be,be,E,A),ie.fillText(g,be,be+w);const Ae=ie.getImageData(be,be,E,A);Se.fill(ot,0,W),xe.fill(0,0,W);for(let De=0;De<A;De++)for(let ke=0;ke<E;ke++){const Oe=Ae.data[4*(De*E+ke)+3]/255;if(Oe===0)continue;const $e=(De+be)*O+ke+be;if(Oe===1)Se[$e]=0,xe[$e]=ot;else{const Ue=.5-Oe;Se[$e]=Ue>0?Ue*Ue:0,xe[$e]=Ue<0?Ue*Ue:0}}at(Se,0,0,O,N,O,this.f,this.v,this.z),at(xe,be,be,E,A,O,this.f,this.v,this.z);for(let De=0;De<W;De++){const ke=Math.sqrt(Se[De])-Math.sqrt(xe[De]);G[De]=Math.round(255-255*(ke/this.radius+this.cutoff))}return Q}};class Pr{constructor(){this.specification=u.v.light.position}possiblyEvaluate(e,r){return u.z(e.expression.evaluate(r))}interpolate(e,r,a){return{x:u.B.number(e.x,r.x,a),y:u.B.number(e.y,r.y,a),z:u.B.number(e.z,r.z,a)}}}let xr;class sr extends u.E{constructor(e){super(),xr=xr||new u.r({anchor:new u.D(u.v.light.anchor),position:new Pr,color:new u.D(u.v.light.color),intensity:new u.D(u.v.light.intensity)}),this._transitionable=new u.T(xr),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(e,r={}){if(!this._validate(u.t,e,r))for(const a in e){const d=e[a];a.endsWith("-transition")?this._transitionable.setTransition(a.slice(0,-11),d):this._transitionable.setValue(a,d)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,r,a){return(!a||a.validate!==!1)&&u.x(this,e.call(u.y,{value:r,style:{glyphs:!0,sprite:!0},styleSpec:u.v}))}}const bt=new u.r({"sky-color":new u.D(u.v.sky["sky-color"]),"horizon-color":new u.D(u.v.sky["horizon-color"]),"fog-color":new u.D(u.v.sky["fog-color"]),"fog-ground-blend":new u.D(u.v.sky["fog-ground-blend"]),"horizon-fog-blend":new u.D(u.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new u.D(u.v.sky["sky-horizon-blend"]),"atmosphere-blend":new u.D(u.v.sky["atmosphere-blend"])});class Et extends u.E{constructor(e){super(),this._transitionable=new u.T(bt),this.setSky(e),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new u.C(0))}setSky(e,r={}){if(!this._validate(u.F,e,r)){e||(e={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const a in e){const d=e[a];a.endsWith("-transition")?this._transitionable.setTransition(a.slice(0,-11),d):this._transitionable.setValue(a,d)}}}getSky(){return this._transitionable.serialize()}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,r,a={}){return(a==null?void 0:a.validate)!==!1&&u.x(this,e.call(u.y,u.e({value:r,style:{glyphs:!0,sprite:!0},styleSpec:u.v})))}calculateFogBlendOpacity(e){return e<60?0:e<70?(e-60)/10:1}}class Ht{constructor(e,r){this.width=e,this.height=r,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(e,r){const a=e.join(",")+String(r);return this.dashEntry[a]||(this.dashEntry[a]=this.addDash(e,r)),this.dashEntry[a]}getDashRanges(e,r,a){const d=[];let y=e.length%2==1?-e[e.length-1]*a:0,w=e[0]*a,E=!0;d.push({left:y,right:w,isDash:E,zeroLength:e[0]===0});let A=e[0];for(let O=1;O<e.length;O++){E=!E;const N=e[O];y=A*a,A+=N,w=A*a,d.push({left:y,right:w,isDash:E,zeroLength:N===0})}return d}addRoundDash(e,r,a){const d=r/2;for(let y=-a;y<=a;y++){const w=this.width*(this.nextRow+a+y);let E=0,A=e[E];for(let O=0;O<this.width;O++){O/A.right>1&&(A=e[++E]);const N=Math.abs(O-A.left),W=Math.abs(O-A.right),G=Math.min(N,W);let Q;const ie=y/a*(d+1);if(A.isDash){const be=d-Math.abs(ie);Q=Math.sqrt(G*G+be*be)}else Q=d-Math.sqrt(G*G+ie*ie);this.data[w+O]=Math.max(0,Math.min(255,Q+128))}}}addRegularDash(e){for(let E=e.length-1;E>=0;--E){const A=e[E],O=e[E+1];A.zeroLength?e.splice(E,1):O&&O.isDash===A.isDash&&(O.left=A.left,e.splice(E,1))}const r=e[0],a=e[e.length-1];r.isDash===a.isDash&&(r.left=a.left-this.width,a.right=r.right+this.width);const d=this.width*this.nextRow;let y=0,w=e[y];for(let E=0;E<this.width;E++){E/w.right>1&&(w=e[++y]);const A=Math.abs(E-w.left),O=Math.abs(E-w.right),N=Math.min(A,O);this.data[d+E]=Math.max(0,Math.min(255,(w.isDash?N:-N)+128))}}addDash(e,r){const a=r?7:0,d=2*a+1;if(this.nextRow+d>this.height)return u.w("LineAtlas out of space"),null;let y=0;for(let E=0;E<e.length;E++)y+=e[E];if(y!==0){const E=this.width/y,A=this.getDashRanges(e,this.width,E);r?this.addRoundDash(A,E,a):this.addRegularDash(A)}const w={y:(this.nextRow+a+.5)/this.height,height:2*a/this.height,width:y};return this.nextRow+=d,this.dirty=!0,w}bind(e){const r=e.gl;this.texture?(r.bindTexture(r.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,r.texSubImage2D(r.TEXTURE_2D,0,0,0,this.width,this.height,r.ALPHA,r.UNSIGNED_BYTE,this.data))):(this.texture=r.createTexture(),r.bindTexture(r.TEXTURE_2D,this.texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.REPEAT),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.REPEAT),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texImage2D(r.TEXTURE_2D,0,r.ALPHA,this.width,this.height,0,r.ALPHA,r.UNSIGNED_BYTE,this.data))}}const Fe="maplibre_preloaded_worker_pool";class ht{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<ht.workerCount;)this.workers.push(new Worker(u.a.WORKER_URL));return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],this.numActive()===0&&(this.workers.forEach(r=>{r.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Fe]}numActive(){return Object.keys(this.active).length}}const Vt=Math.floor(Te.hardwareConcurrency/2);let cr,Rt;function or(){return cr||(cr=new ht),cr}ht.workerCount=u.G(globalThis)?Math.max(Math.min(Vt,3),1):1;class Tr{constructor(e,r){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=r;const a=this.workerPool.acquire(r);for(let d=0;d<a.length;d++){const y=new u.H(a[d],r);y.name=`Worker ${d}`,this.actors.push(y)}if(!this.actors.length)throw new Error("No actors found")}broadcast(e,r){const a=[];for(const d of this.actors)a.push(d.sendAsync({type:e,data:r}));return Promise.all(a)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(e=!0){this.actors.forEach(r=>{r.remove()}),this.actors=[],e&&this.workerPool.release(this.id)}registerMessageHandler(e,r){for(const a of this.actors)a.registerMessageHandler(e,r)}}function pr(){return Rt||(Rt=new Tr(or(),u.J),Rt.registerMessageHandler("GR",(g,e,r)=>u.m(e,r))),Rt}function mr(g,e){const r=u.K();return u.L(r,r,[1,1,0]),u.M(r,r,[.5*g.width,.5*g.height,1]),g.calculatePosMatrix?u.N(r,r,g.calculatePosMatrix(e.toUnwrapped())):r}function Jr(g,e,r,a,d,y,w){var E;const A=function(G,Q,ie){if(G)for(const be of G){const xe=Q[be];if(xe&&xe.source===ie&&xe.type==="fill-extrusion")return!0}else for(const be in Q){const xe=Q[be];if(xe.source===ie&&xe.type==="fill-extrusion")return!0}return!1}((E=d==null?void 0:d.layers)!==null&&E!==void 0?E:null,e,g.id),O=y.maxPitchScaleFactor(),N=g.tilesIn(a,O,A);N.sort(Cr);const W=[];for(const G of N)W.push({wrappedTileID:G.tileID.wrapped().key,queryResults:G.tile.queryRenderedFeatures(e,r,g._state,G.queryGeometry,G.cameraQueryGeometry,G.scale,d,y,O,mr(g.transform,G.tileID),w?(Q,ie)=>w(G.tileID,Q,ie):void 0)});return function(G,Q){for(const ie in G)for(const be of G[ie])rn(be,Q);return G}(function(G){const Q={},ie={};for(const be of G){const xe=be.queryResults,Se=be.wrappedTileID,Ae=ie[Se]=ie[Se]||{};for(const De in xe){const ke=xe[De],Oe=Ae[De]=Ae[De]||{},$e=Q[De]=Q[De]||[];for(const Ue of ke)Oe[Ue.featureIndex]||(Oe[Ue.featureIndex]=!0,$e.push(Ue))}}return Q}(W),g)}function Cr(g,e){const r=g.tileID,a=e.tileID;return r.overscaledZ-a.overscaledZ||r.canonical.y-a.canonical.y||r.wrap-a.wrap||r.canonical.x-a.canonical.x}function rn(g,e){const r=g.feature,a=e.getFeatureState(r.layer["source-layer"],r.id);r.source=r.layer.source,r.layer["source-layer"]&&(r.sourceLayer=r.layer["source-layer"]),r.state=a}function jr(g,e,r){return u._(this,void 0,void 0,function*(){let a=g;if(g.url?a=(yield u.j(e.transformRequest(g.url,"Source"),r)).data:yield Te.frameAsync(r),!a)return null;const d=u.O(u.e(a,g),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in a&&a.vector_layers&&(d.vectorLayerIds=a.vector_layers.map(y=>y.id)),d})}class br{constructor(e,r){e&&(r?this.setSouthWest(e).setNorthEast(r):Array.isArray(e)&&(e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1])))}setNorthEast(e){return this._ne=e instanceof u.Q?new u.Q(e.lng,e.lat):u.Q.convert(e),this}setSouthWest(e){return this._sw=e instanceof u.Q?new u.Q(e.lng,e.lat):u.Q.convert(e),this}extend(e){const r=this._sw,a=this._ne;let d,y;if(e instanceof u.Q)d=e,y=e;else{if(!(e instanceof br))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(br.convert(e)):this.extend(u.Q.convert(e)):e&&("lng"in e||"lon"in e)&&"lat"in e?this.extend(u.Q.convert(e)):this;if(d=e._sw,y=e._ne,!d||!y)return this}return r||a?(r.lng=Math.min(d.lng,r.lng),r.lat=Math.min(d.lat,r.lat),a.lng=Math.max(y.lng,a.lng),a.lat=Math.max(y.lat,a.lat)):(this._sw=new u.Q(d.lng,d.lat),this._ne=new u.Q(y.lng,y.lat)),this}getCenter(){return new u.Q((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new u.Q(this.getWest(),this.getNorth())}getSouthEast(){return new u.Q(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:r,lat:a}=u.Q.convert(e);let d=this._sw.lng<=r&&r<=this._ne.lng;return this._sw.lng>this._ne.lng&&(d=this._sw.lng>=r&&r>=this._ne.lng),this._sw.lat<=a&&a<=this._ne.lat&&d}static convert(e){return e instanceof br?e:e&&new br(e)}static fromLngLat(e,r=0){const a=360*r/40075017,d=a/Math.cos(Math.PI/180*e.lat);return new br(new u.Q(e.lng-d,e.lat-a),new u.Q(e.lng+d,e.lat+a))}adjustAntiMeridian(){const e=new u.Q(this._sw.lng,this._sw.lat),r=new u.Q(this._ne.lng,this._ne.lat);return new br(e,e.lng>r.lng?new u.Q(r.lng+360,r.lat):r)}}class on{constructor(e,r,a){this.bounds=br.convert(this.validateBounds(e)),this.minzoom=r||0,this.maxzoom=a||24}validateBounds(e){return Array.isArray(e)&&e.length===4?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(e){const r=Math.pow(2,e.z),a=Math.floor(u.U(this.bounds.getWest())*r),d=Math.floor(u.S(this.bounds.getNorth())*r),y=Math.ceil(u.U(this.bounds.getEast())*r),w=Math.ceil(u.S(this.bounds.getSouth())*r);return e.x>=a&&e.x<y&&e.y>=d&&e.y<w}}class qr extends u.E{constructor(e,r,a,d){if(super(),this.id=e,this.dispatcher=a,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,u.e(this,u.O(r,["url","scheme","tileSize","promoteId"])),this._options=u.e({type:"vector"},r),this._collectResourceTiming=r.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(d)}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const e=yield jr(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),e&&(u.e(this,e),e.bounds&&(this.tileBounds=new on(e.bounds,this.minzoom,this.maxzoom)),this.fire(new u.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.l("data",{dataType:"source",sourceDataType:"content"})))}catch(e){this._tileJSONRequest=null,this.fire(new u.k(e))}})}loaded(){return this._loaded}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load()}setSourceProperty(e){this._tileJSONRequest&&this._tileJSONRequest.abort(),e(),this.load()}setTiles(e){return this.setSourceProperty(()=>{this._options.tiles=e}),this}setUrl(e){return this.setSourceProperty(()=>{this.url=e,this._options.url=e}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return u.e({},this._options)}loadTile(e){return u._(this,void 0,void 0,function*(){const r=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),a={request:this.map._requestManager.transformRequest(r,"Tile"),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};a.request.collectResourceTiming=this._collectResourceTiming;let d="RT";if(e.actor&&e.state!=="expired"){if(e.state==="loading")return new Promise((y,w)=>{e.reloadPromise={resolve:y,reject:w}})}else e.actor=this.dispatcher.getActor(),d="LT";e.abortController=new AbortController;try{const y=yield e.actor.sendAsync({type:d,data:a},e.abortController);if(delete e.abortController,e.aborted)return;this._afterTileLoadWorkerResponse(e,y)}catch(y){if(delete e.abortController,e.aborted)return;if(y&&y.status!==404)throw y;this._afterTileLoadWorkerResponse(e,null)}})}_afterTileLoadWorkerResponse(e,r){if(r&&r.resourceTiming&&(e.resourceTiming=r.resourceTiming),r&&this.map._refreshExpiredTiles&&e.setExpiryData(r),e.loadVectorData(r,this.map.painter),e.reloadPromise){const a=e.reloadPromise;e.reloadPromise=null,this.loadTile(e).then(a.resolve).catch(a.reject)}}abortTile(e){return u._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.actor&&(yield e.actor.sendAsync({type:"AT",data:{uid:e.uid,type:this.type,source:this.id}}))})}unloadTile(e){return u._(this,void 0,void 0,function*(){e.unloadVectorData(),e.actor&&(yield e.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class fn extends u.E{constructor(e,r,a,d){super(),this.id=e,this.dispatcher=a,this.setEventedParent(d),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=u.e({type:"raster"},r),u.e(this,u.O(r,["url","scheme","tileSize"]))}load(){return u._(this,arguments,void 0,function*(e=!1){this._loaded=!1,this.fire(new u.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield jr(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,r&&(u.e(this,r),r.bounds&&(this.tileBounds=new on(r.bounds,this.minzoom,this.maxzoom)),this.fire(new u.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:e})))}catch(r){this._tileJSONRequest=null,this.fire(new u.k(r))}})}loaded(){return this._loaded}onAdd(e){this.map=e,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(e){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),e(),this.load(!0)}setTiles(e){return this.setSourceProperty(()=>{this._options.tiles=e}),this}setUrl(e){return this.setSourceProperty(()=>{this.url=e,this._options.url=e}),this}serialize(){return u.e({},this._options)}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(e){return u._(this,void 0,void 0,function*(){const r=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);e.abortController=new AbortController;try{const a=yield et.getImage(this.map._requestManager.transformRequest(r,"Tile"),e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(a&&a.data){this.map._refreshExpiredTiles&&(a.cacheControl||a.expires)&&e.setExpiryData({cacheControl:a.cacheControl,expires:a.expires});const d=this.map.painter.context,y=d.gl,w=a.data;e.texture=this.map.painter.getTileTexture(w.width),e.texture?e.texture.update(w,{useMipmap:!0}):(e.texture=new Le(d,w,y.RGBA,{useMipmap:!0}),e.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE,y.LINEAR_MIPMAP_NEAREST)),e.state="loaded"}}catch(a){if(delete e.abortController,e.aborted)e.state="unloaded";else if(a)throw e.state="errored",a}})}abortTile(e){return u._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController)})}unloadTile(e){return u._(this,void 0,void 0,function*(){e.texture&&this.map.painter.saveTileTexture(e.texture)})}hasTransition(){return!1}}class sn extends fn{constructor(e,r,a,d){super(e,r,a,d),this.type="raster-dem",this.maxzoom=22,this._options=u.e({type:"raster-dem"},r),this.encoding=r.encoding||"mapbox",this.redFactor=r.redFactor,this.greenFactor=r.greenFactor,this.blueFactor=r.blueFactor,this.baseShift=r.baseShift}loadTile(e){return u._(this,void 0,void 0,function*(){const r=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),a=this.map._requestManager.transformRequest(r,"Tile");e.neighboringTiles=this._getNeighboringTiles(e.tileID),e.abortController=new AbortController;try{const d=yield et.getImage(a,e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(d&&d.data){const y=d.data;this.map._refreshExpiredTiles&&(d.cacheControl||d.expires)&&e.setExpiryData({cacheControl:d.cacheControl,expires:d.expires});const w=u.b(y)&&u.V()?y:yield this.readImageNow(y),E={type:this.type,uid:e.uid,source:this.id,rawImageData:w,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!e.actor||e.state==="expired"){e.actor=this.dispatcher.getActor();const A=yield e.actor.sendAsync({type:"LDT",data:E});e.dem=A,e.needsHillshadePrepare=!0,e.needsTerrainPrepare=!0,e.state="loaded"}}}catch(d){if(delete e.abortController,e.aborted)e.state="unloaded";else if(d)throw e.state="errored",d}})}readImageNow(e){return u._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&u.W()){const r=e.width+2,a=e.height+2;try{return new u.R({width:r,height:a},yield u.X(e,-1,-1,r,a))}catch{}}return Te.getImageData(e,1)})}_getNeighboringTiles(e){const r=e.canonical,a=Math.pow(2,r.z),d=(r.x-1+a)%a,y=r.x===0?e.wrap-1:e.wrap,w=(r.x+1+a)%a,E=r.x+1===a?e.wrap+1:e.wrap,A={};return A[new u.Y(e.overscaledZ,y,r.z,d,r.y).key]={backfilled:!1},A[new u.Y(e.overscaledZ,E,r.z,w,r.y).key]={backfilled:!1},r.y>0&&(A[new u.Y(e.overscaledZ,y,r.z,d,r.y-1).key]={backfilled:!1},A[new u.Y(e.overscaledZ,e.wrap,r.z,r.x,r.y-1).key]={backfilled:!1},A[new u.Y(e.overscaledZ,E,r.z,w,r.y-1).key]={backfilled:!1}),r.y+1<a&&(A[new u.Y(e.overscaledZ,y,r.z,d,r.y+1).key]={backfilled:!1},A[new u.Y(e.overscaledZ,e.wrap,r.z,r.x,r.y+1).key]={backfilled:!1},A[new u.Y(e.overscaledZ,E,r.z,w,r.y+1).key]={backfilled:!1}),A}unloadTile(e){return u._(this,void 0,void 0,function*(){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded",e.actor&&(yield e.actor.sendAsync({type:"RDT",data:{type:this.type,uid:e.uid,source:this.id}}))})}}class wn extends u.E{constructor(e,r,a,d){super(),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=a.getActor(),this.setEventedParent(d),this._data=r.data,this._options=u.e({},r),this._collectResourceTiming=r.collectResourceTiming,r.maxzoom!==void 0&&(this.maxzoom=r.maxzoom),r.type&&(this.type=r.type),r.attribution&&(this.attribution=r.attribution),this.promoteId=r.promoteId,r.clusterMaxZoom!==void 0&&this.maxzoom<=r.clusterMaxZoom&&u.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${r.clusterMaxZoom}".`),this.workerOptions=u.e({source:this.id,cluster:r.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(r.buffer!==void 0?r.buffer:128),tolerance:this._pixelsToTileUnits(r.tolerance!==void 0?r.tolerance:.375),extent:u.Z,maxZoom:this.maxzoom,lineMetrics:r.lineMetrics||!1,generateId:r.generateId||!1},superclusterOptions:{maxZoom:r.clusterMaxZoom!==void 0?r.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,r.clusterMinPoints||2),extent:u.Z,radius:this._pixelsToTileUnits(r.clusterRadius||50),log:!1,generateId:r.generateId||!1},clusterProperties:r.clusterProperties,filter:r.filter},r.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(e){return e*(u.Z/this.tileSize)}load(){return u._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(e){this.map=e,this.load()}setData(e){return this._data=e,this._updateWorkerData(),this}updateData(e){return this._updateWorkerData(e),this}getData(){return u._(this,void 0,void 0,function*(){const e=u.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:e})})}getCoordinatesFromGeometry(e){return e.type==="GeometryCollection"?e.geometries.map(r=>r.coordinates).flat(1/0):e.coordinates.flat(1/0)}getBounds(){return u._(this,void 0,void 0,function*(){const e=new br,r=yield this.getData();let a;switch(r.type){case"FeatureCollection":a=r.features.map(d=>this.getCoordinatesFromGeometry(d.geometry)).flat(1/0);break;case"Feature":a=this.getCoordinatesFromGeometry(r.geometry);break;default:a=this.getCoordinatesFromGeometry(r)}if(a.length==0)return e;for(let d=0;d<a.length-1;d+=2)e.extend([a[d],a[d+1]]);return e})}setClusterOptions(e){return this.workerOptions.cluster=e.cluster,e&&(e.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(e.clusterRadius)),e.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=e.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(e){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:e,source:this.id}})}getClusterChildren(e){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:e,source:this.id}})}getClusterLeaves(e,r,a){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:e,limit:r,offset:a}})}_updateWorkerData(e){return u._(this,void 0,void 0,function*(){const r=u.e({type:this.type},this.workerOptions);e?r.dataDiff=e:typeof this._data=="string"?(r.request=this.map._requestManager.transformRequest(Te.resolveURL(this._data),"Source"),r.request.collectResourceTiming=this._collectResourceTiming):r.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new u.l("dataloading",{dataType:"source"}));try{const a=yield this.actor.sendAsync({type:"LD",data:r});if(this._pendingLoads--,this._removed||a.abandoned)return void this.fire(new u.l("dataabort",{dataType:"source"}));let d=null;a.resourceTiming&&a.resourceTiming[this.id]&&(d=a.resourceTiming[this.id].slice(0));const y={dataType:"source"};this._collectResourceTiming&&d&&d.length>0&&u.e(y,{resourceTiming:d}),this.fire(new u.l("data",Object.assign(Object.assign({},y),{sourceDataType:"metadata"}))),this.fire(new u.l("data",Object.assign(Object.assign({},y),{sourceDataType:"content"})))}catch(a){if(this._pendingLoads--,this._removed)return void this.fire(new u.l("dataabort",{dataType:"source"}));this.fire(new u.k(a))}})}loaded(){return this._pendingLoads===0}loadTile(e){return u._(this,void 0,void 0,function*(){const r=e.actor?"RT":"LT";e.actor=this.actor;const a={type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};e.abortController=new AbortController;const d=yield this.actor.sendAsync({type:r,data:a},e.abortController);delete e.abortController,e.unloadVectorData(),e.aborted||e.loadVectorData(d,this.map.painter,r==="RT")})}abortTile(e){return u._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.aborted=!0})}unloadTile(e){return u._(this,void 0,void 0,function*(){e.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return u.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class an extends u.E{constructor(e,r,a,d){super(),this.flippedWindingOrder=!1,this.id=e,this.dispatcher=a,this.coordinates=r.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(d),this.options=r}load(e){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const r=yield et.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,r&&r.data&&(this.image=r.data,e&&(this.coordinates=e),this._finishLoading())}catch(r){this._request=null,this._loaded=!0,this.fire(new u.k(r))}})}loaded(){return this._loaded}updateImage(e){return e.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=e.url,this.load(e.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new u.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(e){this.coordinates=e;const r=e.map(u.$.fromLngLat);var a;return this.tileID=function(d){let y=1/0,w=1/0,E=-1/0,A=-1/0;for(const G of d)y=Math.min(y,G.x),w=Math.min(w,G.y),E=Math.max(E,G.x),A=Math.max(A,G.y);const O=Math.max(E-y,A-w),N=Math.max(0,Math.floor(-Math.log(O)/Math.LN2)),W=Math.pow(2,N);return new u.a1(N,Math.floor((y+E)/2*W),Math.floor((w+A)/2*W))}(r),this.terrainTileRanges=this._getOverlappingTileRanges(r),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=r.map(d=>this.tileID.getTilePoint(d)._round()),this.flippedWindingOrder=((a=this.tileCoords)[1].x-a[0].x)*(a[2].y-a[0].y)-(a[1].y-a[0].y)*(a[2].x-a[0].x)<0,this.fire(new u.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const e=this.map.painter.context,r=e.gl;this.texture||(this.texture=new Le(e,this.image,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE));let a=!1;for(const d in this.tiles){const y=this.tiles[d];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,a=!0)}a&&this.fire(new u.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(e){return u._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={}):e.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(e){let r=1/0,a=1/0,d=-1/0,y=-1/0;for(const E of e)r=Math.min(r,E.x),a=Math.min(a,E.y),d=Math.max(d,E.x),y=Math.max(y,E.y);const w={};for(let E=0;E<=u.a0;E++){const A=Math.pow(2,E),O=Math.floor(r*A),N=Math.floor(a*A),W=Math.floor(d*A),G=Math.floor(y*A);w[E]={minTileX:O,minTileY:N,maxTileX:W,maxTileY:G}}return w}}class An extends an{constructor(e,r,a,d){super(e,r,a,d),this.roundZoom=!0,this.type="video",this.options=r}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1;const e=this.options;this.urls=[];for(const r of e.urls)this.urls.push(this.map._requestManager.transformRequest(r,"Source").url);try{const r=yield u.a2(this.urls);if(this._loaded=!0,!r)return;this.video=r,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(r){this.fire(new u.k(r))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(e){if(this.video){const r=this.video.seekable;e<r.start(0)||e>r.end(0)?this.fire(new u.k(new u.a3(`sources.${this.id}`,null,`Playback for this video can be set only between the ${r.start(0)} and ${r.end(0)}-second mark.`))):this.video.currentTime=e}}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const e=this.map.painter.context,r=e.gl;this.texture?this.video.paused||(this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE),r.texSubImage2D(r.TEXTURE_2D,0,0,0,r.RGBA,r.UNSIGNED_BYTE,this.video)):(this.texture=new Le(e,this.video,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE));let a=!1;for(const d in this.tiles){const y=this.tiles[d];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,a=!0)}a&&this.fire(new u.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Sr extends an{constructor(e,r,a,d){super(e,r,a,d),r.coordinates?Array.isArray(r.coordinates)&&r.coordinates.length===4&&!r.coordinates.some(y=>!Array.isArray(y)||y.length!==2||y.some(w=>typeof w!="number"))||this.fire(new u.k(new u.a3(`sources.${e}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new u.k(new u.a3(`sources.${e}`,null,'missing required property "coordinates"'))),r.animate&&typeof r.animate!="boolean"&&this.fire(new u.k(new u.a3(`sources.${e}`,null,'optional "animate" property must be a boolean value'))),r.canvas?typeof r.canvas=="string"||r.canvas instanceof HTMLCanvasElement||this.fire(new u.k(new u.a3(`sources.${e}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new u.k(new u.a3(`sources.${e}`,null,'missing required property "canvas"'))),this.options=r,this.animate=r.animate===void 0||r.animate}load(){return u._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new u.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const r=this.map.painter.context,a=r.gl;this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Le(r,this.canvas,a.RGBA,{premultiply:!0});let d=!1;for(const y in this.tiles){const w=this.tiles[y];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture,d=!0)}d&&this.fire(new u.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const e of[this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return!0;return!1}}const Vn={},Hn=g=>{switch(g){case"geojson":return wn;case"image":return an;case"raster":return fn;case"raster-dem":return sn;case"vector":return qr;case"video":return An;case"canvas":return Sr}return Vn[g]},Ti="RTLPluginLoaded";class ei extends u.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=pr()}_syncState(e){return this.status=e,this.dispatcher.broadcast("SRPS",{pluginStatus:e,pluginURL:this.url}).catch(r=>{throw this.status="error",r})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(e){return u._(this,arguments,void 0,function*(r,a=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=Te.resolveURL(r),!this.url)throw new Error(`requested url ${r} is invalid`);if(this.status==="unavailable"){if(!a)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return u._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new u.l(Ti))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let qn=null;function Nn(){return qn||(qn=new ei),qn}class eo{constructor(e,r){this.timeAdded=0,this.fadeEndTime=0,this.tileID=e,this.uid=u.a4(),this.uses=0,this.tileSize=r,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(e){const r=e+this.timeAdded;r<this.fadeEndTime||(this.fadeEndTime=r)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(e){this.demTexture&&e.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(e,r,a){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(d,y){const w={};if(!y)return w;for(const E of d){const A=E.layerIds.map(O=>y.getLayer(O)).filter(Boolean);if(A.length!==0){E.layers=A,E.stateDependentLayerIds&&(E.stateDependentLayers=E.stateDependentLayerIds.map(O=>A.filter(N=>N.id===O)[0]));for(const O of A)w[O.id]=E}}return w}(e.buckets,r==null?void 0:r.style),this.hasSymbolBuckets=!1;for(const d in this.buckets){const y=this.buckets[d];if(y instanceof u.a6){if(this.hasSymbolBuckets=!0,!a)break;y.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const d in this.buckets){const y=this.buckets[d];if(y instanceof u.a6&&y.hasRTLText){this.hasRTLText=!0,Nn().lazyLoad();break}}this.queryPadding=0;for(const d in this.buckets){const y=this.buckets[d];this.queryPadding=Math.max(this.queryPadding,r.style.getLayer(d).queryRadius(y))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new u.a5}unloadVectorData(){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(e){return this.buckets[e.id]}upload(e){for(const a in this.buckets){const d=this.buckets[a];d.uploadPending()&&d.upload(e)}const r=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Le(e,this.imageAtlas.image,r.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Le(e,this.glyphAtlasImage,r.ALPHA),this.glyphAtlasImage=null)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,r,a,d,y,w,E,A,O,N,W){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:d,cameraQueryGeometry:y,scale:w,tileSize:this.tileSize,pixelPosMatrix:N,transform:A,params:E,queryPadding:this.queryPadding*O,getElevation:W},e,r,a):{}}querySourceFeatures(e,r){const a=this.latestFeatureIndex;if(!a||!a.rawTileData)return;const d=a.loadVTLayers(),y=r&&r.sourceLayer?r.sourceLayer:"",w=d._geojsonTileLayer||d[y];if(!w)return;const E=u.a7(r&&r.filter),{z:A,x:O,y:N}=this.tileID.canonical,W={z:A,x:O,y:N};for(let G=0;G<w.length;G++){const Q=w.feature(G);if(E.needGeometry){const xe=u.a8(Q,!0);if(!E.filter(new u.C(this.tileID.overscaledZ),xe,this.tileID.canonical))continue}else if(!E.filter(new u.C(this.tileID.overscaledZ),Q))continue;const ie=a.getId(Q,y),be=new u.a9(Q,A,O,N,ie);be.tile=W,e.push(be)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const r=this.expirationTime;if(e.cacheControl){const a=u.aa(e.cacheControl);a["max-age"]&&(this.expirationTime=Date.now()+1e3*a["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const a=Date.now();let d=!1;if(this.expirationTime>a)d=!1;else if(r)if(this.expirationTime<r)d=!0;else{const y=this.expirationTime-r;y?this.expirationTime=a+Math.max(y,3e4):d=!0}else d=!0;d?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(e,r){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(e).length===0)return;const a=this.latestFeatureIndex.loadVTLayers();for(const d in this.buckets){if(!r.style.hasLayer(d))continue;const y=this.buckets[d],w=y.layers[0].sourceLayer||"_geojsonTileLayer",E=a[w],A=e[w];if(!E||!A||Object.keys(A).length===0)continue;y.update(A,E,this.imageAtlas&&this.imageAtlas.patternPositions||{});const O=r&&r.style&&r.style.getLayer(d);O&&(this.queryPadding=Math.max(this.queryPadding,O.queryRadius(y)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Te.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=Te.now()+e}setDependencies(e,r){const a={};for(const d of r)a[d]=!0;this.dependencies[e]=a}hasDependency(e,r){for(const a of e){const d=this.dependencies[a];if(d){for(const y of r)if(d[y])return!0}}return!1}}class Wi{constructor(e,r){this.max=e,this.onRemove=r,this.reset()}reset(){for(const e in this.data)for(const r of this.data[e])r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value);return this.data={},this.order=[],this}add(e,r,a){const d=e.wrapped().key;this.data[d]===void 0&&(this.data[d]=[]);const y={value:r,timeout:void 0};if(a!==void 0&&(y.timeout=setTimeout(()=>{this.remove(e,y)},a)),this.data[d].push(y),this.order.push(d),this.order.length>this.max){const w=this._getAndRemoveByKey(this.order[0]);w&&this.onRemove(w)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const r=this.data[e].shift();return r.timeout&&clearTimeout(r.timeout),this.data[e].length===0&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),r.value}getByKey(e){const r=this.data[e];return r?r[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,r){if(!this.has(e))return this;const a=e.wrapped().key,d=r===void 0?0:this.data[a].indexOf(r),y=this.data[a][d];return this.data[a].splice(d,1),y.timeout&&clearTimeout(y.timeout),this.data[a].length===0&&delete this.data[a],this.onRemove(y.value),this.order.splice(this.order.indexOf(a),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const r=this._getAndRemoveByKey(this.order[0]);r&&this.onRemove(r)}return this}filter(e){const r=[];for(const a in this.data)for(const d of this.data[a])e(d.value)||r.push(d);for(const a of r)this.remove(a.value.tileID,a)}}class Zi{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,r,a){const d=String(r);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][d]=this.stateChanges[e][d]||{},u.e(this.stateChanges[e][d],a),this.deletedStates[e]===null){this.deletedStates[e]={};for(const y in this.state[e])y!==d&&(this.deletedStates[e][y]=null)}else if(this.deletedStates[e]&&this.deletedStates[e][d]===null){this.deletedStates[e][d]={};for(const y in this.state[e][d])a[y]||(this.deletedStates[e][d][y]=null)}else for(const y in a)this.deletedStates[e]&&this.deletedStates[e][d]&&this.deletedStates[e][d][y]===null&&delete this.deletedStates[e][d][y]}removeFeatureState(e,r,a){if(this.deletedStates[e]===null)return;const d=String(r);if(this.deletedStates[e]=this.deletedStates[e]||{},a&&r!==void 0)this.deletedStates[e][d]!==null&&(this.deletedStates[e][d]=this.deletedStates[e][d]||{},this.deletedStates[e][d][a]=null);else if(r!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][d])for(a in this.deletedStates[e][d]={},this.stateChanges[e][d])this.deletedStates[e][d][a]=null;else this.deletedStates[e][d]=null;else this.deletedStates[e]=null}getState(e,r){const a=String(r),d=u.e({},(this.state[e]||{})[a],(this.stateChanges[e]||{})[a]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){const y=this.deletedStates[e][r];if(y===null)return{};for(const w in y)delete d[w]}return d}initializeTileState(e,r){e.setFeatureState(this.state,r)}coalesceChanges(e,r){const a={};for(const d in this.stateChanges){this.state[d]=this.state[d]||{};const y={};for(const w in this.stateChanges[d])this.state[d][w]||(this.state[d][w]={}),u.e(this.state[d][w],this.stateChanges[d][w]),y[w]=this.state[d][w];a[d]=y}for(const d in this.deletedStates){this.state[d]=this.state[d]||{};const y={};if(this.deletedStates[d]===null)for(const w in this.state[d])y[w]={},this.state[d][w]={};else for(const w in this.deletedStates[d]){if(this.deletedStates[d][w]===null)this.state[d][w]={};else for(const E of Object.keys(this.deletedStates[d][w]))delete this.state[d][w][E];y[w]=this.state[d][w]}a[d]=a[d]||{},u.e(a[d],y)}if(this.stateChanges={},this.deletedStates={},Object.keys(a).length!==0)for(const d in e)e[d].setFeatureState(a,r)}}const ti=89.25;function oi(g,e){const r=u.ae(e.lat,-85.051129,u.af);return new u.P(u.U(e.lng)*g,u.S(r)*g)}function go(g,e){return new u.$(e.x/g,e.y/g).toLngLat()}function tt(g){return g.cameraToCenterDistance*Math.min(.85*Math.tan(u.ab(90-g.pitch)),Math.tan(u.ab(ti-g.pitch)))}function ae(g,e){const r=g.canonical,a=e/u.ac(r.z),d=r.x+Math.pow(2,r.z)*g.wrap,y=u.ad(new Float64Array(16));return u.L(y,y,[d*a,r.y*a,0]),u.M(y,y,[a/u.Z,a/u.Z,1]),y}function le(g,e,r,a,d){const y=u.$.fromLngLat(g,e),w=d*u.ag(1,g.lat),E=w*Math.cos(u.ab(r)),A=Math.sqrt(w*w-E*E),O=A*Math.sin(u.ab(-a)),N=A*Math.cos(u.ab(-a));return new u.$(y.x+O,y.y+N,y.z+E)}function _e(g,e,r){const a=e.intersectsFrustum(g);if(!r)return a;const d=e.intersectsPlane(r);return a===0||d===0?0:a===2&&d===2?2:1}function Me(g,e,r){let a=0;const d=(r-e)/10;for(let y=0;y<10;y++)a+=d*Math.pow(Math.cos(e+(y+.5)/10*(r-e)),g);return a}function Ve(g,e){return function(r,a,d,y,w){const E=2*((g-1)/u.ah(Math.cos(u.ab(ti-w))/Math.cos(u.ab(ti)))-1),A=Math.acos(d/y),O=2*Me(E-1,0,u.ab(w/2)),N=Math.min(u.ab(ti),A+u.ab(w/2)),W=Me(E-1,Math.min(N,A-u.ab(w/2)),N),G=Math.atan(a/d),Q=Math.hypot(a,d);let ie=r;return ie+=u.ah(y/Q/Math.max(.5,Math.cos(u.ab(w/2)))),ie+=E*u.ah(Math.cos(G))/2,ie-=u.ah(Math.max(1,W/O/e))/2,ie}}const pe=Ve(9.314,3);function Ke(g,e){const r=(e.roundZoom?Math.round:Math.floor)(g.zoom+u.ah(g.tileSize/e.tileSize));return Math.max(0,r)}function He(g,e){const r=g.getCameraFrustum(),a=g.getClippingPlane(),d=g.screenPointToMercatorCoordinate(g.getCameraPoint()),y=u.$.fromLngLat(g.center,g.elevation);d.z=y.z+Math.cos(g.pitchInRadians)*g.cameraToCenterDistance/g.worldSize;const w=g.getCoveringTilesDetailsProvider(),E=w.allowVariableZoom(g,e),A=Ke(g,e),O=e.minzoom||0,N=e.maxzoom!==void 0?e.maxzoom:g.maxZoom,W=Math.min(Math.max(0,A),N),G=Math.pow(2,W),Q=[G*d.x,G*d.y,0],ie=[G*y.x,G*y.y,0],be=Math.hypot(y.x-d.x,y.y-d.y),xe=Math.abs(y.z-d.z),Se=Math.hypot(be,xe),Ae=Oe=>({zoom:0,x:0,y:0,wrap:Oe,fullyVisible:!1}),De=[],ke=[];if(g.renderWorldCopies&&w.allowWorldCopies())for(let Oe=1;Oe<=3;Oe++)De.push(Ae(-Oe)),De.push(Ae(Oe));for(De.push(Ae(0));De.length>0;){const Oe=De.pop(),$e=Oe.x,Ue=Oe.y;let lt=Oe.fullyVisible;const Mt={x:$e,y:Ue,z:Oe.zoom},Qe=w.getTileAABB(Mt,Oe.wrap,g.elevation,e);if(!lt){const tr=_e(r,Qe,a);if(tr===0)continue;lt=tr===2}const dt=w.distanceToTile2d(d.x,d.y,Mt,Qe);let Pt=A;E&&(Pt=(e.calculateTileZoom||pe)(g.zoom+u.ah(g.tileSize/e.tileSize),dt,xe,Se,g.fov)),Pt=(e.roundZoom?Math.round:Math.floor)(Pt),Pt=Math.max(0,Pt);const er=Math.min(Pt,N);if(Oe.wrap=w.getWrap(y,Mt,Oe.wrap),Oe.zoom>=er){if(Oe.zoom<O)continue;const tr=W-Oe.zoom,Bt=Q[0]-.5-($e<<tr),vr=Q[1]-.5-(Ue<<tr),Gr=e.reparseOverscaled?Math.max(Oe.zoom,Pt):Oe.zoom;ke.push({tileID:new u.Y(Oe.zoom===N?Gr:Oe.zoom,Oe.wrap,Oe.zoom,$e,Ue),distanceSq:u.ai([ie[0]-.5-$e,ie[1]-.5-Ue]),tileDistanceToCamera:Math.sqrt(Bt*Bt+vr*vr)})}else for(let tr=0;tr<4;tr++)De.push({zoom:Oe.zoom+1,x:($e<<1)+tr%2,y:(Ue<<1)+(tr>>1),wrap:Oe.wrap,fullyVisible:lt})}return ke.sort((Oe,$e)=>Oe.distanceSq-$e.distanceSq).map(Oe=>Oe.tileID)}class nt extends u.E{constructor(e,r,a){super(),this.id=e,this.dispatcher=a,this.on("data",d=>this._dataHandler(d)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((d,y,w,E)=>{const A=new(Hn(y.type))(d,y,w,E);if(A.id!==d)throw new Error(`Expected Source id to be ${d} instead of ${A.id}`);return A})(e,r,a,this),this._tiles={},this._cache=new Wi(0,d=>this._unloadTile(d)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Zi,this._didEmitContent=!1,this._updated=!1}onAdd(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._maxTileCacheZoomLevels=e?e._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(e)}onRemove(e){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(e)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const e in this._tiles){const r=this._tiles[e];if(r.state!=="loaded"&&r.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(e,r,a){return u._(this,void 0,void 0,function*(){try{yield this._source.loadTile(e),this._tileLoaded(e,r,a)}catch(d){e.state="errored",d.status!==404?this._source.fire(new u.k(d,{tile:e})):this.update(this.transform,this.terrain)}})}_unloadTile(e){this._source.unloadTile&&this._source.unloadTile(e)}_abortTile(e){this._source.abortTile&&this._source.abortTile(e),this._source.fire(new u.l("dataabort",{tile:e,coord:e.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const r in this._tiles){const a=this._tiles[r];a.upload(e),a.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(e=>e.tileID).sort(ft).map(e=>e.key)}getRenderableIds(e){const r=[];for(const a in this._tiles)this._isIdRenderable(a,e)&&r.push(this._tiles[a]);return e?r.sort((a,d)=>{const y=a.tileID,w=d.tileID,E=new u.P(y.canonical.x,y.canonical.y)._rotate(-this.transform.bearingInRadians),A=new u.P(w.canonical.x,w.canonical.y)._rotate(-this.transform.bearingInRadians);return y.overscaledZ-w.overscaledZ||A.y-E.y||A.x-E.x}).map(a=>a.tileID.key):r.map(a=>a.tileID).sort(ft).map(a=>a.key)}hasRenderableParent(e){const r=this.findLoadedParent(e,0);return!!r&&this._isIdRenderable(r.tileID.key)}_isIdRenderable(e,r){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(r||!this._tiles[e].holdingForFade())}reload(e){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const r in this._tiles)(e||this._tiles[r].state!=="errored")&&this._reloadTile(r,"reloading")}}_reloadTile(e,r){return u._(this,void 0,void 0,function*(){const a=this._tiles[e];a&&(a.state!=="loading"&&(a.state=r),yield this._loadTile(a,e,r))})}_tileLoaded(e,r,a){e.timeAdded=Te.now(),a==="expired"&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(r,e),this.getSource().type==="raster-dem"&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),e.aborted||this._source.fire(new u.l("data",{dataType:"source",tile:e,coord:e.tileID}))}_backfillDEM(e){const r=this.getRenderableIds();for(let d=0;d<r.length;d++){const y=r[d];if(e.neighboringTiles&&e.neighboringTiles[y]){const w=this.getTileByID(y);a(e,w),a(w,e)}}function a(d,y){d.needsHillshadePrepare=!0,d.needsTerrainPrepare=!0;let w=y.tileID.canonical.x-d.tileID.canonical.x;const E=y.tileID.canonical.y-d.tileID.canonical.y,A=Math.pow(2,d.tileID.canonical.z),O=y.tileID.key;w===0&&E===0||Math.abs(E)>1||(Math.abs(w)>1&&(Math.abs(w+A)===1?w+=A:Math.abs(w-A)===1&&(w-=A)),y.dem&&d.dem&&(d.dem.backfillBorder(y.dem,w,E),d.neighboringTiles&&d.neighboringTiles[O]&&(d.neighboringTiles[O].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,r,a,d){for(const y in this._tiles){let w=this._tiles[y];if(d[y]||!w.hasData()||w.tileID.overscaledZ<=r||w.tileID.overscaledZ>a)continue;let E=w.tileID;for(;w&&w.tileID.overscaledZ>r+1;){const O=w.tileID.scaledTo(w.tileID.overscaledZ-1);w=this._tiles[O.key],w&&w.hasData()&&(E=O)}let A=E;for(;A.overscaledZ>r;)if(A=A.scaledTo(A.overscaledZ-1),e[A.key]||e[A.canonical.key]){d[E.key]=E;break}}}findLoadedParent(e,r){if(e.key in this._loadedParentTiles){const a=this._loadedParentTiles[e.key];return a&&a.tileID.overscaledZ>=r?a:null}for(let a=e.overscaledZ-1;a>=r;a--){const d=e.scaledTo(a),y=this._getLoadedTile(d);if(y)return y}}findLoadedSibling(e){return this._getLoadedTile(e)}_getLoadedTile(e){const r=this._tiles[e.key];return r&&r.hasData()?r:this._cache.getByKey(e.wrapped().key)}updateCacheSize(e){const r=Math.ceil(e.width/this._source.tileSize)+1,a=Math.ceil(e.height/this._source.tileSize)+1,d=Math.floor(r*a*(this._maxTileCacheZoomLevels===null?u.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),y=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,d):d;this._cache.setMaxSize(y)}handleWrapJump(e){const r=Math.round((e-(this._prevLng===void 0?e:this._prevLng))/360);if(this._prevLng=e,r){const a={};for(const d in this._tiles){const y=this._tiles[d];y.tileID=y.tileID.unwrapTo(y.tileID.wrap+r),a[y.tileID.key]=y}this._tiles=a;for(const d in this._timers)clearTimeout(this._timers[d]),delete this._timers[d];for(const d in this._tiles)this._setTileReloadTimer(d,this._tiles[d])}}_updateCoveredAndRetainedTiles(e,r,a,d,y,w){const E={},A={},O=Object.keys(e),N=Te.now();for(const W of O){const G=e[W],Q=this._tiles[W];if(!Q||Q.fadeEndTime!==0&&Q.fadeEndTime<=N)continue;const ie=this.findLoadedParent(G,r),be=this.findLoadedSibling(G),xe=ie||be||null;xe&&(this._addTile(xe.tileID),E[xe.tileID.key]=xe.tileID),A[W]=G}this._retainLoadedChildren(A,d,a,e);for(const W in E)e[W]||(this._coveredTiles[W]=!0,e[W]=E[W]);if(w){const W={},G={};for(const Q of y)this._tiles[Q.key].hasData()?W[Q.key]=Q:G[Q.key]=Q;for(const Q in G){const ie=G[Q].children(this._source.maxzoom);this._tiles[ie[0].key]&&this._tiles[ie[1].key]&&this._tiles[ie[2].key]&&this._tiles[ie[3].key]&&(W[ie[0].key]=e[ie[0].key]=ie[0],W[ie[1].key]=e[ie[1].key]=ie[1],W[ie[2].key]=e[ie[2].key]=ie[2],W[ie[3].key]=e[ie[3].key]=ie[3],delete G[Q])}for(const Q in G){const ie=G[Q],be=this.findLoadedParent(ie,this._source.minzoom),xe=this.findLoadedSibling(ie),Se=be||xe||null;if(Se){W[Se.tileID.key]=e[Se.tileID.key]=Se.tileID;for(const Ae in W)W[Ae].isChildOf(Se.tileID)&&delete W[Ae]}}for(const Q in this._tiles)W[Q]||(this._coveredTiles[Q]=!0)}}update(e,r){if(!this._sourceLoaded||this._paused)return;let a;this.transform=e,this.terrain=r,this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?a=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(N=>new u.Y(N.canonical.z,N.wrap,N.canonical.z,N.canonical.x,N.canonical.y)):(a=He(e,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:r,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(a=a.filter(N=>this._source.hasTile(N)))):a=[];const d=Ke(e,this._source),y=Math.max(d-nt.maxOverzooming,this._source.minzoom),w=Math.max(d+nt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const N={};for(const W of a)if(W.canonical.z>this._source.minzoom){const G=W.scaledTo(W.canonical.z-1);N[G.key]=G;const Q=W.scaledTo(Math.max(this._source.minzoom,Math.min(W.canonical.z,5)));N[Q.key]=Q}a=a.concat(Object.values(N))}const E=a.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,E&&this.fire(new u.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const A=this._updateRetainedTiles(a,d);Ye(this._source.type)&&this._updateCoveredAndRetainedTiles(A,y,w,d,a,r);for(const N in A)this._tiles[N].clearFadeHold();const O=u.aj(this._tiles,A);for(const N of O){const W=this._tiles[N];W.hasSymbolBuckets&&!W.holdingForFade()?W.setHoldDuration(this.map._fadeDuration):W.hasSymbolBuckets&&!W.symbolFadeFinished()||this._removeTile(N)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(e)}_updateRetainedTiles(e,r){var a;const d={},y={},w=Math.max(r-nt.maxOverzooming,this._source.minzoom),E=Math.max(r+nt.maxUnderzooming,this._source.minzoom),A={};for(const O of e){const N=this._addTile(O);d[O.key]=O,N.hasData()||r<this._source.maxzoom&&(A[O.key]=O)}this._retainLoadedChildren(A,r,E,d);for(const O of e){let N=this._tiles[O.key];if(N.hasData())continue;if(r+1>this._source.maxzoom){const G=O.children(this._source.maxzoom)[0],Q=this.getTile(G);if(Q&&Q.hasData()){d[G.key]=G;continue}}else{const G=O.children(this._source.maxzoom);if(d[G[0].key]&&d[G[1].key]&&d[G[2].key]&&d[G[3].key])continue}let W=N.wasRequested();for(let G=O.overscaledZ-1;G>=w;--G){const Q=O.scaledTo(G);if(y[Q.key])break;if(y[Q.key]=!0,N=this.getTile(Q),!N&&W&&(N=this._addTile(Q)),N){const ie=N.hasData();if((ie||!(!((a=this.map)===null||a===void 0)&&a.cancelPendingTileRequestsWhileZooming)||W)&&(d[Q.key]=Q),W=N.wasRequested(),ie)break}}}return d}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const r=[];let a,d=this._tiles[e].tileID;for(;d.overscaledZ>0;){if(d.key in this._loadedParentTiles){a=this._loadedParentTiles[d.key];break}r.push(d.key);const y=d.scaledTo(d.overscaledZ-1);if(a=this._getLoadedTile(y),a)break;d=y}for(const y of r)this._loadedParentTiles[y]=a}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const e in this._tiles){const r=this._tiles[e].tileID,a=this._getLoadedTile(r);this._loadedSiblingTiles[r.key]=a}}_addTile(e){let r=this._tiles[e.key];if(r)return r;r=this._cache.getAndRemove(e),r&&(this._setTileReloadTimer(e.key,r),r.tileID=e,this._state.initializeTileState(r,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,r)));const a=r;return r||(r=new eo(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(r,e.key,r.state)),r.uses++,this._tiles[e.key]=r,a||this._source.fire(new u.l("dataloading",{tile:r,coord:r.tileID,dataType:"source"})),r}_setTileReloadTimer(e,r){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const a=r.getExpiryTimeout();a&&(this._timers[e]=setTimeout(()=>{this._reloadTile(e,"expired"),delete this._timers[e]},a))}refreshTiles(e){for(const r in this._tiles)this._isIdRenderable(r)&&e.some(a=>a.equals(this._tiles[r].tileID.canonical))&&this._reloadTile(r,"expired")}_removeTile(e){const r=this._tiles[e];r&&(r.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),r.uses>0||(r.hasData()&&r.state!=="reloading"?this._cache.add(r.tileID,r,r.getExpiryTimeout()):(r.aborted=!0,this._abortTile(r),this._unloadTile(r))))}_dataHandler(e){const r=e.sourceDataType;e.dataType==="source"&&r==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&e.dataType==="source"&&r==="content"&&(this.reload(e.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(e);this._cache.reset()}tilesIn(e,r,a){const d=[],y=this.transform;if(!y)return d;const w=a?y.getCameraQueryGeometry(e):e,E=e.map(ie=>y.screenPointToMercatorCoordinate(ie,this.terrain)),A=w.map(ie=>y.screenPointToMercatorCoordinate(ie,this.terrain)),O=this.getIds();let N=1/0,W=1/0,G=-1/0,Q=-1/0;for(const ie of A)N=Math.min(N,ie.x),W=Math.min(W,ie.y),G=Math.max(G,ie.x),Q=Math.max(Q,ie.y);for(let ie=0;ie<O.length;ie++){const be=this._tiles[O[ie]];if(be.holdingForFade())continue;const xe=y.getCoveringTilesDetailsProvider().allowWorldCopies()?be.tileID:be.tileID.unwrapTo(0),Se=Math.pow(2,y.zoom-be.tileID.overscaledZ),Ae=r*be.queryPadding*u.Z/be.tileSize/Se,De=[xe.getTilePoint(new u.$(N,W)),xe.getTilePoint(new u.$(G,Q))];if(De[0].x-Ae<u.Z&&De[0].y-Ae<u.Z&&De[1].x+Ae>=0&&De[1].y+Ae>=0){const ke=E.map($e=>xe.getTilePoint($e)),Oe=A.map($e=>xe.getTilePoint($e));d.push({tile:be,tileID:xe,queryGeometry:ke,cameraQueryGeometry:Oe,scale:Se})}}return d}getVisibleCoordinates(e){const r=this.getRenderableIds(e).map(a=>this._tiles[a].tileID);return this.transform&&this.transform.populateCache(r),r}hasTransition(){if(this._source.hasTransition())return!0;if(Ye(this._source.type)){const e=Te.now();for(const r in this._tiles)if(this._tiles[r].fadeEndTime>=e)return!0}return!1}setFeatureState(e,r,a){this._state.updateState(e=e||"_geojsonTileLayer",r,a)}removeFeatureState(e,r,a){this._state.removeFeatureState(e=e||"_geojsonTileLayer",r,a)}getFeatureState(e,r){return this._state.getState(e=e||"_geojsonTileLayer",r)}setDependencies(e,r,a){const d=this._tiles[e];d&&d.setDependencies(r,a)}reloadTilesForDependencies(e,r){for(const a in this._tiles)this._tiles[a].hasDependency(e,r)&&this._reloadTile(a,"reloading");this._cache.filter(a=>!a.hasDependency(e,r))}}function ft(g,e){const r=Math.abs(2*g.wrap)-+(g.wrap<0),a=Math.abs(2*e.wrap)-+(e.wrap<0);return g.overscaledZ-e.overscaledZ||a-r||e.canonical.y-g.canonical.y||e.canonical.x-g.canonical.x}function Ye(g){return g==="raster"||g==="image"||g==="video"}nt.maxOverzooming=10,nt.maxUnderzooming=3;class Dt{constructor(e,r){this.reset(e,r)}reset(e,r){this.points=e||[],this._distances=[0];for(let a=1;a<this.points.length;a++)this._distances[a]=this._distances[a-1]+this.points[a].dist(this.points[a-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(r||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(e){if(this.points.length===1)return this.points[0];e=u.ae(e,0,1);let r=1,a=this._distances[r];const d=e*this.paddedLength+this.padding;for(;a<d&&r<this._distances.length;)a=this._distances[++r];const y=r-1,w=this._distances[y],E=a-w,A=E>0?(d-w)/E:0;return this.points[y].mult(1-A).add(this.points[r].mult(A))}}function Yt(g,e){let r=!0;return g==="always"||g!=="never"&&e!=="never"||(r=!1),r}class hr{constructor(e,r,a){const d=this.boxCells=[],y=this.circleCells=[];this.xCellCount=Math.ceil(e/a),this.yCellCount=Math.ceil(r/a);for(let w=0;w<this.xCellCount*this.yCellCount;w++)d.push([]),y.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=r,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/r,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,r,a,d,y){this._forEachCell(r,a,d,y,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(r),this.bboxes.push(a),this.bboxes.push(d),this.bboxes.push(y)}insertCircle(e,r,a,d){this._forEachCell(r-d,a-d,r+d,a+d,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(r),this.circles.push(a),this.circles.push(d)}_insertBoxCell(e,r,a,d,y,w){this.boxCells[y].push(w)}_insertCircleCell(e,r,a,d,y,w){this.circleCells[y].push(w)}_query(e,r,a,d,y,w,E){if(a<0||e>this.width||d<0||r>this.height)return[];const A=[];if(e<=0&&r<=0&&this.width<=a&&this.height<=d){if(y)return[{key:null,x1:e,y1:r,x2:a,y2:d}];for(let O=0;O<this.boxKeys.length;O++)A.push({key:this.boxKeys[O],x1:this.bboxes[4*O],y1:this.bboxes[4*O+1],x2:this.bboxes[4*O+2],y2:this.bboxes[4*O+3]});for(let O=0;O<this.circleKeys.length;O++){const N=this.circles[3*O],W=this.circles[3*O+1],G=this.circles[3*O+2];A.push({key:this.circleKeys[O],x1:N-G,y1:W-G,x2:N+G,y2:W+G})}}else this._forEachCell(e,r,a,d,this._queryCell,A,{hitTest:y,overlapMode:w,seenUids:{box:{},circle:{}}},E);return A}query(e,r,a,d){return this._query(e,r,a,d,!1,null)}hitTest(e,r,a,d,y,w){return this._query(e,r,a,d,!0,y,w).length>0}hitTestCircle(e,r,a,d,y){const w=e-a,E=e+a,A=r-a,O=r+a;if(E<0||w>this.width||O<0||A>this.height)return!1;const N=[];return this._forEachCell(w,A,E,O,this._queryCellCircle,N,{hitTest:!0,overlapMode:d,circle:{x:e,y:r,radius:a},seenUids:{box:{},circle:{}}},y),N.length>0}_queryCell(e,r,a,d,y,w,E,A){const{seenUids:O,hitTest:N,overlapMode:W}=E,G=this.boxCells[y];if(G!==null){const ie=this.bboxes;for(const be of G)if(!O.box[be]){O.box[be]=!0;const xe=4*be,Se=this.boxKeys[be];if(e<=ie[xe+2]&&r<=ie[xe+3]&&a>=ie[xe+0]&&d>=ie[xe+1]&&(!A||A(Se))&&(!N||!Yt(W,Se.overlapMode))&&(w.push({key:Se,x1:ie[xe],y1:ie[xe+1],x2:ie[xe+2],y2:ie[xe+3]}),N))return!0}}const Q=this.circleCells[y];if(Q!==null){const ie=this.circles;for(const be of Q)if(!O.circle[be]){O.circle[be]=!0;const xe=3*be,Se=this.circleKeys[be];if(this._circleAndRectCollide(ie[xe],ie[xe+1],ie[xe+2],e,r,a,d)&&(!A||A(Se))&&(!N||!Yt(W,Se.overlapMode))){const Ae=ie[xe],De=ie[xe+1],ke=ie[xe+2];if(w.push({key:Se,x1:Ae-ke,y1:De-ke,x2:Ae+ke,y2:De+ke}),N)return!0}}}return!1}_queryCellCircle(e,r,a,d,y,w,E,A){const{circle:O,seenUids:N,overlapMode:W}=E,G=this.boxCells[y];if(G!==null){const ie=this.bboxes;for(const be of G)if(!N.box[be]){N.box[be]=!0;const xe=4*be,Se=this.boxKeys[be];if(this._circleAndRectCollide(O.x,O.y,O.radius,ie[xe+0],ie[xe+1],ie[xe+2],ie[xe+3])&&(!A||A(Se))&&!Yt(W,Se.overlapMode))return w.push(!0),!0}}const Q=this.circleCells[y];if(Q!==null){const ie=this.circles;for(const be of Q)if(!N.circle[be]){N.circle[be]=!0;const xe=3*be,Se=this.circleKeys[be];if(this._circlesCollide(ie[xe],ie[xe+1],ie[xe+2],O.x,O.y,O.radius)&&(!A||A(Se))&&!Yt(W,Se.overlapMode))return w.push(!0),!0}}}_forEachCell(e,r,a,d,y,w,E,A){const O=this._convertToXCellCoord(e),N=this._convertToYCellCoord(r),W=this._convertToXCellCoord(a),G=this._convertToYCellCoord(d);for(let Q=O;Q<=W;Q++)for(let ie=N;ie<=G;ie++)if(y.call(this,e,r,a,d,this.xCellCount*ie+Q,w,E,A))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,r,a,d,y,w){const E=d-e,A=y-r,O=a+w;return O*O>E*E+A*A}_circleAndRectCollide(e,r,a,d,y,w,E){const A=(w-d)/2,O=Math.abs(e-(d+A));if(O>A+a)return!1;const N=(E-y)/2,W=Math.abs(r-(y+N));if(W>N+a)return!1;if(O<=A||W<=N)return!0;const G=O-A,Q=W-N;return G*G+Q*Q<=a*a}}function kr(g,e,r){const a=u.K();if(!g){const{vecSouth:W,vecEast:G}=$r(e),Q=Y();Q[0]=G[0],Q[1]=G[1],Q[2]=W[0],Q[3]=W[1],d=Q,(N=(w=(y=Q)[0])*(O=y[3])-(A=y[2])*(E=y[1]))&&(d[0]=O*(N=1/N),d[1]=-E*N,d[2]=-A*N,d[3]=w*N),a[0]=Q[0],a[1]=Q[1],a[4]=Q[2],a[5]=Q[3]}var d,y,w,E,A,O,N;return u.M(a,a,[1/r,1/r,1]),a}function Kr(g,e,r,a){if(g){const d=u.K();if(!e){const{vecSouth:y,vecEast:w}=$r(r);d[0]=w[0],d[1]=w[1],d[4]=y[0],d[5]=y[1]}return u.M(d,d,[a,a,1]),d}return r.pixelsToClipSpaceMatrix}function $r(g){const e=Math.cos(g.rollInRadians),r=Math.sin(g.rollInRadians),a=Math.cos(g.pitchInRadians),d=Math.cos(g.bearingInRadians),y=Math.sin(g.bearingInRadians),w=u.ao();w[0]=-d*a*r-y*e,w[1]=-y*a*r+d*e;const E=u.ap(w);E<1e-9?u.aq(w):u.ar(w,w,1/E);const A=u.ao();A[0]=d*a*e-y*r,A[1]=y*a*e+d*r;const O=u.ap(A);return O<1e-9?u.aq(A):u.ar(A,A,1/O),{vecEast:A,vecSouth:w}}function Tt(g,e,r,a){let d;a?(d=[g,e,a(g,e),1],u.at(d,d,r)):(d=[g,e,0,1],Da(d,d,r));const y=d[3];return{point:new u.P(d[0]/y,d[1]/y),signedDistanceFromCamera:y,isOccluded:!1}}function Sn(g,e){return .5+g/e*.5}function _n(g,e){return g.x>=-e[0]&&g.x<=e[0]&&g.y>=-e[1]&&g.y<=e[1]}function Tn(g,e,r,a,d,y,w,E,A,O,N,W,G){const Q=r?g.textSizeData:g.iconSizeData,ie=u.ak(Q,e.transform.zoom),be=[256/e.width*2+1,256/e.height*2+1],xe=r?g.text.dynamicLayoutVertexArray:g.icon.dynamicLayoutVertexArray;xe.clear();const Se=g.lineVertexArray,Ae=r?g.text.placedSymbolArray:g.icon.placedSymbolArray,De=e.transform.width/e.transform.height;let ke=!1;for(let Oe=0;Oe<Ae.length;Oe++){const $e=Ae.get(Oe);if($e.hidden||$e.writingMode===u.al.vertical&&!ke){Go($e.numGlyphs,xe);continue}ke=!1;const Ue=new u.P($e.anchorX,$e.anchorY),lt={getElevation:G,pitchedLabelPlaneMatrix:a,lineVertexArray:Se,pitchWithMap:y,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:e.transform,tileAnchorPoint:Ue,unwrappedTileID:A,width:O,height:N,translation:W},Mt=cn($e.anchorX,$e.anchorY,lt);if(!_n(Mt.point,be)){Go($e.numGlyphs,xe);continue}const Qe=Sn(e.transform.cameraToCenterDistance,Mt.signedDistanceFromCamera),dt=u.am(Q,ie,$e),Pt=y?dt*e.transform.getPitchedTextCorrection($e.anchorX,$e.anchorY,A)/Qe:dt*Qe,er=Fr({projectionContext:lt,pitchedLabelPlaneMatrixInverse:d,symbol:$e,fontSize:Pt,flip:!1,keepUpright:w,glyphOffsetArray:g.glyphOffsetArray,dynamicLayoutVertexArray:xe,aspectRatio:De,rotateToLine:E});ke=er.useVertical,(er.notEnoughRoom||ke||er.needsFlipping&&Fr({projectionContext:lt,pitchedLabelPlaneMatrixInverse:d,symbol:$e,fontSize:Pt,flip:!0,keepUpright:w,glyphOffsetArray:g.glyphOffsetArray,dynamicLayoutVertexArray:xe,aspectRatio:De,rotateToLine:E}).notEnoughRoom)&&Go($e.numGlyphs,xe)}r?g.text.dynamicLayoutVertexBuffer.updateData(xe):g.icon.dynamicLayoutVertexBuffer.updateData(xe)}function Br(g,e,r,a,d,y,w,E){const A=y.glyphStartIndex+y.numGlyphs,O=y.lineStartIndex,N=y.lineStartIndex+y.lineLength,W=e.getoffsetX(y.glyphStartIndex),G=e.getoffsetX(A-1),Q=Es(g*W,r,a,d,y.segment,O,N,E,w);if(!Q)return null;const ie=Es(g*G,r,a,d,y.segment,O,N,E,w);return ie?E.projectionCache.anyProjectionOccluded?null:{first:Q,last:ie}:null}function Ft(g,e,r,a){return g===u.al.horizontal&&Math.abs(r.y-e.y)>Math.abs(r.x-e.x)*a?{useVertical:!0}:(g===u.al.vertical?e.y<r.y:e.x>r.x)?{needsFlipping:!0}:null}function Fr(g){const{projectionContext:e,pitchedLabelPlaneMatrixInverse:r,symbol:a,fontSize:d,flip:y,keepUpright:w,glyphOffsetArray:E,dynamicLayoutVertexArray:A,aspectRatio:O,rotateToLine:N}=g,W=d/24,G=a.lineOffsetX*W,Q=a.lineOffsetY*W;let ie;if(a.numGlyphs>1){const be=a.glyphStartIndex+a.numGlyphs,xe=a.lineStartIndex,Se=a.lineStartIndex+a.lineLength,Ae=Br(W,E,G,Q,y,a,N,e);if(!Ae)return{notEnoughRoom:!0};const De=Eo(Ae.first.point.x,Ae.first.point.y,e,r),ke=Eo(Ae.last.point.x,Ae.last.point.y,e,r);if(w&&!y){const Oe=Ft(a.writingMode,De,ke,O);if(Oe)return Oe}ie=[Ae.first];for(let Oe=a.glyphStartIndex+1;Oe<be-1;Oe++)ie.push(Es(W*E.getoffsetX(Oe),G,Q,y,a.segment,xe,Se,e,N));ie.push(Ae.last)}else{if(w&&!y){const xe=Gn(e.tileAnchorPoint.x,e.tileAnchorPoint.y,e).point,Se=a.lineStartIndex+a.segment+1,Ae=new u.P(e.lineVertexArray.getx(Se),e.lineVertexArray.gety(Se)),De=Gn(Ae.x,Ae.y,e),ke=De.signedDistanceFromCamera>0?De.point:nn(e.tileAnchorPoint,Ae,xe,1,e),Oe=Eo(xe.x,xe.y,e,r),$e=Eo(ke.x,ke.y,e,r),Ue=Ft(a.writingMode,Oe,$e,O);if(Ue)return Ue}const be=Es(W*E.getoffsetX(a.glyphStartIndex),G,Q,y,a.segment,a.lineStartIndex,a.lineStartIndex+a.lineLength,e,N);if(!be||e.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};ie=[be]}for(const be of ie)u.as(A,be.point,be.angle);return{}}function nn(g,e,r,a,d){const y=g.add(g.sub(e)._unit()),w=Gn(y.x,y.y,d).point,E=r.sub(w);return r.add(E._mult(a/E.mag()))}function Zn(g,e,r){const a=e.projectionCache;if(a.projections[g])return a.projections[g];const d=new u.P(e.lineVertexArray.getx(g),e.lineVertexArray.gety(g)),y=Gn(d.x,d.y,e);if(y.signedDistanceFromCamera>0)return a.projections[g]=y.point,a.anyProjectionOccluded=a.anyProjectionOccluded||y.isOccluded,y.point;const w=g-r.direction;return nn(r.distanceFromAnchor===0?e.tileAnchorPoint:new u.P(e.lineVertexArray.getx(w),e.lineVertexArray.gety(w)),d,r.previousVertex,r.absOffsetX-r.distanceFromAnchor+1,e)}function Gn(g,e,r){const a=g+r.translation[0],d=e+r.translation[1];let y;return r.pitchWithMap?(y=Tt(a,d,r.pitchedLabelPlaneMatrix,r.getElevation),y.isOccluded=!1):(y=r.transform.projectTileCoordinates(a,d,r.unwrappedTileID,r.getElevation),y.point.x=(.5*y.point.x+.5)*r.width,y.point.y=(.5*-y.point.y+.5)*r.height),y}function Eo(g,e,r,a){if(r.pitchWithMap){const d=[g,e,0,1];return u.at(d,d,a),r.transform.projectTileCoordinates(d[0]/d[3],d[1]/d[3],r.unwrappedTileID,r.getElevation).point}return{x:g/r.width*2-1,y:e/r.height*2-1}}function cn(g,e,r){return r.transform.projectTileCoordinates(g,e,r.unwrappedTileID,r.getElevation)}function Qs(g,e,r){return g._unit()._perp()._mult(e*r)}function Js(g,e,r,a,d,y,w,E,A){if(E.projectionCache.offsets[g])return E.projectionCache.offsets[g];const O=r.add(e);if(g+A.direction<a||g+A.direction>=d)return E.projectionCache.offsets[g]=O,O;const N=Zn(g+A.direction,E,A),W=Qs(N.sub(r),w,A.direction),G=r.add(W),Q=N.add(W);return E.projectionCache.offsets[g]=u.au(y,O,G,Q)||O,E.projectionCache.offsets[g]}function Es(g,e,r,a,d,y,w,E,A){const O=a?g-e:g+e;let N=O>0?1:-1,W=0;a&&(N*=-1,W=Math.PI),N<0&&(W+=Math.PI);let G,Q=N>0?y+d:y+d+1;E.projectionCache.cachedAnchorPoint?G=E.projectionCache.cachedAnchorPoint:(G=Gn(E.tileAnchorPoint.x,E.tileAnchorPoint.y,E).point,E.projectionCache.cachedAnchorPoint=G);let ie,be,xe=G,Se=G,Ae=0,De=0;const ke=Math.abs(O),Oe=[];let $e;for(;Ae+De<=ke;){if(Q+=N,Q<y||Q>=w)return null;Ae+=De,Se=xe,be=ie;const Mt={absOffsetX:ke,direction:N,distanceFromAnchor:Ae,previousVertex:Se};if(xe=Zn(Q,E,Mt),r===0)Oe.push(Se),$e=xe.sub(Se);else{let Qe;const dt=xe.sub(Se);Qe=dt.mag()===0?Qs(Zn(Q+N,E,Mt).sub(xe),r,N):Qs(dt,r,N),be||(be=Se.add(Qe)),ie=Js(Q,Qe,xe,y,w,be,r,E,Mt),Oe.push(be),$e=ie.sub(be)}De=$e.mag()}const Ue=$e._mult((ke-Ae)/De)._add(be||Se),lt=W+Math.atan2(xe.y-Se.y,xe.x-Se.x);return Oe.push(Ue),{point:Ue,angle:A?lt:0,path:Oe}}const tl=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Go(g,e){for(let r=0;r<g;r++){const a=e.length;e.resize(a+4),e.float32.set(tl,3*a)}}function Da(g,e,r){const a=e[0],d=e[1];return g[0]=r[0]*a+r[4]*d+r[12],g[1]=r[1]*a+r[5]*d+r[13],g[3]=r[3]*a+r[7]*d+r[15],g}const hn=100;class ui{constructor(e,r=new hr(e.width+200,e.height+200,25),a=new hr(e.width+200,e.height+200,25)){this.transform=e,this.grid=r,this.ignoredGrid=a,this.pitchFactor=Math.cos(e.pitch*Math.PI/180)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+hn,this.screenBottomBoundary=e.height+hn,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(e,r,a,d,y,w,E,A,O,N,W,G){const Q=this.projectAndGetPerspectiveRatio(e.anchorPointX+A[0],e.anchorPointY+A[1],y,N,G),ie=a*Q.perspectiveRatio;let be;if(w||E)be=this._projectCollisionBox(e,ie,d,y,w,E,A,Q,N,W,G);else{const $e=Q.x+(W?W.x*ie:0),Ue=Q.y+(W?W.y*ie:0);be={allPointsOccluded:!1,box:[$e+e.x1*ie,Ue+e.y1*ie,$e+e.x2*ie,Ue+e.y2*ie]}}const[xe,Se,Ae,De]=be.box,ke=w?be.allPointsOccluded:Q.isOccluded;let Oe=ke;return Oe||(Oe=Q.perspectiveRatio<this.perspectiveRatioCutoff),Oe||(Oe=!this.isInsideGrid(xe,Se,Ae,De)),Oe||r!=="always"&&this.grid.hitTest(xe,Se,Ae,De,r,O)?{box:[xe,Se,Ae,De],placeable:!1,offscreen:!1,occluded:ke}:{box:[xe,Se,Ae,De],placeable:!0,offscreen:this.isOffscreen(xe,Se,Ae,De),occluded:ke}}placeCollisionCircles(e,r,a,d,y,w,E,A,O,N,W,G,Q,ie){const be=[],xe=new u.P(r.anchorX,r.anchorY),Se=this.getPerspectiveRatio(xe.x,xe.y,w,ie),Ae=(O?y*this.transform.getPitchedTextCorrection(r.anchorX,r.anchorY,w)/Se:y*Se)/u.ay,De={getElevation:ie,pitchedLabelPlaneMatrix:E,lineVertexArray:a,pitchWithMap:O,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:xe,unwrappedTileID:w,width:this.transform.width,height:this.transform.height,translation:Q},ke=Br(Ae,d,r.lineOffsetX*Ae,r.lineOffsetY*Ae,!1,r,!1,De);let Oe=!1,$e=!1,Ue=!0;if(ke){const lt=.5*W*Se+G,Mt=new u.P(-100,-100),Qe=new u.P(this.screenRightBoundary,this.screenBottomBoundary),dt=new Dt,Pt=ke.first,er=ke.last;let tr=[];for(let Gr=Pt.path.length-1;Gr>=1;Gr--)tr.push(Pt.path[Gr]);for(let Gr=1;Gr<er.path.length;Gr++)tr.push(er.path[Gr]);const Bt=2.5*lt;if(O){const Gr=this.projectPathToScreenSpace(tr,De);tr=Gr.some(In=>In.signedDistanceFromCamera<=0)?[]:Gr.map(In=>In.point)}let vr=[];if(tr.length>0){const Gr=tr[0].clone(),In=tr[0].clone();for(let mi=1;mi<tr.length;mi++)Gr.x=Math.min(Gr.x,tr[mi].x),Gr.y=Math.min(Gr.y,tr[mi].y),In.x=Math.max(In.x,tr[mi].x),In.y=Math.max(In.y,tr[mi].y);vr=Gr.x>=Mt.x&&In.x<=Qe.x&&Gr.y>=Mt.y&&In.y<=Qe.y?[tr]:In.x<Mt.x||Gr.x>Qe.x||In.y<Mt.y||Gr.y>Qe.y?[]:u.av([tr],Mt.x,Mt.y,Qe.x,Qe.y)}for(const Gr of vr){dt.reset(Gr,.25*lt);let In=0;In=dt.length<=.5*lt?1:Math.ceil(dt.paddedLength/Bt)+1;for(let mi=0;mi<In;mi++){const ni=mi/Math.max(In-1,1),ki=dt.lerp(ni),Ai=ki.x+hn,Mn=ki.y+hn;be.push(Ai,Mn,lt,0);const Pn=Ai-lt,qi=Mn-lt,xo=Ai+lt,lo=Mn+lt;if(Ue=Ue&&this.isOffscreen(Pn,qi,xo,lo),$e=$e||this.isInsideGrid(Pn,qi,xo,lo),e!=="always"&&this.grid.hitTestCircle(Ai,Mn,lt,e,N)&&(Oe=!0,!A))return{circles:[],offscreen:!1,collisionDetected:Oe}}}}return{circles:!A&&Oe||!$e||Se<this.perspectiveRatioCutoff?[]:be,offscreen:Ue,collisionDetected:Oe}}projectPathToScreenSpace(e,r){const a=function(d,y){const w=u.K();return u.an(w,y.pitchedLabelPlaneMatrix),d.map(E=>{const A=Tt(E.x,E.y,w,y.getElevation),O=y.transform.projectTileCoordinates(A.point.x,A.point.y,y.unwrappedTileID,y.getElevation);return O.point.x=(.5*O.point.x+.5)*y.width,O.point.y=(.5*-O.point.y+.5)*y.height,O})}(e,r);return function(d){let y=0,w=0,E=0,A=0;for(let O=0;O<d.length;O++)d[O].isOccluded?(E=O+1,A=0):(A++,A>w&&(w=A,y=E));return d.slice(y,y+w)}(a)}queryRenderedSymbols(e){if(e.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const r=[];let a=1/0,d=1/0,y=-1/0,w=-1/0;for(const N of e){const W=new u.P(N.x+hn,N.y+hn);a=Math.min(a,W.x),d=Math.min(d,W.y),y=Math.max(y,W.x),w=Math.max(w,W.y),r.push(W)}const E=this.grid.query(a,d,y,w).concat(this.ignoredGrid.query(a,d,y,w)),A={},O={};for(const N of E){const W=N.key;if(A[W.bucketInstanceId]===void 0&&(A[W.bucketInstanceId]={}),A[W.bucketInstanceId][W.featureIndex])continue;const G=[new u.P(N.x1,N.y1),new u.P(N.x2,N.y1),new u.P(N.x2,N.y2),new u.P(N.x1,N.y2)];u.aw(r,G)&&(A[W.bucketInstanceId][W.featureIndex]=!0,O[W.bucketInstanceId]===void 0&&(O[W.bucketInstanceId]=[]),O[W.bucketInstanceId].push(W.featureIndex))}return O}insertCollisionBox(e,r,a,d,y,w){(a?this.ignoredGrid:this.grid).insert({bucketInstanceId:d,featureIndex:y,collisionGroupID:w,overlapMode:r},e[0],e[1],e[2],e[3])}insertCollisionCircles(e,r,a,d,y,w){const E=a?this.ignoredGrid:this.grid,A={bucketInstanceId:d,featureIndex:y,collisionGroupID:w,overlapMode:r};for(let O=0;O<e.length;O+=4)E.insertCircle(A,e[O],e[O+1],e[O+2])}projectAndGetPerspectiveRatio(e,r,a,d,y){if(y){let w;d?(w=[e,r,d(e,r),1],u.at(w,w,y)):(w=[e,r,0,1],Da(w,w,y));const E=w[3];return{x:(w[0]/E+1)/2*this.transform.width+hn,y:(-w[1]/E+1)/2*this.transform.height+hn,perspectiveRatio:.5+this.transform.cameraToCenterDistance/E*.5,isOccluded:!1,signedDistanceFromCamera:E}}{const w=this.transform.projectTileCoordinates(e,r,a,d);return{x:(w.point.x+1)/2*this.transform.width+hn,y:(1-w.point.y)/2*this.transform.height+hn,perspectiveRatio:.5+this.transform.cameraToCenterDistance/w.signedDistanceFromCamera*.5,isOccluded:w.isOccluded,signedDistanceFromCamera:w.signedDistanceFromCamera}}}getPerspectiveRatio(e,r,a,d){const y=this.transform.projectTileCoordinates(e,r,a,d);return .5+this.transform.cameraToCenterDistance/y.signedDistanceFromCamera*.5}isOffscreen(e,r,a,d){return a<hn||e>=this.screenRightBoundary||d<hn||r>this.screenBottomBoundary}isInsideGrid(e,r,a,d){return a>=0&&e<this.gridRightBoundary&&d>=0&&r<this.gridBottomBoundary}getViewportMatrix(){const e=u.ad([]);return u.L(e,e,[-100,-100,0]),e}_projectCollisionBox(e,r,a,d,y,w,E,A,O,N,W){let G=1,Q=0,ie=0,be=1;const xe=e.anchorPointX+E[0],Se=e.anchorPointY+E[1];if(w&&!y){const tr=this.projectAndGetPerspectiveRatio(xe+1,Se,d,O,W),Bt=tr.x-A.x,vr=Math.atan((tr.y-A.y)/Bt)+(Bt<0?Math.PI:0),Gr=Math.sin(vr),In=Math.cos(vr);G=In,Q=Gr,ie=-Gr,be=In}else if(!w&&y){const tr=$r(this.transform);G=tr.vecEast[0],Q=tr.vecEast[1],ie=tr.vecSouth[0],be=tr.vecSouth[1]}let Ae=A.x,De=A.y,ke=r;y&&(Ae=xe,De=Se,ke=Math.pow(2,-(this.transform.zoom-a.overscaledZ)),ke*=this.transform.getPitchedTextCorrection(xe,Se,d),N||(ke*=u.ae(.5+A.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),N&&(Ae+=G*N.x*ke+ie*N.y*ke,De+=Q*N.x*ke+be*N.y*ke);const Oe=e.x1*ke,$e=e.x2*ke,Ue=(Oe+$e)/2,lt=e.y1*ke,Mt=e.y2*ke,Qe=(lt+Mt)/2,dt=[{offsetX:Oe,offsetY:lt},{offsetX:Ue,offsetY:lt},{offsetX:$e,offsetY:lt},{offsetX:$e,offsetY:Qe},{offsetX:$e,offsetY:Mt},{offsetX:Ue,offsetY:Mt},{offsetX:Oe,offsetY:Mt},{offsetX:Oe,offsetY:Qe}];let Pt=[];for(const{offsetX:tr,offsetY:Bt}of dt)Pt.push(new u.P(Ae+G*tr+ie*Bt,De+Q*tr+be*Bt));let er=!1;if(y){const tr=Pt.map(Bt=>this.projectAndGetPerspectiveRatio(Bt.x,Bt.y,d,O,W));er=tr.some(Bt=>!Bt.isOccluded),Pt=tr.map(Bt=>new u.P(Bt.x,Bt.y))}else er=!0;return{box:u.ax(Pt),allPointsOccluded:!er}}}class Kn{constructor(e,r,a,d){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?r:-r))):d&&a?1:0,this.placed=a}isHidden(){return this.opacity===0&&!this.placed}}class Oa{constructor(e,r,a,d,y){this.text=new Kn(e?e.text:null,r,a,y),this.icon=new Kn(e?e.icon:null,r,d,y)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class os{constructor(e,r,a){this.text=e,this.icon=r,this.skipFade=a}}class Xl{constructor(e,r,a,d,y){this.bucketInstanceId=e,this.featureIndex=r,this.sourceLayerIndex=a,this.bucketIndex=d,this.tileID=y}}class Oo{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}get(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){const r=++this.maxGroupID;this.collisionGroups[e]={ID:r,predicate:a=>a.collisionGroupID===r}}return this.collisionGroups[e]}}function to(g,e,r,a,d){const{horizontalAlign:y,verticalAlign:w}=u.aE(g);return new u.P(-(y-.5)*e+a[0]*d,-(w-.5)*r+a[1]*d)}class ss{constructor(e,r,a,d,y){this.transform=e.clone(),this.terrain=r,this.collisionIndex=new ui(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=a,this.retainedQueryData={},this.collisionGroups=new Oo(d),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=y,y&&(y.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(e){const r=this.terrain;return r?(a,d)=>r.getElevation(e,a,d):null}getBucketParts(e,r,a,d){const y=a.getBucket(r),w=a.latestFeatureIndex;if(!y||!w||r.id!==y.layerIds[0])return;const E=a.collisionBoxArray,A=y.layers[0].layout,O=y.layers[0].paint,N=Math.pow(2,this.transform.zoom-a.tileID.overscaledZ),W=a.tileSize/u.Z,G=a.tileID.toUnwrapped(),Q=A.get("text-rotation-alignment")==="map",ie=u.az(a,1,this.transform.zoom),be=u.aA(this.collisionIndex.transform,a,O.get("text-translate"),O.get("text-translate-anchor")),xe=u.aA(this.collisionIndex.transform,a,O.get("icon-translate"),O.get("icon-translate-anchor")),Se=kr(Q,this.transform,ie);this.retainedQueryData[y.bucketInstanceId]=new Xl(y.bucketInstanceId,w,y.sourceLayerIndex,y.index,a.tileID);const Ae={bucket:y,layout:A,translationText:be,translationIcon:xe,unwrappedTileID:G,pitchedLabelPlaneMatrix:Se,scale:N,textPixelRatio:W,holdingForFade:a.holdingForFade(),collisionBoxArray:E,partiallyEvaluatedTextSize:u.ak(y.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(y.sourceID)};if(d)for(const De of y.sortKeyRanges){const{sortKey:ke,symbolInstanceStart:Oe,symbolInstanceEnd:$e}=De;e.push({sortKey:ke,symbolInstanceStart:Oe,symbolInstanceEnd:$e,parameters:Ae})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:y.symbolInstances.length,parameters:Ae})}attemptAnchorPlacement(e,r,a,d,y,w,E,A,O,N,W,G,Q,ie,be,xe,Se,Ae,De,ke){const Oe=u.aB[e.textAnchor],$e=[e.textOffset0,e.textOffset1],Ue=to(Oe,a,d,$e,y),lt=this.collisionIndex.placeCollisionBox(r,G,A,O,N,E,w,xe,W.predicate,De,Ue,ke);if((!Ae||this.collisionIndex.placeCollisionBox(Ae,G,A,O,N,E,w,Se,W.predicate,De,Ue,ke).placeable)&&lt.placeable){let Mt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Q.crossTileID]&&this.prevPlacement.placements[Q.crossTileID]&&this.prevPlacement.placements[Q.crossTileID].text&&(Mt=this.prevPlacement.variableOffsets[Q.crossTileID].anchor),Q.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Q.crossTileID]={textOffset:$e,width:a,height:d,anchor:Oe,textBoxScale:y,prevAnchor:Mt},this.markUsedJustification(ie,Oe,Q,be),ie.allowVerticalPlacement&&(this.markUsedOrientation(ie,be,Q),this.placedOrientations[Q.crossTileID]=be),{shift:Ue,placedGlyphBoxes:lt}}}placeLayerBucketPart(e,r,a){const{bucket:d,layout:y,translationText:w,translationIcon:E,unwrappedTileID:A,pitchedLabelPlaneMatrix:O,textPixelRatio:N,holdingForFade:W,collisionBoxArray:G,partiallyEvaluatedTextSize:Q,collisionGroup:ie}=e.parameters,be=y.get("text-optional"),xe=y.get("icon-optional"),Se=u.aC(y,"text-overlap","text-allow-overlap"),Ae=Se==="always",De=u.aC(y,"icon-overlap","icon-allow-overlap"),ke=De==="always",Oe=y.get("text-rotation-alignment")==="map",$e=y.get("text-pitch-alignment")==="map",Ue=y.get("icon-text-fit")!=="none",lt=y.get("symbol-z-order")==="viewport-y",Mt=Ae&&(ke||!d.hasIconData()||xe),Qe=ke&&(Ae||!d.hasTextData()||be);!d.collisionArrays&&G&&d.deserializeCollisionBoxes(G);const dt=this.retainedQueryData[d.bucketInstanceId].tileID,Pt=this._getTerrainElevationFunc(dt),er=this.transform.getFastPathSimpleProjectionMatrix(dt),tr=(Bt,vr,Gr)=>{var In,mi;if(r[Bt.crossTileID])return;if(W)return void(this.placements[Bt.crossTileID]=new os(!1,!1,!1));let ni=!1,ki=!1,Ai=!0,Mn=null,Pn={box:null,placeable:!1,offscreen:null,occluded:!1},qi={placeable:!1},xo=null,lo=null,Rn=null,vl=0,ua=0,Pa=0;vr.textFeatureIndex?vl=vr.textFeatureIndex:Bt.useRuntimeCollisionCircles&&(vl=Bt.featureIndex),vr.verticalTextFeatureIndex&&(ua=vr.verticalTextFeatureIndex);const Ul=vr.textBox;if(Ul){const Us=uo=>{let co=u.al.horizontal;if(d.allowVerticalPlacement&&!uo&&this.prevPlacement){const ys=this.prevPlacement.placedOrientations[Bt.crossTileID];ys&&(this.placedOrientations[Bt.crossTileID]=ys,co=ys,this.markUsedOrientation(d,co,Bt))}return co},Vl=(uo,co)=>{if(d.allowVerticalPlacement&&Bt.numVerticalGlyphVertices>0&&vr.verticalTextBox){for(const ys of d.writingModes)if(ys===u.al.vertical?(Pn=co(),qi=Pn):Pn=uo(),Pn&&Pn.placeable)break}else Pn=uo()},Ea=Bt.textAnchorOffsetStartIndex,su=Bt.textAnchorOffsetEndIndex;if(su===Ea){const uo=(co,ys)=>{const bi=this.collisionIndex.placeCollisionBox(co,Se,N,dt,A,$e,Oe,w,ie.predicate,Pt,void 0,er);return bi&&bi.placeable&&(this.markUsedOrientation(d,ys,Bt),this.placedOrientations[Bt.crossTileID]=ys),bi};Vl(()=>uo(Ul,u.al.horizontal),()=>{const co=vr.verticalTextBox;return d.allowVerticalPlacement&&Bt.numVerticalGlyphVertices>0&&co?uo(co,u.al.vertical):{box:null,offscreen:null}}),Us(Pn&&Pn.placeable)}else{let uo=u.aB[(mi=(In=this.prevPlacement)===null||In===void 0?void 0:In.variableOffsets[Bt.crossTileID])===null||mi===void 0?void 0:mi.anchor];const co=(bi,Yh,Ld)=>{const Qh=bi.x2-bi.x1,Vs=bi.y2-bi.y1,Ia=Bt.textBoxScale,Lu=Ue&&De==="never"?Yh:null;let qa=null,Ma=Se==="never"?1:2,Qo="never";uo&&Ma++;for(let bo=0;bo<Ma;bo++){for(let hc=Ea;hc<su;hc++){const xl=d.textAnchorOffsets.get(hc);if(uo&&xl.textAnchor!==uo)continue;const vh=this.attemptAnchorPlacement(xl,bi,Qh,Vs,Ia,Oe,$e,N,dt,A,ie,Qo,Bt,d,Ld,w,E,Lu,Pt);if(vh&&(qa=vh.placedGlyphBoxes,qa&&qa.placeable))return ni=!0,Mn=vh.shift,qa}uo?uo=null:Qo=Se}return a&&!qa&&(qa={box:this.collisionIndex.placeCollisionBox(Ul,"always",N,dt,A,$e,Oe,w,ie.predicate,Pt,void 0,er).box,offscreen:!1,placeable:!1,occluded:!1}),qa};Vl(()=>co(Ul,vr.iconBox,u.al.horizontal),()=>{const bi=vr.verticalTextBox;return d.allowVerticalPlacement&&(!Pn||!Pn.placeable)&&Bt.numVerticalGlyphVertices>0&&bi?co(bi,vr.verticalIconBox,u.al.vertical):{box:null,occluded:!0,offscreen:null}}),Pn&&(ni=Pn.placeable,Ai=Pn.offscreen);const ys=Us(Pn&&Pn.placeable);if(!ni&&this.prevPlacement){const bi=this.prevPlacement.variableOffsets[Bt.crossTileID];bi&&(this.variableOffsets[Bt.crossTileID]=bi,this.markUsedJustification(d,bi.anchor,Bt,ys))}}}if(xo=Pn,ni=xo&&xo.placeable,Ai=xo&&xo.offscreen,Bt.useRuntimeCollisionCircles){const Us=d.text.placedSymbolArray.get(Bt.centerJustifiedTextSymbolIndex),Vl=u.am(d.textSizeData,Q,Us),Ea=y.get("text-padding");lo=this.collisionIndex.placeCollisionCircles(Se,Us,d.lineVertexArray,d.glyphOffsetArray,Vl,A,O,a,$e,ie.predicate,Bt.collisionCircleDiameter,Ea,w,Pt),lo.circles.length&&lo.collisionDetected&&!a&&u.w("Collisions detected, but collision boxes are not shown"),ni=Ae||lo.circles.length>0&&!lo.collisionDetected,Ai=Ai&&lo.offscreen}if(vr.iconFeatureIndex&&(Pa=vr.iconFeatureIndex),vr.iconBox){const Us=Vl=>this.collisionIndex.placeCollisionBox(Vl,De,N,dt,A,$e,Oe,E,ie.predicate,Pt,Ue&&Mn?Mn:void 0,er);qi&&qi.placeable&&vr.verticalIconBox?(Rn=Us(vr.verticalIconBox),ki=Rn.placeable):(Rn=Us(vr.iconBox),ki=Rn.placeable),Ai=Ai&&Rn.offscreen}const ca=be||Bt.numHorizontalGlyphVertices===0&&Bt.numVerticalGlyphVertices===0,ou=xe||Bt.numIconVertices===0;ca||ou?ou?ca||(ki=ki&&ni):ni=ki&&ni:ki=ni=ki&&ni;const js=ki&&Rn.placeable;if(ni&&xo.placeable&&this.collisionIndex.insertCollisionBox(xo.box,Se,y.get("text-ignore-placement"),d.bucketInstanceId,qi&&qi.placeable&&ua?ua:vl,ie.ID),js&&this.collisionIndex.insertCollisionBox(Rn.box,De,y.get("icon-ignore-placement"),d.bucketInstanceId,Pa,ie.ID),lo&&ni&&this.collisionIndex.insertCollisionCircles(lo.circles,Se,y.get("text-ignore-placement"),d.bucketInstanceId,vl,ie.ID),a&&this.storeCollisionData(d.bucketInstanceId,Gr,vr,xo,Rn,lo),Bt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(d.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Bt.crossTileID]=new os((ni||Mt)&&!(xo!=null&&xo.occluded),(ki||Qe)&&!(Rn!=null&&Rn.occluded),Ai||d.justReloaded),r[Bt.crossTileID]=!0};if(lt){if(e.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Bt=d.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let vr=Bt.length-1;vr>=0;--vr){const Gr=Bt[vr];tr(d.symbolInstances.get(Gr),d.collisionArrays[Gr],Gr)}}else for(let Bt=e.symbolInstanceStart;Bt<e.symbolInstanceEnd;Bt++)tr(d.symbolInstances.get(Bt),d.collisionArrays[Bt],Bt);d.justReloaded=!1}storeCollisionData(e,r,a,d,y,w){if(a.textBox||a.iconBox){let E,A;this.collisionBoxArrays.has(e)?E=this.collisionBoxArrays.get(e):(E=new Map,this.collisionBoxArrays.set(e,E)),E.has(r)?A=E.get(r):(A={text:null,icon:null},E.set(r,A)),a.textBox&&(A.text=d.box),a.iconBox&&(A.icon=y.box)}if(w){let E=this.collisionCircleArrays[e];E===void 0&&(E=this.collisionCircleArrays[e]=[]);for(let A=0;A<w.circles.length;A+=4)E.push(w.circles[A+0]-hn),E.push(w.circles[A+1]-hn),E.push(w.circles[A+2]),E.push(w.collisionDetected?1:0)}}markUsedJustification(e,r,a,d){let y;y=d===u.al.vertical?a.verticalPlacedTextSymbolIndex:{left:a.leftJustifiedTextSymbolIndex,center:a.centerJustifiedTextSymbolIndex,right:a.rightJustifiedTextSymbolIndex}[u.aD(r)];const w=[a.leftJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.rightJustifiedTextSymbolIndex,a.verticalPlacedTextSymbolIndex];for(const E of w)E>=0&&(e.text.placedSymbolArray.get(E).crossTileID=y>=0&&E!==y?0:a.crossTileID)}markUsedOrientation(e,r,a){const d=r===u.al.horizontal||r===u.al.horizontalOnly?r:0,y=r===u.al.vertical?r:0,w=[a.leftJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.rightJustifiedTextSymbolIndex];for(const E of w)e.text.placedSymbolArray.get(E).placedOrientation=d;a.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(a.verticalPlacedTextSymbolIndex).placedOrientation=y)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;const r=this.prevPlacement;let a=!1;this.prevZoomAdjustment=r?r.zoomAdjustment(this.transform.zoom):0;const d=r?r.symbolFadeChange(e):1,y=r?r.opacities:{},w=r?r.variableOffsets:{},E=r?r.placedOrientations:{};for(const A in this.placements){const O=this.placements[A],N=y[A];N?(this.opacities[A]=new Oa(N,d,O.text,O.icon),a=a||O.text!==N.text.placed||O.icon!==N.icon.placed):(this.opacities[A]=new Oa(null,d,O.text,O.icon,O.skipFade),a=a||O.text||O.icon)}for(const A in y){const O=y[A];if(!this.opacities[A]){const N=new Oa(O,d,!1,!1);N.isHidden()||(this.opacities[A]=N,a=a||O.text.placed||O.icon.placed)}}for(const A in w)this.variableOffsets[A]||!this.opacities[A]||this.opacities[A].isHidden()||(this.variableOffsets[A]=w[A]);for(const A in E)this.placedOrientations[A]||!this.opacities[A]||this.opacities[A].isHidden()||(this.placedOrientations[A]=E[A]);if(r&&r.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");a?this.lastPlacementChangeTime=e:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=r?r.lastPlacementChangeTime:e)}updateLayerOpacities(e,r){const a={};for(const d of r){const y=d.getBucket(e);y&&d.latestFeatureIndex&&e.id===y.layerIds[0]&&this.updateBucketOpacities(y,d.tileID,a,d.collisionBoxArray)}}updateBucketOpacities(e,r,a,d){e.hasTextData()&&(e.text.opacityVertexArray.clear(),e.text.hasVisibleVertices=!1),e.hasIconData()&&(e.icon.opacityVertexArray.clear(),e.icon.hasVisibleVertices=!1),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();const y=e.layers[0],w=y.layout,E=new Oa(null,0,!1,!1,!0),A=w.get("text-allow-overlap"),O=w.get("icon-allow-overlap"),N=y._unevaluatedLayout.hasValue("text-variable-anchor")||y._unevaluatedLayout.hasValue("text-variable-anchor-offset"),W=w.get("text-rotation-alignment")==="map",G=w.get("text-pitch-alignment")==="map",Q=w.get("icon-text-fit")!=="none",ie=new Oa(null,0,A&&(O||!e.hasIconData()||w.get("icon-optional")),O&&(A||!e.hasTextData()||w.get("text-optional")),!0);!e.collisionArrays&&d&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(d);const be=(Se,Ae,De)=>{for(let ke=0;ke<Ae/4;ke++)Se.opacityVertexArray.emplaceBack(De);Se.hasVisibleVertices=Se.hasVisibleVertices||De!==B},xe=this.collisionBoxArrays.get(e.bucketInstanceId);for(let Se=0;Se<e.symbolInstances.length;Se++){const Ae=e.symbolInstances.get(Se),{numHorizontalGlyphVertices:De,numVerticalGlyphVertices:ke,crossTileID:Oe}=Ae;let $e=this.opacities[Oe];a[Oe]?$e=E:$e||($e=ie,this.opacities[Oe]=$e),a[Oe]=!0;const Ue=Ae.numIconVertices>0,lt=this.placedOrientations[Ae.crossTileID],Mt=lt===u.al.vertical,Qe=lt===u.al.horizontal||lt===u.al.horizontalOnly;if(De>0||ke>0){const Pt=Is($e.text);be(e.text,De,Mt?B:Pt),be(e.text,ke,Qe?B:Pt);const er=$e.text.isHidden();[Ae.rightJustifiedTextSymbolIndex,Ae.centerJustifiedTextSymbolIndex,Ae.leftJustifiedTextSymbolIndex].forEach(vr=>{vr>=0&&(e.text.placedSymbolArray.get(vr).hidden=er||Mt?1:0)}),Ae.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(Ae.verticalPlacedTextSymbolIndex).hidden=er||Qe?1:0);const tr=this.variableOffsets[Ae.crossTileID];tr&&this.markUsedJustification(e,tr.anchor,Ae,lt);const Bt=this.placedOrientations[Ae.crossTileID];Bt&&(this.markUsedJustification(e,"left",Ae,Bt),this.markUsedOrientation(e,Bt,Ae))}if(Ue){const Pt=Is($e.icon),er=!(Q&&Ae.verticalPlacedIconSymbolIndex&&Mt);Ae.placedIconSymbolIndex>=0&&(be(e.icon,Ae.numIconVertices,er?Pt:B),e.icon.placedSymbolArray.get(Ae.placedIconSymbolIndex).hidden=$e.icon.isHidden()),Ae.verticalPlacedIconSymbolIndex>=0&&(be(e.icon,Ae.numVerticalIconVertices,er?B:Pt),e.icon.placedSymbolArray.get(Ae.verticalPlacedIconSymbolIndex).hidden=$e.icon.isHidden())}const dt=xe&&xe.has(Se)?xe.get(Se):{text:null,icon:null};if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){const Pt=e.collisionArrays[Se];if(Pt){let er=new u.P(0,0);if(Pt.textBox||Pt.verticalTextBox){let tr=!0;if(N){const Bt=this.variableOffsets[Oe];Bt?(er=to(Bt.anchor,Bt.width,Bt.height,Bt.textOffset,Bt.textBoxScale),W&&er._rotate(G?-this.transform.bearingInRadians:this.transform.bearingInRadians)):tr=!1}if(Pt.textBox||Pt.verticalTextBox){let Bt;Pt.textBox&&(Bt=Mt),Pt.verticalTextBox&&(Bt=Qe),rl(e.textCollisionBox.collisionVertexArray,$e.text.placed,!tr||Bt,dt.text,er.x,er.y)}}if(Pt.iconBox||Pt.verticalIconBox){const tr=!!(!Qe&&Pt.verticalIconBox);let Bt;Pt.iconBox&&(Bt=tr),Pt.verticalIconBox&&(Bt=!tr),rl(e.iconCollisionBox.collisionVertexArray,$e.icon.placed,Bt,dt.icon,Q?er.x:0,Q?er.y:0)}}}}if(e.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.text.opacityVertexArray.length!==e.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${e.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${e.text.layoutVertexArray.length}) / 4`);if(e.icon.opacityVertexArray.length!==e.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${e.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${e.icon.layoutVertexArray.length}) / 4`);e.bucketInstanceId in this.collisionCircleArrays&&(e.collisionCircleArray=this.collisionCircleArrays[e.bucketInstanceId],delete this.collisionCircleArrays[e.bucketInstanceId])}symbolFadeChange(e){return this.fadeDuration===0?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,r){const a=this.zoomAtLastRecencyCheck===r?1-this.zoomAdjustment(r):1;return this.zoomAtLastRecencyCheck=r,this.commitTime+this.fadeDuration*a>e}setStale(){this.stale=!0}}function rl(g,e,r,a,d,y){a&&a.length!==0||(a=[0,0,0,0]);const w=a[0]-hn,E=a[1]-hn,A=a[2]-hn,O=a[3]-hn;g.emplaceBack(e?1:0,r?1:0,d||0,y||0,w,E),g.emplaceBack(e?1:0,r?1:0,d||0,y||0,A,E),g.emplaceBack(e?1:0,r?1:0,d||0,y||0,A,O),g.emplaceBack(e?1:0,r?1:0,d||0,y||0,w,O)}const yo=Math.pow(2,25),ya=Math.pow(2,24),Yl=Math.pow(2,17),mu=Math.pow(2,16),_a=Math.pow(2,9),Ql=Math.pow(2,8),Fa=Math.pow(2,1);function Is(g){if(g.opacity===0&&!g.placed)return 0;if(g.opacity===1&&g.placed)return 4294967295;const e=g.placed?1:0,r=Math.floor(127*g.opacity);return r*yo+e*ya+r*Yl+e*mu+r*_a+e*Ql+r*Fa+e}const B=0;class J{constructor(e){this._sortAcrossTiles=e.layout.get("symbol-z-order")!=="viewport-y"&&!e.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(e,r,a,d,y){const w=this._bucketParts;for(;this._currentTileIndex<e.length;)if(r.getBucketParts(w,d,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,y())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,w.sort((E,A)=>E.sortKey-A.sortKey));this._currentPartIndex<w.length;)if(r.placeLayerBucketPart(w[this._currentPartIndex],this._seenCrossTileIDs,a),this._currentPartIndex++,y())return!0;return!1}}class de{constructor(e,r,a,d,y,w,E,A){this.placement=new ss(e,r,w,E,A),this._currentPlacementIndex=a.length-1,this._forceFullPlacement=d,this._showCollisionBoxes=y,this._done=!1}isDone(){return this._done}continuePlacement(e,r,a){const d=Te.now(),y=()=>!this._forceFullPlacement&&Te.now()-d>2;for(;this._currentPlacementIndex>=0;){const w=r[e[this._currentPlacementIndex]],E=this.placement.collisionIndex.transform.zoom;if(w.type==="symbol"&&(!w.minzoom||w.minzoom<=E)&&(!w.maxzoom||w.maxzoom>E)){if(this._inProgressLayer||(this._inProgressLayer=new J(w)),this._inProgressLayer.continuePlacement(a[w.source],this.placement,this._showCollisionBoxes,w,y))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(e){return this.placement.commit(e),this.placement}}const Ie=512/u.Z/2;class yt{constructor(e,r,a){this.tileID=e,this.bucketInstanceId=a,this._symbolsByKey={};const d=new Map;for(let y=0;y<r.length;y++){const w=r.get(y),E=w.key,A=d.get(E);A?A.push(w):d.set(E,[w])}for(const[y,w]of d){const E={positions:w.map(A=>({x:Math.floor(A.anchorX*Ie),y:Math.floor(A.anchorY*Ie)})),crossTileIDs:w.map(A=>A.crossTileID)};if(E.positions.length>128){const A=new u.aF(E.positions.length,16,Uint16Array);for(const{x:O,y:N}of E.positions)A.add(O,N);A.finish(),delete E.positions,E.index=A}this._symbolsByKey[y]=E}}getScaledCoordinates(e,r){const{x:a,y:d,z:y}=this.tileID.canonical,{x:w,y:E,z:A}=r.canonical,O=Ie/Math.pow(2,A-y),N=(E*u.Z+e.anchorY)*O,W=d*u.Z*Ie;return{x:Math.floor((w*u.Z+e.anchorX)*O-a*u.Z*Ie),y:Math.floor(N-W)}}findMatches(e,r,a){const d=this.tileID.canonical.z<r.canonical.z?1:Math.pow(2,this.tileID.canonical.z-r.canonical.z);for(let y=0;y<e.length;y++){const w=e.get(y);if(w.crossTileID)continue;const E=this._symbolsByKey[w.key];if(!E)continue;const A=this.getScaledCoordinates(w,r);if(E.index){const O=E.index.range(A.x-d,A.y-d,A.x+d,A.y+d).sort();for(const N of O){const W=E.crossTileIDs[N];if(!a[W]){a[W]=!0,w.crossTileID=W;break}}}else if(E.positions)for(let O=0;O<E.positions.length;O++){const N=E.positions[O],W=E.crossTileIDs[O];if(Math.abs(N.x-A.x)<=d&&Math.abs(N.y-A.y)<=d&&!a[W]){a[W]=!0,w.crossTileID=W;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:e})=>e)}}class ct{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ot{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(e){const r=Math.round((e-this.lng)/360);if(r!==0)for(const a in this.indexes){const d=this.indexes[a],y={};for(const w in d){const E=d[w];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+r),y[E.tileID.key]=E}this.indexes[a]=y}this.lng=e}addBucket(e,r,a){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===r.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(let y=0;y<r.symbolInstances.length;y++)r.symbolInstances.get(y).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});const d=this.usedCrossTileIDs[e.overscaledZ];for(const y in this.indexes){const w=this.indexes[y];if(Number(y)>e.overscaledZ)for(const E in w){const A=w[E];A.tileID.isChildOf(e)&&A.findMatches(r.symbolInstances,e,d)}else{const E=w[e.scaledTo(Number(y)).key];E&&E.findMatches(r.symbolInstances,e,d)}}for(let y=0;y<r.symbolInstances.length;y++){const w=r.symbolInstances.get(y);w.crossTileID||(w.crossTileID=a.generate(),d[w.crossTileID]=!0)}return this.indexes[e.overscaledZ]===void 0&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new yt(e,r.symbolInstances,r.bucketInstanceId),!0}removeBucketCrossTileIDs(e,r){for(const a of r.getCrossTileIDsLists())for(const d of a)delete this.usedCrossTileIDs[e][d]}removeStaleBuckets(e){let r=!1;for(const a in this.indexes){const d=this.indexes[a];for(const y in d)e[d[y].bucketInstanceId]||(this.removeBucketCrossTileIDs(a,d[y]),delete d[y],r=!0)}return r}}class ar{constructor(){this.layerIndexes={},this.crossTileIDs=new ct,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(e,r,a){let d=this.layerIndexes[e.id];d===void 0&&(d=this.layerIndexes[e.id]=new Ot);let y=!1;const w={};d.handleWrapJump(a);for(const E of r){const A=E.getBucket(e);A&&e.id===A.layerIds[0]&&(A.bucketInstanceId||(A.bucketInstanceId=++this.maxBucketInstanceId),d.addBucket(E.tileID,A,this.crossTileIDs)&&(y=!0),w[A.bucketInstanceId]=!0)}return d.removeStaleBuckets(w)&&(y=!0),y}pruneUnusedLayers(e){const r={};e.forEach(a=>{r[a]=!0});for(const a in this.layerIndexes)r[a]||delete this.layerIndexes[a]}}var gr="void main() {fragColor=vec4(1.0);}";const Ar={prelude:_r(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:_r("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:_r("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:_r(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:_r(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:_r(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:_r(gr,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:_r(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:_r(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:_r("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:_r("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:_r("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:_r(gr,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:_r(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:_r(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:_r(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:_r(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:_r(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:_r(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:_r(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:_r(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;switch(u_method){case BASIC:
basic_hillshade(deriv);break;case COMBINED:
combined_hillshade(deriv);break;case IGOR:
igor_hillshade(deriv);break;case MULTIDIRECTIONAL:
multidirectional_hillshade(deriv);break;case STANDARD:
default:
standard_hillshade(deriv);break;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:_r(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:_r(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:_r(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:_r(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:_r(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:_r(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:_r(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:_r(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:_r("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:_r("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:_r("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:_r("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:_r(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:_r("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function _r(g,e){const r=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,a=e.match(/in ([\w]+) ([\w]+)/g),d=g.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),y=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=y?y.concat(d):d,E={};return{fragmentSource:g=g.replace(r,(A,O,N,W,G)=>(E[G]=!0,O==="define"?`
#ifndef HAS_UNIFORM_u_${G}
in ${N} ${W} ${G};
#else
uniform ${N} ${W} u_${G};
#endif
`:`
#ifdef HAS_UNIFORM_u_${G}
    ${N} ${W} ${G} = u_${G};
#endif
`)),vertexSource:e=e.replace(r,(A,O,N,W,G)=>{const Q=W==="float"?"vec2":"vec4",ie=G.match(/color/)?"color":Q;return E[G]?O==="define"?`
#ifndef HAS_UNIFORM_u_${G}
uniform lowp float u_${G}_t;
in ${N} ${Q} a_${G};
out ${N} ${W} ${G};
#else
uniform ${N} ${W} u_${G};
#endif
`:ie==="vec4"?`
#ifndef HAS_UNIFORM_u_${G}
    ${G} = a_${G};
#else
    ${N} ${W} ${G} = u_${G};
#endif
`:`
#ifndef HAS_UNIFORM_u_${G}
    ${G} = unpack_mix_${ie}(a_${G}, u_${G}_t);
#else
    ${N} ${W} ${G} = u_${G};
#endif
`:O==="define"?`
#ifndef HAS_UNIFORM_u_${G}
uniform lowp float u_${G}_t;
in ${N} ${Q} a_${G};
#else
uniform ${N} ${W} u_${G};
#endif
`:ie==="vec4"?`
#ifndef HAS_UNIFORM_u_${G}
    ${N} ${W} ${G} = a_${G};
#else
    ${N} ${W} ${G} = u_${G};
#endif
`:`
#ifndef HAS_UNIFORM_u_${G}
    ${N} ${W} ${G} = unpack_mix_${ie}(a_${G}, u_${G}_t);
#else
    ${N} ${W} ${G} = u_${G};
#endif
`}),staticAttributes:a,staticUniforms:w}}class $n{constructor(e,r,a){this.vertexBuffer=e,this.indexBuffer=r,this.segments=a}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var _i=u.aG([{name:"a_pos",type:"Int16",components:2}]);const ro="#define PROJECTION_MERCATOR",en="mercator";class as{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return en}get shaderDefine(){return ro}get shaderPreludeCode(){return Ar.projectionMercator}get vertexShaderPreludeCode(){return Ar.projectionMercator.vertexSource}get subdivisionGranularity(){return u.aH.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(e){}getMeshFromTileID(e,r,a,d,y){if(this._cachedMesh)return this._cachedMesh;const w=new u.aI;w.emplaceBack(0,0),w.emplaceBack(u.Z,0),w.emplaceBack(0,u.Z),w.emplaceBack(u.Z,u.Z);const E=e.createVertexBuffer(w,_i.members),A=u.aJ.simpleSegment(0,0,4,2),O=new u.aK;O.emplaceBack(1,0,2),O.emplaceBack(1,2,3);const N=e.createIndexBuffer(O);return this._cachedMesh=new $n(E,N,A),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(e){}}class Io{constructor(e=0,r=0,a=0,d=0){if(isNaN(e)||e<0||isNaN(r)||r<0||isNaN(a)||a<0||isNaN(d)||d<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=r,this.left=a,this.right=d}interpolate(e,r,a){return r.top!=null&&e.top!=null&&(this.top=u.B.number(e.top,r.top,a)),r.bottom!=null&&e.bottom!=null&&(this.bottom=u.B.number(e.bottom,r.bottom,a)),r.left!=null&&e.left!=null&&(this.left=u.B.number(e.left,r.left,a)),r.right!=null&&e.right!=null&&(this.right=u.B.number(e.right,r.right,a)),this}getCenter(e,r){const a=u.ae((this.left+e-this.right)/2,0,e),d=u.ae((this.top+r-this.bottom)/2,0,r);return new u.P(a,d)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new Io(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Mo(g,e){if(!g.renderWorldCopies||g.lngRange)return;const r=e.lng-g.center.lng;e.lng+=r>180?-360:r<-180?360:0}function ci(g){return Math.max(0,Math.floor(g))}class hi{constructor(e,r,a,d,y,w){this._callbacks=e,this._tileSize=512,this._renderWorldCopies=w===void 0||!!w,this._minZoom=r||0,this._maxZoom=a||22,this._minPitch=d??0,this._maxPitch=y??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new u.Q(0,0),this._elevation=0,this._zoom=0,this._tileZoom=ci(this._zoom),this._scale=u.ac(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Io,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(e,r,a){this._latRange=e.latRange,this._lngRange=e.lngRange,this._width=e.width,this._height=e.height,this._center=e.center,this._elevation=e.elevation,this._minElevationForCurrentTile=e.minElevationForCurrentTile,this._zoom=e.zoom,this._tileZoom=ci(this._zoom),this._scale=u.ac(this._zoom),this._bearingInRadians=e.bearingInRadians,this._fovInRadians=e.fovInRadians,this._pitchInRadians=e.pitchInRadians,this._rollInRadians=e.rollInRadians,this._unmodified=e.unmodified,this._edgeInsets=new Io(e.padding.top,e.padding.bottom,e.padding.left,e.padding.right),this._minZoom=e.minZoom,this._maxZoom=e.maxZoom,this._minPitch=e.minPitch,this._maxPitch=e.maxPitch,this._renderWorldCopies=e.renderWorldCopies,this._cameraToCenterDistance=e.cameraToCenterDistance,this._nearZ=e.nearZ,this._farZ=e.farZ,this._autoCalculateNearFarZ=!a&&e.autoCalculateNearFarZ,r&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(e){this._minElevationForCurrentTile=e}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(e){this._minZoom!==e&&(this._minZoom=e,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(e){this._minPitch!==e&&(this._minPitch=e,this.setPitch(Math.max(this.pitch,e)))}get maxPitch(){return this._maxPitch}setMaxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.setPitch(Math.min(this.pitch,e)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(e){e===void 0?e=!0:e===null&&(e=!1),this._renderWorldCopies=e}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new u.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(e){const r=u.aL(e,-180,180)*Math.PI/180;var a,d,y,w,E,A,O,N,W;this._bearingInRadians!==r&&(this._unmodified=!1,this._bearingInRadians=r,this._calcMatrices(),this._rotationMatrix=Y(),a=this._rotationMatrix,y=-this._bearingInRadians,w=(d=this._rotationMatrix)[0],E=d[1],A=d[2],O=d[3],N=Math.sin(y),W=Math.cos(y),a[0]=w*W+A*N,a[1]=E*W+O*N,a[2]=w*-N+A*W,a[3]=E*-N+O*W)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(e){const r=u.ae(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==r&&(this._unmodified=!1,this._pitchInRadians=r,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(e){const r=e/180*Math.PI;this._rollInRadians!==r&&(this._unmodified=!1,this._rollInRadians=r,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return u.aM(this._fovInRadians)}setFov(e){e=u.ae(e,.1,150),this.fov!==e&&(this._unmodified=!1,this._fovInRadians=u.ab(e),this._calcMatrices())}get zoom(){return this._zoom}setZoom(e){const r=this.getConstrained(this._center,e).zoom;this._zoom!==r&&(this._unmodified=!1,this._zoom=r,this._tileZoom=Math.max(0,Math.floor(r)),this._scale=u.ac(r),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(e){e!==this._elevation&&(this._elevation=e,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(e,r){this._autoCalculateNearFarZ=!1,this._nearZ=e,this._farZ=r,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,r,a){this._unmodified=!1,this._edgeInsets.interpolate(e,r,a),this._constrain(),this._calcMatrices()}resize(e,r,a=!0){this._width=e,this._height=r,a&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new br([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(e){e?(this._lngRange=[e.getWest(),e.getEast()],this._latRange=[e.getSouth(),e.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-85.051129,u.af])}getConstrained(e,r){return this._callbacks.getConstrained(e,r)}getCameraQueryGeometry(e,r){if(r.length===1)return[r[0],e];{let a=e.x,d=e.y,y=e.x,w=e.y;for(const E of r)a=Math.min(a,E.x),d=Math.min(d,E.y),y=Math.max(y,E.x),w=Math.max(w,E.y);return[new u.P(a,d),new u.P(y,d),new u.P(y,w),new u.P(a,w),new u.P(a,d)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const e=this._unmodified,{center:r,zoom:a}=this.getConstrained(this.center,this.zoom);this.setCenter(r),this.setZoom(a),this._unmodified=e,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let e=u.ad(new Float64Array(16));u.M(e,e,[this._width/2,-this._height/2,1]),u.L(e,e,[1,-1,0]),this._clipSpaceToPixelsMatrix=e,e=u.ad(new Float64Array(16)),u.M(e,e,[1,-1,1]),u.L(e,e,[-1,-1,0]),u.M(e,e,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=e,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(e,r,a,d){const y=a!==void 0?a:this.bearing,w=d=d!==void 0?d:this.pitch,E=u.$.fromLngLat(e,r),A=-Math.cos(u.ab(w)),O=Math.sin(u.ab(w)),N=O*Math.sin(u.ab(y)),W=-O*Math.cos(u.ab(y));let G=this.elevation;const Q=r-G;let ie;A*Q>=0||Math.abs(A)<.1?(ie=1e4,G=r+ie*A):ie=-Q/A;let be,xe,Se=u.aN(1,E.y),Ae=0;do{if(Ae+=1,Ae>10)break;xe=ie/Se,be=new u.$(E.x+N*xe,E.y+W*xe),Se=1/be.meterInMercatorCoordinateUnits()}while(Math.abs(ie-xe*Se)>1e-12);return{center:be.toLngLat(),elevation:G,zoom:u.ah(this.height/2/Math.tan(this.fovInRadians/2)/xe/this.tileSize)}}recalculateZoomAndCenter(e){if(this.elevation-e==0)return;const r=u.ag(1,this.center.lat)*this.worldSize,a=this.cameraToCenterDistance/r,d=u.$.fromLngLat(this.center,this.elevation),y=le(this.center,this.elevation,this.pitch,this.bearing,a);this._elevation=e;const w=this.calculateCenterFromCameraLngLatAlt(y.toLngLat(),u.aN(y.z,d.y),this.bearing,this.pitch);this._elevation=w.elevation,this._center=w.center,this.setZoom(w.zoom)}getCameraPoint(){const e=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new u.P(e*Math.sin(this.rollInRadians),e*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const e=u.ag(1,this.center.lat)*this.worldSize;return le(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/e).toLngLat()}getMercatorTileCoordinates(e){if(!e)return[0,0,1,1];const r=e.canonical.z>=0?1<<e.canonical.z:Math.pow(2,e.canonical.z);return[e.canonical.x/r,e.canonical.y/r,1/r/u.Z,1/r/u.Z]}}class On{constructor(e,r){this.min=e,this.max=r,this.center=u.aO([],u.aP([],this.min,this.max),.5)}quadrant(e){const r=[e%2==0,e<2],a=u.aQ(this.min),d=u.aQ(this.max);for(let y=0;y<r.length;y++)a[y]=r[y]?this.min[y]:this.center[y],d[y]=r[y]?this.center[y]:this.max[y];return d[2]=this.max[2],new On(a,d)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}intersectsFrustum(e){let r=!0;for(let a=0;a<e.planes.length;a++){const d=this.intersectsPlane(e.planes[a]);if(d===0)return 0;d===1&&(r=!1)}return r?2:e.aabb.min[0]>this.max[0]||e.aabb.min[1]>this.max[1]||e.aabb.min[2]>this.max[2]||e.aabb.max[0]<this.min[0]||e.aabb.max[1]<this.min[1]||e.aabb.max[2]<this.min[2]?0:1}intersectsPlane(e){let r=e[3],a=e[3];for(let d=0;d<3;d++)e[d]>0?(r+=e[d]*this.min[d],a+=e[d]*this.max[d]):(a+=e[d]*this.min[d],r+=e[d]*this.max[d]);return r>=0?2:a<0?0:1}}class Ei{distanceToTile2d(e,r,a,d){const y=d.distanceX([e,r]),w=d.distanceY([e,r]);return Math.hypot(y,w)}getWrap(e,r,a){return a}getTileAABB(e,r,a,d){var y,w;let E=a,A=a;if(d.terrain){const N=new u.Y(e.z,r,e.z,e.x,e.y),W=d.terrain.getMinMaxElevation(N);E=(y=W.minElevation)!==null&&y!==void 0?y:a,A=(w=W.maxElevation)!==null&&w!==void 0?w:a}const O=1<<e.z;return new On([r+e.x/O,e.y/O,E],[r+(e.x+1)/O,(e.y+1)/O,A])}allowVariableZoom(e,r){const a=e.fov*(Math.abs(Math.cos(e.rollInRadians))*e.height+Math.abs(Math.sin(e.rollInRadians))*e.width)/e.height,d=u.ae(78.5-a/2,0,60);return!!r.terrain||e.pitch>d}allowWorldCopies(){return!0}recalculateCache(){}}class Fn{constructor(e,r,a){this.points=e,this.planes=r,this.aabb=a}static fromInvProjectionMatrix(e,r=1,a=0){const d=Math.pow(2,a),y=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(O=>{const N=1/(O=u.at([],O,e))[3]/r*d;return u.aR(O,O,[N,N,1/O[3],N])}),w=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(O=>{const N=u.aS([],y[O[0]],y[O[1]]),W=u.aS([],y[O[2]],y[O[1]]),G=u.aT([],u.aU([],N,W)),Q=-u.aV(G,y[O[1]]);return G.concat(Q)}),E=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],A=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const O of y)for(let N=0;N<3;N++)E[N]=Math.min(E[N],O[N]),A[N]=Math.max(A[N],O[N]);return new Fn(y,w,new On(E,A))}}class gu{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(e){this._helper.setMinZoom(e)}setMaxZoom(e){this._helper.setMaxZoom(e)}setMinPitch(e){this._helper.setMinPitch(e)}setMaxPitch(e){this._helper.setMaxPitch(e)}setRenderWorldCopies(e){this._helper.setRenderWorldCopies(e)}setBearing(e){this._helper.setBearing(e)}setPitch(e){this._helper.setPitch(e)}setRoll(e){this._helper.setRoll(e)}setFov(e){this._helper.setFov(e)}setZoom(e){this._helper.setZoom(e)}setCenter(e){this._helper.setCenter(e)}setElevation(e){this._helper.setElevation(e)}setMinElevationForCurrentTile(e){this._helper.setMinElevationForCurrentTile(e)}setPadding(e){this._helper.setPadding(e)}interpolatePadding(e,r,a){return this._helper.interpolatePadding(e,r,a)}isPaddingEqual(e){return this._helper.isPaddingEqual(e)}resize(e,r,a=!0){this._helper.resize(e,r,a)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(e){this._helper.setMaxBounds(e)}overrideNearFarZ(e,r){this._helper.overrideNearFarZ(e,r)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(e){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),e)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(e,r){}constructor(e,r,a,d,y){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new hi({calcMatrices:()=>{this._calcMatrices()},getConstrained:(w,E)=>this.getConstrained(w,E)},e,r,a,d,y),this._coveringTilesDetailsProvider=new Ei}clone(){const e=new gu;return e.apply(this),e}apply(e,r,a){this._helper.apply(e,r,a)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(e){const r=[new u.aW(0,e)];if(this._helper._renderWorldCopies){const a=this.screenPointToMercatorCoordinate(new u.P(0,0)),d=this.screenPointToMercatorCoordinate(new u.P(this._helper._width,0)),y=this.screenPointToMercatorCoordinate(new u.P(this._helper._width,this._helper._height)),w=this.screenPointToMercatorCoordinate(new u.P(0,this._helper._height)),E=Math.floor(Math.min(a.x,d.x,y.x,w.x)),A=Math.floor(Math.max(a.x,d.x,y.x,w.x)),O=1;for(let N=E-O;N<=A+O;N++)N!==0&&r.push(new u.aW(N,e))}return r}getCameraFrustum(){return Fn.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(e){const r=this.screenPointToLocation(this.centerPoint,e),a=e?e.getElevationForLngLatZoom(r,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(a)}setLocationAtPoint(e,r){const a=u.ag(this.elevation,this.center.lat),d=this.screenPointToMercatorCoordinateAtZ(r,a),y=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,a),w=u.$.fromLngLat(e),E=new u.$(w.x-(d.x-y.x),w.y-(d.y-y.y));this.setCenter(E==null?void 0:E.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(e,r){return r?this.coordinatePoint(u.$.fromLngLat(e),r.getElevationForLngLatZoom(e,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(u.$.fromLngLat(e))}screenPointToLocation(e,r){var a;return(a=this.screenPointToMercatorCoordinate(e,r))===null||a===void 0?void 0:a.toLngLat()}screenPointToMercatorCoordinate(e,r){if(r){const a=r.pointCoordinate(e);if(a!=null)return a}return this.screenPointToMercatorCoordinateAtZ(e)}screenPointToMercatorCoordinateAtZ(e,r){const a=r||0,d=[e.x,e.y,0,1],y=[e.x,e.y,1,1];u.at(d,d,this._pixelMatrixInverse),u.at(y,y,this._pixelMatrixInverse);const w=d[3],E=y[3],A=d[1]/w,O=y[1]/E,N=d[2]/w,W=y[2]/E,G=N===W?0:(a-N)/(W-N);return new u.$(u.B.number(d[0]/w,y[0]/E,G)/this.worldSize,u.B.number(A,O,G)/this.worldSize,a)}coordinatePoint(e,r=0,a=this._pixelMatrix){const d=[e.x*this.worldSize,e.y*this.worldSize,r,1];return u.at(d,d,a),new u.P(d[0]/d[3],d[1]/d[3])}getBounds(){const e=Math.max(0,this._helper._height/2-tt(this));return new br().extend(this.screenPointToLocation(new u.P(0,e))).extend(this.screenPointToLocation(new u.P(this._helper._width,e))).extend(this.screenPointToLocation(new u.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new u.P(0,this._helper._height)))}isPointOnMapSurface(e,r){return r?r.pointCoordinate(e)!=null:e.y>this.height/2-tt(this)}calculatePosMatrix(e,r=!1,a){var d;const y=(d=e.key)!==null&&d!==void 0?d:u.aX(e.wrap,e.canonical.z,e.canonical.z,e.canonical.x,e.canonical.y),w=r?this._alignedPosMatrixCache:this._posMatrixCache;if(w.has(y)){const O=w.get(y);return a?O.f32:O.f64}const E=ae(e,this.worldSize);u.N(E,r?this._alignedProjMatrix:this._viewProjMatrix,E);const A={f64:E,f32:new Float32Array(E)};return w.set(y,A),a?A.f32:A.f64}calculateFogMatrix(e){const r=e.key,a=this._fogMatrixCacheF32;if(a.has(r))return a.get(r);const d=ae(e,this.worldSize);return u.N(d,this._fogMatrix,d),a.set(r,new Float32Array(d)),a.get(r)}getConstrained(e,r){r=u.ae(+r,this.minZoom,this.maxZoom);const a={center:new u.Q(e.lng,e.lat),zoom:r};let d=this._helper._lngRange;this._helper._renderWorldCopies||d!==null||(d=[-179.9999999999,180-1e-10]);const y=this.tileSize*u.ac(a.zoom);let w=0,E=y,A=0,O=y,N=0,W=0;const{x:G,y:Q}=this.size;if(this._helper._latRange){const De=this._helper._latRange;w=u.S(De[1])*y,E=u.S(De[0])*y,E-w<Q&&(N=Q/(E-w))}d&&(A=u.aL(u.U(d[0])*y,0,y),O=u.aL(u.U(d[1])*y,0,y),O<A&&(O+=y),O-A<G&&(W=G/(O-A)));const{x:ie,y:be}=oi(y,e);let xe,Se;const Ae=Math.max(W||0,N||0);if(Ae){const De=new u.P(W?(O+A)/2:ie,N?(E+w)/2:be);return a.center=go(y,De).wrap(),a.zoom+=u.ah(Ae),a}if(this._helper._latRange){const De=Q/2;be-De<w&&(Se=w+De),be+De>E&&(Se=E-De)}if(d){const De=(A+O)/2;let ke=ie;this._helper._renderWorldCopies&&(ke=u.aL(ie,De-y/2,De+y/2));const Oe=G/2;ke-Oe<A&&(xe=A+Oe),ke+Oe>O&&(xe=O-Oe)}if(xe!==void 0||Se!==void 0){const De=new u.P(xe??ie,Se??be);a.center=go(y,De).wrap()}return a}calculateCenterFromCameraLngLatAlt(e,r,a,d){return this._helper.calculateCenterFromCameraLngLatAlt(e,r,a,d)}_calculateNearFarZIfNeeded(e,r,a){if(!this._helper.autoCalculateNearFarZ)return;const d=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),y=e-d*this._helper._pixelPerMeter/Math.cos(r),w=d<0?y:e,E=Math.PI/2+this.pitchInRadians,A=u.ab(this.fov)*(Math.abs(Math.cos(u.ab(this.roll)))*this.height+Math.abs(Math.sin(u.ab(this.roll)))*this.width)/this.height*(.5+a.y/this.height),O=Math.sin(A)*w/Math.sin(u.ae(Math.PI-E-A,.01,Math.PI-.01)),N=tt(this),W=Math.atan(N/this._helper.cameraToCenterDistance),G=u.ab(.75),Q=W>G?2*W*(.5+a.y/(2*N)):G,ie=Math.sin(Q)*w/Math.sin(u.ae(Math.PI-E-Q,.01,Math.PI-.01)),be=Math.min(O,ie);this._helper._farZ=1.01*(Math.cos(Math.PI/2-r)*be+w),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const e=this.centerOffset,r=oi(this.worldSize,this.center),a=r.x,d=r.y;this._helper._pixelPerMeter=u.ag(1,this.center.lat)*this.worldSize;const y=u.ab(Math.min(this.pitch,ti)),w=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(y));let E;this._calculateNearFarZIfNeeded(w,y,e),E=new Float64Array(16),u.aY(E,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),u.an(this._invProjMatrix,E),E[8]=2*-e.x/this._helper._width,E[9]=2*e.y/this._helper._height,this._projectionMatrix=u.aZ(E),u.M(E,E,[1,-1,1]),u.L(E,E,[0,0,-this._helper.cameraToCenterDistance]),u.a_(E,E,-this.rollInRadians),u.a$(E,E,this.pitchInRadians),u.a_(E,E,-this.bearingInRadians),u.L(E,E,[-a,-d,0]),this._mercatorMatrix=u.M([],E,[this.worldSize,this.worldSize,this.worldSize]),u.M(E,E,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=u.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,E),u.L(E,E,[0,0,-this.elevation]),this._viewProjMatrix=E,this._invViewProjMatrix=u.an([],E);const A=[0,0,-1,1];u.at(A,A,this._invViewProjMatrix),this._cameraPosition=[A[0]/A[3],A[1]/A[3],A[2]/A[3]],this._fogMatrix=new Float64Array(16),u.aY(this._fogMatrix,this.fovInRadians,this.width/this.height,w,this._helper._farZ),this._fogMatrix[8]=2*-e.x/this.width,this._fogMatrix[9]=2*e.y/this.height,u.M(this._fogMatrix,this._fogMatrix,[1,-1,1]),u.L(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),u.a_(this._fogMatrix,this._fogMatrix,-this.rollInRadians),u.a$(this._fogMatrix,this._fogMatrix,this.pitchInRadians),u.a_(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),u.L(this._fogMatrix,this._fogMatrix,[-a,-d,0]),u.M(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),u.L(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=u.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,E);const O=this._helper._width%2/2,N=this._helper._height%2/2,W=Math.cos(this.bearingInRadians),G=Math.sin(-this.bearingInRadians),Q=a-Math.round(a)+W*O+G*N,ie=d-Math.round(d)+W*N+G*O,be=new Float64Array(E);if(u.L(be,be,[Q>.5?Q-1:Q,ie>.5?ie-1:ie,0]),this._alignedProjMatrix=be,E=u.an(new Float64Array(16),this._pixelMatrix),!E)throw new Error("failed to invert matrix");this._pixelMatrixInverse=E,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const e=this.screenPointToMercatorCoordinate(new u.P(0,0)),r=[e.x*this.worldSize,e.y*this.worldSize,0,1];return u.at(r,r,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const e=u.ag(1,this.center.lat)*this.worldSize;return le(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/e).toLngLat()}lngLatToCameraDepth(e,r){const a=u.$.fromLngLat(e),d=[a.x*this.worldSize,a.y*this.worldSize,r,1];return u.at(d,d,this._viewProjMatrix),d[2]/d[3]}getProjectionData(e){const{overscaledTileID:r,aligned:a,applyTerrainMatrix:d}=e,y=this._helper.getMercatorTileCoordinates(r),w=r?this.calculatePosMatrix(r,a,!0):null;let E;return E=r&&r.terrainRttPosMatrix32f&&d?r.terrainRttPosMatrix32f:w||u.b0(),{mainMatrix:E,tileMercatorCoords:y,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:E}}isLocationOccluded(e){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(e,r,a){return 1}transformLightDirection(e){return u.aQ(e)}getRayDirectionFromPixel(e){throw new Error("Not implemented.")}projectTileCoordinates(e,r,a,d){const y=this.calculatePosMatrix(a);let w;d?(w=[e,r,d(e,r),1],u.at(w,w,y)):(w=[e,r,0,1],Da(w,w,y));const E=w[3];return{point:new u.P(w[0]/E,w[1]/E),signedDistanceFromCamera:E,isOccluded:!1}}populateCache(e){for(const r of e)this.calculatePosMatrix(r)}getMatrixForModel(e,r){const a=u.$.fromLngLat(e,r),d=a.meterInMercatorCoordinateUnits(),y=u.b1();return u.L(y,y,[a.x,a.y,a.z]),u.a_(y,y,Math.PI),u.a$(y,y,Math.PI/2),u.M(y,y,[-d,d,d]),y}getProjectionDataForCustomLayer(e=!0){const r=new u.Y(0,0,0,0,0),a=this.getProjectionData({overscaledTileID:r,applyGlobeMatrix:e}),d=ae(r,this.worldSize);u.N(d,this._viewProjMatrix,d),a.tileMercatorCoords=[0,0,1,1];const y=[u.Z,u.Z,this.worldSize/this._helper.pixelsPerMeter],w=u.b2();return u.M(w,d,y),a.fallbackMatrix=w,a.mainMatrix=w,a}getFastPathSimpleProjectionMatrix(e){return this.calculatePosMatrix(e)}}function Fo(){u.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function no(g){if(g.useSlerp)if(g.k<1){const e=u.b3(g.startEulerAngles.roll,g.startEulerAngles.pitch,g.startEulerAngles.bearing),r=u.b3(g.endEulerAngles.roll,g.endEulerAngles.pitch,g.endEulerAngles.bearing),a=new Float64Array(4);u.b4(a,e,r,g.k);const d=u.b5(a);g.tr.setRoll(d.roll),g.tr.setPitch(d.pitch),g.tr.setBearing(d.bearing)}else g.tr.setRoll(g.endEulerAngles.roll),g.tr.setPitch(g.endEulerAngles.pitch),g.tr.setBearing(g.endEulerAngles.bearing);else g.tr.setRoll(u.B.number(g.startEulerAngles.roll,g.endEulerAngles.roll,g.k)),g.tr.setPitch(u.B.number(g.startEulerAngles.pitch,g.endEulerAngles.pitch,g.k)),g.tr.setBearing(u.B.number(g.startEulerAngles.bearing,g.endEulerAngles.bearing,g.k))}function ls(g,e,r,a,d){const y=d.padding,w=oi(d.worldSize,r.getNorthWest()),E=oi(d.worldSize,r.getNorthEast()),A=oi(d.worldSize,r.getSouthEast()),O=oi(d.worldSize,r.getSouthWest()),N=u.ab(-a),W=w.rotate(N),G=E.rotate(N),Q=A.rotate(N),ie=O.rotate(N),be=new u.P(Math.max(W.x,G.x,ie.x,Q.x),Math.max(W.y,G.y,ie.y,Q.y)),xe=new u.P(Math.min(W.x,G.x,ie.x,Q.x),Math.min(W.y,G.y,ie.y,Q.y)),Se=be.sub(xe),Ae=(d.width-(y.left+y.right+e.left+e.right))/Se.x,De=(d.height-(y.top+y.bottom+e.top+e.bottom))/Se.y;if(De<0||Ae<0)return void Fo();const ke=Math.min(u.ah(d.scale*Math.min(Ae,De)),g.maxZoom),Oe=u.P.convert(g.offset),$e=new u.P((e.left-e.right)/2,(e.top-e.bottom)/2).rotate(u.ab(a)),Ue=Oe.add($e).mult(d.scale/u.ac(ke));return{center:go(d.worldSize,w.add(A).div(2).sub(Ue)),zoom:ke,bearing:a}}class us{get useGlobeControls(){return!1}handlePanInertia(e,r){return{easingOffset:e,easingCenter:r.center}}handleMapControlsRollPitchBearingZoom(e,r){e.bearingDelta&&r.setBearing(r.bearing+e.bearingDelta),e.pitchDelta&&r.setPitch(r.pitch+e.pitchDelta),e.rollDelta&&r.setRoll(r.roll+e.rollDelta),e.zoomDelta&&r.setZoom(r.zoom+e.zoomDelta)}handleMapControlsPan(e,r,a){e.around.distSqr(r.centerPoint)<.01||r.setLocationAtPoint(a,e.around)}cameraForBoxAndBearing(e,r,a,d,y){return ls(e,r,a,d,y)}handleJumpToCenterZoom(e,r){e.zoom!==(r.zoom!==void 0?+r.zoom:e.zoom)&&e.setZoom(+r.zoom),r.center!==void 0&&e.setCenter(u.Q.convert(r.center))}handleEaseTo(e,r){const a=e.zoom,d=e.padding,y={roll:e.roll,pitch:e.pitch,bearing:e.bearing},w={roll:r.roll===void 0?e.roll:r.roll,pitch:r.pitch===void 0?e.pitch:r.pitch,bearing:r.bearing===void 0?e.bearing:r.bearing},E=r.zoom!==void 0,A=!e.isPaddingEqual(r.padding);let O=!1;const N=E?+r.zoom:e.zoom;let W=e.centerPoint.add(r.offsetAsPoint);const G=e.screenPointToLocation(W),{center:Q,zoom:ie}=e.getConstrained(u.Q.convert(r.center||G),N??a);Mo(e,Q);const be=oi(e.worldSize,G),xe=oi(e.worldSize,Q).sub(be),Se=u.ac(ie-a);return O=ie!==a,{easeFunc:Ae=>{if(O&&e.setZoom(u.B.number(a,ie,Ae)),u.b6(y,w)||no({startEulerAngles:y,endEulerAngles:w,tr:e,k:Ae,useSlerp:y.roll!=w.roll}),A&&(e.interpolatePadding(d,r.padding,Ae),W=e.centerPoint.add(r.offsetAsPoint)),r.around)e.setLocationAtPoint(r.around,r.aroundPoint);else{const De=u.ac(e.zoom-a),ke=ie>a?Math.min(2,Se):Math.max(.5,Se),Oe=Math.pow(ke,1-Ae),$e=go(e.worldSize,be.add(xe.mult(Ae*Oe)).mult(De));e.setLocationAtPoint(e.renderWorldCopies?$e.wrap():$e,W)}},isZooming:O,elevationCenter:Q}}handleFlyTo(e,r){const a=r.zoom!==void 0,d=e.zoom,y=e.getConstrained(u.Q.convert(r.center||r.locationAtOffset),a?+r.zoom:d),w=y.center,E=y.zoom;Mo(e,w);const A=oi(e.worldSize,r.locationAtOffset),O=oi(e.worldSize,w).sub(A),N=O.mag(),W=u.ac(E-d);let G;if(r.minZoom!==void 0){const Q=Math.min(+r.minZoom,d,E),ie=e.getConstrained(w,Q).zoom;G=u.ac(ie-d)}return{easeFunc:(Q,ie,be,xe)=>{e.setZoom(Q===1?E:d+u.ah(ie));const Se=Q===1?w:go(e.worldSize,A.add(O.mult(be)).mult(ie));e.setLocationAtPoint(e.renderWorldCopies?Se.wrap():Se,xe)},scaleOfZoom:W,targetCenter:w,scaleOfMinZoom:G,pixelPathLength:N}}}class Dn{constructor(e,r,a){this.blendFunction=e,this.blendColor=r,this.mask=a}}Dn.Replace=[1,0],Dn.disabled=new Dn(Dn.Replace,u.b7.transparent,[!1,!1,!1,!1]),Dn.unblended=new Dn(Dn.Replace,u.b7.transparent,[!0,!0,!0,!0]),Dn.alphaBlended=new Dn([1,771],u.b7.transparent,[!0,!0,!0,!0]);const di=2305;class Dr{constructor(e,r,a){this.enable=e,this.mode=r,this.frontFace=a}}Dr.disabled=new Dr(!1,1029,di),Dr.backCCW=new Dr(!0,1029,di),Dr.frontCCW=new Dr(!0,1028,di);class yr{constructor(e,r,a){this.func=e,this.mask=r,this.range=a}}yr.ReadOnly=!1,yr.ReadWrite=!0,yr.disabled=new yr(519,yr.ReadOnly,[0,1]);const En=7680;class Xr{constructor(e,r,a,d,y,w){this.test=e,this.ref=r,this.mask=a,this.fail=d,this.depthFail=y,this.pass=w}}Xr.disabled=new Xr({func:519,mask:0},0,0,En,En,En);const cs=new WeakMap;function io(g){var e;if(cs.has(g))return cs.get(g);{const r=(e=g.getParameter(g.VERSION))===null||e===void 0?void 0:e.startsWith("WebGL 2.0");return cs.set(g,r),r}}class nl{get awaitingQuery(){return!!this._readbackQueue}constructor(e){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=e;const r=e.context,a=r.gl;this._texFormat=a.RGBA,this._texType=a.UNSIGNED_BYTE;const d=new u.aI;d.emplaceBack(-1,-1),d.emplaceBack(2,-1),d.emplaceBack(-1,2);const y=new u.aK;y.emplaceBack(0,1,2),this._fullscreenTriangle=new $n(r.createVertexBuffer(d,_i.members),r.createIndexBuffer(y),u.aJ.simpleSegment(0,0,d.length,y.length)),this._resultBuffer=new Uint8Array(4),r.activeTexture.set(a.TEXTURE1);const w=a.createTexture();a.bindTexture(a.TEXTURE_2D,w),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST),a.texImage2D(a.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=r.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(w),io(a)&&(this._pbo=a.createBuffer(),a.bindBuffer(a.PIXEL_PACK_BUFFER,this._pbo),a.bufferData(a.PIXEL_PACK_BUFFER,4,a.STREAM_READ),a.bindBuffer(a.PIXEL_PACK_BUFFER,null))}destroy(){const e=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),e.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(e,r){const a=this._updateCount;return this._readbackQueue?a>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():a>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(e,r),this._updateCount++,this._measuredError}_bindFramebuffer(){const e=this._cachedRenderContext.context,r=e.gl;e.activeTexture.set(r.TEXTURE1),r.bindTexture(r.TEXTURE_2D,this._fbo.colorAttachment.get()),e.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(e,r){const a=this._cachedRenderContext.context,d=a.gl;if(this._bindFramebuffer(),a.viewport.set([0,0,this._texWidth,this._texHeight]),a.clear({color:u.b7.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(a,d.TRIANGLES,yr.disabled,Xr.disabled,Dn.unblended,Dr.disabled,((y,w)=>({u_input:y,u_output_expected:w}))(e,r),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&io(d)){d.bindBuffer(d.PIXEL_PACK_BUFFER,this._pbo),d.readBuffer(d.COLOR_ATTACHMENT0),d.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),d.bindBuffer(d.PIXEL_PACK_BUFFER,null);const y=d.fenceSync(d.SYNC_GPU_COMMANDS_COMPLETE,0);d.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:y}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const e=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&io(e)){const r=e.clientWaitSync(this._readbackQueue.sync,0,0);if(r===e.WAIT_FAILED)return u.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(r===e.TIMEOUT_EXPIRED)return;e.bindBuffer(e.PIXEL_PACK_BUFFER,this._pbo),e.getBufferSubData(e.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),e.bindBuffer(e.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),e.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=nl._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(e){let r=0;return r+=e[0]/256,r+=e[1]/65536,r+=e[2]/16777216,e[3]<127&&(r=-r),r/128}}const yu=u.Z/128;function Ba(g,e){const r=g.granularity!==void 0?Math.max(g.granularity,1):1,a=r+(g.generateBorders?2:0),d=r+(g.extendToNorthPole||g.generateBorders?1:0)+(g.extendToSouthPole||g.generateBorders?1:0),y=a+1,w=d+1,E=g.generateBorders?-1:0,A=g.generateBorders||g.extendToNorthPole?-1:0,O=r+(g.generateBorders?1:0),N=r+(g.generateBorders||g.extendToSouthPole?1:0),W=y*w,G=a*d*6,Q=y*w>65536;if(Q&&e==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const ie=Q||e==="32bit",be=new Int16Array(2*W);let xe=0;for(let De=A;De<=N;De++)for(let ke=E;ke<=O;ke++){let Oe=ke/r*u.Z;ke===-1&&(Oe=-64),ke===r+1&&(Oe=u.Z+yu);let $e=De/r*u.Z;De===-1&&($e=g.extendToNorthPole?u.b9:-64),De===r+1&&($e=g.extendToSouthPole?u.ba:u.Z+yu),be[xe++]=Oe,be[xe++]=$e}const Se=ie?new Uint32Array(G):new Uint16Array(G);let Ae=0;for(let De=0;De<d;De++)for(let ke=0;ke<a;ke++){const Oe=ke+1+De*y,$e=ke+(De+1)*y,Ue=ke+1+(De+1)*y;Se[Ae++]=ke+De*y,Se[Ae++]=$e,Se[Ae++]=Oe,Se[Ae++]=Oe,Se[Ae++]=$e,Se[Ae++]=Ue}return{vertices:be.buffer.slice(0),indices:Se.buffer.slice(0),uses32bitIndices:ie}}const va=new u.aH({fill:new u.bb(128,2),line:new u.bb(512,0),tile:new u.bb(128,32),stencil:new u.bb(128,1),circle:3});class Jl{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return Ar.projectionGlobe}get vertexShaderPreludeCode(){return Ar.projectionMercator.vertexSource}get subdivisionGranularity(){return va}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(e){this._errorMeasurement||(this._errorMeasurement=new nl(e));const r=u.S(this._errorQueryLatitudeDegrees),a=2*Math.atan(Math.exp(Math.PI-r*Math.PI*2))-.5*Math.PI,d=this._errorMeasurement.updateErrorLoop(r,a),y=Te.now();d!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=d,this._errorMeasurementLastChangeTime=y);const w=Math.min(Math.max((y-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=u.bc(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,u.bd(w))}_getMeshKey(e){return`${e.granularity.toString(36)}_${e.generateBorders?"b":""}${e.extendToNorthPole?"n":""}${e.extendToSouthPole?"s":""}`}getMeshFromTileID(e,r,a,d,y){const w=(y==="stencil"?va.stencil:va.tile).getGranularityForZoomLevel(r.z);return this._getMesh(e,{granularity:w,generateBorders:a,extendToNorthPole:r.y===0&&d,extendToSouthPole:r.y===(1<<r.z)-1&&d})}_getMesh(e,r){const a=this._getMeshKey(r);if(a in this._tileMeshCache)return this._tileMeshCache[a];const d=function(y,w){const E=Ba(w,"16bit"),A=u.aI.deserialize({arrayBuffer:E.vertices,length:E.vertices.byteLength/2/2}),O=u.aK.deserialize({arrayBuffer:E.indices,length:E.indices.byteLength/2/3});return new $n(y.createVertexBuffer(A,_i.members),y.createIndexBuffer(O),u.aJ.simpleSegment(0,0,A.length,O.length))}(e,r);return this._tileMeshCache[a]=d,d}recalculate(e){}hasTransition(){const e=Te.now();let r=!1;return r=r||(e-this._errorMeasurementLastChangeTime)/1e3<.7,r=r||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,r}setErrorQueryLatitudeDegrees(e){this._errorQueryLatitudeDegrees=e}}const fi=new u.r({type:new u.D(u.v.projection.type)});class il extends u.E{constructor(e){super(),this._transitionable=new u.T(fi),this.setProjection(e),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new u.C(0)),this._mercatorProjection=new as,this._verticalPerspectiveProjection=new Jl}get transitionState(){const e=this.properties.get("type");if(typeof e=="string"&&e==="mercator")return 0;if(typeof e=="string"&&e==="vertical-perspective")return 1;if(e instanceof u.be){if(e.from==="vertical-perspective"&&e.to==="mercator")return 1-e.transition;if(e.from==="mercator"&&e.to==="vertical-perspective")return e.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(e){this._mercatorProjection.updateGPUdependent(e),this._verticalPerspectiveProjection.updateGPUdependent(e)}getMeshFromTileID(e,r,a,d,y){return this.currentProjection.getMeshFromTileID(e,r,a,d,y)}setProjection(e){this._transitionable.setValue("type",(e==null?void 0:e.type)||"mercator")}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}setErrorQueryLatitudeDegrees(e){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(e),this._mercatorProjection.setErrorQueryLatitudeDegrees(e)}}function hs(g){const e=Bi(g.worldSize,g.center.lat);return 2*Math.PI*e}function ol(g,e,r,a,d){const y=1/(1<<d),w=e/u.Z*y+a*y,E=u.bg((g/u.Z*y+r*y)*Math.PI*2+Math.PI,2*Math.PI),A=2*Math.atan(Math.exp(Math.PI-w*Math.PI*2))-.5*Math.PI,O=Math.cos(A),N=new Float64Array(3);return N[0]=Math.sin(E)*O,N[1]=Math.sin(A),N[2]=Math.cos(E)*O,N}function vi(g){return function(e,r){const a=Math.cos(r),d=new Float64Array(3);return d[0]=Math.sin(e)*a,d[1]=Math.sin(r),d[2]=Math.cos(e)*a,d}(g.lng*Math.PI/180,g.lat*Math.PI/180)}function Bi(g,e){return g/(2*Math.PI)/Math.cos(e*Math.PI/180)}function Na(g){const e=Math.asin(g[1])/Math.PI*180,r=Math.sqrt(g[0]*g[0]+g[2]*g[2]);if(r>1e-6){const a=g[0]/r,d=Math.acos(g[2]/r),y=(a>0?d:-d)/Math.PI*180;return new u.Q(u.aL(y,-180,180),e)}return new u.Q(0,e)}function Ri(g){return Math.cos(g*Math.PI/180)}function Ii(g,e){const r=Ri(g),a=Ri(e);return u.ah(a/r)}function xa(g,e){const r=g.rotate(e.bearingInRadians),a=e.zoom+Ii(e.center.lat,0),d=u.bc(1/Ri(e.center.lat),1/Ri(Math.min(Math.abs(e.center.lat),60)),u.bf(a,7,3,0,1)),y=360/hs({worldSize:e.worldSize,center:{lat:e.center.lat}});return new u.Q(e.center.lng-r.x*y*d,u.ae(e.center.lat+r.y*y,-85.051129,u.af))}function sl(g){const e=.5*g,r=Math.sin(e),a=Math.cos(e);return Math.log(r+a)-Math.log(a-r)}function Zu(g,e,r,a){const d=g.lat+r*a;if(Math.abs(r)>1){const y=(Math.sign(g.lat+r)!==Math.sign(g.lat)?-Math.abs(g.lat):Math.abs(g.lat))*Math.PI/180,w=Math.abs(g.lat+r)*Math.PI/180,E=sl(y+a*(w-y)),A=sl(y),O=sl(w);return new u.Q(g.lng+e*((E-A)/(O-A)),d)}return new u.Q(g.lng+e*a,d)}class _o{constructor(e){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._aabbFactory=e}recalculateCache(){if(!this._hadAnyChanges)return;const e=this._cachePrevious;this._cachePrevious=this._cache,this._cache=e,this._cache.clear(),this._hadAnyChanges=!1}getTileAABB(e,r,a,d){const y=`${e.z}_${e.x}_${e.y}`,w=this._cache.get(y);if(w)return w;const E=this._cachePrevious.get(y);if(E)return this._cache.set(y,E),E;const A=this._aabbFactory(e,r,a,d);return this._cache.set(y,A),this._hadAnyChanges=!0,A}}function Ni(g,e,r){const a=g-e;return a<0?-a:Math.max(0,a-r)}function zi(g,e,r,a,d){const y=g-r;let w;return w=y<0?Math.min(-y,1+y-d):y>1?Math.min(Math.max(y-d,0),1-y):0,Math.max(w,Ni(e,a,d))}class ds{constructor(){this._aabbCache=new _o(this._computeTileAABB)}recalculateCache(){this._aabbCache.recalculateCache()}distanceToTile2d(e,r,a,d){const y=1<<a.z,w=1/y,E=a.x/y,A=a.y/y;let O=2;return O=Math.min(O,zi(e,r,E,A,w)),O=Math.min(O,zi(e,r,E+.5,-A-w,w)),O=Math.min(O,zi(e,r,E+.5,2-A-w,w)),O}getWrap(e,r,a){const d=1<<r.z,y=1/d,w=r.x/d,E=Ni(e.x,w,y),A=Ni(e.x,w-1,y),O=Ni(e.x,w+1,y),N=Math.min(E,A,O);return N===O?1:N===A?-1:0}allowVariableZoom(e,r){return Ke(e,r)>4}allowWorldCopies(){return!1}getTileAABB(e,r,a,d){return this._aabbCache.getTileAABB(e,r,a,d)}_computeTileAABB(e,r,a,d){if(e.z<=0)return new On([-1,-1,-1],[1,1,1]);if(e.z===1)return new On([e.x===0?-1:0,e.y===0?0:-1,-1],[e.x===0?0:1,e.y===0?1:0,1]);{const y=[ol(0,0,e.x,e.y,e.z),ol(u.Z,0,e.x,e.y,e.z),ol(u.Z,u.Z,e.x,e.y,e.z),ol(0,u.Z,e.x,e.y,e.z)],w=[1,1,1],E=[-1,-1,-1];for(const A of y)for(let O=0;O<3;O++)w[O]=Math.min(w[O],A[O]),E[O]=Math.max(E[O],A[O]);if(e.y===0||e.y===(1<<e.z)-1){const A=[0,e.y===0?1:-1,0];for(let O=0;O<3;O++)w[O]=Math.min(w[O],A[O]),E[O]=Math.max(E[O],A[O])}return new On(w,E)}}}class $a{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(e){this._helper.setMinZoom(e)}setMaxZoom(e){this._helper.setMaxZoom(e)}setMinPitch(e){this._helper.setMinPitch(e)}setMaxPitch(e){this._helper.setMaxPitch(e)}setRenderWorldCopies(e){this._helper.setRenderWorldCopies(e)}setBearing(e){this._helper.setBearing(e)}setPitch(e){this._helper.setPitch(e)}setRoll(e){this._helper.setRoll(e)}setFov(e){this._helper.setFov(e)}setZoom(e){this._helper.setZoom(e)}setCenter(e){this._helper.setCenter(e)}setElevation(e){this._helper.setElevation(e)}setMinElevationForCurrentTile(e){this._helper.setMinElevationForCurrentTile(e)}setPadding(e){this._helper.setPadding(e)}interpolatePadding(e,r,a){return this._helper.interpolatePadding(e,r,a)}isPaddingEqual(e){return this._helper.isPaddingEqual(e)}resize(e,r){this._helper.resize(e,r)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(e){this._helper.setMaxBounds(e)}overrideNearFarZ(e,r){this._helper.overrideNearFarZ(e,r)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(e){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),e)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(e){}constructor(){this._cachedClippingPlane=u.bk(),this._projectionMatrix=u.b1(),this._globeViewProjMatrix32f=u.b0(),this._globeViewProjMatrixNoCorrection=u.b1(),this._globeViewProjMatrixNoCorrectionInverted=u.b1(),this._globeProjMatrixInverted=u.b1(),this._cameraPosition=u.bh(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new hi({calcMatrices:()=>{this._calcMatrices()},getConstrained:(e,r)=>this.getConstrained(e,r)}),this._coveringTilesDetailsProvider=new ds}clone(){const e=new $a;return e.apply(this),e}apply(e,r){this._globeLatitudeErrorCorrectionRadians=r||0,this._helper.apply(e)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const e=u.bh();return e[0]=this._cameraPosition[0],e[1]=this._cameraPosition[1],e[2]=this._cameraPosition[2],e}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(e){const{overscaledTileID:r,applyGlobeMatrix:a}=e,d=this._helper.getMercatorTileCoordinates(r);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:d,clippingPlane:this._cachedClippingPlane,projectionTransition:a?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(e){const r=this.pitchInRadians,a=this.cameraToCenterDistance/e,d=Math.sin(r)*a,y=Math.cos(r)*a+1,w=1/Math.sqrt(d*d+y*y)*1;let E=-d,A=y;const O=Math.sqrt(E*E+A*A);E/=O,A/=O;const N=[0,E,A];u.bl(N,N,[0,0,0],-this.bearingInRadians),u.bm(N,N,[0,0,0],-1*this.center.lat*Math.PI/180),u.bn(N,N,[0,0,0],this.center.lng*Math.PI/180);const W=1/u.bo(N);return u.aO(N,N,W),[...N,-w*W]}isLocationOccluded(e){return!this.isSurfacePointVisible(vi(e))}transformLightDirection(e){const r=this._helper._center.lng*Math.PI/180,a=this._helper._center.lat*Math.PI/180,d=Math.cos(a),y=[Math.sin(r)*d,Math.sin(a),Math.cos(r)*d],w=[y[2],0,-y[0]],E=[0,0,0];u.aU(E,w,y),u.aT(w,w),u.aT(E,E);const A=[0,0,0];return u.aT(A,[w[0]*e[0]+E[0]*e[1]+y[0]*e[2],w[1]*e[0]+E[1]*e[1]+y[1]*e[2],w[2]*e[0]+E[2]*e[1]+y[2]*e[2]]),A}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(e,r,a){const d=function(E,A,O){const N=1/(1<<O.z);return new u.$(E/u.Z*N+O.x*N,A/u.Z*N+O.y*N)}(e,r,a.canonical),y=(w=d.y,[u.bg(d.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-w*Math.PI*2))-.5*Math.PI]);var w;return this.getCircleRadiusCorrection()/Math.cos(y[1])}projectTileCoordinates(e,r,a,d){const y=a.canonical,w=ol(e,r,y.x,y.y,y.z),E=1+(d?d(e,r):0)/u.bu,A=[w[0]*E,w[1]*E,w[2]*E,1];u.at(A,A,this._globeViewProjMatrixNoCorrection);const O=this._cachedClippingPlane,N=O[0]*w[0]+O[1]*w[1]+O[2]*w[2]+O[3]<0;return{point:new u.P(A[0]/A[3],A[1]/A[3]),signedDistanceFromCamera:A[3],isOccluded:N}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const e=Bi(this.worldSize,this.center.lat),r=u.b2(),a=u.b2();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*e),u.aY(r,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const d=this.centerOffset;r[8]=2*-d.x/this._helper._width,r[9]=2*d.y/this._helper._height,this._projectionMatrix=u.aZ(r),this._globeProjMatrixInverted=u.b2(),u.an(this._globeProjMatrixInverted,r),u.L(r,r,[0,0,-this.cameraToCenterDistance]),u.a_(r,r,this.rollInRadians),u.a$(r,r,-this.pitchInRadians),u.a_(r,r,this.bearingInRadians),u.L(r,r,[0,0,-e]);const y=u.bh();y[0]=e,y[1]=e,y[2]=e,u.a$(a,r,this.center.lat*Math.PI/180),u.bp(a,a,-this.center.lng*Math.PI/180),u.M(a,a,y),this._globeViewProjMatrixNoCorrection=a,u.a$(r,r,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),u.bp(r,r,-this.center.lng*Math.PI/180),u.M(r,r,y),this._globeViewProjMatrix32f=new Float32Array(r),this._globeViewProjMatrixNoCorrectionInverted=u.b2(),u.an(this._globeViewProjMatrixNoCorrectionInverted,a);const w=u.bh();this._cameraPosition=u.bh(),this._cameraPosition[2]=this.cameraToCenterDistance/e,u.bl(this._cameraPosition,this._cameraPosition,w,-this.rollInRadians),u.bm(this._cameraPosition,this._cameraPosition,w,this.pitchInRadians),u.bl(this._cameraPosition,this._cameraPosition,w,-this.bearingInRadians),u.aP(this._cameraPosition,this._cameraPosition,[0,0,1]),u.bm(this._cameraPosition,this._cameraPosition,w,-this.center.lat*Math.PI/180),u.bn(this._cameraPosition,this._cameraPosition,w,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(e);const E=u.aZ(this._globeViewProjMatrixNoCorrectionInverted);u.M(E,E,[1,1,-1]),this._cachedFrustum=Fn.fromInvProjectionMatrix(E)}calculateFogMatrix(e){u.w("calculateFogMatrix is not supported on globe projection.");const r=u.b2();return u.ad(r),r}getVisibleUnwrappedCoordinates(e){return[new u.aW(0,e)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(e){e&&u.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(e,r){if(!this._globeViewProjMatrixNoCorrection)return 1;const a=vi(e);u.aO(a,a,1+r/u.bu);const d=u.bk();return u.at(d,[a[0],a[1],a[2],1],this._globeViewProjMatrixNoCorrection),d[2]/d[3]}populateCache(e){}getBounds(){const e=.5*this.width,r=.5*this.height,a=[new u.P(0,0),new u.P(e,0),new u.P(this.width,0),new u.P(this.width,r),new u.P(this.width,this.height),new u.P(e,this.height),new u.P(0,this.height),new u.P(0,r)],d=[];for(const W of a)d.push(this.unprojectScreenPoint(W));let y=0,w=0,E=0,A=0;const O=this.center;for(const W of d){const G=u.bq(O.lng,W.lng),Q=u.bq(O.lat,W.lat);G<w&&(w=G),G>y&&(y=G),Q<A&&(A=Q),Q>E&&(E=Q)}const N=[O.lng+w,O.lat+A,O.lng+y,O.lat+E];return this.isSurfacePointOnScreen([0,1,0])&&(N[3]=90,N[0]=-180,N[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(N[1]=-90,N[0]=-180,N[2]=180),new br(N)}getConstrained(e,r){const a=u.ae(e.lat,-85.051129,u.af),d=u.ae(+r,this.minZoom+Ii(0,a),this.maxZoom);return{center:new u.Q(e.lng,a),zoom:d}}calculateCenterFromCameraLngLatAlt(e,r,a,d){return this._helper.calculateCenterFromCameraLngLatAlt(e,r,a,d)}setLocationAtPoint(e,r){const a=vi(this.unprojectScreenPoint(r)),d=vi(e),y=u.bh();u.br(y);const w=u.bh();u.bn(w,a,y,-this.center.lng*Math.PI/180),u.bm(w,w,y,this.center.lat*Math.PI/180);const E=d[0]*d[0]+d[2]*d[2],A=w[0]*w[0];if(E<A)return;const O=Math.sqrt(E-A),N=-O,W=u.bs(d[0],d[2],w[0],O),G=u.bs(d[0],d[2],w[0],N),Q=u.bh();u.bn(Q,d,y,-W);const ie=u.bs(Q[1],Q[2],w[1],w[2]),be=u.bh();u.bn(be,d,y,-G);const xe=u.bs(be[1],be[2],w[1],w[2]),Se=.5*Math.PI,Ae=ie>=-Se&&ie<=Se,De=xe>=-Se&&xe<=Se;let ke,Oe;if(Ae&&De){const Mt=this.center.lng*Math.PI/180,Qe=this.center.lat*Math.PI/180;u.bv(W,Mt)+u.bv(ie,Qe)<u.bv(G,Mt)+u.bv(xe,Qe)?(ke=W,Oe=ie):(ke=G,Oe=xe)}else if(Ae)ke=W,Oe=ie;else{if(!De)return;ke=G,Oe=xe}const $e=ke/Math.PI*180,Ue=Oe/Math.PI*180,lt=this.center.lat;this.setCenter(new u.Q($e,u.ae(Ue,-90,90))),this.setZoom(this.zoom+Ii(lt,this.center.lat))}locationToScreenPoint(e,r){const a=vi(e);if(r){const d=r.getElevationForLngLatZoom(e,this._helper._tileZoom);u.aO(a,a,1+d/u.bu)}return this._projectSurfacePointToScreen(a)}_projectSurfacePointToScreen(e){const r=u.bk();return u.at(r,[...e,1],this._globeViewProjMatrixNoCorrection),r[0]/=r[3],r[1]/=r[3],new u.P((.5*r[0]+.5)*this.width,(.5*-r[1]+.5)*this.height)}screenPointToMercatorCoordinate(e,r){if(r){const a=r.pointCoordinate(e);if(a)return a}return u.$.fromLngLat(this.unprojectScreenPoint(e))}screenPointToLocation(e,r){var a;return(a=this.screenPointToMercatorCoordinate(e,r))===null||a===void 0?void 0:a.toLngLat()}isPointOnMapSurface(e,r){const a=this._cameraPosition,d=this.getRayDirectionFromPixel(e);return!!this.rayPlanetIntersection(a,d)}getRayDirectionFromPixel(e){const r=u.bk();r[0]=e.x/this.width*2-1,r[1]=-1*(e.y/this.height*2-1),r[2]=1,r[3]=1,u.at(r,r,this._globeViewProjMatrixNoCorrectionInverted),r[0]/=r[3],r[1]/=r[3],r[2]/=r[3];const a=u.bh();a[0]=r[0]-this._cameraPosition[0],a[1]=r[1]-this._cameraPosition[1],a[2]=r[2]-this._cameraPosition[2];const d=u.bh();return u.aT(d,a),d}isSurfacePointVisible(e){const r=this._cachedClippingPlane;return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]+r[3]>=0}isSurfacePointOnScreen(e){if(!this.isSurfacePointVisible(e))return!1;const r=u.bk();return u.at(r,[...e,1],this._globeViewProjMatrixNoCorrection),r[0]/=r[3],r[1]/=r[3],r[2]/=r[3],r[0]>-1&&r[0]<1&&r[1]>-1&&r[1]<1&&r[2]>-1&&r[2]<1}rayPlanetIntersection(e,r){const a=u.aV(e,r),d=u.bh(),y=u.bh();u.aO(y,r,a),u.aS(d,e,y);const w=1-u.aV(d,d);if(w<0)return null;const E=u.aV(e,e)-1,A=-a+(a<0?1:-1)*Math.sqrt(w),O=E/A,N=A;return{tMin:Math.min(O,N),tMax:Math.max(O,N)}}unprojectScreenPoint(e){const r=this._cameraPosition,a=this.getRayDirectionFromPixel(e),d=this.rayPlanetIntersection(r,a);if(d){const N=u.bh();u.aP(N,r,[a[0]*d.tMin,a[1]*d.tMin,a[2]*d.tMin]);const W=u.bh();return u.aT(W,N),Na(W)}const y=this._cachedClippingPlane,w=y[0]*a[0]+y[1]*a[1]+y[2]*a[2],E=-u.bt(y,r)/w,A=u.bh();if(E>0)u.aP(A,r,[a[0]*E,a[1]*E,a[2]*E]);else{const N=u.bh();u.aP(N,r,[2*a[0],2*a[1],2*a[2]]);const W=u.bt(this._cachedClippingPlane,N);u.aS(A,N,[this._cachedClippingPlane[0]*W,this._cachedClippingPlane[1]*W,this._cachedClippingPlane[2]*W])}const O=function(N){const W=u.bh();return W[0]=N[0]*-N[3],W[1]=N[1]*-N[3],W[2]=N[2]*-N[3],{center:W,radius:Math.sqrt(1-N[3]*N[3])}}(y);return Na(function(N,W,G){const Q=u.bh();u.aS(Q,G,N);const ie=u.bh();return u.bi(ie,N,Q,W/u.bj(Q)),ie}(O.center,O.radius,A))}getMatrixForModel(e,r){const a=u.Q.convert(e),d=1/u.bu,y=u.b1();return u.bp(y,y,a.lng/180*Math.PI),u.a$(y,y,-a.lat/180*Math.PI),u.L(y,y,[0,0,1+r/u.bu]),u.a$(y,y,.5*Math.PI),u.M(y,y,[d,d,d]),y}getProjectionDataForCustomLayer(e=!0){const r=this.getProjectionData({overscaledTileID:new u.Y(0,0,0,0,0),applyGlobeMatrix:e});return r.tileMercatorCoords=[0,0,1,1],r}getFastPathSimpleProjectionMatrix(e){}}class Ms{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(e){this._helper.setMinZoom(e)}setMaxZoom(e){this._helper.setMaxZoom(e)}setMinPitch(e){this._helper.setMinPitch(e)}setMaxPitch(e){this._helper.setMaxPitch(e)}setRenderWorldCopies(e){this._helper.setRenderWorldCopies(e)}setBearing(e){this._helper.setBearing(e)}setPitch(e){this._helper.setPitch(e)}setRoll(e){this._helper.setRoll(e)}setFov(e){this._helper.setFov(e)}setZoom(e){this._helper.setZoom(e)}setCenter(e){this._helper.setCenter(e)}setElevation(e){this._helper.setElevation(e)}setMinElevationForCurrentTile(e){this._helper.setMinElevationForCurrentTile(e)}setPadding(e){this._helper.setPadding(e)}interpolatePadding(e,r,a){return this._helper.interpolatePadding(e,r,a)}isPaddingEqual(e){return this._helper.isPaddingEqual(e)}resize(e,r,a=!0){this._helper.resize(e,r,a)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(e){this._helper.setMaxBounds(e)}overrideNearFarZ(e,r){this._helper.overrideNearFarZ(e,r)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(e){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),e)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(e,r){this._globeness=e,this._globeLatitudeErrorCorrectionRadians=r,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().recalculateCache(),this._mercatorTransform.getCoveringTilesDetailsProvider().recalculateCache()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new hi({calcMatrices:()=>{this._calcMatrices()},getConstrained:(e,r)=>this.getConstrained(e,r)}),this._globeness=1,this._mercatorTransform=new gu,this._verticalPerspectiveTransform=new $a}clone(){const e=new Ms;return e._globeness=this._globeness,e._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,e.apply(this),e}apply(e){this._helper.apply(e),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(e){const r=this._mercatorTransform.getProjectionData(e),a=this._verticalPerspectiveTransform.getProjectionData(e);return{mainMatrix:this.isGlobeRendering?a.mainMatrix:r.mainMatrix,clippingPlane:a.clippingPlane,tileMercatorCoords:a.tileMercatorCoords,projectionTransition:e.applyGlobeMatrix?this._globeness:0,fallbackMatrix:r.fallbackMatrix}}isLocationOccluded(e){return this.currentTransform.isLocationOccluded(e)}transformLightDirection(e){return this.currentTransform.transformLightDirection(e)}getPixelScale(){return u.bc(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return u.bc(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(e,r,a){const d=this._mercatorTransform.getPitchedTextCorrection(e,r,a),y=this._verticalPerspectiveTransform.getPitchedTextCorrection(e,r,a);return u.bc(d,y,this._globeness)}projectTileCoordinates(e,r,a,d){return this.currentTransform.projectTileCoordinates(e,r,a,d)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(e){return this.currentTransform.calculateFogMatrix(e)}getVisibleUnwrappedCoordinates(e){return this.currentTransform.getVisibleUnwrappedCoordinates(e)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(e){this._mercatorTransform.recalculateZoomAndCenter(e),this._verticalPerspectiveTransform.recalculateZoomAndCenter(e)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(e,r){return this.currentTransform.lngLatToCameraDepth(e,r)}populateCache(e){this._mercatorTransform.populateCache(e),this._verticalPerspectiveTransform.populateCache(e)}getBounds(){return this.currentTransform.getBounds()}getConstrained(e,r){return this.currentTransform.getConstrained(e,r)}calculateCenterFromCameraLngLatAlt(e,r,a,d){return this._helper.calculateCenterFromCameraLngLatAlt(e,r,a,d)}setLocationAtPoint(e,r){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(e,r),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(e,r),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(e,r){return this.currentTransform.locationToScreenPoint(e,r)}screenPointToMercatorCoordinate(e,r){return this.currentTransform.screenPointToMercatorCoordinate(e,r)}screenPointToLocation(e,r){return this.currentTransform.screenPointToLocation(e,r)}isPointOnMapSurface(e,r){return this.currentTransform.isPointOnMapSurface(e,r)}getRayDirectionFromPixel(e){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(e)}getMatrixForModel(e,r){return this.currentTransform.getMatrixForModel(e,r)}getProjectionDataForCustomLayer(e=!0){const r=this._mercatorTransform.getProjectionDataForCustomLayer(e);if(!this.isGlobeRendering)return r;const a=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(e);return a.fallbackMatrix=r.mainMatrix,a}getFastPathSimpleProjectionMatrix(e){return this.currentTransform.getFastPathSimpleProjectionMatrix(e)}}class ko{get useGlobeControls(){return!0}handlePanInertia(e,r){const a=xa(e,r);return Math.abs(a.lng-r.center.lng)>180&&(a.lng=r.center.lng+179.5*Math.sign(a.lng-r.center.lng)),{easingCenter:a,easingOffset:new u.P(0,0)}}handleMapControlsRollPitchBearingZoom(e,r){const a=e.around,d=r.screenPointToLocation(a);e.bearingDelta&&r.setBearing(r.bearing+e.bearingDelta),e.pitchDelta&&r.setPitch(r.pitch+e.pitchDelta),e.rollDelta&&r.setRoll(r.roll+e.rollDelta);const y=r.zoom;e.zoomDelta&&r.setZoom(r.zoom+e.zoomDelta);const w=r.zoom-y;if(w===0)return;const E=u.bq(r.center.lng,d.lng),A=E/(Math.abs(E/180)+1),O=u.bq(r.center.lat,d.lat),N=r.getRayDirectionFromPixel(a),W=r.cameraPosition,G=-1*u.aV(W,N),Q=u.bh();u.aP(Q,W,[N[0]*G,N[1]*G,N[2]*G]);const ie=u.bo(Q)-1,be=Math.exp(.5*-Math.max(ie-.3,0)),xe=Bi(r.worldSize,r.center.lat)/Math.min(r.width,r.height),Se=u.bf(xe,.9,.5,1,.25),Ae=(1-u.ac(-w))*Math.min(be,Se),De=r.center.lat,ke=r.zoom,Oe=new u.Q(r.center.lng+A*Ae,u.ae(r.center.lat+O*Ae,-85.051129,u.af));r.setLocationAtPoint(d,a);const $e=r.center,Ue=u.bf(Math.abs(E),45,85,0,1),lt=u.bf(xe,.75,.35,0,1),Mt=Math.pow(Math.max(Ue,lt),.25),Qe=u.bq($e.lng,Oe.lng),dt=u.bq($e.lat,Oe.lat);r.setCenter(new u.Q($e.lng+Qe*Mt,$e.lat+dt*Mt).wrap()),r.setZoom(ke+Ii(De,r.center.lat))}handleMapControlsPan(e,r,a){if(!e.panDelta)return;const d=r.center.lat,y=r.zoom;r.setCenter(xa(e.panDelta,r).wrap()),r.setZoom(y+Ii(d,r.center.lat))}cameraForBoxAndBearing(e,r,a,d,y){const w=ls(e,r,a,d,y),E=r.left/y.width*2-1,A=(y.width-r.right)/y.width*2-1,O=r.top/y.height*-2+1,N=(y.height-r.bottom)/y.height*-2+1,W=u.bq(a.getWest(),a.getEast())<0,G=W?a.getEast():a.getWest(),Q=W?a.getWest():a.getEast(),ie=Math.max(a.getNorth(),a.getSouth()),be=Math.min(a.getNorth(),a.getSouth()),xe=G+.5*u.bq(G,Q),Se=ie+.5*u.bq(ie,be),Ae=y.clone();Ae.setCenter(w.center),Ae.setBearing(w.bearing),Ae.setPitch(0),Ae.setRoll(0),Ae.setZoom(w.zoom);const De=Ae.modelViewProjectionMatrix,ke=[vi(a.getNorthWest()),vi(a.getNorthEast()),vi(a.getSouthWest()),vi(a.getSouthEast()),vi(new u.Q(Q,Se)),vi(new u.Q(G,Se)),vi(new u.Q(xe,ie)),vi(new u.Q(xe,be))],Oe=vi(w.center);let $e=Number.POSITIVE_INFINITY;for(const Ue of ke)E<0&&($e=ko.getLesserNonNegativeNonNull($e,ko.solveVectorScale(Ue,Oe,De,"x",E))),A>0&&($e=ko.getLesserNonNegativeNonNull($e,ko.solveVectorScale(Ue,Oe,De,"x",A))),O>0&&($e=ko.getLesserNonNegativeNonNull($e,ko.solveVectorScale(Ue,Oe,De,"y",O))),N<0&&($e=ko.getLesserNonNegativeNonNull($e,ko.solveVectorScale(Ue,Oe,De,"y",N)));if(Number.isFinite($e)&&$e!==0)return w.zoom=Ae.zoom+u.ah($e),w;Fo()}handleJumpToCenterZoom(e,r){const a=e.center.lat,d=e.getConstrained(r.center?u.Q.convert(r.center):e.center,e.zoom).center;e.setCenter(d.wrap());const y=r.zoom!==void 0?+r.zoom:e.zoom+Ii(a,d.lat);e.zoom!==y&&e.setZoom(y)}handleEaseTo(e,r){const a=e.zoom,d=e.center,y=e.padding,w={roll:e.roll,pitch:e.pitch,bearing:e.bearing},E={roll:r.roll===void 0?e.roll:r.roll,pitch:r.pitch===void 0?e.pitch:r.pitch,bearing:r.bearing===void 0?e.bearing:r.bearing},A=r.zoom!==void 0,O=!e.isPaddingEqual(r.padding);let N=!1;const W=r.center?u.Q.convert(r.center):d,G=e.getConstrained(W,a).center;Mo(e,G);const Q=e.clone();Q.setCenter(G),Q.setZoom(A?+r.zoom:a+Ii(d.lat,W.lat)),Q.setBearing(r.bearing);const ie=new u.P(u.ae(e.centerPoint.x+r.offsetAsPoint.x,0,e.width),u.ae(e.centerPoint.y+r.offsetAsPoint.y,0,e.height));Q.setLocationAtPoint(G,ie);const be=(r.offset&&r.offsetAsPoint.mag())>0?Q.center:G,xe=A?+r.zoom:a+Ii(d.lat,be.lat),Se=a+Ii(d.lat,0),Ae=xe+Ii(be.lat,0),De=u.bq(d.lng,be.lng),ke=u.bq(d.lat,be.lat),Oe=u.ac(Ae-Se);return N=xe!==a,{easeFunc:$e=>{if(u.b6(w,E)||no({startEulerAngles:w,endEulerAngles:E,tr:e,k:$e,useSlerp:w.roll!=E.roll}),O&&e.interpolatePadding(y,r.padding,$e),r.around)u.w("Easing around a point is not supported under globe projection."),e.setLocationAtPoint(r.around,r.aroundPoint);else{const Ue=Ae>Se?Math.min(2,Oe):Math.max(.5,Oe),lt=Math.pow(Ue,1-$e),Mt=Zu(d,De,ke,$e*lt);e.setCenter(Mt.wrap())}if(N){const Ue=u.B.number(Se,Ae,$e)+Ii(0,e.center.lat);e.setZoom(Ue)}},isZooming:N,elevationCenter:be}}handleFlyTo(e,r){const a=r.zoom!==void 0,d=e.center,y=e.zoom,w=e.padding,E=!e.isPaddingEqual(r.padding),A=e.getConstrained(u.Q.convert(r.center||r.locationAtOffset),y).center,O=a?+r.zoom:e.zoom+Ii(e.center.lat,A.lat),N=e.clone();N.setCenter(A),N.setZoom(O),N.setBearing(r.bearing);const W=new u.P(u.ae(e.centerPoint.x+r.offsetAsPoint.x,0,e.width),u.ae(e.centerPoint.y+r.offsetAsPoint.y,0,e.height));N.setLocationAtPoint(A,W);const G=N.center;Mo(e,G);const Q=function(ke,Oe,$e){const Ue=vi(Oe),lt=vi($e),Mt=u.aV(Ue,lt),Qe=Math.acos(Mt),dt=hs(ke);return Qe/(2*Math.PI)*dt}(e,d,G),ie=y+Ii(d.lat,0),be=O+Ii(G.lat,0),xe=u.ac(be-ie);let Se;if(typeof r.minZoom=="number"){const ke=+r.minZoom+Ii(G.lat,0),Oe=Math.min(ke,ie,be)+Ii(0,G.lat),$e=e.getConstrained(G,Oe).zoom+Ii(G.lat,0);Se=u.ac($e-ie)}const Ae=u.bq(d.lng,G.lng),De=u.bq(d.lat,G.lat);return{easeFunc:(ke,Oe,$e,Ue)=>{const lt=Zu(d,Ae,De,$e);E&&e.interpolatePadding(w,r.padding,ke);const Mt=ke===1?G:lt;e.setCenter(Mt.wrap());const Qe=ie+u.ah(Oe);e.setZoom(ke===1?O:Qe+Ii(0,Mt.lat))},scaleOfZoom:xe,targetCenter:G,scaleOfMinZoom:Se,pixelPathLength:Q}}static solveVectorScale(e,r,a,d,y){const w=d==="x"?[a[0],a[4],a[8],a[12]]:[a[1],a[5],a[9],a[13]],E=[a[3],a[7],a[11],a[15]],A=e[0]*w[0]+e[1]*w[1]+e[2]*w[2],O=e[0]*E[0]+e[1]*E[1]+e[2]*E[2],N=r[0]*w[0]+r[1]*w[1]+r[2]*w[2],W=r[0]*E[0]+r[1]*E[1]+r[2]*E[2];return N+y*O===A+y*W||E[3]*(A-N)+w[3]*(W-O)+A*W==N*O?null:(N+w[3]-y*W-y*E[3])/(N-A-y*W+y*O)}static getLesserNonNegativeNonNull(e,r){return r!==null&&r>=0&&r<e?r:e}}class Gi{constructor(e){this._globe=e,this._mercatorCameraHelper=new us,this._verticalPerspectiveCameraHelper=new ko}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(e,r){return this.currentHelper.handlePanInertia(e,r)}handleMapControlsRollPitchBearingZoom(e,r){return this.currentHelper.handleMapControlsRollPitchBearingZoom(e,r)}handleMapControlsPan(e,r,a){this.currentHelper.handleMapControlsPan(e,r,a)}cameraForBoxAndBearing(e,r,a,d,y){return this.currentHelper.cameraForBoxAndBearing(e,r,a,d,y)}handleJumpToCenterZoom(e,r){this.currentHelper.handleJumpToCenterZoom(e,r)}handleEaseTo(e,r){return this.currentHelper.handleEaseTo(e,r)}handleFlyTo(e,r){return this.currentHelper.handleFlyTo(e,r)}}const Xn=(g,e)=>u.x(g,e&&e.filter(r=>r.identifier!=="source.canvas")),ja=u.bw();class Gu extends u.E{constructor(e,r={}){super(),this._rtlPluginLoaded=()=>{for(const a in this.sourceCaches){const d=this.sourceCaches[a].getSource().type;d!=="vector"&&d!=="geojson"||this.sourceCaches[a].reload()}},this.map=e,this.dispatcher=new Tr(or(),e._getMapId()),this.dispatcher.registerMessageHandler("GG",(a,d)=>this.getGlyphs(a,d)),this.dispatcher.registerMessageHandler("GI",(a,d)=>this.getImages(a,d)),this.imageManager=new ne,this.imageManager.setEventedParent(this),this.glyphManager=new rr(e._requestManager,r.localIdeographFontFamily),this.lineAtlas=new Ht(256,512),this.crossTileSymbolIndex=new ar,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new u.bx,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",u.by()),Nn().on(Ti,this._rtlPluginLoaded),this.on("data",a=>{if(a.dataType!=="source"||a.sourceDataType!=="metadata")return;const d=this.sourceCaches[a.sourceId];if(!d)return;const y=d.getSource();if(y&&y.vectorLayerIds)for(const w in this._layers){const E=this._layers[w];E.source===y.id&&this._validateLayer(E)}})}loadURL(e,r={},a){this.fire(new u.l("dataloading",{dataType:"style"})),r.validate=typeof r.validate!="boolean"||r.validate;const d=this.map._requestManager.transformRequest(e,"Style");this._loadStyleRequest=new AbortController;const y=this._loadStyleRequest;u.j(d,this._loadStyleRequest).then(w=>{this._loadStyleRequest=null,this._load(w.data,r,a)}).catch(w=>{this._loadStyleRequest=null,w&&!y.signal.aborted&&this.fire(new u.k(w))})}loadJSON(e,r={},a){this.fire(new u.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,Te.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,r.validate=r.validate!==!1,this._load(e,r,a)}).catch(()=>{})}loadEmpty(){this.fire(new u.l("dataloading",{dataType:"style"})),this._load(ja,{validate:!1})}_load(e,r,a){var d,y;const w=r.transformStyle?r.transformStyle(a,e):e;if(!r.validate||!Xn(this,u.y(w))){this._loaded=!0,this.stylesheet=w;for(const E in w.sources)this.addSource(E,w.sources[E],{validate:!1});w.sprite?this._loadSprite(w.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(w.glyphs),this._createLayers(),this.light=new sr(this.stylesheet.light),this._setProjectionInternal(((d=this.stylesheet.projection)===null||d===void 0?void 0:d.type)||"mercator"),this.sky=new Et(this.stylesheet.sky),this.map.setTerrain((y=this.stylesheet.terrain)!==null&&y!==void 0?y:null),this.fire(new u.l("data",{dataType:"style"})),this.fire(new u.l("style.load"))}}_createLayers(){const e=u.bz(this.stylesheet.layers);this.dispatcher.broadcast("SL",e),this._order=e.map(r=>r.id),this._layers={},this._serializedLayers=null;for(const r of e){const a=u.bA(r);a.setEventedParent(this,{layer:{id:r.id}}),this._layers[r.id]=a}}_loadSprite(e,r=!1,a=void 0){let d;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(y,w,E,A){return u._(this,void 0,void 0,function*(){const O=it(y),N=E>1?"@2x":"",W={},G={};for(const{id:Q,url:ie}of O){const be=w.transformRequest(_t(ie,N,".json"),"SpriteJSON");W[Q]=u.j(be,A);const xe=w.transformRequest(_t(ie,N,".png"),"SpriteImage");G[Q]=et.getImage(xe,A)}return yield Promise.all([...Object.values(W),...Object.values(G)]),function(Q,ie){return u._(this,void 0,void 0,function*(){const be={};for(const xe in Q){be[xe]={};const Se=Te.getImageCanvasContext((yield ie[xe]).data),Ae=(yield Q[xe]).data;for(const De in Ae){const{width:ke,height:Oe,x:$e,y:Ue,sdf:lt,pixelRatio:Mt,stretchX:Qe,stretchY:dt,content:Pt,textFitWidth:er,textFitHeight:tr}=Ae[De];be[xe][De]={data:null,pixelRatio:Mt,sdf:lt,stretchX:Qe,stretchY:dt,content:Pt,textFitWidth:er,textFitHeight:tr,spriteData:{width:ke,height:Oe,x:$e,y:Ue,context:Se}}}}return be})}(W,G)})}(e,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(y=>{if(this._spriteRequest=null,y)for(const w in y){this._spritesImagesIds[w]=[];const E=this._spritesImagesIds[w]?this._spritesImagesIds[w].filter(A=>!(A in y)):[];for(const A of E)this.imageManager.removeImage(A),this._changedImages[A]=!0;for(const A in y[w]){const O=w==="default"?A:`${w}:${A}`;this._spritesImagesIds[w].push(O),O in this.imageManager.images?this.imageManager.updateImage(O,y[w][A],!1):this.imageManager.addImage(O,y[w][A]),r&&(this._changedImages[O]=!0)}}}).catch(y=>{this._spriteRequest=null,d=y,this.fire(new u.k(d))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),r&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.l("data",{dataType:"style"})),a&&a(d)})}_unloadSprite(){for(const e of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(e),this._changedImages[e]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.l("data",{dataType:"style"}))}_validateLayer(e){const r=this.sourceCaches[e.source];if(!r)return;const a=e.sourceLayer;if(!a)return;const d=r.getSource();(d.type==="geojson"||d.vectorLayerIds&&d.vectorLayerIds.indexOf(a)===-1)&&this.fire(new u.k(new Error(`Source layer "${a}" does not exist on source "${d.id}" as specified by style layer "${e.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const e in this.sourceCaches)if(!this.sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(e,r=!1){const a=this._serializedAllLayers();if(!e||e.length===0)return Object.values(r?u.bB(a):a);const d=[];for(const y of e)if(a[y]){const w=r?u.bB(a[y]):a[y];d.push(w)}return d}_serializedAllLayers(){let e=this._serializedLayers;if(e)return e;e=this._serializedLayers={};const r=Object.keys(this._layers);for(const a of r){const d=this._layers[a];d.type!=="custom"&&(e[a]=d.serialize())}return e}hasTransitions(){var e,r,a;if(!((e=this.light)===null||e===void 0)&&e.hasTransition()||!((r=this.sky)===null||r===void 0)&&r.hasTransition()||!((a=this.projection)===null||a===void 0)&&a.hasTransition())return!0;for(const d in this.sourceCaches)if(this.sourceCaches[d].hasTransition())return!0;for(const d in this._layers)if(this._layers[d].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(e){if(!this._loaded)return;const r=this._changed;if(r){const d=Object.keys(this._updatedLayers),y=Object.keys(this._removedLayers);(d.length||y.length)&&this._updateWorkerLayers(d,y);for(const w in this._updatedSources){const E=this._updatedSources[w];if(E==="reload")this._reloadSource(w);else{if(E!=="clear")throw new Error(`Invalid action ${E}`);this._clearSource(w)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const w in this._updatedPaintProps)this._layers[w].updateTransitions(e);this.light.updateTransitions(e),this.sky.updateTransitions(e),this._resetUpdates()}const a={};for(const d in this.sourceCaches){const y=this.sourceCaches[d];a[d]=y.used,y.used=!1}for(const d of this._order){const y=this._layers[d];y.recalculate(e,this._availableImages),!y.isHidden(e.zoom)&&y.source&&(this.sourceCaches[y.source].used=!0)}for(const d in a){const y=this.sourceCaches[d];!!a[d]!=!!y.used&&y.fire(new u.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:d}))}this.light.recalculate(e),this.sky.recalculate(e),this.projection.recalculate(e),this.z=e.zoom,r&&this.fire(new u.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const e=Object.keys(this._changedImages);if(e.length){for(const r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(e,r){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(e,!1),removedIds:r})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(e,r={}){var a;this._checkLoaded();const d=this.serialize();if(e=r.transformStyle?r.transformStyle(d,e):e,((a=r.validate)===null||a===void 0||a)&&Xn(this,u.y(e)))return!1;(e=u.bB(e)).layers=u.bz(e.layers);const y=u.bC(d,e),w=this._getOperationsToPerform(y);if(w.unimplemented.length>0)throw new Error(`Unimplemented: ${w.unimplemented.join(", ")}.`);if(w.operations.length===0)return!1;for(const E of w.operations)E();return this.stylesheet=e,this._serializedLayers=null,!0}_getOperationsToPerform(e){const r=[],a=[];for(const d of e)switch(d.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":r.push(()=>this.addLayer.apply(this,d.args));break;case"removeLayer":r.push(()=>this.removeLayer.apply(this,d.args));break;case"setPaintProperty":r.push(()=>this.setPaintProperty.apply(this,d.args));break;case"setLayoutProperty":r.push(()=>this.setLayoutProperty.apply(this,d.args));break;case"setFilter":r.push(()=>this.setFilter.apply(this,d.args));break;case"addSource":r.push(()=>this.addSource.apply(this,d.args));break;case"removeSource":r.push(()=>this.removeSource.apply(this,d.args));break;case"setLayerZoomRange":r.push(()=>this.setLayerZoomRange.apply(this,d.args));break;case"setLight":r.push(()=>this.setLight.apply(this,d.args));break;case"setGeoJSONSourceData":r.push(()=>this.setGeoJSONSourceData.apply(this,d.args));break;case"setGlyphs":r.push(()=>this.setGlyphs.apply(this,d.args));break;case"setSprite":r.push(()=>this.setSprite.apply(this,d.args));break;case"setTerrain":r.push(()=>this.map.setTerrain.apply(this,d.args));break;case"setSky":r.push(()=>this.setSky.apply(this,d.args));break;case"setProjection":this.setProjection.apply(this,d.args);break;case"setTransition":r.push(()=>{});break;default:a.push(d.command)}return{operations:r,unimplemented:a}}addImage(e,r){if(this.getImage(e))return this.fire(new u.k(new Error(`An image named "${e}" already exists.`)));this.imageManager.addImage(e,r),this._afterImageUpdated(e)}updateImage(e,r){this.imageManager.updateImage(e,r)}getImage(e){return this.imageManager.getImage(e)}removeImage(e){if(!this.getImage(e))return this.fire(new u.k(new Error(`An image named "${e}" does not exist.`)));this.imageManager.removeImage(e),this._afterImageUpdated(e)}_afterImageUpdated(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(e,r,a={}){if(this._checkLoaded(),this.sourceCaches[e]!==void 0)throw new Error(`Source "${e}" already exists.`);if(!r.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(r).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(r.type)>=0&&this._validate(u.y.source,`sources.${e}`,r,null,a))return;this.map&&this.map._collectResourceTiming&&(r.collectResourceTiming=!0);const d=this.sourceCaches[e]=new nt(e,r,this.dispatcher);d.style=this,d.setEventedParent(this,()=>({isSourceLoaded:d.loaded(),source:d.serialize(),sourceId:e})),d.onAdd(this.map),this._changed=!0}removeSource(e){if(this._checkLoaded(),this.sourceCaches[e]===void 0)throw new Error("There is no source with this ID");for(const a in this._layers)if(this._layers[a].source===e)return this.fire(new u.k(new Error(`Source "${e}" cannot be removed while layer "${a}" is using it.`)));const r=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],r.fire(new u.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),r.setEventedParent(null),r.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(e,r){if(this._checkLoaded(),this.sourceCaches[e]===void 0)throw new Error(`There is no source with this ID=${e}`);const a=this.sourceCaches[e].getSource();if(a.type!=="geojson")throw new Error(`geojsonSource.type is ${a.type}, which is !== 'geojson`);a.setData(r),this._changed=!0}getSource(e){return this.sourceCaches[e]&&this.sourceCaches[e].getSource()}addLayer(e,r,a={}){this._checkLoaded();const d=e.id;if(this.getLayer(d))return void this.fire(new u.k(new Error(`Layer "${d}" already exists on this map.`)));let y;if(e.type==="custom"){if(Xn(this,u.bD(e)))return;y=u.bA(e)}else{if("source"in e&&typeof e.source=="object"&&(this.addSource(d,e.source),e=u.bB(e),e=u.e(e,{source:d})),this._validate(u.y.layer,`layers.${d}`,e,{arrayIndex:-1},a))return;y=u.bA(e),this._validateLayer(y),y.setEventedParent(this,{layer:{id:d}})}const w=r?this._order.indexOf(r):this._order.length;if(r&&w===-1)this.fire(new u.k(new Error(`Cannot add layer "${d}" before non-existing layer "${r}".`)));else{if(this._order.splice(w,0,d),this._layerOrderChanged=!0,this._layers[d]=y,this._removedLayers[d]&&y.source&&y.type!=="custom"){const E=this._removedLayers[d];delete this._removedLayers[d],E.type!==y.type?this._updatedSources[y.source]="clear":(this._updatedSources[y.source]="reload",this.sourceCaches[y.source].pause())}this._updateLayer(y),y.onAdd&&y.onAdd(this.map)}}moveLayer(e,r){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire(new u.k(new Error(`The layer '${e}' does not exist in the map's style and cannot be moved.`)));if(e===r)return;const a=this._order.indexOf(e);this._order.splice(a,1);const d=r?this._order.indexOf(r):this._order.length;r&&d===-1?this.fire(new u.k(new Error(`Cannot move layer "${e}" before non-existing layer "${r}".`))):(this._order.splice(d,0,e),this._layerOrderChanged=!0)}removeLayer(e){this._checkLoaded();const r=this._layers[e];if(!r)return void this.fire(new u.k(new Error(`Cannot remove non-existing layer "${e}".`)));r.setEventedParent(null);const a=this._order.indexOf(e);this._order.splice(a,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=r,delete this._layers[e],this._serializedLayers&&delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],r.onRemove&&r.onRemove(this.map)}getLayer(e){return this._layers[e]}getLayersOrder(){return[...this._order]}hasLayer(e){return e in this._layers}setLayerZoomRange(e,r,a){this._checkLoaded();const d=this.getLayer(e);d?d.minzoom===r&&d.maxzoom===a||(r!=null&&(d.minzoom=r),a!=null&&(d.maxzoom=a),this._updateLayer(d)):this.fire(new u.k(new Error(`Cannot set the zoom range of non-existing layer "${e}".`)))}setFilter(e,r,a={}){this._checkLoaded();const d=this.getLayer(e);if(d){if(!u.bE(d.filter,r))return r==null?(d.filter=void 0,void this._updateLayer(d)):void(this._validate(u.y.filter,`layers.${d.id}.filter`,r,null,a)||(d.filter=u.bB(r),this._updateLayer(d)))}else this.fire(new u.k(new Error(`Cannot filter non-existing layer "${e}".`)))}getFilter(e){return u.bB(this.getLayer(e).filter)}setLayoutProperty(e,r,a,d={}){this._checkLoaded();const y=this.getLayer(e);y?u.bE(y.getLayoutProperty(r),a)||(y.setLayoutProperty(r,a,d),this._updateLayer(y)):this.fire(new u.k(new Error(`Cannot style non-existing layer "${e}".`)))}getLayoutProperty(e,r){const a=this.getLayer(e);if(a)return a.getLayoutProperty(r);this.fire(new u.k(new Error(`Cannot get style of non-existing layer "${e}".`)))}setPaintProperty(e,r,a,d={}){this._checkLoaded();const y=this.getLayer(e);y?u.bE(y.getPaintProperty(r),a)||(y.setPaintProperty(r,a,d)&&this._updateLayer(y),this._changed=!0,this._updatedPaintProps[e]=!0,this._serializedLayers=null):this.fire(new u.k(new Error(`Cannot style non-existing layer "${e}".`)))}getPaintProperty(e,r){return this.getLayer(e).getPaintProperty(r)}setFeatureState(e,r){this._checkLoaded();const a=e.source,d=e.sourceLayer,y=this.sourceCaches[a];if(y===void 0)return void this.fire(new u.k(new Error(`The source '${a}' does not exist in the map's style.`)));const w=y.getSource().type;w==="geojson"&&d?this.fire(new u.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):w!=="vector"||d?(e.id===void 0&&this.fire(new u.k(new Error("The feature id parameter must be provided."))),y.setFeatureState(d,e.id,r)):this.fire(new u.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(e,r){this._checkLoaded();const a=e.source,d=this.sourceCaches[a];if(d===void 0)return void this.fire(new u.k(new Error(`The source '${a}' does not exist in the map's style.`)));const y=d.getSource().type,w=y==="vector"?e.sourceLayer:void 0;y!=="vector"||w?r&&typeof e.id!="string"&&typeof e.id!="number"?this.fire(new u.k(new Error("A feature id is required to remove its specific state property."))):d.removeFeatureState(w,e.id,r):this.fire(new u.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(e){this._checkLoaded();const r=e.source,a=e.sourceLayer,d=this.sourceCaches[r];if(d!==void 0)return d.getSource().type!=="vector"||a?(e.id===void 0&&this.fire(new u.k(new Error("The feature id parameter must be provided."))),d.getFeatureState(a,e.id)):void this.fire(new u.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new u.k(new Error(`The source '${r}' does not exist in the map's style.`)))}getTransition(){return u.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const e=u.bF(this.sourceCaches,y=>y.serialize()),r=this._serializeByIds(this._order,!0),a=this.map.getTerrain()||void 0,d=this.stylesheet;return u.bG({version:d.version,name:d.name,metadata:d.metadata,light:d.light,sky:d.sky,center:d.center,zoom:d.zoom,bearing:d.bearing,pitch:d.pitch,sprite:d.sprite,glyphs:d.glyphs,transition:d.transition,projection:d.projection,sources:e,layers:r,terrain:a},y=>y!==void 0)}_updateLayer(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&this.sourceCaches[e.source].getSource().type!=="raster"&&(this._updatedSources[e.source]="reload",this.sourceCaches[e.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(e){const r=w=>this._layers[w].type==="fill-extrusion",a={},d=[];for(let w=this._order.length-1;w>=0;w--){const E=this._order[w];if(r(E)){a[E]=w;for(const A of e){const O=A[E];if(O)for(const N of O)d.push(N)}}}d.sort((w,E)=>E.intersectionZ-w.intersectionZ);const y=[];for(let w=this._order.length-1;w>=0;w--){const E=this._order[w];if(r(E))for(let A=d.length-1;A>=0;A--){const O=d[A].feature;if(a[O.layer.id]<w)break;y.push(O),d.pop()}else for(const A of e){const O=A[E];if(O)for(const N of O)y.push(N.feature)}}return y}queryRenderedFeatures(e,r,a){r&&r.filter&&this._validate(u.y.filter,"queryRenderedFeatures.filter",r.filter,null,r);const d={};if(r&&r.layers){if(!(Array.isArray(r.layers)||r.layers instanceof Set))return this.fire(new u.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const O of r.layers){const N=this._layers[O];if(!N)return this.fire(new u.k(new Error(`The layer '${O}' does not exist in the map's style and cannot be queried for features.`))),[];d[N.source]=!0}}const y=[];r.availableImages=this._availableImages;const w=this._serializedAllLayers(),E=r.layers instanceof Set?r.layers:Array.isArray(r.layers)?new Set(r.layers):null,A=Object.assign(Object.assign({},r),{layers:E});for(const O in this.sourceCaches)r.layers&&!d[O]||y.push(Jr(this.sourceCaches[O],this._layers,w,e,A,a,this.map.terrain?(N,W,G)=>this.map.terrain.getElevation(N,W,G):void 0));return this.placement&&y.push(function(O,N,W,G,Q,ie,be){const xe={},Se=ie.queryRenderedSymbols(G),Ae=[];for(const De of Object.keys(Se).map(Number))Ae.push(be[De]);Ae.sort(Cr);for(const De of Ae){const ke=De.featureIndex.lookupSymbolFeatures(Se[De.bucketInstanceId],N,De.bucketIndex,De.sourceLayerIndex,Q.filter,Q.layers,Q.availableImages,O);for(const Oe in ke){const $e=xe[Oe]=xe[Oe]||[],Ue=ke[Oe];Ue.sort((lt,Mt)=>{const Qe=De.featureSortOrder;if(Qe){const dt=Qe.indexOf(lt.featureIndex);return Qe.indexOf(Mt.featureIndex)-dt}return Mt.featureIndex-lt.featureIndex});for(const lt of Ue)$e.push(lt)}}return function(De,ke,Oe){for(const $e in De)for(const Ue of De[$e])rn(Ue,Oe[ke[$e].source]);return De}(xe,O,W)}(this._layers,w,this.sourceCaches,e,A,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(y)}querySourceFeatures(e,r){r&&r.filter&&this._validate(u.y.filter,"querySourceFeatures.filter",r.filter,null,r);const a=this.sourceCaches[e];return a?function(d,y){const w=d.getRenderableIds().map(O=>d.getTileByID(O)),E=[],A={};for(let O=0;O<w.length;O++){const N=w[O],W=N.tileID.canonical.key;A[W]||(A[W]=!0,N.querySourceFeatures(E,y))}return E}(a,r):[]}getLight(){return this.light.getLight()}setLight(e,r={}){this._checkLoaded();const a=this.light.getLight();let d=!1;for(const w in e)if(!u.bE(e[w],a[w])){d=!0;break}if(!d)return;const y={now:Te.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,r),this.light.updateTransitions(y)}getProjection(){var e;return(e=this.stylesheet)===null||e===void 0?void 0:e.projection}setProjection(e){if(this._checkLoaded(),this.projection){if(this.projection.name===e.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=e,this._setProjectionInternal(e.type)}getSky(){var e;return(e=this.stylesheet)===null||e===void 0?void 0:e.sky}setSky(e,r={}){this._checkLoaded();const a=this.getSky();let d=!1;if(!e&&!a)return;if(e&&!a)d=!0;else if(!e&&a)d=!0;else for(const w in e)if(!u.bE(e[w],a[w])){d=!0;break}if(!d)return;const y={now:Te.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=e,this.sky.setSky(e,r),this.sky.updateTransitions(y)}_setProjectionInternal(e){const r=function(a){if(Array.isArray(a)){const d=new il({type:a});return{projection:d,transform:new Ms,cameraHelper:new Gi(d)}}switch(a){case"mercator":return{projection:new as,transform:new gu,cameraHelper:new us};case"globe":{const d=new il({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:d,transform:new Ms,cameraHelper:new Gi(d)}}case"vertical-perspective":return{projection:new Jl,transform:new $a,cameraHelper:new ko};default:return u.w(`Unknown projection name: ${a}. Falling back to mercator projection.`),{projection:new as,transform:new gu,cameraHelper:new us}}}(e);this.projection=r.projection,this.map.migrateProjection(r.transform,r.cameraHelper);for(const a in this.sourceCaches)this.sourceCaches[a].reload()}_validate(e,r,a,d,y={}){return(!y||y.validate!==!1)&&Xn(this,e.call(u.y,u.e({key:r,style:this.serialize(),value:a,styleSpec:u.v},d)))}_remove(e=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Nn().off(Ti,this._rtlPluginLoaded);for(const r in this._layers)this._layers[r].setEventedParent(null);for(const r in this.sourceCaches){const a=this.sourceCaches[r];a.setEventedParent(null),a.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),e&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(e)}_clearSource(e){this.sourceCaches[e].clearTiles()}_reloadSource(e){this.sourceCaches[e].resume(),this.sourceCaches[e].reload()}_updateSources(e){for(const r in this.sourceCaches)this.sourceCaches[r].update(e,this.map.terrain)}_generateCollisionBoxes(){for(const e in this.sourceCaches)this._reloadSource(e)}_updatePlacement(e,r,a,d,y=!1){let w=!1,E=!1;const A={};for(const O of this._order){const N=this._layers[O];if(N.type!=="symbol")continue;if(!A[N.source]){const G=this.sourceCaches[N.source];A[N.source]=G.getRenderableIds(!0).map(Q=>G.getTileByID(Q)).sort((Q,ie)=>ie.tileID.overscaledZ-Q.tileID.overscaledZ||(Q.tileID.isLessThan(ie.tileID)?-1:1))}const W=this.crossTileSymbolIndex.addLayer(N,A[N.source],e.center.lng);w=w||W}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((y=y||this._layerOrderChanged||a===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(Te.now(),e.zoom))&&(this.pauseablePlacement=new de(e,this.map.terrain,this._order,y,r,a,d,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,A),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(Te.now()),E=!0),w&&this.pauseablePlacement.placement.setStale()),E||w)for(const O of this._order){const N=this._layers[O];N.type==="symbol"&&this.placement.updateLayerOpacities(N,A[N.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(Te.now())}_releaseSymbolFadeTiles(){for(const e in this.sourceCaches)this.sourceCaches[e].releaseSymbolFadeTiles()}getImages(e,r){return u._(this,void 0,void 0,function*(){const a=yield this.imageManager.getImages(r.icons);this._updateTilesForChangedImages();const d=this.sourceCaches[r.source];return d&&d.setDependencies(r.tileID.key,r.type,r.icons),a})}getGlyphs(e,r){return u._(this,void 0,void 0,function*(){const a=yield this.glyphManager.getGlyphs(r.stacks),d=this.sourceCaches[r.source];return d&&d.setDependencies(r.tileID.key,r.type,[""]),a})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(e,r={}){this._checkLoaded(),e&&this._validate(u.y.glyphs,"glyphs",e,null,r)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=e,this.glyphManager.entries={},this.glyphManager.setURL(e))}addSprite(e,r,a={},d){this._checkLoaded();const y=[{id:e,url:r}],w=[...it(this.stylesheet.sprite),...y];this._validate(u.y.sprite,"sprite",w,null,a)||(this.stylesheet.sprite=w,this._loadSprite(y,!0,d))}removeSprite(e){this._checkLoaded();const r=it(this.stylesheet.sprite);if(r.find(a=>a.id===e)){if(this._spritesImagesIds[e])for(const a of this._spritesImagesIds[e])this.imageManager.removeImage(a),this._changedImages[a]=!0;r.splice(r.findIndex(a=>a.id===e),1),this.stylesheet.sprite=r.length>0?r:void 0,delete this._spritesImagesIds[e],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.l("data",{dataType:"style"}))}else this.fire(new u.k(new Error(`Sprite "${e}" doesn't exists on this map.`)))}getSprite(){return it(this.stylesheet.sprite)}setSprite(e,r={},a){this._checkLoaded(),e&&this._validate(u.y.sprite,"sprite",e,null,r)||(this.stylesheet.sprite=e,e?this._loadSprite(e,!0,a):(this._unloadSprite(),a&&a(null)))}}var Nh=u.aG([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class _u{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(e,r,a,d,y,w,E,A,O){this.context=e;let N=this.boundPaintVertexBuffers.length!==d.length;for(let W=0;!N&&W<d.length;W++)this.boundPaintVertexBuffers[W]!==d[W]&&(N=!0);!this.vao||this.boundProgram!==r||this.boundLayoutVertexBuffer!==a||N||this.boundIndexBuffer!==y||this.boundVertexOffset!==w||this.boundDynamicVertexBuffer!==E||this.boundDynamicVertexBuffer2!==A||this.boundDynamicVertexBuffer3!==O?this.freshBind(r,a,d,y,w,E,A,O):(e.bindVertexArray.set(this.vao),E&&E.bind(),y&&y.dynamicDraw&&y.bind(),A&&A.bind(),O&&O.bind())}freshBind(e,r,a,d,y,w,E,A){const O=e.numAttributes,N=this.context,W=N.gl;this.vao&&this.destroy(),this.vao=N.createVertexArray(),N.bindVertexArray.set(this.vao),this.boundProgram=e,this.boundLayoutVertexBuffer=r,this.boundPaintVertexBuffers=a,this.boundIndexBuffer=d,this.boundVertexOffset=y,this.boundDynamicVertexBuffer=w,this.boundDynamicVertexBuffer2=E,this.boundDynamicVertexBuffer3=A,r.enableAttributes(W,e);for(const G of a)G.enableAttributes(W,e);w&&w.enableAttributes(W,e),E&&E.enableAttributes(W,e),A&&A.enableAttributes(W,e),r.bind(),r.setVertexAttribPointers(W,e,y);for(const G of a)G.bind(),G.setVertexAttribPointers(W,e,y);w&&(w.bind(),w.setVertexAttribPointers(W,e,y)),d&&d.bind(),E&&(E.bind(),E.setVertexAttribPointers(W,e,y)),A&&(A.bind(),A.setVertexAttribPointers(W,e,y)),N.currentNumAttributes=O}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const $h=(g,e,r,a,d)=>({u_texture:0,u_ele_delta:g,u_fog_matrix:e,u_fog_color:r?r.properties.get("fog-color"):u.b7.white,u_fog_ground_blend:r?r.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:d?0:r?r.calculateFogBlendOpacity(a):0,u_horizon_color:r?r.properties.get("horizon-color"):u.b7.white,u_horizon_fog_blend:r?r.properties.get("horizon-fog-blend"):1,u_is_globe_mode:d?1:0}),vu={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function al(g){const e=[];for(let r=0;r<g.length;r++){if(g[r]===null)continue;const a=g[r].split(" ");e.push(a.pop())}return e}class Al{constructor(e,r,a,d,y,w,E,A,O=[]){const N=e.gl;this.program=N.createProgram();const W=al(r.staticAttributes),G=a?a.getBinderAttributes():[],Q=W.concat(G),ie=Ar.prelude.staticUniforms?al(Ar.prelude.staticUniforms):[],be=E.staticUniforms?al(E.staticUniforms):[],xe=r.staticUniforms?al(r.staticUniforms):[],Se=a?a.getBinderUniforms():[],Ae=ie.concat(be).concat(xe).concat(Se),De=[];for(const Qe of Ae)De.indexOf(Qe)<0&&De.push(Qe);const ke=a?a.defines():[];io(N)&&ke.unshift("#version 300 es"),y&&ke.push("#define OVERDRAW_INSPECTOR;"),w&&ke.push("#define TERRAIN3D;"),A&&ke.push(A),O&&ke.push(...O);let Oe=ke.concat(Ar.prelude.fragmentSource,E.fragmentSource,r.fragmentSource).join(`
`),$e=ke.concat(Ar.prelude.vertexSource,E.vertexSource,r.vertexSource).join(`
`);io(N)||(Oe=function(Qe){return Qe.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(Oe),$e=function(Qe){return Qe.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}($e));const Ue=N.createShader(N.FRAGMENT_SHADER);if(N.isContextLost())return void(this.failedToCreate=!0);if(N.shaderSource(Ue,Oe),N.compileShader(Ue),!N.getShaderParameter(Ue,N.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${N.getShaderInfoLog(Ue)}`);N.attachShader(this.program,Ue);const lt=N.createShader(N.VERTEX_SHADER);if(N.isContextLost())return void(this.failedToCreate=!0);if(N.shaderSource(lt,$e),N.compileShader(lt),!N.getShaderParameter(lt,N.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${N.getShaderInfoLog(lt)}`);N.attachShader(this.program,lt),this.attributes={};const Mt={};this.numAttributes=Q.length;for(let Qe=0;Qe<this.numAttributes;Qe++)Q[Qe]&&(N.bindAttribLocation(this.program,Qe,Q[Qe]),this.attributes[Q[Qe]]=Qe);if(N.linkProgram(this.program),!N.getProgramParameter(this.program,N.LINK_STATUS))throw new Error(`Program failed to link: ${N.getProgramInfoLog(this.program)}`);N.deleteShader(lt),N.deleteShader(Ue);for(let Qe=0;Qe<De.length;Qe++){const dt=De[Qe];if(dt&&!Mt[dt]){const Pt=N.getUniformLocation(this.program,dt);Pt&&(Mt[dt]=Pt)}}this.fixedUniforms=d(e,Mt),this.terrainUniforms=((Qe,dt)=>({u_depth:new u.bH(Qe,dt.u_depth),u_terrain:new u.bH(Qe,dt.u_terrain),u_terrain_dim:new u.b8(Qe,dt.u_terrain_dim),u_terrain_matrix:new u.bJ(Qe,dt.u_terrain_matrix),u_terrain_unpack:new u.bK(Qe,dt.u_terrain_unpack),u_terrain_exaggeration:new u.b8(Qe,dt.u_terrain_exaggeration)}))(e,Mt),this.projectionUniforms=((Qe,dt)=>({u_projection_matrix:new u.bJ(Qe,dt.u_projection_matrix),u_projection_tile_mercator_coords:new u.bK(Qe,dt.u_projection_tile_mercator_coords),u_projection_clipping_plane:new u.bK(Qe,dt.u_projection_clipping_plane),u_projection_transition:new u.b8(Qe,dt.u_projection_transition),u_projection_fallback_matrix:new u.bJ(Qe,dt.u_projection_fallback_matrix)}))(e,Mt),this.binderUniforms=a?a.getUniforms(e,Mt):[]}draw(e,r,a,d,y,w,E,A,O,N,W,G,Q,ie,be,xe,Se,Ae,De){const ke=e.gl;if(this.failedToCreate)return;if(e.program.set(this.program),e.setDepthMode(a),e.setStencilMode(d),e.setColorMode(y),e.setCullFace(w),A){e.activeTexture.set(ke.TEXTURE2),ke.bindTexture(ke.TEXTURE_2D,A.depthTexture),e.activeTexture.set(ke.TEXTURE3),ke.bindTexture(ke.TEXTURE_2D,A.texture);for(const $e in this.terrainUniforms)this.terrainUniforms[$e].set(A[$e])}if(O)for(const $e in O)this.projectionUniforms[vu[$e]].set(O[$e]);if(E)for(const $e in this.fixedUniforms)this.fixedUniforms[$e].set(E[$e]);xe&&xe.setUniforms(e,this.binderUniforms,ie,{zoom:be});let Oe=0;switch(r){case ke.LINES:Oe=2;break;case ke.TRIANGLES:Oe=3;break;case ke.LINE_STRIP:Oe=1}for(const $e of Q.get()){const Ue=$e.vaos||($e.vaos={});(Ue[N]||(Ue[N]=new _u)).bind(e,this,W,xe?xe.getPaintVertexBuffers():[],G,$e.vertexOffset,Se,Ae,De),ke.drawElements(r,$e.primitiveLength*Oe,ke.UNSIGNED_SHORT,$e.primitiveOffset*Oe*2)}}}function Rl(g,e,r){const a=1/u.az(r,1,e.transform.tileZoom),d=Math.pow(2,r.tileID.overscaledZ),y=r.tileSize*Math.pow(2,e.transform.tileZoom)/d,w=y*(r.tileID.canonical.x+r.tileID.wrap*d),E=y*r.tileID.canonical.y;return{u_image:0,u_texsize:r.imageAtlasTexture.size,u_scale:[a,g.fromScale,g.toScale],u_fade:g.t,u_pixel_coord_upper:[w>>16,E>>16],u_pixel_coord_lower:[65535&w,65535&E]}}const Ua=(g,e,r,a)=>{const d=g.style.light,y=d.properties.get("position"),w=[y.x,y.y,y.z],E=u.bN();d.properties.get("anchor")==="viewport"&&u.bO(E,g.transform.bearingInRadians),u.bP(w,w,E);const A=g.transform.transformLightDirection(w),O=d.properties.get("color");return{u_lightpos:w,u_lightpos_globe:A,u_lightintensity:d.properties.get("intensity"),u_lightcolor:[O.r,O.g,O.b],u_vertical_gradient:+e,u_opacity:r,u_fill_translate:a}},ks=(g,e,r,a,d,y,w)=>u.e(Ua(g,e,r,a),Rl(y,g,w),{u_height_factor:-Math.pow(2,d.overscaledZ)/w.tileSize/8}),Wu=(g,e,r,a)=>u.e(Rl(e,g,r),{u_fill_translate:a}),Hu=(g,e)=>({u_world:g,u_fill_translate:e}),$=(g,e,r,a,d)=>u.e(Wu(g,e,r,d),{u_world:a}),K=(g,e,r,a,d)=>{const y=g.transform;let w,E,A=0;if(r.paint.get("circle-pitch-alignment")==="map"){const O=u.az(e,1,y.zoom);w=!0,E=[O,O],A=O/(u.Z*Math.pow(2,e.tileID.overscaledZ))*2*Math.PI*d}else w=!1,E=y.pixelsToGLUnits;return{u_camera_to_center_distance:y.cameraToCenterDistance,u_scale_with_map:+(r.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+w,u_device_pixel_ratio:g.pixelRatio,u_extrude_scale:E,u_globe_extrude_scale:A,u_translate:a}},ue=g=>({u_pixel_extrude_scale:[1/g.width,1/g.height]}),Ee=g=>({u_viewport_size:[g.width,g.height]}),vt=(g,e=1)=>({u_color:g,u_overlay:0,u_overlay_scale:e}),st=(g,e,r,a)=>{const d=u.az(g,1,e)/(u.Z*Math.pow(2,g.tileID.overscaledZ))*2*Math.PI*a;return{u_extrude_scale:u.az(g,1,e),u_intensity:r,u_globe_extrude_scale:d}},$t=(g,e,r,a)=>{const d=u.K();u.bQ(d,0,g.width,g.height,0,0,1);const y=g.context.gl;return{u_matrix:d,u_world:[y.drawingBufferWidth,y.drawingBufferHeight],u_image:r,u_color_ramp:a,u_opacity:e.paint.get("heatmap-opacity")}},lr=(g,e,r)=>{const a=r.paint.get("hillshade-accent-color");let d;switch(r.paint.get("hillshade-method")){case"basic":d=4;break;case"combined":d=1;break;case"igor":d=2;break;case"multidirectional":d=3;break;default:d=0}const y=r.getIlluminationProperties();for(let w=0;w<y.directionRadians.length;w++)r.paint.get("hillshade-illumination-anchor")==="viewport"&&(y.directionRadians[w]+=g.transform.bearingInRadians);return{u_image:0,u_latrange:mn(0,e.tileID),u_exaggeration:r.paint.get("hillshade-exaggeration"),u_altitudes:y.altitudeRadians,u_azimuths:y.directionRadians,u_accent:a,u_method:d,u_highlights:y.highlightColor,u_shadows:y.shadowColor}},Nr=(g,e)=>{const r=e.stride,a=u.K();return u.bQ(a,0,u.Z,-8192,0,0,1),u.L(a,a,[0,-8192,0]),{u_matrix:a,u_image:1,u_dimension:[r,r],u_zoom:g.overscaledZ,u_unpack:e.getUnpackVector()}};function mn(g,e){const r=Math.pow(2,e.canonical.z),a=e.canonical.y;return[new u.$(0,a/r).toLngLat().lat,new u.$(0,(a+1)/r).toLngLat().lat]}const Yr=(g,e,r,a)=>{const d=g.transform;return{u_translation:ea(g,e,r),u_ratio:a/u.az(e,1,d.zoom),u_device_pixel_ratio:g.pixelRatio,u_units_to_pixels:[1/d.pixelsToGLUnits[0],1/d.pixelsToGLUnits[1]]}},pi=(g,e,r,a,d)=>u.e(Yr(g,e,r,a),{u_image:0,u_image_height:d}),Bo=(g,e,r,a,d)=>{const y=g.transform,w=fs(e,y);return{u_translation:ea(g,e,r),u_texsize:e.imageAtlasTexture.size,u_ratio:a/u.az(e,1,y.zoom),u_device_pixel_ratio:g.pixelRatio,u_image:0,u_scale:[w,d.fromScale,d.toScale],u_fade:d.t,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},As=(g,e,r,a,d,y)=>{const w=g.lineAtlas,E=fs(e,g.transform),A=r.layout.get("line-cap")==="round",O=w.getDash(d.from,A),N=w.getDash(d.to,A),W=O.width*y.fromScale,G=N.width*y.toScale;return u.e(Yr(g,e,r,a),{u_patternscale_a:[E/W,-O.height/2],u_patternscale_b:[E/G,-N.height/2],u_sdfgamma:w.width/(256*Math.min(W,G)*g.pixelRatio)/2,u_image:0,u_tex_y_a:O.y,u_tex_y_b:N.y,u_mix:y.t})};function fs(g,e){return 1/u.az(g,1,e.tileZoom)}function ea(g,e,r){return u.aA(g.transform,e,r.paint.get("line-translate"),r.paint.get("line-translate-anchor"))}const Lc=(g,e,r,a,d)=>{return{u_tl_parent:g,u_scale_parent:e,u_buffer_scale:1,u_fade_t:r.mix,u_opacity:r.opacity*a.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:a.paint.get("raster-brightness-min"),u_brightness_high:a.paint.get("raster-brightness-max"),u_saturation_factor:(w=a.paint.get("raster-saturation"),w>0?1-1/(1.001-w):-w),u_contrast_factor:(y=a.paint.get("raster-contrast"),y>0?1/(1-y):1+y),u_spin_weights:ll(a.paint.get("raster-hue-rotate")),u_coords_top:[d[0].x,d[0].y,d[1].x,d[1].y],u_coords_bottom:[d[3].x,d[3].y,d[2].x,d[2].y]};var y,w};function ll(g){g*=Math.PI/180;const e=Math.sin(g),r=Math.cos(g);return[(2*r+1)/3,(-Math.sqrt(3)*e-r+1)/3,(Math.sqrt(3)*e-r+1)/3]}const ul=(g,e,r,a,d,y,w,E,A,O,N,W,G)=>{const Q=w.transform;return{u_is_size_zoom_constant:+(g==="constant"||g==="source"),u_is_size_feature_constant:+(g==="constant"||g==="camera"),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:Q.cameraToCenterDistance,u_pitch:Q.pitch/360*2*Math.PI,u_rotate_symbol:+r,u_aspect_ratio:Q.width/Q.height,u_fade_change:w.options.fadeDuration?w.symbolFadeChange:1,u_label_plane_matrix:E,u_coord_matrix:A,u_is_text:+N,u_pitch_with_map:+a,u_is_along_line:d,u_is_variable_anchor:y,u_texsize:W,u_texture:0,u_translation:O,u_pitched_scale:G}},cf=(g,e,r,a,d,y,w,E,A,O,N,W,G,Q)=>{const ie=w.transform;return u.e(ul(g,e,r,a,d,y,w,E,A,O,N,W,Q),{u_gamma_scale:a?Math.cos(ie.pitch*Math.PI/180)*ie.cameraToCenterDistance:1,u_device_pixel_ratio:w.pixelRatio,u_is_halo:1})},jh=(g,e,r,a,d,y,w,E,A,O,N,W,G)=>u.e(cf(g,e,r,a,d,y,w,E,A,O,!0,N,0,G),{u_texsize_icon:W,u_texture_icon:1}),Uh=(g,e)=>({u_opacity:g,u_color:e}),Md=(g,e,r,a,d)=>u.e(function(y,w,E,A){const O=E.imageManager.getPattern(y.from.toString()),N=E.imageManager.getPattern(y.to.toString()),{width:W,height:G}=E.imageManager.getPixelSize(),Q=Math.pow(2,A.tileID.overscaledZ),ie=A.tileSize*Math.pow(2,E.transform.tileZoom)/Q,be=ie*(A.tileID.canonical.x+A.tileID.wrap*Q),xe=ie*A.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:O.tl,u_pattern_br_a:O.br,u_pattern_tl_b:N.tl,u_pattern_br_b:N.br,u_texsize:[W,G],u_mix:w.t,u_pattern_size_a:O.displaySize,u_pattern_size_b:N.displaySize,u_scale_a:w.fromScale,u_scale_b:w.toScale,u_tile_units_to_pixels:1/u.az(A,1,E.transform.tileZoom),u_pixel_coord_upper:[be>>16,xe>>16],u_pixel_coord_lower:[65535&be,65535&xe]}}(r,d,e,a),{u_opacity:g}),ta=(g,e)=>{},eu={fillExtrusion:(g,e)=>({u_lightpos:new u.bL(g,e.u_lightpos),u_lightpos_globe:new u.bL(g,e.u_lightpos_globe),u_lightintensity:new u.b8(g,e.u_lightintensity),u_lightcolor:new u.bL(g,e.u_lightcolor),u_vertical_gradient:new u.b8(g,e.u_vertical_gradient),u_opacity:new u.b8(g,e.u_opacity),u_fill_translate:new u.bM(g,e.u_fill_translate)}),fillExtrusionPattern:(g,e)=>({u_lightpos:new u.bL(g,e.u_lightpos),u_lightpos_globe:new u.bL(g,e.u_lightpos_globe),u_lightintensity:new u.b8(g,e.u_lightintensity),u_lightcolor:new u.bL(g,e.u_lightcolor),u_vertical_gradient:new u.b8(g,e.u_vertical_gradient),u_height_factor:new u.b8(g,e.u_height_factor),u_opacity:new u.b8(g,e.u_opacity),u_fill_translate:new u.bM(g,e.u_fill_translate),u_image:new u.bH(g,e.u_image),u_texsize:new u.bM(g,e.u_texsize),u_pixel_coord_upper:new u.bM(g,e.u_pixel_coord_upper),u_pixel_coord_lower:new u.bM(g,e.u_pixel_coord_lower),u_scale:new u.bL(g,e.u_scale),u_fade:new u.b8(g,e.u_fade)}),fill:(g,e)=>({u_fill_translate:new u.bM(g,e.u_fill_translate)}),fillPattern:(g,e)=>({u_image:new u.bH(g,e.u_image),u_texsize:new u.bM(g,e.u_texsize),u_pixel_coord_upper:new u.bM(g,e.u_pixel_coord_upper),u_pixel_coord_lower:new u.bM(g,e.u_pixel_coord_lower),u_scale:new u.bL(g,e.u_scale),u_fade:new u.b8(g,e.u_fade),u_fill_translate:new u.bM(g,e.u_fill_translate)}),fillOutline:(g,e)=>({u_world:new u.bM(g,e.u_world),u_fill_translate:new u.bM(g,e.u_fill_translate)}),fillOutlinePattern:(g,e)=>({u_world:new u.bM(g,e.u_world),u_image:new u.bH(g,e.u_image),u_texsize:new u.bM(g,e.u_texsize),u_pixel_coord_upper:new u.bM(g,e.u_pixel_coord_upper),u_pixel_coord_lower:new u.bM(g,e.u_pixel_coord_lower),u_scale:new u.bL(g,e.u_scale),u_fade:new u.b8(g,e.u_fade),u_fill_translate:new u.bM(g,e.u_fill_translate)}),circle:(g,e)=>({u_camera_to_center_distance:new u.b8(g,e.u_camera_to_center_distance),u_scale_with_map:new u.bH(g,e.u_scale_with_map),u_pitch_with_map:new u.bH(g,e.u_pitch_with_map),u_extrude_scale:new u.bM(g,e.u_extrude_scale),u_device_pixel_ratio:new u.b8(g,e.u_device_pixel_ratio),u_globe_extrude_scale:new u.b8(g,e.u_globe_extrude_scale),u_translate:new u.bM(g,e.u_translate)}),collisionBox:(g,e)=>({u_pixel_extrude_scale:new u.bM(g,e.u_pixel_extrude_scale)}),collisionCircle:(g,e)=>({u_viewport_size:new u.bM(g,e.u_viewport_size)}),debug:(g,e)=>({u_color:new u.bI(g,e.u_color),u_overlay:new u.bH(g,e.u_overlay),u_overlay_scale:new u.b8(g,e.u_overlay_scale)}),depth:ta,clippingMask:ta,heatmap:(g,e)=>({u_extrude_scale:new u.b8(g,e.u_extrude_scale),u_intensity:new u.b8(g,e.u_intensity),u_globe_extrude_scale:new u.b8(g,e.u_globe_extrude_scale)}),heatmapTexture:(g,e)=>({u_matrix:new u.bJ(g,e.u_matrix),u_world:new u.bM(g,e.u_world),u_image:new u.bH(g,e.u_image),u_color_ramp:new u.bH(g,e.u_color_ramp),u_opacity:new u.b8(g,e.u_opacity)}),hillshade:(g,e)=>({u_image:new u.bH(g,e.u_image),u_latrange:new u.bM(g,e.u_latrange),u_exaggeration:new u.b8(g,e.u_exaggeration),u_altitudes:new u.bS(g,e.u_altitudes),u_azimuths:new u.bS(g,e.u_azimuths),u_accent:new u.bI(g,e.u_accent),u_method:new u.bH(g,e.u_method),u_shadows:new u.bR(g,e.u_shadows),u_highlights:new u.bR(g,e.u_highlights)}),hillshadePrepare:(g,e)=>({u_matrix:new u.bJ(g,e.u_matrix),u_image:new u.bH(g,e.u_image),u_dimension:new u.bM(g,e.u_dimension),u_zoom:new u.b8(g,e.u_zoom),u_unpack:new u.bK(g,e.u_unpack)}),line:(g,e)=>({u_translation:new u.bM(g,e.u_translation),u_ratio:new u.b8(g,e.u_ratio),u_device_pixel_ratio:new u.b8(g,e.u_device_pixel_ratio),u_units_to_pixels:new u.bM(g,e.u_units_to_pixels)}),lineGradient:(g,e)=>({u_translation:new u.bM(g,e.u_translation),u_ratio:new u.b8(g,e.u_ratio),u_device_pixel_ratio:new u.b8(g,e.u_device_pixel_ratio),u_units_to_pixels:new u.bM(g,e.u_units_to_pixels),u_image:new u.bH(g,e.u_image),u_image_height:new u.b8(g,e.u_image_height)}),linePattern:(g,e)=>({u_translation:new u.bM(g,e.u_translation),u_texsize:new u.bM(g,e.u_texsize),u_ratio:new u.b8(g,e.u_ratio),u_device_pixel_ratio:new u.b8(g,e.u_device_pixel_ratio),u_image:new u.bH(g,e.u_image),u_units_to_pixels:new u.bM(g,e.u_units_to_pixels),u_scale:new u.bL(g,e.u_scale),u_fade:new u.b8(g,e.u_fade)}),lineSDF:(g,e)=>({u_translation:new u.bM(g,e.u_translation),u_ratio:new u.b8(g,e.u_ratio),u_device_pixel_ratio:new u.b8(g,e.u_device_pixel_ratio),u_units_to_pixels:new u.bM(g,e.u_units_to_pixels),u_patternscale_a:new u.bM(g,e.u_patternscale_a),u_patternscale_b:new u.bM(g,e.u_patternscale_b),u_sdfgamma:new u.b8(g,e.u_sdfgamma),u_image:new u.bH(g,e.u_image),u_tex_y_a:new u.b8(g,e.u_tex_y_a),u_tex_y_b:new u.b8(g,e.u_tex_y_b),u_mix:new u.b8(g,e.u_mix)}),raster:(g,e)=>({u_tl_parent:new u.bM(g,e.u_tl_parent),u_scale_parent:new u.b8(g,e.u_scale_parent),u_buffer_scale:new u.b8(g,e.u_buffer_scale),u_fade_t:new u.b8(g,e.u_fade_t),u_opacity:new u.b8(g,e.u_opacity),u_image0:new u.bH(g,e.u_image0),u_image1:new u.bH(g,e.u_image1),u_brightness_low:new u.b8(g,e.u_brightness_low),u_brightness_high:new u.b8(g,e.u_brightness_high),u_saturation_factor:new u.b8(g,e.u_saturation_factor),u_contrast_factor:new u.b8(g,e.u_contrast_factor),u_spin_weights:new u.bL(g,e.u_spin_weights),u_coords_top:new u.bK(g,e.u_coords_top),u_coords_bottom:new u.bK(g,e.u_coords_bottom)}),symbolIcon:(g,e)=>({u_is_size_zoom_constant:new u.bH(g,e.u_is_size_zoom_constant),u_is_size_feature_constant:new u.bH(g,e.u_is_size_feature_constant),u_size_t:new u.b8(g,e.u_size_t),u_size:new u.b8(g,e.u_size),u_camera_to_center_distance:new u.b8(g,e.u_camera_to_center_distance),u_pitch:new u.b8(g,e.u_pitch),u_rotate_symbol:new u.bH(g,e.u_rotate_symbol),u_aspect_ratio:new u.b8(g,e.u_aspect_ratio),u_fade_change:new u.b8(g,e.u_fade_change),u_label_plane_matrix:new u.bJ(g,e.u_label_plane_matrix),u_coord_matrix:new u.bJ(g,e.u_coord_matrix),u_is_text:new u.bH(g,e.u_is_text),u_pitch_with_map:new u.bH(g,e.u_pitch_with_map),u_is_along_line:new u.bH(g,e.u_is_along_line),u_is_variable_anchor:new u.bH(g,e.u_is_variable_anchor),u_texsize:new u.bM(g,e.u_texsize),u_texture:new u.bH(g,e.u_texture),u_translation:new u.bM(g,e.u_translation),u_pitched_scale:new u.b8(g,e.u_pitched_scale)}),symbolSDF:(g,e)=>({u_is_size_zoom_constant:new u.bH(g,e.u_is_size_zoom_constant),u_is_size_feature_constant:new u.bH(g,e.u_is_size_feature_constant),u_size_t:new u.b8(g,e.u_size_t),u_size:new u.b8(g,e.u_size),u_camera_to_center_distance:new u.b8(g,e.u_camera_to_center_distance),u_pitch:new u.b8(g,e.u_pitch),u_rotate_symbol:new u.bH(g,e.u_rotate_symbol),u_aspect_ratio:new u.b8(g,e.u_aspect_ratio),u_fade_change:new u.b8(g,e.u_fade_change),u_label_plane_matrix:new u.bJ(g,e.u_label_plane_matrix),u_coord_matrix:new u.bJ(g,e.u_coord_matrix),u_is_text:new u.bH(g,e.u_is_text),u_pitch_with_map:new u.bH(g,e.u_pitch_with_map),u_is_along_line:new u.bH(g,e.u_is_along_line),u_is_variable_anchor:new u.bH(g,e.u_is_variable_anchor),u_texsize:new u.bM(g,e.u_texsize),u_texture:new u.bH(g,e.u_texture),u_gamma_scale:new u.b8(g,e.u_gamma_scale),u_device_pixel_ratio:new u.b8(g,e.u_device_pixel_ratio),u_is_halo:new u.bH(g,e.u_is_halo),u_translation:new u.bM(g,e.u_translation),u_pitched_scale:new u.b8(g,e.u_pitched_scale)}),symbolTextAndIcon:(g,e)=>({u_is_size_zoom_constant:new u.bH(g,e.u_is_size_zoom_constant),u_is_size_feature_constant:new u.bH(g,e.u_is_size_feature_constant),u_size_t:new u.b8(g,e.u_size_t),u_size:new u.b8(g,e.u_size),u_camera_to_center_distance:new u.b8(g,e.u_camera_to_center_distance),u_pitch:new u.b8(g,e.u_pitch),u_rotate_symbol:new u.bH(g,e.u_rotate_symbol),u_aspect_ratio:new u.b8(g,e.u_aspect_ratio),u_fade_change:new u.b8(g,e.u_fade_change),u_label_plane_matrix:new u.bJ(g,e.u_label_plane_matrix),u_coord_matrix:new u.bJ(g,e.u_coord_matrix),u_is_text:new u.bH(g,e.u_is_text),u_pitch_with_map:new u.bH(g,e.u_pitch_with_map),u_is_along_line:new u.bH(g,e.u_is_along_line),u_is_variable_anchor:new u.bH(g,e.u_is_variable_anchor),u_texsize:new u.bM(g,e.u_texsize),u_texsize_icon:new u.bM(g,e.u_texsize_icon),u_texture:new u.bH(g,e.u_texture),u_texture_icon:new u.bH(g,e.u_texture_icon),u_gamma_scale:new u.b8(g,e.u_gamma_scale),u_device_pixel_ratio:new u.b8(g,e.u_device_pixel_ratio),u_is_halo:new u.bH(g,e.u_is_halo),u_translation:new u.bM(g,e.u_translation),u_pitched_scale:new u.b8(g,e.u_pitched_scale)}),background:(g,e)=>({u_opacity:new u.b8(g,e.u_opacity),u_color:new u.bI(g,e.u_color)}),backgroundPattern:(g,e)=>({u_opacity:new u.b8(g,e.u_opacity),u_image:new u.bH(g,e.u_image),u_pattern_tl_a:new u.bM(g,e.u_pattern_tl_a),u_pattern_br_a:new u.bM(g,e.u_pattern_br_a),u_pattern_tl_b:new u.bM(g,e.u_pattern_tl_b),u_pattern_br_b:new u.bM(g,e.u_pattern_br_b),u_texsize:new u.bM(g,e.u_texsize),u_mix:new u.b8(g,e.u_mix),u_pattern_size_a:new u.bM(g,e.u_pattern_size_a),u_pattern_size_b:new u.bM(g,e.u_pattern_size_b),u_scale_a:new u.b8(g,e.u_scale_a),u_scale_b:new u.b8(g,e.u_scale_b),u_pixel_coord_upper:new u.bM(g,e.u_pixel_coord_upper),u_pixel_coord_lower:new u.bM(g,e.u_pixel_coord_lower),u_tile_units_to_pixels:new u.b8(g,e.u_tile_units_to_pixels)}),terrain:(g,e)=>({u_texture:new u.bH(g,e.u_texture),u_ele_delta:new u.b8(g,e.u_ele_delta),u_fog_matrix:new u.bJ(g,e.u_fog_matrix),u_fog_color:new u.bI(g,e.u_fog_color),u_fog_ground_blend:new u.b8(g,e.u_fog_ground_blend),u_fog_ground_blend_opacity:new u.b8(g,e.u_fog_ground_blend_opacity),u_horizon_color:new u.bI(g,e.u_horizon_color),u_horizon_fog_blend:new u.b8(g,e.u_horizon_fog_blend),u_is_globe_mode:new u.b8(g,e.u_is_globe_mode)}),terrainDepth:(g,e)=>({u_ele_delta:new u.b8(g,e.u_ele_delta)}),terrainCoords:(g,e)=>({u_texture:new u.bH(g,e.u_texture),u_terrain_coords_id:new u.b8(g,e.u_terrain_coords_id),u_ele_delta:new u.b8(g,e.u_ele_delta)}),projectionErrorMeasurement:(g,e)=>({u_input:new u.b8(g,e.u_input),u_output_expected:new u.b8(g,e.u_output_expected)}),atmosphere:(g,e)=>({u_sun_pos:new u.bL(g,e.u_sun_pos),u_atmosphere_blend:new u.b8(g,e.u_atmosphere_blend),u_globe_position:new u.bL(g,e.u_globe_position),u_globe_radius:new u.b8(g,e.u_globe_radius),u_inv_proj_matrix:new u.bJ(g,e.u_inv_proj_matrix)}),sky:(g,e)=>({u_sky_color:new u.bI(g,e.u_sky_color),u_horizon_color:new u.bI(g,e.u_horizon_color),u_horizon:new u.bM(g,e.u_horizon),u_horizon_normal:new u.bM(g,e.u_horizon_normal),u_sky_horizon_blend:new u.b8(g,e.u_sky_horizon_blend),u_sky_blend:new u.b8(g,e.u_sky_blend)})};class hf{constructor(e,r,a){this.context=e;const d=e.gl;this.buffer=d.createBuffer(),this.dynamicDraw=!!a,this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),d.bufferData(d.ELEMENT_ARRAY_BUFFER,r.arrayBuffer,this.dynamicDraw?d.DYNAMIC_DRAW:d.STATIC_DRAW),this.dynamicDraw||delete r.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(e){const r=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),r.bufferSubData(r.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Dc={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class df{constructor(e,r,a,d){this.length=r.length,this.attributes=a,this.itemSize=r.bytesPerElement,this.dynamicDraw=d,this.context=e;const y=e.gl;this.buffer=y.createBuffer(),e.bindVertexBuffer.set(this.buffer),y.bufferData(y.ARRAY_BUFFER,r.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete r.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(e){if(e.length!==this.length)throw new Error(`Length of new data is ${e.length}, which doesn't match current length of ${this.length}`);const r=this.context.gl;this.bind(),r.bufferSubData(r.ARRAY_BUFFER,0,e.arrayBuffer)}enableAttributes(e,r){for(let a=0;a<this.attributes.length;a++){const d=r.attributes[this.attributes[a].name];d!==void 0&&e.enableVertexAttribArray(d)}}setVertexAttribPointers(e,r,a){for(let d=0;d<this.attributes.length;d++){const y=this.attributes[d],w=r.attributes[y.name];w!==void 0&&e.vertexAttribPointer(w,y.components,e[Dc[y.type]],!1,this.itemSize,y.offset+this.itemSize*(a||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Cn{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class oo extends Cn{getDefault(){return u.b7.transparent}set(e){const r=this.current;(e.r!==r.r||e.g!==r.g||e.b!==r.b||e.a!==r.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class Oc extends Cn{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}class Vh extends Cn{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}class Zh extends Cn{getDefault(){return[!0,!0,!0,!0]}set(e){const r=this.current;(e[0]!==r[0]||e[1]!==r[1]||e[2]!==r[2]||e[3]!==r[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class kd extends Cn{getDefault(){return!0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}class Ad extends Cn{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}class qu extends Cn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(e){const r=this.current;(e.func!==r.func||e.ref!==r.ref||e.mask!==r.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}class xu extends Cn{getDefault(){const e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}set(e){const r=this.current;(e[0]!==r[0]||e[1]!==r[1]||e[2]!==r[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}class rt extends Cn{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const r=this.gl;e?r.enable(r.STENCIL_TEST):r.disable(r.STENCIL_TEST),this.current=e,this.dirty=!1}}class Nt extends Cn{getDefault(){return[0,1]}set(e){const r=this.current;(e[0]!==r[0]||e[1]!==r[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}class St extends Cn{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const r=this.gl;e?r.enable(r.DEPTH_TEST):r.disable(r.DEPTH_TEST),this.current=e,this.dirty=!1}}class Mr extends Cn{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}class gn extends Cn{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const r=this.gl;e?r.enable(r.BLEND):r.disable(r.BLEND),this.current=e,this.dirty=!1}}class Yn extends Cn{getDefault(){const e=this.gl;return[e.ONE,e.ZERO]}set(e){const r=this.current;(e[0]!==r[0]||e[1]!==r[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}class so extends Cn{getDefault(){return u.b7.transparent}set(e){const r=this.current;(e.r!==r.r||e.g!==r.g||e.b!==r.b||e.a!==r.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class ri extends Cn{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}class bu extends Cn{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const r=this.gl;e?r.enable(r.CULL_FACE):r.disable(r.CULL_FACE),this.current=e,this.dirty=!1}}class Gh extends Cn{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}class ra extends Cn{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}class Rs extends Cn{getDefault(){return null}set(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}}class Fc extends Cn{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}class zs extends Cn{getDefault(){const e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){const r=this.current;(e[0]!==r[0]||e[1]!==r[1]||e[2]!==r[2]||e[3]!==r[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class Wo extends Cn{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const r=this.gl;r.bindFramebuffer(r.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}class Bc extends Cn{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const r=this.gl;r.bindRenderbuffer(r.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Wn extends Cn{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const r=this.gl;r.bindTexture(r.TEXTURE_2D,e),this.current=e,this.dirty=!1}}class wu extends Cn{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const r=this.gl;r.bindBuffer(r.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class zl extends Cn{getDefault(){return null}set(e){const r=this.gl;r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class Su extends Cn{getDefault(){return null}set(e){var r;if(e===this.current&&!this.dirty)return;const a=this.gl;io(a)?a.bindVertexArray(e):(r=a.getExtension("OES_vertex_array_object"))===null||r===void 0||r.bindVertexArrayOES(e),this.current=e,this.dirty=!1}}class Ku extends Cn{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;const r=this.gl;r.pixelStorei(r.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}class Nc extends Cn{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const r=this.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}class fh extends Cn{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const r=this.gl;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}class Tu extends Cn{constructor(e,r){super(e),this.context=e,this.parent=r}getDefault(){return null}}class na extends Tu{setDirty(){this.dirty=!0}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const r=this.gl;r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class Ll extends Tu{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const r=this.gl;r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Wh extends Tu{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const r=this.gl;r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,e),this.current=e,this.dirty=!1}}const ia="Framebuffer is not complete";class bn{constructor(e,r,a,d,y){this.context=e,this.width=r,this.height=a;const w=e.gl,E=this.framebuffer=w.createFramebuffer();if(this.colorAttachment=new na(e,E),d)this.depthAttachment=y?new Wh(e,E):new Ll(e,E);else if(y)throw new Error("Stencil cannot be set without depth");if(w.checkFramebufferStatus(w.FRAMEBUFFER)!==w.FRAMEBUFFER_COMPLETE)throw new Error(ia)}destroy(){const e=this.context.gl,r=this.colorAttachment.get();if(r&&e.deleteTexture(r),this.depthAttachment){const a=this.depthAttachment.get();a&&e.deleteRenderbuffer(a)}e.deleteFramebuffer(this.framebuffer)}}class Xu{constructor(e){var r,a;if(this.gl=e,this.clearColor=new oo(this),this.clearDepth=new Oc(this),this.clearStencil=new Vh(this),this.colorMask=new Zh(this),this.depthMask=new kd(this),this.stencilMask=new Ad(this),this.stencilFunc=new qu(this),this.stencilOp=new xu(this),this.stencilTest=new rt(this),this.depthRange=new Nt(this),this.depthTest=new St(this),this.depthFunc=new Mr(this),this.blend=new gn(this),this.blendFunc=new Yn(this),this.blendColor=new so(this),this.blendEquation=new ri(this),this.cullFace=new bu(this),this.cullFaceSide=new Gh(this),this.frontFace=new ra(this),this.program=new Rs(this),this.activeTexture=new Fc(this),this.viewport=new zs(this),this.bindFramebuffer=new Wo(this),this.bindRenderbuffer=new Bc(this),this.bindTexture=new Wn(this),this.bindVertexBuffer=new wu(this),this.bindElementBuffer=new zl(this),this.bindVertexArray=new Su(this),this.pixelStoreUnpack=new Ku(this),this.pixelStoreUnpackPremultiplyAlpha=new Nc(this),this.pixelStoreUnpackFlipY=new fh(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),io(e)){this.HALF_FLOAT=e.HALF_FLOAT;const d=e.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(r=e.RGBA16F)!==null&&r!==void 0?r:d==null?void 0:d.RGBA16F_EXT,this.RGB16F=(a=e.RGB16F)!==null&&a!==void 0?a:d==null?void 0:d.RGB16F_EXT,e.getExtension("EXT_color_buffer_float")}else{e.getExtension("EXT_color_buffer_half_float"),e.getExtension("OES_texture_half_float_linear");const d=e.getExtension("OES_texture_half_float");this.HALF_FLOAT=d==null?void 0:d.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(e,r){return new hf(this,e,r)}createVertexBuffer(e,r,a){return new df(this,e,r,a)}createRenderbuffer(e,r,a){const d=this.gl,y=d.createRenderbuffer();return this.bindRenderbuffer.set(y),d.renderbufferStorage(d.RENDERBUFFER,e,r,a),this.bindRenderbuffer.set(null),y}createFramebuffer(e,r,a,d){return new bn(this,e,r,a,d)}clear({color:e,depth:r,stencil:a}){const d=this.gl;let y=0;e&&(y|=d.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),r!==void 0&&(y|=d.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(r),this.depthMask.set(!0)),a!==void 0&&(y|=d.STENCIL_BUFFER_BIT,this.clearStencil.set(a),this.stencilMask.set(255)),d.clear(y)}setCullFace(e){e.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}setColorMode(e){u.bE(e.blendFunction,Dn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)}createVertexArray(){var e;return io(this.gl)?this.gl.createVertexArray():(e=this.gl.getExtension("OES_vertex_array_object"))===null||e===void 0?void 0:e.createVertexArrayOES()}deleteVertexArray(e){var r;return io(this.gl)?this.gl.deleteVertexArray(e):(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.deleteVertexArrayOES(e)}unbindVAO(){this.bindVertexArray.set(null)}}let Yu;function Hh(g,e,r,a,d){const y=g.context,w=g.transform,E=y.gl,A=g.useProgram("collisionBox"),O=[];let N=0,W=0;for(let Se=0;Se<a.length;Se++){const Ae=a[Se],De=e.getTile(Ae).getBucket(r);if(!De)continue;const ke=d?De.textCollisionBox:De.iconCollisionBox,Oe=De.collisionCircleArray;Oe.length>0&&(O.push({circleArray:Oe,circleOffset:W,coord:Ae}),N+=Oe.length/4,W=N),ke&&A.draw(y,E.LINES,yr.disabled,Xr.disabled,g.colorModeForRenderPass(),Dr.disabled,ue(g.transform),g.style.map.terrain&&g.style.map.terrain.getTerrainData(Ae),w.getProjectionData({overscaledTileID:Ae,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),r.id,ke.layoutVertexBuffer,ke.indexBuffer,ke.segments,null,g.transform.zoom,null,null,ke.collisionVertexBuffer)}if(!d||!O.length)return;const G=g.useProgram("collisionCircle"),Q=new u.bT;Q.resize(4*N),Q._trim();let ie=0;for(const Se of O)for(let Ae=0;Ae<Se.circleArray.length/4;Ae++){const De=4*Ae,ke=Se.circleArray[De+0],Oe=Se.circleArray[De+1],$e=Se.circleArray[De+2],Ue=Se.circleArray[De+3];Q.emplace(ie++,ke,Oe,$e,Ue,0),Q.emplace(ie++,ke,Oe,$e,Ue,1),Q.emplace(ie++,ke,Oe,$e,Ue,2),Q.emplace(ie++,ke,Oe,$e,Ue,3)}(!Yu||Yu.length<2*N)&&(Yu=function(Se){const Ae=2*Se,De=new u.bV;De.resize(Ae),De._trim();for(let ke=0;ke<Ae;ke++){const Oe=6*ke;De.uint16[Oe+0]=4*ke+0,De.uint16[Oe+1]=4*ke+1,De.uint16[Oe+2]=4*ke+2,De.uint16[Oe+3]=4*ke+2,De.uint16[Oe+4]=4*ke+3,De.uint16[Oe+5]=4*ke+0}return De}(N));const be=y.createIndexBuffer(Yu,!0),xe=y.createVertexBuffer(Q,u.bU.members,!0);for(const Se of O){const Ae=Ee(g.transform);G.draw(y,E.TRIANGLES,yr.disabled,Xr.disabled,g.colorModeForRenderPass(),Dr.disabled,Ae,g.style.map.terrain&&g.style.map.terrain.getTerrainData(Se.coord),null,r.id,xe,be,u.aJ.simpleSegment(0,2*Se.circleOffset,Se.circleArray.length,Se.circleArray.length/2),null,g.transform.zoom,null,null,null)}xe.destroy(),be.destroy()}const ba=u.ad(new Float32Array(16));function Qu(g,e,r,a,d,y){const{horizontalAlign:w,verticalAlign:E}=u.aE(g);return new u.P((-(w-.5)*e/d+a[0])*y,(-(E-.5)*r/d+a[1])*y)}function ph(g,e,r,a,d,y){const w=e.tileAnchorPoint.add(new u.P(e.translation[0],e.translation[1]));if(e.pitchWithMap){let E=a.mult(y);r||(E=E.rotate(-d));const A=w.add(E);return Tt(A.x,A.y,e.pitchedLabelPlaneMatrix,e.getElevation).point}if(r){const E=Gn(e.tileAnchorPoint.x+1,e.tileAnchorPoint.y,e).point.sub(g),A=Math.atan(E.y/E.x)+(E.x<0?Math.PI:0);return g.add(a.rotate(A))}return g.add(a)}function Rd(g,e,r,a,d,y,w,E,A,O,N,W){const G=g.text.placedSymbolArray,Q=g.text.dynamicLayoutVertexArray,ie=g.icon.dynamicLayoutVertexArray,be={};Q.clear();for(let xe=0;xe<G.length;xe++){const Se=G.get(xe),Ae=Se.hidden||!Se.crossTileID||g.allowVerticalPlacement&&!Se.placedOrientation?null:a[Se.crossTileID];if(Ae){const De=new u.P(Se.anchorX,Se.anchorY),ke={getElevation:W,width:d.width,height:d.height,pitchedLabelPlaneMatrix:y,pitchWithMap:r,transform:d,tileAnchorPoint:De,translation:O,unwrappedTileID:N},Oe=r?cn(De.x,De.y,ke):Gn(De.x,De.y,ke),$e=Sn(d.cameraToCenterDistance,Oe.signedDistanceFromCamera);let Ue=u.am(g.textSizeData,E,Se)*$e/u.ay;r&&(Ue*=g.tilePixelRatio/w);const{width:lt,height:Mt,anchor:Qe,textOffset:dt,textBoxScale:Pt}=Ae,er=Qu(Qe,lt,Mt,dt,Pt,Ue),tr=d.getPitchedTextCorrection(De.x+O[0],De.y+O[1],N),Bt=ph(Oe.point,ke,e,er,-d.bearingInRadians,tr),vr=g.allowVerticalPlacement&&Se.placedOrientation===u.al.vertical?Math.PI/2:0;for(let Gr=0;Gr<Se.numGlyphs;Gr++)u.as(Q,Bt,vr);A&&Se.associatedIconIndex>=0&&(be[Se.associatedIconIndex]={shiftedAnchor:Bt,angle:vr})}else Go(Se.numGlyphs,Q)}if(A){ie.clear();const xe=g.icon.placedSymbolArray;for(let Se=0;Se<xe.length;Se++){const Ae=xe.get(Se);if(Ae.hidden)Go(Ae.numGlyphs,ie);else{const De=be[Se];if(De)for(let ke=0;ke<Ae.numGlyphs;ke++)u.as(ie,De.shiftedAnchor,De.angle);else Go(Ae.numGlyphs,ie)}}g.icon.dynamicLayoutVertexBuffer.updateData(ie)}g.text.dynamicLayoutVertexBuffer.updateData(Q)}function Li(g,e,r){return r.iconsInText&&e?"symbolTextAndIcon":g?"symbolSDF":"symbolIcon"}function $c(g,e,r,a,d,y,w,E,A,O,N,W,G){const Q=g.context,ie=Q.gl,be=g.transform,xe=E==="map",Se=A==="map",Ae=E!=="viewport"&&r.layout.get("symbol-placement")!=="point",De=xe&&!Se&&!Ae,ke=!r.layout.get("symbol-sort-key").isConstant();let Oe=!1;const $e=g.getDepthModeForSublayer(0,yr.ReadOnly),Ue=r._unevaluatedLayout.hasValue("text-variable-anchor")||r._unevaluatedLayout.hasValue("text-variable-anchor-offset"),lt=[],Mt=be.getCircleRadiusCorrection();for(const Qe of a){const dt=e.getTile(Qe),Pt=dt.getBucket(r);if(!Pt)continue;const er=d?Pt.text:Pt.icon;if(!er||!er.segments.get().length||!er.hasVisibleVertices)continue;const tr=er.programConfigurations.get(r.id),Bt=d||Pt.sdfIcons,vr=d?Pt.textSizeData:Pt.iconSizeData,Gr=Se||be.pitch!==0,In=g.useProgram(Li(Bt,d,Pt),tr),mi=u.ak(vr,be.zoom),ni=g.style.map.terrain&&g.style.map.terrain.getTerrainData(Qe);let ki,Ai,Mn,Pn,qi=[0,0],xo=null;if(d)Ai=dt.glyphAtlasTexture,Mn=ie.LINEAR,ki=dt.glyphAtlasTexture.size,Pt.iconsInText&&(qi=dt.imageAtlasTexture.size,xo=dt.imageAtlasTexture,Pn=Gr||g.options.rotating||g.options.zooming||vr.kind==="composite"||vr.kind==="camera"?ie.LINEAR:ie.NEAREST);else{const uo=r.layout.get("icon-size").constantOr(0)!==1||Pt.iconsNeedLinear;Ai=dt.imageAtlasTexture,Mn=Bt||g.options.rotating||g.options.zooming||uo||Gr?ie.LINEAR:ie.NEAREST,ki=dt.imageAtlasTexture.size}const lo=u.az(dt,1,g.transform.zoom),Rn=kr(xe,g.transform,lo),vl=u.K();u.an(vl,Rn);const ua=Kr(Se,xe,g.transform,lo),Pa=u.aA(be,dt,y,w),Ul=be.getProjectionData({overscaledTileID:Qe,applyGlobeMatrix:!G,applyTerrainMatrix:!0}),ca=Ue&&Pt.hasTextData(),ou=r.layout.get("icon-text-fit")!=="none"&&ca&&Pt.hasIconData();if(Ae){const uo=g.style.map.terrain?(ys,bi)=>g.style.map.terrain.getElevation(Qe,ys,bi):null,co=r.layout.get("text-rotation-alignment")==="map";Tn(Pt,g,d,Rn,vl,Se,O,co,Qe.toUnwrapped(),be.width,be.height,Pa,uo)}const js=d&&Ue||ou,Us=Ae||js?ba:Se?Rn:g.transform.clipSpaceToPixelsMatrix,Vl=Bt&&r.paint.get(d?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Ea;Ea=Bt?Pt.iconsInText?jh(vr.kind,mi,De,Se,Ae,js,g,Us,ua,Pa,ki,qi,Mt):cf(vr.kind,mi,De,Se,Ae,js,g,Us,ua,Pa,d,ki,0,Mt):ul(vr.kind,mi,De,Se,Ae,js,g,Us,ua,Pa,d,ki,Mt);const su={program:In,buffers:er,uniformValues:Ea,projectionData:Ul,atlasTexture:Ai,atlasTextureIcon:xo,atlasInterpolation:Mn,atlasInterpolationIcon:Pn,isSDF:Bt,hasHalo:Vl};if(ke&&Pt.canOverlap){Oe=!0;const uo=er.segments.get();for(const co of uo)lt.push({segments:new u.aJ([co]),sortKey:co.sortKey,state:su,terrainData:ni})}else lt.push({segments:er.segments,sortKey:0,state:su,terrainData:ni})}Oe&&lt.sort((Qe,dt)=>Qe.sortKey-dt.sortKey);for(const Qe of lt){const dt=Qe.state;if(Q.activeTexture.set(ie.TEXTURE0),dt.atlasTexture.bind(dt.atlasInterpolation,ie.CLAMP_TO_EDGE),dt.atlasTextureIcon&&(Q.activeTexture.set(ie.TEXTURE1),dt.atlasTextureIcon&&dt.atlasTextureIcon.bind(dt.atlasInterpolationIcon,ie.CLAMP_TO_EDGE)),dt.isSDF){const Pt=dt.uniformValues;dt.hasHalo&&(Pt.u_is_halo=1,cl(dt.buffers,Qe.segments,r,g,dt.program,$e,N,W,Pt,dt.projectionData,Qe.terrainData)),Pt.u_is_halo=0}cl(dt.buffers,Qe.segments,r,g,dt.program,$e,N,W,dt.uniformValues,dt.projectionData,Qe.terrainData)}}function cl(g,e,r,a,d,y,w,E,A,O,N){const W=a.context;d.draw(W,W.gl.TRIANGLES,y,w,E,Dr.backCCW,A,N,O,r.id,g.layoutVertexBuffer,g.indexBuffer,e,r.paint,a.transform.zoom,g.programConfigurations.get(r.id),g.dynamicLayoutVertexBuffer,g.opacityVertexBuffer)}function hl(g,e,r,a,d){const y=g.context,w=y.gl,E=Xr.disabled,A=new Dn([w.ONE,w.ONE],u.b7.transparent,[!0,!0,!0,!0]),O=e.getBucket(r);if(!O)return;const N=a.key;let W=r.heatmapFbos.get(N);W||(W=Uc(y,e.tileSize,e.tileSize),r.heatmapFbos.set(N,W)),y.bindFramebuffer.set(W.framebuffer),y.viewport.set([0,0,e.tileSize,e.tileSize]),y.clear({color:u.b7.transparent});const G=O.programConfigurations.get(r.id),Q=g.useProgram("heatmap",G,!d),ie=g.transform.getProjectionData({overscaledTileID:e.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),be=g.style.map.terrain.getTerrainData(a);Q.draw(y,w.TRIANGLES,yr.disabled,E,A,Dr.disabled,st(e,g.transform.zoom,r.paint.get("heatmap-intensity"),1),be,ie,r.id,O.layoutVertexBuffer,O.indexBuffer,O.segments,r.paint,g.transform.zoom,G)}function jc(g,e,r,a,d){const y=g.context,w=y.gl,E=g.transform;y.setColorMode(g.colorModeForRenderPass());const A=Cu(y,e),O=r.key,N=e.heatmapFbos.get(O);if(!N)return;y.activeTexture.set(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,N.colorAttachment.get()),y.activeTexture.set(w.TEXTURE1),A.bind(w.LINEAR,w.CLAMP_TO_EDGE);const W=E.getProjectionData({overscaledTileID:r,applyTerrainMatrix:d,applyGlobeMatrix:!a});g.useProgram("heatmapTexture").draw(y,w.TRIANGLES,yr.disabled,Xr.disabled,g.colorModeForRenderPass(),Dr.disabled,$t(g,e,0,1),null,W,e.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments,e.paint,E.zoom),N.destroy(),e.heatmapFbos.delete(O)}function Uc(g,e,r){var a,d;const y=g.gl,w=y.createTexture();y.bindTexture(y.TEXTURE_2D,w),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.LINEAR),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.LINEAR);const E=(a=g.HALF_FLOAT)!==null&&a!==void 0?a:y.UNSIGNED_BYTE,A=(d=g.RGBA16F)!==null&&d!==void 0?d:y.RGBA;y.texImage2D(y.TEXTURE_2D,0,A,e,r,0,y.RGBA,E,null);const O=g.createFramebuffer(e,r,!1,!1);return O.colorAttachment.set(w),O}function Cu(g,e){return e.colorRampTexture||(e.colorRampTexture=new Le(g,e.colorRamp,g.gl.RGBA)),e.colorRampTexture}function Pu(g,e,r,a,d){if(!r||!a||!a.imageAtlas)return;const y=a.imageAtlas.patternPositions;let w=y[r.to.toString()],E=y[r.from.toString()];if(!w&&E&&(w=E),!E&&w&&(E=w),!w||!E){const A=d.getPaintProperty(e);w=y[A],E=y[A]}w&&E&&g.setConstantPatternPositions(w,E)}function Dl(g,e,r,a,d,y,w,E){const A=g.context.gl,O="fill-pattern",N=r.paint.get(O),W=N&&N.constantOr(1),G=r.getCrossfadeParameters();let Q,ie,be,xe,Se;const Ae=g.transform,De=r.paint.get("fill-translate"),ke=r.paint.get("fill-translate-anchor");w?(ie=W&&!r.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Q=A.LINES):(ie=W?"fillPattern":"fill",Q=A.TRIANGLES);const Oe=N.constantOr(null);for(const $e of a){const Ue=e.getTile($e);if(W&&!Ue.patternsLoaded())continue;const lt=Ue.getBucket(r);if(!lt)continue;const Mt=lt.programConfigurations.get(r.id),Qe=g.useProgram(ie,Mt),dt=g.style.map.terrain&&g.style.map.terrain.getTerrainData($e);W&&(g.context.activeTexture.set(A.TEXTURE0),Ue.imageAtlasTexture.bind(A.LINEAR,A.CLAMP_TO_EDGE),Mt.updatePaintBuffers(G)),Pu(Mt,O,Oe,Ue,r);const Pt=Ae.getProjectionData({overscaledTileID:$e,applyGlobeMatrix:!E,applyTerrainMatrix:!0}),er=u.aA(Ae,Ue,De,ke);if(w){xe=lt.indexBuffer2,Se=lt.segments2;const Bt=[A.drawingBufferWidth,A.drawingBufferHeight];be=ie==="fillOutlinePattern"&&W?$(g,G,Ue,Bt,er):Hu(Bt,er)}else xe=lt.indexBuffer,Se=lt.segments,be=W?Wu(g,G,Ue,er):{u_fill_translate:er};const tr=g.stencilModeForClipping($e);Qe.draw(g.context,Q,d,tr,y,Dr.backCCW,be,dt,Pt,r.id,lt.layoutVertexBuffer,xe,Se,r.paint,g.transform.zoom,Mt)}}function $i(g,e,r,a,d,y,w,E){const A=g.context,O=A.gl,N="fill-extrusion-pattern",W=r.paint.get(N),G=W.constantOr(1),Q=r.getCrossfadeParameters(),ie=r.paint.get("fill-extrusion-opacity"),be=W.constantOr(null),xe=g.transform;for(const Se of a){const Ae=e.getTile(Se),De=Ae.getBucket(r);if(!De)continue;const ke=g.style.map.terrain&&g.style.map.terrain.getTerrainData(Se),Oe=De.programConfigurations.get(r.id),$e=g.useProgram(G?"fillExtrusionPattern":"fillExtrusion",Oe);G&&(g.context.activeTexture.set(O.TEXTURE0),Ae.imageAtlasTexture.bind(O.LINEAR,O.CLAMP_TO_EDGE),Oe.updatePaintBuffers(Q));const Ue=xe.getProjectionData({overscaledTileID:Se,applyGlobeMatrix:!E,applyTerrainMatrix:!0});Pu(Oe,N,be,Ae,r);const lt=u.aA(xe,Ae,r.paint.get("fill-extrusion-translate"),r.paint.get("fill-extrusion-translate-anchor")),Mt=r.paint.get("fill-extrusion-vertical-gradient"),Qe=G?ks(g,Mt,ie,lt,Se,Q,Ae):Ua(g,Mt,ie,lt);$e.draw(A,A.gl.TRIANGLES,d,y,w,Dr.backCCW,Qe,ke,Ue,r.id,De.layoutVertexBuffer,De.indexBuffer,De.segments,r.paint,g.transform.zoom,Oe,g.style.map.terrain&&De.centroidVertexBuffer)}}function No(g,e,r,a,d,y,w,E,A){var O;const N=g.style.projection,W=g.context,G=g.transform,Q=W.gl,ie=[`#define NUM_ILLUMINATION_SOURCES ${r.paint.get("hillshade-highlight-color").values.length}`],be=g.useProgram("hillshade",null,!1,ie),xe=!g.options.moving;for(const Se of a){const Ae=e.getTile(Se),De=Ae.fbo;if(!De)continue;const ke=N.getMeshFromTileID(W,Se.canonical,E,!0,"raster"),Oe=(O=g.style.map.terrain)===null||O===void 0?void 0:O.getTerrainData(Se);W.activeTexture.set(Q.TEXTURE0),Q.bindTexture(Q.TEXTURE_2D,De.colorAttachment.get());const $e=G.getProjectionData({overscaledTileID:Se,aligned:xe,applyGlobeMatrix:!A,applyTerrainMatrix:!0});be.draw(W,Q.TRIANGLES,y,d[Se.overscaledZ],w,Dr.backCCW,lr(g,Ae,r),Oe,$e,r.id,ke.vertexBuffer,ke.indexBuffer,ke.segments)}}const mh=[new u.P(0,0),new u.P(u.Z,0),new u.P(u.Z,u.Z),new u.P(0,u.Z)];function gh(g,e,r,a,d,y,w,E,A=!1,O=!1){const N=a[a.length-1].overscaledZ,W=g.context,G=W.gl,Q=g.useProgram("raster"),ie=g.transform,be=g.style.projection,xe=g.colorModeForRenderPass(),Se=!g.options.moving;for(const Ae of a){const De=g.getDepthModeForSublayer(Ae.overscaledZ-N,r.paint.get("raster-opacity")===1?yr.ReadWrite:yr.ReadOnly,G.LESS),ke=e.getTile(Ae);ke.registerFadeDuration(r.paint.get("raster-fade-duration"));const Oe=e.findLoadedParent(Ae,0),$e=e.findLoadedSibling(Ae),Ue=Vc(ke,Oe||$e||null,e,r,g.transform,g.style.map.terrain);let lt,Mt;const Qe=r.paint.get("raster-resampling")==="nearest"?G.NEAREST:G.LINEAR;W.activeTexture.set(G.TEXTURE0),ke.texture.bind(Qe,G.CLAMP_TO_EDGE,G.LINEAR_MIPMAP_NEAREST),W.activeTexture.set(G.TEXTURE1),Oe?(Oe.texture.bind(Qe,G.CLAMP_TO_EDGE,G.LINEAR_MIPMAP_NEAREST),lt=Math.pow(2,Oe.tileID.overscaledZ-ke.tileID.overscaledZ),Mt=[ke.tileID.canonical.x*lt%1,ke.tileID.canonical.y*lt%1]):ke.texture.bind(Qe,G.CLAMP_TO_EDGE,G.LINEAR_MIPMAP_NEAREST),ke.texture.useMipmap&&W.extTextureFilterAnisotropic&&g.transform.pitch>20&&G.texParameterf(G.TEXTURE_2D,W.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,W.extTextureFilterAnisotropicMax);const dt=g.style.map.terrain&&g.style.map.terrain.getTerrainData(Ae),Pt=ie.getProjectionData({overscaledTileID:Ae,aligned:Se,applyGlobeMatrix:!O,applyTerrainMatrix:!0}),er=Lc(Mt||[0,0],lt||1,Ue,r,E),tr=be.getMeshFromTileID(W,Ae.canonical,y,w,"raster");Q.draw(W,G.TRIANGLES,De,d?d[Ae.overscaledZ]:Xr.disabled,xe,A?Dr.frontCCW:Dr.backCCW,er,dt,Pt,r.id,tr.vertexBuffer,tr.indexBuffer,tr.segments)}}function Vc(g,e,r,a,d,y){const w=a.paint.get("raster-fade-duration");if(!y&&w>0){const E=Te.now(),A=(E-g.timeAdded)/w,O=e?(E-e.timeAdded)/w:-1,N=r.getSource(),W=Ke(d,{tileSize:N.tileSize,roundZoom:N.roundZoom}),G=!e||Math.abs(e.tileID.overscaledZ-W)>Math.abs(g.tileID.overscaledZ-W),Q=G&&g.refreshedUponExpiration?1:u.ae(G?A:1-O,0,1);return g.refreshedUponExpiration&&A>=1&&(g.refreshedUponExpiration=!1),e?{opacity:1,mix:1-Q}:{opacity:Q,mix:0}}return{opacity:1,mix:0}}const Ju=new u.b7(1,0,0,1),ec=new u.b7(0,1,0,1),Eu=new u.b7(0,0,1,1),Zc=new u.b7(1,0,1,1),dl=new u.b7(0,1,1,1);function Iu(g,e,r,a){Mu(g,0,e+r/2,g.transform.width,r,a)}function tc(g,e,r,a){Mu(g,e-r/2,0,r,g.transform.height,a)}function Mu(g,e,r,a,d,y){const w=g.context,E=w.gl;E.enable(E.SCISSOR_TEST),E.scissor(e*g.pixelRatio,r*g.pixelRatio,a*g.pixelRatio,d*g.pixelRatio),w.clear({color:y}),E.disable(E.SCISSOR_TEST)}function Ci(g,e,r){const a=g.context,d=a.gl,y=g.useProgram("debug"),w=yr.disabled,E=Xr.disabled,A=g.colorModeForRenderPass(),O="$debug",N=g.style.map.terrain&&g.style.map.terrain.getTerrainData(r);a.activeTexture.set(d.TEXTURE0);const W=e.getTileByID(r.key).latestRawTileData,G=Math.floor((W&&W.byteLength||0)/1024),Q=e.getTile(r).tileSize,ie=512/Math.min(Q,512)*(r.overscaledZ/g.transform.zoom)*.5;let be=r.canonical.toString();r.overscaledZ!==r.canonical.z&&(be+=` => ${r.overscaledZ}`),function(Se,Ae){Se.initDebugOverlayCanvas();const De=Se.debugOverlayCanvas,ke=Se.context.gl,Oe=Se.debugOverlayCanvas.getContext("2d");Oe.clearRect(0,0,De.width,De.height),Oe.shadowColor="white",Oe.shadowBlur=2,Oe.lineWidth=1.5,Oe.strokeStyle="white",Oe.textBaseline="top",Oe.font="bold 36px Open Sans, sans-serif",Oe.fillText(Ae,5,5),Oe.strokeText(Ae,5,5),Se.debugOverlayTexture.update(De),Se.debugOverlayTexture.bind(ke.LINEAR,ke.CLAMP_TO_EDGE)}(g,`${be} ${G}kB`);const xe=g.transform.getProjectionData({overscaledTileID:r,applyGlobeMatrix:!0,applyTerrainMatrix:!0});y.draw(a,d.TRIANGLES,w,E,Dn.alphaBlended,Dr.disabled,vt(u.b7.transparent,ie),null,xe,O,g.debugBuffer,g.quadTriangleIndexBuffer,g.debugSegments),y.draw(a,d.LINE_STRIP,w,E,A,Dr.disabled,vt(u.b7.red),N,xe,O,g.debugBuffer,g.tileBorderIndexBuffer,g.debugSegments)}function Ol(g,e,r,a){const{isRenderingGlobe:d}=a,y=g.context,w=y.gl,E=g.transform,A=g.colorModeForRenderPass(),O=g.getDepthModeFor3D(),N=g.useProgram("terrain");y.bindFramebuffer.set(null),y.viewport.set([0,0,g.width,g.height]);for(const W of r){const G=e.getTerrainMesh(W.tileID),Q=g.renderToTexture.getTexture(W),ie=e.getTerrainData(W.tileID);y.activeTexture.set(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,Q.texture);const be=e.getMeshFrameDelta(E.zoom),xe=E.calculateFogMatrix(W.tileID.toUnwrapped()),Se=$h(be,xe,g.style.sky,E.pitch,d),Ae=E.getProjectionData({overscaledTileID:W.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});N.draw(y,w.TRIANGLES,O,Xr.disabled,A,Dr.backCCW,Se,ie,Ae,"terrain",G.vertexBuffer,G.indexBuffer,G.segments)}}function vo(g,e){if(!e.mesh){const r=new u.aI;r.emplaceBack(-1,-1),r.emplaceBack(1,-1),r.emplaceBack(1,1),r.emplaceBack(-1,1);const a=new u.aK;a.emplaceBack(0,1,2),a.emplaceBack(0,2,3),e.mesh=new $n(g.createVertexBuffer(r,_i.members),g.createIndexBuffer(a),u.aJ.simpleSegment(0,0,r.length,a.length))}return e.mesh}class qh{constructor(e,r){this.context=new Xu(e),this.transform=r,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:u.ad(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=nt.maxUnderzooming+nt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ar}resize(e,r,a){if(this.width=Math.floor(e*a),this.height=Math.floor(r*a),this.pixelRatio=a,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const d of this.style._order)this.style._layers[d].resize()}setup(){const e=this.context,r=new u.aI;r.emplaceBack(0,0),r.emplaceBack(u.Z,0),r.emplaceBack(0,u.Z),r.emplaceBack(u.Z,u.Z),this.tileExtentBuffer=e.createVertexBuffer(r,_i.members),this.tileExtentSegments=u.aJ.simpleSegment(0,0,4,2);const a=new u.aI;a.emplaceBack(0,0),a.emplaceBack(u.Z,0),a.emplaceBack(0,u.Z),a.emplaceBack(u.Z,u.Z),this.debugBuffer=e.createVertexBuffer(a,_i.members),this.debugSegments=u.aJ.simpleSegment(0,0,4,5);const d=new u.b_;d.emplaceBack(0,0,0,0),d.emplaceBack(u.Z,0,u.Z,0),d.emplaceBack(0,u.Z,0,u.Z),d.emplaceBack(u.Z,u.Z,u.Z,u.Z),this.rasterBoundsBuffer=e.createVertexBuffer(d,Nh.members),this.rasterBoundsSegments=u.aJ.simpleSegment(0,0,4,2);const y=new u.aI;y.emplaceBack(0,0),y.emplaceBack(u.Z,0),y.emplaceBack(0,u.Z),y.emplaceBack(u.Z,u.Z),this.rasterBoundsBufferPosOnly=e.createVertexBuffer(y,_i.members),this.rasterBoundsSegmentsPosOnly=u.aJ.simpleSegment(0,0,4,5);const w=new u.aI;w.emplaceBack(0,0),w.emplaceBack(1,0),w.emplaceBack(0,1),w.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(w,_i.members),this.viewportSegments=u.aJ.simpleSegment(0,0,4,2);const E=new u.b$;E.emplaceBack(0),E.emplaceBack(1),E.emplaceBack(3),E.emplaceBack(2),E.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(E);const A=new u.aK;A.emplaceBack(1,0,2),A.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(A);const O=this.context.gl;this.stencilClearMode=new Xr({func:O.ALWAYS,mask:0},0,255,O.ZERO,O.ZERO,O.ZERO),this.tileExtentMesh=new $n(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const e=this.context,r=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const a=u.K();u.bQ(a,0,this.width,this.height,0,0,1),u.M(a,a,[r.drawingBufferWidth,r.drawingBufferHeight,0]);const d={mainMatrix:a,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:a};this.useProgram("clippingMask",null,!0).draw(e,r.TRIANGLES,yr.disabled,this.stencilClearMode,Dn.disabled,Dr.disabled,null,null,d,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(e,r,a){if(this.currentStencilSource===e.source||!e.isTileClipped()||!r||!r.length)return;this.currentStencilSource=e.source,this.nextStencilID+r.length>256&&this.clearStencil();const d=this.context;d.setColorMode(Dn.disabled),d.setDepthMode(yr.disabled);const y={};for(const w of r)y[w.key]=this.nextStencilID++;this._renderTileMasks(y,r,a,!0),this._renderTileMasks(y,r,a,!1),this._tileClippingMaskIDs=y}_renderTileMasks(e,r,a,d){const y=this.context,w=y.gl,E=this.style.projection,A=this.transform,O=this.useProgram("clippingMask");for(const N of r){const W=e[N.key],G=this.style.map.terrain&&this.style.map.terrain.getTerrainData(N),Q=E.getMeshFromTileID(this.context,N.canonical,d,!0,"stencil"),ie=A.getProjectionData({overscaledTileID:N,applyGlobeMatrix:!a,applyTerrainMatrix:!0});O.draw(y,w.TRIANGLES,yr.disabled,new Xr({func:w.ALWAYS,mask:0},W,255,w.KEEP,w.KEEP,w.REPLACE),Dn.disabled,a?Dr.disabled:Dr.backCCW,null,G,ie,"$clipping",Q.vertexBuffer,Q.indexBuffer,Q.segments)}}_renderTilesDepthBuffer(){const e=this.context,r=e.gl,a=this.style.projection,d=this.transform,y=this.useProgram("depth"),w=this.getDepthModeFor3D(),E=He(d,{tileSize:d.tileSize});for(const A of E){const O=this.style.map.terrain&&this.style.map.terrain.getTerrainData(A),N=a.getMeshFromTileID(this.context,A.canonical,!0,!0,"raster"),W=d.getProjectionData({overscaledTileID:A,applyGlobeMatrix:!0,applyTerrainMatrix:!0});y.draw(e,r.TRIANGLES,w,Xr.disabled,Dn.disabled,Dr.backCCW,null,O,W,"$clipping",N.vertexBuffer,N.indexBuffer,N.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const e=this.nextStencilID++,r=this.context.gl;return new Xr({func:r.NOTEQUAL,mask:255},e,255,r.KEEP,r.KEEP,r.REPLACE)}stencilModeForClipping(e){const r=this.context.gl;return new Xr({func:r.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,r.KEEP,r.KEEP,r.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(e){const r=this.context.gl,a=e.sort((w,E)=>E.overscaledZ-w.overscaledZ),d=a[a.length-1].overscaledZ,y=a[0].overscaledZ-d+1;if(y>1){this.currentStencilSource=void 0,this.nextStencilID+y>256&&this.clearStencil();const w={};for(let E=0;E<y;E++)w[E+d]=new Xr({func:r.GEQUAL,mask:255},E+this.nextStencilID,255,r.KEEP,r.KEEP,r.REPLACE);return this.nextStencilID+=y,[w,a]}return[{[d]:Xr.disabled},a]}stencilConfigForOverlapTwoPass(e){const r=this.context.gl,a=e.sort((w,E)=>E.overscaledZ-w.overscaledZ),d=a[a.length-1].overscaledZ,y=a[0].overscaledZ-d+1;if(this.clearStencil(),y>1){const w={},E={};for(let A=0;A<y;A++)w[A+d]=new Xr({func:r.GREATER,mask:255},y+1+A,255,r.KEEP,r.KEEP,r.REPLACE),E[A+d]=new Xr({func:r.GREATER,mask:255},1+A,255,r.KEEP,r.KEEP,r.REPLACE);return this.nextStencilID=2*y+1,[w,E,a]}return this.nextStencilID=3,[{[d]:new Xr({func:r.GREATER,mask:255},2,255,r.KEEP,r.KEEP,r.REPLACE)},{[d]:new Xr({func:r.GREATER,mask:255},1,255,r.KEEP,r.KEEP,r.REPLACE)},a]}colorModeForRenderPass(){const e=this.context.gl;return this._showOverdrawInspector?new Dn([e.CONSTANT_COLOR,e.ONE],new u.b7(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Dn.unblended:Dn.alphaBlended}getDepthModeForSublayer(e,r,a){if(!this.opaquePassEnabledForLayer())return yr.disabled;const d=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new yr(a||this.context.gl.LEQUAL,r,[d,d])}getDepthModeFor3D(){return new yr(this.context.gl.LEQUAL,yr.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(e,r){var a,d;this.style=e,this.options=r,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(Te.now()),this.imageManager.beginFrame();const y=this.style._order,w=this.style.sourceCaches,E={},A={},O={},N={isRenderingToTexture:!1,isRenderingGlobe:((a=e.projection)===null||a===void 0?void 0:a.transitionState)>0};for(const G in w){const Q=w[G];Q.used&&Q.prepare(this.context),E[G]=Q.getVisibleCoordinates(!1),A[G]=E[G].slice().reverse(),O[G]=Q.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let G=0;G<y.length;G++)if(this.style._layers[y[G]].is3D()){this.opaquePassCutoff=G;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const G of y){const Q=this.style._layers[G];if(!Q.hasOffscreenPass()||Q.isHidden(this.transform.zoom))continue;const ie=A[Q.source];(Q.type==="custom"||ie.length)&&this.renderLayer(this,w[Q.source],Q,ie,N)}if((d=this.style.projection)===null||d===void 0||d.updateGPUdependent({context:this.context,useProgram:G=>this.useProgram(G)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:r.showOverdrawInspector?u.b7.black:u.b7.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(G,Q){const ie=G.context,be=ie.gl,xe=(($e,Ue,lt)=>{const Mt=Math.cos(Ue.rollInRadians),Qe=Math.sin(Ue.rollInRadians),dt=tt(Ue),Pt=Ue.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:$e.properties.get("sky-color"),u_horizon_color:$e.properties.get("horizon-color"),u_horizon:[(Ue.width/2-dt*Qe)*lt,(Ue.height/2+dt*Mt)*lt],u_horizon_normal:[-Qe,Mt],u_sky_horizon_blend:$e.properties.get("sky-horizon-blend")*Ue.height/2*lt,u_sky_blend:Pt}})(Q,G.style.map.transform,G.pixelRatio),Se=new yr(be.LEQUAL,yr.ReadWrite,[0,1]),Ae=Xr.disabled,De=G.colorModeForRenderPass(),ke=G.useProgram("sky"),Oe=vo(ie,Q);ke.draw(ie,be.TRIANGLES,Se,Ae,De,Dr.disabled,xe,null,void 0,"sky",Oe.vertexBuffer,Oe.indexBuffer,Oe.segments)}(this,this.style.sky),this._showOverdrawInspector=r.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=y.length-1;this.currentLayer>=0;this.currentLayer--){const G=this.style._layers[y[this.currentLayer]],Q=w[G.source],ie=E[G.source];this._renderTileClippingMasks(G,ie,!1),this.renderLayer(this,Q,G,ie,N)}this.renderPass="translucent";let W=!1;for(this.currentLayer=0;this.currentLayer<y.length;this.currentLayer++){const G=this.style._layers[y[this.currentLayer]],Q=w[G.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(G,N))continue;this.opaquePassEnabledForLayer()||W||(W=!0,N.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const ie=(G.type==="symbol"?O:A)[G.source];this._renderTileClippingMasks(G,E[G.source],!!this.renderToTexture),this.renderLayer(this,Q,G,ie,N)}if(N.isRenderingGlobe&&function(G,Q,ie){const be=G.context,xe=be.gl,Se=G.useProgram("atmosphere"),Ae=new yr(xe.LEQUAL,yr.ReadOnly,[0,1]),De=G.transform,ke=function(Pt,er){const tr=Pt.properties.get("position"),Bt=[-tr.x,-tr.y,-tr.z],vr=u.ad(new Float64Array(16));return Pt.properties.get("anchor")==="map"&&(u.a_(vr,vr,er.rollInRadians),u.a$(vr,vr,-er.pitchInRadians),u.a_(vr,vr,er.bearingInRadians),u.a$(vr,vr,er.center.lat*Math.PI/180),u.bp(vr,vr,-er.center.lng*Math.PI/180)),u.bZ(Bt,Bt,vr),Bt}(ie,G.transform),Oe=De.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),$e=Q.properties.get("atmosphere-blend")*Oe.projectionTransition;if($e===0)return;const Ue=Bi(De.worldSize,De.center.lat),lt=De.inverseProjectionMatrix,Mt=new Float64Array(4);Mt[3]=1,u.at(Mt,Mt,De.modelViewProjectionMatrix),Mt[0]/=Mt[3],Mt[1]/=Mt[3],Mt[2]/=Mt[3],Mt[3]=1,u.at(Mt,Mt,lt),Mt[0]/=Mt[3],Mt[1]/=Mt[3],Mt[2]/=Mt[3],Mt[3]=1;const Qe=((Pt,er,tr,Bt,vr)=>({u_sun_pos:Pt,u_atmosphere_blend:er,u_globe_position:tr,u_globe_radius:Bt,u_inv_proj_matrix:vr}))(ke,$e,[Mt[0],Mt[1],Mt[2]],Ue,lt),dt=vo(be,Q);Se.draw(be,xe.TRIANGLES,Ae,Xr.disabled,Dn.alphaBlended,Dr.disabled,Qe,null,null,"atmosphere",dt.vertexBuffer,dt.indexBuffer,dt.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const G=function(Q,ie){let be=null;const xe=Object.values(Q._layers).flatMap(ke=>ke.source&&!ke.isHidden(ie)?[Q.sourceCaches[ke.source]]:[]),Se=xe.filter(ke=>ke.getSource().type==="vector"),Ae=xe.filter(ke=>ke.getSource().type!=="vector"),De=ke=>{(!be||be.getSource().maxzoom<ke.getSource().maxzoom)&&(be=ke)};return Se.forEach(ke=>De(ke)),be||Ae.forEach(ke=>De(ke)),be}(this.style,this.transform.zoom);G&&function(Q,ie,be){for(let xe=0;xe<be.length;xe++)Ci(Q,ie,be[xe])}(this,G,G.getVisibleCoordinates())}this.options.showPadding&&function(G){const Q=G.transform.padding;Iu(G,G.transform.height-(Q.top||0),3,Ju),Iu(G,Q.bottom||0,3,ec),tc(G,Q.left||0,3,Eu),tc(G,G.transform.width-(Q.right||0),3,Zc);const ie=G.transform.centerPoint;(function(be,xe,Se,Ae){Mu(be,xe-1,Se-10,2,20,Ae),Mu(be,xe-10,Se-1,20,2,Ae)})(G,ie.x,G.transform.height-ie.y,dl)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(e){if(!this.style||!this.style.map||!this.style.map.terrain)return;const r=this.terrainFacilitator.matrix,a=this.transform.modelViewProjectionMatrix;let d=this.terrainFacilitator.dirty;d||(d=e?!u.c0(r,a):!u.c1(r,a)),d||(d=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),d&&(u.c2(r,a),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(y,w){const E=y.context,A=E.gl,O=y.transform,N=Dn.unblended,W=new yr(A.LEQUAL,yr.ReadWrite,[0,1]),G=w.sourceCache.getRenderableTiles(),Q=y.useProgram("terrainDepth");E.bindFramebuffer.set(w.getFramebuffer("depth").framebuffer),E.viewport.set([0,0,y.width/devicePixelRatio,y.height/devicePixelRatio]),E.clear({color:u.b7.transparent,depth:1});for(const ie of G){const be=w.getTerrainMesh(ie.tileID),xe=w.getTerrainData(ie.tileID),Se=O.getProjectionData({overscaledTileID:ie.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),Ae={u_ele_delta:w.getMeshFrameDelta(O.zoom)};Q.draw(E,A.TRIANGLES,W,Xr.disabled,N,Dr.backCCW,Ae,xe,Se,"terrain",be.vertexBuffer,be.indexBuffer,be.segments)}E.bindFramebuffer.set(null),E.viewport.set([0,0,y.width,y.height])}(this,this.style.map.terrain),function(y,w){const E=y.context,A=E.gl,O=y.transform,N=Dn.unblended,W=new yr(A.LEQUAL,yr.ReadWrite,[0,1]),G=w.getCoordsTexture(),Q=w.sourceCache.getRenderableTiles(),ie=y.useProgram("terrainCoords");E.bindFramebuffer.set(w.getFramebuffer("coords").framebuffer),E.viewport.set([0,0,y.width/devicePixelRatio,y.height/devicePixelRatio]),E.clear({color:u.b7.transparent,depth:1}),w.coordsIndex=[];for(const be of Q){const xe=w.getTerrainMesh(be.tileID),Se=w.getTerrainData(be.tileID);E.activeTexture.set(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,G.texture);const Ae={u_terrain_coords_id:(255-w.coordsIndex.length)/255,u_texture:0,u_ele_delta:w.getMeshFrameDelta(O.zoom)},De=O.getProjectionData({overscaledTileID:be.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});ie.draw(E,A.TRIANGLES,W,Xr.disabled,N,Dr.backCCW,Ae,Se,De,"terrain",xe.vertexBuffer,xe.indexBuffer,xe.segments),w.coordsIndex.push(be.tileID.key)}E.bindFramebuffer.set(null),E.viewport.set([0,0,y.width,y.height])}(this,this.style.map.terrain))}renderLayer(e,r,a,d,y){a.isHidden(this.transform.zoom)||(a.type==="background"||a.type==="custom"||(d||[]).length)&&(this.id=a.id,u.c3(a)?function(w,E,A,O,N,W){if(w.renderPass!=="translucent")return;const{isRenderingToTexture:G}=W,Q=Xr.disabled,ie=w.colorModeForRenderPass();(A._unevaluatedLayout.hasValue("text-variable-anchor")||A._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(be,xe,Se,Ae,De,ke,Oe,$e,Ue){const lt=xe.transform,Mt=xe.style.map.terrain,Qe=De==="map",dt=ke==="map";for(const Pt of be){const er=Ae.getTile(Pt),tr=er.getBucket(Se);if(!tr||!tr.text||!tr.text.segments.get().length)continue;const Bt=u.ak(tr.textSizeData,lt.zoom),vr=u.az(er,1,xe.transform.zoom),Gr=kr(Qe,xe.transform,vr),In=Se.layout.get("icon-text-fit")!=="none"&&tr.hasIconData();if(Bt){const mi=Math.pow(2,lt.zoom-er.tileID.overscaledZ),ni=Mt?(ki,Ai)=>Mt.getElevation(Pt,ki,Ai):null;Rd(tr,Qe,dt,Ue,lt,Gr,mi,Bt,In,u.aA(lt,er,Oe,$e),Pt.toUnwrapped(),ni)}}}(O,w,A,E,A.layout.get("text-rotation-alignment"),A.layout.get("text-pitch-alignment"),A.paint.get("text-translate"),A.paint.get("text-translate-anchor"),N),A.paint.get("icon-opacity").constantOr(1)!==0&&$c(w,E,A,O,!1,A.paint.get("icon-translate"),A.paint.get("icon-translate-anchor"),A.layout.get("icon-rotation-alignment"),A.layout.get("icon-pitch-alignment"),A.layout.get("icon-keep-upright"),Q,ie,G),A.paint.get("text-opacity").constantOr(1)!==0&&$c(w,E,A,O,!0,A.paint.get("text-translate"),A.paint.get("text-translate-anchor"),A.layout.get("text-rotation-alignment"),A.layout.get("text-pitch-alignment"),A.layout.get("text-keep-upright"),Q,ie,G),E.map.showCollisionBoxes&&(Hh(w,E,A,O,!0),Hh(w,E,A,O,!1))}(e,r,a,d,this.style.placement.variableOffsets,y):u.c4(a)?function(w,E,A,O,N){if(w.renderPass!=="translucent")return;const{isRenderingToTexture:W}=N,G=A.paint.get("circle-opacity"),Q=A.paint.get("circle-stroke-width"),ie=A.paint.get("circle-stroke-opacity"),be=!A.layout.get("circle-sort-key").isConstant();if(G.constantOr(1)===0&&(Q.constantOr(1)===0||ie.constantOr(1)===0))return;const xe=w.context,Se=xe.gl,Ae=w.transform,De=w.getDepthModeForSublayer(0,yr.ReadOnly),ke=Xr.disabled,Oe=w.colorModeForRenderPass(),$e=[],Ue=Ae.getCircleRadiusCorrection();for(let lt=0;lt<O.length;lt++){const Mt=O[lt],Qe=E.getTile(Mt),dt=Qe.getBucket(A);if(!dt)continue;const Pt=A.paint.get("circle-translate"),er=A.paint.get("circle-translate-anchor"),tr=u.aA(Ae,Qe,Pt,er),Bt=dt.programConfigurations.get(A.id),vr=w.useProgram("circle",Bt),Gr=dt.layoutVertexBuffer,In=dt.indexBuffer,mi=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Mt),ni={programConfiguration:Bt,program:vr,layoutVertexBuffer:Gr,indexBuffer:In,uniformValues:K(w,Qe,A,tr,Ue),terrainData:mi,projectionData:Ae.getProjectionData({overscaledTileID:Mt,applyGlobeMatrix:!W,applyTerrainMatrix:!0})};if(be){const ki=dt.segments.get();for(const Ai of ki)$e.push({segments:new u.aJ([Ai]),sortKey:Ai.sortKey,state:ni})}else $e.push({segments:dt.segments,sortKey:0,state:ni})}be&&$e.sort((lt,Mt)=>lt.sortKey-Mt.sortKey);for(const lt of $e){const{programConfiguration:Mt,program:Qe,layoutVertexBuffer:dt,indexBuffer:Pt,uniformValues:er,terrainData:tr,projectionData:Bt}=lt.state;Qe.draw(xe,Se.TRIANGLES,De,ke,Oe,Dr.backCCW,er,tr,Bt,A.id,dt,Pt,lt.segments,A.paint,w.transform.zoom,Mt)}}(e,r,a,d,y):u.c5(a)?function(w,E,A,O,N){if(A.paint.get("heatmap-opacity")===0)return;const W=w.context,{isRenderingToTexture:G,isRenderingGlobe:Q}=N;if(w.style.map.terrain){for(const ie of O){const be=E.getTile(ie);E.hasRenderableParent(ie)||(w.renderPass==="offscreen"?hl(w,be,A,ie,Q):w.renderPass==="translucent"&&jc(w,A,ie,G,Q))}W.viewport.set([0,0,w.width,w.height])}else w.renderPass==="offscreen"?function(ie,be,xe,Se){const Ae=ie.context,De=Ae.gl,ke=ie.transform,Oe=Xr.disabled,$e=new Dn([De.ONE,De.ONE],u.b7.transparent,[!0,!0,!0,!0]);(function(Ue,lt,Mt){const Qe=Ue.gl;Ue.activeTexture.set(Qe.TEXTURE1),Ue.viewport.set([0,0,lt.width/4,lt.height/4]);let dt=Mt.heatmapFbos.get(u.bW);dt?(Qe.bindTexture(Qe.TEXTURE_2D,dt.colorAttachment.get()),Ue.bindFramebuffer.set(dt.framebuffer)):(dt=Uc(Ue,lt.width/4,lt.height/4),Mt.heatmapFbos.set(u.bW,dt))})(Ae,ie,xe),Ae.clear({color:u.b7.transparent});for(let Ue=0;Ue<Se.length;Ue++){const lt=Se[Ue];if(be.hasRenderableParent(lt))continue;const Mt=be.getTile(lt),Qe=Mt.getBucket(xe);if(!Qe)continue;const dt=Qe.programConfigurations.get(xe.id),Pt=ie.useProgram("heatmap",dt),er=ke.getProjectionData({overscaledTileID:lt,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),tr=ke.getCircleRadiusCorrection();Pt.draw(Ae,De.TRIANGLES,yr.disabled,Oe,$e,Dr.backCCW,st(Mt,ke.zoom,xe.paint.get("heatmap-intensity"),tr),null,er,xe.id,Qe.layoutVertexBuffer,Qe.indexBuffer,Qe.segments,xe.paint,ke.zoom,dt)}Ae.viewport.set([0,0,ie.width,ie.height])}(w,E,A,O):w.renderPass==="translucent"&&function(ie,be){const xe=ie.context,Se=xe.gl;xe.setColorMode(ie.colorModeForRenderPass());const Ae=be.heatmapFbos.get(u.bW);Ae&&(xe.activeTexture.set(Se.TEXTURE0),Se.bindTexture(Se.TEXTURE_2D,Ae.colorAttachment.get()),xe.activeTexture.set(Se.TEXTURE1),Cu(xe,be).bind(Se.LINEAR,Se.CLAMP_TO_EDGE),ie.useProgram("heatmapTexture").draw(xe,Se.TRIANGLES,yr.disabled,Xr.disabled,ie.colorModeForRenderPass(),Dr.disabled,$t(ie,be,0,1),null,null,be.id,ie.viewportBuffer,ie.quadTriangleIndexBuffer,ie.viewportSegments,be.paint,ie.transform.zoom))}(w,A)}(e,r,a,d,y):u.c6(a)?function(w,E,A,O,N){if(w.renderPass!=="translucent")return;const{isRenderingToTexture:W}=N,G=A.paint.get("line-opacity"),Q=A.paint.get("line-width");if(G.constantOr(1)===0||Q.constantOr(1)===0)return;const ie=w.getDepthModeForSublayer(0,yr.ReadOnly),be=w.colorModeForRenderPass(),xe=A.paint.get("line-dasharray"),Se=A.paint.get("line-pattern"),Ae=Se.constantOr(1),De=A.paint.get("line-gradient"),ke=A.getCrossfadeParameters(),Oe=Ae?"linePattern":xe?"lineSDF":De?"lineGradient":"line",$e=w.context,Ue=$e.gl,lt=w.transform;let Mt=!0;for(const Qe of O){const dt=E.getTile(Qe);if(Ae&&!dt.patternsLoaded())continue;const Pt=dt.getBucket(A);if(!Pt)continue;const er=Pt.programConfigurations.get(A.id),tr=w.context.program.get(),Bt=w.useProgram(Oe,er),vr=Mt||Bt.program!==tr,Gr=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Qe),In=Se.constantOr(null);if(In&&dt.imageAtlas){const Mn=dt.imageAtlas,Pn=Mn.patternPositions[In.to.toString()],qi=Mn.patternPositions[In.from.toString()];Pn&&qi&&er.setConstantPatternPositions(Pn,qi)}const mi=lt.getProjectionData({overscaledTileID:Qe,applyGlobeMatrix:!W,applyTerrainMatrix:!0}),ni=lt.getPixelScale(),ki=Ae?Bo(w,dt,A,ni,ke):xe?As(w,dt,A,ni,xe,ke):De?pi(w,dt,A,ni,Pt.lineClipsArray.length):Yr(w,dt,A,ni);if(Ae)$e.activeTexture.set(Ue.TEXTURE0),dt.imageAtlasTexture.bind(Ue.LINEAR,Ue.CLAMP_TO_EDGE),er.updatePaintBuffers(ke);else if(xe&&(vr||w.lineAtlas.dirty))$e.activeTexture.set(Ue.TEXTURE0),w.lineAtlas.bind($e);else if(De){const Mn=Pt.gradients[A.id];let Pn=Mn.texture;if(A.gradientVersion!==Mn.version){let qi=256;if(A.stepInterpolant){const xo=E.getSource().maxzoom,lo=Qe.canonical.z===xo?Math.ceil(1<<w.transform.maxZoom-Qe.canonical.z):1;qi=u.ae(u.bX(Pt.maxLineLength/u.Z*1024*lo),256,$e.maxTextureSize)}Mn.gradient=u.bY({expression:A.gradientExpression(),evaluationKey:"lineProgress",resolution:qi,image:Mn.gradient||void 0,clips:Pt.lineClipsArray}),Mn.texture?Mn.texture.update(Mn.gradient):Mn.texture=new Le($e,Mn.gradient,Ue.RGBA),Mn.version=A.gradientVersion,Pn=Mn.texture}$e.activeTexture.set(Ue.TEXTURE0),Pn.bind(A.stepInterpolant?Ue.NEAREST:Ue.LINEAR,Ue.CLAMP_TO_EDGE)}const Ai=w.stencilModeForClipping(Qe);Bt.draw($e,Ue.TRIANGLES,ie,Ai,be,Dr.disabled,ki,Gr,mi,A.id,Pt.layoutVertexBuffer,Pt.indexBuffer,Pt.segments,A.paint,w.transform.zoom,er,Pt.layoutVertexBuffer2),Mt=!1}}(e,r,a,d,y):u.c7(a)?function(w,E,A,O,N){const W=A.paint.get("fill-color"),G=A.paint.get("fill-opacity");if(G.constantOr(1)===0)return;const{isRenderingToTexture:Q}=N,ie=w.colorModeForRenderPass(),be=A.paint.get("fill-pattern"),xe=w.opaquePassEnabledForLayer()&&!be.constantOr(1)&&W.constantOr(u.b7.transparent).a===1&&G.constantOr(0)===1?"opaque":"translucent";if(w.renderPass===xe){const Se=w.getDepthModeForSublayer(1,w.renderPass==="opaque"?yr.ReadWrite:yr.ReadOnly);Dl(w,E,A,O,Se,ie,!1,Q)}if(w.renderPass==="translucent"&&A.paint.get("fill-antialias")){const Se=w.getDepthModeForSublayer(A.getPaintProperty("fill-outline-color")?2:0,yr.ReadOnly);Dl(w,E,A,O,Se,ie,!0,Q)}}(e,r,a,d,y):u.c8(a)?function(w,E,A,O,N){const W=A.paint.get("fill-extrusion-opacity");if(W===0)return;const{isRenderingToTexture:G}=N;if(w.renderPass==="translucent"){const Q=new yr(w.context.gl.LEQUAL,yr.ReadWrite,w.depthRangeFor3D);if(W!==1||A.paint.get("fill-extrusion-pattern").constantOr(1))$i(w,E,A,O,Q,Xr.disabled,Dn.disabled,G),$i(w,E,A,O,Q,w.stencilModeFor3D(),w.colorModeForRenderPass(),G);else{const ie=w.colorModeForRenderPass();$i(w,E,A,O,Q,Xr.disabled,ie,G)}}}(e,r,a,d,y):u.c9(a)?function(w,E,A,O,N){if(w.renderPass!=="offscreen"&&w.renderPass!=="translucent")return;const{isRenderingToTexture:W}=N,G=w.context,Q=w.style.projection.useSubdivision,ie=w.getDepthModeForSublayer(0,yr.ReadOnly),be=w.colorModeForRenderPass();if(w.renderPass==="offscreen")(function(xe,Se,Ae,De,ke,Oe,$e){const Ue=xe.context,lt=Ue.gl;for(const Mt of Ae){const Qe=Se.getTile(Mt),dt=Qe.dem;if(!dt||!dt.data||!Qe.needsHillshadePrepare)continue;const Pt=dt.dim,er=dt.stride,tr=dt.getPixels();if(Ue.activeTexture.set(lt.TEXTURE1),Ue.pixelStoreUnpackPremultiplyAlpha.set(!1),Qe.demTexture=Qe.demTexture||xe.getTileTexture(er),Qe.demTexture){const vr=Qe.demTexture;vr.update(tr,{premultiply:!1}),vr.bind(lt.NEAREST,lt.CLAMP_TO_EDGE)}else Qe.demTexture=new Le(Ue,tr,lt.RGBA,{premultiply:!1}),Qe.demTexture.bind(lt.NEAREST,lt.CLAMP_TO_EDGE);Ue.activeTexture.set(lt.TEXTURE0);let Bt=Qe.fbo;if(!Bt){const vr=new Le(Ue,{width:Pt,height:Pt,data:null},lt.RGBA);vr.bind(lt.LINEAR,lt.CLAMP_TO_EDGE),Bt=Qe.fbo=Ue.createFramebuffer(Pt,Pt,!0,!1),Bt.colorAttachment.set(vr.texture)}Ue.bindFramebuffer.set(Bt.framebuffer),Ue.viewport.set([0,0,Pt,Pt]),xe.useProgram("hillshadePrepare").draw(Ue,lt.TRIANGLES,ke,Oe,$e,Dr.disabled,Nr(Qe.tileID,dt),null,null,De.id,xe.rasterBoundsBuffer,xe.quadTriangleIndexBuffer,xe.rasterBoundsSegments),Qe.needsHillshadePrepare=!1}})(w,E,O,A,ie,Xr.disabled,be),G.viewport.set([0,0,w.width,w.height]);else if(w.renderPass==="translucent")if(Q){const[xe,Se,Ae]=w.stencilConfigForOverlapTwoPass(O);No(w,E,A,Ae,xe,ie,be,!1,W),No(w,E,A,Ae,Se,ie,be,!0,W)}else{const[xe,Se]=w.getStencilConfigForOverlapAndUpdateStencilID(O);No(w,E,A,Se,xe,ie,be,!1,W)}}(e,r,a,d,y):u.ca(a)?function(w,E,A,O,N){if(w.renderPass!=="translucent"||A.paint.get("raster-opacity")===0||!O.length)return;const{isRenderingToTexture:W}=N,G=E.getSource(),Q=w.style.projection.useSubdivision;if(G instanceof an)gh(w,E,A,O,null,!1,!1,G.tileCoords,G.flippedWindingOrder,W);else if(Q){const[ie,be,xe]=w.stencilConfigForOverlapTwoPass(O);gh(w,E,A,xe,ie,!1,!0,mh,!1,W),gh(w,E,A,xe,be,!0,!0,mh,!1,W)}else{const[ie,be]=w.getStencilConfigForOverlapAndUpdateStencilID(O);gh(w,E,A,be,ie,!1,!0,mh,!1,W)}}(e,r,a,d,y):u.cb(a)?function(w,E,A,O,N){const W=A.paint.get("background-color"),G=A.paint.get("background-opacity");if(G===0)return;const{isRenderingToTexture:Q}=N,ie=w.context,be=ie.gl,xe=w.style.projection,Se=w.transform,Ae=Se.tileSize,De=A.paint.get("background-pattern");if(w.isPatternMissing(De))return;const ke=!De&&W.a===1&&G===1&&w.opaquePassEnabledForLayer()?"opaque":"translucent";if(w.renderPass!==ke)return;const Oe=Xr.disabled,$e=w.getDepthModeForSublayer(0,ke==="opaque"?yr.ReadWrite:yr.ReadOnly),Ue=w.colorModeForRenderPass(),lt=w.useProgram(De?"backgroundPattern":"background"),Mt=O||He(Se,{tileSize:Ae,terrain:w.style.map.terrain});De&&(ie.activeTexture.set(be.TEXTURE0),w.imageManager.bind(w.context));const Qe=A.getCrossfadeParameters();for(const dt of Mt){const Pt=Se.getProjectionData({overscaledTileID:dt,applyGlobeMatrix:!Q,applyTerrainMatrix:!0}),er=De?Md(G,w,De,{tileID:dt,tileSize:Ae},Qe):Uh(G,W),tr=w.style.map.terrain&&w.style.map.terrain.getTerrainData(dt),Bt=xe.getMeshFromTileID(ie,dt.canonical,!1,!0,"raster");lt.draw(ie,be.TRIANGLES,$e,Oe,Ue,Dr.backCCW,er,tr,Pt,A.id,Bt.vertexBuffer,Bt.indexBuffer,Bt.segments)}}(e,0,a,d,y):u.cc(a)&&function(w,E,A,O){const{isRenderingGlobe:N}=O,W=w.context,G=A.implementation,Q=w.style.projection,ie=w.transform,be=ie.getProjectionDataForCustomLayer(N),xe={farZ:ie.farZ,nearZ:ie.nearZ,fov:ie.fov*Math.PI/180,modelViewProjectionMatrix:ie.modelViewProjectionMatrix,projectionMatrix:ie.projectionMatrix,shaderData:{variantName:Q.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${Q.shaderPreludeCode.vertexSource}`,define:Q.shaderDefine},defaultProjectionData:be},Se=G.renderingMode?G.renderingMode:"2d";if(w.renderPass==="offscreen"){const Ae=G.prerender;Ae&&(w.setCustomLayerDefaults(),W.setColorMode(w.colorModeForRenderPass()),Ae.call(G,W.gl,xe),W.setDirty(),w.setBaseState())}else if(w.renderPass==="translucent"){w.setCustomLayerDefaults(),W.setColorMode(w.colorModeForRenderPass()),W.setStencilMode(Xr.disabled);const Ae=Se==="3d"?w.getDepthModeFor3D():w.getDepthModeForSublayer(0,yr.ReadOnly);W.setDepthMode(Ae),G.render(W.gl,xe),W.setDirty(),w.setBaseState(),W.bindFramebuffer.set(null)}}(e,0,a,y))}saveTileTexture(e){const r=this._tileTextures[e.size[0]];r?r.push(e):this._tileTextures[e.size[0]]=[e]}getTileTexture(e){const r=this._tileTextures[e];return r&&r.length>0?r.pop():null}isPatternMissing(e){if(!e)return!1;if(!e.from||!e.to)return!0;const r=this.imageManager.getPattern(e.from.toString()),a=this.imageManager.getPattern(e.to.toString());return!r||!a}useProgram(e,r,a=!1,d=[]){this.cache=this.cache||{};const y=!!this.style.map.terrain,w=this.style.projection,E=a?Ar.projectionMercator:w.shaderPreludeCode,A=a?ro:w.shaderDefine,O=e+(r?r.cacheKey:"")+`/${a?en:w.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(y?"/terrain":"")+(d?`/${d.join("/")}`:"");return this.cache[O]||(this.cache[O]=new Al(this.context,Ar[e],r,eu[e],this._showOverdrawInspector,y,E,A,d)),this.cache[O]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Le(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:e,drawingBufferHeight:r}=this.context.gl;return this.width!==e||this.height!==r}}function Fl(g,e){let r,a=!1,d=null,y=null;const w=()=>{d=null,a&&(g.apply(y,r),d=setTimeout(w,e),a=!1)};return(...E)=>(a=!0,y=this,r=E,d||w(),d)}class Va{constructor(e){this._getCurrentHash=()=>{const r=window.location.hash.replace("#","");if(this._hashName){let a;return r.split("&").map(d=>d.split("=")).forEach(d=>{d[0]===this._hashName&&(a=d)}),(a&&a[1]||"").split("/")}return r.split("/")},this._onHashChange=()=>{const r=this._getCurrentHash();if(!this._isValidHash(r))return!1;const a=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(r[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+r[2],+r[1]],zoom:+r[0],bearing:a,pitch:+(r[4]||0)}),!0},this._updateHashUnthrottled=()=>{const r=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,r)},this._removeHash=()=>{const r=this._getCurrentHash();if(r.length===0)return;const a=r.join("/");let d=a;d.split("&").length>0&&(d=d.split("&")[0]),this._hashName&&(d=`${this._hashName}=${a}`);let y=window.location.hash.replace(d,"");y.startsWith("#&")?y=y.slice(0,1)+y.slice(2):y==="#"&&(y="");let w=window.location.href.replace(/(#.+)?$/,y);w=w.replace("&&","&"),window.history.replaceState(window.history.state,null,w)},this._updateHash=Fl(this._updateHashUnthrottled,300),this._hashName=e&&encodeURIComponent(e)}addTo(e){return this._map=e,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(e){const r=this._map.getCenter(),a=Math.round(100*this._map.getZoom())/100,d=Math.ceil((a*Math.LN2+Math.log(512/360/.5))/Math.LN10),y=Math.pow(10,d),w=Math.round(r.lng*y)/y,E=Math.round(r.lat*y)/y,A=this._map.getBearing(),O=this._map.getPitch();let N="";if(N+=e?`/${w}/${E}/${a}`:`${a}/${E}/${w}`,(A||O)&&(N+="/"+Math.round(10*A)/10),O&&(N+=`/${Math.round(O)}`),this._hashName){const W=this._hashName;let G=!1;const Q=window.location.hash.slice(1).split("&").map(ie=>{const be=ie.split("=")[0];return be===W?(G=!0,`${be}=${N}`):ie}).filter(ie=>ie);return G||Q.push(`${W}=${N}`),`#${Q.join("&")}`}return`#${N}`}_isValidHash(e){if(e.length<3||e.some(isNaN))return!1;try{new u.Q(+e[2],+e[1])}catch{return!1}const r=+e[0],a=+(e[3]||0),d=+(e[4]||0);return r>=this._map.getMinZoom()&&r<=this._map.getMaxZoom()&&a>=-180&&a<=180&&d>=this._map.getMinPitch()&&d<=this._map.getMaxPitch()}}const Ho={linearity:.3,easing:u.cd(0,0,.3,1)},Ls=u.e({deceleration:2500,maxSpeed:1400},Ho),ku=u.e({deceleration:20,maxSpeed:1400},Ho),ce=u.e({deceleration:1e3,maxSpeed:360},Ho),rc=u.e({deceleration:1e3,maxSpeed:90},Ho),fl=u.e({deceleration:1e3,maxSpeed:360},Ho);class qo{constructor(e){this._map=e,this.clear()}clear(){this._inertiaBuffer=[]}record(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:Te.now(),settings:e})}_drainInertiaBuffer(){const e=this._inertiaBuffer,r=Te.now();for(;e.length>0&&r-e[0].time>160;)e.shift()}_onMoveEnd(e){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const r={zoom:0,bearing:0,pitch:0,roll:0,pan:new u.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:y}of this._inertiaBuffer)r.zoom+=y.zoomDelta||0,r.bearing+=y.bearingDelta||0,r.pitch+=y.pitchDelta||0,r.roll+=y.rollDelta||0,y.panDelta&&r.pan._add(y.panDelta),y.around&&(r.around=y.around),y.pinchAround&&(r.pinchAround=y.pinchAround);const a=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,d={};if(r.pan.mag()){const y=tu(r.pan.mag(),a,u.e({},Ls,e||{})),w=r.pan.mult(y.amount/r.pan.mag()),E=this._map.cameraHelper.handlePanInertia(w,this._map.transform);d.center=E.easingCenter,d.offset=E.easingOffset,yn(d,y)}if(r.zoom){const y=tu(r.zoom,a,ku);d.zoom=this._map.transform.zoom+y.amount,yn(d,y)}if(r.bearing){const y=tu(r.bearing,a,ce);d.bearing=this._map.transform.bearing+u.ae(y.amount,-179,179),yn(d,y)}if(r.pitch){const y=tu(r.pitch,a,rc);d.pitch=this._map.transform.pitch+y.amount,yn(d,y)}if(r.roll){const y=tu(r.roll,a,fl);d.roll=this._map.transform.roll+u.ae(y.amount,-179,179),yn(d,y)}if(d.zoom||d.bearing){const y=r.pinchAround===void 0?r.around:r.pinchAround;d.around=y?this._map.unproject(y):this._map.getCenter()}return this.clear(),u.e(d,{noMoveStart:!0})}}function yn(g,e){(!g.duration||g.duration<e.duration)&&(g.duration=e.duration,g.easing=e.easing)}function tu(g,e,r){const{maxSpeed:a,linearity:d,deceleration:y}=r,w=u.ae(g*d/(e/1e3),-a,a),E=Math.abs(w)/(y*d);return{easing:r.easing,duration:1e3*E,amount:w*(E/2)}}class ao extends u.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,r,a,d={}){a=a instanceof MouseEvent?a:new MouseEvent(e,a);const y=ge.mousePos(r.getCanvas(),a),w=r.unproject(y);super(e,u.e({point:y,lngLat:w,originalEvent:a},d)),this._defaultPrevented=!1,this.target=r}}class pl extends u.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,r,a){const d=e==="touchend"?a.changedTouches:a.touches,y=ge.touchPos(r.getCanvasContainer(),d),w=y.map(A=>r.unproject(A)),E=y.reduce((A,O,N,W)=>A.add(O.div(W.length)),new u.P(0,0));super(e,{points:y,point:E,lngLats:w,lngLat:r.unproject(E),originalEvent:a}),this._defaultPrevented=!1}}class ps extends u.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,r,a){super(e,{originalEvent:a}),this._defaultPrevented=!1}}class Mi{constructor(e,r){this._map=e,this._clickTolerance=r.clickTolerance}reset(){delete this._mousedownPos}wheel(e){return this._firePreventable(new ps(e.type,this._map,e))}mousedown(e,r){return this._mousedownPos=r,this._firePreventable(new ao(e.type,this._map,e))}mouseup(e){this._map.fire(new ao(e.type,this._map,e))}click(e,r){this._mousedownPos&&this._mousedownPos.dist(r)>=this._clickTolerance||this._map.fire(new ao(e.type,this._map,e))}dblclick(e){return this._firePreventable(new ao(e.type,this._map,e))}mouseover(e){this._map.fire(new ao(e.type,this._map,e))}mouseout(e){this._map.fire(new ao(e.type,this._map,e))}touchstart(e){return this._firePreventable(new pl(e.type,this._map,e))}touchmove(e){this._map.fire(new pl(e.type,this._map,e))}touchend(e){this._map.fire(new pl(e.type,this._map,e))}touchcancel(e){this._map.fire(new pl(e.type,this._map,e))}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Pi{constructor(e){this._map=e}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(e){this._map.fire(new ao(e.type,this._map,e))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ao("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._ignoreContextMenu||this._map.fire(new ao(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class wa{constructor(e){this._map=e}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(e){return this.transform.screenPointToLocation(u.P.convert(e),this._map.terrain)}}class $o{constructor(e,r){this._map=e,this._tr=new wa(e),this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=r.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(e,r){this.isEnabled()&&e.shiftKey&&e.button===0&&(ge.disableDrag(),this._startPos=this._lastPos=r,this._active=!0)}mousemoveWindow(e,r){if(!this._active)return;const a=r;if(this._lastPos.equals(a)||!this._box&&a.dist(this._startPos)<this._clickTolerance)return;const d=this._startPos;this._lastPos=a,this._box||(this._box=ge.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",e));const y=Math.min(d.x,a.x),w=Math.max(d.x,a.x),E=Math.min(d.y,a.y),A=Math.max(d.y,a.y);ge.setTransform(this._box,`translate(${y}px,${E}px)`),this._box.style.width=w-y+"px",this._box.style.height=A-E+"px"}mouseupWindow(e,r){if(!this._active||e.button!==0)return;const a=this._startPos,d=r;if(this.reset(),ge.suppressClick(),a.x!==d.x||a.y!==d.y)return this._map.fire(new u.l("boxzoomend",{originalEvent:e})),{cameraAnimation:y=>y.fitScreenCoordinates(a,d,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",e)}keydown(e){this._active&&e.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",e))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(ge.remove(this._box),this._box=null),ge.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(e,r){return this._map.fire(new u.l(e,{originalEvent:r}))}}function Ko(g,e){if(g.length!==e.length)throw new Error(`The number of touches and points are not equal - touches ${g.length}, points ${e.length}`);const r={};for(let a=0;a<g.length;a++)r[g[a].identifier]=e[a];return r}class ms{constructor(e){this.reset(),this.numTouches=e.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(e,r,a){(this.centroid||a.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=e.timeStamp),a.length===this.numTouches&&(this.centroid=function(d){const y=new u.P(0,0);for(const w of d)y._add(w);return y.div(d.length)}(r),this.touches=Ko(a,r)))}touchmove(e,r,a){if(this.aborted||!this.centroid)return;const d=Ko(a,r);for(const y in this.touches){const w=d[y];(!w||w.dist(this.touches[y])>30)&&(this.aborted=!0)}}touchend(e,r,a){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),a.length===0){const d=!this.aborted&&this.centroid;if(this.reset(),d)return d}}}class ml{constructor(e){this.singleTap=new ms(e),this.numTaps=e.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(e,r,a){this.singleTap.touchstart(e,r,a)}touchmove(e,r,a){this.singleTap.touchmove(e,r,a)}touchend(e,r,a){const d=this.singleTap.touchend(e,r,a);if(d){const y=e.timeStamp-this.lastTime<500,w=!this.lastTap||this.lastTap.dist(d)<30;if(y&&w||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=d,this.count===this.numTaps)return this.reset(),d}}}class Ds{constructor(e){this._tr=new wa(e),this._zoomIn=new ml({numTouches:1,numTaps:2}),this._zoomOut=new ml({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(e,r,a){this._zoomIn.touchstart(e,r,a),this._zoomOut.touchstart(e,r,a)}touchmove(e,r,a){this._zoomIn.touchmove(e,r,a),this._zoomOut.touchmove(e,r,a)}touchend(e,r,a){const d=this._zoomIn.touchend(e,r,a),y=this._zoomOut.touchend(e,r,a),w=this._tr;return d?(this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:w.zoom+1,around:w.unproject(d)},{originalEvent:e})}):y?(this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:w.zoom-1,around:w.unproject(y)},{originalEvent:e})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ao{constructor(e){this._enabled=!!e.enable,this._moveStateManager=e.moveStateManager,this._clickTolerance=e.clickTolerance||1,this._moveFunction=e.move,this._activateOnStart=!!e.activateOnStart,e.assignEvents(this),this.reset()}reset(e){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(e)}_move(...e){const r=this._moveFunction(...e);if(r.bearingDelta||r.pitchDelta||r.rollDelta||r.around||r.panDelta)return this._active=!0,r}dragStart(e,r){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(e)&&(this._moveStateManager.startMove(e),this._lastPoint=Array.isArray(r)?r[0]:r,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(e,r){if(!this.isEnabled())return;const a=this._lastPoint;if(!a)return;if(e.preventDefault(),!this._moveStateManager.isValidMoveEvent(e))return void this.reset(e);const d=Array.isArray(r)?r[0]:r;return!this._moved&&d.dist(a)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=d,this._move(a,d))}dragEnd(e){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(e)&&(this._moved&&ge.suppressClick(),this.reset(e))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Za={0:1,2:2};class nc{constructor(e){this._correctEvent=e.checkCorrectEvent}startMove(e){const r=ge.mouseButton(e);this._eventButton=r}endMove(e){delete this._eventButton}isValidStartEvent(e){return this._correctEvent(e)}isValidMoveEvent(e){return!function(r,a){const d=Za[a];return r.buttons===void 0||(r.buttons&d)!==d}(e,this._eventButton)}isValidEndEvent(e){return ge.mouseButton(e)===this._eventButton}}class Hi{constructor(){this._firstTouch=void 0}_isOneFingerTouch(e){return e.targetTouches.length===1}_isSameTouchEvent(e){return e.targetTouches[0].identifier===this._firstTouch}startMove(e){this._firstTouch=e.targetTouches[0].identifier}endMove(e){delete this._firstTouch}isValidStartEvent(e){return this._isOneFingerTouch(e)}isValidMoveEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}isValidEndEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}}class ic{constructor(e=new nc({checkCorrectEvent:()=>!0}),r=new Hi){this.mouseMoveStateManager=e,this.oneFingerTouchMoveStateManager=r}_executeRelevantHandler(e,r,a){return e instanceof MouseEvent?r(e):typeof TouchEvent<"u"&&e instanceof TouchEvent?a(e):void 0}startMove(e){this._executeRelevantHandler(e,r=>this.mouseMoveStateManager.startMove(r),r=>this.oneFingerTouchMoveStateManager.startMove(r))}endMove(e){this._executeRelevantHandler(e,r=>this.mouseMoveStateManager.endMove(r),r=>this.oneFingerTouchMoveStateManager.endMove(r))}isValidStartEvent(e){return this._executeRelevantHandler(e,r=>this.mouseMoveStateManager.isValidStartEvent(r),r=>this.oneFingerTouchMoveStateManager.isValidStartEvent(r))}isValidMoveEvent(e){return this._executeRelevantHandler(e,r=>this.mouseMoveStateManager.isValidMoveEvent(r),r=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(r))}isValidEndEvent(e){return this._executeRelevantHandler(e,r=>this.mouseMoveStateManager.isValidEndEvent(r),r=>this.oneFingerTouchMoveStateManager.isValidEndEvent(r))}}const Ga=g=>{g.mousedown=g.dragStart,g.mousemoveWindow=g.dragMove,g.mouseup=g.dragEnd,g.contextmenu=e=>{e.preventDefault()}};class Kh{constructor(e,r){this._clickTolerance=e.clickTolerance||1,this._map=r,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new u.P(0,0)}_shouldBePrevented(e){return e<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(e,r,a){return this._calculateTransform(e,r,a)}touchmove(e,r,a){if(this._active){if(!this._shouldBePrevented(a.length))return e.preventDefault(),this._calculateTransform(e,r,a);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",e)}}touchend(e,r,a){this._calculateTransform(e,r,a),this._active&&this._shouldBePrevented(a.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(e,r,a){a.length>0&&(this._active=!0);const d=Ko(a,r),y=new u.P(0,0),w=new u.P(0,0);let E=0;for(const O in d){const N=d[O],W=this._touches[O];W&&(y._add(N),w._add(N.sub(W)),E++,d[O]=N)}if(this._touches=d,this._shouldBePrevented(E)||!w.mag())return;const A=w.div(E);return this._sum._add(A),this._sum.mag()<this._clickTolerance?void 0:{around:y.div(E),panDelta:A}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class yh{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(e,r,a){this._firstTwoTouches||a.length<2||(this._firstTwoTouches=[a[0].identifier,a[1].identifier],this._start([r[0],r[1]]))}touchmove(e,r,a){if(!this._firstTwoTouches)return;e.preventDefault();const[d,y]=this._firstTwoTouches,w=_h(a,r,d),E=_h(a,r,y);if(!w||!E)return;const A=this._aroundCenter?null:w.add(E).div(2);return this._move([w,E],A,e)}touchend(e,r,a){if(!this._firstTwoTouches)return;const[d,y]=this._firstTwoTouches,w=_h(a,r,d),E=_h(a,r,y);w&&E||(this._active&&ge.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(e){this._enabled=!0,this._aroundCenter=!!e&&e.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function _h(g,e,r){for(let a=0;a<g.length;a++)if(g[a].identifier===r)return e[a]}function ru(g,e){return Math.log(g/e)/Math.LN2}class Sa extends yh{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(e){this._startDistance=this._distance=e[0].dist(e[1])}_move(e,r){const a=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(ru(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ru(this._distance,a),pinchAround:r}}}function Os(g,e){return 180*g.angleWith(e)/Math.PI}class ur extends yh{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}_move(e,r,a){const d=this._vector;if(this._vector=e[0].sub(e[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Os(this._vector,d),pinchAround:r}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());const r=25/(Math.PI*this._minDiameter)*360,a=Os(e,this._startVector);return Math.abs(a)<r}}function oc(g){return Math.abs(g.y)>Math.abs(g.x)}class sc extends yh{constructor(e){super(),this._currentTouchCount=0,this._map=e}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(e,r,a){super.touchstart(e,r,a),this._currentTouchCount=a.length}_start(e){this._lastPoints=e,oc(e[0].sub(e[1]))&&(this._valid=!1)}_move(e,r,a){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const d=e[0].sub(this._lastPoints[0]),y=e[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(d,y,a.timeStamp),this._valid?(this._lastPoints=e,this._active=!0,{pitchDelta:(d.y+y.y)/2*-.5}):void 0}gestureBeginsVertically(e,r,a){if(this._valid!==void 0)return this._valid;const d=e.mag()>=2,y=r.mag()>=2;if(!d&&!y)return;if(!d||!y)return this._firstMove===void 0&&(this._firstMove=a),a-this._firstMove<100&&void 0;const w=e.y>0==r.y>0;return oc(e)&&oc(r)&&w}}const Ta={panStep:100,bearingStep:15,pitchStep:10};class Xo{constructor(e){this._tr=new wa(e);const r=Ta;this._panStep=r.panStep,this._bearingStep=r.bearingStep,this._pitchStep=r.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let r=0,a=0,d=0,y=0,w=0;switch(e.keyCode){case 61:case 107:case 171:case 187:r=1;break;case 189:case 109:case 173:r=-1;break;case 37:e.shiftKey?a=-1:(e.preventDefault(),y=-1);break;case 39:e.shiftKey?a=1:(e.preventDefault(),y=1);break;case 38:e.shiftKey?d=1:(e.preventDefault(),w=-1);break;case 40:e.shiftKey?d=-1:(e.preventDefault(),w=1);break;default:return}return this._rotationDisabled&&(a=0,d=0),{cameraAnimation:E=>{const A=this._tr;E.easeTo({duration:300,easeId:"keyboardHandler",easing:gl,zoom:r?Math.round(A.zoom)+r*(e.shiftKey?2:1):A.zoom,bearing:A.bearing+a*this._bearingStep,pitch:A.pitch+d*this._pitchStep,offset:[-y*this._panStep,-w*this._panStep],center:A.center},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function gl(g){return g*(2-g)}const Wa=4.000244140625;class dn{constructor(e,r){this._onTimeout=a=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(a)},this._map=e,this._tr=new wa(e),this._triggerRenderFrame=r,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(e){this._defaultZoomRate=e}setWheelZoomRate(e){this._wheelZoomRate=e}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&e.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(e){return!!this._map.cooperativeGestures.isEnabled()&&!(e.ctrlKey||this._map.cooperativeGestures.isBypassed(e))}wheel(e){if(!this.isEnabled())return;if(this._shouldBePrevented(e))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",e);let r=e.deltaMode===WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY;const a=Te.now(),d=a-(this._lastWheelEventTime||0);this._lastWheelEventTime=a,r!==0&&r%Wa==0?this._type="wheel":r!==0&&Math.abs(r)<4?this._type="trackpad":d>400?(this._type=null,this._lastValue=r,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(d*r)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,r+=this._lastValue)),e.shiftKey&&r&&(r/=4),this._type&&(this._lastWheelEvent=e,this._delta-=r,this._active||this._start(e)),e.preventDefault()}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const r=ge.mousePos(this._map.getCanvas(),e),a=this._tr;this._aroundPoint=this._aroundCenter?a.transform.locationToScreenPoint(u.Q.convert(a.center)):r,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const e=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const E=e.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=E),typeof this._targetZoom=="number"&&(this._targetZoom+=E)}if(this._delta!==0){const E=this._type==="wheel"&&Math.abs(this._delta)>Wa?this._wheelZoomRate:this._defaultZoomRate;let A=2/(1+Math.exp(-Math.abs(this._delta*E)));this._delta<0&&A!==0&&(A=1/A);const O=typeof this._targetZoom!="number"?e.scale:u.ac(this._targetZoom);this._targetZoom=e.getConstrained(e.getCameraLngLat(),u.ah(O*A)).zoom,this._type==="wheel"&&(this._startZoom=e.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const r=typeof this._targetZoom!="number"?e.zoom:this._targetZoom,a=this._startZoom,d=this._easing;let y,w=!1;if(this._type==="wheel"&&a&&d){const E=Te.now()-this._lastWheelEventTime,A=Math.min((E+5)/200,1),O=d(A);y=u.B.number(a,r,O),A<1?this._frameId||(this._frameId=!0):w=!0}else y=r,w=!0;return this._active=!0,w&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=y,{noInertia:!0,needsRenderFrame:!w,zoomDelta:y-e.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(e){let r=u.cf;if(this._prevEase){const a=this._prevEase,d=(Te.now()-a.start)/a.duration,y=a.easing(d+.01)-a.easing(d),w=.27/Math.sqrt(y*y+1e-4)*.01,E=Math.sqrt(.0729-w*w);r=u.cd(w,E,.25,1)}return this._prevEase={start:Te.now(),duration:e,easing:r},r}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Bl{constructor(e,r){this._clickZoom=e,this._tapZoom=r}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class ff{constructor(e){this._tr=new wa(e),this.reset()}reset(){this._active=!1}dblclick(e,r){return e.preventDefault(),{cameraAnimation:a=>{a.easeTo({duration:300,zoom:this._tr.zoom+(e.shiftKey?-1:1),around:this._tr.unproject(r)},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ac{constructor(){this._tap=new ml({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(e,r,a){if(!this._swipePoint)if(this._tapTime){const d=r[0],y=e.timeStamp-this._tapTime<500,w=this._tapPoint.dist(d)<30;y&&w?a.length>0&&(this._swipePoint=d,this._swipeTouch=a[0].identifier):this.reset()}else this._tap.touchstart(e,r,a)}touchmove(e,r,a){if(this._tapTime){if(this._swipePoint){if(a[0].identifier!==this._swipeTouch)return;const d=r[0],y=d.y-this._swipePoint.y;return this._swipePoint=d,e.preventDefault(),this._active=!0,{zoomDelta:y/128}}}else this._tap.touchmove(e,r,a)}touchend(e,r,a){if(this._tapTime)this._swipePoint&&a.length===0&&this.reset();else{const d=this._tap.touchend(e,r,a);d&&(this._tapTime=e.timeStamp,this._tapPoint=d)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Au{constructor(e,r,a){this._el=e,this._mousePan=r,this._touchPan=a}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Yo{constructor(e,r,a,d){this._pitchWithRotate=e.pitchWithRotate,this._rollEnabled=e.rollEnabled,this._mouseRotate=r,this._mousePitch=a,this._mouseRoll=d}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Fs{constructor(e,r,a,d){this._el=e,this._touchZoom=r,this._touchRotate=a,this._tapDragZoom=d,this._rotationDisabled=!1,this._enabled=!0}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class xi{constructor(e,r){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=e,this._options=r,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const e=this._map.getCanvasContainer();e.classList.add("maplibregl-cooperative-gestures"),this._container=ge.create("div","maplibregl-cooperative-gesture-screen",e);let r=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(r=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const a=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),d=document.createElement("div");d.className="maplibregl-desktop-message",d.textContent=r,this._container.appendChild(d);const y=document.createElement("div");y.className="maplibregl-mobile-message",y.textContent=a,this._container.appendChild(y),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(ge.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(e){return e[this._bypassKey]}notifyGestureBlocked(e,r){this._enabled&&(this._map.fire(new u.l("cooperativegestureprevented",{gestureType:e,originalEvent:r})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Bs=g=>g.zoom||g.drag||g.roll||g.pitch||g.rotate;class Nl extends u.l{}function lc(g){return g.panDelta&&g.panDelta.mag()||g.zoomDelta||g.bearingDelta||g.pitchDelta||g.rollDelta}class nu{constructor(e,r){this.handleWindowEvent=d=>{this.handleEvent(d,`${d.type}Window`)},this.handleEvent=(d,y)=>{if(d.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const w=d.type==="renderFrame"?void 0:d,E={needsRenderFrame:!1},A={},O={};for(const{handlerName:G,handler:Q,allowed:ie}of this._handlers){if(!Q.isEnabled())continue;let be;if(this._blockedByActive(O,ie,G))Q.reset();else if(Q[y||d.type]){if(u.cg(d,y||d.type)){const xe=ge.mousePos(this._map.getCanvas(),d);be=Q[y||d.type](d,xe)}else if(u.ch(d,y||d.type)){const xe=this._getMapTouches(d.touches),Se=ge.touchPos(this._map.getCanvas(),xe);be=Q[y||d.type](d,Se,xe)}else u.ci(y||d.type)||(be=Q[y||d.type](d));this.mergeHandlerResult(E,A,be,G,w),be&&be.needsRenderFrame&&this._triggerRenderFrame()}(be||Q.isActive())&&(O[G]=Q)}const N={};for(const G in this._previousActiveHandlers)O[G]||(N[G]=w);this._previousActiveHandlers=O,(Object.keys(N).length||lc(E))&&(this._changes.push([E,A,N]),this._triggerRenderFrame()),(Object.keys(O).length||lc(E))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:W}=E;W&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],W(this._map))},this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new qo(e),this._bearingSnap=r.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(r);const a=this._el;this._listeners=[[a,"touchstart",{passive:!0}],[a,"touchmove",{passive:!1}],[a,"touchend",void 0],[a,"touchcancel",void 0],[a,"mousedown",void 0],[a,"mousemove",void 0],[a,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[a,"mouseover",void 0],[a,"mouseout",void 0],[a,"dblclick",void 0],[a,"click",void 0],[a,"keydown",{capture:!1}],[a,"keyup",void 0],[a,"wheel",{passive:!1}],[a,"contextmenu",void 0],[window,"blur",void 0]];for(const[d,y,w]of this._listeners)ge.addEventListener(d,y,d===document?this.handleWindowEvent:this.handleEvent,w)}destroy(){for(const[e,r,a]of this._listeners)ge.removeEventListener(e,r,e===document?this.handleWindowEvent:this.handleEvent,a)}_addDefaultHandlers(e){const r=this._map,a=r.getCanvasContainer();this._add("mapEvent",new Mi(r,e));const d=r.boxZoom=new $o(r,e);this._add("boxZoom",d),e.interactive&&e.boxZoom&&d.enable();const y=r.cooperativeGestures=new xi(r,e.cooperativeGestures);this._add("cooperativeGestures",y),e.cooperativeGestures&&y.enable();const w=new Ds(r),E=new ff(r);r.doubleClickZoom=new Bl(E,w),this._add("tapZoom",w),this._add("clickZoom",E),e.interactive&&e.doubleClickZoom&&r.doubleClickZoom.enable();const A=new ac;this._add("tapDragZoom",A);const O=r.touchPitch=new sc(r);this._add("touchPitch",O),e.interactive&&e.touchPitch&&r.touchPitch.enable(e.touchPitch);const N=()=>r.project(r.getCenter()),W=function({enable:ke,clickTolerance:Oe,aroundCenter:$e=!0,minPixelCenterThreshold:Ue=100,rotateDegreesPerPixelMoved:lt=.8},Mt){const Qe=new nc({checkCorrectEvent:dt=>ge.mouseButton(dt)===0&&dt.ctrlKey||ge.mouseButton(dt)===2&&!dt.ctrlKey});return new Ao({clickTolerance:Oe,move:(dt,Pt)=>{const er=Mt();if($e&&Math.abs(er.y-dt.y)>Ue)return{bearingDelta:u.ce(new u.P(dt.x,Pt.y),Pt,er)};let tr=(Pt.x-dt.x)*lt;return $e&&Pt.y<er.y&&(tr=-tr),{bearingDelta:tr}},moveStateManager:Qe,enable:ke,assignEvents:Ga})}(e,N),G=function({enable:ke,clickTolerance:Oe,pitchDegreesPerPixelMoved:$e=-.5}){const Ue=new nc({checkCorrectEvent:lt=>ge.mouseButton(lt)===0&&lt.ctrlKey||ge.mouseButton(lt)===2});return new Ao({clickTolerance:Oe,move:(lt,Mt)=>({pitchDelta:(Mt.y-lt.y)*$e}),moveStateManager:Ue,enable:ke,assignEvents:Ga})}(e),Q=function({enable:ke,clickTolerance:Oe,rollDegreesPerPixelMoved:$e=.3},Ue){const lt=new nc({checkCorrectEvent:Mt=>ge.mouseButton(Mt)===2&&Mt.ctrlKey});return new Ao({clickTolerance:Oe,move:(Mt,Qe)=>{const dt=Ue();let Pt=(Qe.x-Mt.x)*$e;return Qe.y<dt.y&&(Pt=-Pt),{rollDelta:Pt}},moveStateManager:lt,enable:ke,assignEvents:Ga})}(e,N);r.dragRotate=new Yo(e,W,G,Q),this._add("mouseRotate",W,["mousePitch"]),this._add("mousePitch",G,["mouseRotate","mouseRoll"]),this._add("mouseRoll",Q,["mousePitch"]),e.interactive&&e.dragRotate&&r.dragRotate.enable();const ie=function({enable:ke,clickTolerance:Oe}){const $e=new nc({checkCorrectEvent:Ue=>ge.mouseButton(Ue)===0&&!Ue.ctrlKey});return new Ao({clickTolerance:Oe,move:(Ue,lt)=>({around:lt,panDelta:lt.sub(Ue)}),activateOnStart:!0,moveStateManager:$e,enable:ke,assignEvents:Ga})}(e),be=new Kh(e,r);r.dragPan=new Au(a,ie,be),this._add("mousePan",ie),this._add("touchPan",be,["touchZoom","touchRotate"]),e.interactive&&e.dragPan&&r.dragPan.enable(e.dragPan);const xe=new ur,Se=new Sa;r.touchZoomRotate=new Fs(a,Se,xe,A),this._add("touchRotate",xe,["touchPan","touchZoom"]),this._add("touchZoom",Se,["touchPan","touchRotate"]),e.interactive&&e.touchZoomRotate&&r.touchZoomRotate.enable(e.touchZoomRotate);const Ae=r.scrollZoom=new dn(r,()=>this._triggerRenderFrame());this._add("scrollZoom",Ae,["mousePan"]),e.interactive&&e.scrollZoom&&r.scrollZoom.enable(e.scrollZoom);const De=r.keyboard=new Xo(r);this._add("keyboard",De),e.interactive&&e.keyboard&&r.keyboard.enable(),this._add("blockableMapEvent",new Pi(r))}_add(e,r,a){this._handlers.push({handlerName:e,handler:r,allowed:a}),this._handlersById[e]=r}stop(e){if(!this._updatingCamera){for(const{handler:r}of this._handlers)r.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}isActive(){for(const{handler:e}of this._handlers)if(e.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Bs(this._eventsInProgress)||this.isZooming()}_blockedByActive(e,r,a){for(const d in e)if(d!==a&&(!r||r.indexOf(d)<0))return!0;return!1}_getMapTouches(e){const r=[];for(const a of e)this._el.contains(a.target)&&r.push(a);return r}mergeHandlerResult(e,r,a,d,y){if(!a)return;u.e(e,a);const w={handlerName:d,originalEvent:a.originalEvent||y};a.zoomDelta!==void 0&&(r.zoom=w),a.panDelta!==void 0&&(r.drag=w),a.rollDelta!==void 0&&(r.roll=w),a.pitchDelta!==void 0&&(r.pitch=w),a.bearingDelta!==void 0&&(r.rotate=w)}_applyChanges(){const e={},r={},a={};for(const[d,y,w]of this._changes)d.panDelta&&(e.panDelta=(e.panDelta||new u.P(0,0))._add(d.panDelta)),d.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+d.zoomDelta),d.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+d.bearingDelta),d.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+d.pitchDelta),d.rollDelta&&(e.rollDelta=(e.rollDelta||0)+d.rollDelta),d.around!==void 0&&(e.around=d.around),d.pinchAround!==void 0&&(e.pinchAround=d.pinchAround),d.noInertia&&(e.noInertia=d.noInertia),u.e(r,y),u.e(a,w);this._updateMapTransform(e,r,a),this._changes=[]}_updateMapTransform(e,r,a){const d=this._map,y=d._getTransformForUpdate(),w=d.terrain;if(!(lc(e)||w&&this._terrainMovement))return this._fireEvents(r,a,!0);d._stop(!0);let{panDelta:E,zoomDelta:A,bearingDelta:O,pitchDelta:N,rollDelta:W,around:G,pinchAround:Q}=e;Q!==void 0&&(G=Q),G=G||d.transform.centerPoint,w&&!y.isPointOnMapSurface(G)&&(G=y.centerPoint);const ie={panDelta:E,zoomDelta:A,rollDelta:W,pitchDelta:N,bearingDelta:O,around:G};this._map.cameraHelper.useGlobeControls&&!y.isPointOnMapSurface(G)&&(G=y.centerPoint);const be=G.distSqr(y.centerPoint)<.01?y.center:y.screenPointToLocation(E?G.sub(E):G);w?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(ie,y),this._terrainMovement||!r.drag&&!r.zoom?r.drag&&this._terrainMovement?y.setCenter(y.screenPointToLocation(y.centerPoint.sub(E))):this._map.cameraHelper.handleMapControlsPan(ie,y,be):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(ie,y,be))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(ie,y),this._map.cameraHelper.handleMapControlsPan(ie,y,be)),d._applyUpdatedTransform(y),this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(r,a,!0)}_fireEvents(e,r,a){const d=Bs(this._eventsInProgress),y=Bs(e),w={};for(const W in e){const{originalEvent:G}=e[W];this._eventsInProgress[W]||(w[`${W}start`]=G),this._eventsInProgress[W]=e[W]}!d&&y&&this._fireEvent("movestart",y.originalEvent);for(const W in w)this._fireEvent(W,w[W]);y&&this._fireEvent("move",y.originalEvent);for(const W in e){const{originalEvent:G}=e[W];this._fireEvent(W,G)}const E={};let A;for(const W in this._eventsInProgress){const{handlerName:G,originalEvent:Q}=this._eventsInProgress[W];this._handlersById[G].isActive()||(delete this._eventsInProgress[W],A=r[G]||Q,E[`${W}end`]=A)}for(const W in E)this._fireEvent(W,E[W]);const O=Bs(this._eventsInProgress),N=(d||y)&&!O;if(N&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const W=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&W.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(W)}if(a&&N){this._updatingCamera=!0;const W=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),G=Q=>Q!==0&&-this._bearingSnap<Q&&Q<this._bearingSnap;!W||!W.essential&&Te.prefersReducedMotion?(this._map.fire(new u.l("moveend",{originalEvent:A})),G(this._map.getBearing())&&this._map.resetNorth()):(G(W.bearing||this._map.getBearing())&&(W.bearing=0),W.freezeElevation=!0,this._map.easeTo(W,{originalEvent:A})),this._updatingCamera=!1}}_fireEvent(e,r){this._map.fire(new u.l(e,r?{originalEvent:r}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(e=>{delete this._frameId,this.handleEvent(new Nl("renderFrame",{timeStamp:e})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class oa extends u.E{constructor(e,r,a){super(),this._renderFrameCallback=()=>{const d=Math.min((Te.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(d)),d<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=a.bearingSnap,this.cameraHelper=r,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(e,r){e.apply(this.transform),this.transform=e,this.cameraHelper=r}getCenter(){return new u.Q(this.transform.center.lng,this.transform.center.lat)}setCenter(e,r){return this.jumpTo({center:e},r)}getCenterElevation(){return this.transform.elevation}setCenterElevation(e,r){return this.jumpTo({elevation:e},r),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(e){this._centerClampedToGround=e}panBy(e,r,a){return e=u.P.convert(e).mult(-1),this.panTo(this.transform.center,u.e({offset:e},r),a)}panTo(e,r,a){return this.easeTo(u.e({center:e},r),a)}getZoom(){return this.transform.zoom}setZoom(e,r){return this.jumpTo({zoom:e},r),this}zoomTo(e,r,a){return this.easeTo(u.e({zoom:e},r),a)}zoomIn(e,r){return this.zoomTo(this.getZoom()+1,e,r),this}zoomOut(e,r){return this.zoomTo(this.getZoom()-1,e,r),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(e,r){return e!=this.transform.fov&&(this.transform.setFov(e),this.fire(new u.l("movestart",r)).fire(new u.l("move",r)).fire(new u.l("moveend",r))),this}getBearing(){return this.transform.bearing}setBearing(e,r){return this.jumpTo({bearing:e},r),this}getPadding(){return this.transform.padding}setPadding(e,r){return this.jumpTo({padding:e},r),this}rotateTo(e,r,a){return this.easeTo(u.e({bearing:e},r),a)}resetNorth(e,r){return this.rotateTo(0,u.e({duration:1e3},e),r),this}resetNorthPitch(e,r){return this.easeTo(u.e({bearing:0,pitch:0,roll:0,duration:1e3},e),r),this}snapToNorth(e,r){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,r):this}getPitch(){return this.transform.pitch}setPitch(e,r){return this.jumpTo({pitch:e},r),this}getRoll(){return this.transform.roll}setRoll(e,r){return this.jumpTo({roll:e},r),this}cameraForBounds(e,r){e=br.convert(e).adjustAntiMeridian();const a=r&&r.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),a,r)}_cameraForBoxAndBearing(e,r,a,d){const y={top:0,bottom:0,right:0,left:0};if(typeof(d=u.e({padding:y,offset:[0,0],maxZoom:this.transform.maxZoom},d)).padding=="number"){const O=d.padding;d.padding={top:O,bottom:O,right:O,left:O}}const w=u.e(y,d.padding);d.padding=w;const E=this.transform,A=new br(e,r);return this.cameraHelper.cameraForBoxAndBearing(d,w,A,a,E)}fitBounds(e,r,a){return this._fitInternal(this.cameraForBounds(e,r),r,a)}fitScreenCoordinates(e,r,a,d,y){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(u.P.convert(e)),this.transform.screenPointToLocation(u.P.convert(r)),a,d),d,y)}_fitInternal(e,r,a){return e?(delete(r=u.e(e,r)).padding,r.linear?this.easeTo(r,a):this.flyTo(r,a)):this}jumpTo(e,r){this.stop();const a=this._getTransformForUpdate();let d=!1,y=!1,w=!1;const E=a.zoom;this.cameraHelper.handleJumpToCenterZoom(a,e);const A=a.zoom!==E;return"elevation"in e&&a.elevation!==+e.elevation&&a.setElevation(+e.elevation),"bearing"in e&&a.bearing!==+e.bearing&&(d=!0,a.setBearing(+e.bearing)),"pitch"in e&&a.pitch!==+e.pitch&&(y=!0,a.setPitch(+e.pitch)),"roll"in e&&a.roll!==+e.roll&&(w=!0,a.setRoll(+e.roll)),e.padding==null||a.isPaddingEqual(e.padding)||a.setPadding(e.padding),this._applyUpdatedTransform(a),this.fire(new u.l("movestart",r)).fire(new u.l("move",r)),A&&this.fire(new u.l("zoomstart",r)).fire(new u.l("zoom",r)).fire(new u.l("zoomend",r)),d&&this.fire(new u.l("rotatestart",r)).fire(new u.l("rotate",r)).fire(new u.l("rotateend",r)),y&&this.fire(new u.l("pitchstart",r)).fire(new u.l("pitch",r)).fire(new u.l("pitchend",r)),w&&this.fire(new u.l("rollstart",r)).fire(new u.l("roll",r)).fire(new u.l("rollend",r)),this.fire(new u.l("moveend",r))}calculateCameraOptionsFromTo(e,r,a,d=0){const y=u.$.fromLngLat(e,r),w=u.$.fromLngLat(a,d),E=w.x-y.x,A=w.y-y.y,O=w.z-y.z,N=Math.hypot(E,A,O);if(N===0)throw new Error("Can't calculate camera options with same From and To");const W=Math.hypot(E,A),G=u.ah(this.transform.cameraToCenterDistance/N/this.transform.tileSize),Q=180*Math.atan2(E,-A)/Math.PI;let ie=180*Math.acos(W/N)/Math.PI;return ie=O<0?90-ie:90+ie,{center:w.toLngLat(),elevation:d,zoom:G,pitch:ie,bearing:Q}}calculateCameraOptionsFromCameraLngLatAltRotation(e,r,a,d,y){const w=this.transform.calculateCenterFromCameraLngLatAlt(e,r,a,d);return{center:w.center,elevation:w.elevation,zoom:w.zoom,bearing:a,pitch:d,roll:y}}easeTo(e,r){this._stop(!1,e.easeId),((e=u.e({offset:[0,0],duration:500,easing:u.cf},e)).animate===!1||!e.essential&&Te.prefersReducedMotion)&&(e.duration=0);const a=this._getTransformForUpdate(),d=this.getBearing(),y=a.pitch,w=a.roll,E="bearing"in e?this._normalizeBearing(e.bearing,d):d,A="pitch"in e?+e.pitch:y,O="roll"in e?this._normalizeBearing(e.roll,w):w,N="padding"in e?e.padding:a.padding,W=u.P.convert(e.offset);let G,Q;e.around&&(G=u.Q.convert(e.around),Q=a.locationToScreenPoint(G));const ie={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},be=this.cameraHelper.handleEaseTo(a,{bearing:E,pitch:A,roll:O,padding:N,around:G,aroundPoint:Q,offsetAsPoint:W,offset:e.offset,zoom:e.zoom,center:e.center});return this._rotating=this._rotating||d!==E,this._pitching=this._pitching||A!==y,this._rolling=this._rolling||O!==w,this._padding=!a.isPaddingEqual(N),this._zooming=this._zooming||be.isZooming,this._easeId=e.easeId,this._prepareEase(r,e.noMoveStart,ie),this.terrain&&this._prepareElevation(be.elevationCenter),this._ease(xe=>{be.easeFunc(xe),this.terrain&&!e.freezeElevation&&this._updateElevation(xe),this._applyUpdatedTransform(a),this._fireMoveEvents(r)},xe=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(r,xe)},e),this}_prepareEase(e,r,a={}){this._moving=!0,r||a.moving||this.fire(new u.l("movestart",e)),this._zooming&&!a.zooming&&this.fire(new u.l("zoomstart",e)),this._rotating&&!a.rotating&&this.fire(new u.l("rotatestart",e)),this._pitching&&!a.pitching&&this.fire(new u.l("pitchstart",e)),this._rolling&&!a.rolling&&this.fire(new u.l("rollstart",e))}_prepareElevation(e){this._elevationCenter=e,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(e,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(e){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const r=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(e<1&&r!==this._elevationTarget){const a=this._elevationTarget-this._elevationStart;this._elevationStart+=e*(a-(r-(a*e+this._elevationStart))/(1-e)),this._elevationTarget=r}this.transform.setElevation(u.B.number(this._elevationStart,this._elevationTarget,e))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(e){if(!this.terrain&&e.elevation>=0&&e.pitch<=90)return{};const r=e.getCameraLngLat(),a=e.getCameraAltitude(),d=this.terrain?this.terrain.getElevationForLngLatZoom(r,e.zoom):0;if(a<d){const y=this.calculateCameraOptionsFromTo(r,d,e.center,e.elevation);return{pitch:y.pitch,zoom:y.zoom}}return{}}_applyUpdatedTransform(e){const r=[];if(r.push(d=>this._elevateCameraIfInsideTerrain(d)),this.transformCameraUpdate&&r.push(d=>this.transformCameraUpdate(d)),!r.length)return;const a=e.clone();for(const d of r){const y=a.clone(),{center:w,zoom:E,roll:A,pitch:O,bearing:N,elevation:W}=d(y);w&&y.setCenter(w),W!==void 0&&y.setElevation(W),E!==void 0&&y.setZoom(E),A!==void 0&&y.setRoll(A),O!==void 0&&y.setPitch(O),N!==void 0&&y.setBearing(N),a.apply(y)}this.transform.apply(a)}_fireMoveEvents(e){this.fire(new u.l("move",e)),this._zooming&&this.fire(new u.l("zoom",e)),this._rotating&&this.fire(new u.l("rotate",e)),this._pitching&&this.fire(new u.l("pitch",e)),this._rolling&&this.fire(new u.l("roll",e))}_afterEase(e,r){if(this._easeId&&r&&this._easeId===r)return;delete this._easeId;const a=this._zooming,d=this._rotating,y=this._pitching,w=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,a&&this.fire(new u.l("zoomend",e)),d&&this.fire(new u.l("rotateend",e)),y&&this.fire(new u.l("pitchend",e)),w&&this.fire(new u.l("rollend",e)),this.fire(new u.l("moveend",e))}flyTo(e,r){if(!e.essential&&Te.prefersReducedMotion){const Pt=u.O(e,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(Pt,r)}this.stop(),e=u.e({offset:[0,0],speed:1.2,curve:1.42,easing:u.cf},e);const a=this._getTransformForUpdate(),d=a.bearing,y=a.pitch,w=a.roll,E=a.padding,A="bearing"in e?this._normalizeBearing(e.bearing,d):d,O="pitch"in e?+e.pitch:y,N="roll"in e?this._normalizeBearing(e.roll,w):w,W="padding"in e?e.padding:a.padding,G=u.P.convert(e.offset);let Q=a.centerPoint.add(G);const ie=a.screenPointToLocation(Q),be=this.cameraHelper.handleFlyTo(a,{bearing:A,pitch:O,roll:N,padding:W,locationAtOffset:ie,offsetAsPoint:G,center:e.center,minZoom:e.minZoom,zoom:e.zoom});let xe=e.curve;const Se=Math.max(a.width,a.height),Ae=Se/be.scaleOfZoom,De=be.pixelPathLength;typeof be.scaleOfMinZoom=="number"&&(xe=Math.sqrt(Se/be.scaleOfMinZoom/De*2));const ke=xe*xe;function Oe(Pt){const er=(Ae*Ae-Se*Se+(Pt?-1:1)*ke*ke*De*De)/(2*(Pt?Ae:Se)*ke*De);return Math.log(Math.sqrt(er*er+1)-er)}function $e(Pt){return(Math.exp(Pt)-Math.exp(-Pt))/2}function Ue(Pt){return(Math.exp(Pt)+Math.exp(-Pt))/2}const lt=Oe(!1);let Mt=function(Pt){return Ue(lt)/Ue(lt+xe*Pt)},Qe=function(Pt){return Se*((Ue(lt)*($e(er=lt+xe*Pt)/Ue(er))-$e(lt))/ke)/De;var er},dt=(Oe(!0)-lt)/xe;if(Math.abs(De)<2e-6||!isFinite(dt)){if(Math.abs(Se-Ae)<1e-6)return this.easeTo(e,r);const Pt=Ae<Se?-1:1;dt=Math.abs(Math.log(Ae/Se))/xe,Qe=()=>0,Mt=er=>Math.exp(Pt*xe*er)}return e.duration="duration"in e?+e.duration:1e3*dt/("screenSpeed"in e?+e.screenSpeed/xe:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=d!==A,this._pitching=O!==y,this._rolling=N!==w,this._padding=!a.isPaddingEqual(W),this._prepareEase(r,!1),this.terrain&&this._prepareElevation(be.targetCenter),this._ease(Pt=>{const er=Pt*dt,tr=1/Mt(er),Bt=Qe(er);this._rotating&&a.setBearing(u.B.number(d,A,Pt)),this._pitching&&a.setPitch(u.B.number(y,O,Pt)),this._rolling&&a.setRoll(u.B.number(w,N,Pt)),this._padding&&(a.interpolatePadding(E,W,Pt),Q=a.centerPoint.add(G)),be.easeFunc(Pt,tr,Bt,Q),this.terrain&&!e.freezeElevation&&this._updateElevation(Pt),this._applyUpdatedTransform(a),this._fireMoveEvents(r)},()=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(r)},e),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(e,r){var a;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const d=this._onEaseEnd;delete this._onEaseEnd,d.call(this,r)}return e||(a=this.handlers)===null||a===void 0||a.stop(!1),this}_ease(e,r,a){a.animate===!1||a.duration===0?(e(1),r()):(this._easeStart=Te.now(),this._easeOptions=a,this._onEaseFrame=e,this._onEaseEnd=r,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(e,r){e=u.aL(e,-180,180);const a=Math.abs(e-r);return Math.abs(e-360-r)<a&&(e-=360),Math.abs(e+360-r)<a&&(e+=360),e}queryTerrainElevation(e){return this.terrain?this.terrain.getElevationForLngLatZoom(u.Q.convert(e),this.transform.tileZoom):null}}const $l={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class si{constructor(e=$l){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=r=>{!r||r.sourceDataType!=="metadata"&&r.sourceDataType!=="visibility"&&r.dataType!=="style"&&r.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=e}getDefaultPosition(){return"bottom-right"}onAdd(e){return this._map=e,this._compact=this.options.compact,this._container=ge.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=ge.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=ge.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){ge.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(e,r){const a=this._map._getUIString(`AttributionControl.${r}`);e.title=a,e.setAttribute("aria-label",a)}_updateAttributions(){if(!this._map.style)return;let e=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=e.concat(this.options.customAttribution.map(d=>typeof d!="string"?"":d)):typeof this.options.customAttribution=="string"&&e.push(this.options.customAttribution)),this._map.style.stylesheet){const d=this._map.style.stylesheet;this.styleOwner=d.owner,this.styleId=d.id}const r=this._map.style.sourceCaches;for(const d in r){const y=r[d];if(y.used||y.usedForTerrain){const w=y.getSource();w.attribution&&e.indexOf(w.attribution)<0&&e.push(w.attribution)}}e=e.filter(d=>String(d).trim()),e.sort((d,y)=>d.length-y.length),e=e.filter((d,y)=>{for(let w=y+1;w<e.length;w++)if(e[w].indexOf(d)>=0)return!1;return!0});const a=e.join(" | ");a!==this._attribHTML&&(this._attribHTML=a,e.length?(this._innerContainer.innerHTML=ge.sanitize(a),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class uc{constructor(e={}){this._updateCompact=()=>{const r=this._container.children;if(r.length){const a=r[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&a.classList.add("maplibregl-compact"):a.classList.remove("maplibregl-compact")}},this.options=e}getDefaultPosition(){return"bottom-left"}onAdd(e){this._map=e,this._compact=this.options&&this.options.compact,this._container=ge.create("div","maplibregl-ctrl");const r=ge.create("a","maplibregl-ctrl-logo");return r.target="_blank",r.rel="noopener nofollow",r.href="https://maplibre.org/",r.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),r.setAttribute("rel","noopener nofollow"),this._container.appendChild(r),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){ge.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Ha{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(e){const r=++this._id;return this._queue.push({callback:e,id:r,cancelled:!1}),r}remove(e){const r=this._currentlyRunning,a=r?this._queue.concat(r):this._queue;for(const d of a)if(d.id===e)return void(d.cancelled=!0)}run(e=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const r=this._currentlyRunning=this._queue;this._queue=[];for(const a of r)if(!a.cancelled&&(a.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var yl=u.aG([{name:"a_pos3d",type:"Int16",components:3}]);class zd extends u.E{constructor(e){super(),this._lastTilesetChange=Te.now(),this.sourceCache=e,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=e._source.tileSize*2**this.deltaZoom,e.usedForTerrain=!0,e.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(e,r){this.sourceCache.update(e,r),this._renderableTilesKeys=[];const a={};for(const d of He(e,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:r,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))a[d.key]=!0,this._renderableTilesKeys.push(d.key),this._tiles[d.key]||(d.terrainRttPosMatrix32f=new Float64Array(16),u.bQ(d.terrainRttPosMatrix32f,0,u.Z,u.Z,0,0,1),this._tiles[d.key]=new eo(d,this.tileSize),this._lastTilesetChange=Te.now());for(const d in this._tiles)a[d]||delete this._tiles[d]}freeRtt(e){for(const r in this._tiles){const a=this._tiles[r];(!e||a.tileID.equals(e)||a.tileID.isChildOf(e)||e.isChildOf(a.tileID))&&(a.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(e=>this.getTileByID(e))}getTileByID(e){return this._tiles[e]}getTerrainCoords(e,r){return r?this._getTerrainCoordsForTileRanges(e,r):this._getTerrainCoordsForRegularTile(e)}_getTerrainCoordsForRegularTile(e){const r={};for(const a of this._renderableTilesKeys){const d=this._tiles[a].tileID,y=e.clone(),w=u.b2();if(d.canonical.equals(e.canonical))u.bQ(w,0,u.Z,u.Z,0,0,1);else if(d.canonical.isChildOf(e.canonical)){const E=d.canonical.z-e.canonical.z,A=d.canonical.x-(d.canonical.x>>E<<E),O=d.canonical.y-(d.canonical.y>>E<<E),N=u.Z>>E;u.bQ(w,0,N,N,0,0,1),u.L(w,w,[-A*N,-O*N,0])}else{if(!e.canonical.isChildOf(d.canonical))continue;{const E=e.canonical.z-d.canonical.z,A=e.canonical.x-(e.canonical.x>>E<<E),O=e.canonical.y-(e.canonical.y>>E<<E),N=u.Z>>E;u.bQ(w,0,u.Z,u.Z,0,0,1),u.L(w,w,[A*N,O*N,0]),u.M(w,w,[1/2**E,1/2**E,0])}}y.terrainRttPosMatrix32f=new Float32Array(w),r[a]=y}return r}_getTerrainCoordsForTileRanges(e,r){const a={};for(const d of this._renderableTilesKeys){const y=this._tiles[d].tileID;if(!this._isWithinTileRanges(y,r))continue;const w=e.clone(),E=u.b2();if(y.canonical.z===e.canonical.z){const A=e.canonical.x-y.canonical.x,O=e.canonical.y-y.canonical.y;u.bQ(E,0,u.Z,u.Z,0,0,1),u.L(E,E,[A*u.Z,O*u.Z,0])}else if(y.canonical.z>e.canonical.z){const A=y.canonical.z-e.canonical.z,O=y.canonical.x-(y.canonical.x>>A<<A),N=y.canonical.y-(y.canonical.y>>A<<A),W=e.canonical.x-(y.canonical.x>>A),G=e.canonical.y-(y.canonical.y>>A),Q=u.Z>>A;u.bQ(E,0,Q,Q,0,0,1),u.L(E,E,[-O*Q+W*u.Z,-N*Q+G*u.Z,0])}else{const A=e.canonical.z-y.canonical.z,O=e.canonical.x-(e.canonical.x>>A<<A),N=e.canonical.y-(e.canonical.y>>A<<A),W=(e.canonical.x>>A)-y.canonical.x,G=(e.canonical.y>>A)-y.canonical.y,Q=u.Z<<A;u.bQ(E,0,Q,Q,0,0,1),u.L(E,E,[O*u.Z+W*Q,N*u.Z+G*Q,0])}w.terrainRttPosMatrix32f=new Float32Array(E),a[d]=w}return a}getSourceTile(e,r){const a=this.sourceCache._source;let d=e.overscaledZ-this.deltaZoom;if(d>a.maxzoom&&(d=a.maxzoom),d<a.minzoom)return null;this._sourceTileCache[e.key]||(this._sourceTileCache[e.key]=e.scaledTo(d).key);let y=this.sourceCache.getTileByID(this._sourceTileCache[e.key]);if((!y||!y.dem)&&r)for(;d>=a.minzoom&&(!y||!y.dem);)y=this.sourceCache.getTileByID(e.scaledTo(d--).key);return y}anyTilesAfterTime(e=Date.now()){return this._lastTilesetChange>=e}_isWithinTileRanges(e,r){return r[e.canonical.z]&&e.canonical.x>=r[e.canonical.z].minTileX&&e.canonical.x<=r[e.canonical.z].maxTileX&&e.canonical.y>=r[e.canonical.z].minTileY&&e.canonical.y<=r[e.canonical.z].maxTileY}}class Gc{constructor(e,r,a){this._meshCache={},this.painter=e,this.sourceCache=new zd(r),this.options=a,this.exaggeration=typeof a.exaggeration=="number"?a.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(e,r,a,d=u.Z){var y;if(!(r>=0&&r<d&&a>=0&&a<d))return 0;const w=this.getTerrainData(e),E=(y=w.tile)===null||y===void 0?void 0:y.dem;if(!E)return 0;const A=u.cj([],[r/d*u.Z,a/d*u.Z],w.u_terrain_matrix),O=[A[0]*E.dim,A[1]*E.dim],N=Math.floor(O[0]),W=Math.floor(O[1]),G=O[0]-N,Q=O[1]-W;return E.get(N,W)*(1-G)*(1-Q)+E.get(N+1,W)*G*(1-Q)+E.get(N,W+1)*(1-G)*Q+E.get(N+1,W+1)*G*Q}getElevationForLngLatZoom(e,r){if(!u.ck(r,e.wrap()))return 0;const{tileID:a,mercatorX:d,mercatorY:y}=this._getOverscaledTileIDFromLngLatZoom(e,r);return this.getElevation(a,d%u.Z,y%u.Z,u.Z)}getElevation(e,r,a,d=u.Z){return this.getDEMElevation(e,r,a,d)*this.exaggeration}getTerrainData(e){if(!this._emptyDemTexture){const d=this.painter.context,y=new u.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Le(d,y,d.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Le(d,new u.R({width:1,height:1}),d.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(d.gl.NEAREST,d.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=u.ad([])}const r=this.sourceCache.getSourceTile(e,!0);if(r&&r.dem&&(!r.demTexture||r.needsTerrainPrepare)){const d=this.painter.context;r.demTexture=this.painter.getTileTexture(r.dem.stride),r.demTexture?r.demTexture.update(r.dem.getPixels(),{premultiply:!1}):r.demTexture=new Le(d,r.dem.getPixels(),d.gl.RGBA,{premultiply:!1}),r.demTexture.bind(d.gl.NEAREST,d.gl.CLAMP_TO_EDGE),r.needsTerrainPrepare=!1}const a=r&&r+r.tileID.key+e.key;if(a&&!this._demMatrixCache[a]){const d=this.sourceCache.sourceCache._source.maxzoom;let y=e.canonical.z-r.tileID.canonical.z;e.overscaledZ>e.canonical.z&&(e.canonical.z>=d?y=e.canonical.z-d:u.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const w=e.canonical.x-(e.canonical.x>>y<<y),E=e.canonical.y-(e.canonical.y>>y<<y),A=u.cl(new Float64Array(16),[1/(u.Z<<y),1/(u.Z<<y),0]);u.L(A,A,[w*u.Z,E*u.Z,0]),this._demMatrixCache[e.key]={matrix:A,coord:e}}return{u_depth:2,u_terrain:3,u_terrain_dim:r&&r.dem&&r.dem.dim||1,u_terrain_matrix:a?this._demMatrixCache[e.key].matrix:this._emptyDemMatrix,u_terrain_unpack:r&&r.dem&&r.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(r&&r.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:r}}getFramebuffer(e){const r=this.painter,a=r.width/devicePixelRatio,d=r.height/devicePixelRatio;return!this._fbo||this._fbo.width===a&&this._fbo.height===d||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Le(r.context,{width:a,height:d,data:null},r.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(r.context.gl.NEAREST,r.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Le(r.context,{width:a,height:d,data:null},r.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(r.context.gl.NEAREST,r.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=r.context.createFramebuffer(a,d,!0,!1),this._fbo.depthAttachment.set(r.context.createRenderbuffer(r.context.gl.DEPTH_COMPONENT16,a,d))),this._fbo.colorAttachment.set(e==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const e=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const r=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let y=0,w=0;y<this._coordsTextureSize;y++)for(let E=0;E<this._coordsTextureSize;E++,w+=4)r[w+0]=255&E,r[w+1]=255&y,r[w+2]=E>>8<<4|y>>8,r[w+3]=0;const a=new u.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(r.buffer)),d=new Le(e,a,e.gl.RGBA,{premultiply:!1});return d.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),this._coordsTexture=d,d}pointCoordinate(e){this.painter.maybeDrawDepthAndCoords(!0);const r=new Uint8Array(4),a=this.painter.context,d=a.gl,y=Math.round(e.x*this.painter.pixelRatio/devicePixelRatio),w=Math.round(e.y*this.painter.pixelRatio/devicePixelRatio),E=Math.round(this.painter.height/devicePixelRatio);a.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),d.readPixels(y,E-w-1,1,1,d.RGBA,d.UNSIGNED_BYTE,r),a.bindFramebuffer.set(null);const A=r[0]+(r[2]>>4<<8),O=r[1]+((15&r[2])<<8),N=this.coordsIndex[255-r[3]],W=N&&this.sourceCache.getTileByID(N);if(!W)return null;const G=this._coordsTextureSize,Q=(1<<W.tileID.canonical.z)*G;return new u.$((W.tileID.canonical.x*G+A)/Q+W.tileID.wrap,(W.tileID.canonical.y*G+O)/Q,this.getElevation(W.tileID,A,O,G))}depthAtPoint(e){const r=new Uint8Array(4),a=this.painter.context,d=a.gl;return a.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),d.readPixels(e.x,this.painter.height/devicePixelRatio-e.y-1,1,1,d.RGBA,d.UNSIGNED_BYTE,r),a.bindFramebuffer.set(null),(r[0]/16777216+r[1]/65536+r[2]/256+r[3])/256}getTerrainMesh(e){var r;const a=((r=this.painter.style.projection)===null||r===void 0?void 0:r.transitionState)>0,d=a&&e.canonical.y===0,y=a&&e.canonical.y===(1<<e.canonical.z)-1,w=`m_${d?"n":""}_${y?"s":""}`;if(this._meshCache[w])return this._meshCache[w];const E=this.painter.context,A=new u.cm,O=new u.aK,N=this.meshSize,W=u.Z/N,G=N*N;for(let Ue=0;Ue<=N;Ue++)for(let lt=0;lt<=N;lt++)A.emplaceBack(lt*W,Ue*W,0);for(let Ue=0;Ue<G;Ue+=N+1)for(let lt=0;lt<N;lt++)O.emplaceBack(lt+Ue,N+lt+Ue+1,N+lt+Ue+2),O.emplaceBack(lt+Ue,N+lt+Ue+2,lt+Ue+1);const Q=A.length,ie=Q+(N+1),be=(N+1)*N,xe=d?u.b9:0,Se=d?0:1,Ae=y?u.ba:u.Z,De=y?0:1;for(let Ue=0;Ue<=N;Ue++)A.emplaceBack(Ue*W,xe,Se);for(let Ue=0;Ue<=N;Ue++)A.emplaceBack(Ue*W,Ae,De);for(let Ue=0;Ue<N;Ue++)O.emplaceBack(be+Ue,ie+Ue,ie+Ue+1),O.emplaceBack(be+Ue,ie+Ue+1,be+Ue+1),O.emplaceBack(0+Ue,Q+Ue+1,Q+Ue),O.emplaceBack(0+Ue,0+Ue+1,Q+Ue+1);const ke=A.length,Oe=ke+2*(N+1);for(const Ue of[0,1])for(let lt=0;lt<=N;lt++)for(const Mt of[0,1])A.emplaceBack(Ue*u.Z,lt*W,Mt);for(let Ue=0;Ue<2*N;Ue+=2)O.emplaceBack(ke+Ue,ke+Ue+1,ke+Ue+3),O.emplaceBack(ke+Ue,ke+Ue+3,ke+Ue+2),O.emplaceBack(Oe+Ue,Oe+Ue+3,Oe+Ue+1),O.emplaceBack(Oe+Ue,Oe+Ue+2,Oe+Ue+3);const $e=new $n(E.createVertexBuffer(A,yl.members),E.createIndexBuffer(O),u.aJ.simpleSegment(0,0,A.length,O.length));return this._meshCache[w]=$e,$e}getMeshFrameDelta(e){return 2*Math.PI*u.bu/Math.pow(2,Math.max(e,0))/5}getMinTileElevationForLngLatZoom(e,r){var a;const{tileID:d}=this._getOverscaledTileIDFromLngLatZoom(e,r);return(a=this.getMinMaxElevation(d).minElevation)!==null&&a!==void 0?a:0}getMinMaxElevation(e){const r=this.getTerrainData(e).tile,a={minElevation:null,maxElevation:null};return r&&r.dem&&(a.minElevation=r.dem.min*this.exaggeration,a.maxElevation=r.dem.max*this.exaggeration),a}_getOverscaledTileIDFromLngLatZoom(e,r){const a=u.$.fromLngLat(e.wrap()),d=(1<<r)*u.Z,y=a.x*d,w=a.y*d,E=Math.floor(y/u.Z),A=Math.floor(w/u.Z);return{tileID:new u.Y(r,0,r,E,A),mercatorX:y,mercatorY:w}}}class cc{constructor(e,r,a){this._context=e,this._size=r,this._tileSize=a,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const e of this._objects)e.texture.destroy(),e.fbo.destroy()}_createObject(e){const r=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),a=new Le(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return a.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),r.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),r.colorAttachment.set(a.texture),{id:e,fbo:r,texture:a,stamp:-1,inUse:!1}}getObjectForId(e){return this._objects[e]}useObject(e){e.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(r=>e.id!==r),this._recentlyUsed.push(e.id)}stampObject(e){e.stamp=++this._stamp}getOrCreateFreeObject(){for(const r of this._recentlyUsed)if(!this._objects[r].inUse)return this._objects[r];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const e=this._createObject(this._objects.length);return this._objects.push(e),e}freeObject(e){e.inUse=!1}freeAllObjects(){for(const e of this._objects)this.freeObject(e)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(e=>!e.inUse)===!1}}const gs={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Wc{constructor(e,r){this.painter=e,this.terrain=r,this.pool=new cc(e.context,30,r.sourceCache.tileSize*r.qualityFactor)}destruct(){this.pool.destruct()}getTexture(e){return this.pool.getObjectForId(e.rtt[this._stacks.length-1].id).texture}prepareForRender(e,r){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=e._order.filter(a=>!e._layers[a].isHidden(r)),this._coordsAscending={};for(const a in e.sourceCaches){this._coordsAscending[a]={};const d=e.sourceCaches[a].getVisibleCoordinates(),y=e.sourceCaches[a].getSource(),w=y instanceof an?y.terrainTileRanges:null;for(const E of d){const A=this.terrain.sourceCache.getTerrainCoords(E,w);for(const O in A)this._coordsAscending[a][O]||(this._coordsAscending[a][O]=[]),this._coordsAscending[a][O].push(A[O])}}this._coordsAscendingStr={};for(const a of e._order){const d=e._layers[a],y=d.source;if(gs[d.type]&&!this._coordsAscendingStr[y]){this._coordsAscendingStr[y]={};for(const w in this._coordsAscending[y])this._coordsAscendingStr[y][w]=this._coordsAscending[y][w].map(E=>E.key).sort().join()}}for(const a of this._renderableTiles)for(const d in this._coordsAscendingStr){const y=this._coordsAscendingStr[d][a.tileID.key];y&&y!==a.rttCoords[d]&&(a.rtt=[])}}renderLayer(e,r){if(e.isHidden(this.painter.transform.zoom))return!1;const a=Object.assign(Object.assign({},r),{isRenderingToTexture:!0}),d=e.type,y=this.painter,w=this._renderableLayerIds[this._renderableLayerIds.length-1]===e.id;if(gs[d]&&(this._prevType&&gs[this._prevType]||this._stacks.push([]),this._prevType=d,this._stacks[this._stacks.length-1].push(e.id),!w))return!0;if(gs[this._prevType]||gs[d]&&w){this._prevType=d;const E=this._stacks.length-1,A=this._stacks[E]||[];for(const O of this._renderableTiles){if(this.pool.isFull()&&(Ol(this.painter,this.terrain,this._rttTiles,a),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(O),O.rtt[E]){const W=this.pool.getObjectForId(O.rtt[E].id);if(W.stamp===O.rtt[E].stamp){this.pool.useObject(W);continue}}const N=this.pool.getOrCreateFreeObject();this.pool.useObject(N),this.pool.stampObject(N),O.rtt[E]={id:N.id,stamp:N.stamp},y.context.bindFramebuffer.set(N.fbo.framebuffer),y.context.clear({color:u.b7.transparent,stencil:0}),y.currentStencilSource=void 0;for(let W=0;W<A.length;W++){const G=y.style._layers[A[W]],Q=G.source?this._coordsAscending[G.source][O.tileID.key]:[O.tileID];y.context.viewport.set([0,0,N.fbo.width,N.fbo.height]),y._renderTileClippingMasks(G,Q,!0),y.renderLayer(y,y.style.sourceCaches[G.source],G,Q,a),G.source&&(O.rttCoords[G.source]=this._coordsAscendingStr[G.source][O.tileID.key])}}return Ol(this.painter,this.terrain,this._rttTiles,a),this._rttTiles=[],this.pool.freeAllObjects(),gs[d]}return!1}}const fr={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Vr=te,iu={hash:!1,interactive:!0,bearingSnap:7,attributionControl:$l,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:u.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},Ns={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class jl{constructor(e,r,a=!1){this.mousedown=y=>{this.startMove(y,ge.mousePos(this.element,y)),ge.addEventListener(window,"mousemove",this.mousemove),ge.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=y=>{this.move(y,ge.mousePos(this.element,y))},this.mouseup=y=>{this._rotatePitchHanlder.dragEnd(y),this.offTemp()},this.touchstart=y=>{y.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=ge.touchPos(this.element,y.targetTouches)[0],this.startMove(y,this._startPos),ge.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),ge.addEventListener(window,"touchend",this.touchend))},this.touchmove=y=>{y.targetTouches.length!==1?this.reset():(this._lastPos=ge.touchPos(this.element,y.targetTouches)[0],this.move(y,this._lastPos))},this.touchend=y=>{y.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHanlder.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=r;const d=new ic;this._rotatePitchHanlder=new Ao({clickTolerance:3,move:(y,w)=>{const E=r.getBoundingClientRect(),A=new u.P((E.bottom-E.top)/2,(E.right-E.left)/2);return{bearingDelta:u.ce(new u.P(y.x,w.y),w,A),pitchDelta:a?-.5*(w.y-y.y):void 0}},moveStateManager:d,enable:!0,assignEvents:()=>{}}),this.map=e,ge.addEventListener(r,"mousedown",this.mousedown),ge.addEventListener(r,"touchstart",this.touchstart,{passive:!1}),ge.addEventListener(r,"touchcancel",this.reset)}startMove(e,r){this._rotatePitchHanlder.dragStart(e,r),ge.disableDrag()}move(e,r){const a=this.map,{bearingDelta:d,pitchDelta:y}=this._rotatePitchHanlder.dragMove(e,r)||{};d&&a.setBearing(a.getBearing()+d),y&&a.setPitch(a.getPitch()+y)}off(){const e=this.element;ge.removeEventListener(e,"mousedown",this.mousedown),ge.removeEventListener(e,"touchstart",this.touchstart,{passive:!1}),ge.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),ge.removeEventListener(window,"touchend",this.touchend),ge.removeEventListener(e,"touchcancel",this.reset),this.offTemp()}offTemp(){ge.enableDrag(),ge.removeEventListener(window,"mousemove",this.mousemove),ge.removeEventListener(window,"mouseup",this.mouseup),ge.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),ge.removeEventListener(window,"touchend",this.touchend)}}let Di;function _l(g,e,r,a=!1){if(a||!r.getCoveringTilesDetailsProvider().allowWorldCopies())return g==null?void 0:g.wrap();const d=new u.Q(g.lng,g.lat);if(g=new u.Q(g.lng,g.lat),e){const y=new u.Q(g.lng-360,g.lat),w=new u.Q(g.lng+360,g.lat),E=r.locationToScreenPoint(g).distSqr(e);r.locationToScreenPoint(y).distSqr(e)<E?g=y:r.locationToScreenPoint(w).distSqr(e)<E&&(g=w)}for(;Math.abs(g.lng-r.center.lng)>180;){const y=r.locationToScreenPoint(g);if(y.x>=0&&y.y>=0&&y.x<=r.width&&y.y<=r.height)break;g.lng>r.center.lng?g.lng-=360:g.lng+=360}return g.lng!==d.lng&&r.isPointOnMapSurface(r.locationToScreenPoint(g))?g:d}const $s={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function jo(g,e,r){const a=g.classList;for(const d in $s)a.remove(`maplibregl-${r}-anchor-${d}`);a.add(`maplibregl-${r}-anchor-${e}`)}class sa extends u.E{constructor(e){if(super(),this._onKeyPress=r=>{const a=r.code,d=r.charCode||r.keyCode;a!=="Space"&&a!=="Enter"&&d!==32&&d!==13||this.togglePopup()},this._onMapClick=r=>{const a=r.originalEvent.target,d=this._element;this._popup&&(a===d||d.contains(a))&&this.togglePopup()},this._update=r=>{if(!this._map)return;const a=this._map.loaded()&&!this._map.isMoving();((r==null?void 0:r.type)==="terrain"||(r==null?void 0:r.type)==="render"&&!a)&&this._map.once("render",this._update),this._lngLat=_l(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let d="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?d=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(d=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let y="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?y="rotateX(0deg)":this._pitchAlignment==="map"&&(y=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||r&&r.type!=="moveend"||(this._pos=this._pos.round()),ge.setTransform(this._element,`${$s[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${y} ${d}`),Te.frameAsync(new AbortController).then(()=>{this._updateOpacity(r&&r.type==="moveend")}).catch(()=>{})},this._onMove=r=>{if(!this._isDragging){const a=this._clickTolerance||this._map._clickTolerance;this._isDragging=r.point.dist(this._pointerdownPos)>=a}this._isDragging&&(this._pos=r.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new u.l("dragstart"))),this.fire(new u.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new u.l("dragend")),this._state="inactive"},this._addDragHandler=r=>{this._element.contains(r.originalEvent.target)&&(r.preventDefault(),this._positionDelta=r.point.sub(this._pos).add(this._offset),this._pointerdownPos=r.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._subpixelPositioning=e&&e.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&e.pitchAlignment!=="auto"?e.pitchAlignment:this._rotationAlignment,this.setOpacity(e==null?void 0:e.opacity,e==null?void 0:e.opacityWhenCovered),e&&e.element)this._element=e.element,this._offset=u.P.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=ge.create("div");const r=ge.createNS("http://www.w3.org/2000/svg","svg"),a=41,d=27;r.setAttributeNS(null,"display","block"),r.setAttributeNS(null,"height",`${a}px`),r.setAttributeNS(null,"width",`${d}px`),r.setAttributeNS(null,"viewBox",`0 0 ${d} ${a}`);const y=ge.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"stroke","none"),y.setAttributeNS(null,"stroke-width","1"),y.setAttributeNS(null,"fill","none"),y.setAttributeNS(null,"fill-rule","evenodd");const w=ge.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"fill-rule","nonzero");const E=ge.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"transform","translate(3.0, 29.0)"),E.setAttributeNS(null,"fill","#000000");const A=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Se of A){const Ae=ge.createNS("http://www.w3.org/2000/svg","ellipse");Ae.setAttributeNS(null,"opacity","0.04"),Ae.setAttributeNS(null,"cx","10.5"),Ae.setAttributeNS(null,"cy","5.80029008"),Ae.setAttributeNS(null,"rx",Se.rx),Ae.setAttributeNS(null,"ry",Se.ry),E.appendChild(Ae)}const O=ge.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"fill",this._color);const N=ge.createNS("http://www.w3.org/2000/svg","path");N.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),O.appendChild(N);const W=ge.createNS("http://www.w3.org/2000/svg","g");W.setAttributeNS(null,"opacity","0.25"),W.setAttributeNS(null,"fill","#000000");const G=ge.createNS("http://www.w3.org/2000/svg","path");G.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),W.appendChild(G);const Q=ge.createNS("http://www.w3.org/2000/svg","g");Q.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Q.setAttributeNS(null,"fill","#FFFFFF");const ie=ge.createNS("http://www.w3.org/2000/svg","g");ie.setAttributeNS(null,"transform","translate(8.0, 8.0)");const be=ge.createNS("http://www.w3.org/2000/svg","circle");be.setAttributeNS(null,"fill","#000000"),be.setAttributeNS(null,"opacity","0.25"),be.setAttributeNS(null,"cx","5.5"),be.setAttributeNS(null,"cy","5.5"),be.setAttributeNS(null,"r","5.4999962");const xe=ge.createNS("http://www.w3.org/2000/svg","circle");xe.setAttributeNS(null,"fill","#FFFFFF"),xe.setAttributeNS(null,"cx","5.5"),xe.setAttributeNS(null,"cy","5.5"),xe.setAttributeNS(null,"r","5.4999962"),ie.appendChild(be),ie.appendChild(xe),w.appendChild(E),w.appendChild(O),w.appendChild(W),w.appendChild(Q),w.appendChild(ie),r.appendChild(w),r.setAttributeNS(null,"height",a*this._scale+"px"),r.setAttributeNS(null,"width",d*this._scale+"px"),this._element.appendChild(r),this._offset=u.P.convert(e&&e.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",r=>{r.preventDefault()}),this._element.addEventListener("mousedown",r=>{r.preventDefault()}),jo(this._element,this._anchor,"marker"),e&&e.className)for(const r of e.className.split(" "))this._element.classList.add(r);this._popup=null}addTo(e){return this.remove(),this._map=e,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",e._getUIString("Marker.Title")),e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),e.on("terrain",this._update),e.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),ge.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=u.Q.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){const d=Math.abs(13.5)/Math.SQRT2;e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[d,-1*(38.1-13.5+d)],"bottom-right":[-d,-1*(38.1-13.5+d)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=e,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(e){return this._subpixelPositioning=e,this}getPopup(){return this._popup}togglePopup(){const e=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:e?(e.isOpen()?e.remove():(e.setLngLat(this._lngLat),e.addTo(this._map)),this):this}_updateOpacity(e=!1){var r,a;const d=(r=this._map)===null||r===void 0?void 0:r.terrain,y=this._map.transform.isLocationOccluded(this._lngLat);if(!d||y){const Q=y?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==Q&&(this._element.style.opacity=Q))}if(e)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const w=this._map,E=w.terrain.depthAtPoint(this._pos),A=w.terrain.getElevationForLngLatZoom(this._lngLat,w.transform.tileZoom);if(w.transform.lngLatToCameraDepth(this._lngLat,A)-E<.006)return void(this._element.style.opacity=this._opacity);const O=-this._offset.y/w.transform.pixelsPerMeter,N=Math.sin(w.getPitch()*Math.PI/180)*O,W=w.terrain.depthAtPoint(new u.P(this._pos.x,this._pos.y-this._offset.y)),G=w.transform.lngLatToCameraDepth(this._lngLat,A+N)-W>.006;!((a=this._popup)===null||a===void 0)&&a.isOpen()&&G&&this._popup.remove(),this._element.style.opacity=G?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(e){return this._offset=u.P.convert(e),this._update(),this}addClassName(e){this._element.classList.add(e)}removeClassName(e){this._element.classList.remove(e)}toggleClassName(e){return this._element.classList.toggle(e)}setDraggable(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e&&e!=="auto"?e:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(e,r){return(this._opacity===void 0||e===void 0&&r===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),e!==void 0&&(this._opacity=e),r!==void 0&&(this._opacityWhenCovered=r),this._map&&this._updateOpacity(!0),this}}const jn={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let ai=0,Ru=!1;const zu={maxWidth:100,unit:"metric"};function Ca(g,e,r){const a=r&&r.maxWidth||100,d=g._container.clientHeight/2,y=g._container.clientWidth/2,w=g.unproject([y-a/2,d]),E=g.unproject([y+a/2,d]),A=Math.round(g.project(E).x-g.project(w).x),O=Math.min(a,A,g._container.clientWidth),N=w.distanceTo(E);if(r&&r.unit==="imperial"){const W=3.2808*N;W>5280?Uo(e,O,W/5280,g._getUIString("ScaleControl.Miles")):Uo(e,O,W,g._getUIString("ScaleControl.Feet"))}else r&&r.unit==="nautical"?Uo(e,O,N/1852,g._getUIString("ScaleControl.NauticalMiles")):N>=1e3?Uo(e,O,N/1e3,g._getUIString("ScaleControl.Kilometers")):Uo(e,O,N,g._getUIString("ScaleControl.Meters"))}function Uo(g,e,r,a){const d=function(y){const w=Math.pow(10,`${Math.floor(y)}`.length-1);let E=y/w;return E=E>=10?10:E>=5?5:E>=3?3:E>=2?2:E>=1?1:function(A){const O=Math.pow(10,Math.ceil(-Math.log(A)/Math.LN10));return Math.round(A*O)/O}(E),w*E}(r);g.style.width=e*(d/r)+"px",g.innerHTML=`${d}&nbsp;${a}`}const Hc={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},Xh=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function aa(g){if(g){if(typeof g=="number"){const e=Math.round(Math.abs(g)/Math.SQRT2);return{center:new u.P(0,0),top:new u.P(0,g),"top-left":new u.P(e,e),"top-right":new u.P(-e,e),bottom:new u.P(0,-g),"bottom-left":new u.P(e,-e),"bottom-right":new u.P(-e,-e),left:new u.P(g,0),right:new u.P(-g,0)}}if(g instanceof u.P||Array.isArray(g)){const e=u.P.convert(g);return{center:e,top:e,"top-left":e,"top-right":e,bottom:e,"bottom-left":e,"bottom-right":e,left:e,right:e}}return{center:u.P.convert(g.center||[0,0]),top:u.P.convert(g.top||[0,0]),"top-left":u.P.convert(g["top-left"]||[0,0]),"top-right":u.P.convert(g["top-right"]||[0,0]),bottom:u.P.convert(g.bottom||[0,0]),"bottom-left":u.P.convert(g["bottom-left"]||[0,0]),"bottom-right":u.P.convert(g["bottom-right"]||[0,0]),left:u.P.convert(g.left||[0,0]),right:u.P.convert(g.right||[0,0])}}return aa(new u.P(0,0))}const la=te;M.AJAXError=u.cq,M.Event=u.l,M.Evented=u.E,M.LngLat=u.Q,M.MercatorCoordinate=u.$,M.Point=u.P,M.addProtocol=u.cr,M.config=u.a,M.removeProtocol=u.cs,M.AttributionControl=si,M.BoxZoomHandler=$o,M.CanvasSource=Sr,M.CooperativeGesturesHandler=xi,M.DoubleClickZoomHandler=Bl,M.DragPanHandler=Au,M.DragRotateHandler=Yo,M.EdgeInsets=Io,M.FullscreenControl=class extends u.E{constructor(g={}){super(),this._onFullscreenChange=()=>{var e;let r=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((e=r==null?void 0:r.shadowRoot)===null||e===void 0)&&e.fullscreenElement;)r=r.shadowRoot.fullscreenElement;r===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,g&&g.container&&(g.container instanceof HTMLElement?this._container=g.container:u.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(g){return this._map=g,this._container||(this._container=this._map.getContainer()),this._controlContainer=ge.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){ge.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const g=this._fullscreenButton=ge.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);ge.create("span","maplibregl-ctrl-icon",g).setAttribute("aria-hidden","true"),g.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const g=this._getTitle();this._fullscreenButton.setAttribute("aria-label",g),this._fullscreenButton.title=g}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new u.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new u.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},M.GeoJSONSource=wn,M.GeolocateControl=class extends u.E{constructor(g){super(),this._onSuccess=e=>{if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new u.l("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(e),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new u.l("geolocate",e)),this._finish()}},this._updateCamera=e=>{const r=new u.Q(e.coords.longitude,e.coords.latitude),a=e.coords.accuracy,d=this._map.getBearing(),y=u.e({bearing:d},this.options.fitBoundsOptions),w=br.fromLngLat(r,a);this._map.fitBounds(w,y,{geolocateSource:!0})},this._updateMarker=e=>{if(e){const r=new u.Q(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(r).addTo(this._map),this._userLocationDotMarker.setLngLat(r).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=e=>{if(this._map){if(e.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const r=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(e.code===3&&Ru)return;this.options.trackUserLocation&&this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new u.l("error",e)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",e=>e.preventDefault()),this._geolocateButton=ge.create("button","maplibregl-ctrl-geolocate",this._container),ge.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=e=>{if(this._map){if(e===!1){u.w("Geolocation support is not available so the GeolocateControl will be disabled.");const r=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r)}else{const r=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=ge.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new sa({element:this._dotElement}),this._circleElement=ge.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new sa({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",r=>{r.geolocateSource||this._watchState!=="ACTIVE_LOCK"||r.originalEvent&&r.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new u.l("trackuserlocationend")),this.fire(new u.l("userlocationlostfocus")))})}},this.options=u.e({},jn,g)}onAdd(g){return this._map=g,this._container=ge.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return u._(this,arguments,void 0,function*(e=!1){if(Di!==void 0&&!e)return Di;if(window.navigator.permissions===void 0)return Di=!!window.navigator.geolocation,Di;try{Di=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Di=!!window.navigator.geolocation}return Di})}().then(e=>this._finishSetupUI(e)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),ge.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,ai=0,Ru=!1}_isOutOfMapMaxBounds(g){const e=this._map.getMaxBounds(),r=g.coords;return e&&(r.longitude<e.getWest()||r.longitude>e.getEast()||r.latitude<e.getSouth()||r.latitude>e.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const g=this._map.getBounds(),e=g.getSouthEast(),r=g.getNorthEast(),a=e.distanceTo(r),d=Math.ceil(this._accuracy/(a/this._map._container.clientHeight)*2);this._circleElement.style.width=`${d}px`,this._circleElement.style.height=`${d}px`}trigger(){if(!this._setup)return u.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new u.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ai--,Ru=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new u.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new u.l("trackuserlocationstart")),this.fire(new u.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let g;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),ai++,ai>1?(g={maximumAge:6e5,timeout:0},Ru=!0):(g=this.options.positionOptions,Ru=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,g)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},M.GlobeControl=class{constructor(){this._toggleProjection=()=>{var g;const e=(g=this._map.getProjection())===null||g===void 0?void 0:g.type;this._map.setProjection(e!=="mercator"&&e?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var g;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((g=this._map.getProjection())===null||g===void 0?void 0:g.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(g){return this._map=g,this._container=ge.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=ge.create("button","maplibregl-ctrl-globe",this._container),ge.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){ge.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},M.Hash=Va,M.ImageSource=an,M.KeyboardHandler=Xo,M.LngLatBounds=br,M.LogoControl=uc,M.Map=class extends oa{constructor(g){var e,r;u.cn.mark(u.co.create);const a=Object.assign(Object.assign(Object.assign({},iu),g),{canvasContextAttributes:Object.assign(Object.assign({},iu.canvasContextAttributes),g.canvasContextAttributes)});if(a.minZoom!=null&&a.maxZoom!=null&&a.minZoom>a.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(a.minPitch!=null&&a.maxPitch!=null&&a.minPitch>a.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(a.minPitch!=null&&a.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(a.maxPitch!=null&&a.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const d=new gu,y=new us;if(a.minZoom!==void 0&&d.setMinZoom(a.minZoom),a.maxZoom!==void 0&&d.setMaxZoom(a.maxZoom),a.minPitch!==void 0&&d.setMinPitch(a.minPitch),a.maxPitch!==void 0&&d.setMaxPitch(a.maxPitch),a.renderWorldCopies!==void 0&&d.setRenderWorldCopies(a.renderWorldCopies),super(d,y,{bearingSnap:a.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Ha,this._controls=[],this._mapId=u.a4(),this._contextLost=E=>{E.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new u.l("webglcontextlost",{originalEvent:E}))},this._contextRestored=E=>{this._setupPainter(),this.resize(),this._update(),this.fire(new u.l("webglcontextrestored",{originalEvent:E}))},this._onMapScroll=E=>{if(E.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=a.interactive,this._maxTileCacheSize=a.maxTileCacheSize,this._maxTileCacheZoomLevels=a.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},a.canvasContextAttributes),this._trackResize=a.trackResize===!0,this._bearingSnap=a.bearingSnap,this._centerClampedToGround=a.centerClampedToGround,this._refreshExpiredTiles=a.refreshExpiredTiles===!0,this._fadeDuration=a.fadeDuration,this._crossSourceCollisions=a.crossSourceCollisions===!0,this._collectResourceTiming=a.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},fr),a.locale),this._clickTolerance=a.clickTolerance,this._overridePixelRatio=a.pixelRatio,this._maxCanvasSize=a.maxCanvasSize,this.transformCameraUpdate=a.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=a.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=et.addThrottleControl(()=>this.isMoving()),this._requestManager=new Je(a.transformRequest),typeof a.container=="string"){if(this._container=document.getElementById(a.container),!this._container)throw new Error(`Container '${a.container}' not found.`)}else{if(!(a.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=a.container}if(a.maxBounds&&this.setMaxBounds(a.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let E=!1;const A=Fl(O=>{this._trackResize&&!this._removed&&(this.resize(O),this.redraw())},50);this._resizeObserver=new ResizeObserver(O=>{E?A(O):E=!0}),this._resizeObserver.observe(this._container)}this.handlers=new nu(this,a),this._hash=a.hash&&new Va(typeof a.hash=="string"&&a.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:a.center,elevation:a.elevation,zoom:a.zoom,bearing:a.bearing,pitch:a.pitch,roll:a.roll}),a.bounds&&(this.resize(),this.fitBounds(a.bounds,u.e({},a.fitBoundsOptions,{duration:0}))));const w=typeof a.style=="string"||((r=(e=a.style)===null||e===void 0?void 0:e.projection)===null||r===void 0?void 0:r.type)!=="globe";this.resize(null,w),this._localIdeographFontFamily=a.localIdeographFontFamily,this._validateStyle=a.validateStyle,a.style&&this.setStyle(a.style,{localIdeographFontFamily:a.localIdeographFontFamily}),a.attributionControl&&this.addControl(new si(typeof a.attributionControl=="boolean"?void 0:a.attributionControl)),a.maplibreLogo&&this.addControl(new uc,a.logoPosition),this.on("style.load",()=>{if(w||this._resizeTransform(),this.transform.unmodified){const E=u.O(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(E)}}),this.on("data",E=>{this._update(E.dataType==="style"),this.fire(new u.l(`${E.dataType}data`,E))}),this.on("dataloading",E=>{this.fire(new u.l(`${E.dataType}dataloading`,E))}),this.on("dataabort",E=>{this.fire(new u.l("sourcedataabort",E))})}_getMapId(){return this._mapId}addControl(g,e){if(e===void 0&&(e=g.getDefaultPosition?g.getDefaultPosition():"top-right"),!g||!g.onAdd)return this.fire(new u.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const r=g.onAdd(this);this._controls.push(g);const a=this._controlPositions[e];return e.indexOf("bottom")!==-1?a.insertBefore(r,a.firstChild):a.appendChild(r),this}removeControl(g){if(!g||!g.onRemove)return this.fire(new u.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const e=this._controls.indexOf(g);return e>-1&&this._controls.splice(e,1),g.onRemove(this),this}hasControl(g){return this._controls.indexOf(g)>-1}calculateCameraOptionsFromTo(g,e,r,a){return a==null&&this.terrain&&(a=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(g,e,r,a)}resize(g,e=!0){const[r,a]=this._containerDimensions(),d=this._getClampedPixelRatio(r,a);if(this._resizeCanvas(r,a,d),this.painter.resize(r,a,d),this.painter.overLimit()){const w=this.painter.context.gl;this._maxCanvasSize=[w.drawingBufferWidth,w.drawingBufferHeight];const E=this._getClampedPixelRatio(r,a);this._resizeCanvas(r,a,E),this.painter.resize(r,a,E)}this._resizeTransform(e);const y=!this._moving;return y&&(this.stop(),this.fire(new u.l("movestart",g)).fire(new u.l("move",g))),this.fire(new u.l("resize",g)),y&&this.fire(new u.l("moveend",g)),this}_resizeTransform(g=!0){var e;const[r,a]=this._containerDimensions();this.transform.resize(r,a,g),(e=this._requestedCameraState)===null||e===void 0||e.resize(r,a,g)}_getClampedPixelRatio(g,e){const{0:r,1:a}=this._maxCanvasSize,d=this.getPixelRatio(),y=g*d,w=e*d;return Math.min(y>r?r/y:1,w>a?a/w:1)*d}getPixelRatio(){var g;return(g=this._overridePixelRatio)!==null&&g!==void 0?g:devicePixelRatio}setPixelRatio(g){this._overridePixelRatio=g,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(g){return this.transform.setMaxBounds(br.convert(g)),this._update()}setMinZoom(g){if((g=g??-2)>=-2&&g<=this.transform.maxZoom)return this.transform.setMinZoom(g),this._update(),this.getZoom()<g&&this.setZoom(g),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(g){if((g=g??22)>=this.transform.minZoom)return this.transform.setMaxZoom(g),this._update(),this.getZoom()>g&&this.setZoom(g),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(g){if((g=g??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(g>=0&&g<=this.transform.maxPitch)return this.transform.setMinPitch(g),this._update(),this.getPitch()<g&&this.setPitch(g),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(g){if((g=g??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(g>=this.transform.minPitch)return this.transform.setMaxPitch(g),this._update(),this.getPitch()>g&&this.setPitch(g),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(g){return this.transform.setRenderWorldCopies(g),this._update()}project(g){return this.transform.locationToScreenPoint(u.Q.convert(g),this.style&&this.terrain)}unproject(g){return this.transform.screenPointToLocation(u.P.convert(g),this.terrain)}isMoving(){var g;return this._moving||((g=this.handlers)===null||g===void 0?void 0:g.isMoving())}isZooming(){var g;return this._zooming||((g=this.handlers)===null||g===void 0?void 0:g.isZooming())}isRotating(){var g;return this._rotating||((g=this.handlers)===null||g===void 0?void 0:g.isRotating())}_createDelegatedListener(g,e,r){if(g==="mouseenter"||g==="mouseover"){let a=!1;return{layers:e,listener:r,delegates:{mousemove:y=>{const w=e.filter(A=>this.getLayer(A)),E=w.length!==0?this.queryRenderedFeatures(y.point,{layers:w}):[];E.length?a||(a=!0,r.call(this,new ao(g,this,y.originalEvent,{features:E}))):a=!1},mouseout:()=>{a=!1}}}}if(g==="mouseleave"||g==="mouseout"){let a=!1;return{layers:e,listener:r,delegates:{mousemove:w=>{const E=e.filter(A=>this.getLayer(A));(E.length!==0?this.queryRenderedFeatures(w.point,{layers:E}):[]).length?a=!0:a&&(a=!1,r.call(this,new ao(g,this,w.originalEvent)))},mouseout:w=>{a&&(a=!1,r.call(this,new ao(g,this,w.originalEvent)))}}}}{const a=d=>{const y=e.filter(E=>this.getLayer(E)),w=y.length!==0?this.queryRenderedFeatures(d.point,{layers:y}):[];w.length&&(d.features=w,r.call(this,d),delete d.features)};return{layers:e,listener:r,delegates:{[g]:a}}}}_saveDelegatedListener(g,e){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[g]=this._delegatedListeners[g]||[],this._delegatedListeners[g].push(e)}_removeDelegatedListener(g,e,r){if(!this._delegatedListeners||!this._delegatedListeners[g])return;const a=this._delegatedListeners[g];for(let d=0;d<a.length;d++){const y=a[d];if(y.listener===r&&y.layers.length===e.length&&y.layers.every(w=>e.includes(w))){for(const w in y.delegates)this.off(w,y.delegates[w]);return void a.splice(d,1)}}}on(g,e,r){if(r===void 0)return super.on(g,e);const a=typeof e=="string"?[e]:e,d=this._createDelegatedListener(g,a,r);this._saveDelegatedListener(g,d);for(const y in d.delegates)this.on(y,d.delegates[y]);return{unsubscribe:()=>{this._removeDelegatedListener(g,a,r)}}}once(g,e,r){if(r===void 0)return super.once(g,e);const a=typeof e=="string"?[e]:e,d=this._createDelegatedListener(g,a,r);for(const y in d.delegates){const w=d.delegates[y];d.delegates[y]=(...E)=>{this._removeDelegatedListener(g,a,r),w(...E)}}this._saveDelegatedListener(g,d);for(const y in d.delegates)this.once(y,d.delegates[y]);return this}off(g,e,r){return r===void 0?super.off(g,e):(this._removeDelegatedListener(g,typeof e=="string"?[e]:e,r),this)}queryRenderedFeatures(g,e){if(!this.style)return[];let r;const a=g instanceof u.P||Array.isArray(g),d=a?g:[[0,0],[this.transform.width,this.transform.height]];if(e=e||(a?{}:g)||{},d instanceof u.P||typeof d[0]=="number")r=[u.P.convert(d)];else{const y=u.P.convert(d[0]),w=u.P.convert(d[1]);r=[y,new u.P(w.x,y.y),w,new u.P(y.x,w.y),y]}return this.style.queryRenderedFeatures(r,e,this.transform)}querySourceFeatures(g,e){return this.style.querySourceFeatures(g,e)}setStyle(g,e){return(e=u.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},e)).diff!==!1&&e.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&g?(this._diffStyle(g,e),this):(this._localIdeographFontFamily=e.localIdeographFontFamily,this._updateStyle(g,e))}setTransformRequest(g){return this._requestManager.setTransformRequest(g),this}_getUIString(g){const e=this._locale[g];if(e==null)throw new Error(`Missing UI string '${g}'`);return e}_updateStyle(g,e){var r,a;if(e.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(g,e));const d=this.style&&e.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!g)),g?(this.style=new Gu(this,e||{}),this.style.setEventedParent(this,{style:this.style}),typeof g=="string"?this.style.loadURL(g,e,d):this.style.loadJSON(g,e,d),this):((a=(r=this.style)===null||r===void 0?void 0:r.projection)===null||a===void 0||a.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Gu(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(g,e){if(typeof g=="string"){const r=this._requestManager.transformRequest(g,"Style");u.j(r,new AbortController).then(a=>{this._updateDiff(a.data,e)}).catch(a=>{a&&this.fire(new u.k(a))})}else typeof g=="object"&&this._updateDiff(g,e)}_updateDiff(g,e){try{this.style.setState(g,e)&&this._update(!0)}catch(r){u.w(`Unable to perform style diff: ${r.message||r.error||r}.  Rebuilding the style from scratch.`),this._updateStyle(g,e)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():u.w("There is no style added to the map.")}addSource(g,e){return this._lazyInitEmptyStyle(),this.style.addSource(g,e),this._update(!0)}isSourceLoaded(g){const e=this.style&&this.style.sourceCaches[g];if(e!==void 0)return e.loaded();this.fire(new u.k(new Error(`There is no source with ID '${g}'`)))}setTerrain(g){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),g){const e=this.style.sourceCaches[g.source];if(!e)throw new Error(`cannot load terrain, because there exists no source with ID: ${g.source}`);this.terrain===null&&e.reload();for(const r in this.style._layers){const a=this.style._layers[r];a.type==="hillshade"&&a.source===g.source&&u.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Gc(this.painter,e,g),this.painter.renderToTexture=new Wc(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=r=>{var a;r.dataType==="style"?this.terrain.sourceCache.freeRtt():r.dataType==="source"&&r.tile&&(r.sourceId!==g.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((a=r.source)===null||a===void 0?void 0:a.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(r.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new u.l("terrain",{terrain:g})),this}getTerrain(){var g,e;return(e=(g=this.terrain)===null||g===void 0?void 0:g.options)!==null&&e!==void 0?e:null}areTilesLoaded(){const g=this.style&&this.style.sourceCaches;for(const e in g){const r=g[e]._tiles;for(const a in r){const d=r[a];if(d.state!=="loaded"&&d.state!=="errored")return!1}}return!0}removeSource(g){return this.style.removeSource(g),this._update(!0)}getSource(g){return this.style.getSource(g)}setSourceTileLodParams(g,e,r){if(r){const a=this.getSource(r);if(!a)throw new Error(`There is no source with ID "${r}", cannot set LOD parameters`);a.calculateTileZoom=Ve(Math.max(1,g),Math.max(1,e))}else for(const a in this.style.sourceCaches)this.style.sourceCaches[a].getSource().calculateTileZoom=Ve(Math.max(1,g),Math.max(1,e));return this._update(!0),this}refreshTiles(g,e){const r=this.style.sourceCaches[g];if(!r)throw new Error(`There is no source cache with ID "${g}", cannot refresh tile`);e===void 0?r.reload():r.refreshTiles(e.map(a=>new u.a1(a.z,a.x,a.y)))}addImage(g,e,r={}){const{pixelRatio:a=1,sdf:d=!1,stretchX:y,stretchY:w,content:E,textFitWidth:A,textFitHeight:O}=r;if(this._lazyInitEmptyStyle(),!(e instanceof HTMLImageElement||u.b(e))){if(e.width===void 0||e.height===void 0)return this.fire(new u.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:N,height:W,data:G}=e,Q=e;return this.style.addImage(g,{data:new u.R({width:N,height:W},new Uint8Array(G)),pixelRatio:a,stretchX:y,stretchY:w,content:E,textFitWidth:A,textFitHeight:O,sdf:d,version:0,userImage:Q}),Q.onAdd&&Q.onAdd(this,g),this}}{const{width:N,height:W,data:G}=Te.getImageData(e);this.style.addImage(g,{data:new u.R({width:N,height:W},G),pixelRatio:a,stretchX:y,stretchY:w,content:E,textFitWidth:A,textFitHeight:O,sdf:d,version:0})}}updateImage(g,e){const r=this.style.getImage(g);if(!r)return this.fire(new u.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const a=e instanceof HTMLImageElement||u.b(e)?Te.getImageData(e):e,{width:d,height:y,data:w}=a;if(d===void 0||y===void 0)return this.fire(new u.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(d!==r.data.width||y!==r.data.height)return this.fire(new u.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const E=!(e instanceof HTMLImageElement||u.b(e));return r.data.replace(w,E),this.style.updateImage(g,r),this}getImage(g){return this.style.getImage(g)}hasImage(g){return g?!!this.style.getImage(g):(this.fire(new u.k(new Error("Missing required image id"))),!1)}removeImage(g){this.style.removeImage(g)}loadImage(g){return et.getImage(this._requestManager.transformRequest(g,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(g,e){return this._lazyInitEmptyStyle(),this.style.addLayer(g,e),this._update(!0)}moveLayer(g,e){return this.style.moveLayer(g,e),this._update(!0)}removeLayer(g){return this.style.removeLayer(g),this._update(!0)}getLayer(g){return this.style.getLayer(g)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(g,e,r){return this.style.setLayerZoomRange(g,e,r),this._update(!0)}setFilter(g,e,r={}){return this.style.setFilter(g,e,r),this._update(!0)}getFilter(g){return this.style.getFilter(g)}setPaintProperty(g,e,r,a={}){return this.style.setPaintProperty(g,e,r,a),this._update(!0)}getPaintProperty(g,e){return this.style.getPaintProperty(g,e)}setLayoutProperty(g,e,r,a={}){return this.style.setLayoutProperty(g,e,r,a),this._update(!0)}getLayoutProperty(g,e){return this.style.getLayoutProperty(g,e)}setGlyphs(g,e={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(g,e),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(g,e,r={}){return this._lazyInitEmptyStyle(),this.style.addSprite(g,e,r,a=>{a||this._update(!0)}),this}removeSprite(g){return this._lazyInitEmptyStyle(),this.style.removeSprite(g),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(g,e={}){return this._lazyInitEmptyStyle(),this.style.setSprite(g,e,r=>{r||this._update(!0)}),this}setLight(g,e={}){return this._lazyInitEmptyStyle(),this.style.setLight(g,e),this._update(!0)}getLight(){return this.style.getLight()}setSky(g,e={}){return this._lazyInitEmptyStyle(),this.style.setSky(g,e),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(g,e){return this.style.setFeatureState(g,e),this._update()}removeFeatureState(g,e){return this.style.removeFeatureState(g,e),this._update()}getFeatureState(g){return this.style.getFeatureState(g)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let g=0,e=0;return this._container&&(g=this._container.clientWidth||400,e=this._container.clientHeight||300),[g,e]}_setupContainer(){const g=this._container;g.classList.add("maplibregl-map");const e=this._canvasContainer=ge.create("div","maplibregl-canvas-container",g);this._interactive&&e.classList.add("maplibregl-interactive"),this._canvas=ge.create("canvas","maplibregl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const r=this._containerDimensions(),a=this._getClampedPixelRatio(r[0],r[1]);this._resizeCanvas(r[0],r[1],a);const d=this._controlContainer=ge.create("div","maplibregl-control-container",g),y=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(w=>{y[w]=ge.create("div",`maplibregl-ctrl-${w} `,d)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(g,e,r){this._canvas.width=Math.floor(r*g),this._canvas.height=Math.floor(r*e),this._canvas.style.width=`${g}px`,this._canvas.style.height=`${e}px`}_setupPainter(){const g=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let e=null;this._canvas.addEventListener("webglcontextcreationerror",a=>{e={requestedAttributes:g},a&&(e.statusMessage=a.statusMessage,e.type=a.type)},{once:!0});let r=null;if(r=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,g):this._canvas.getContext("webgl2",g)||this._canvas.getContext("webgl",g),!r){const a="Failed to initialize WebGL";throw e?(e.message=a,new Error(JSON.stringify(e))):new Error(a)}this.painter=new qh(r,this.transform),we.testSupport(r)}migrateProjection(g,e){super.migrateProjection(g,e),this.painter.transform=g,this.fire(new u.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(g){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||g,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(g){return this._update(),this._renderTaskQueue.add(g)}_cancelRenderFrame(g){this._renderTaskQueue.remove(g)}_render(g){var e,r,a,d,y;const w=this._idleTriggered?this._fadeDuration:0,E=((e=this.style.projection)===null||e===void 0?void 0:e.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(g),this._removed)return;let A=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const W=this.transform.zoom,G=Te.now();this.style.zoomHistory.update(W,G);const Q=new u.C(W,{now:G,fadeDuration:w,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ie=Q.crossFadingFactor();ie===1&&ie===this._crossFadingFactor||(A=!0,this._crossFadingFactor=ie),this.style.update(Q)}const O=((r=this.style.projection)===null||r===void 0?void 0:r.transitionState)>0!==E;(a=this.style.projection)===null||a===void 0||a.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((d=this.style.projection)===null||d===void 0?void 0:d.transitionState,(y=this.style.projection)===null||y===void 0?void 0:y.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||O)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,w,this._crossSourceCollisions,O),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:w,showPadding:this.showPadding}),this.fire(new u.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,u.cn.mark(u.co.load),this.fire(new u.l("load"))),this.style&&(this.style.hasTransitions()||A)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const N=this._sourcesDirty||this._styleDirty||this._placementDirty;return N||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new u.l("idle")),!this._loaded||this._fullyLoaded||N||(this._fullyLoaded=!0,u.cn.mark(u.co.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var g;this._hash&&this._hash.remove();for(const r of this._controls)r.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),et.removeThrottleControl(this._imageQueueHandle),(g=this._resizeObserver)===null||g===void 0||g.disconnect();const e=this.painter.context.gl.getExtension("WEBGL_lose_context");e!=null&&e.loseContext&&e.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),ge.remove(this._canvasContainer),ge.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),u.cn.clearMetrics(),this._removed=!0,this.fire(new u.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,Te.frame(this._frameRequest,g=>{u.cn.frame(g),this._frameRequest=null;try{this._render(g)}catch(e){if(!u.cp(e)&&!function(r){return r.message===ia}(e))throw e}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(g){this._showTileBoundaries!==g&&(this._showTileBoundaries=g,this._update())}get showPadding(){return!!this._showPadding}set showPadding(g){this._showPadding!==g&&(this._showPadding=g,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(g){this._showCollisionBoxes!==g&&(this._showCollisionBoxes=g,g?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(g){this._showOverdrawInspector!==g&&(this._showOverdrawInspector=g,this._update())}get repaint(){return!!this._repaint}set repaint(g){this._repaint!==g&&(this._repaint=g,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(g){this._vertices=g,this._update()}get version(){return Vr}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(g){return this._lazyInitEmptyStyle(),this.style.setProjection(g),this._update(!0)}},M.MapMouseEvent=ao,M.MapTouchEvent=pl,M.MapWheelEvent=ps,M.Marker=sa,M.NavigationControl=class{constructor(g){this._updateZoomButtons=()=>{const e=this._map.getZoom(),r=e===this._map.getMaxZoom(),a=e===this._map.getMinZoom();this._zoomInButton.disabled=r,this._zoomOutButton.disabled=a,this._zoomInButton.setAttribute("aria-disabled",r.toString()),this._zoomOutButton.setAttribute("aria-disabled",a.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(e,r)=>{const a=this._map._getUIString(`NavigationControl.${r}`);e.title=a,e.setAttribute("aria-label",a)},this.options=u.e({},Ns,g),this._container=ge.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",e=>e.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",e=>this._map.zoomIn({},{originalEvent:e})),ge.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",e=>this._map.zoomOut({},{originalEvent:e})),ge.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",e=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:e}):this._map.resetNorth({},{originalEvent:e})}),this._compassIcon=ge.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(g){return this._map=g,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new jl(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){ge.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(g,e){const r=ge.create("button",g,this._container);return r.type="button",r.addEventListener("click",e),r}},M.Popup=class extends u.E{constructor(g){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:void 0)},this.remove=()=>(this._content&&ge.remove(this._content),this._container&&(ge.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new u.l("close"))),this),this._onMouseUp=e=>{this._update(e.point)},this._onMouseMove=e=>{this._update(e.point)},this._onDrag=e=>{this._update(e.point)},this._update=e=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=ge.create("div","maplibregl-popup",this._map.getContainer()),this._tip=ge.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const w of this.options.className.split(" "))this._container.classList.add(w);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=_l(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!e)return;const r=this._flatPos=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&e?e:this._map.transform.locationToScreenPoint(this._lngLat));let a=this.options.anchor;const d=aa(this.options.offset);if(!a){const w=this._container.offsetWidth,E=this._container.offsetHeight;let A;A=r.y+d.bottom.y<E?["top"]:r.y>this._map.transform.height-E?["bottom"]:[],r.x<w/2?A.push("left"):r.x>this._map.transform.width-w/2&&A.push("right"),a=A.length===0?"bottom":A.join("-")}let y=r.add(d[a]);this.options.subpixelPositioning||(y=y.round()),ge.setTransform(this._container,`${$s[a]} translate(${y.x}px,${y.y}px)`),jo(this._container,a,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=u.e(Object.create(Hc),g)}addTo(g){return this._map&&this.remove(),this._map=g,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new u.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(g){return this._lngLat=u.Q.convert(g),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(g){return this.setDOMContent(document.createTextNode(g))}setHTML(g){const e=document.createDocumentFragment(),r=document.createElement("body");let a;for(r.innerHTML=g;a=r.firstChild,a;)e.appendChild(a);return this.setDOMContent(e)}getMaxWidth(){var g;return(g=this._container)===null||g===void 0?void 0:g.style.maxWidth}setMaxWidth(g){return this.options.maxWidth=g,this._update(),this}setDOMContent(g){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=ge.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(g),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(g){return this._container&&this._container.classList.add(g),this}removeClassName(g){return this._container&&this._container.classList.remove(g),this}setOffset(g){return this.options.offset=g,this._update(),this}toggleClassName(g){if(this._container)return this._container.classList.toggle(g)}setSubpixelPositioning(g){this.options.subpixelPositioning=g}_createCloseButton(){this.options.closeButton&&(this._closeButton=ge.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const g=this._container.querySelector(Xh);g&&g.focus()}},M.RasterDEMTileSource=sn,M.RasterTileSource=fn,M.ScaleControl=class{constructor(g){this._onMove=()=>{Ca(this._map,this._container,this.options)},this.setUnit=e=>{this.options.unit=e,Ca(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},zu),g)}getDefaultPosition(){return"bottom-left"}onAdd(g){return this._map=g,this._container=ge.create("div","maplibregl-ctrl maplibregl-ctrl-scale",g.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){ge.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},M.ScrollZoomHandler=dn,M.Style=Gu,M.TerrainControl=class{constructor(g){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=g}onAdd(g){return this._map=g,this._container=ge.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=ge.create("button","maplibregl-ctrl-terrain",this._container),ge.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){ge.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},M.TwoFingersTouchPitchHandler=sc,M.TwoFingersTouchRotateHandler=ur,M.TwoFingersTouchZoomHandler=Sa,M.TwoFingersTouchZoomRotateHandler=Fs,M.VectorTileSource=qr,M.VideoSource=An,M.addSourceType=(g,e)=>u._(void 0,void 0,void 0,function*(){if(Hn(g))throw new Error(`A source type called "${g}" already exists.`);((r,a)=>{Vn[r]=a})(g,e)}),M.clearPrewarmedResources=function(){const g=cr;g&&(g.isPreloaded()&&g.numActive()===1?(g.release(Fe),cr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},M.createTileMesh=Ba,M.getMaxParallelImageRequests=function(){return u.a.MAX_PARALLEL_IMAGE_REQUESTS},M.getRTLTextPluginStatus=function(){return Nn().getRTLTextPluginStatus()},M.getVersion=function(){return la},M.getWorkerCount=function(){return ht.workerCount},M.getWorkerUrl=function(){return u.a.WORKER_URL},M.importScriptInWorkers=function(g){return pr().broadcast("IS",g)},M.prewarm=function(){or().acquire(Fe)},M.setMaxParallelImageRequests=function(g){u.a.MAX_PARALLEL_IMAGE_REQUESTS=g},M.setRTLTextPlugin=function(g,e){return Nn().setRTLTextPlugin(g,e)},M.setWorkerCount=function(g){ht.workerCount=g},M.setWorkerUrl=function(g){u.a.WORKER_URL=g}});var D=p;return D})}(Qg)),Qg.exports}var OP=DP();const qp=tg(OP);var Mc=Uint8Array,tm=Uint16Array,FP=Int32Array,B1=new Mc([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),N1=new Mc([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),BP=new Mc([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),$1=function(c,m){for(var p=new tm(31),T=0;T<31;++T)p[T]=m+=1<<c[T-1];for(var P=new FP(p[30]),T=1;T<30;++T)for(var D=p[T];D<p[T+1];++D)P[D]=D-p[T]<<5|T;return{b:p,r:P}},j1=$1(B1,2),U1=j1.b,NP=j1.r;U1[28]=258,NP[258]=28;var $P=$1(N1,0),jP=$P.b,H_=new tm(32768);for(var Do=0;Do<32768;++Do){var jf=(Do&43690)>>1|(Do&21845)<<1;jf=(jf&52428)>>2|(jf&13107)<<2,jf=(jf&61680)>>4|(jf&3855)<<4,H_[Do]=((jf&65280)>>8|(jf&255)<<8)>>1}var Hm=function(c,m,p){for(var T=c.length,P=0,D=new tm(m);P<T;++P)c[P]&&++D[c[P]-1];var M=new tm(m);for(P=1;P<m;++P)M[P]=M[P-1]+D[P-1]<<1;var u;if(p){u=new tm(1<<m);var te=15-m;for(P=0;P<T;++P)if(c[P])for(var Y=P<<4|c[P],fe=m-c[P],he=M[c[P]-1]++<<fe,Te=he|(1<<fe)-1;he<=Te;++he)u[H_[he]>>te]=Y}else for(u=new tm(T),P=0;P<T;++P)c[P]&&(u[P]=H_[M[c[P]-1]++]>>15-c[P]);return u},ag=new Mc(288);for(var Do=0;Do<144;++Do)ag[Do]=8;for(var Do=144;Do<256;++Do)ag[Do]=9;for(var Do=256;Do<280;++Do)ag[Do]=7;for(var Do=280;Do<288;++Do)ag[Do]=8;var V1=new Mc(32);for(var Do=0;Do<32;++Do)V1[Do]=5;var UP=Hm(ag,9,1),VP=Hm(V1,5,1),x_=function(c){for(var m=c[0],p=1;p<c.length;++p)c[p]>m&&(m=c[p]);return m},Fh=function(c,m,p){var T=m/8|0;return(c[T]|c[T+1]<<8)>>(m&7)&p},b_=function(c,m){var p=m/8|0;return(c[p]|c[p+1]<<8|c[p+2]<<16)>>(m&7)},ZP=function(c){return(c+7)/8|0},GP=function(c,m,p){return(p==null||p>c.length)&&(p=c.length),new Mc(c.subarray(m,p))},WP=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ic=function(c,m,p){var T=new Error(m||WP[c]);if(T.code=c,Error.captureStackTrace&&Error.captureStackTrace(T,Ic),!p)throw T;return T},mv=function(c,m,p,T){var P=c.length,D=0;if(!P||m.f&&!m.l)return p||new Mc(0);var M=!p,u=M||m.i!=2,te=m.i;M&&(p=new Mc(P*3));var Y=function(Cr){var rn=p.length;if(Cr>rn){var jr=new Mc(Math.max(rn*2,Cr));jr.set(p),p=jr}},fe=m.f||0,he=m.p||0,Te=m.b||0,ge=m.l,we=m.d,Ce=m.m,We=m.n,gt=P*8;do{if(!ge){fe=Fh(c,he,1);var At=Fh(c,he+1,3);if(he+=3,At)if(At==1)ge=UP,we=VP,Ce=9,We=5;else if(At==2){var it=Fh(c,he,31)+257,_t=Fh(c,he+10,15)+4,Le=it+Fh(c,he+5,31)+1;he+=14;for(var je=new Mc(Le),ne=new Mc(19),ot=0;ot<_t;++ot)ne[BP[ot]]=Fh(c,he+ot*3,7);he+=_t*3;for(var at=x_(ne),Lt=(1<<at)-1,rr=Hm(ne,at,1),ot=0;ot<Le;){var Pr=rr[Fh(c,he,Lt)];he+=Pr&15;var Ct=Pr>>4;if(Ct<16)je[ot++]=Ct;else{var xr=0,sr=0;for(Ct==16?(sr=3+Fh(c,he,3),he+=2,xr=je[ot-1]):Ct==17?(sr=3+Fh(c,he,7),he+=3):Ct==18&&(sr=11+Fh(c,he,127),he+=7);sr--;)je[ot++]=xr}}var bt=je.subarray(0,it),Et=je.subarray(it);Ce=x_(bt),We=x_(Et),ge=Hm(bt,Ce,1),we=Hm(Et,We,1)}else Ic(1);else{var Ct=ZP(he)+4,et=c[Ct-4]|c[Ct-3]<<8,Je=Ct+et;if(Je>P){te&&Ic(0);break}u&&Y(Te+et),p.set(c.subarray(Ct,Je),Te),m.b=Te+=et,m.p=he=Je*8,m.f=fe;continue}if(he>gt){te&&Ic(0);break}}u&&Y(Te+131072);for(var Ht=(1<<Ce)-1,Fe=(1<<We)-1,ht=he;;ht=he){var xr=ge[b_(c,he)&Ht],Vt=xr>>4;if(he+=xr&15,he>gt){te&&Ic(0);break}if(xr||Ic(2),Vt<256)p[Te++]=Vt;else if(Vt==256){ht=he,ge=null;break}else{var cr=Vt-254;if(Vt>264){var ot=Vt-257,Rt=B1[ot];cr=Fh(c,he,(1<<Rt)-1)+U1[ot],he+=Rt}var or=we[b_(c,he)&Fe],Tr=or>>4;or||Ic(3),he+=or&15;var Et=jP[Tr];if(Tr>3){var Rt=N1[Tr];Et+=b_(c,he)&(1<<Rt)-1,he+=Rt}if(he>gt){te&&Ic(0);break}u&&Y(Te+131072);var pr=Te+cr;if(Te<Et){var mr=D-Et,Jr=Math.min(Et,pr);for(mr+Te<0&&Ic(3);Te<Jr;++Te)p[Te]=T[mr+Te]}for(;Te<pr;++Te)p[Te]=p[Te-Et]}}m.l=ge,m.p=ht,m.b=Te,m.f=fe,ge&&(fe=1,m.m=Ce,m.d=we,m.n=We)}while(!fe);return Te!=p.length&&M?GP(p,0,Te):p.subarray(0,Te)},HP=new Mc(0),qP=function(c){(c[0]!=31||c[1]!=139||c[2]!=8)&&Ic(6,"invalid gzip data");var m=c[3],p=10;m&4&&(p+=(c[10]|c[11]<<8)+2);for(var T=(m>>3&1)+(m>>4&1);T>0;T-=!c[p++]);return p+(m&2)},KP=function(c){var m=c.length;return(c[m-4]|c[m-3]<<8|c[m-2]<<16|c[m-1]<<24)>>>0},XP=function(c,m){return((c[0]&15)!=8||c[0]>>4>7||(c[0]<<8|c[1])%31)&&Ic(6,"invalid zlib data"),(c[1]>>5&1)==1&&Ic(6,"invalid zlib data: "+(c[1]&32?"need":"unexpected")+" dictionary"),(c[1]>>3&4)+2};function YP(c,m){return mv(c,{i:2},m,m)}function QP(c,m){var p=qP(c);return p+8>c.length&&Ic(6,"invalid gzip data"),mv(c.subarray(p,-8),{i:2},new Mc(KP(c)),m)}function JP(c,m){return mv(c.subarray(XP(c),-4),{i:2},m,m)}function eE(c,m){return c[0]==31&&c[1]==139&&c[2]==8?QP(c,m):(c[0]&15)!=8||c[0]>>4>7||(c[0]<<8|c[1])%31?YP(c,m):JP(c,m)}var tE=typeof TextDecoder<"u"&&new TextDecoder,rE=0;try{tE.decode(HP,{stream:!0}),rE=1}catch{}var nE=Object.defineProperty,qm=Math.pow,Ji=(c,m)=>nE(c,"name",{value:m,configurable:!0}),el=(c,m,p)=>new Promise((T,P)=>{var D=te=>{try{u(p.next(te))}catch(Y){P(Y)}},M=te=>{try{u(p.throw(te))}catch(Y){P(Y)}},u=te=>te.done?T(te.value):Promise.resolve(te.value).then(D,M);u((p=p.apply(c,m)).next())});Ji((c,m)=>{let p=!1,T="",P=L.GridLayer.extend({createTile:Ji((D,M)=>{let u=document.createElement("img"),te=new AbortController,Y=te.signal;return u.cancel=()=>{te.abort()},p||(c.getHeader().then(fe=>{fe.tileType===1?console.error("Error: archive contains MVT vector tiles, but leafletRasterLayer is for displaying raster tiles. See https://github.com/protomaps/PMTiles/tree/main/js for details."):fe.tileType===2?T="image/png":fe.tileType===3?T="image/jpeg":fe.tileType===4?T="image/webp":fe.tileType===5&&(T="image/avif")}),p=!0),c.getZxy(D.z,D.x,D.y,Y).then(fe=>{if(fe){let he=new Blob([fe.data],{type:T}),Te=window.URL.createObjectURL(he);u.src=Te,u.cancel=void 0,M(void 0,u)}}).catch(fe=>{if(fe.name!=="AbortError")throw fe}),u},"createTile"),_removeTile:Ji(function(D){let M=this._tiles[D];M&&(M.el.cancel&&M.el.cancel(),M.el.width=0,M.el.height=0,M.el.deleted=!0,L.DomUtil.remove(M.el),delete this._tiles[D],this.fire("tileunload",{tile:M.el,coords:this._keyToTileCoords(D)}))},"_removeTile")});return new P(m)},"leafletRasterLayer");var iE=Ji(c=>(m,p)=>{if(p instanceof AbortController)return c(m,p);let T=new AbortController;return c(m,T).then(P=>p(void 0,P.data,P.cacheControl||"",P.expires||""),P=>p(P)).catch(P=>p(P)),{cancel:Ji(()=>T.abort(),"cancel")}},"v3compat"),Z1=class{constructor(m){this.tilev4=Ji((p,T)=>el(this,null,function*(){if(p.type==="json"){let ge=p.url.substr(10),we=this.tiles.get(ge);if(we||(we=new j0(ge),this.tiles.set(ge,we)),this.metadata)return{data:yield we.getTileJson(p.url)};let Ce=yield we.getHeader();return(Ce.minLon>=Ce.maxLon||Ce.minLat>=Ce.maxLat)&&console.error(`Bounds of PMTiles archive ${Ce.minLon},${Ce.minLat},${Ce.maxLon},${Ce.maxLat} are not valid.`),{data:{tiles:[`${p.url}/{z}/{x}/{y}`],minzoom:Ce.minZoom,maxzoom:Ce.maxZoom,bounds:[Ce.minLon,Ce.minLat,Ce.maxLon,Ce.maxLat]}}}let P=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),D=p.url.match(P);if(!D)throw new Error("Invalid PMTiles protocol URL");let M=D[1],u=this.tiles.get(M);u||(u=new j0(M),this.tiles.set(M,u));let te=D[2],Y=D[3],fe=D[4],he=yield u.getHeader(),Te=yield u==null?void 0:u.getZxy(+te,+Y,+fe,T.signal);if(Te)return{data:new Uint8Array(Te.data),cacheControl:Te.cacheControl,expires:Te.expires};if(he.tileType===1){if(this.errorOnMissingTile)throw new Error("Tile not found.");return{data:new Uint8Array}}return{data:null}}),"tilev4"),this.tile=iE(this.tilev4),this.tiles=new Map,this.metadata=(m==null?void 0:m.metadata)||!1,this.errorOnMissingTile=(m==null?void 0:m.errorOnMissingTile)||!1}add(m){this.tiles.set(m.source.getKey(),m)}get(m){return this.tiles.get(m)}};Ji(Z1,"Protocol");var oE=Z1;function G1(c,m){return(m>>>0)*4294967296+(c>>>0)}Ji(G1,"toNum");function W1(c,m){let p=m.buf,T=p[m.pos++],P=(T&112)>>4;if(T<128||(T=p[m.pos++],P|=(T&127)<<3,T<128)||(T=p[m.pos++],P|=(T&127)<<10,T<128)||(T=p[m.pos++],P|=(T&127)<<17,T<128)||(T=p[m.pos++],P|=(T&127)<<24,T<128)||(T=p[m.pos++],P|=(T&1)<<31,T<128))return G1(c,P);throw new Error("Expected varint not more than 10 bytes")}Ji(W1,"readVarintRemainder");function em(c){let m=c.buf,p=m[c.pos++],T=p&127;return p<128||(p=m[c.pos++],T|=(p&127)<<7,p<128)||(p=m[c.pos++],T|=(p&127)<<14,p<128)||(p=m[c.pos++],T|=(p&127)<<21,p<128)?T:(p=m[c.pos],T|=(p&15)<<28,W1(T,c))}Ji(em,"readVarint");function gv(c,m,p,T){if(T===0){p===1&&(m[0]=c-1-m[0],m[1]=c-1-m[1]);let P=m[0];m[0]=m[1],m[1]=P}}Ji(gv,"rotate");function H1(c,m){let p=qm(2,c),T=m,P=m,D=m,M=[0,0],u=1;for(;u<p;)T=1&D/2,P=1&(D^T),gv(u,M,T,P),M[0]+=u*T,M[1]+=u*P,D=D/4,u*=2;return[c,M[0],M[1]]}Ji(H1,"idOnLevel");var sE=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function q1(c,m,p){if(c>26)throw new Error("Tile zoom level exceeds max safe number limit (26)");if(m>qm(2,c)-1||p>qm(2,c)-1)throw new Error("tile x/y outside zoom level bounds");let T=sE[c],P=qm(2,c),D=0,M=0,u=0,te=[m,p],Y=P/2;for(;Y>0;)D=(te[0]&Y)>0?1:0,M=(te[1]&Y)>0?1:0,u+=Y*Y*(3*D^M),gv(Y,te,D,M),Y=Y/2;return T+u}Ji(q1,"zxyToTileId");function aE(c){let m=0;for(let p=0;p<27;p++){let T=(1<<p)*(1<<p);if(m+T>c)return H1(p,c-m);m+=T}throw new Error("Tile zoom level exceeds max safe number limit (26)")}Ji(aE,"tileIdToZxy");var lE=(c=>(c[c.Unknown=0]="Unknown",c[c.None=1]="None",c[c.Gzip=2]="Gzip",c[c.Brotli=3]="Brotli",c[c.Zstd=4]="Zstd",c))(lE||{});function vy(c,m){return el(this,null,function*(){if(m===1||m===0)return c;if(m===2){if(typeof globalThis.DecompressionStream>"u")return eE(new Uint8Array(c));let p=new Response(c).body;if(!p)throw new Error("Failed to read response stream");let T=p.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(T).arrayBuffer()}throw new Error("Compression method not supported")})}Ji(vy,"defaultDecompress");var uE=(c=>(c[c.Unknown=0]="Unknown",c[c.Mvt=1]="Mvt",c[c.Png=2]="Png",c[c.Jpeg=3]="Jpeg",c[c.Webp=4]="Webp",c[c.Avif=5]="Avif",c))(uE||{});function K1(c){return c===1?".mvt":c===2?".png":c===3?".jpg":c===4?".webp":c===5?".avif":""}Ji(K1,"tileTypeExt");var cE=127;function X1(c,m){let p=0,T=c.length-1;for(;p<=T;){let P=T+p>>1,D=m-c[P].tileId;if(D>0)p=P+1;else if(D<0)T=P-1;else return c[P]}return T>=0&&(c[T].runLength===0||m-c[T].tileId<c[T].runLength)?c[T]:null}Ji(X1,"findTile");var hE=class{constructor(m){this.file=m}getKey(){return this.file.name}getBytes(m,p){return el(this,null,function*(){return{data:yield this.file.slice(m,m+p).arrayBuffer()}})}};Ji(hE,"FileSource");var Y1=class{constructor(m,p=new Headers){this.url=m,this.customHeaders=p,this.mustReload=!1;let T="";"navigator"in globalThis&&(T=globalThis.navigator.userAgent||"");let P=T.indexOf("Windows")>-1,D=/Chrome|Chromium|Edg|OPR|Brave/.test(T);this.chromeWindowsNoCache=!1,P&&D&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(m){this.customHeaders=m}getBytes(m,p,T,P){return el(this,null,function*(){let D,M;T?M=T:(D=new AbortController,M=D.signal);let u=new Headers(this.customHeaders);u.set("range",`bytes=${m}-${m+p-1}`);let te;this.mustReload?te="reload":this.chromeWindowsNoCache&&(te="no-store");let Y=yield fetch(this.url,{signal:M,cache:te,headers:u});if(m===0&&Y.status===416){let Te=Y.headers.get("Content-Range");if(!Te||!Te.startsWith("bytes */"))throw new Error("Missing content-length on 416 response");let ge=+Te.substr(8);Y=yield fetch(this.url,{signal:M,cache:"reload",headers:{range:`bytes=0-${ge-1}`}})}let fe=Y.headers.get("Etag");if(fe!=null&&fe.startsWith("W/")&&(fe=null),Y.status===416||P&&fe&&fe!==P)throw this.mustReload=!0,new q_(`Server returned non-matching ETag ${P} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(Y.status>=300)throw new Error(`Bad response code: ${Y.status}`);let he=Y.headers.get("Content-Length");if(Y.status===200&&(!he||+he>p))throw D&&D.abort(),new Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield Y.arrayBuffer(),etag:fe||void 0,cacheControl:Y.headers.get("Cache-Control")||void 0,expires:Y.headers.get("Expires")||void 0}})}};Ji(Y1,"FetchSource");var dE=Y1;function ih(c,m){let p=c.getUint32(m+4,!0),T=c.getUint32(m+0,!0);return p*qm(2,32)+T}Ji(ih,"getUint64");function Q1(c,m){let p=new DataView(c),T=p.getUint8(7);if(T>3)throw new Error(`Archive is spec version ${T} but this library supports up to spec version 3`);return{specVersion:T,rootDirectoryOffset:ih(p,8),rootDirectoryLength:ih(p,16),jsonMetadataOffset:ih(p,24),jsonMetadataLength:ih(p,32),leafDirectoryOffset:ih(p,40),leafDirectoryLength:ih(p,48),tileDataOffset:ih(p,56),tileDataLength:ih(p,64),numAddressedTiles:ih(p,72),numTileEntries:ih(p,80),numTileContents:ih(p,88),clustered:p.getUint8(96)===1,internalCompression:p.getUint8(97),tileCompression:p.getUint8(98),tileType:p.getUint8(99),minZoom:p.getUint8(100),maxZoom:p.getUint8(101),minLon:p.getInt32(102,!0)/1e7,minLat:p.getInt32(106,!0)/1e7,maxLon:p.getInt32(110,!0)/1e7,maxLat:p.getInt32(114,!0)/1e7,centerZoom:p.getUint8(118),centerLon:p.getInt32(119,!0)/1e7,centerLat:p.getInt32(123,!0)/1e7,etag:m}}Ji(Q1,"bytesToHeader");function yv(c){let m={buf:new Uint8Array(c),pos:0},p=em(m),T=[],P=0;for(let D=0;D<p;D++){let M=em(m);T.push({tileId:P+M,offset:0,length:0,runLength:1}),P+=M}for(let D=0;D<p;D++)T[D].runLength=em(m);for(let D=0;D<p;D++)T[D].length=em(m);for(let D=0;D<p;D++){let M=em(m);M===0&&D>0?T[D].offset=T[D-1].offset+T[D-1].length:T[D].offset=M-1}return T}Ji(yv,"deserializeIndex");var J1=class extends Error{};Ji(J1,"EtagMismatch");var q_=J1;function _v(c,m){return el(this,null,function*(){let p=yield c.getBytes(0,16384);if(new DataView(p.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");let T=p.data.slice(0,cE),P=Q1(T,p.etag),D=p.data.slice(P.rootDirectoryOffset,P.rootDirectoryOffset+P.rootDirectoryLength),M=`${c.getKey()}|${P.etag||""}|${P.rootDirectoryOffset}|${P.rootDirectoryLength}`,u=yv(yield m(D,P.internalCompression));return[P,[M,u.length,u]]})}Ji(_v,"getHeaderAndRoot");function vv(c,m,p,T,P){return el(this,null,function*(){let D=yield c.getBytes(p,T,void 0,P.etag),M=yield m(D.data,P.internalCompression),u=yv(M);if(u.length===0)throw new Error("Empty directory is invalid");return u})}Ji(vv,"getDirectory");var fE=class{constructor(m=100,p=!0,T=vy){this.cache=new Map,this.maxCacheEntries=m,this.counter=1,this.decompress=T}getHeader(m){return el(this,null,function*(){let p=m.getKey(),T=this.cache.get(p);if(T)return T.lastUsed=this.counter++,T.data;let P=yield _v(m,this.decompress);return P[1]&&this.cache.set(P[1][0],{lastUsed:this.counter++,data:P[1][2]}),this.cache.set(p,{lastUsed:this.counter++,data:P[0]}),this.prune(),P[0]})}getDirectory(m,p,T,P){return el(this,null,function*(){let D=`${m.getKey()}|${P.etag||""}|${p}|${T}`,M=this.cache.get(D);if(M)return M.lastUsed=this.counter++,M.data;let u=yield vv(m,this.decompress,p,T,P);return this.cache.set(D,{lastUsed:this.counter++,data:u}),this.prune(),u})}prune(){if(this.cache.size>this.maxCacheEntries){let m=1/0,p;this.cache.forEach((T,P)=>{T.lastUsed<m&&(m=T.lastUsed,p=P)}),p&&this.cache.delete(p)}}invalidate(m){return el(this,null,function*(){this.cache.delete(m.getKey())})}};Ji(fE,"ResolvedValueCache");var eb=class{constructor(m=100,p=!0,T=vy){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=m,this.counter=1,this.decompress=T}getHeader(m){return el(this,null,function*(){let p=m.getKey(),T=this.cache.get(p);if(T)return T.lastUsed=this.counter++,yield T.data;let P=new Promise((D,M)=>{_v(m,this.decompress).then(u=>{u[1]&&this.cache.set(u[1][0],{lastUsed:this.counter++,data:Promise.resolve(u[1][2])}),D(u[0]),this.prune()}).catch(u=>{M(u)})});return this.cache.set(p,{lastUsed:this.counter++,data:P}),P})}getDirectory(m,p,T,P){return el(this,null,function*(){let D=`${m.getKey()}|${P.etag||""}|${p}|${T}`,M=this.cache.get(D);if(M)return M.lastUsed=this.counter++,yield M.data;let u=new Promise((te,Y)=>{vv(m,this.decompress,p,T,P).then(fe=>{te(fe),this.prune()}).catch(fe=>{Y(fe)})});return this.cache.set(D,{lastUsed:this.counter++,data:u}),u})}prune(){if(this.cache.size>=this.maxCacheEntries){let m=1/0,p;this.cache.forEach((T,P)=>{T.lastUsed<m&&(m=T.lastUsed,p=P)}),p&&this.cache.delete(p)}}invalidate(m){return el(this,null,function*(){let p=m.getKey();if(this.invalidations.get(p))return yield this.invalidations.get(p);this.cache.delete(m.getKey());let T=new Promise((P,D)=>{this.getHeader(m).then(M=>{P(),this.invalidations.delete(p)}).catch(M=>{D(M)})});this.invalidations.set(p,T)})}};Ji(eb,"SharedPromiseCache");var pE=eb,tb=class{constructor(m,p,T){typeof m=="string"?this.source=new dE(m):this.source=m,T?this.decompress=T:this.decompress=vy,p?this.cache=p:this.cache=new pE}getHeader(){return el(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(m,p,T,P){return el(this,null,function*(){let D=q1(m,p,T),M=yield this.cache.getHeader(this.source);if(m<M.minZoom||m>M.maxZoom)return;let u=M.rootDirectoryOffset,te=M.rootDirectoryLength;for(let Y=0;Y<=3;Y++){let fe=yield this.cache.getDirectory(this.source,u,te,M),he=X1(fe,D);if(he){if(he.runLength>0){let Te=yield this.source.getBytes(M.tileDataOffset+he.offset,he.length,P,M.etag);return{data:yield this.decompress(Te.data,M.tileCompression),cacheControl:Te.cacheControl,expires:Te.expires}}u=M.leafDirectoryOffset+he.offset,te=he.length}else return}throw new Error("Maximum directory depth exceeded")})}getZxy(m,p,T,P){return el(this,null,function*(){try{return yield this.getZxyAttempt(m,p,T,P)}catch(D){if(D instanceof q_)return this.cache.invalidate(this.source),yield this.getZxyAttempt(m,p,T,P);throw D}})}getMetadataAttempt(){return el(this,null,function*(){let m=yield this.cache.getHeader(this.source),p=yield this.source.getBytes(m.jsonMetadataOffset,m.jsonMetadataLength,void 0,m.etag),T=yield this.decompress(p.data,m.internalCompression),P=new TextDecoder("utf-8");return JSON.parse(P.decode(T))})}getMetadata(){return el(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(m){if(m instanceof q_)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw m}})}getTileJson(m){return el(this,null,function*(){let p=yield this.getHeader(),T=yield this.getMetadata(),P=K1(p.tileType);return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${m}/{z}/{x}/{y}${P}`],vector_layers:T.vector_layers,attribution:T.attribution,description:T.description,name:T.name,version:T.version,bounds:[p.minLon,p.minLat,p.maxLon,p.maxLat],center:[p.centerLon,p.centerLat,p.centerZoom],minzoom:p.minZoom,maxzoom:p.maxZoom}})}};Ji(tb,"PMTiles");var j0=tb,Um={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var mE=Um.exports,U0;function gE(){return U0||(U0=1,function(c,m){(function(){var p,T="4.17.21",P=200,D="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",M="Expected a function",u="Invalid `variable` option passed into `_.template`",te="__lodash_hash_undefined__",Y=500,fe="__lodash_placeholder__",he=1,Te=2,ge=4,we=1,Ce=2,We=1,gt=2,At=4,Ct=8,et=16,Je=32,it=64,_t=128,Le=256,je=512,ne=30,ot="...",at=800,Lt=16,rr=1,Pr=2,xr=3,sr=1/0,bt=9007199254740991,Et=17976931348623157e292,Ht=NaN,Fe=4294967295,ht=Fe-1,Vt=Fe>>>1,cr=[["ary",_t],["bind",We],["bindKey",gt],["curry",Ct],["curryRight",et],["flip",je],["partial",Je],["partialRight",it],["rearg",Le]],Rt="[object Arguments]",or="[object Array]",Tr="[object AsyncFunction]",pr="[object Boolean]",mr="[object Date]",Jr="[object DOMException]",Cr="[object Error]",rn="[object Function]",jr="[object GeneratorFunction]",br="[object Map]",on="[object Number]",qr="[object Null]",fn="[object Object]",sn="[object Promise]",wn="[object Proxy]",an="[object RegExp]",An="[object Set]",Sr="[object String]",Vn="[object Symbol]",Hn="[object Undefined]",Ti="[object WeakMap]",ei="[object WeakSet]",qn="[object ArrayBuffer]",Nn="[object DataView]",eo="[object Float32Array]",Wi="[object Float64Array]",Zi="[object Int8Array]",ti="[object Int16Array]",oi="[object Int32Array]",go="[object Uint8Array]",tt="[object Uint8ClampedArray]",ae="[object Uint16Array]",le="[object Uint32Array]",_e=/\b__p \+= '';/g,Me=/\b(__p \+=) '' \+/g,Ve=/(__e\(.*?\)|\b__t\)) \+\n'';/g,pe=/&(?:amp|lt|gt|quot|#39);/g,Ke=/[&<>"']/g,He=RegExp(pe.source),nt=RegExp(Ke.source),ft=/<%-([\s\S]+?)%>/g,Ye=/<%([\s\S]+?)%>/g,Dt=/<%=([\s\S]+?)%>/g,Yt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,hr=/^\w*$/,kr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Kr=/[\\^$.*+?()[\]{}|]/g,$r=RegExp(Kr.source),Tt=/^\s+/,Sn=/\s/,_n=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Tn=/\{\n\/\* \[wrapped with (.+)\] \*/,Br=/,? & /,Ft=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Fr=/[()=,{}\[\]\/\s]/,nn=/\\(\\)?/g,Zn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Gn=/\w*$/,Eo=/^[-+]0x[0-9a-f]+$/i,cn=/^0b[01]+$/i,Qs=/^\[object .+?Constructor\]$/,Js=/^0o[0-7]+$/i,Es=/^(?:0|[1-9]\d*)$/,tl=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Go=/($^)/,Da=/['\n\r\u2028\u2029\\]/g,hn="\\ud800-\\udfff",ui="\\u0300-\\u036f",Kn="\\ufe20-\\ufe2f",Oa="\\u20d0-\\u20ff",os=ui+Kn+Oa,Xl="\\u2700-\\u27bf",Oo="a-z\\xdf-\\xf6\\xf8-\\xff",to="\\xac\\xb1\\xd7\\xf7",ss="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",rl="\\u2000-\\u206f",yo=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ya="A-Z\\xc0-\\xd6\\xd8-\\xde",Yl="\\ufe0e\\ufe0f",mu=to+ss+rl+yo,_a="[']",Ql="["+hn+"]",Fa="["+mu+"]",Is="["+os+"]",B="\\d+",J="["+Xl+"]",de="["+Oo+"]",Ie="[^"+hn+mu+B+Xl+Oo+ya+"]",yt="\\ud83c[\\udffb-\\udfff]",ct="(?:"+Is+"|"+yt+")",Ot="[^"+hn+"]",ar="(?:\\ud83c[\\udde6-\\uddff]){2}",gr="[\\ud800-\\udbff][\\udc00-\\udfff]",Ar="["+ya+"]",_r="\\u200d",$n="(?:"+de+"|"+Ie+")",_i="(?:"+Ar+"|"+Ie+")",ro="(?:"+_a+"(?:d|ll|m|re|s|t|ve))?",en="(?:"+_a+"(?:D|LL|M|RE|S|T|VE))?",as=ct+"?",Io="["+Yl+"]?",Mo="(?:"+_r+"(?:"+[Ot,ar,gr].join("|")+")"+Io+as+")*",ci="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",hi="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",On=Io+as+Mo,Ei="(?:"+[J,ar,gr].join("|")+")"+On,Fn="(?:"+[Ot+Is+"?",Is,ar,gr,Ql].join("|")+")",gu=RegExp(_a,"g"),Fo=RegExp(Is,"g"),no=RegExp(yt+"(?="+yt+")|"+Fn+On,"g"),ls=RegExp([Ar+"?"+de+"+"+ro+"(?="+[Fa,Ar,"$"].join("|")+")",_i+"+"+en+"(?="+[Fa,Ar+$n,"$"].join("|")+")",Ar+"?"+$n+"+"+ro,Ar+"+"+en,hi,ci,B,Ei].join("|"),"g"),us=RegExp("["+_r+hn+os+Yl+"]"),Dn=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,di=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Dr=-1,yr={};yr[eo]=yr[Wi]=yr[Zi]=yr[ti]=yr[oi]=yr[go]=yr[tt]=yr[ae]=yr[le]=!0,yr[Rt]=yr[or]=yr[qn]=yr[pr]=yr[Nn]=yr[mr]=yr[Cr]=yr[rn]=yr[br]=yr[on]=yr[fn]=yr[an]=yr[An]=yr[Sr]=yr[Ti]=!1;var En={};En[Rt]=En[or]=En[qn]=En[Nn]=En[pr]=En[mr]=En[eo]=En[Wi]=En[Zi]=En[ti]=En[oi]=En[br]=En[on]=En[fn]=En[an]=En[An]=En[Sr]=En[Vn]=En[go]=En[tt]=En[ae]=En[le]=!0,En[Cr]=En[rn]=En[Ti]=!1;var Xr={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},cs={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},io={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},nl={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},yu=parseFloat,Ba=parseInt,va=typeof Fg=="object"&&Fg&&Fg.Object===Object&&Fg,Jl=typeof self=="object"&&self&&self.Object===Object&&self,fi=va||Jl||Function("return this")(),il=m&&!m.nodeType&&m,hs=il&&!0&&c&&!c.nodeType&&c,ol=hs&&hs.exports===il,vi=ol&&va.process,Bi=function(){try{var rt=hs&&hs.require&&hs.require("util").types;return rt||vi&&vi.binding&&vi.binding("util")}catch{}}(),Na=Bi&&Bi.isArrayBuffer,Ri=Bi&&Bi.isDate,Ii=Bi&&Bi.isMap,xa=Bi&&Bi.isRegExp,sl=Bi&&Bi.isSet,Zu=Bi&&Bi.isTypedArray;function _o(rt,Nt,St){switch(St.length){case 0:return rt.call(Nt);case 1:return rt.call(Nt,St[0]);case 2:return rt.call(Nt,St[0],St[1]);case 3:return rt.call(Nt,St[0],St[1],St[2])}return rt.apply(Nt,St)}function Ni(rt,Nt,St,Mr){for(var gn=-1,Yn=rt==null?0:rt.length;++gn<Yn;){var so=rt[gn];Nt(Mr,so,St(so),rt)}return Mr}function zi(rt,Nt){for(var St=-1,Mr=rt==null?0:rt.length;++St<Mr&&Nt(rt[St],St,rt)!==!1;);return rt}function ds(rt,Nt){for(var St=rt==null?0:rt.length;St--&&Nt(rt[St],St,rt)!==!1;);return rt}function $a(rt,Nt){for(var St=-1,Mr=rt==null?0:rt.length;++St<Mr;)if(!Nt(rt[St],St,rt))return!1;return!0}function Ms(rt,Nt){for(var St=-1,Mr=rt==null?0:rt.length,gn=0,Yn=[];++St<Mr;){var so=rt[St];Nt(so,St,rt)&&(Yn[gn++]=so)}return Yn}function ko(rt,Nt){var St=rt==null?0:rt.length;return!!St&&Ua(rt,Nt,0)>-1}function Gi(rt,Nt,St){for(var Mr=-1,gn=rt==null?0:rt.length;++Mr<gn;)if(St(Nt,rt[Mr]))return!0;return!1}function Xn(rt,Nt){for(var St=-1,Mr=rt==null?0:rt.length,gn=Array(Mr);++St<Mr;)gn[St]=Nt(rt[St],St,rt);return gn}function ja(rt,Nt){for(var St=-1,Mr=Nt.length,gn=rt.length;++St<Mr;)rt[gn+St]=Nt[St];return rt}function Gu(rt,Nt,St,Mr){var gn=-1,Yn=rt==null?0:rt.length;for(Mr&&Yn&&(St=rt[++gn]);++gn<Yn;)St=Nt(St,rt[gn],gn,rt);return St}function Nh(rt,Nt,St,Mr){var gn=rt==null?0:rt.length;for(Mr&&gn&&(St=rt[--gn]);gn--;)St=Nt(St,rt[gn],gn,rt);return St}function _u(rt,Nt){for(var St=-1,Mr=rt==null?0:rt.length;++St<Mr;)if(Nt(rt[St],St,rt))return!0;return!1}var $h=$("length");function vu(rt){return rt.split("")}function al(rt){return rt.match(Ft)||[]}function Al(rt,Nt,St){var Mr;return St(rt,function(gn,Yn,so){if(Nt(gn,Yn,so))return Mr=Yn,!1}),Mr}function Rl(rt,Nt,St,Mr){for(var gn=rt.length,Yn=St+(Mr?1:-1);Mr?Yn--:++Yn<gn;)if(Nt(rt[Yn],Yn,rt))return Yn;return-1}function Ua(rt,Nt,St){return Nt===Nt?Dc(rt,Nt,St):Rl(rt,Wu,St)}function ks(rt,Nt,St,Mr){for(var gn=St-1,Yn=rt.length;++gn<Yn;)if(Mr(rt[gn],Nt))return gn;return-1}function Wu(rt){return rt!==rt}function Hu(rt,Nt){var St=rt==null?0:rt.length;return St?vt(rt,Nt)/St:Ht}function $(rt){return function(Nt){return Nt==null?p:Nt[rt]}}function K(rt){return function(Nt){return rt==null?p:rt[Nt]}}function ue(rt,Nt,St,Mr,gn){return gn(rt,function(Yn,so,ri){St=Mr?(Mr=!1,Yn):Nt(St,Yn,so,ri)}),St}function Ee(rt,Nt){var St=rt.length;for(rt.sort(Nt);St--;)rt[St]=rt[St].value;return rt}function vt(rt,Nt){for(var St,Mr=-1,gn=rt.length;++Mr<gn;){var Yn=Nt(rt[Mr]);Yn!==p&&(St=St===p?Yn:St+Yn)}return St}function st(rt,Nt){for(var St=-1,Mr=Array(rt);++St<rt;)Mr[St]=Nt(St);return Mr}function $t(rt,Nt){return Xn(Nt,function(St){return[St,rt[St]]})}function lr(rt){return rt&&rt.slice(0,Oc(rt)+1).replace(Tt,"")}function Nr(rt){return function(Nt){return rt(Nt)}}function mn(rt,Nt){return Xn(Nt,function(St){return rt[St]})}function Yr(rt,Nt){return rt.has(Nt)}function pi(rt,Nt){for(var St=-1,Mr=rt.length;++St<Mr&&Ua(Nt,rt[St],0)>-1;);return St}function Bo(rt,Nt){for(var St=rt.length;St--&&Ua(Nt,rt[St],0)>-1;);return St}function As(rt,Nt){for(var St=rt.length,Mr=0;St--;)rt[St]===Nt&&++Mr;return Mr}var fs=K(Xr),ea=K(cs);function Lc(rt){return"\\"+nl[rt]}function ll(rt,Nt){return rt==null?p:rt[Nt]}function ul(rt){return us.test(rt)}function cf(rt){return Dn.test(rt)}function jh(rt){for(var Nt,St=[];!(Nt=rt.next()).done;)St.push(Nt.value);return St}function Uh(rt){var Nt=-1,St=Array(rt.size);return rt.forEach(function(Mr,gn){St[++Nt]=[gn,Mr]}),St}function Md(rt,Nt){return function(St){return rt(Nt(St))}}function ta(rt,Nt){for(var St=-1,Mr=rt.length,gn=0,Yn=[];++St<Mr;){var so=rt[St];(so===Nt||so===fe)&&(rt[St]=fe,Yn[gn++]=St)}return Yn}function eu(rt){var Nt=-1,St=Array(rt.size);return rt.forEach(function(Mr){St[++Nt]=Mr}),St}function hf(rt){var Nt=-1,St=Array(rt.size);return rt.forEach(function(Mr){St[++Nt]=[Mr,Mr]}),St}function Dc(rt,Nt,St){for(var Mr=St-1,gn=rt.length;++Mr<gn;)if(rt[Mr]===Nt)return Mr;return-1}function df(rt,Nt,St){for(var Mr=St+1;Mr--;)if(rt[Mr]===Nt)return Mr;return Mr}function Cn(rt){return ul(rt)?Zh(rt):$h(rt)}function oo(rt){return ul(rt)?kd(rt):vu(rt)}function Oc(rt){for(var Nt=rt.length;Nt--&&Sn.test(rt.charAt(Nt)););return Nt}var Vh=K(io);function Zh(rt){for(var Nt=no.lastIndex=0;no.test(rt);)++Nt;return Nt}function kd(rt){return rt.match(no)||[]}function Ad(rt){return rt.match(ls)||[]}var qu=function rt(Nt){Nt=Nt==null?fi:xu.defaults(fi.Object(),Nt,xu.pick(fi,di));var St=Nt.Array,Mr=Nt.Date,gn=Nt.Error,Yn=Nt.Function,so=Nt.Math,ri=Nt.Object,bu=Nt.RegExp,Gh=Nt.String,ra=Nt.TypeError,Rs=St.prototype,Fc=Yn.prototype,zs=ri.prototype,Wo=Nt["__core-js_shared__"],Bc=Fc.toString,Wn=zs.hasOwnProperty,wu=0,zl=function(){var h=/[^.]+$/.exec(Wo&&Wo.keys&&Wo.keys.IE_PROTO||"");return h?"Symbol(src)_1."+h:""}(),Su=zs.toString,Ku=Bc.call(ri),Nc=fi._,fh=bu("^"+Bc.call(Wn).replace(Kr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Tu=ol?Nt.Buffer:p,na=Nt.Symbol,Ll=Nt.Uint8Array,Wh=Tu?Tu.allocUnsafe:p,ia=Md(ri.getPrototypeOf,ri),bn=ri.create,Xu=zs.propertyIsEnumerable,Yu=Rs.splice,Hh=na?na.isConcatSpreadable:p,ba=na?na.iterator:p,Qu=na?na.toStringTag:p,ph=function(){try{var h=Zl(ri,"defineProperty");return h({},"",{}),h}catch{}}(),Rd=Nt.clearTimeout!==fi.clearTimeout&&Nt.clearTimeout,Li=Mr&&Mr.now!==fi.Date.now&&Mr.now,$c=Nt.setTimeout!==fi.setTimeout&&Nt.setTimeout,cl=so.ceil,hl=so.floor,jc=ri.getOwnPropertySymbols,Uc=Tu?Tu.isBuffer:p,Cu=Nt.isFinite,Pu=Rs.join,Dl=Md(ri.keys,ri),$i=so.max,No=so.min,mh=Mr.now,gh=Nt.parseInt,Vc=so.random,Ju=Rs.reverse,ec=Zl(Nt,"DataView"),Eu=Zl(Nt,"Map"),Zc=Zl(Nt,"Promise"),dl=Zl(Nt,"Set"),Iu=Zl(Nt,"WeakMap"),tc=Zl(ri,"create"),Mu=Iu&&new Iu,Ci={},Ol=Sl(ec),vo=Sl(Eu),qh=Sl(Zc),Fl=Sl(dl),Va=Sl(Iu),Ho=na?na.prototype:p,Ls=Ho?Ho.valueOf:p,ku=Ho?Ho.toString:p;function ce(h){if(Lo(h)&&!kn(h)&&!(h instanceof yn)){if(h instanceof qo)return h;if(Wn.call(h,"__wrapped__"))return Mp(h)}return new qo(h)}var rc=function(){function h(){}return function(_){if(!To(_))return{};if(bn)return bn(_);h.prototype=_;var I=new h;return h.prototype=p,I}}();function fl(){}function qo(h,_){this.__wrapped__=h,this.__actions__=[],this.__chain__=!!_,this.__index__=0,this.__values__=p}ce.templateSettings={escape:ft,evaluate:Ye,interpolate:Dt,variable:"",imports:{_:ce}},ce.prototype=fl.prototype,ce.prototype.constructor=ce,qo.prototype=rc(fl.prototype),qo.prototype.constructor=qo;function yn(h){this.__wrapped__=h,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Fe,this.__views__=[]}function tu(){var h=new yn(this.__wrapped__);return h.__actions__=Vs(this.__actions__),h.__dir__=this.__dir__,h.__filtered__=this.__filtered__,h.__iteratees__=Vs(this.__iteratees__),h.__takeCount__=this.__takeCount__,h.__views__=Vs(this.__views__),h}function ao(){if(this.__filtered__){var h=new yn(this);h.__dir__=-1,h.__filtered__=!0}else h=this.clone(),h.__dir__*=-1;return h}function pl(){var h=this.__wrapped__.value(),_=this.__dir__,I=kn(h),Z=_<0,re=I?h.length:0,ve=_f(0,re,this.__views__),Ne=ve.start,qe=ve.end,ut=qe-Ne,Wt=Z?qe:Ne-1,qt=this.__iteratees__,nr=qt.length,Rr=0,tn=No(ut,this.__takeCount__);if(!I||!Z&&re==ut&&tn==ut)return Rn(h,this.__actions__);var vn=[];e:for(;ut--&&Rr<tn;){Wt+=_;for(var Un=-1,xn=h[Wt];++Un<nr;){var ii=qt[Un],gi=ii.iteratee,Pc=ii.type,fu=gi(xn);if(Pc==Pr)xn=fu;else if(!fu){if(Pc==rr)continue e;break e}}vn[Rr++]=xn}return vn}yn.prototype=rc(fl.prototype),yn.prototype.constructor=yn;function ps(h){var _=-1,I=h==null?0:h.length;for(this.clear();++_<I;){var Z=h[_];this.set(Z[0],Z[1])}}function Mi(){this.__data__=tc?tc(null):{},this.size=0}function Pi(h){var _=this.has(h)&&delete this.__data__[h];return this.size-=_?1:0,_}function wa(h){var _=this.__data__;if(tc){var I=_[h];return I===te?p:I}return Wn.call(_,h)?_[h]:p}function $o(h){var _=this.__data__;return tc?_[h]!==p:Wn.call(_,h)}function Ko(h,_){var I=this.__data__;return this.size+=this.has(h)?0:1,I[h]=tc&&_===p?te:_,this}ps.prototype.clear=Mi,ps.prototype.delete=Pi,ps.prototype.get=wa,ps.prototype.has=$o,ps.prototype.set=Ko;function ms(h){var _=-1,I=h==null?0:h.length;for(this.clear();++_<I;){var Z=h[_];this.set(Z[0],Z[1])}}function ml(){this.__data__=[],this.size=0}function Ds(h){var _=this.__data__,I=Yo(_,h);if(I<0)return!1;var Z=_.length-1;return I==Z?_.pop():Yu.call(_,I,1),--this.size,!0}function Ao(h){var _=this.__data__,I=Yo(_,h);return I<0?p:_[I][1]}function Za(h){return Yo(this.__data__,h)>-1}function nc(h,_){var I=this.__data__,Z=Yo(I,h);return Z<0?(++this.size,I.push([h,_])):I[Z][1]=_,this}ms.prototype.clear=ml,ms.prototype.delete=Ds,ms.prototype.get=Ao,ms.prototype.has=Za,ms.prototype.set=nc;function Hi(h){var _=-1,I=h==null?0:h.length;for(this.clear();++_<I;){var Z=h[_];this.set(Z[0],Z[1])}}function ic(){this.size=0,this.__data__={hash:new ps,map:new(Eu||ms),string:new ps}}function Ga(h){var _=nd(this,h).delete(h);return this.size-=_?1:0,_}function Kh(h){return nd(this,h).get(h)}function yh(h){return nd(this,h).has(h)}function _h(h,_){var I=nd(this,h),Z=I.size;return I.set(h,_),this.size+=I.size==Z?0:1,this}Hi.prototype.clear=ic,Hi.prototype.delete=Ga,Hi.prototype.get=Kh,Hi.prototype.has=yh,Hi.prototype.set=_h;function ru(h){var _=-1,I=h==null?0:h.length;for(this.__data__=new Hi;++_<I;)this.add(h[_])}function Sa(h){return this.__data__.set(h,te),this}function Os(h){return this.__data__.has(h)}ru.prototype.add=ru.prototype.push=Sa,ru.prototype.has=Os;function ur(h){var _=this.__data__=new ms(h);this.size=_.size}function oc(){this.__data__=new ms,this.size=0}function sc(h){var _=this.__data__,I=_.delete(h);return this.size=_.size,I}function Ta(h){return this.__data__.get(h)}function Xo(h){return this.__data__.has(h)}function gl(h,_){var I=this.__data__;if(I instanceof ms){var Z=I.__data__;if(!Eu||Z.length<P-1)return Z.push([h,_]),this.size=++I.size,this;I=this.__data__=new Hi(Z)}return I.set(h,_),this.size=I.size,this}ur.prototype.clear=oc,ur.prototype.delete=sc,ur.prototype.get=Ta,ur.prototype.has=Xo,ur.prototype.set=gl;function Wa(h,_){var I=kn(h),Z=!I&&Rh(h),re=!I&&!Z&&xs(h),ve=!I&&!Z&&!re&&Of(h),Ne=I||Z||re||ve,qe=Ne?st(h.length,Gh):[],ut=qe.length;for(var Wt in h)(_||Wn.call(h,Wt))&&!(Ne&&(Wt=="length"||re&&(Wt=="offset"||Wt=="parent")||ve&&(Wt=="buffer"||Wt=="byteLength"||Wt=="byteOffset")||wi(Wt,ut)))&&qe.push(Wt);return qe}function dn(h){var _=h.length;return _?h[Ue(0,_-1)]:p}function Bl(h,_){return ld(Vs(h),nu(_,0,h.length))}function ff(h){return ld(Vs(h))}function ac(h,_,I){(I!==p&&!Nu(h[_],I)||I===p&&!(_ in h))&&Nl(h,_,I)}function Au(h,_,I){var Z=h[_];(!(Wn.call(h,_)&&Nu(Z,I))||I===p&&!(_ in h))&&Nl(h,_,I)}function Yo(h,_){for(var I=h.length;I--;)if(Nu(h[I][0],_))return I;return-1}function Fs(h,_,I,Z){return yl(h,function(re,ve,Ne){_(Z,re,I(re),Ne)}),Z}function xi(h,_){return h&&Ia(_,F(_),h)}function Bs(h,_){return h&&Ia(_,j(_),h)}function Nl(h,_,I){_=="__proto__"&&ph?ph(h,_,{configurable:!0,enumerable:!0,value:I,writable:!0}):h[_]=I}function lc(h,_){for(var I=-1,Z=_.length,re=St(Z),ve=h==null;++I<Z;)re[I]=ve?p:f(h,_[I]);return re}function nu(h,_,I){return h===h&&(I!==p&&(h=h<=I?h:I),_!==p&&(h=h>=_?h:_)),h}function oa(h,_,I,Z,re,ve){var Ne,qe=_&he,ut=_&Te,Wt=_&ge;if(I&&(Ne=re?I(h,Z,re,ve):I(h)),Ne!==p)return Ne;if(!To(h))return h;var qt=kn(h);if(qt){if(Ne=Nd(h),!qe)return Vs(h,Ne)}else{var nr=Zs(h),Rr=nr==rn||nr==jr;if(xs(h))return Vl(h,qe);if(nr==fn||nr==Rt||Rr&&!re){if(Ne=ut||Rr?{}:Gs(h),!qe)return ut?qa(h,Bs(Ne,h)):Lu(h,xi(Ne,h))}else{if(!En[nr])return re?h:{};Ne=Qf(h,nr,qe)}}ve||(ve=new ur);var tn=ve.get(h);if(tn)return tn;ve.set(h,Ne),gp(h)?h.forEach(function(xn){Ne.add(oa(xn,_,I,xn,h,ve))}):_m(h)&&h.forEach(function(xn,ii){Ne.set(ii,oa(xn,_,I,ii,h,ve))});var vn=Wt?ut?rd:Fd:ut?j:F,Un=qt?p:vn(h);return zi(Un||h,function(xn,ii){Un&&(ii=xn,xn=h[ii]),Au(Ne,ii,oa(xn,_,I,ii,h,ve))}),Ne}function $l(h){var _=F(h);return function(I){return si(I,h,_)}}function si(h,_,I){var Z=I.length;if(h==null)return!Z;for(h=ri(h);Z--;){var re=I[Z],ve=_[re],Ne=h[re];if(Ne===p&&!(re in h)||!ve(Ne))return!1}return!0}function uc(h,_,I){if(typeof h!="function")throw new ra(M);return Fu(function(){h.apply(p,I)},_)}function Ha(h,_,I,Z){var re=-1,ve=ko,Ne=!0,qe=h.length,ut=[],Wt=_.length;if(!qe)return ut;I&&(_=Xn(_,Nr(I))),Z?(ve=Gi,Ne=!1):_.length>=P&&(ve=Yr,Ne=!1,_=new ru(_));e:for(;++re<qe;){var qt=h[re],nr=I==null?qt:I(qt);if(qt=Z||qt!==0?qt:0,Ne&&nr===nr){for(var Rr=Wt;Rr--;)if(_[Rr]===nr)continue e;ut.push(qt)}else ve(_,nr,Z)||ut.push(qt)}return ut}var yl=bo(Ns),zd=bo(jl,!0);function Gc(h,_){var I=!0;return yl(h,function(Z,re,ve){return I=!!_(Z,re,ve),I}),I}function cc(h,_,I){for(var Z=-1,re=h.length;++Z<re;){var ve=h[Z],Ne=_(ve);if(Ne!=null&&(qe===p?Ne===Ne&&!au(Ne):I(Ne,qe)))var qe=Ne,ut=ve}return ut}function gs(h,_,I,Z){var re=h.length;for(I=Ln(I),I<0&&(I=-I>re?0:re+I),Z=Z===p||Z>re?re:Ln(Z),Z<0&&(Z+=re),Z=I>Z?0:bm(Z);I<Z;)h[I++]=_;return h}function Wc(h,_){var I=[];return yl(h,function(Z,re,ve){_(Z,re,ve)&&I.push(Z)}),I}function fr(h,_,I,Z,re){var ve=-1,Ne=h.length;for(I||(I=$d),re||(re=[]);++ve<Ne;){var qe=h[ve];_>0&&I(qe)?_>1?fr(qe,_-1,I,Z,re):ja(re,qe):Z||(re[re.length]=qe)}return re}var Vr=hc(),iu=hc(!0);function Ns(h,_){return h&&Vr(h,_,F)}function jl(h,_){return h&&iu(h,_,F)}function Di(h,_){return Ms(_,function(I){return zh(h[I])})}function _l(h,_){_=ca(_,h);for(var I=0,Z=_.length;h!=null&&I<Z;)h=h[Xa(_[I++])];return I&&I==Z?h:p}function $s(h,_,I){var Z=_(h);return kn(h)?Z:ja(Z,I(h))}function jo(h){return h==null?h===p?Hn:qr:Qu&&Qu in ri(h)?da(h):tp(h)}function sa(h,_){return h>_}function jn(h,_){return h!=null&&Wn.call(h,_)}function ai(h,_){return h!=null&&_ in ri(h)}function Ru(h,_,I){return h>=No(_,I)&&h<$i(_,I)}function zu(h,_,I){for(var Z=I?Gi:ko,re=h[0].length,ve=h.length,Ne=ve,qe=St(ve),ut=1/0,Wt=[];Ne--;){var qt=h[Ne];Ne&&_&&(qt=Xn(qt,Nr(_))),ut=No(qt.length,ut),qe[Ne]=!I&&(_||re>=120&&qt.length>=120)?new ru(Ne&&qt):p}qt=h[0];var nr=-1,Rr=qe[0];e:for(;++nr<re&&Wt.length<ut;){var tn=qt[nr],vn=_?_(tn):tn;if(tn=I||tn!==0?tn:0,!(Rr?Yr(Rr,vn):Z(Wt,vn,I))){for(Ne=ve;--Ne;){var Un=qe[Ne];if(!(Un?Yr(Un,vn):Z(h[Ne],vn,I)))continue e}Rr&&Rr.push(vn),Wt.push(tn)}}return Wt}function Ca(h,_,I,Z){return Ns(h,function(re,ve,Ne){_(Z,I(re),ve,Ne)}),Z}function Uo(h,_,I){_=ca(_,h),h=ho(h,_);var Z=h==null?h:h[Xa(rs(_))];return Z==null?p:_o(Z,h,I)}function Hc(h){return Lo(h)&&jo(h)==Rt}function Xh(h){return Lo(h)&&jo(h)==qn}function aa(h){return Lo(h)&&jo(h)==mr}function la(h,_,I,Z,re){return h===_?!0:h==null||_==null||!Lo(h)&&!Lo(_)?h!==h&&_!==_:g(h,_,I,Z,la,re)}function g(h,_,I,Z,re,ve){var Ne=kn(h),qe=kn(_),ut=Ne?or:Zs(h),Wt=qe?or:Zs(_);ut=ut==Rt?fn:ut,Wt=Wt==Rt?fn:Wt;var qt=ut==fn,nr=Wt==fn,Rr=ut==Wt;if(Rr&&xs(h)){if(!xs(_))return!1;Ne=!0,qt=!1}if(Rr&&!qt)return ve||(ve=new ur),Ne||Of(h)?td(h,_,I,Z,re,ve):gf(h,_,ut,I,Z,re,ve);if(!(I&we)){var tn=qt&&Wn.call(h,"__wrapped__"),vn=nr&&Wn.call(_,"__wrapped__");if(tn||vn){var Un=tn?h.value():h,xn=vn?_.value():_;return ve||(ve=new ur),re(Un,xn,I,Z,ve)}}return Rr?(ve||(ve=new ur),Xf(h,_,I,Z,re,ve)):!1}function e(h){return Lo(h)&&Zs(h)==br}function r(h,_,I,Z){var re=I.length,ve=re,Ne=!Z;if(h==null)return!ve;for(h=ri(h);re--;){var qe=I[re];if(Ne&&qe[2]?qe[1]!==h[qe[0]]:!(qe[0]in h))return!1}for(;++re<ve;){qe=I[re];var ut=qe[0],Wt=h[ut],qt=qe[1];if(Ne&&qe[2]){if(Wt===p&&!(ut in h))return!1}else{var nr=new ur;if(Z)var Rr=Z(Wt,qt,ut,h,_,nr);if(!(Rr===p?la(qt,Wt,we|Ce,Z,nr):Rr))return!1}}return!0}function a(h){if(!To(h)||Ep(h))return!1;var _=zh(h)?fh:Qs;return _.test(Sl(h))}function d(h){return Lo(h)&&jo(h)==an}function y(h){return Lo(h)&&Zs(h)==An}function w(h){return Lo(h)&&bc(h.length)&&!!yr[jo(h)]}function E(h){return typeof h=="function"?h:h==null?Il:typeof h=="object"?kn(h)?Q(h[0],h[1]):G(h):Og(h)}function A(h){if(!fc(h))return Dl(h);var _=[];for(var I in ri(h))Wn.call(h,I)&&I!="constructor"&&_.push(I);return _}function O(h){if(!To(h))return sd(h);var _=fc(h),I=[];for(var Z in h)Z=="constructor"&&(_||!Wn.call(h,Z))||I.push(Z);return I}function N(h,_){return h<_}function W(h,_){var I=-1,Z=Cl(h)?St(h.length):[];return yl(h,function(re,ve,Ne){Z[++I]=_(re,ve,Ne)}),Z}function G(h){var _=Th(h);return _.length==1&&_[0][2]?od(_[0][0],_[0][1]):function(I){return I===h||r(I,h,_)}}function Q(h,_){return Lr(h)&&Ud(_)?od(Xa(h),_):function(I){var Z=f(I,h);return Z===p&&Z===_?b(I,h):la(_,Z,we|Ce)}}function ie(h,_,I,Z,re){h!==_&&Vr(_,function(ve,Ne){if(re||(re=new ur),To(ve))be(h,_,Ne,I,ie,Z,re);else{var qe=Z?Z(wl(h,Ne),ve,Ne+"",h,_,re):p;qe===p&&(qe=ve),ac(h,Ne,qe)}},j)}function be(h,_,I,Z,re,ve,Ne){var qe=wl(h,I),ut=wl(_,I),Wt=Ne.get(ut);if(Wt){ac(h,I,Wt);return}var qt=ve?ve(qe,ut,I+"",h,_,Ne):p,nr=qt===p;if(nr){var Rr=kn(ut),tn=!Rr&&xs(ut),vn=!Rr&&!tn&&Of(ut);qt=ut,Rr||tn||vn?kn(qe)?qt=qe:zo(qe)?qt=Vs(qe):tn?(nr=!1,qt=Vl(ut,!0)):vn?(nr=!1,qt=ys(ut,!0)):qt=[]:Lf(ut)||Rh(ut)?(qt=qe,Rh(qe)?qt=Ig(qe):(!To(qe)||zh(qe))&&(qt=Gs(ut))):nr=!1}nr&&(Ne.set(ut,qt),re(qt,ut,Z,ve,Ne),Ne.delete(ut)),ac(h,I,qt)}function xe(h,_){var I=h.length;if(I)return _+=_<0?I:0,wi(_,I)?h[_]:p}function Se(h,_,I){_.length?_=Xn(_,function(ve){return kn(ve)?function(Ne){return _l(Ne,ve.length===1?ve[0]:ve)}:ve}):_=[Il];var Z=-1;_=Xn(_,Nr(ln()));var re=W(h,function(ve,Ne,qe){var ut=Xn(_,function(Wt){return Wt(ve)});return{criteria:ut,index:++Z,value:ve}});return Ee(re,function(ve,Ne){return Yh(ve,Ne,I)})}function Ae(h,_){return De(h,_,function(I,Z){return b(h,Z)})}function De(h,_,I){for(var Z=-1,re=_.length,ve={};++Z<re;){var Ne=_[Z],qe=_l(h,Ne);I(qe,Ne)&&er(ve,ca(Ne,h),qe)}return ve}function ke(h){return function(_){return _l(_,h)}}function Oe(h,_,I,Z){var re=Z?ks:Ua,ve=-1,Ne=_.length,qe=h;for(h===_&&(_=Vs(_)),I&&(qe=Xn(h,Nr(I)));++ve<Ne;)for(var ut=0,Wt=_[ve],qt=I?I(Wt):Wt;(ut=re(qe,qt,ut,Z))>-1;)qe!==h&&Yu.call(qe,ut,1),Yu.call(h,ut,1);return h}function $e(h,_){for(var I=h?_.length:0,Z=I-1;I--;){var re=_[I];if(I==Z||re!==ve){var ve=re;wi(re)?Yu.call(h,re,1):qi(h,re)}}return h}function Ue(h,_){return h+hl(Vc()*(_-h+1))}function lt(h,_,I,Z){for(var re=-1,ve=$i(cl((_-h)/(I||1)),0),Ne=St(ve);ve--;)Ne[Z?ve:++re]=h,h+=I;return Ne}function Mt(h,_){var I="";if(!h||_<1||_>bt)return I;do _%2&&(I+=h),_=hl(_/2),_&&(h+=h);while(_);return I}function Qe(h,_){return Ka(ji(h,_,Il),h+"")}function dt(h){return dn(Kt(h))}function Pt(h,_){var I=Kt(h);return ld(I,nu(_,0,I.length))}function er(h,_,I,Z){if(!To(h))return h;_=ca(_,h);for(var re=-1,ve=_.length,Ne=ve-1,qe=h;qe!=null&&++re<ve;){var ut=Xa(_[re]),Wt=I;if(ut==="__proto__"||ut==="constructor"||ut==="prototype")return h;if(re!=Ne){var qt=qe[ut];Wt=Z?Z(qt,ut,qe):p,Wt===p&&(Wt=To(qt)?qt:wi(_[re+1])?[]:{})}Au(qe,ut,Wt),qe=qe[ut]}return h}var tr=Mu?function(h,_){return Mu.set(h,_),h}:Il,Bt=ph?function(h,_){return ph(h,"toString",{configurable:!0,enumerable:!1,value:_p(_),writable:!0})}:Il;function vr(h){return ld(Kt(h))}function Gr(h,_,I){var Z=-1,re=h.length;_<0&&(_=-_>re?0:re+_),I=I>re?re:I,I<0&&(I+=re),re=_>I?0:I-_>>>0,_>>>=0;for(var ve=St(re);++Z<re;)ve[Z]=h[Z+_];return ve}function In(h,_){var I;return yl(h,function(Z,re,ve){return I=_(Z,re,ve),!I}),!!I}function mi(h,_,I){var Z=0,re=h==null?Z:h.length;if(typeof _=="number"&&_===_&&re<=Vt){for(;Z<re;){var ve=Z+re>>>1,Ne=h[ve];Ne!==null&&!au(Ne)&&(I?Ne<=_:Ne<_)?Z=ve+1:re=ve}return re}return ni(h,_,Il,I)}function ni(h,_,I,Z){var re=0,ve=h==null?0:h.length;if(ve===0)return 0;_=I(_);for(var Ne=_!==_,qe=_===null,ut=au(_),Wt=_===p;re<ve;){var qt=hl((re+ve)/2),nr=I(h[qt]),Rr=nr!==p,tn=nr===null,vn=nr===nr,Un=au(nr);if(Ne)var xn=Z||vn;else Wt?xn=vn&&(Z||Rr):qe?xn=vn&&Rr&&(Z||!tn):ut?xn=vn&&Rr&&!tn&&(Z||!Un):tn||Un?xn=!1:xn=Z?nr<=_:nr<_;xn?re=qt+1:ve=qt}return No(ve,ht)}function ki(h,_){for(var I=-1,Z=h.length,re=0,ve=[];++I<Z;){var Ne=h[I],qe=_?_(Ne):Ne;if(!I||!Nu(qe,ut)){var ut=qe;ve[re++]=Ne===0?0:Ne}}return ve}function Ai(h){return typeof h=="number"?h:au(h)?Ht:+h}function Mn(h){if(typeof h=="string")return h;if(kn(h))return Xn(h,Mn)+"";if(au(h))return ku?ku.call(h):"";var _=h+"";return _=="0"&&1/h==-1/0?"-0":_}function Pn(h,_,I){var Z=-1,re=ko,ve=h.length,Ne=!0,qe=[],ut=qe;if(I)Ne=!1,re=Gi;else if(ve>=P){var Wt=_?null:qf(h);if(Wt)return eu(Wt);Ne=!1,re=Yr,ut=new ru}else ut=_?[]:qe;e:for(;++Z<ve;){var qt=h[Z],nr=_?_(qt):qt;if(qt=I||qt!==0?qt:0,Ne&&nr===nr){for(var Rr=ut.length;Rr--;)if(ut[Rr]===nr)continue e;_&&ut.push(nr),qe.push(qt)}else re(ut,nr,I)||(ut!==qe&&ut.push(nr),qe.push(qt))}return qe}function qi(h,_){return _=ca(_,h),h=ho(h,_),h==null||delete h[Xa(rs(_))]}function xo(h,_,I,Z){return er(h,_,I(_l(h,_)),Z)}function lo(h,_,I,Z){for(var re=h.length,ve=Z?re:-1;(Z?ve--:++ve<re)&&_(h[ve],ve,h););return I?Gr(h,Z?0:ve,Z?ve+1:re):Gr(h,Z?ve+1:0,Z?re:ve)}function Rn(h,_){var I=h;return I instanceof yn&&(I=I.value()),Gu(_,function(Z,re){return re.func.apply(re.thisArg,ja([Z],re.args))},I)}function vl(h,_,I){var Z=h.length;if(Z<2)return Z?Pn(h[0]):[];for(var re=-1,ve=St(Z);++re<Z;)for(var Ne=h[re],qe=-1;++qe<Z;)qe!=re&&(ve[re]=Ha(ve[re]||Ne,h[qe],_,I));return Pn(fr(ve,1),_,I)}function ua(h,_,I){for(var Z=-1,re=h.length,ve=_.length,Ne={};++Z<re;){var qe=Z<ve?_[Z]:p;I(Ne,h[Z],qe)}return Ne}function Pa(h){return zo(h)?h:[]}function Ul(h){return typeof h=="function"?h:Il}function ca(h,_){return kn(h)?h:Lr(h,_)?[h]:Xc(Si(h))}var ou=Qe;function js(h,_,I){var Z=h.length;return I=I===p?Z:I,!_&&I>=Z?h:Gr(h,_,I)}var Us=Rd||function(h){return fi.clearTimeout(h)};function Vl(h,_){if(_)return h.slice();var I=h.length,Z=Wh?Wh(I):new h.constructor(I);return h.copy(Z),Z}function Ea(h){var _=new h.constructor(h.byteLength);return new Ll(_).set(new Ll(h)),_}function su(h,_){var I=_?Ea(h.buffer):h.buffer;return new h.constructor(I,h.byteOffset,h.byteLength)}function uo(h){var _=new h.constructor(h.source,Gn.exec(h));return _.lastIndex=h.lastIndex,_}function co(h){return Ls?ri(Ls.call(h)):{}}function ys(h,_){var I=_?Ea(h.buffer):h.buffer;return new h.constructor(I,h.byteOffset,h.length)}function bi(h,_){if(h!==_){var I=h!==p,Z=h===null,re=h===h,ve=au(h),Ne=_!==p,qe=_===null,ut=_===_,Wt=au(_);if(!qe&&!Wt&&!ve&&h>_||ve&&Ne&&ut&&!qe&&!Wt||Z&&Ne&&ut||!I&&ut||!re)return 1;if(!Z&&!ve&&!Wt&&h<_||Wt&&I&&re&&!Z&&!ve||qe&&I&&re||!Ne&&re||!ut)return-1}return 0}function Yh(h,_,I){for(var Z=-1,re=h.criteria,ve=_.criteria,Ne=re.length,qe=I.length;++Z<Ne;){var ut=bi(re[Z],ve[Z]);if(ut){if(Z>=qe)return ut;var Wt=I[Z];return ut*(Wt=="desc"?-1:1)}}return h.index-_.index}function Ld(h,_,I,Z){for(var re=-1,ve=h.length,Ne=I.length,qe=-1,ut=_.length,Wt=$i(ve-Ne,0),qt=St(ut+Wt),nr=!Z;++qe<ut;)qt[qe]=_[qe];for(;++re<Ne;)(nr||re<ve)&&(qt[I[re]]=h[re]);for(;Wt--;)qt[qe++]=h[re++];return qt}function Qh(h,_,I,Z){for(var re=-1,ve=h.length,Ne=-1,qe=I.length,ut=-1,Wt=_.length,qt=$i(ve-qe,0),nr=St(qt+Wt),Rr=!Z;++re<qt;)nr[re]=h[re];for(var tn=re;++ut<Wt;)nr[tn+ut]=_[ut];for(;++Ne<qe;)(Rr||re<ve)&&(nr[tn+I[Ne]]=h[re++]);return nr}function Vs(h,_){var I=-1,Z=h.length;for(_||(_=St(Z));++I<Z;)_[I]=h[I];return _}function Ia(h,_,I,Z){var re=!I;I||(I={});for(var ve=-1,Ne=_.length;++ve<Ne;){var qe=_[ve],ut=Z?Z(I[qe],h[qe],qe,I,h):p;ut===p&&(ut=h[qe]),re?Nl(I,qe,ut):Au(I,qe,ut)}return I}function Lu(h,_){return Ia(h,Gl(h),_)}function qa(h,_){return Ia(h,yf(h),_)}function Ma(h,_){return function(I,Z){var re=kn(I)?Ni:Fs,ve=_?_():{};return re(I,h,ln(Z,2),ve)}}function Qo(h){return Qe(function(_,I){var Z=-1,re=I.length,ve=re>1?I[re-1]:p,Ne=re>2?I[2]:p;for(ve=h.length>3&&typeof ve=="function"?(re--,ve):p,Ne&&es(I[0],I[1],Ne)&&(ve=re<3?p:ve,re=1),_=ri(_);++Z<re;){var qe=I[Z];qe&&h(_,qe,Z,ve)}return _})}function bo(h,_){return function(I,Z){if(I==null)return I;if(!Cl(I))return h(I,Z);for(var re=I.length,ve=_?re:-1,Ne=ri(I);(_?ve--:++ve<re)&&Z(Ne[ve],ve,Ne)!==!1;);return I}}function hc(h){return function(_,I,Z){for(var re=-1,ve=ri(_),Ne=Z(_),qe=Ne.length;qe--;){var ut=Ne[h?qe:++re];if(I(ve[ut],ut,ve)===!1)break}return _}}function xl(h,_,I){var Z=_&We,re=Kc(h);function ve(){var Ne=this&&this!==fi&&this instanceof ve?re:h;return Ne.apply(Z?I:this,arguments)}return ve}function vh(h){return function(_){_=Si(_);var I=ul(_)?oo(_):p,Z=I?I[0]:_.charAt(0),re=I?js(I,1).join(""):_.slice(1);return Z[h]()+re}}function qc(h){return function(_){return Gu(tf(Xi(_).replace(gu,"")),h,"")}}function Kc(h){return function(){var _=arguments;switch(_.length){case 0:return new h;case 1:return new h(_[0]);case 2:return new h(_[0],_[1]);case 3:return new h(_[0],_[1],_[2]);case 4:return new h(_[0],_[1],_[2],_[3]);case 5:return new h(_[0],_[1],_[2],_[3],_[4]);case 6:return new h(_[0],_[1],_[2],_[3],_[4],_[5]);case 7:return new h(_[0],_[1],_[2],_[3],_[4],_[5],_[6])}var I=rc(h.prototype),Z=h.apply(I,_);return To(Z)?Z:I}}function pf(h,_,I){var Z=Kc(h);function re(){for(var ve=arguments.length,Ne=St(ve),qe=ve,ut=dc(re);qe--;)Ne[qe]=arguments[qe];var Wt=ve<3&&Ne[0]!==ut&&Ne[ve-1]!==ut?[]:ta(Ne,ut);if(ve-=Wt.length,ve<I)return ka(h,_,xh,re.placeholder,p,Ne,Wt,p,p,I-ve);var qt=this&&this!==fi&&this instanceof re?Z:h;return _o(qt,this,Ne)}return re}function bl(h){return function(_,I,Z){var re=ri(_);if(!Cl(_)){var ve=ln(I,3);_=F(_),I=function(qe){return ve(re[qe],qe,re)}}var Ne=h(_,I,Z);return Ne>-1?re[ve?_[Ne]:Ne]:p}}function Du(h){return Ou(function(_){var I=_.length,Z=I,re=qo.prototype.thru;for(h&&_.reverse();Z--;){var ve=_[Z];if(typeof ve!="function")throw new ra(M);if(re&&!Ne&&Sh(ve)=="wrapper")var Ne=new qo([],!0)}for(Z=Ne?Z:I;++Z<I;){ve=_[Z];var qe=Sh(ve),ut=qe=="wrapper"?Bd(ve):p;ut&&jd(ut[0])&&ut[1]==(_t|Ct|Je|Le)&&!ut[4].length&&ut[9]==1?Ne=Ne[Sh(ut[0])].apply(Ne,ut[3]):Ne=ve.length==1&&jd(ve)?Ne[qe]():Ne.thru(ve)}return function(){var Wt=arguments,qt=Wt[0];if(Ne&&Wt.length==1&&kn(qt))return Ne.plant(qt).value();for(var nr=0,Rr=I?_[nr].apply(this,Wt):qt;++nr<I;)Rr=_[nr].call(this,Rr);return Rr}})}function xh(h,_,I,Z,re,ve,Ne,qe,ut,Wt){var qt=_&_t,nr=_&We,Rr=_&gt,tn=_&(Ct|et),vn=_&je,Un=Rr?p:Kc(h);function xn(){for(var ii=arguments.length,gi=St(ii),Pc=ii;Pc--;)gi[Pc]=arguments[Pc];if(tn)var fu=dc(xn),Ec=As(gi,fu);if(Z&&(gi=Ld(gi,Z,re,tn)),ve&&(gi=Qh(gi,ve,Ne,tn)),ii-=Ec,tn&&ii<Wt){var Xs=ta(gi,fu);return ka(h,_,xh,xn.placeholder,I,gi,Xs,qe,ut,Wt-ii)}var Oh=nr?I:this,nf=Rr?Oh[h]:h;return ii=gi.length,qe?gi=Wl(gi,qe):vn&&ii>1&&gi.reverse(),qt&&ut<ii&&(gi.length=ut),this&&this!==fi&&this instanceof xn&&(nf=Un||Kc(nf)),nf.apply(Oh,gi)}return xn}function Cp(h,_){return function(I,Z){return Ca(I,h,_(Z),{})}}function bh(h,_){return function(I,Z){var re;if(I===p&&Z===p)return _;if(I!==p&&(re=I),Z!==p){if(re===p)return Z;typeof I=="string"||typeof Z=="string"?(I=Mn(I),Z=Mn(Z)):(I=Ai(I),Z=Ai(Z)),re=h(I,Z)}return re}}function Dd(h){return Ou(function(_){return _=Xn(_,Nr(ln())),Qe(function(I){var Z=this;return h(_,function(re){return _o(re,Z,I)})})})}function Od(h,_){_=_===p?" ":Mn(_);var I=_.length;if(I<2)return I?Mt(_,h):_;var Z=Mt(_,cl(h/Cn(_)));return ul(_)?js(oo(Z),0,h).join(""):Z.slice(0,h)}function Wf(h,_,I,Z){var re=_&We,ve=Kc(h);function Ne(){for(var qe=-1,ut=arguments.length,Wt=-1,qt=Z.length,nr=St(qt+ut),Rr=this&&this!==fi&&this instanceof Ne?ve:h;++Wt<qt;)nr[Wt]=Z[Wt];for(;ut--;)nr[Wt++]=arguments[++qe];return _o(Rr,re?I:this,nr)}return Ne}function Hf(h){return function(_,I,Z){return Z&&typeof Z!="number"&&es(_,I,Z)&&(I=Z=p),_=wc(_),I===p?(I=_,_=0):I=wc(I),Z=Z===p?_<I?1:-1:wc(Z),lt(_,I,Z,h)}}function Jh(h){return function(_,I){return typeof _=="string"&&typeof I=="string"||(_=lu(_),I=lu(I)),h(_,I)}}function ka(h,_,I,Z,re,ve,Ne,qe,ut,Wt){var qt=_&Ct,nr=qt?Ne:p,Rr=qt?p:Ne,tn=qt?ve:p,vn=qt?p:ve;_|=qt?Je:it,_&=~(qt?it:Je),_&At||(_&=-4);var Un=[h,_,re,tn,nr,vn,Rr,qe,ut,Wt],xn=I.apply(p,Un);return jd(h)&&ad(xn,Un),xn.placeholder=Z,vf(xn,h,_)}function Jo(h){var _=so[h];return function(I,Z){if(I=lu(I),Z=Z==null?0:No(Ln(Z),292),Z&&Cu(I)){var re=(Si(I)+"e").split("e"),ve=_(re[0]+"e"+(+re[1]+Z));return re=(Si(ve)+"e").split("e"),+(re[0]+"e"+(+re[1]-Z))}return _(I)}}var qf=dl&&1/eu(new dl([,-0]))[1]==sr?function(h){return new dl(h)}:zm;function mf(h){return function(_){var I=Zs(_);return I==br?Uh(_):I==An?hf(_):$t(_,h(_))}}function ha(h,_,I,Z,re,ve,Ne,qe){var ut=_&gt;if(!ut&&typeof h!="function")throw new ra(M);var Wt=Z?Z.length:0;if(Wt||(_&=-97,Z=re=p),Ne=Ne===p?Ne:$i(Ln(Ne),0),qe=qe===p?qe:Ln(qe),Wt-=re?re.length:0,_&it){var qt=Z,nr=re;Z=re=p}var Rr=ut?p:Bd(h),tn=[h,_,I,Z,re,qt,nr,ve,Ne,qe];if(Rr&&ep(tn,Rr),h=tn[0],_=tn[1],I=tn[2],Z=tn[3],re=tn[4],qe=tn[9]=tn[9]===p?ut?0:h.length:$i(tn[9]-Wt,0),!qe&&_&(Ct|et)&&(_&=-25),!_||_==We)var vn=xl(h,_,I);else _==Ct||_==et?vn=pf(h,_,qe):(_==Je||_==(We|Je))&&!re.length?vn=Wf(h,_,I,Z):vn=xh.apply(p,tn);var Un=Rr?tr:ad;return vf(Un(vn,tn),h,_)}function Kf(h,_,I,Z){return h===p||Nu(h,zs[I])&&!Wn.call(Z,I)?_:h}function wh(h,_,I,Z,re,ve){return To(h)&&To(_)&&(ve.set(_,h),ie(h,_,p,wh,ve),ve.delete(_)),h}function ed(h){return Lf(h)?p:h}function td(h,_,I,Z,re,ve){var Ne=I&we,qe=h.length,ut=_.length;if(qe!=ut&&!(Ne&&ut>qe))return!1;var Wt=ve.get(h),qt=ve.get(_);if(Wt&&qt)return Wt==_&&qt==h;var nr=-1,Rr=!0,tn=I&Ce?new ru:p;for(ve.set(h,_),ve.set(_,h);++nr<qe;){var vn=h[nr],Un=_[nr];if(Z)var xn=Ne?Z(Un,vn,nr,_,h,ve):Z(vn,Un,nr,h,_,ve);if(xn!==p){if(xn)continue;Rr=!1;break}if(tn){if(!_u(_,function(ii,gi){if(!Yr(tn,gi)&&(vn===ii||re(vn,ii,I,Z,ve)))return tn.push(gi)})){Rr=!1;break}}else if(!(vn===Un||re(vn,Un,I,Z,ve))){Rr=!1;break}}return ve.delete(h),ve.delete(_),Rr}function gf(h,_,I,Z,re,ve,Ne){switch(I){case Nn:if(h.byteLength!=_.byteLength||h.byteOffset!=_.byteOffset)return!1;h=h.buffer,_=_.buffer;case qn:return!(h.byteLength!=_.byteLength||!ve(new Ll(h),new Ll(_)));case pr:case mr:case on:return Nu(+h,+_);case Cr:return h.name==_.name&&h.message==_.message;case an:case Sr:return h==_+"";case br:var qe=Uh;case An:var ut=Z&we;if(qe||(qe=eu),h.size!=_.size&&!ut)return!1;var Wt=Ne.get(h);if(Wt)return Wt==_;Z|=Ce,Ne.set(h,_);var qt=td(qe(h),qe(_),Z,re,ve,Ne);return Ne.delete(h),qt;case Vn:if(Ls)return Ls.call(h)==Ls.call(_)}return!1}function Xf(h,_,I,Z,re,ve){var Ne=I&we,qe=Fd(h),ut=qe.length,Wt=Fd(_),qt=Wt.length;if(ut!=qt&&!Ne)return!1;for(var nr=ut;nr--;){var Rr=qe[nr];if(!(Ne?Rr in _:Wn.call(_,Rr)))return!1}var tn=ve.get(h),vn=ve.get(_);if(tn&&vn)return tn==_&&vn==h;var Un=!0;ve.set(h,_),ve.set(_,h);for(var xn=Ne;++nr<ut;){Rr=qe[nr];var ii=h[Rr],gi=_[Rr];if(Z)var Pc=Ne?Z(gi,ii,Rr,_,h,ve):Z(ii,gi,Rr,h,_,ve);if(!(Pc===p?ii===gi||re(ii,gi,I,Z,ve):Pc)){Un=!1;break}xn||(xn=Rr=="constructor")}if(Un&&!xn){var fu=h.constructor,Ec=_.constructor;fu!=Ec&&"constructor"in h&&"constructor"in _&&!(typeof fu=="function"&&fu instanceof fu&&typeof Ec=="function"&&Ec instanceof Ec)&&(Un=!1)}return ve.delete(h),ve.delete(_),Un}function Ou(h){return Ka(ji(h,p,hd),h+"")}function Fd(h){return $s(h,F,Gl)}function rd(h){return $s(h,j,yf)}var Bd=Mu?function(h){return Mu.get(h)}:zm;function Sh(h){for(var _=h.name+"",I=Ci[_],Z=Wn.call(Ci,_)?I.length:0;Z--;){var re=I[Z],ve=re.func;if(ve==null||ve==h)return re.name}return _}function dc(h){var _=Wn.call(ce,"placeholder")?ce:h;return _.placeholder}function ln(){var h=ce.iteratee||Am;return h=h===Am?E:h,arguments.length?h(arguments[0],arguments[1]):h}function nd(h,_){var I=h.__data__;return id(_)?I[typeof _=="string"?"string":"hash"]:I.map}function Th(h){for(var _=F(h),I=_.length;I--;){var Z=_[I],re=h[Z];_[I]=[Z,re,Ud(re)]}return _}function Zl(h,_){var I=ll(h,_);return a(I)?I:p}function da(h){var _=Wn.call(h,Qu),I=h[Qu];try{h[Qu]=p;var Z=!0}catch{}var re=Su.call(h);return Z&&(_?h[Qu]=I:delete h[Qu]),re}var Gl=jc?function(h){return h==null?[]:(h=ri(h),Ms(jc(h),function(_){return Xu.call(h,_)}))}:Dh,yf=jc?function(h){for(var _=[];h;)ja(_,Gl(h)),h=ia(h);return _}:Dh,Zs=jo;(ec&&Zs(new ec(new ArrayBuffer(1)))!=Nn||Eu&&Zs(new Eu)!=br||Zc&&Zs(Zc.resolve())!=sn||dl&&Zs(new dl)!=An||Iu&&Zs(new Iu)!=Ti)&&(Zs=function(h){var _=jo(h),I=_==fn?h.constructor:p,Z=I?Sl(I):"";if(Z)switch(Z){case Ol:return Nn;case vo:return br;case qh:return sn;case Fl:return An;case Va:return Ti}return _});function _f(h,_,I){for(var Z=-1,re=I.length;++Z<re;){var ve=I[Z],Ne=ve.size;switch(ve.type){case"drop":h+=Ne;break;case"dropRight":_-=Ne;break;case"take":_=No(_,h+Ne);break;case"takeRight":h=$i(h,_-Ne);break}}return{start:h,end:_}}function Pp(h){var _=h.match(Tn);return _?_[1].split(Br):[]}function Yf(h,_,I){_=ca(_,h);for(var Z=-1,re=_.length,ve=!1;++Z<re;){var Ne=Xa(_[Z]);if(!(ve=h!=null&&I(h,Ne)))break;h=h[Ne]}return ve||++Z!=re?ve:(re=h==null?0:h.length,!!re&&bc(re)&&wi(Ne,re)&&(kn(h)||Rh(h)))}function Nd(h){var _=h.length,I=new h.constructor(_);return _&&typeof h[0]=="string"&&Wn.call(h,"index")&&(I.index=h.index,I.input=h.input),I}function Gs(h){return typeof h.constructor=="function"&&!fc(h)?rc(ia(h)):{}}function Qf(h,_,I){var Z=h.constructor;switch(_){case qn:return Ea(h);case pr:case mr:return new Z(+h);case Nn:return su(h,I);case eo:case Wi:case Zi:case ti:case oi:case go:case tt:case ae:case le:return ys(h,I);case br:return new Z;case on:case Sr:return new Z(h);case an:return uo(h);case An:return new Z;case Vn:return co(h)}}function Jf(h,_){var I=_.length;if(!I)return h;var Z=I-1;return _[Z]=(I>1?"& ":"")+_[Z],_=_.join(I>2?", ":" "),h.replace(_n,`{
/* [wrapped with `+_+`] */
`)}function $d(h){return kn(h)||Rh(h)||!!(Hh&&h&&h[Hh])}function wi(h,_){var I=typeof h;return _=_??bt,!!_&&(I=="number"||I!="symbol"&&Es.test(h))&&h>-1&&h%1==0&&h<_}function es(h,_,I){if(!To(I))return!1;var Z=typeof _;return(Z=="number"?Cl(I)&&wi(_,I.length):Z=="string"&&_ in I)?Nu(I[_],h):!1}function Lr(h,_){if(kn(h))return!1;var I=typeof h;return I=="number"||I=="symbol"||I=="boolean"||h==null||au(h)?!0:hr.test(h)||!Yt.test(h)||_!=null&&h in ri(_)}function id(h){var _=typeof h;return _=="string"||_=="number"||_=="symbol"||_=="boolean"?h!=="__proto__":h===null}function jd(h){var _=Sh(h),I=ce[_];if(typeof I!="function"||!(_ in yn.prototype))return!1;if(h===I)return!0;var Z=Bd(I);return!!Z&&h===Z[0]}function Ep(h){return!!zl&&zl in h}var hm=Wo?zh:du;function fc(h){var _=h&&h.constructor,I=typeof _=="function"&&_.prototype||zs;return h===I}function Ud(h){return h===h&&!To(h)}function od(h,_){return function(I){return I==null?!1:I[h]===_&&(_!==p||h in ri(I))}}function Ip(h){var _=xt(h,function(Z){return I.size===Y&&I.clear(),Z}),I=_.cache;return _}function ep(h,_){var I=h[1],Z=_[1],re=I|Z,ve=re<(We|gt|_t),Ne=Z==_t&&I==Ct||Z==_t&&I==Le&&h[7].length<=_[8]||Z==(_t|Le)&&_[7].length<=_[8]&&I==Ct;if(!(ve||Ne))return h;Z&We&&(h[2]=_[2],re|=I&We?0:At);var qe=_[3];if(qe){var ut=h[3];h[3]=ut?Ld(ut,qe,_[4]):qe,h[4]=ut?ta(h[3],fe):_[4]}return qe=_[5],qe&&(ut=h[5],h[5]=ut?Qh(ut,qe,_[6]):qe,h[6]=ut?ta(h[5],fe):_[6]),qe=_[7],qe&&(h[7]=qe),Z&_t&&(h[8]=h[8]==null?_[8]:No(h[8],_[8])),h[9]==null&&(h[9]=_[9]),h[0]=_[0],h[1]=re,h}function sd(h){var _=[];if(h!=null)for(var I in ri(h))_.push(I);return _}function tp(h){return Su.call(h)}function ji(h,_,I){return _=$i(_===p?h.length-1:_,0),function(){for(var Z=arguments,re=-1,ve=$i(Z.length-_,0),Ne=St(ve);++re<ve;)Ne[re]=Z[_+re];re=-1;for(var qe=St(_+1);++re<_;)qe[re]=Z[re];return qe[_]=I(Ne),_o(h,this,qe)}}function ho(h,_){return _.length<2?h:_l(h,Gr(_,0,-1))}function Wl(h,_){for(var I=h.length,Z=No(_.length,I),re=Vs(h);Z--;){var ve=_[Z];h[Z]=wi(ve,I)?re[ve]:p}return h}function wl(h,_){if(!(_==="constructor"&&typeof h[_]=="function")&&_!="__proto__")return h[_]}var ad=Aa(tr),Fu=$c||function(h,_){return fi.setTimeout(h,_)},Ka=Aa(Bt);function vf(h,_,I){var Z=_+"";return Ka(h,Jf(Z,ud(Pp(Z),I)))}function Aa(h){var _=0,I=0;return function(){var Z=mh(),re=Lt-(Z-I);if(I=Z,re>0){if(++_>=at)return arguments[0]}else _=0;return h.apply(p,arguments)}}function ld(h,_){var I=-1,Z=h.length,re=Z-1;for(_=_===p?Z:_;++I<_;){var ve=Ue(I,re),Ne=h[ve];h[ve]=h[I],h[I]=Ne}return h.length=_,h}var Xc=Ip(function(h){var _=[];return h.charCodeAt(0)===46&&_.push(""),h.replace(kr,function(I,Z,re,ve){_.push(re?ve.replace(nn,"$1"):Z||I)}),_});function Xa(h){if(typeof h=="string"||au(h))return h;var _=h+"";return _=="0"&&1/h==-1/0?"-0":_}function Sl(h){if(h!=null){try{return Bc.call(h)}catch{}try{return h+""}catch{}}return""}function ud(h,_){return zi(cr,function(I){var Z="_."+I[0];_&I[1]&&!ko(h,Z)&&h.push(Z)}),h.sort()}function Mp(h){if(h instanceof yn)return h.clone();var _=new qo(h.__wrapped__,h.__chain__);return _.__actions__=Vs(h.__actions__),_.__index__=h.__index__,_.__values__=h.__values__,_}function Vd(h,_,I){(I?es(h,_,I):_===p)?_=1:_=$i(Ln(_),0);var Z=h==null?0:h.length;if(!Z||_<1)return[];for(var re=0,ve=0,Ne=St(cl(Z/_));re<Z;)Ne[ve++]=Gr(h,re,re+=_);return Ne}function pc(h){for(var _=-1,I=h==null?0:h.length,Z=0,re=[];++_<I;){var ve=h[_];ve&&(re[Z++]=ve)}return re}function Hl(){var h=arguments.length;if(!h)return[];for(var _=St(h-1),I=arguments[0],Z=h;Z--;)_[Z-1]=arguments[Z];return ja(kn(I)?Vs(I):[I],fr(_,1))}var Qn=Qe(function(h,_){return zo(h)?Ha(h,fr(_,1,zo,!0)):[]}),wo=Qe(function(h,_){var I=rs(_);return zo(I)&&(I=p),zo(h)?Ha(h,fr(_,1,zo,!0),ln(I,2)):[]}),So=Qe(function(h,_){var I=rs(_);return zo(I)&&(I=p),zo(h)?Ha(h,fr(_,1,zo,!0),p,I):[]});function _s(h,_,I){var Z=h==null?0:h.length;return Z?(_=I||_===p?1:Ln(_),Gr(h,_<0?0:_,Z)):[]}function Ya(h,_,I){var Z=h==null?0:h.length;return Z?(_=I||_===p?1:Ln(_),_=Z-_,Gr(h,0,_<0?0:_)):[]}function cd(h,_){return h&&h.length?lo(h,ln(_,3),!0,!0):[]}function ts(h,_){return h&&h.length?lo(h,ln(_,3),!0):[]}function Zd(h,_,I,Z){var re=h==null?0:h.length;return re?(I&&typeof I!="number"&&es(h,_,I)&&(I=0,Z=re),gs(h,_,I,Z)):[]}function Yc(h,_,I){var Z=h==null?0:h.length;if(!Z)return-1;var re=I==null?0:Ln(I);return re<0&&(re=$i(Z+re,0)),Rl(h,ln(_,3),re)}function Gd(h,_,I){var Z=h==null?0:h.length;if(!Z)return-1;var re=Z-1;return I!==p&&(re=Ln(I),re=I<0?$i(Z+re,0):No(re,Z-1)),Rl(h,ln(_,3),re,!0)}function hd(h){var _=h==null?0:h.length;return _?fr(h,1):[]}function dd(h){var _=h==null?0:h.length;return _?fr(h,sr):[]}function fa(h,_){var I=h==null?0:h.length;return I?(_=_===p?1:Ln(_),fr(h,_)):[]}function xf(h){for(var _=-1,I=h==null?0:h.length,Z={};++_<I;){var re=h[_];Z[re[0]]=re[1]}return Z}function mc(h){return h&&h.length?h[0]:p}function Bu(h,_,I){var Z=h==null?0:h.length;if(!Z)return-1;var re=I==null?0:Ln(I);return re<0&&(re=$i(Z+re,0)),Ua(h,_,re)}function Wd(h){var _=h==null?0:h.length;return _?Gr(h,0,-1):[]}var fd=Qe(function(h){var _=Xn(h,Pa);return _.length&&_[0]===h[0]?zu(_):[]}),gc=Qe(function(h){var _=rs(h),I=Xn(h,Pa);return _===rs(I)?_=p:I.pop(),I.length&&I[0]===h[0]?zu(I,ln(_,2)):[]}),Hd=Qe(function(h){var _=rs(h),I=Xn(h,Pa);return _=typeof _=="function"?_:p,_&&I.pop(),I.length&&I[0]===h[0]?zu(I,p,_):[]});function yc(h,_){return h==null?"":Pu.call(h,_)}function rs(h){var _=h==null?0:h.length;return _?h[_-1]:p}function qd(h,_,I){var Z=h==null?0:h.length;if(!Z)return-1;var re=Z;return I!==p&&(re=Ln(I),re=re<0?$i(Z+re,0):No(re,Z-1)),_===_?df(h,_,re):Rl(h,Wu,re,!0)}function Kd(h,_){return h&&h.length?xe(h,Ln(_)):p}var Qc=Qe(Ch);function Ch(h,_){return h&&h.length&&_&&_.length?Oe(h,_):h}function Ra(h,_,I){return h&&h.length&&_&&_.length?Oe(h,_,ln(I,2)):h}function Jc(h,_,I){return h&&h.length&&_&&_.length?Oe(h,_,p,I):h}var ql=Ou(function(h,_){var I=h==null?0:h.length,Z=lc(h,_);return $e(h,Xn(_,function(re){return wi(re,I)?+re:re}).sort(bi)),Z});function za(h,_){var I=[];if(!(h&&h.length))return I;var Z=-1,re=[],ve=h.length;for(_=ln(_,3);++Z<ve;){var Ne=h[Z];_(Ne,Z,h)&&(I.push(Ne),re.push(Z))}return $e(h,re),I}function bf(h){return h==null?h:Ju.call(h)}function rp(h,_,I){var Z=h==null?0:h.length;return Z?(I&&typeof I!="number"&&es(h,_,I)?(_=0,I=Z):(_=_==null?0:Ln(_),I=I===p?Z:Ln(I)),Gr(h,_,I)):[]}function Ph(h,_){return mi(h,_)}function kp(h,_,I){return ni(h,_,ln(I,2))}function eh(h,_){var I=h==null?0:h.length;if(I){var Z=mi(h,_);if(Z<I&&Nu(h[Z],_))return Z}return-1}function Ap(h,_){return mi(h,_,!0)}function np(h,_,I){return ni(h,_,ln(I,2),!0)}function Eh(h,_){var I=h==null?0:h.length;if(I){var Z=mi(h,_,!0)-1;if(Nu(h[Z],_))return Z}return-1}function ip(h){return h&&h.length?ki(h):[]}function Ih(h,_){return h&&h.length?ki(h,ln(_,2)):[]}function op(h){var _=h==null?0:h.length;return _?Gr(h,1,_):[]}function wf(h,_,I){return h&&h.length?(_=I||_===p?1:Ln(_),Gr(h,0,_<0?0:_)):[]}function Sf(h,_,I){var Z=h==null?0:h.length;return Z?(_=I||_===p?1:Ln(_),_=Z-_,Gr(h,_<0?0:_,Z)):[]}function Xd(h,_){return h&&h.length?lo(h,ln(_,3),!1,!0):[]}function Rp(h,_){return h&&h.length?lo(h,ln(_,3)):[]}var dm=Qe(function(h){return Pn(fr(h,1,zo,!0))}),Yd=Qe(function(h){var _=rs(h);return zo(_)&&(_=p),Pn(fr(h,1,zo,!0),ln(_,2))}),zp=Qe(function(h){var _=rs(h);return _=typeof _=="function"?_:p,Pn(fr(h,1,zo,!0),p,_)});function th(h){return h&&h.length?Pn(h):[]}function fm(h,_){return h&&h.length?Pn(h,ln(_,2)):[]}function pd(h,_){return _=typeof _=="function"?_:p,h&&h.length?Pn(h,p,_):[]}function Tf(h){if(!(h&&h.length))return[];var _=0;return h=Ms(h,function(I){if(zo(I))return _=$i(I.length,_),!0}),st(_,function(I){return Xn(h,$(I))})}function Ki(h,_){if(!(h&&h.length))return[];var I=Tf(h);return _==null?I:Xn(I,function(Z){return _o(_,p,Z)})}var pm=Qe(function(h,_){return zo(h)?Ha(h,_):[]}),Lp=Qe(function(h){return vl(Ms(h,zo))}),Qd=Qe(function(h){var _=rs(h);return zo(_)&&(_=p),vl(Ms(h,zo),ln(_,2))}),Dp=Qe(function(h){var _=rs(h);return _=typeof _=="function"?_:p,vl(Ms(h,zo),p,_)}),Cf=Qe(Tf);function sp(h,_){return ua(h||[],_||[],Au)}function Ro(h,_){return ua(h||[],_||[],er)}var Qa=Qe(function(h){var _=h.length,I=_>1?h[_-1]:p;return I=typeof I=="function"?(h.pop(),I):p,Ki(h,I)});function Pf(h){var _=ce(h);return _.__chain__=!0,_}function Op(h,_){return _(h),h}function Tl(h,_){return _(h)}var md=Ou(function(h){var _=h.length,I=_?h[0]:0,Z=this.__wrapped__,re=function(ve){return lc(ve,h)};return _>1||this.__actions__.length||!(Z instanceof yn)||!wi(I)?this.thru(re):(Z=Z.slice(I,+I+(_?1:0)),Z.__actions__.push({func:Tl,args:[re],thisArg:p}),new qo(Z,this.__chain__).thru(function(ve){return _&&!ve.length&&ve.push(p),ve}))});function Mh(){return Pf(this)}function Ef(){return new qo(this.value(),this.__chain__)}function ap(){this.__values__===p&&(this.__values__=xm(this.value()));var h=this.__index__>=this.__values__.length,_=h?p:this.__values__[this.__index__++];return{done:h,value:_}}function lp(){return this}function Fp(h){for(var _,I=this;I instanceof fl;){var Z=Mp(I);Z.__index__=0,Z.__values__=p,_?re.__wrapped__=Z:_=Z;var re=Z;I=I.__wrapped__}return re.__wrapped__=h,_}function Ws(){var h=this.__wrapped__;if(h instanceof yn){var _=h;return this.__actions__.length&&(_=new yn(this)),_=_.reverse(),_.__actions__.push({func:Tl,args:[bf],thisArg:p}),new qo(_,this.__chain__)}return this.thru(bf)}function up(){return Rn(this.__wrapped__,this.__actions__)}var cp=Ma(function(h,_,I){Wn.call(h,I)?++h[I]:Nl(h,I,1)});function _c(h,_,I){var Z=kn(h)?$a:Gc;return I&&es(h,_,I)&&(_=p),Z(h,ln(_,3))}function kh(h,_){var I=kn(h)?Ms:Wc;return I(h,ln(_,3))}var rh=bl(Yc),Ah=bl(Gd);function gd(h,_){return fr(vc(h,_),1)}function If(h,_){return fr(vc(h,_),sr)}function Bp(h,_,I){return I=I===p?1:Ln(I),fr(vc(h,_),I)}function Mf(h,_){var I=kn(h)?zi:yl;return I(h,ln(_,3))}function yd(h,_){var I=kn(h)?ds:zd;return I(h,ln(_,3))}var kf=Ma(function(h,_,I){Wn.call(h,I)?h[I].push(_):Nl(h,I,[_])});function Af(h,_,I,Z){h=Cl(h)?h:Kt(h),I=I&&!Z?Ln(I):0;var re=h.length;return I<0&&(I=$i(re+I,0)),Vp(h)?I<=re&&h.indexOf(_,I)>-1:!!re&&Ua(h,_,I)>-1}var hp=Qe(function(h,_,I){var Z=-1,re=typeof _=="function",ve=Cl(h)?St(h.length):[];return yl(h,function(Ne){ve[++Z]=re?_o(_,Ne,I):Uo(Ne,_,I)}),ve}),Np=Ma(function(h,_,I){Nl(h,I,_)});function vc(h,_){var I=kn(h)?Xn:W;return I(h,ln(_,3))}function dp(h,_,I,Z){return h==null?[]:(kn(_)||(_=_==null?[]:[_]),I=Z?p:I,kn(I)||(I=I==null?[]:[I]),Se(h,_,I))}var Jd=Ma(function(h,_,I){h[I?0:1].push(_)},function(){return[[],[]]});function $p(h,_,I){var Z=kn(h)?Gu:ue,re=arguments.length<3;return Z(h,ln(_,4),I,re,yl)}function Rf(h,_,I){var Z=kn(h)?Nh:ue,re=arguments.length<3;return Z(h,ln(_,4),I,re,zd)}function o(h,_){var I=kn(h)?Ms:Wc;return I(h,dr(ln(_,3)))}function l(h){var _=kn(h)?dn:dt;return _(h)}function x(h,_,I){(I?es(h,_,I):_===p)?_=1:_=Ln(_);var Z=kn(h)?Bl:Pt;return Z(h,_)}function C(h){var _=kn(h)?ff:vr;return _(h)}function z(h){if(h==null)return 0;if(Cl(h))return Vp(h)?Cn(h):h.length;var _=Zs(h);return _==br||_==An?h.size:A(h).length}function V(h,_,I){var Z=kn(h)?_u:In;return I&&es(h,_,I)&&(_=p),Z(h,ln(_,3))}var se=Qe(function(h,_){if(h==null)return[];var I=_.length;return I>1&&es(h,_[0],_[1])?_=[]:I>2&&es(_[0],_[1],_[2])&&(_=[_[0]]),Se(h,fr(_,1),[])}),Re=Li||function(){return fi.Date.now()};function Ge(h,_){if(typeof _!="function")throw new ra(M);return h=Ln(h),function(){if(--h<1)return _.apply(this,arguments)}}function It(h,_,I){return _=I?p:_,_=h&&_==null?h.length:_,ha(h,_t,p,p,p,p,_)}function Qt(h,_){var I;if(typeof _!="function")throw new ra(M);return h=Ln(h),function(){return--h>0&&(I=_.apply(this,arguments)),h<=1&&(_=p),I}}var ir=Qe(function(h,_,I){var Z=We;if(I.length){var re=ta(I,dc(ir));Z|=Je}return ha(h,Z,_,I,re)}),Jt=Qe(function(h,_,I){var Z=We|gt;if(I.length){var re=ta(I,dc(Jt));Z|=Je}return ha(_,Z,h,I,re)});function Er(h,_,I){_=I?p:_;var Z=ha(h,Ct,p,p,p,p,p,_);return Z.placeholder=Er.placeholder,Z}function Or(h,_,I){_=I?p:_;var Z=ha(h,et,p,p,p,p,p,_);return Z.placeholder=Or.placeholder,Z}function Ur(h,_,I){var Z,re,ve,Ne,qe,ut,Wt=0,qt=!1,nr=!1,Rr=!0;if(typeof h!="function")throw new ra(M);_=lu(_)||0,To(I)&&(qt=!!I.leading,nr="maxWait"in I,ve=nr?$i(lu(I.maxWait)||0,_):ve,Rr="trailing"in I?!!I.trailing:Rr);function tn(Xs){var Oh=Z,nf=re;return Z=re=p,Wt=Xs,Ne=h.apply(nf,Oh),Ne}function vn(Xs){return Wt=Xs,qe=Fu(ii,_),qt?tn(Xs):Ne}function Un(Xs){var Oh=Xs-ut,nf=Xs-Wt,Nv=_-Oh;return nr?No(Nv,ve-nf):Nv}function xn(Xs){var Oh=Xs-ut,nf=Xs-Wt;return ut===p||Oh>=_||Oh<0||nr&&nf>=ve}function ii(){var Xs=Re();if(xn(Xs))return gi(Xs);qe=Fu(ii,Un(Xs))}function gi(Xs){return qe=p,Rr&&Z?tn(Xs):(Z=re=p,Ne)}function Pc(){qe!==p&&Us(qe),Wt=0,Z=ut=re=qe=p}function fu(){return qe===p?Ne:gi(Re())}function Ec(){var Xs=Re(),Oh=xn(Xs);if(Z=arguments,re=this,ut=Xs,Oh){if(qe===p)return vn(ut);if(nr)return Us(qe),qe=Fu(ii,_),tn(ut)}return qe===p&&(qe=Fu(ii,_)),Ne}return Ec.cancel=Pc,Ec.flush=fu,Ec}var fo=Qe(function(h,_){return uc(h,1,_)}),pt=Qe(function(h,_,I){return uc(h,lu(_)||0,I)});function Xe(h){return ha(h,je)}function xt(h,_){if(typeof h!="function"||_!=null&&typeof _!="function")throw new ra(M);var I=function(){var Z=arguments,re=_?_.apply(this,Z):Z[0],ve=I.cache;if(ve.has(re))return ve.get(re);var Ne=h.apply(this,Z);return I.cache=ve.set(re,Ne)||ve,Ne};return I.cache=new(xt.Cache||Hi),I}xt.Cache=Hi;function dr(h){if(typeof h!="function")throw new ra(M);return function(){var _=arguments;switch(_.length){case 0:return!h.call(this);case 1:return!h.call(this,_[0]);case 2:return!h.call(this,_[0],_[1]);case 3:return!h.call(this,_[0],_[1],_[2])}return!h.apply(this,_)}}function Zr(h){return Qt(2,h)}var un=ou(function(h,_){_=_.length==1&&kn(_[0])?Xn(_[0],Nr(ln())):Xn(fr(_,1),Nr(ln()));var I=_.length;return Qe(function(Z){for(var re=-1,ve=No(Z.length,I);++re<ve;)Z[re]=_[re].call(this,Z[re]);return _o(h,this,Z)})}),Qr=Qe(function(h,_){var I=ta(_,dc(Qr));return ha(h,Je,p,_,I)}),pn=Qe(function(h,_){var I=ta(_,dc(pn));return ha(h,it,p,_,I)}),vs=Ou(function(h,_){return ha(h,Le,p,p,p,_)});function li(h,_){if(typeof h!="function")throw new ra(M);return _=_===p?_:Ln(_),Qe(h,_)}function xc(h,_){if(typeof h!="function")throw new ra(M);return _=_==null?0:$i(Ln(_),0),Qe(function(I){var Z=I[_],re=js(I,0,_);return Z&&ja(re,Z),_o(h,this,re)})}function mm(h,_,I){var Z=!0,re=!0;if(typeof h!="function")throw new ra(M);return To(I)&&(Z="leading"in I?!!I.leading:Z,re="trailing"in I?!!I.trailing:re),Ur(h,_,{leading:Z,maxWait:_,trailing:re})}function zy(h){return It(h,1)}function Ly(h,_){return Qr(Ul(_),h)}function Dy(){if(!arguments.length)return[];var h=arguments[0];return kn(h)?h:[h]}function Oy(h){return oa(h,ge)}function gm(h,_){return _=typeof _=="function"?_:p,oa(h,ge,_)}function _d(h){return oa(h,he|ge)}function pg(h,_){return _=typeof _=="function"?_:p,oa(h,he|ge,_)}function mg(h,_){return _==null||si(h,_,F(_))}function Nu(h,_){return h===_||h!==h&&_!==_}var gg=Jh(sa),yg=Jh(function(h,_){return h>=_}),Rh=Hc(function(){return arguments}())?Hc:function(h){return Lo(h)&&Wn.call(h,"callee")&&!Xu.call(h,"callee")},kn=St.isArray,fp=Na?Nr(Na):Xh;function Cl(h){return h!=null&&bc(h.length)&&!zh(h)}function zo(h){return Lo(h)&&Cl(h)}function _g(h){return h===!0||h===!1||Lo(h)&&jo(h)==pr}var xs=Uc||du,zf=Ri?Nr(Ri):aa;function vg(h){return Lo(h)&&h.nodeType===1&&!Lf(h)}function xg(h){if(h==null)return!0;if(Cl(h)&&(kn(h)||typeof h=="string"||typeof h.splice=="function"||xs(h)||Of(h)||Rh(h)))return!h.length;var _=Zs(h);if(_==br||_==An)return!h.size;if(fc(h))return!A(h).length;for(var I in h)if(Wn.call(h,I))return!1;return!0}function bg(h,_){return la(h,_)}function wg(h,_,I){I=typeof I=="function"?I:p;var Z=I?I(h,_):p;return Z===p?la(h,_,p,I):!!Z}function jp(h){if(!Lo(h))return!1;var _=jo(h);return _==Cr||_==Jr||typeof h.message=="string"&&typeof h.name=="string"&&!Lf(h)}function Sg(h){return typeof h=="number"&&Cu(h)}function zh(h){if(!To(h))return!1;var _=jo(h);return _==rn||_==jr||_==Tr||_==wn}function ym(h){return typeof h=="number"&&h==Ln(h)}function bc(h){return typeof h=="number"&&h>-1&&h%1==0&&h<=bt}function To(h){var _=typeof h;return h!=null&&(_=="object"||_=="function")}function Lo(h){return h!=null&&typeof h=="object"}var _m=Ii?Nr(Ii):e;function Tg(h,_){return h===_||r(h,_,Th(_))}function Fy(h,_,I){return I=typeof I=="function"?I:p,r(h,_,Th(_),I)}function By(h){return mp(h)&&h!=+h}function Cg(h){if(hm(h))throw new gn(D);return a(h)}function pp(h){return h===null}function Pg(h){return h==null}function mp(h){return typeof h=="number"||Lo(h)&&jo(h)==on}function Lf(h){if(!Lo(h)||jo(h)!=fn)return!1;var _=ia(h);if(_===null)return!0;var I=Wn.call(_,"constructor")&&_.constructor;return typeof I=="function"&&I instanceof I&&Bc.call(I)==Ku}var Df=xa?Nr(xa):d;function Up(h){return ym(h)&&h>=-9007199254740991&&h<=bt}var gp=sl?Nr(sl):y;function Vp(h){return typeof h=="string"||!kn(h)&&Lo(h)&&jo(h)==Sr}function au(h){return typeof h=="symbol"||Lo(h)&&jo(h)==Vn}var Of=Zu?Nr(Zu):w;function Ff(h){return h===p}function pa(h){return Lo(h)&&Zs(h)==Ti}function vd(h){return Lo(h)&&jo(h)==ei}var vm=Jh(N),Eg=Jh(function(h,_){return h<=_});function xm(h){if(!h)return[];if(Cl(h))return Vp(h)?oo(h):Vs(h);if(ba&&h[ba])return jh(h[ba]());var _=Zs(h),I=_==br?Uh:_==An?eu:Kt;return I(h)}function wc(h){if(!h)return h===0?h:0;if(h=lu(h),h===sr||h===-1/0){var _=h<0?-1:1;return _*Et}return h===h?h:0}function Ln(h){var _=wc(h),I=_%1;return _===_?I?_-I:_:0}function bm(h){return h?nu(Ln(h),0,Fe):0}function lu(h){if(typeof h=="number")return h;if(au(h))return Ht;if(To(h)){var _=typeof h.valueOf=="function"?h.valueOf():h;h=To(_)?_+"":_}if(typeof h!="string")return h===0?h:+h;h=lr(h);var I=cn.test(h);return I||Js.test(h)?Ba(h.slice(2),I?2:8):Eo.test(h)?Ht:+h}function Ig(h){return Ia(h,j(h))}function Mg(h){return h?nu(Ln(h),-9007199254740991,bt):h===0?h:0}function Si(h){return h==null?"":Mn(h)}var wm=Qo(function(h,_){if(fc(_)||Cl(_)){Ia(_,F(_),h);return}for(var I in _)Wn.call(_,I)&&Au(h,I,_[I])}),Sm=Qo(function(h,_){Ia(_,j(_),h)}),xd=Qo(function(h,_,I,Z){Ia(_,j(_),h,Z)}),Tm=Qo(function(h,_,I,Z){Ia(_,F(_),h,Z)}),kg=Ou(lc);function Cm(h,_){var I=rc(h);return _==null?I:xi(I,_)}var Zp=Qe(function(h,_){h=ri(h);var I=-1,Z=_.length,re=Z>2?_[2]:p;for(re&&es(_[0],_[1],re)&&(Z=1);++I<Z;)for(var ve=_[I],Ne=j(ve),qe=-1,ut=Ne.length;++qe<ut;){var Wt=Ne[qe],qt=h[Wt];(qt===p||Nu(qt,zs[Wt])&&!Wn.call(h,Wt))&&(h[Wt]=ve[Wt])}return h}),yp=Qe(function(h){return h.push(p,wh),_o(oe,p,h)});function Pm(h,_){return Al(h,ln(_,3),Ns)}function Em(h,_){return Al(h,ln(_,3),jl)}function Im(h,_){return h==null?h:Vr(h,ln(_,3),j)}function Ny(h,_){return h==null?h:iu(h,ln(_,3),j)}function i(h,_){return h&&Ns(h,ln(_,3))}function t(h,_){return h&&jl(h,ln(_,3))}function n(h){return h==null?[]:Di(h,F(h))}function s(h){return h==null?[]:Di(h,j(h))}function f(h,_,I){var Z=h==null?p:_l(h,_);return Z===p?I:Z}function v(h,_){return h!=null&&Yf(h,_,jn)}function b(h,_){return h!=null&&Yf(h,_,ai)}var S=Cp(function(h,_,I){_!=null&&typeof _.toString!="function"&&(_=Su.call(_)),h[_]=I},_p(Il)),k=Cp(function(h,_,I){_!=null&&typeof _.toString!="function"&&(_=Su.call(_)),Wn.call(h,_)?h[_].push(I):h[_]=[I]},ln),R=Qe(Uo);function F(h){return Cl(h)?Wa(h):A(h)}function j(h){return Cl(h)?Wa(h,!0):O(h)}function H(h,_){var I={};return _=ln(_,3),Ns(h,function(Z,re,ve){Nl(I,_(Z,re,ve),Z)}),I}function X(h,_){var I={};return _=ln(_,3),Ns(h,function(Z,re,ve){Nl(I,re,_(Z,re,ve))}),I}var ee=Qo(function(h,_,I){ie(h,_,I)}),oe=Qo(function(h,_,I,Z){ie(h,_,I,Z)}),ye=Ou(function(h,_){var I={};if(h==null)return I;var Z=!1;_=Xn(_,function(ve){return ve=ca(ve,h),Z||(Z=ve.length>1),ve}),Ia(h,rd(h),I),Z&&(I=oa(I,he|Te|ge,ed));for(var re=_.length;re--;)qi(I,_[re]);return I});function Pe(h,_){return ze(h,dr(ln(_)))}var Ze=Ou(function(h,_){return h==null?{}:Ae(h,_)});function ze(h,_){if(h==null)return{};var I=Xn(rd(h),function(Z){return[Z]});return _=ln(_),De(h,I,function(Z,re){return _(Z,re[0])})}function q(h,_,I){_=ca(_,h);var Z=-1,re=_.length;for(re||(re=1,h=p);++Z<re;){var ve=h==null?p:h[Xa(_[Z])];ve===p&&(Z=re,ve=I),h=zh(ve)?ve.call(h):ve}return h}function me(h,_,I){return h==null?h:er(h,_,I)}function Be(h,_,I,Z){return Z=typeof Z=="function"?Z:p,h==null?h:er(h,_,I,Z)}var mt=mf(F),Ut=mf(j);function wt(h,_,I){var Z=kn(h),re=Z||xs(h)||Of(h);if(_=ln(_,4),I==null){var ve=h&&h.constructor;re?I=Z?new ve:[]:To(h)?I=zh(ve)?rc(ia(h)):{}:I={}}return(re?zi:Ns)(h,function(Ne,qe,ut){return _(I,Ne,qe,ut)}),I}function kt(h,_){return h==null?!0:qi(h,_)}function Xt(h,_,I){return h==null?h:xo(h,_,Ul(I))}function Zt(h,_,I,Z){return Z=typeof Z=="function"?Z:p,h==null?h:xo(h,_,Ul(I),Z)}function Kt(h){return h==null?[]:mn(h,F(h))}function zt(h){return h==null?[]:mn(h,j(h))}function Ir(h,_,I){return I===p&&(I=_,_=p),I!==p&&(I=lu(I),I=I===I?I:0),_!==p&&(_=lu(_),_=_===_?_:0),nu(lu(h),_,I)}function Hr(h,_,I){return _=wc(_),I===p?(I=_,_=0):I=wc(I),h=lu(h),Ru(h,_,I)}function Wr(h,_,I){if(I&&typeof I!="boolean"&&es(h,_,I)&&(_=I=p),I===p&&(typeof _=="boolean"?(I=_,_=p):typeof h=="boolean"&&(I=h,h=p)),h===p&&_===p?(h=0,_=1):(h=wc(h),_===p?(_=h,h=0):_=wc(_)),h>_){var Z=h;h=_,_=Z}if(I||h%1||_%1){var re=Vc();return No(h+re*(_-h+yu("1e-"+((re+"").length-1))),_)}return Ue(h,_)}var zr=qc(function(h,_,I){return _=_.toLowerCase(),h+(I?zn(_):_)});function zn(h){return bd(Si(h).toLowerCase())}function Xi(h){return h=Si(h),h&&h.replace(tl,fs).replace(Fo,"")}function ns(h,_,I){h=Si(h),_=Mn(_);var Z=h.length;I=I===p?Z:nu(Ln(I),0,Z);var re=I;return I-=_.length,I>=0&&h.slice(I,re)==_}function ma(h){return h=Si(h),h&&nt.test(h)?h.replace(Ke,ea):h}function uu(h){return h=Si(h),h&&$r.test(h)?h.replace(Kr,"\\$&"):h}var Pl=qc(function(h,_,I){return h+(I?"-":"")+_.toLowerCase()}),Hs=qc(function(h,_,I){return h+(I?" ":"")+_.toLowerCase()}),Yi=vh("toLowerCase");function bs(h,_,I){h=Si(h),_=Ln(_);var Z=_?Cn(h):0;if(!_||Z>=_)return h;var re=(_-Z)/2;return Od(hl(re),I)+h+Od(cl(re),I)}function qs(h,_,I){h=Si(h),_=Ln(_);var Z=_?Cn(h):0;return _&&Z<_?h+Od(_-Z,I):h}function Ks(h,_,I){h=Si(h),_=Ln(_);var Z=_?Cn(h):0;return _&&Z<_?Od(_-Z,I)+h:h}function Ja(h,_,I){return I||_==null?_=0:_&&(_=+_),gh(Si(h).replace(Tt,""),_||0)}function cu(h,_,I){return(I?es(h,_,I):_===p)?_=1:_=Ln(_),Mt(Si(h),_)}function ws(){var h=arguments,_=Si(h[0]);return h.length<3?_:_.replace(h[1],h[2])}var El=qc(function(h,_,I){return h+(I?"_":"")+_.toLowerCase()});function is(h,_,I){return I&&typeof I!="number"&&es(h,_,I)&&(_=I=p),I=I===p?Fe:I>>>0,I?(h=Si(h),h&&(typeof _=="string"||_!=null&&!Df(_))&&(_=Mn(_),!_&&ul(h))?js(oo(h),0,I):h.split(_,I)):[]}var Ss=qc(function(h,_,I){return h+(I?" ":"")+bd(_)});function Ts(h,_,I){return h=Si(h),I=I==null?0:nu(Ln(I),0,h.length),_=Mn(_),h.slice(I,I+_.length)==_}function Vo(h,_,I){var Z=ce.templateSettings;I&&es(h,_,I)&&(_=p),h=Si(h),_=xd({},_,Z,Kf);var re=xd({},_.imports,Z.imports,Kf),ve=F(re),Ne=mn(re,ve),qe,ut,Wt=0,qt=_.interpolate||Go,nr="__p += '",Rr=bu((_.escape||Go).source+"|"+qt.source+"|"+(qt===Dt?Zn:Go).source+"|"+(_.evaluate||Go).source+"|$","g"),tn="//# sourceURL="+(Wn.call(_,"sourceURL")?(_.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Dr+"]")+`
`;h.replace(Rr,function(xn,ii,gi,Pc,fu,Ec){return gi||(gi=Pc),nr+=h.slice(Wt,Ec).replace(Da,Lc),ii&&(qe=!0,nr+=`' +
__e(`+ii+`) +
'`),fu&&(ut=!0,nr+=`';
`+fu+`;
__p += '`),gi&&(nr+=`' +
((__t = (`+gi+`)) == null ? '' : __t) +
'`),Wt=Ec+xn.length,xn}),nr+=`';
`;var vn=Wn.call(_,"variable")&&_.variable;if(!vn)nr=`with (obj) {
`+nr+`
}
`;else if(Fr.test(vn))throw new gn(u);nr=(ut?nr.replace(_e,""):nr).replace(Me,"$1").replace(Ve,"$1;"),nr="function("+(vn||"obj")+`) {
`+(vn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(qe?", __e = _.escape":"")+(ut?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+nr+`return __p
}`;var Un=Mm(function(){return Yn(ve,tn+"return "+nr).apply(p,Ne)});if(Un.source=nr,jp(Un))throw Un;return Un}function Ui(h){return Si(h).toLowerCase()}function Sc(h){return Si(h).toUpperCase()}function Bf(h,_,I){if(h=Si(h),h&&(I||_===p))return lr(h);if(!h||!(_=Mn(_)))return h;var Z=oo(h),re=oo(_),ve=pi(Z,re),Ne=Bo(Z,re)+1;return js(Z,ve,Ne).join("")}function Tc(h,_,I){if(h=Si(h),h&&(I||_===p))return h.slice(0,Oc(h)+1);if(!h||!(_=Mn(_)))return h;var Z=oo(h),re=Bo(Z,oo(_))+1;return js(Z,0,re).join("")}function $y(h,_,I){if(h=Si(h),h&&(I||_===p))return h.replace(Tt,"");if(!h||!(_=Mn(_)))return h;var Z=oo(h),re=pi(Z,oo(_));return js(Z,re).join("")}function Nf(h,_){var I=ne,Z=ot;if(To(_)){var re="separator"in _?_.separator:re;I="length"in _?Ln(_.length):I,Z="omission"in _?Mn(_.omission):Z}h=Si(h);var ve=h.length;if(ul(h)){var Ne=oo(h);ve=Ne.length}if(I>=ve)return h;var qe=I-Cn(Z);if(qe<1)return Z;var ut=Ne?js(Ne,0,qe).join(""):h.slice(0,qe);if(re===p)return ut+Z;if(Ne&&(qe+=ut.length-qe),Df(re)){if(h.slice(qe).search(re)){var Wt,qt=ut;for(re.global||(re=bu(re.source,Si(Gn.exec(re))+"g")),re.lastIndex=0;Wt=re.exec(qt);)var nr=Wt.index;ut=ut.slice(0,nr===p?qe:nr)}}else if(h.indexOf(Mn(re),qe)!=qe){var Rr=ut.lastIndexOf(re);Rr>-1&&(ut=ut.slice(0,Rr))}return ut+Z}function ef(h){return h=Si(h),h&&He.test(h)?h.replace(pe,Vh):h}var $f=qc(function(h,_,I){return h+(I?" ":"")+_.toUpperCase()}),bd=vh("toUpperCase");function tf(h,_,I){return h=Si(h),_=I?p:_,_===p?cf(h)?Ad(h):al(h):h.match(_)||[]}var Mm=Qe(function(h,_){try{return _o(h,p,_)}catch(I){return jp(I)?I:new gn(I)}}),Ag=Ou(function(h,_){return zi(_,function(I){I=Xa(I),Nl(h,I,ir(h[I],h))}),h});function Rg(h){var _=h==null?0:h.length,I=ln();return h=_?Xn(h,function(Z){if(typeof Z[1]!="function")throw new ra(M);return[I(Z[0]),Z[1]]}):[],Qe(function(Z){for(var re=-1;++re<_;){var ve=h[re];if(_o(ve[0],this,Z))return _o(ve[1],this,Z)}})}function zg(h){return $l(oa(h,he))}function _p(h){return function(){return h}}function km(h,_){return h==null||h!==h?_:h}var Lh=Du(),Lg=Du(!0);function Il(h){return h}function Am(h){return E(typeof h=="function"?h:oa(h,he))}function jy(h){return G(oa(h,he))}function Uy(h,_){return Q(h,oa(_,he))}var Vy=Qe(function(h,_){return function(I){return Uo(I,h,_)}}),Zy=Qe(function(h,_){return function(I){return Uo(h,I,_)}});function Rm(h,_,I){var Z=F(_),re=Di(_,Z);I==null&&!(To(_)&&(re.length||!Z.length))&&(I=_,_=h,h=this,re=Di(_,F(_)));var ve=!(To(I)&&"chain"in I)||!!I.chain,Ne=zh(h);return zi(re,function(qe){var ut=_[qe];h[qe]=ut,Ne&&(h.prototype[qe]=function(){var Wt=this.__chain__;if(ve||Wt){var qt=h(this.__wrapped__),nr=qt.__actions__=Vs(this.__actions__);return nr.push({func:ut,args:arguments,thisArg:h}),qt.__chain__=Wt,qt}return ut.apply(h,ja([this.value()],arguments))})}),h}function Gy(){return fi._===this&&(fi._=Nc),this}function zm(){}function Cc(h){return h=Ln(h),Qe(function(_){return xe(_,h)})}var Gp=Dd(Xn),Dg=Dd($a),Wy=Dd(_u);function Og(h){return Lr(h)?$(Xa(h)):ke(h)}function Hy(h){return function(_){return h==null?p:_l(h,_)}}var La=Hf(),hu=Hf(!0);function Dh(){return[]}function du(){return!1}function rf(){return{}}function nh(){return""}function $b(){return!0}function jb(h,_){if(h=Ln(h),h<1||h>bt)return[];var I=Fe,Z=No(h,Fe);_=ln(_),h-=Fe;for(var re=st(Z,_);++I<h;)_(I);return re}function Ub(h){return kn(h)?Xn(h,Xa):au(h)?[h]:Vs(Xc(Si(h)))}function Vb(h){var _=++wu;return Si(h)+_}var Zb=bh(function(h,_){return h+_},0),Gb=Jo("ceil"),Wb=bh(function(h,_){return h/_},1),Hb=Jo("floor");function qb(h){return h&&h.length?cc(h,Il,sa):p}function Kb(h,_){return h&&h.length?cc(h,ln(_,2),sa):p}function Xb(h){return Hu(h,Il)}function Yb(h,_){return Hu(h,ln(_,2))}function Qb(h){return h&&h.length?cc(h,Il,N):p}function Jb(h,_){return h&&h.length?cc(h,ln(_,2),N):p}var ew=bh(function(h,_){return h*_},1),tw=Jo("round"),rw=bh(function(h,_){return h-_},0);function nw(h){return h&&h.length?vt(h,Il):0}function iw(h,_){return h&&h.length?vt(h,ln(_,2)):0}return ce.after=Ge,ce.ary=It,ce.assign=wm,ce.assignIn=Sm,ce.assignInWith=xd,ce.assignWith=Tm,ce.at=kg,ce.before=Qt,ce.bind=ir,ce.bindAll=Ag,ce.bindKey=Jt,ce.castArray=Dy,ce.chain=Pf,ce.chunk=Vd,ce.compact=pc,ce.concat=Hl,ce.cond=Rg,ce.conforms=zg,ce.constant=_p,ce.countBy=cp,ce.create=Cm,ce.curry=Er,ce.curryRight=Or,ce.debounce=Ur,ce.defaults=Zp,ce.defaultsDeep=yp,ce.defer=fo,ce.delay=pt,ce.difference=Qn,ce.differenceBy=wo,ce.differenceWith=So,ce.drop=_s,ce.dropRight=Ya,ce.dropRightWhile=cd,ce.dropWhile=ts,ce.fill=Zd,ce.filter=kh,ce.flatMap=gd,ce.flatMapDeep=If,ce.flatMapDepth=Bp,ce.flatten=hd,ce.flattenDeep=dd,ce.flattenDepth=fa,ce.flip=Xe,ce.flow=Lh,ce.flowRight=Lg,ce.fromPairs=xf,ce.functions=n,ce.functionsIn=s,ce.groupBy=kf,ce.initial=Wd,ce.intersection=fd,ce.intersectionBy=gc,ce.intersectionWith=Hd,ce.invert=S,ce.invertBy=k,ce.invokeMap=hp,ce.iteratee=Am,ce.keyBy=Np,ce.keys=F,ce.keysIn=j,ce.map=vc,ce.mapKeys=H,ce.mapValues=X,ce.matches=jy,ce.matchesProperty=Uy,ce.memoize=xt,ce.merge=ee,ce.mergeWith=oe,ce.method=Vy,ce.methodOf=Zy,ce.mixin=Rm,ce.negate=dr,ce.nthArg=Cc,ce.omit=ye,ce.omitBy=Pe,ce.once=Zr,ce.orderBy=dp,ce.over=Gp,ce.overArgs=un,ce.overEvery=Dg,ce.overSome=Wy,ce.partial=Qr,ce.partialRight=pn,ce.partition=Jd,ce.pick=Ze,ce.pickBy=ze,ce.property=Og,ce.propertyOf=Hy,ce.pull=Qc,ce.pullAll=Ch,ce.pullAllBy=Ra,ce.pullAllWith=Jc,ce.pullAt=ql,ce.range=La,ce.rangeRight=hu,ce.rearg=vs,ce.reject=o,ce.remove=za,ce.rest=li,ce.reverse=bf,ce.sampleSize=x,ce.set=me,ce.setWith=Be,ce.shuffle=C,ce.slice=rp,ce.sortBy=se,ce.sortedUniq=ip,ce.sortedUniqBy=Ih,ce.split=is,ce.spread=xc,ce.tail=op,ce.take=wf,ce.takeRight=Sf,ce.takeRightWhile=Xd,ce.takeWhile=Rp,ce.tap=Op,ce.throttle=mm,ce.thru=Tl,ce.toArray=xm,ce.toPairs=mt,ce.toPairsIn=Ut,ce.toPath=Ub,ce.toPlainObject=Ig,ce.transform=wt,ce.unary=zy,ce.union=dm,ce.unionBy=Yd,ce.unionWith=zp,ce.uniq=th,ce.uniqBy=fm,ce.uniqWith=pd,ce.unset=kt,ce.unzip=Tf,ce.unzipWith=Ki,ce.update=Xt,ce.updateWith=Zt,ce.values=Kt,ce.valuesIn=zt,ce.without=pm,ce.words=tf,ce.wrap=Ly,ce.xor=Lp,ce.xorBy=Qd,ce.xorWith=Dp,ce.zip=Cf,ce.zipObject=sp,ce.zipObjectDeep=Ro,ce.zipWith=Qa,ce.entries=mt,ce.entriesIn=Ut,ce.extend=Sm,ce.extendWith=xd,Rm(ce,ce),ce.add=Zb,ce.attempt=Mm,ce.camelCase=zr,ce.capitalize=zn,ce.ceil=Gb,ce.clamp=Ir,ce.clone=Oy,ce.cloneDeep=_d,ce.cloneDeepWith=pg,ce.cloneWith=gm,ce.conformsTo=mg,ce.deburr=Xi,ce.defaultTo=km,ce.divide=Wb,ce.endsWith=ns,ce.eq=Nu,ce.escape=ma,ce.escapeRegExp=uu,ce.every=_c,ce.find=rh,ce.findIndex=Yc,ce.findKey=Pm,ce.findLast=Ah,ce.findLastIndex=Gd,ce.findLastKey=Em,ce.floor=Hb,ce.forEach=Mf,ce.forEachRight=yd,ce.forIn=Im,ce.forInRight=Ny,ce.forOwn=i,ce.forOwnRight=t,ce.get=f,ce.gt=gg,ce.gte=yg,ce.has=v,ce.hasIn=b,ce.head=mc,ce.identity=Il,ce.includes=Af,ce.indexOf=Bu,ce.inRange=Hr,ce.invoke=R,ce.isArguments=Rh,ce.isArray=kn,ce.isArrayBuffer=fp,ce.isArrayLike=Cl,ce.isArrayLikeObject=zo,ce.isBoolean=_g,ce.isBuffer=xs,ce.isDate=zf,ce.isElement=vg,ce.isEmpty=xg,ce.isEqual=bg,ce.isEqualWith=wg,ce.isError=jp,ce.isFinite=Sg,ce.isFunction=zh,ce.isInteger=ym,ce.isLength=bc,ce.isMap=_m,ce.isMatch=Tg,ce.isMatchWith=Fy,ce.isNaN=By,ce.isNative=Cg,ce.isNil=Pg,ce.isNull=pp,ce.isNumber=mp,ce.isObject=To,ce.isObjectLike=Lo,ce.isPlainObject=Lf,ce.isRegExp=Df,ce.isSafeInteger=Up,ce.isSet=gp,ce.isString=Vp,ce.isSymbol=au,ce.isTypedArray=Of,ce.isUndefined=Ff,ce.isWeakMap=pa,ce.isWeakSet=vd,ce.join=yc,ce.kebabCase=Pl,ce.last=rs,ce.lastIndexOf=qd,ce.lowerCase=Hs,ce.lowerFirst=Yi,ce.lt=vm,ce.lte=Eg,ce.max=qb,ce.maxBy=Kb,ce.mean=Xb,ce.meanBy=Yb,ce.min=Qb,ce.minBy=Jb,ce.stubArray=Dh,ce.stubFalse=du,ce.stubObject=rf,ce.stubString=nh,ce.stubTrue=$b,ce.multiply=ew,ce.nth=Kd,ce.noConflict=Gy,ce.noop=zm,ce.now=Re,ce.pad=bs,ce.padEnd=qs,ce.padStart=Ks,ce.parseInt=Ja,ce.random=Wr,ce.reduce=$p,ce.reduceRight=Rf,ce.repeat=cu,ce.replace=ws,ce.result=q,ce.round=tw,ce.runInContext=rt,ce.sample=l,ce.size=z,ce.snakeCase=El,ce.some=V,ce.sortedIndex=Ph,ce.sortedIndexBy=kp,ce.sortedIndexOf=eh,ce.sortedLastIndex=Ap,ce.sortedLastIndexBy=np,ce.sortedLastIndexOf=Eh,ce.startCase=Ss,ce.startsWith=Ts,ce.subtract=rw,ce.sum=nw,ce.sumBy=iw,ce.template=Vo,ce.times=jb,ce.toFinite=wc,ce.toInteger=Ln,ce.toLength=bm,ce.toLower=Ui,ce.toNumber=lu,ce.toSafeInteger=Mg,ce.toString=Si,ce.toUpper=Sc,ce.trim=Bf,ce.trimEnd=Tc,ce.trimStart=$y,ce.truncate=Nf,ce.unescape=ef,ce.uniqueId=Vb,ce.upperCase=$f,ce.upperFirst=bd,ce.each=Mf,ce.eachRight=yd,ce.first=mc,Rm(ce,function(){var h={};return Ns(ce,function(_,I){Wn.call(ce.prototype,I)||(h[I]=_)}),h}(),{chain:!1}),ce.VERSION=T,zi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(h){ce[h].placeholder=ce}),zi(["drop","take"],function(h,_){yn.prototype[h]=function(I){I=I===p?1:$i(Ln(I),0);var Z=this.__filtered__&&!_?new yn(this):this.clone();return Z.__filtered__?Z.__takeCount__=No(I,Z.__takeCount__):Z.__views__.push({size:No(I,Fe),type:h+(Z.__dir__<0?"Right":"")}),Z},yn.prototype[h+"Right"]=function(I){return this.reverse()[h](I).reverse()}}),zi(["filter","map","takeWhile"],function(h,_){var I=_+1,Z=I==rr||I==xr;yn.prototype[h]=function(re){var ve=this.clone();return ve.__iteratees__.push({iteratee:ln(re,3),type:I}),ve.__filtered__=ve.__filtered__||Z,ve}}),zi(["head","last"],function(h,_){var I="take"+(_?"Right":"");yn.prototype[h]=function(){return this[I](1).value()[0]}}),zi(["initial","tail"],function(h,_){var I="drop"+(_?"":"Right");yn.prototype[h]=function(){return this.__filtered__?new yn(this):this[I](1)}}),yn.prototype.compact=function(){return this.filter(Il)},yn.prototype.find=function(h){return this.filter(h).head()},yn.prototype.findLast=function(h){return this.reverse().find(h)},yn.prototype.invokeMap=Qe(function(h,_){return typeof h=="function"?new yn(this):this.map(function(I){return Uo(I,h,_)})}),yn.prototype.reject=function(h){return this.filter(dr(ln(h)))},yn.prototype.slice=function(h,_){h=Ln(h);var I=this;return I.__filtered__&&(h>0||_<0)?new yn(I):(h<0?I=I.takeRight(-h):h&&(I=I.drop(h)),_!==p&&(_=Ln(_),I=_<0?I.dropRight(-_):I.take(_-h)),I)},yn.prototype.takeRightWhile=function(h){return this.reverse().takeWhile(h).reverse()},yn.prototype.toArray=function(){return this.take(Fe)},Ns(yn.prototype,function(h,_){var I=/^(?:filter|find|map|reject)|While$/.test(_),Z=/^(?:head|last)$/.test(_),re=ce[Z?"take"+(_=="last"?"Right":""):_],ve=Z||/^find/.test(_);re&&(ce.prototype[_]=function(){var Ne=this.__wrapped__,qe=Z?[1]:arguments,ut=Ne instanceof yn,Wt=qe[0],qt=ut||kn(Ne),nr=function(ii){var gi=re.apply(ce,ja([ii],qe));return Z&&Rr?gi[0]:gi};qt&&I&&typeof Wt=="function"&&Wt.length!=1&&(ut=qt=!1);var Rr=this.__chain__,tn=!!this.__actions__.length,vn=ve&&!Rr,Un=ut&&!tn;if(!ve&&qt){Ne=Un?Ne:new yn(this);var xn=h.apply(Ne,qe);return xn.__actions__.push({func:Tl,args:[nr],thisArg:p}),new qo(xn,Rr)}return vn&&Un?h.apply(this,qe):(xn=this.thru(nr),vn?Z?xn.value()[0]:xn.value():xn)})}),zi(["pop","push","shift","sort","splice","unshift"],function(h){var _=Rs[h],I=/^(?:push|sort|unshift)$/.test(h)?"tap":"thru",Z=/^(?:pop|shift)$/.test(h);ce.prototype[h]=function(){var re=arguments;if(Z&&!this.__chain__){var ve=this.value();return _.apply(kn(ve)?ve:[],re)}return this[I](function(Ne){return _.apply(kn(Ne)?Ne:[],re)})}}),Ns(yn.prototype,function(h,_){var I=ce[_];if(I){var Z=I.name+"";Wn.call(Ci,Z)||(Ci[Z]=[]),Ci[Z].push({name:_,func:I})}}),Ci[xh(p,gt).name]=[{name:"wrapper",func:p}],yn.prototype.clone=tu,yn.prototype.reverse=ao,yn.prototype.value=pl,ce.prototype.at=md,ce.prototype.chain=Mh,ce.prototype.commit=Ef,ce.prototype.next=ap,ce.prototype.plant=Fp,ce.prototype.reverse=Ws,ce.prototype.toJSON=ce.prototype.valueOf=ce.prototype.value=up,ce.prototype.first=ce.prototype.head,ba&&(ce.prototype[ba]=lp),ce},xu=qu();hs?((hs.exports=xu)._=xu,il._=xu):fi._=xu}).call(mE)}(Um,Um.exports)),Um.exports}gE();var Jg={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var yE=Jg.exports,V0;function _E(){return V0||(V0=1,function(c,m){((p,T)=>{c.exports=T()})(yE,function p(){var T=typeof self<"u"?self:typeof window<"u"?window:T!==void 0?T:{},P,D=!T.document&&!!T.postMessage,M=T.IS_PAPA_WORKER||!1,u={},te=0,Y={};function fe(Le){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(je){var ne=Je(je);ne.chunkSize=parseInt(ne.chunkSize),je.step||je.chunk||(ne.chunkSize=null),this._handle=new Ce(ne),(this._handle.streamer=this)._config=ne}).call(this,Le),this.parseChunk=function(je,ne){var ot=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<ot){let Lt=this._config.newline;Lt||(at=this._config.quoteChar||'"',Lt=this._handle.guessLineEndings(je,at)),je=[...je.split(Lt).slice(ot)].join(Lt)}this.isFirstChunk&&_t(this._config.beforeFirstChunk)&&(at=this._config.beforeFirstChunk(je))!==void 0&&(je=at),this.isFirstChunk=!1,this._halted=!1;var ot=this._partialLine+je,at=(this._partialLine="",this._handle.parse(ot,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(je=at.meta.cursor,ot=(this._finished||(this._partialLine=ot.substring(je-this._baseIndex),this._baseIndex=je),at&&at.data&&(this._rowCount+=at.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),M)T.postMessage({results:at,workerId:Y.WORKER_ID,finished:ot});else if(_t(this._config.chunk)&&!ne){if(this._config.chunk(at,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=at=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(at.data),this._completeResults.errors=this._completeResults.errors.concat(at.errors),this._completeResults.meta=at.meta),this._completed||!ot||!_t(this._config.complete)||at&&at.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),ot||at&&at.meta.paused||this._nextChunk(),at}this._halted=!0},this._sendError=function(je){_t(this._config.error)?this._config.error(je):M&&this._config.error&&T.postMessage({workerId:Y.WORKER_ID,error:je,finished:!1})}}function he(Le){var je;(Le=Le||{}).chunkSize||(Le.chunkSize=Y.RemoteChunkSize),fe.call(this,Le),this._nextChunk=D?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(ne){this._input=ne,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(je=new XMLHttpRequest,this._config.withCredentials&&(je.withCredentials=this._config.withCredentials),D||(je.onload=it(this._chunkLoaded,this),je.onerror=it(this._chunkError,this)),je.open(this._config.downloadRequestBody?"POST":"GET",this._input,!D),this._config.downloadRequestHeaders){var ne,ot=this._config.downloadRequestHeaders;for(ne in ot)je.setRequestHeader(ne,ot[ne])}var at;this._config.chunkSize&&(at=this._start+this._config.chunkSize-1,je.setRequestHeader("Range","bytes="+this._start+"-"+at));try{je.send(this._config.downloadRequestBody)}catch(Lt){this._chunkError(Lt.message)}D&&je.status===0&&this._chunkError()}},this._chunkLoaded=function(){je.readyState===4&&(je.status<200||400<=je.status?this._chunkError():(this._start+=this._config.chunkSize||je.responseText.length,this._finished=!this._config.chunkSize||this._start>=(ne=>(ne=ne.getResponseHeader("Content-Range"))!==null?parseInt(ne.substring(ne.lastIndexOf("/")+1)):-1)(je),this.parseChunk(je.responseText)))},this._chunkError=function(ne){ne=je.statusText||ne,this._sendError(new Error(ne))}}function Te(Le){(Le=Le||{}).chunkSize||(Le.chunkSize=Y.LocalChunkSize),fe.call(this,Le);var je,ne,ot=typeof FileReader<"u";this.stream=function(at){this._input=at,ne=at.slice||at.webkitSlice||at.mozSlice,ot?((je=new FileReader).onload=it(this._chunkLoaded,this),je.onerror=it(this._chunkError,this)):je=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var at=this._input,Lt=(this._config.chunkSize&&(Lt=Math.min(this._start+this._config.chunkSize,this._input.size),at=ne.call(at,this._start,Lt)),je.readAsText(at,this._config.encoding));ot||this._chunkLoaded({target:{result:Lt}})},this._chunkLoaded=function(at){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(at.target.result)},this._chunkError=function(){this._sendError(je.error)}}function ge(Le){var je;fe.call(this,Le=Le||{}),this.stream=function(ne){return je=ne,this._nextChunk()},this._nextChunk=function(){var ne,ot;if(!this._finished)return ne=this._config.chunkSize,je=ne?(ot=je.substring(0,ne),je.substring(ne)):(ot=je,""),this._finished=!je,this.parseChunk(ot)}}function we(Le){fe.call(this,Le=Le||{});var je=[],ne=!0,ot=!1;this.pause=function(){fe.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){fe.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(at){this._input=at,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){ot&&je.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),je.length?this.parseChunk(je.shift()):ne=!0},this._streamData=it(function(at){try{je.push(typeof at=="string"?at:at.toString(this._config.encoding)),ne&&(ne=!1,this._checkIsFinished(),this.parseChunk(je.shift()))}catch(Lt){this._streamError(Lt)}},this),this._streamError=it(function(at){this._streamCleanUp(),this._sendError(at)},this),this._streamEnd=it(function(){this._streamCleanUp(),ot=!0,this._streamData("")},this),this._streamCleanUp=it(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function Ce(Le){var je,ne,ot,at,Lt=Math.pow(2,53),rr=-Lt,Pr=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,xr=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,sr=this,bt=0,Et=0,Ht=!1,Fe=!1,ht=[],Vt={data:[],errors:[],meta:{}};function cr(pr){return Le.skipEmptyLines==="greedy"?pr.join("").trim()==="":pr.length===1&&pr[0].length===0}function Rt(){if(Vt&&ot&&(Tr("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+Y.DefaultDelimiter+"'"),ot=!1),Le.skipEmptyLines&&(Vt.data=Vt.data.filter(function(rn){return!cr(rn)})),or()){let rn=function(jr,br){_t(Le.transformHeader)&&(jr=Le.transformHeader(jr,br)),ht.push(jr)};var Cr=rn;if(Vt)if(Array.isArray(Vt.data[0])){for(var pr=0;or()&&pr<Vt.data.length;pr++)Vt.data[pr].forEach(rn);Vt.data.splice(0,1)}else Vt.data.forEach(rn)}function mr(rn,jr){for(var br=Le.header?{}:[],on=0;on<rn.length;on++){var qr=on,fn=rn[on],fn=((sn,wn)=>(an=>(Le.dynamicTypingFunction&&Le.dynamicTyping[an]===void 0&&(Le.dynamicTyping[an]=Le.dynamicTypingFunction(an)),(Le.dynamicTyping[an]||Le.dynamicTyping)===!0))(sn)?wn==="true"||wn==="TRUE"||wn!=="false"&&wn!=="FALSE"&&((an=>{if(Pr.test(an)&&(an=parseFloat(an),rr<an&&an<Lt))return 1})(wn)?parseFloat(wn):xr.test(wn)?new Date(wn):wn===""?null:wn):wn)(qr=Le.header?on>=ht.length?"__parsed_extra":ht[on]:qr,fn=Le.transform?Le.transform(fn,qr):fn);qr==="__parsed_extra"?(br[qr]=br[qr]||[],br[qr].push(fn)):br[qr]=fn}return Le.header&&(on>ht.length?Tr("FieldMismatch","TooManyFields","Too many fields: expected "+ht.length+" fields but parsed "+on,Et+jr):on<ht.length&&Tr("FieldMismatch","TooFewFields","Too few fields: expected "+ht.length+" fields but parsed "+on,Et+jr)),br}var Jr;Vt&&(Le.header||Le.dynamicTyping||Le.transform)&&(Jr=1,!Vt.data.length||Array.isArray(Vt.data[0])?(Vt.data=Vt.data.map(mr),Jr=Vt.data.length):Vt.data=mr(Vt.data,0),Le.header&&Vt.meta&&(Vt.meta.fields=ht),Et+=Jr)}function or(){return Le.header&&ht.length===0}function Tr(pr,mr,Jr,Cr){pr={type:pr,code:mr,message:Jr},Cr!==void 0&&(pr.row=Cr),Vt.errors.push(pr)}_t(Le.step)&&(at=Le.step,Le.step=function(pr){Vt=pr,or()?Rt():(Rt(),Vt.data.length!==0&&(bt+=pr.data.length,Le.preview&&bt>Le.preview?ne.abort():(Vt.data=Vt.data[0],at(Vt,sr))))}),this.parse=function(pr,mr,Jr){var Cr=Le.quoteChar||'"',Cr=(Le.newline||(Le.newline=this.guessLineEndings(pr,Cr)),ot=!1,Le.delimiter?_t(Le.delimiter)&&(Le.delimiter=Le.delimiter(pr),Vt.meta.delimiter=Le.delimiter):((Cr=((rn,jr,br,on,qr)=>{var fn,sn,wn,an;qr=qr||[",","	","|",";",Y.RECORD_SEP,Y.UNIT_SEP];for(var An=0;An<qr.length;An++){for(var Sr,Vn=qr[An],Hn=0,Ti=0,ei=0,qn=(wn=void 0,new gt({comments:on,delimiter:Vn,newline:jr,preview:10}).parse(rn)),Nn=0;Nn<qn.data.length;Nn++)br&&cr(qn.data[Nn])?ei++:(Sr=qn.data[Nn].length,Ti+=Sr,wn===void 0?wn=Sr:0<Sr&&(Hn+=Math.abs(Sr-wn),wn=Sr));0<qn.data.length&&(Ti/=qn.data.length-ei),(sn===void 0||Hn<=sn)&&(an===void 0||an<Ti)&&1.99<Ti&&(sn=Hn,fn=Vn,an=Ti)}return{successful:!!(Le.delimiter=fn),bestDelimiter:fn}})(pr,Le.newline,Le.skipEmptyLines,Le.comments,Le.delimitersToGuess)).successful?Le.delimiter=Cr.bestDelimiter:(ot=!0,Le.delimiter=Y.DefaultDelimiter),Vt.meta.delimiter=Le.delimiter),Je(Le));return Le.preview&&Le.header&&Cr.preview++,je=pr,ne=new gt(Cr),Vt=ne.parse(je,mr,Jr),Rt(),Ht?{meta:{paused:!0}}:Vt||{meta:{paused:!1}}},this.paused=function(){return Ht},this.pause=function(){Ht=!0,ne.abort(),je=_t(Le.chunk)?"":je.substring(ne.getCharIndex())},this.resume=function(){sr.streamer._halted?(Ht=!1,sr.streamer.parseChunk(je,!0)):setTimeout(sr.resume,3)},this.aborted=function(){return Fe},this.abort=function(){Fe=!0,ne.abort(),Vt.meta.aborted=!0,_t(Le.complete)&&Le.complete(Vt),je=""},this.guessLineEndings=function(rn,Cr){rn=rn.substring(0,1048576);var Cr=new RegExp(We(Cr)+"([^]*?)"+We(Cr),"gm"),Jr=(rn=rn.replace(Cr,"")).split("\r"),Cr=rn.split(`
`),rn=1<Cr.length&&Cr[0].length<Jr[0].length;if(Jr.length===1||rn)return`
`;for(var jr=0,br=0;br<Jr.length;br++)Jr[br][0]===`
`&&jr++;return jr>=Jr.length/2?`\r
`:"\r"}}function We(Le){return Le.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function gt(Le){var je=(Le=Le||{}).delimiter,ne=Le.newline,ot=Le.comments,at=Le.step,Lt=Le.preview,rr=Le.fastMode,Pr=null,xr=!1,sr=Le.quoteChar==null?'"':Le.quoteChar,bt=sr;if(Le.escapeChar!==void 0&&(bt=Le.escapeChar),(typeof je!="string"||-1<Y.BAD_DELIMITERS.indexOf(je))&&(je=","),ot===je)throw new Error("Comment character same as delimiter");ot===!0?ot="#":(typeof ot!="string"||-1<Y.BAD_DELIMITERS.indexOf(ot))&&(ot=!1),ne!==`
`&&ne!=="\r"&&ne!==`\r
`&&(ne=`
`);var Et=0,Ht=!1;this.parse=function(Fe,ht,Vt){if(typeof Fe!="string")throw new Error("Input must be a string");var cr=Fe.length,Rt=je.length,or=ne.length,Tr=ot.length,pr=_t(at),mr=[],Jr=[],Cr=[],rn=Et=0;if(!Fe)return Hn();if(rr||rr!==!1&&Fe.indexOf(sr)===-1){for(var jr=Fe.split(ne),br=0;br<jr.length;br++){if(Cr=jr[br],Et+=Cr.length,br!==jr.length-1)Et+=ne.length;else if(Vt)return Hn();if(!ot||Cr.substring(0,Tr)!==ot){if(pr){if(mr=[],an(Cr.split(je)),Ti(),Ht)return Hn()}else an(Cr.split(je));if(Lt&&Lt<=br)return mr=mr.slice(0,Lt),Hn(!0)}}return Hn()}for(var on=Fe.indexOf(je,Et),qr=Fe.indexOf(ne,Et),fn=new RegExp(We(bt)+We(sr),"g"),sn=Fe.indexOf(sr,Et);;)if(Fe[Et]===sr)for(sn=Et,Et++;;){if((sn=Fe.indexOf(sr,sn+1))===-1)return Vt||Jr.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:mr.length,index:Et}),Sr();if(sn===cr-1)return Sr(Fe.substring(Et,sn).replace(fn,sr));if(sr===bt&&Fe[sn+1]===bt)sn++;else if(sr===bt||sn===0||Fe[sn-1]!==bt){on!==-1&&on<sn+1&&(on=Fe.indexOf(je,sn+1));var wn=An((qr=qr!==-1&&qr<sn+1?Fe.indexOf(ne,sn+1):qr)===-1?on:Math.min(on,qr));if(Fe.substr(sn+1+wn,Rt)===je){Cr.push(Fe.substring(Et,sn).replace(fn,sr)),Fe[Et=sn+1+wn+Rt]!==sr&&(sn=Fe.indexOf(sr,Et)),on=Fe.indexOf(je,Et),qr=Fe.indexOf(ne,Et);break}if(wn=An(qr),Fe.substring(sn+1+wn,sn+1+wn+or)===ne){if(Cr.push(Fe.substring(Et,sn).replace(fn,sr)),Vn(sn+1+wn+or),on=Fe.indexOf(je,Et),sn=Fe.indexOf(sr,Et),pr&&(Ti(),Ht))return Hn();if(Lt&&mr.length>=Lt)return Hn(!0);break}Jr.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:mr.length,index:Et}),sn++}}else if(ot&&Cr.length===0&&Fe.substring(Et,Et+Tr)===ot){if(qr===-1)return Hn();Et=qr+or,qr=Fe.indexOf(ne,Et),on=Fe.indexOf(je,Et)}else if(on!==-1&&(on<qr||qr===-1))Cr.push(Fe.substring(Et,on)),Et=on+Rt,on=Fe.indexOf(je,Et);else{if(qr===-1)break;if(Cr.push(Fe.substring(Et,qr)),Vn(qr+or),pr&&(Ti(),Ht))return Hn();if(Lt&&mr.length>=Lt)return Hn(!0)}return Sr();function an(ei){mr.push(ei),rn=Et}function An(ei){var qn=0;return qn=ei!==-1&&(ei=Fe.substring(sn+1,ei))&&ei.trim()===""?ei.length:qn}function Sr(ei){return Vt||(ei===void 0&&(ei=Fe.substring(Et)),Cr.push(ei),Et=cr,an(Cr),pr&&Ti()),Hn()}function Vn(ei){Et=ei,an(Cr),Cr=[],qr=Fe.indexOf(ne,Et)}function Hn(ei){if(Le.header&&!ht&&mr.length&&!xr){var qn=mr[0],Nn=Object.create(null),eo=new Set(qn);let Wi=!1;for(let Zi=0;Zi<qn.length;Zi++){let ti=qn[Zi];if(Nn[ti=_t(Le.transformHeader)?Le.transformHeader(ti,Zi):ti]){let oi,go=Nn[ti];for(;oi=ti+"_"+go,go++,eo.has(oi););eo.add(oi),qn[Zi]=oi,Nn[ti]++,Wi=!0,(Pr=Pr===null?{}:Pr)[oi]=ti}else Nn[ti]=1,qn[Zi]=ti;eo.add(ti)}Wi&&console.warn("Duplicate headers found and renamed."),xr=!0}return{data:mr,errors:Jr,meta:{delimiter:je,linebreak:ne,aborted:Ht,truncated:!!ei,cursor:rn+(ht||0),renamedHeaders:Pr}}}function Ti(){at(Hn()),mr=[],Jr=[]}},this.abort=function(){Ht=!0},this.getCharIndex=function(){return Et}}function At(Le){var je=Le.data,ne=u[je.workerId],ot=!1;if(je.error)ne.userError(je.error,je.file);else if(je.results&&je.results.data){var at={abort:function(){ot=!0,Ct(je.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:et,resume:et};if(_t(ne.userStep)){for(var Lt=0;Lt<je.results.data.length&&(ne.userStep({data:je.results.data[Lt],errors:je.results.errors,meta:je.results.meta},at),!ot);Lt++);delete je.results}else _t(ne.userChunk)&&(ne.userChunk(je.results,at,je.file),delete je.results)}je.finished&&!ot&&Ct(je.workerId,je.results)}function Ct(Le,je){var ne=u[Le];_t(ne.userComplete)&&ne.userComplete(je),ne.terminate(),delete u[Le]}function et(){throw new Error("Not implemented.")}function Je(Le){if(typeof Le!="object"||Le===null)return Le;var je,ne=Array.isArray(Le)?[]:{};for(je in Le)ne[je]=Je(Le[je]);return ne}function it(Le,je){return function(){Le.apply(je,arguments)}}function _t(Le){return typeof Le=="function"}return Y.parse=function(Le,je){var ne=(je=je||{}).dynamicTyping||!1;if(_t(ne)&&(je.dynamicTypingFunction=ne,ne={}),je.dynamicTyping=ne,je.transform=!!_t(je.transform)&&je.transform,!je.worker||!Y.WORKERS_SUPPORTED)return ne=null,Y.NODE_STREAM_INPUT,typeof Le=="string"?(Le=(ot=>ot.charCodeAt(0)!==65279?ot:ot.slice(1))(Le),ne=new(je.download?he:ge)(je)):Le.readable===!0&&_t(Le.read)&&_t(Le.on)?ne=new we(je):(T.File&&Le instanceof File||Le instanceof Object)&&(ne=new Te(je)),ne.stream(Le);(ne=(()=>{var ot;return!!Y.WORKERS_SUPPORTED&&(ot=(()=>{var at=T.URL||T.webkitURL||null,Lt=p.toString();return Y.BLOB_URL||(Y.BLOB_URL=at.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",Lt,")();"],{type:"text/javascript"})))})(),(ot=new T.Worker(ot)).onmessage=At,ot.id=te++,u[ot.id]=ot)})()).userStep=je.step,ne.userChunk=je.chunk,ne.userComplete=je.complete,ne.userError=je.error,je.step=_t(je.step),je.chunk=_t(je.chunk),je.complete=_t(je.complete),je.error=_t(je.error),delete je.worker,ne.postMessage({input:Le,config:je,workerId:ne.id})},Y.unparse=function(Le,je){var ne=!1,ot=!0,at=",",Lt=`\r
`,rr='"',Pr=rr+rr,xr=!1,sr=null,bt=!1,Et=((()=>{if(typeof je=="object"){if(typeof je.delimiter!="string"||Y.BAD_DELIMITERS.filter(function(ht){return je.delimiter.indexOf(ht)!==-1}).length||(at=je.delimiter),typeof je.quotes!="boolean"&&typeof je.quotes!="function"&&!Array.isArray(je.quotes)||(ne=je.quotes),typeof je.skipEmptyLines!="boolean"&&typeof je.skipEmptyLines!="string"||(xr=je.skipEmptyLines),typeof je.newline=="string"&&(Lt=je.newline),typeof je.quoteChar=="string"&&(rr=je.quoteChar),typeof je.header=="boolean"&&(ot=je.header),Array.isArray(je.columns)){if(je.columns.length===0)throw new Error("Option columns is empty");sr=je.columns}je.escapeChar!==void 0&&(Pr=je.escapeChar+rr),je.escapeFormulae instanceof RegExp?bt=je.escapeFormulae:typeof je.escapeFormulae=="boolean"&&je.escapeFormulae&&(bt=/^[=+\-@\t\r].*$/)}})(),new RegExp(We(rr),"g"));if(typeof Le=="string"&&(Le=JSON.parse(Le)),Array.isArray(Le)){if(!Le.length||Array.isArray(Le[0]))return Ht(null,Le,xr);if(typeof Le[0]=="object")return Ht(sr||Object.keys(Le[0]),Le,xr)}else if(typeof Le=="object")return typeof Le.data=="string"&&(Le.data=JSON.parse(Le.data)),Array.isArray(Le.data)&&(Le.fields||(Le.fields=Le.meta&&Le.meta.fields||sr),Le.fields||(Le.fields=Array.isArray(Le.data[0])?Le.fields:typeof Le.data[0]=="object"?Object.keys(Le.data[0]):[]),Array.isArray(Le.data[0])||typeof Le.data[0]=="object"||(Le.data=[Le.data])),Ht(Le.fields||[],Le.data||[],xr);throw new Error("Unable to serialize unrecognized input");function Ht(ht,Vt,cr){var Rt="",or=(typeof ht=="string"&&(ht=JSON.parse(ht)),typeof Vt=="string"&&(Vt=JSON.parse(Vt)),Array.isArray(ht)&&0<ht.length),Tr=!Array.isArray(Vt[0]);if(or&&ot){for(var pr=0;pr<ht.length;pr++)0<pr&&(Rt+=at),Rt+=Fe(ht[pr],pr);0<Vt.length&&(Rt+=Lt)}for(var mr=0;mr<Vt.length;mr++){var Jr=(or?ht:Vt[mr]).length,Cr=!1,rn=or?Object.keys(Vt[mr]).length===0:Vt[mr].length===0;if(cr&&!or&&(Cr=cr==="greedy"?Vt[mr].join("").trim()==="":Vt[mr].length===1&&Vt[mr][0].length===0),cr==="greedy"&&or){for(var jr=[],br=0;br<Jr;br++){var on=Tr?ht[br]:br;jr.push(Vt[mr][on])}Cr=jr.join("").trim()===""}if(!Cr){for(var qr=0;qr<Jr;qr++){0<qr&&!rn&&(Rt+=at);var fn=or&&Tr?ht[qr]:qr;Rt+=Fe(Vt[mr][fn],qr)}mr<Vt.length-1&&(!cr||0<Jr&&!rn)&&(Rt+=Lt)}}return Rt}function Fe(ht,Vt){var cr,Rt;return ht==null?"":ht.constructor===Date?JSON.stringify(ht).slice(1,25):(Rt=!1,bt&&typeof ht=="string"&&bt.test(ht)&&(ht="'"+ht,Rt=!0),cr=ht.toString().replace(Et,Pr),(Rt=Rt||ne===!0||typeof ne=="function"&&ne(ht,Vt)||Array.isArray(ne)&&ne[Vt]||((or,Tr)=>{for(var pr=0;pr<Tr.length;pr++)if(-1<or.indexOf(Tr[pr]))return!0;return!1})(cr,Y.BAD_DELIMITERS)||-1<cr.indexOf(at)||cr.charAt(0)===" "||cr.charAt(cr.length-1)===" ")?rr+cr+rr:cr)}},Y.RECORD_SEP="",Y.UNIT_SEP="",Y.BYTE_ORDER_MARK="\uFEFF",Y.BAD_DELIMITERS=["\r",`
`,'"',Y.BYTE_ORDER_MARK],Y.WORKERS_SUPPORTED=!D&&!!T.Worker,Y.NODE_STREAM_INPUT=1,Y.LocalChunkSize=10485760,Y.RemoteChunkSize=5242880,Y.DefaultDelimiter=",",Y.Parser=gt,Y.ParserHandle=Ce,Y.NetworkStreamer=he,Y.FileStreamer=Te,Y.StringStreamer=ge,Y.ReadableStreamStreamer=we,T.jQuery&&((P=T.jQuery).fn.parse=function(Le){var je=Le.config||{},ne=[];return this.each(function(Lt){if(!(P(this).prop("tagName").toUpperCase()==="INPUT"&&P(this).attr("type").toLowerCase()==="file"&&T.FileReader)||!this.files||this.files.length===0)return!0;for(var rr=0;rr<this.files.length;rr++)ne.push({file:this.files[rr],inputElem:this,instanceConfig:P.extend({},je)})}),ot(),this;function ot(){if(ne.length===0)_t(Le.complete)&&Le.complete();else{var Lt,rr,Pr,xr,sr=ne[0];if(_t(Le.before)){var bt=Le.before(sr.file,sr.inputElem);if(typeof bt=="object"){if(bt.action==="abort")return Lt="AbortError",rr=sr.file,Pr=sr.inputElem,xr=bt.reason,void(_t(Le.error)&&Le.error({name:Lt},rr,Pr,xr));if(bt.action==="skip")return void at();typeof bt.config=="object"&&(sr.instanceConfig=P.extend(sr.instanceConfig,bt.config))}else if(bt==="skip")return void at()}var Et=sr.instanceConfig.complete;sr.instanceConfig.complete=function(Ht){_t(Et)&&Et(Ht,sr.file,sr.inputElem),at()},Y.parse(sr.file,sr.instanceConfig)}}function at(){ne.splice(0,1),ot()}}),M&&(T.onmessage=function(Le){Le=Le.data,Y.WORKER_ID===void 0&&Le&&(Y.WORKER_ID=Le.workerId),typeof Le.input=="string"?T.postMessage({workerId:Y.WORKER_ID,results:Y.parse(Le.input,Le.config),finished:!0}):(T.File&&Le.input instanceof File||Le.input instanceof Object)&&(Le=Y.parse(Le.input,Le.config))&&T.postMessage({workerId:Y.WORKER_ID,results:Le,finished:!0})}),(he.prototype=Object.create(fe.prototype)).constructor=he,(Te.prototype=Object.create(fe.prototype)).constructor=Te,(ge.prototype=Object.create(ge.prototype)).constructor=ge,(we.prototype=Object.create(fe.prototype)).constructor=we,Y})}(Jg)),Jg.exports}var vE=_E();const Z0=tg(vE);function xE({countyId:c,feature:m,everywhere_challenges:p}){const[T,P]=Gt.useState(null),D=te=>{if(!te)return;const Y="/blitz-the-gap-map/priorityspecies_per_county_commonName.csv";let fe={fields:["species_name","english_name","inat_class"]};Z0.parse(Y,{header:!0,skipEmptyLines:!0,download:!0,delimiter:",",complete:he=>{const Te=he.data.filter(we=>we.DGUID===te).map(we=>[we.sp,we.english_name,we.iNat_class]);fe.data=Te;const ge=Z0.unparse(fe);P(ge)}})};Gt.useEffect(()=>{if(!T)return;const te=new Blob([T],{type:"text/csv;charset=utf-8;"}),Y=URL.createObjectURL(te),fe=document.createElement("a");fe.href=Y,fe.download=`${m.CDNAME.replace(" ","_")}_priority_species_list.csv`,document.body.appendChild(fe),fe.click(),document.body.removeChild(fe),U},[T]);const u=(m.challenges+","+p.join(",")).replace("Birders, don't look up!","Birders - don't look up!").split(",").map((te,Y)=>wr.jsx("li",{children:te}));return wr.jsxs("div",{children:[wr.jsxs("div",{style:{"text-align":"left"},children:[wr.jsx("h3",{children:m.CDNAME}),wr.jsx("strong",{children:"Number of species"}),": ",m.number_of_species,wr.jsx("br",{}),wr.jsx("strong",{children:"Number of challenges"}),":"," ",parseInt(m.number_of_challenges)+3,wr.jsx("br",{}),wr.jsx("strong",{children:"List of challenges"}),": ",wr.jsx("ul",{children:u})]}),wr.jsxs("button",{onClick:()=>D(m.DGUID),style:{marginTop:"10px"},children:["Download Priority ",wr.jsx("br",{}),"Species List (CSV)"]})]})}const G0={MAPTILER_TOKEN:"U4hNLWRENxTa7CfHUUnN"},rb=[{title:"Light basemap",uri:"https://api.maptiler.com/maps/outdoor-v2/style.json?key="+G0.MAPTILER_TOKEN},{title:"Satellite basemap",uri:"https://api.maptiler.com/maps/hybrid/style.json?key="+G0.MAPTILER_TOKEN}];class im{constructor(m,p){this.styles=m||im.DEFAULT_STYLES,this.defaultStyle=p||im.DEFAULT_STYLE,this.onDocumentClick=this.onDocumentClick.bind(this)}getDefaultPosition(){return"top-right"}onAdd(m){this.map=m,this.controlContainer=document.createElement("div"),this.controlContainer.classList.add("maplibregl-ctrl"),this.controlContainer.classList.add("maplibregl-ctrl-group"),this.mapStyleContainer=document.createElement("div"),this.styleButton=document.createElement("button"),this.styleButton.type="button",this.mapStyleContainer.classList.add("maplibregl-style-list");for(const p of this.styles){const T=document.createElement("button");T.type="button",T.innerText=p.title,T.classList.add(p.title.replace(/[^a-z0-9-]/gi,"_")),T.dataset.uri=JSON.stringify(p.uri),T.addEventListener("click",P=>{const D=P.srcElement;if(D.classList.contains("active"))return;(this.map&&this.map.getStyle&&this.map.getStyle().layers||[]).forEach(te=>{te&&te.id&&te.id.includes("ol-")&&this.map.getLayer(te.id)&&this.map.removeLayer(te.id)}),this.map.triggerRepaint(),p.uri!==""&&fetch(JSON.parse(D.dataset.uri)).then(te=>te.json()).then(te=>{if(te.sources&&Object.entries(te.sources).forEach(([Y,fe])=>{try{this.map.getSource(Y)||this.map.addSource(Y,fe)}catch(he){console.error("Failed to add source",Y,he)}}),te.layers&&Array.isArray(te.layers)){const fe=(this.map.getStyle&&this.map.getStyle().layers||[]).map(we=>we.id),Te=["hex_5km","hex_10km","hex_25km","hex_50km","hex_100km","counties"].find(we=>fe.includes(we)),ge=fe.length?fe[0]:null;te.layers.forEach(we=>{if(!we||!we.id)return;const Ce=Object.assign({},we,{id:"ol-"+we.id});try{this.map.getLayer(Ce.id)&&this.map.removeLayer(Ce.id);const We=Te||ge;We&&this.map.getLayer(We)?this.map.addLayer(Ce,We):ge&&this.map.getLayer(ge)?this.map.addLayer(Ce,ge):this.map.addLayer(Ce)}catch(We){console.error("Failed to add layer",Ce.id,We)}})}this.map.triggerRepaint()}).catch(te=>console.error("Error loading style",te)),this.mapStyleContainer.style.display="none",this.styleButton.style.display="block";const u=this.mapStyleContainer.getElementsByClassName("active");for(;u[0];)u[0].classList.remove("active");D.classList.add("active")}),p.title===this.defaultStyle&&T.classList.add("active"),this.mapStyleContainer.appendChild(T)}return this.styleButton.classList.add("maplibregl-ctrl-icon"),this.styleButton.classList.add("maplibregl-style-switcher"),this.styleButton.addEventListener("click",()=>{this.styleButton.style.display="none",this.mapStyleContainer.style.display="block"}),document.addEventListener("click",this.onDocumentClick),this.controlContainer.appendChild(this.styleButton),this.controlContainer.appendChild(this.mapStyleContainer),this.controlContainer}onRemove(){!this.controlContainer||!this.controlContainer.parentNode||!this.map||!this.styleButton||(this.styleButton.removeEventListener("click",this.onDocumentClick),this.controlContainer.parentNode.removeChild(this.controlContainer),document.removeEventListener("click",this.onDocumentClick),this.map=void 0)}onDocumentClick(m){this.controlContainer&&!this.controlContainer.contains(m.target)&&this.mapStyleContainer&&this.styleButton&&(this.mapStyleContainer.style.display="none",this.styleButton.style.display="block")}}im.DEFAULT_STYLE="Demotiles";im.DEFAULT_STYLES=rb;function bE(c){const{COGUrl:m,opacity:p,challenges:T,challenge:P,colorBy:D}=c,[M,u]=Gt.useState(null);Gt.useRef();const te=T.filter(fe=>fe.everywhere===!0).map(fe=>fe.name);Gt.useEffect(()=>{let fe=new oE;return qp.addProtocol("pmtiles",fe.tile),()=>{qp.removeProtocol("pmtiles")}},[]);const Y=fe=>fe==="obsdens"?["interpolate",["linear"],["to-number",["get",fe]],10,"#22301a",50,"#3f5830",100,"#54793e",500,"#98cd79",2500,"#cce7bd"]:["interpolate",["linear"],["to-number",["get",fe]],5,"#22301a",10,"rgb(52, 66, 110)",50,"#5a6eae",200,"#5aa6ed",500,"#b5d1eb"];return Gt.useEffect(()=>{if(m&&!M){const fe=new qp.Map({container:"App",zoom:3.5,center:[-120,58],style:{version:8,projection:{type:"globe"},sources:{terrain:{type:"raster-dem",tiles:["https://tiler.biodiversite-quebec.ca/cog/tiles/{z}/{x}/{y}?url=https://object-arbutus.cloud.computecanada.ca/bq-io/io/earthenv/topography/elevation_1KMmn_GMTEDmn.tif&rescale=0,2013&bidx=1&expression=b1"],tileSize:256},counties:{type:"vector",url:"pmtiles://https://object-arbutus.cloud.computecanada.ca/bq-io/blitz-the-gap/alltaxa-hex.pmtiles"},hex_100km:{type:"vector",url:"pmtiles://https://object-arbutus.cloud.computecanada.ca/bq-io/blitz-the-gap/all_100km.pmtiles"},hex_50km:{type:"vector",url:"pmtiles://https://object-arbutus.cloud.computecanada.ca/bq-io/blitz-the-gap/all_50km.pmtiles"},hex_25km:{type:"vector",url:"pmtiles://https://object-arbutus.cloud.computecanada.ca/bq-io/blitz-the-gap/all_25km.pmtiles"},hex_10km:{type:"vector",url:"pmtiles://https://object-arbutus.cloud.computecanada.ca/bq-io/blitz-the-gap/all_10km.pmtiles"},hex_5km:{type:"vector",url:"pmtiles://https://object-arbutus.cloud.computecanada.ca/bq-io/blitz-the-gap/all_5km.pmtiles"},background:{type:"raster",tiles:["https://01.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png"],tileSize:256}},layers:[{id:"back",type:"raster",source:"background"},{id:"hex_5km",type:"fill","source-layer":"all_5km",source:"hex_5km",paint:{"fill-color":Y(P),"fill-opacity":.4,"fill-outline-color":"#ffffff22"},minzoom:6},{id:"hex_10km",type:"fill","source-layer":"all_10km",source:"hex_10km",paint:{"fill-color":Y(D),"fill-opacity":.4,"fill-outline-color":"#ffffff11"},minzoom:5,maxzoom:6},{id:"hex_25km",type:"fill","source-layer":"all_25km",source:"hex_25km",paint:{"fill-color":Y(D),"fill-opacity":.4,"fill-outline-color":"#ffffff11"},minzoom:3,maxzoom:5},{id:"hex_50km",type:"fill","source-layer":"all_50km",source:"hex_50km",paint:{"fill-color":Y(D),"fill-opacity":.4,"fill-outline-color":"#ffffff11"},maxzoom:3,minzoom:0}],sky:{"atmosphere-blend":["interpolate",["linear"],["zoom"],0,1,5,1,7,0]},light:{anchor:"viewport",position:[1.5,90,40],intensity:.25,color:"#555"}}});return rb.forEach(he=>{he.uri!==""&&fetch(he.uri).then(Te=>Te.json()).then(Te=>{Object.entries(Te.sources).forEach(([ge,we])=>{fe.getSource(ge)||fe.addSource(ge,we)})})}),fe.addControl(new qp.GlobeControl),fe.addControl(new qp.NavigationControl({showZoom:!0,showCompass:!1})),fe.on("click","counties",he=>{const Te=document.createElement("div");gw.createRoot(Te).render(wr.jsx(xE,{feature:he.features[0].properties,everywhere_challenges:te})),new qp.Popup().setLngLat([he.lngLat.lng,he.lngLat.lat]).setDOMContent(Te).addTo(fe)}),fe.on("mouseenter","counties",()=>{fe.getCanvas().style.cursor="crosshair"}),fe.on("mouseleave","counties",()=>{fe.getCanvas().style.cursor="pointer"}),fe.addControl(new im),u(fe),()=>{fe.remove()}}},[]),Gt.useEffect(()=>(M&&(M.setPaintProperty("hex_5km","fill-color",Y(D)),M.setPaintProperty("hex_10km","fill-color",Y(D)),M.setPaintProperty("hex_25km","fill-color",Y(D)),M.setPaintProperty("hex_50km","fill-color",Y(D)),M.triggerRepaint()),()=>{}),[M,P,D]),wr.jsx("div",{id:"App",className:"App",style:{width:"100vw",height:"100vh",zIndex:"0",background:"url('/blitz-the-gap-map/night-sky.png')"}})}function zc(c,m,p=void 0){const T={};for(const P in c){const D=c[P];let M="",u=!0;for(let te=0;te<D.length;te+=1){const Y=D[te];Y&&(M+=(u===!0?"":" ")+m(Y),u=!1,p&&p[Y]&&(M+=" "+p[Y]))}T[P]=M}return T}function nb(c){var m,p,T="";if(typeof c=="string"||typeof c=="number")T+=c;else if(typeof c=="object")if(Array.isArray(c)){var P=c.length;for(m=0;m<P;m++)c[m]&&(p=nb(c[m]))&&(T&&(T+=" "),T+=p)}else for(p in c)c[p]&&(T&&(T+=" "),T+=p);return T}function Co(){for(var c,m,p=0,T="",P=arguments.length;p<P;p++)(c=arguments[p])&&(m=nb(c))&&(T&&(T+=" "),T+=m);return T}function xv({props:c,states:m,muiFormControl:p}){return m.reduce((T,P)=>(T[P]=c[P],p&&typeof c[P]>"u"&&(T[P]=p[P]),T),{})}const ib=Gt.createContext(void 0);function lg(){return Gt.useContext(ib)}function Sp(c,...m){const p=new URL(`https://mui.com/production-error/?code=${c}`);return m.forEach(T=>p.searchParams.append("args[]",T)),`Minified MUI error #${c}; visit ${p} for the full message.`}function yi(c){if(typeof c!="string")throw new Error(Sp(7));return c.charAt(0).toUpperCase()+c.slice(1)}var w_={exports:{}},Qi={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W0;function wE(){if(W0)return Qi;W0=1;var c=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),M=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),fe=Symbol.for("react.memo"),he=Symbol.for("react.lazy"),Te=Symbol.for("react.view_transition"),ge=Symbol.for("react.client.reference");function we(Ce){if(typeof Ce=="object"&&Ce!==null){var We=Ce.$$typeof;switch(We){case c:switch(Ce=Ce.type,Ce){case p:case P:case T:case te:case Y:case Te:return Ce;default:switch(Ce=Ce&&Ce.$$typeof,Ce){case M:case u:case he:case fe:return Ce;case D:return Ce;default:return We}}case m:return We}}}return Qi.ContextConsumer=D,Qi.ContextProvider=M,Qi.Element=c,Qi.ForwardRef=u,Qi.Fragment=p,Qi.Lazy=he,Qi.Memo=fe,Qi.Portal=m,Qi.Profiler=P,Qi.StrictMode=T,Qi.Suspense=te,Qi.SuspenseList=Y,Qi.isContextConsumer=function(Ce){return we(Ce)===D},Qi.isContextProvider=function(Ce){return we(Ce)===M},Qi.isElement=function(Ce){return typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===c},Qi.isForwardRef=function(Ce){return we(Ce)===u},Qi.isFragment=function(Ce){return we(Ce)===p},Qi.isLazy=function(Ce){return we(Ce)===he},Qi.isMemo=function(Ce){return we(Ce)===fe},Qi.isPortal=function(Ce){return we(Ce)===m},Qi.isProfiler=function(Ce){return we(Ce)===P},Qi.isStrictMode=function(Ce){return we(Ce)===T},Qi.isSuspense=function(Ce){return we(Ce)===te},Qi.isSuspenseList=function(Ce){return we(Ce)===Y},Qi.isValidElementType=function(Ce){return typeof Ce=="string"||typeof Ce=="function"||Ce===p||Ce===P||Ce===T||Ce===te||Ce===Y||typeof Ce=="object"&&Ce!==null&&(Ce.$$typeof===he||Ce.$$typeof===fe||Ce.$$typeof===M||Ce.$$typeof===D||Ce.$$typeof===u||Ce.$$typeof===ge||Ce.getModuleId!==void 0)},Qi.typeOf=we,Qi}var H0;function SE(){return H0||(H0=1,w_.exports=wE()),w_.exports}var ob=SE();function Pd(c){if(typeof c!="object"||c===null)return!1;const m=Object.getPrototypeOf(c);return(m===null||m===Object.prototype||Object.getPrototypeOf(m)===null)&&!(Symbol.toStringTag in c)&&!(Symbol.iterator in c)}function sb(c){if(Gt.isValidElement(c)||ob.isValidElementType(c)||!Pd(c))return c;const m={};return Object.keys(c).forEach(p=>{m[p]=sb(c[p])}),m}function Ac(c,m,p={clone:!0}){const T=p.clone?{...c}:c;return Pd(c)&&Pd(m)&&Object.keys(m).forEach(P=>{Gt.isValidElement(m[P])||ob.isValidElementType(m[P])?T[P]=m[P]:Pd(m[P])&&Object.prototype.hasOwnProperty.call(c,P)&&Pd(c[P])?T[P]=Ac(c[P],m[P],p):p.clone?T[P]=Pd(m[P])?sb(m[P]):m[P]:T[P]=m[P]}),T}function Km(c,m){return m?Ac(c,m,{clone:!1}):c}function TE(c,m){if(!c.containerQueries)return m;const p=Object.keys(m).filter(T=>T.startsWith("@container")).sort((T,P)=>{var M,u;const D=/min-width:\s*([0-9.]+)/;return+(((M=T.match(D))==null?void 0:M[1])||0)-+(((u=P.match(D))==null?void 0:u[1])||0)});return p.length?p.reduce((T,P)=>{const D=m[P];return delete T[P],T[P]=D,T},{...m}):m}function CE(c,m){return m==="@"||m.startsWith("@")&&(c.some(p=>m.startsWith(`@${p}`))||!!m.match(/^@\d/))}function PE(c,m){const p=m.match(/^@([^/]+)?\/?(.+)?$/);if(!p)return null;const[,T,P]=p,D=Number.isNaN(+T)?T||0:+T;return c.containerQueries(P).up(D)}function EE(c){const m=(D,M)=>D.replace("@media",M?`@container ${M}`:"@container");function p(D,M){D.up=(...u)=>m(c.breakpoints.up(...u),M),D.down=(...u)=>m(c.breakpoints.down(...u),M),D.between=(...u)=>m(c.breakpoints.between(...u),M),D.only=(...u)=>m(c.breakpoints.only(...u),M),D.not=(...u)=>{const te=m(c.breakpoints.not(...u),M);return te.includes("not all and")?te.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):te}}const T={},P=D=>(p(T,D),T);return p(P),{...c,containerQueries:P}}const xy={xs:0,sm:600,md:900,lg:1200,xl:1536},q0={keys:["xs","sm","md","lg","xl"],up:c=>`@media (min-width:${xy[c]}px)`},IE={containerQueries:c=>({up:m=>{let p=typeof m=="number"?m:xy[m]||m;return typeof p=="number"&&(p=`${p}px`),c?`@container ${c} (min-width:${p})`:`@container (min-width:${p})`}})};function af(c,m,p){const T=c.theme||{};if(Array.isArray(m)){const D=T.breakpoints||q0;return m.reduce((M,u,te)=>(M[D.up(D.keys[te])]=p(m[te]),M),{})}if(typeof m=="object"){const D=T.breakpoints||q0;return Object.keys(m).reduce((M,u)=>{if(CE(D.keys,u)){const te=PE(T.containerQueries?T:IE,u);te&&(M[te]=p(m[u],u))}else if(Object.keys(D.values||xy).includes(u)){const te=D.up(u);M[te]=p(m[u],u)}else{const te=u;M[te]=m[te]}return M},{})}return p(m)}function ME(c={}){var p;return((p=c.keys)==null?void 0:p.reduce((T,P)=>{const D=c.up(P);return T[D]={},T},{}))||{}}function kE(c,m){return c.reduce((p,T)=>{const P=p[T];return(!P||Object.keys(P).length===0)&&delete p[T],p},m)}function by(c,m,p=!0){if(!m||typeof m!="string")return null;if(c&&c.vars&&p){const T=`vars.${m}`.split(".").reduce((P,D)=>P&&P[D]?P[D]:null,c);if(T!=null)return T}return m.split(".").reduce((T,P)=>T&&T[P]!=null?T[P]:null,c)}function cy(c,m,p,T=p){let P;return typeof c=="function"?P=c(p):Array.isArray(c)?P=c[p]||T:P=by(c,p)||T,m&&(P=m(P,T,c)),P}function Ys(c){const{prop:m,cssProperty:p=c.prop,themeKey:T,transform:P}=c,D=M=>{if(M[m]==null)return null;const u=M[m],te=M.theme,Y=by(te,T)||{};return af(M,u,he=>{let Te=cy(Y,P,he);return he===Te&&typeof he=="string"&&(Te=cy(Y,P,`${m}${he==="default"?"":yi(he)}`,he)),p===!1?Te:{[p]:Te}})};return D.propTypes={},D.filterProps=[m],D}function AE(c){const m={};return p=>(m[p]===void 0&&(m[p]=c(p)),m[p])}const RE={m:"margin",p:"padding"},zE={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},K0={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},LE=AE(c=>{if(c.length>2)if(K0[c])c=K0[c];else return[c];const[m,p]=c.split(""),T=RE[m],P=zE[p]||"";return Array.isArray(P)?P.map(D=>T+D):[T+P]}),bv=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],wv=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...bv,...wv];function ug(c,m,p,T){const P=by(c,m,!0)??p;return typeof P=="number"||typeof P=="string"?D=>typeof D=="string"?D:typeof P=="string"?P.startsWith("var(")&&D===0?0:P.startsWith("var(")&&D===1?P:`calc(${D} * ${P})`:P*D:Array.isArray(P)?D=>{if(typeof D=="string")return D;const M=Math.abs(D),u=P[M];return D>=0?u:typeof u=="number"?-u:typeof u=="string"&&u.startsWith("var(")?`calc(-1 * ${u})`:`-${u}`}:typeof P=="function"?P:()=>{}}function Sv(c){return ug(c,"spacing",8)}function cg(c,m){return typeof m=="string"||m==null?m:c(m)}function DE(c,m){return p=>c.reduce((T,P)=>(T[P]=cg(m,p),T),{})}function OE(c,m,p,T){if(!m.includes(p))return null;const P=LE(p),D=DE(P,T),M=c[p];return af(c,M,D)}function ab(c,m){const p=Sv(c.theme);return Object.keys(c).map(T=>OE(c,m,T,p)).reduce(Km,{})}function Cs(c){return ab(c,bv)}Cs.propTypes={};Cs.filterProps=bv;function Ps(c){return ab(c,wv)}Ps.propTypes={};Ps.filterProps=wv;function wy(...c){const m=c.reduce((T,P)=>(P.filterProps.forEach(D=>{T[D]=P}),T),{}),p=T=>Object.keys(T).reduce((P,D)=>m[D]?Km(P,m[D](T)):P,{});return p.propTypes={},p.filterProps=c.reduce((T,P)=>T.concat(P.filterProps),[]),p}function ah(c){return typeof c!="number"?c:`${c}px solid`}function ch(c,m){return Ys({prop:c,themeKey:"borders",transform:m})}const FE=ch("border",ah),BE=ch("borderTop",ah),NE=ch("borderRight",ah),$E=ch("borderBottom",ah),jE=ch("borderLeft",ah),UE=ch("borderColor"),VE=ch("borderTopColor"),ZE=ch("borderRightColor"),GE=ch("borderBottomColor"),WE=ch("borderLeftColor"),HE=ch("outline",ah),qE=ch("outlineColor"),Sy=c=>{if(c.borderRadius!==void 0&&c.borderRadius!==null){const m=ug(c.theme,"shape.borderRadius",4),p=T=>({borderRadius:cg(m,T)});return af(c,c.borderRadius,p)}return null};Sy.propTypes={};Sy.filterProps=["borderRadius"];wy(FE,BE,NE,$E,jE,UE,VE,ZE,GE,WE,Sy,HE,qE);const Ty=c=>{if(c.gap!==void 0&&c.gap!==null){const m=ug(c.theme,"spacing",8),p=T=>({gap:cg(m,T)});return af(c,c.gap,p)}return null};Ty.propTypes={};Ty.filterProps=["gap"];const Cy=c=>{if(c.columnGap!==void 0&&c.columnGap!==null){const m=ug(c.theme,"spacing",8),p=T=>({columnGap:cg(m,T)});return af(c,c.columnGap,p)}return null};Cy.propTypes={};Cy.filterProps=["columnGap"];const Py=c=>{if(c.rowGap!==void 0&&c.rowGap!==null){const m=ug(c.theme,"spacing",8),p=T=>({rowGap:cg(m,T)});return af(c,c.rowGap,p)}return null};Py.propTypes={};Py.filterProps=["rowGap"];const KE=Ys({prop:"gridColumn"}),XE=Ys({prop:"gridRow"}),YE=Ys({prop:"gridAutoFlow"}),QE=Ys({prop:"gridAutoColumns"}),JE=Ys({prop:"gridAutoRows"}),eI=Ys({prop:"gridTemplateColumns"}),tI=Ys({prop:"gridTemplateRows"}),rI=Ys({prop:"gridTemplateAreas"}),nI=Ys({prop:"gridArea"});wy(Ty,Cy,Py,KE,XE,YE,QE,JE,eI,tI,rI,nI);function rm(c,m){return m==="grey"?m:c}const iI=Ys({prop:"color",themeKey:"palette",transform:rm}),oI=Ys({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:rm}),sI=Ys({prop:"backgroundColor",themeKey:"palette",transform:rm});wy(iI,oI,sI);function kc(c){return c<=1&&c!==0?`${c*100}%`:c}const aI=Ys({prop:"width",transform:kc}),Tv=c=>{if(c.maxWidth!==void 0&&c.maxWidth!==null){const m=p=>{var P,D,M,u,te;const T=((M=(D=(P=c.theme)==null?void 0:P.breakpoints)==null?void 0:D.values)==null?void 0:M[p])||xy[p];return T?((te=(u=c.theme)==null?void 0:u.breakpoints)==null?void 0:te.unit)!=="px"?{maxWidth:`${T}${c.theme.breakpoints.unit}`}:{maxWidth:T}:{maxWidth:kc(p)}};return af(c,c.maxWidth,m)}return null};Tv.filterProps=["maxWidth"];const lI=Ys({prop:"minWidth",transform:kc}),uI=Ys({prop:"height",transform:kc}),cI=Ys({prop:"maxHeight",transform:kc}),hI=Ys({prop:"minHeight",transform:kc});Ys({prop:"size",cssProperty:"width",transform:kc});Ys({prop:"size",cssProperty:"height",transform:kc});const dI=Ys({prop:"boxSizing"});wy(aI,Tv,lI,uI,cI,hI,dI);const hg={border:{themeKey:"borders",transform:ah},borderTop:{themeKey:"borders",transform:ah},borderRight:{themeKey:"borders",transform:ah},borderBottom:{themeKey:"borders",transform:ah},borderLeft:{themeKey:"borders",transform:ah},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:ah},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Sy},color:{themeKey:"palette",transform:rm},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:rm},backgroundColor:{themeKey:"palette",transform:rm},p:{style:Ps},pt:{style:Ps},pr:{style:Ps},pb:{style:Ps},pl:{style:Ps},px:{style:Ps},py:{style:Ps},padding:{style:Ps},paddingTop:{style:Ps},paddingRight:{style:Ps},paddingBottom:{style:Ps},paddingLeft:{style:Ps},paddingX:{style:Ps},paddingY:{style:Ps},paddingInline:{style:Ps},paddingInlineStart:{style:Ps},paddingInlineEnd:{style:Ps},paddingBlock:{style:Ps},paddingBlockStart:{style:Ps},paddingBlockEnd:{style:Ps},m:{style:Cs},mt:{style:Cs},mr:{style:Cs},mb:{style:Cs},ml:{style:Cs},mx:{style:Cs},my:{style:Cs},margin:{style:Cs},marginTop:{style:Cs},marginRight:{style:Cs},marginBottom:{style:Cs},marginLeft:{style:Cs},marginX:{style:Cs},marginY:{style:Cs},marginInline:{style:Cs},marginInlineStart:{style:Cs},marginInlineEnd:{style:Cs},marginBlock:{style:Cs},marginBlockStart:{style:Cs},marginBlockEnd:{style:Cs},displayPrint:{cssProperty:!1,transform:c=>({"@media print":{display:c}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Ty},rowGap:{style:Py},columnGap:{style:Cy},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:kc},maxWidth:{style:Tv},minWidth:{transform:kc},height:{transform:kc},maxHeight:{transform:kc},minHeight:{transform:kc},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function fI(...c){const m=c.reduce((T,P)=>T.concat(Object.keys(P)),[]),p=new Set(m);return c.every(T=>p.size===Object.keys(T).length)}function pI(c,m){return typeof c=="function"?c(m):c}function mI(){function c(p,T,P,D){const M={[p]:T,theme:P},u=D[p];if(!u)return{[p]:T};const{cssProperty:te=p,themeKey:Y,transform:fe,style:he}=u;if(T==null)return null;if(Y==="typography"&&T==="inherit")return{[p]:T};const Te=by(P,Y)||{};return he?he(M):af(M,T,we=>{let Ce=cy(Te,fe,we);return we===Ce&&typeof we=="string"&&(Ce=cy(Te,fe,`${p}${we==="default"?"":yi(we)}`,we)),te===!1?Ce:{[te]:Ce}})}function m(p){const{sx:T,theme:P={}}=p||{};if(!T)return null;const D=P.unstable_sxConfig??hg;function M(u){let te=u;if(typeof u=="function")te=u(P);else if(typeof u!="object")return u;if(!te)return null;const Y=ME(P.breakpoints),fe=Object.keys(Y);let he=Y;return Object.keys(te).forEach(Te=>{const ge=pI(te[Te],P);if(ge!=null)if(typeof ge=="object")if(D[Te])he=Km(he,c(Te,ge,P,D));else{const we=af({theme:P},ge,Ce=>({[Te]:Ce}));fI(we,ge)?he[Te]=m({sx:ge,theme:P}):he=Km(he,we)}else he=Km(he,c(Te,ge,P,D))}),TE(P,kE(fe,he))}return Array.isArray(T)?T.map(M):M(T)}return m}const om=mI();om.filterProps=["sx"];const gI=c=>{var T;const m={systemProps:{},otherProps:{}},p=((T=c==null?void 0:c.theme)==null?void 0:T.unstable_sxConfig)??hg;return Object.keys(c).forEach(P=>{p[P]?m.systemProps[P]=c[P]:m.otherProps[P]=c[P]}),m};function yI(c){const{sx:m,...p}=c,{systemProps:T,otherProps:P}=gI(p);let D;return Array.isArray(m)?D=[T,...m]:typeof m=="function"?D=(...M)=>{const u=m(...M);return Pd(u)?{...T,...u}:T}:D={...T,...m},{...P,sx:D}}function hy(){return hy=Object.assign?Object.assign.bind():function(c){for(var m=1;m<arguments.length;m++){var p=arguments[m];for(var T in p)({}).hasOwnProperty.call(p,T)&&(c[T]=p[T])}return c},hy.apply(null,arguments)}function _I(c){if(c.sheet)return c.sheet;for(var m=0;m<document.styleSheets.length;m++)if(document.styleSheets[m].ownerNode===c)return document.styleSheets[m]}function vI(c){var m=document.createElement("style");return m.setAttribute("data-emotion",c.key),c.nonce!==void 0&&m.setAttribute("nonce",c.nonce),m.appendChild(document.createTextNode("")),m.setAttribute("data-s",""),m}var xI=function(){function c(p){var T=this;this._insertTag=function(P){var D;T.tags.length===0?T.insertionPoint?D=T.insertionPoint.nextSibling:T.prepend?D=T.container.firstChild:D=T.before:D=T.tags[T.tags.length-1].nextSibling,T.container.insertBefore(P,D),T.tags.push(P)},this.isSpeedy=p.speedy===void 0?!0:p.speedy,this.tags=[],this.ctr=0,this.nonce=p.nonce,this.key=p.key,this.container=p.container,this.prepend=p.prepend,this.insertionPoint=p.insertionPoint,this.before=null}var m=c.prototype;return m.hydrate=function(T){T.forEach(this._insertTag)},m.insert=function(T){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(vI(this));var P=this.tags[this.tags.length-1];if(this.isSpeedy){var D=_I(P);try{D.insertRule(T,D.cssRules.length)}catch{}}else P.appendChild(document.createTextNode(T));this.ctr++},m.flush=function(){this.tags.forEach(function(T){var P;return(P=T.parentNode)==null?void 0:P.removeChild(T)}),this.tags=[],this.ctr=0},c}(),Kl="-ms-",dy="-moz-",Oi="-webkit-",lb="comm",Cv="rule",Pv="decl",bI="@import",ub="@keyframes",wI="@layer",SI=Math.abs,Ey=String.fromCharCode,TI=Object.assign;function CI(c,m){return Ml(c,0)^45?(((m<<2^Ml(c,0))<<2^Ml(c,1))<<2^Ml(c,2))<<2^Ml(c,3):0}function cb(c){return c.trim()}function PI(c,m){return(c=m.exec(c))?c[0]:c}function Fi(c,m,p){return c.replace(m,p)}function K_(c,m){return c.indexOf(m)}function Ml(c,m){return c.charCodeAt(m)|0}function Xm(c,m,p){return c.slice(m,p)}function Td(c){return c.length}function Ev(c){return c.length}function Gg(c,m){return m.push(c),c}function EI(c,m){return c.map(m).join("")}var Iy=1,sm=1,hb=0,Uu=0,ga=0,um="";function My(c,m,p,T,P,D,M){return{value:c,root:m,parent:p,type:T,props:P,children:D,line:Iy,column:sm,length:M,return:""}}function Nm(c,m){return TI(My("",null,null,"",null,null,0),c,{length:-c.length},m)}function II(){return ga}function MI(){return ga=Uu>0?Ml(um,--Uu):0,sm--,ga===10&&(sm=1,Iy--),ga}function Rc(){return ga=Uu<hb?Ml(um,Uu++):0,sm++,ga===10&&(sm=1,Iy++),ga}function Ed(){return Ml(um,Uu)}function ey(){return Uu}function dg(c,m){return Xm(um,c,m)}function Ym(c){switch(c){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function db(c){return Iy=sm=1,hb=Td(um=c),Uu=0,[]}function fb(c){return um="",c}function ty(c){return cb(dg(Uu-1,X_(c===91?c+2:c===40?c+1:c)))}function kI(c){for(;(ga=Ed())&&ga<33;)Rc();return Ym(c)>2||Ym(ga)>3?"":" "}function AI(c,m){for(;--m&&Rc()&&!(ga<48||ga>102||ga>57&&ga<65||ga>70&&ga<97););return dg(c,ey()+(m<6&&Ed()==32&&Rc()==32))}function X_(c){for(;Rc();)switch(ga){case c:return Uu;case 34:case 39:c!==34&&c!==39&&X_(ga);break;case 40:c===41&&X_(c);break;case 92:Rc();break}return Uu}function RI(c,m){for(;Rc()&&c+ga!==57;)if(c+ga===84&&Ed()===47)break;return"/*"+dg(m,Uu-1)+"*"+Ey(c===47?c:Rc())}function zI(c){for(;!Ym(Ed());)Rc();return dg(c,Uu)}function LI(c){return fb(ry("",null,null,null,[""],c=db(c),0,[0],c))}function ry(c,m,p,T,P,D,M,u,te){for(var Y=0,fe=0,he=M,Te=0,ge=0,we=0,Ce=1,We=1,gt=1,At=0,Ct="",et=P,Je=D,it=T,_t=Ct;We;)switch(we=At,At=Rc()){case 40:if(we!=108&&Ml(_t,he-1)==58){K_(_t+=Fi(ty(At),"&","&\f"),"&\f")!=-1&&(gt=-1);break}case 34:case 39:case 91:_t+=ty(At);break;case 9:case 10:case 13:case 32:_t+=kI(we);break;case 92:_t+=AI(ey()-1,7);continue;case 47:switch(Ed()){case 42:case 47:Gg(DI(RI(Rc(),ey()),m,p),te);break;default:_t+="/"}break;case 123*Ce:u[Y++]=Td(_t)*gt;case 125*Ce:case 59:case 0:switch(At){case 0:case 125:We=0;case 59+fe:gt==-1&&(_t=Fi(_t,/\f/g,"")),ge>0&&Td(_t)-he&&Gg(ge>32?Y0(_t+";",T,p,he-1):Y0(Fi(_t," ","")+";",T,p,he-2),te);break;case 59:_t+=";";default:if(Gg(it=X0(_t,m,p,Y,fe,P,u,Ct,et=[],Je=[],he),D),At===123)if(fe===0)ry(_t,m,it,it,et,D,he,u,Je);else switch(Te===99&&Ml(_t,3)===110?100:Te){case 100:case 108:case 109:case 115:ry(c,it,it,T&&Gg(X0(c,it,it,0,0,P,u,Ct,P,et=[],he),Je),P,Je,he,u,T?et:Je);break;default:ry(_t,it,it,it,[""],Je,0,u,Je)}}Y=fe=ge=0,Ce=gt=1,Ct=_t="",he=M;break;case 58:he=1+Td(_t),ge=we;default:if(Ce<1){if(At==123)--Ce;else if(At==125&&Ce++==0&&MI()==125)continue}switch(_t+=Ey(At),At*Ce){case 38:gt=fe>0?1:(_t+="\f",-1);break;case 44:u[Y++]=(Td(_t)-1)*gt,gt=1;break;case 64:Ed()===45&&(_t+=ty(Rc())),Te=Ed(),fe=he=Td(Ct=_t+=zI(ey())),At++;break;case 45:we===45&&Td(_t)==2&&(Ce=0)}}return D}function X0(c,m,p,T,P,D,M,u,te,Y,fe){for(var he=P-1,Te=P===0?D:[""],ge=Ev(Te),we=0,Ce=0,We=0;we<T;++we)for(var gt=0,At=Xm(c,he+1,he=SI(Ce=M[we])),Ct=c;gt<ge;++gt)(Ct=cb(Ce>0?Te[gt]+" "+At:Fi(At,/&\f/g,Te[gt])))&&(te[We++]=Ct);return My(c,m,p,P===0?Cv:u,te,Y,fe)}function DI(c,m,p){return My(c,m,p,lb,Ey(II()),Xm(c,2,-2),0)}function Y0(c,m,p,T){return My(c,m,p,Pv,Xm(c,0,T),Xm(c,T+1,-1),T)}function nm(c,m){for(var p="",T=Ev(c),P=0;P<T;P++)p+=m(c[P],P,c,m)||"";return p}function OI(c,m,p,T){switch(c.type){case wI:if(c.children.length)break;case bI:case Pv:return c.return=c.return||c.value;case lb:return"";case ub:return c.return=c.value+"{"+nm(c.children,T)+"}";case Cv:c.value=c.props.join(",")}return Td(p=nm(c.children,T))?c.return=c.value+"{"+p+"}":""}function FI(c){var m=Ev(c);return function(p,T,P,D){for(var M="",u=0;u<m;u++)M+=c[u](p,T,P,D)||"";return M}}function BI(c){return function(m){m.root||(m=m.return)&&c(m)}}function pb(c){var m=Object.create(null);return function(p){return m[p]===void 0&&(m[p]=c(p)),m[p]}}var NI=function(m,p,T){for(var P=0,D=0;P=D,D=Ed(),P===38&&D===12&&(p[T]=1),!Ym(D);)Rc();return dg(m,Uu)},$I=function(m,p){var T=-1,P=44;do switch(Ym(P)){case 0:P===38&&Ed()===12&&(p[T]=1),m[T]+=NI(Uu-1,p,T);break;case 2:m[T]+=ty(P);break;case 4:if(P===44){m[++T]=Ed()===58?"&\f":"",p[T]=m[T].length;break}default:m[T]+=Ey(P)}while(P=Rc());return m},jI=function(m,p){return fb($I(db(m),p))},Q0=new WeakMap,UI=function(m){if(!(m.type!=="rule"||!m.parent||m.length<1)){for(var p=m.value,T=m.parent,P=m.column===T.column&&m.line===T.line;T.type!=="rule";)if(T=T.parent,!T)return;if(!(m.props.length===1&&p.charCodeAt(0)!==58&&!Q0.get(T))&&!P){Q0.set(m,!0);for(var D=[],M=jI(p,D),u=T.props,te=0,Y=0;te<M.length;te++)for(var fe=0;fe<u.length;fe++,Y++)m.props[Y]=D[te]?M[te].replace(/&\f/g,u[fe]):u[fe]+" "+M[te]}}},VI=function(m){if(m.type==="decl"){var p=m.value;p.charCodeAt(0)===108&&p.charCodeAt(2)===98&&(m.return="",m.value="")}};function mb(c,m){switch(CI(c,m)){case 5103:return Oi+"print-"+c+c;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Oi+c+c;case 5349:case 4246:case 4810:case 6968:case 2756:return Oi+c+dy+c+Kl+c+c;case 6828:case 4268:return Oi+c+Kl+c+c;case 6165:return Oi+c+Kl+"flex-"+c+c;case 5187:return Oi+c+Fi(c,/(\w+).+(:[^]+)/,Oi+"box-$1$2"+Kl+"flex-$1$2")+c;case 5443:return Oi+c+Kl+"flex-item-"+Fi(c,/flex-|-self/,"")+c;case 4675:return Oi+c+Kl+"flex-line-pack"+Fi(c,/align-content|flex-|-self/,"")+c;case 5548:return Oi+c+Kl+Fi(c,"shrink","negative")+c;case 5292:return Oi+c+Kl+Fi(c,"basis","preferred-size")+c;case 6060:return Oi+"box-"+Fi(c,"-grow","")+Oi+c+Kl+Fi(c,"grow","positive")+c;case 4554:return Oi+Fi(c,/([^-])(transform)/g,"$1"+Oi+"$2")+c;case 6187:return Fi(Fi(Fi(c,/(zoom-|grab)/,Oi+"$1"),/(image-set)/,Oi+"$1"),c,"")+c;case 5495:case 3959:return Fi(c,/(image-set\([^]*)/,Oi+"$1$`$1");case 4968:return Fi(Fi(c,/(.+:)(flex-)?(.*)/,Oi+"box-pack:$3"+Kl+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Oi+c+c;case 4095:case 3583:case 4068:case 2532:return Fi(c,/(.+)-inline(.+)/,Oi+"$1$2")+c;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Td(c)-1-m>6)switch(Ml(c,m+1)){case 109:if(Ml(c,m+4)!==45)break;case 102:return Fi(c,/(.+:)(.+)-([^]+)/,"$1"+Oi+"$2-$3$1"+dy+(Ml(c,m+3)==108?"$3":"$2-$3"))+c;case 115:return~K_(c,"stretch")?mb(Fi(c,"stretch","fill-available"),m)+c:c}break;case 4949:if(Ml(c,m+1)!==115)break;case 6444:switch(Ml(c,Td(c)-3-(~K_(c,"!important")&&10))){case 107:return Fi(c,":",":"+Oi)+c;case 101:return Fi(c,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Oi+(Ml(c,14)===45?"inline-":"")+"box$3$1"+Oi+"$2$3$1"+Kl+"$2box$3")+c}break;case 5936:switch(Ml(c,m+11)){case 114:return Oi+c+Kl+Fi(c,/[svh]\w+-[tblr]{2}/,"tb")+c;case 108:return Oi+c+Kl+Fi(c,/[svh]\w+-[tblr]{2}/,"tb-rl")+c;case 45:return Oi+c+Kl+Fi(c,/[svh]\w+-[tblr]{2}/,"lr")+c}return Oi+c+Kl+c+c}return c}var ZI=function(m,p,T,P){if(m.length>-1&&!m.return)switch(m.type){case Pv:m.return=mb(m.value,m.length);break;case ub:return nm([Nm(m,{value:Fi(m.value,"@","@"+Oi)})],P);case Cv:if(m.length)return EI(m.props,function(D){switch(PI(D,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return nm([Nm(m,{props:[Fi(D,/:(read-\w+)/,":"+dy+"$1")]})],P);case"::placeholder":return nm([Nm(m,{props:[Fi(D,/:(plac\w+)/,":"+Oi+"input-$1")]}),Nm(m,{props:[Fi(D,/:(plac\w+)/,":"+dy+"$1")]}),Nm(m,{props:[Fi(D,/:(plac\w+)/,Kl+"input-$1")]})],P)}return""})}},GI=[ZI],WI=function(m){var p=m.key;if(p==="css"){var T=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(T,function(Ce){var We=Ce.getAttribute("data-emotion");We.indexOf(" ")!==-1&&(document.head.appendChild(Ce),Ce.setAttribute("data-s",""))})}var P=m.stylisPlugins||GI,D={},M,u=[];M=m.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+p+' "]'),function(Ce){for(var We=Ce.getAttribute("data-emotion").split(" "),gt=1;gt<We.length;gt++)D[We[gt]]=!0;u.push(Ce)});var te,Y=[UI,VI];{var fe,he=[OI,BI(function(Ce){fe.insert(Ce)})],Te=FI(Y.concat(P,he)),ge=function(We){return nm(LI(We),Te)};te=function(We,gt,At,Ct){fe=At,ge(We?We+"{"+gt.styles+"}":gt.styles),Ct&&(we.inserted[gt.name]=!0)}}var we={key:p,sheet:new xI({key:p,container:M,nonce:m.nonce,speedy:m.speedy,prepend:m.prepend,insertionPoint:m.insertionPoint}),nonce:m.nonce,inserted:D,registered:{},insert:te};return we.sheet.hydrate(u),we},S_={exports:{}},Vi={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J0;function HI(){if(J0)return Vi;J0=1;var c=typeof Symbol=="function"&&Symbol.for,m=c?Symbol.for("react.element"):60103,p=c?Symbol.for("react.portal"):60106,T=c?Symbol.for("react.fragment"):60107,P=c?Symbol.for("react.strict_mode"):60108,D=c?Symbol.for("react.profiler"):60114,M=c?Symbol.for("react.provider"):60109,u=c?Symbol.for("react.context"):60110,te=c?Symbol.for("react.async_mode"):60111,Y=c?Symbol.for("react.concurrent_mode"):60111,fe=c?Symbol.for("react.forward_ref"):60112,he=c?Symbol.for("react.suspense"):60113,Te=c?Symbol.for("react.suspense_list"):60120,ge=c?Symbol.for("react.memo"):60115,we=c?Symbol.for("react.lazy"):60116,Ce=c?Symbol.for("react.block"):60121,We=c?Symbol.for("react.fundamental"):60117,gt=c?Symbol.for("react.responder"):60118,At=c?Symbol.for("react.scope"):60119;function Ct(Je){if(typeof Je=="object"&&Je!==null){var it=Je.$$typeof;switch(it){case m:switch(Je=Je.type,Je){case te:case Y:case T:case D:case P:case he:return Je;default:switch(Je=Je&&Je.$$typeof,Je){case u:case fe:case we:case ge:case M:return Je;default:return it}}case p:return it}}}function et(Je){return Ct(Je)===Y}return Vi.AsyncMode=te,Vi.ConcurrentMode=Y,Vi.ContextConsumer=u,Vi.ContextProvider=M,Vi.Element=m,Vi.ForwardRef=fe,Vi.Fragment=T,Vi.Lazy=we,Vi.Memo=ge,Vi.Portal=p,Vi.Profiler=D,Vi.StrictMode=P,Vi.Suspense=he,Vi.isAsyncMode=function(Je){return et(Je)||Ct(Je)===te},Vi.isConcurrentMode=et,Vi.isContextConsumer=function(Je){return Ct(Je)===u},Vi.isContextProvider=function(Je){return Ct(Je)===M},Vi.isElement=function(Je){return typeof Je=="object"&&Je!==null&&Je.$$typeof===m},Vi.isForwardRef=function(Je){return Ct(Je)===fe},Vi.isFragment=function(Je){return Ct(Je)===T},Vi.isLazy=function(Je){return Ct(Je)===we},Vi.isMemo=function(Je){return Ct(Je)===ge},Vi.isPortal=function(Je){return Ct(Je)===p},Vi.isProfiler=function(Je){return Ct(Je)===D},Vi.isStrictMode=function(Je){return Ct(Je)===P},Vi.isSuspense=function(Je){return Ct(Je)===he},Vi.isValidElementType=function(Je){return typeof Je=="string"||typeof Je=="function"||Je===T||Je===Y||Je===D||Je===P||Je===he||Je===Te||typeof Je=="object"&&Je!==null&&(Je.$$typeof===we||Je.$$typeof===ge||Je.$$typeof===M||Je.$$typeof===u||Je.$$typeof===fe||Je.$$typeof===We||Je.$$typeof===gt||Je.$$typeof===At||Je.$$typeof===Ce)},Vi.typeOf=Ct,Vi}var ex;function qI(){return ex||(ex=1,S_.exports=HI()),S_.exports}var T_,tx;function KI(){if(tx)return T_;tx=1;var c=qI(),m={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},p={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},T={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},P={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},D={};D[c.ForwardRef]=T,D[c.Memo]=P;function M(we){return c.isMemo(we)?P:D[we.$$typeof]||m}var u=Object.defineProperty,te=Object.getOwnPropertyNames,Y=Object.getOwnPropertySymbols,fe=Object.getOwnPropertyDescriptor,he=Object.getPrototypeOf,Te=Object.prototype;function ge(we,Ce,We){if(typeof Ce!="string"){if(Te){var gt=he(Ce);gt&&gt!==Te&&ge(we,gt,We)}var At=te(Ce);Y&&(At=At.concat(Y(Ce)));for(var Ct=M(we),et=M(Ce),Je=0;Je<At.length;++Je){var it=At[Je];if(!p[it]&&!(We&&We[it])&&!(et&&et[it])&&!(Ct&&Ct[it])){var _t=fe(Ce,it);try{u(we,it,_t)}catch{}}}}return we}return T_=ge,T_}KI();var XI=!0;function gb(c,m,p){var T="";return p.split(" ").forEach(function(P){c[P]!==void 0?m.push(c[P]+";"):P&&(T+=P+" ")}),T}var Iv=function(m,p,T){var P=m.key+"-"+p.name;(T===!1||XI===!1)&&m.registered[P]===void 0&&(m.registered[P]=p.styles)},yb=function(m,p,T){Iv(m,p,T);var P=m.key+"-"+p.name;if(m.inserted[p.name]===void 0){var D=p;do m.insert(p===D?"."+P:"",D,m.sheet,!0),D=D.next;while(D!==void 0)}};function YI(c){for(var m=0,p,T=0,P=c.length;P>=4;++T,P-=4)p=c.charCodeAt(T)&255|(c.charCodeAt(++T)&255)<<8|(c.charCodeAt(++T)&255)<<16|(c.charCodeAt(++T)&255)<<24,p=(p&65535)*1540483477+((p>>>16)*59797<<16),p^=p>>>24,m=(p&65535)*1540483477+((p>>>16)*59797<<16)^(m&65535)*1540483477+((m>>>16)*59797<<16);switch(P){case 3:m^=(c.charCodeAt(T+2)&255)<<16;case 2:m^=(c.charCodeAt(T+1)&255)<<8;case 1:m^=c.charCodeAt(T)&255,m=(m&65535)*1540483477+((m>>>16)*59797<<16)}return m^=m>>>13,m=(m&65535)*1540483477+((m>>>16)*59797<<16),((m^m>>>15)>>>0).toString(36)}var QI={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},JI=/[A-Z]|^ms/g,eM=/_EMO_([^_]+?)_([^]*?)_EMO_/g,_b=function(m){return m.charCodeAt(1)===45},rx=function(m){return m!=null&&typeof m!="boolean"},C_=pb(function(c){return _b(c)?c:c.replace(JI,"-$&").toLowerCase()}),nx=function(m,p){switch(m){case"animation":case"animationName":if(typeof p=="string")return p.replace(eM,function(T,P,D){return Cd={name:P,styles:D,next:Cd},P})}return QI[m]!==1&&!_b(m)&&typeof p=="number"&&p!==0?p+"px":p};function Qm(c,m,p){if(p==null)return"";var T=p;if(T.__emotion_styles!==void 0)return T;switch(typeof p){case"boolean":return"";case"object":{var P=p;if(P.anim===1)return Cd={name:P.name,styles:P.styles,next:Cd},P.name;var D=p;if(D.styles!==void 0){var M=D.next;if(M!==void 0)for(;M!==void 0;)Cd={name:M.name,styles:M.styles,next:Cd},M=M.next;var u=D.styles+";";return u}return tM(c,m,p)}case"function":{if(c!==void 0){var te=Cd,Y=p(c);return Cd=te,Qm(c,m,Y)}break}}var fe=p;if(m==null)return fe;var he=m[fe];return he!==void 0?he:fe}function tM(c,m,p){var T="";if(Array.isArray(p))for(var P=0;P<p.length;P++)T+=Qm(c,m,p[P])+";";else for(var D in p){var M=p[D];if(typeof M!="object"){var u=M;m!=null&&m[u]!==void 0?T+=D+"{"+m[u]+"}":rx(u)&&(T+=C_(D)+":"+nx(D,u)+";")}else if(Array.isArray(M)&&typeof M[0]=="string"&&(m==null||m[M[0]]===void 0))for(var te=0;te<M.length;te++)rx(M[te])&&(T+=C_(D)+":"+nx(D,M[te])+";");else{var Y=Qm(c,m,M);switch(D){case"animation":case"animationName":{T+=C_(D)+":"+Y+";";break}default:T+=D+"{"+Y+"}"}}}return T}var ix=/label:\s*([^\s;{]+)\s*(;|$)/g,Cd;function ky(c,m,p){if(c.length===1&&typeof c[0]=="object"&&c[0]!==null&&c[0].styles!==void 0)return c[0];var T=!0,P="";Cd=void 0;var D=c[0];if(D==null||D.raw===void 0)T=!1,P+=Qm(p,m,D);else{var M=D;P+=M[0]}for(var u=1;u<c.length;u++)if(P+=Qm(p,m,c[u]),T){var te=D;P+=te[u]}ix.lastIndex=0;for(var Y="",fe;(fe=ix.exec(P))!==null;)Y+="-"+fe[1];var he=YI(P)+Y;return{name:he,styles:P,next:Cd}}var rM=function(m){return m()},nM=k_.useInsertionEffect?k_.useInsertionEffect:!1,vb=nM||rM,xb=Gt.createContext(typeof HTMLElement<"u"?WI({key:"css"}):null);xb.Provider;var bb=function(m){return Gt.forwardRef(function(p,T){var P=Gt.useContext(xb);return m(p,P,T)})},wb=Gt.createContext({}),Mv={}.hasOwnProperty,Y_="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",iM=function(m,p){var T={};for(var P in p)Mv.call(p,P)&&(T[P]=p[P]);return T[Y_]=m,T},oM=function(m){var p=m.cache,T=m.serialized,P=m.isStringTag;return Iv(p,T,P),vb(function(){return yb(p,T,P)}),null},sM=bb(function(c,m,p){var T=c.css;typeof T=="string"&&m.registered[T]!==void 0&&(T=m.registered[T]);var P=c[Y_],D=[T],M="";typeof c.className=="string"?M=gb(m.registered,D,c.className):c.className!=null&&(M=c.className+" ");var u=ky(D,void 0,Gt.useContext(wb));M+=m.key+"-"+u.name;var te={};for(var Y in c)Mv.call(c,Y)&&Y!=="css"&&Y!==Y_&&(te[Y]=c[Y]);return te.className=M,p&&(te.ref=p),Gt.createElement(Gt.Fragment,null,Gt.createElement(oM,{cache:m,serialized:u,isStringTag:typeof P=="string"}),Gt.createElement(P,te))}),aM=sM,ox=function(m,p){var T=arguments;if(p==null||!Mv.call(p,"css"))return Gt.createElement.apply(void 0,T);var P=T.length,D=new Array(P);D[0]=aM,D[1]=iM(m,p);for(var M=2;M<P;M++)D[M]=T[M];return Gt.createElement.apply(null,D)};(function(c){var m;m||(m=c.JSX||(c.JSX={}))})(ox||(ox={}));function kv(){for(var c=arguments.length,m=new Array(c),p=0;p<c;p++)m[p]=arguments[p];return ky(m)}function fg(){var c=kv.apply(void 0,arguments),m="animation-"+c.name;return{name:m,styles:"@keyframes "+m+"{"+c.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var lM=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,uM=pb(function(c){return lM.test(c)||c.charCodeAt(0)===111&&c.charCodeAt(1)===110&&c.charCodeAt(2)<91}),cM=uM,hM=function(m){return m!=="theme"},sx=function(m){return typeof m=="string"&&m.charCodeAt(0)>96?cM:hM},ax=function(m,p,T){var P;if(p){var D=p.shouldForwardProp;P=m.__emotion_forwardProp&&D?function(M){return m.__emotion_forwardProp(M)&&D(M)}:D}return typeof P!="function"&&T&&(P=m.__emotion_forwardProp),P},dM=function(m){var p=m.cache,T=m.serialized,P=m.isStringTag;return Iv(p,T,P),vb(function(){return yb(p,T,P)}),null},fM=function c(m,p){var T=m.__emotion_real===m,P=T&&m.__emotion_base||m,D,M;p!==void 0&&(D=p.label,M=p.target);var u=ax(m,p,T),te=u||sx(P),Y=!te("as");return function(){var fe=arguments,he=T&&m.__emotion_styles!==void 0?m.__emotion_styles.slice(0):[];if(D!==void 0&&he.push("label:"+D+";"),fe[0]==null||fe[0].raw===void 0)he.push.apply(he,fe);else{var Te=fe[0];he.push(Te[0]);for(var ge=fe.length,we=1;we<ge;we++)he.push(fe[we],Te[we])}var Ce=bb(function(We,gt,At){var Ct=Y&&We.as||P,et="",Je=[],it=We;if(We.theme==null){it={};for(var _t in We)it[_t]=We[_t];it.theme=Gt.useContext(wb)}typeof We.className=="string"?et=gb(gt.registered,Je,We.className):We.className!=null&&(et=We.className+" ");var Le=ky(he.concat(Je),gt.registered,it);et+=gt.key+"-"+Le.name,M!==void 0&&(et+=" "+M);var je=Y&&u===void 0?sx(Ct):te,ne={};for(var ot in We)Y&&ot==="as"||je(ot)&&(ne[ot]=We[ot]);return ne.className=et,At&&(ne.ref=At),Gt.createElement(Gt.Fragment,null,Gt.createElement(dM,{cache:gt,serialized:Le,isStringTag:typeof Ct=="string"}),Gt.createElement(Ct,ne))});return Ce.displayName=D!==void 0?D:"Styled("+(typeof P=="string"?P:P.displayName||P.name||"Component")+")",Ce.defaultProps=m.defaultProps,Ce.__emotion_real=Ce,Ce.__emotion_base=P,Ce.__emotion_styles=he,Ce.__emotion_forwardProp=u,Object.defineProperty(Ce,"toString",{value:function(){return"."+M}}),Ce.withComponent=function(We,gt){var At=c(We,hy({},p,gt,{shouldForwardProp:ax(Ce,gt,!0)}));return At.apply(void 0,he)},Ce}},pM=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Q_=fM.bind(null);pM.forEach(function(c){Q_[c]=Q_(c)});function mM(c,m){return Q_(c,m)}function gM(c,m){Array.isArray(c.__emotion_styles)&&(c.__emotion_styles=m(c.__emotion_styles))}const lx=[];function ux(c){return lx[0]=c,ky(lx)}const yM=c=>{const m=Object.keys(c).map(p=>({key:p,val:c[p]}))||[];return m.sort((p,T)=>p.val-T.val),m.reduce((p,T)=>({...p,[T.key]:T.val}),{})};function _M(c){const{values:m={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:p="px",step:T=5,...P}=c,D=yM(m),M=Object.keys(D);function u(Te){return`@media (min-width:${typeof m[Te]=="number"?m[Te]:Te}${p})`}function te(Te){return`@media (max-width:${(typeof m[Te]=="number"?m[Te]:Te)-T/100}${p})`}function Y(Te,ge){const we=M.indexOf(ge);return`@media (min-width:${typeof m[Te]=="number"?m[Te]:Te}${p}) and (max-width:${(we!==-1&&typeof m[M[we]]=="number"?m[M[we]]:ge)-T/100}${p})`}function fe(Te){return M.indexOf(Te)+1<M.length?Y(Te,M[M.indexOf(Te)+1]):u(Te)}function he(Te){const ge=M.indexOf(Te);return ge===0?u(M[1]):ge===M.length-1?te(M[ge]):Y(Te,M[M.indexOf(Te)+1]).replace("@media","@media not all and")}return{keys:M,values:D,up:u,down:te,between:Y,only:fe,not:he,unit:p,...P}}const vM={borderRadius:4};function Sb(c=8,m=Sv({spacing:c})){if(c.mui)return c;const p=(...T)=>(T.length===0?[1]:T).map(D=>{const M=m(D);return typeof M=="number"?`${M}px`:M}).join(" ");return p.mui=!0,p}function xM(c,m){var T;const p=this;if(p.vars){if(!((T=p.colorSchemes)!=null&&T[c])||typeof p.getColorSchemeSelector!="function")return{};let P=p.getColorSchemeSelector(c);return P==="&"?m:((P.includes("data-")||P.includes("."))&&(P=`*:where(${P.replace(/\s*&$/,"")}) &`),{[P]:m})}return p.palette.mode===c?m:{}}function Tb(c={},...m){const{breakpoints:p={},palette:T={},spacing:P,shape:D={},...M}=c,u=_M(p),te=Sb(P);let Y=Ac({breakpoints:u,direction:"ltr",components:{},palette:{mode:"light",...T},spacing:te,shape:{...vM,...D}},M);return Y=EE(Y),Y.applyStyles=xM,Y=m.reduce((fe,he)=>Ac(fe,he),Y),Y.unstable_sxConfig={...hg,...M==null?void 0:M.unstable_sxConfig},Y.unstable_sx=function(he){return om({sx:he,theme:this})},Y}const cx=c=>c,bM=()=>{let c=cx;return{configure(m){c=m},generate(m){return c(m)},reset(){c=cx}}},wM=bM(),SM={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Vu(c,m,p="Mui"){const T=SM[m];return T?`${p}-${T}`:`${wM.generate(c)}-${m}`}function kl(c,m,p="Mui"){const T={};return m.forEach(P=>{T[P]=Vu(c,P,p)}),T}function Cb(c){const{variants:m,...p}=c,T={variants:m,style:ux(p),isProcessed:!0};return T.style===p||m&&m.forEach(P=>{typeof P.style!="function"&&(P.style=ux(P.style))}),T}const TM=Tb();function P_(c){return c!=="ownerState"&&c!=="theme"&&c!=="sx"&&c!=="as"}function CM(c){return c?(m,p)=>p[c]:null}function PM(c,m,p){c.theme=MM(c.theme)?p:c.theme[m]||c.theme}function ny(c,m){const p=typeof m=="function"?m(c):m;if(Array.isArray(p))return p.flatMap(T=>ny(c,T));if(Array.isArray(p==null?void 0:p.variants)){let T;if(p.isProcessed)T=p.style;else{const{variants:P,...D}=p;T=D}return Pb(c,p.variants,[T])}return p!=null&&p.isProcessed?p.style:p}function Pb(c,m,p=[]){var P;let T;e:for(let D=0;D<m.length;D+=1){const M=m[D];if(typeof M.props=="function"){if(T??(T={...c,...c.ownerState,ownerState:c.ownerState}),!M.props(T))continue}else for(const u in M.props)if(c[u]!==M.props[u]&&((P=c.ownerState)==null?void 0:P[u])!==M.props[u])continue e;typeof M.style=="function"?(T??(T={...c,...c.ownerState,ownerState:c.ownerState}),p.push(M.style(T))):p.push(M.style)}return p}function EM(c={}){const{themeId:m,defaultTheme:p=TM,rootShouldForwardProp:T=P_,slotShouldForwardProp:P=P_}=c;function D(u){PM(u,m,p)}return(u,te={})=>{gM(u,Je=>Je.filter(it=>it!==om));const{name:Y,slot:fe,skipVariantsResolver:he,skipSx:Te,overridesResolver:ge=CM(AM(fe)),...we}=te,Ce=he!==void 0?he:fe&&fe!=="Root"&&fe!=="root"||!1,We=Te||!1;let gt=P_;fe==="Root"||fe==="root"?gt=T:fe?gt=P:kM(u)&&(gt=void 0);const At=mM(u,{shouldForwardProp:gt,label:IM(),...we}),Ct=Je=>{if(typeof Je=="function"&&Je.__emotion_real!==Je)return function(_t){return ny(_t,Je)};if(Pd(Je)){const it=Cb(Je);return it.variants?function(Le){return ny(Le,it)}:it.style}return Je},et=(...Je)=>{const it=[],_t=Je.map(Ct),Le=[];if(it.push(D),Y&&ge&&Le.push(function(at){var xr,sr;const rr=(sr=(xr=at.theme.components)==null?void 0:xr[Y])==null?void 0:sr.styleOverrides;if(!rr)return null;const Pr={};for(const bt in rr)Pr[bt]=ny(at,rr[bt]);return ge(at,Pr)}),Y&&!Ce&&Le.push(function(at){var Pr,xr;const Lt=at.theme,rr=(xr=(Pr=Lt==null?void 0:Lt.components)==null?void 0:Pr[Y])==null?void 0:xr.variants;return rr?Pb(at,rr):null}),We||Le.push(om),Array.isArray(_t[0])){const ot=_t.shift(),at=new Array(it.length).fill(""),Lt=new Array(Le.length).fill("");let rr;rr=[...at,...ot,...Lt],rr.raw=[...at,...ot.raw,...Lt],it.unshift(rr)}const je=[...it,..._t,...Le],ne=At(...je);return u.muiName&&(ne.muiName=u.muiName),ne};return At.withConfig&&(et.withConfig=At.withConfig),et}}function IM(c,m){return void 0}function MM(c){for(const m in c)return!1;return!0}function kM(c){return typeof c=="string"&&c.charCodeAt(0)>96}function AM(c){return c&&c.charAt(0).toLowerCase()+c.slice(1)}function fy(c,m){const p={...m};for(const T in c)if(Object.prototype.hasOwnProperty.call(c,T)){const P=T;if(P==="components"||P==="slots")p[P]={...c[P],...p[P]};else if(P==="componentsProps"||P==="slotProps"){const D=c[P],M=m[P];if(!M)p[P]=D||{};else if(!D)p[P]=M;else{p[P]={...M};for(const u in D)if(Object.prototype.hasOwnProperty.call(D,u)){const te=u;p[P][te]=fy(D[te],M[te])}}}else p[P]===void 0&&(p[P]=c[P])}return p}const Eb=typeof window<"u"?Gt.useLayoutEffect:Gt.useEffect;function RM(c,m=Number.MIN_SAFE_INTEGER,p=Number.MAX_SAFE_INTEGER){return Math.max(m,Math.min(c,p))}function Av(c,m=0,p=1){return RM(c,m,p)}function zM(c){c=c.slice(1);const m=new RegExp(`.{1,${c.length>=6?2:1}}`,"g");let p=c.match(m);return p&&p[0].length===1&&(p=p.map(T=>T+T)),p?`rgb${p.length===4?"a":""}(${p.map((T,P)=>P<3?parseInt(T,16):Math.round(parseInt(T,16)/255*1e3)/1e3).join(", ")})`:""}function Zf(c){if(c.type)return c;if(c.charAt(0)==="#")return Zf(zM(c));const m=c.indexOf("("),p=c.substring(0,m);if(!["rgb","rgba","hsl","hsla","color"].includes(p))throw new Error(Sp(9,c));let T=c.substring(m+1,c.length-1),P;if(p==="color"){if(T=T.split(" "),P=T.shift(),T.length===4&&T[3].charAt(0)==="/"&&(T[3]=T[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(P))throw new Error(Sp(10,P))}else T=T.split(",");return T=T.map(D=>parseFloat(D)),{type:p,values:T,colorSpace:P}}const LM=c=>{const m=Zf(c);return m.values.slice(0,3).map((p,T)=>m.type.includes("hsl")&&T!==0?`${p}%`:p).join(" ")},Vm=(c,m)=>{try{return LM(c)}catch{return c}};function Ay(c){const{type:m,colorSpace:p}=c;let{values:T}=c;return m.includes("rgb")?T=T.map((P,D)=>D<3?parseInt(P,10):P):m.includes("hsl")&&(T[1]=`${T[1]}%`,T[2]=`${T[2]}%`),m.includes("color")?T=`${p} ${T.join(" ")}`:T=`${T.join(", ")}`,`${m}(${T})`}function Ib(c){c=Zf(c);const{values:m}=c,p=m[0],T=m[1]/100,P=m[2]/100,D=T*Math.min(P,1-P),M=(Y,fe=(Y+p/30)%12)=>P-D*Math.max(Math.min(fe-3,9-fe,1),-1);let u="rgb";const te=[Math.round(M(0)*255),Math.round(M(8)*255),Math.round(M(4)*255)];return c.type==="hsla"&&(u+="a",te.push(m[3])),Ay({type:u,values:te})}function J_(c){c=Zf(c);let m=c.type==="hsl"||c.type==="hsla"?Zf(Ib(c)).values:c.values;return m=m.map(p=>(c.type!=="color"&&(p/=255),p<=.03928?p/12.92:((p+.055)/1.055)**2.4)),Number((.2126*m[0]+.7152*m[1]+.0722*m[2]).toFixed(3))}function DM(c,m){const p=J_(c),T=J_(m);return(Math.max(p,T)+.05)/(Math.min(p,T)+.05)}function lh(c,m){return c=Zf(c),m=Av(m),(c.type==="rgb"||c.type==="hsl")&&(c.type+="a"),c.type==="color"?c.values[3]=`/${m}`:c.values[3]=m,Ay(c)}function Wg(c,m,p){try{return lh(c,m)}catch{return c}}function Rv(c,m){if(c=Zf(c),m=Av(m),c.type.includes("hsl"))c.values[2]*=1-m;else if(c.type.includes("rgb")||c.type.includes("color"))for(let p=0;p<3;p+=1)c.values[p]*=1-m;return Ay(c)}function po(c,m,p){try{return Rv(c,m)}catch{return c}}function zv(c,m){if(c=Zf(c),m=Av(m),c.type.includes("hsl"))c.values[2]+=(100-c.values[2])*m;else if(c.type.includes("rgb"))for(let p=0;p<3;p+=1)c.values[p]+=(255-c.values[p])*m;else if(c.type.includes("color"))for(let p=0;p<3;p+=1)c.values[p]+=(1-c.values[p])*m;return Ay(c)}function mo(c,m,p){try{return zv(c,m)}catch{return c}}function OM(c,m=.15){return J_(c)>.5?Rv(c,m):zv(c,m)}function Hg(c,m,p){try{return OM(c,m)}catch{return c}}const FM=Gt.createContext(void 0);function BM(c){const{theme:m,name:p,props:T}=c;if(!m||!m.components||!m.components[p])return T;const P=m.components[p];return P.defaultProps?fy(P.defaultProps,T):!P.styleOverrides&&!P.variants?fy(P,T):T}function NM({props:c,name:m}){const p=Gt.useContext(FM);return BM({props:c,name:m,theme:{components:p}})}const hx={theme:void 0};function $M(c){let m,p;return function(P){let D=m;return(D===void 0||P.theme!==p)&&(hx.theme=P.theme,D=Cb(c(hx)),m=D,p=P.theme),D}}function jM(c=""){function m(...T){if(!T.length)return"";const P=T[0];return typeof P=="string"&&!P.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${c?`${c}-`:""}${P}${m(...T.slice(1))})`:`, ${P}`}return(T,...P)=>`var(--${c?`${c}-`:""}${T}${m(...P)})`}const dx=(c,m,p,T=[])=>{let P=c;m.forEach((D,M)=>{M===m.length-1?Array.isArray(P)?P[Number(D)]=p:P&&typeof P=="object"&&(P[D]=p):P&&typeof P=="object"&&(P[D]||(P[D]=T.includes(D)?[]:{}),P=P[D])})},UM=(c,m,p)=>{function T(P,D=[],M=[]){Object.entries(P).forEach(([u,te])=>{(!p||p&&!p([...D,u]))&&te!=null&&(typeof te=="object"&&Object.keys(te).length>0?T(te,[...D,u],Array.isArray(te)?[...M,u]:M):m([...D,u],te,M))})}T(c)},VM=(c,m)=>typeof m=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(T=>c.includes(T))||c[c.length-1].toLowerCase().includes("opacity")?m:`${m}px`:m;function E_(c,m){const{prefix:p,shouldSkipGeneratingVar:T}=m||{},P={},D={},M={};return UM(c,(u,te,Y)=>{if((typeof te=="string"||typeof te=="number")&&(!T||!T(u,te))){const fe=`--${p?`${p}-`:""}${u.join("-")}`,he=VM(u,te);Object.assign(P,{[fe]:he}),dx(D,u,`var(${fe})`,Y),dx(M,u,`var(${fe}, ${he})`,Y)}},u=>u[0]==="vars"),{css:P,vars:D,varsWithDefaults:M}}function ZM(c,m={}){const{getSelector:p=We,disableCssColorScheme:T,colorSchemeSelector:P}=m,{colorSchemes:D={},components:M,defaultColorScheme:u="light",...te}=c,{vars:Y,css:fe,varsWithDefaults:he}=E_(te,m);let Te=he;const ge={},{[u]:we,...Ce}=D;if(Object.entries(Ce||{}).forEach(([Ct,et])=>{const{vars:Je,css:it,varsWithDefaults:_t}=E_(et,m);Te=Ac(Te,_t),ge[Ct]={css:it,vars:Je}}),we){const{css:Ct,vars:et,varsWithDefaults:Je}=E_(we,m);Te=Ac(Te,Je),ge[u]={css:Ct,vars:et}}function We(Ct,et){var it,_t;let Je=P;if(P==="class"&&(Je=".%s"),P==="data"&&(Je="[data-%s]"),P!=null&&P.startsWith("data-")&&!P.includes("%s")&&(Je=`[${P}="%s"]`),Ct){if(Je==="media")return c.defaultColorScheme===Ct?":root":{[`@media (prefers-color-scheme: ${((_t=(it=D[Ct])==null?void 0:it.palette)==null?void 0:_t.mode)||Ct})`]:{":root":et}};if(Je)return c.defaultColorScheme===Ct?`:root, ${Je.replace("%s",String(Ct))}`:Je.replace("%s",String(Ct))}return":root"}return{vars:Te,generateThemeVars:()=>{let Ct={...Y};return Object.entries(ge).forEach(([,{vars:et}])=>{Ct=Ac(Ct,et)}),Ct},generateStyleSheets:()=>{var Le,je;const Ct=[],et=c.defaultColorScheme||"light";function Je(ne,ot){Object.keys(ot).length&&Ct.push(typeof ne=="string"?{[ne]:{...ot}}:ne)}Je(p(void 0,{...fe}),fe);const{[et]:it,..._t}=ge;if(it){const{css:ne}=it,ot=(je=(Le=D[et])==null?void 0:Le.palette)==null?void 0:je.mode,at=!T&&ot?{colorScheme:ot,...ne}:{...ne};Je(p(et,{...at}),at)}return Object.entries(_t).forEach(([ne,{css:ot}])=>{var rr,Pr;const at=(Pr=(rr=D[ne])==null?void 0:rr.palette)==null?void 0:Pr.mode,Lt=!T&&at?{colorScheme:at,...ot}:{...ot};Je(p(ne,{...Lt}),Lt)}),Ct}}}function GM(c){return function(p){return c==="media"?`@media (prefers-color-scheme: ${p})`:c?c.startsWith("data-")&&!c.includes("%s")?`[${c}="${p}"] &`:c==="class"?`.${p} &`:c==="data"?`[data-${p}] &`:`${c.replace("%s",p)} &`:"&"}}function I_(c,m){var p,T,P;return Gt.isValidElement(c)&&m.indexOf(c.type.muiName??((P=(T=(p=c.type)==null?void 0:p._payload)==null?void 0:T.value)==null?void 0:P.muiName))!==-1}const Jm={black:"#000",white:"#fff"},WM={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Kp={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},Xp={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},$m={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},Yp={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},Qp={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},Jp={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function Mb(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Jm.white,default:Jm.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const HM=Mb();function kb(){return{text:{primary:Jm.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Jm.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const fx=kb();function px(c,m,p,T){const P=T.light||T,D=T.dark||T*1.5;c[m]||(c.hasOwnProperty(p)?c[m]=c[p]:m==="light"?c.light=zv(c.main,P):m==="dark"&&(c.dark=Rv(c.main,D)))}function qM(c="light"){return c==="dark"?{main:Yp[200],light:Yp[50],dark:Yp[400]}:{main:Yp[700],light:Yp[400],dark:Yp[800]}}function KM(c="light"){return c==="dark"?{main:Kp[200],light:Kp[50],dark:Kp[400]}:{main:Kp[500],light:Kp[300],dark:Kp[700]}}function XM(c="light"){return c==="dark"?{main:Xp[500],light:Xp[300],dark:Xp[700]}:{main:Xp[700],light:Xp[400],dark:Xp[800]}}function YM(c="light"){return c==="dark"?{main:Qp[400],light:Qp[300],dark:Qp[700]}:{main:Qp[700],light:Qp[500],dark:Qp[900]}}function QM(c="light"){return c==="dark"?{main:Jp[400],light:Jp[300],dark:Jp[700]}:{main:Jp[800],light:Jp[500],dark:Jp[900]}}function JM(c="light"){return c==="dark"?{main:$m[400],light:$m[300],dark:$m[700]}:{main:"#ed6c02",light:$m[500],dark:$m[900]}}function Lv(c){const{mode:m="light",contrastThreshold:p=3,tonalOffset:T=.2,...P}=c,D=c.primary||qM(m),M=c.secondary||KM(m),u=c.error||XM(m),te=c.info||YM(m),Y=c.success||QM(m),fe=c.warning||JM(m);function he(Ce){return DM(Ce,fx.text.primary)>=p?fx.text.primary:HM.text.primary}const Te=({color:Ce,name:We,mainShade:gt=500,lightShade:At=300,darkShade:Ct=700})=>{if(Ce={...Ce},!Ce.main&&Ce[gt]&&(Ce.main=Ce[gt]),!Ce.hasOwnProperty("main"))throw new Error(Sp(11,We?` (${We})`:"",gt));if(typeof Ce.main!="string")throw new Error(Sp(12,We?` (${We})`:"",JSON.stringify(Ce.main)));return px(Ce,"light",At,T),px(Ce,"dark",Ct,T),Ce.contrastText||(Ce.contrastText=he(Ce.main)),Ce};let ge;return m==="light"?ge=Mb():m==="dark"&&(ge=kb()),Ac({common:{...Jm},mode:m,primary:Te({color:D,name:"primary"}),secondary:Te({color:M,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:Te({color:u,name:"error"}),warning:Te({color:fe,name:"warning"}),info:Te({color:te,name:"info"}),success:Te({color:Y,name:"success"}),grey:WM,contrastThreshold:p,getContrastText:he,augmentColor:Te,tonalOffset:T,...ge},P)}function ek(c){const m={};return Object.entries(c).forEach(T=>{const[P,D]=T;typeof D=="object"&&(m[P]=`${D.fontStyle?`${D.fontStyle} `:""}${D.fontVariant?`${D.fontVariant} `:""}${D.fontWeight?`${D.fontWeight} `:""}${D.fontStretch?`${D.fontStretch} `:""}${D.fontSize||""}${D.lineHeight?`/${D.lineHeight} `:""}${D.fontFamily||""}`)}),m}function tk(c,m){return{toolbar:{minHeight:56,[c.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[c.up("sm")]:{minHeight:64}},...m}}function rk(c){return Math.round(c*1e5)/1e5}const mx={textTransform:"uppercase"},gx='"Roboto", "Helvetica", "Arial", sans-serif';function nk(c,m){const{fontFamily:p=gx,fontSize:T=14,fontWeightLight:P=300,fontWeightRegular:D=400,fontWeightMedium:M=500,fontWeightBold:u=700,htmlFontSize:te=16,allVariants:Y,pxToRem:fe,...he}=typeof m=="function"?m(c):m,Te=T/14,ge=fe||(We=>`${We/te*Te}rem`),we=(We,gt,At,Ct,et)=>({fontFamily:p,fontWeight:We,fontSize:ge(gt),lineHeight:At,...p===gx?{letterSpacing:`${rk(Ct/gt)}em`}:{},...et,...Y}),Ce={h1:we(P,96,1.167,-1.5),h2:we(P,60,1.2,-.5),h3:we(D,48,1.167,0),h4:we(D,34,1.235,.25),h5:we(D,24,1.334,0),h6:we(M,20,1.6,.15),subtitle1:we(D,16,1.75,.15),subtitle2:we(M,14,1.57,.1),body1:we(D,16,1.5,.15),body2:we(D,14,1.43,.15),button:we(M,14,1.75,.4,mx),caption:we(D,12,1.66,.4),overline:we(D,12,2.66,1,mx),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Ac({htmlFontSize:te,pxToRem:ge,fontFamily:p,fontSize:T,fontWeightLight:P,fontWeightRegular:D,fontWeightMedium:M,fontWeightBold:u,...Ce},he,{clone:!1})}const ik=.2,ok=.14,sk=.12;function Zo(...c){return[`${c[0]}px ${c[1]}px ${c[2]}px ${c[3]}px rgba(0,0,0,${ik})`,`${c[4]}px ${c[5]}px ${c[6]}px ${c[7]}px rgba(0,0,0,${ok})`,`${c[8]}px ${c[9]}px ${c[10]}px ${c[11]}px rgba(0,0,0,${sk})`].join(",")}const ak=["none",Zo(0,2,1,-1,0,1,1,0,0,1,3,0),Zo(0,3,1,-2,0,2,2,0,0,1,5,0),Zo(0,3,3,-2,0,3,4,0,0,1,8,0),Zo(0,2,4,-1,0,4,5,0,0,1,10,0),Zo(0,3,5,-1,0,5,8,0,0,1,14,0),Zo(0,3,5,-1,0,6,10,0,0,1,18,0),Zo(0,4,5,-2,0,7,10,1,0,2,16,1),Zo(0,5,5,-3,0,8,10,1,0,3,14,2),Zo(0,5,6,-3,0,9,12,1,0,3,16,2),Zo(0,6,6,-3,0,10,14,1,0,4,18,3),Zo(0,6,7,-4,0,11,15,1,0,4,20,3),Zo(0,7,8,-4,0,12,17,2,0,5,22,4),Zo(0,7,8,-4,0,13,19,2,0,5,24,4),Zo(0,7,9,-4,0,14,21,2,0,5,26,4),Zo(0,8,9,-5,0,15,22,2,0,6,28,5),Zo(0,8,10,-5,0,16,24,2,0,6,30,5),Zo(0,8,11,-5,0,17,26,2,0,6,32,5),Zo(0,9,11,-5,0,18,28,2,0,7,34,6),Zo(0,9,12,-6,0,19,29,2,0,7,36,6),Zo(0,10,13,-6,0,20,31,3,0,8,38,7),Zo(0,10,13,-6,0,21,33,3,0,8,40,7),Zo(0,10,14,-6,0,22,35,3,0,8,42,7),Zo(0,11,14,-7,0,23,36,3,0,9,44,8),Zo(0,11,15,-7,0,24,38,3,0,9,46,8)],lk={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},uk={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function yx(c){return`${Math.round(c)}ms`}function ck(c){if(!c)return 0;const m=c/36;return Math.min(Math.round((4+15*m**.25+m/5)*10),3e3)}function hk(c){const m={...lk,...c.easing},p={...uk,...c.duration};return{getAutoHeightDuration:ck,create:(P=["all"],D={})=>{const{duration:M=p.standard,easing:u=m.easeInOut,delay:te=0,...Y}=D;return(Array.isArray(P)?P:[P]).map(fe=>`${fe} ${typeof M=="string"?M:yx(M)} ${u} ${typeof te=="string"?te:yx(te)}`).join(",")},...c,easing:m,duration:p}}const dk={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function fk(c){return Pd(c)||typeof c>"u"||typeof c=="string"||typeof c=="boolean"||typeof c=="number"||Array.isArray(c)}function Ab(c={}){const m={...c};function p(T){const P=Object.entries(T);for(let D=0;D<P.length;D++){const[M,u]=P[D];!fk(u)||M.startsWith("unstable_")?delete T[M]:Pd(u)&&(T[M]={...u},p(T[M]))}}return p(m),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(m,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function ev(c={},...m){const{breakpoints:p,mixins:T={},spacing:P,palette:D={},transitions:M={},typography:u={},shape:te,...Y}=c;if(c.vars&&c.generateThemeVars===void 0)throw new Error(Sp(20));const fe=Lv(D),he=Tb(c);let Te=Ac(he,{mixins:tk(he.breakpoints,T),palette:fe,shadows:ak.slice(),typography:nk(fe,u),transitions:hk(M),zIndex:{...dk}});return Te=Ac(Te,Y),Te=m.reduce((ge,we)=>Ac(ge,we),Te),Te.unstable_sxConfig={...hg,...Y==null?void 0:Y.unstable_sxConfig},Te.unstable_sx=function(we){return om({sx:we,theme:this})},Te.toRuntimeSource=Ab,Te}function pk(c){let m;return c<1?m=5.11916*c**2:m=4.5*Math.log(c+1)+2,Math.round(m*10)/1e3}const mk=[...Array(25)].map((c,m)=>{if(m===0)return"none";const p=pk(m);return`linear-gradient(rgba(255 255 255 / ${p}), rgba(255 255 255 / ${p}))`});function Rb(c){return{inputPlaceholder:c==="dark"?.5:.42,inputUnderline:c==="dark"?.7:.42,switchTrackDisabled:c==="dark"?.2:.12,switchTrack:c==="dark"?.3:.38}}function zb(c){return c==="dark"?mk:[]}function gk(c){const{palette:m={mode:"light"},opacity:p,overlays:T,...P}=c,D=Lv(m);return{palette:D,opacity:{...Rb(D.mode),...p},overlays:T||zb(D.mode),...P}}function yk(c){var m;return!!c[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!c[0].match(/sxConfig$/)||c[0]==="palette"&&!!((m=c[1])!=null&&m.match(/(mode|contrastThreshold|tonalOffset)/))}const _k=c=>[...[...Array(25)].map((m,p)=>`--${c?`${c}-`:""}overlays-${p}`),`--${c?`${c}-`:""}palette-AppBar-darkBg`,`--${c?`${c}-`:""}palette-AppBar-darkColor`],vk=c=>(m,p)=>{const T=c.rootSelector||":root",P=c.colorSchemeSelector;let D=P;if(P==="class"&&(D=".%s"),P==="data"&&(D="[data-%s]"),P!=null&&P.startsWith("data-")&&!P.includes("%s")&&(D=`[${P}="%s"]`),c.defaultColorScheme===m){if(m==="dark"){const M={};return _k(c.cssVarPrefix).forEach(u=>{M[u]=p[u],delete p[u]}),D==="media"?{[T]:p,"@media (prefers-color-scheme: dark)":{[T]:M}}:D?{[D.replace("%s",m)]:M,[`${T}, ${D.replace("%s",m)}`]:p}:{[T]:{...p,...M}}}if(D&&D!=="media")return`${T}, ${D.replace("%s",String(m))}`}else if(m){if(D==="media")return{[`@media (prefers-color-scheme: ${String(m)})`]:{[T]:p}};if(D)return D.replace("%s",String(m))}return T};function xk(c,m){m.forEach(p=>{c[p]||(c[p]={})})}function jt(c,m,p){!c[m]&&p&&(c[m]=p)}function Zm(c){return typeof c!="string"||!c.startsWith("hsl")?c:Ib(c)}function of(c,m){`${m}Channel`in c||(c[`${m}Channel`]=Vm(Zm(c[m])))}function bk(c){return typeof c=="number"?`${c}px`:typeof c=="string"||typeof c=="function"||Array.isArray(c)?c:"8px"}const Sd=c=>{try{return c()}catch{}},wk=(c="mui")=>jM(c);function M_(c,m,p,T){if(!m)return;m=m===!0?{}:m;const P=T==="dark"?"dark":"light";if(!p){c[T]=gk({...m,palette:{mode:P,...m==null?void 0:m.palette}});return}const{palette:D,...M}=ev({...p,palette:{mode:P,...m==null?void 0:m.palette}});return c[T]={...m,palette:D,opacity:{...Rb(P),...m==null?void 0:m.opacity},overlays:(m==null?void 0:m.overlays)||zb(P)},M}function Sk(c={},...m){const{colorSchemes:p={light:!0},defaultColorScheme:T,disableCssColorScheme:P=!1,cssVarPrefix:D="mui",shouldSkipGeneratingVar:M=yk,colorSchemeSelector:u=p.light&&p.dark?"media":void 0,rootSelector:te=":root",...Y}=c,fe=Object.keys(p)[0],he=T||(p.light&&fe!=="light"?"light":fe),Te=wk(D),{[he]:ge,light:we,dark:Ce,...We}=p,gt={...We};let At=ge;if((he==="dark"&&!("dark"in p)||he==="light"&&!("light"in p))&&(At=!0),!At)throw new Error(Sp(21,he));const Ct=M_(gt,At,Y,he);we&&!gt.light&&M_(gt,we,void 0,"light"),Ce&&!gt.dark&&M_(gt,Ce,void 0,"dark");let et={defaultColorScheme:he,...Ct,cssVarPrefix:D,colorSchemeSelector:u,rootSelector:te,getCssVar:Te,colorSchemes:gt,font:{...ek(Ct.typography),...Ct.font},spacing:bk(Y.spacing)};Object.keys(et.colorSchemes).forEach(je=>{const ne=et.colorSchemes[je].palette,ot=at=>{const Lt=at.split("-"),rr=Lt[1],Pr=Lt[2];return Te(at,ne[rr][Pr])};if(ne.mode==="light"&&(jt(ne.common,"background","#fff"),jt(ne.common,"onBackground","#000")),ne.mode==="dark"&&(jt(ne.common,"background","#000"),jt(ne.common,"onBackground","#fff")),xk(ne,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),ne.mode==="light"){jt(ne.Alert,"errorColor",po(ne.error.light,.6)),jt(ne.Alert,"infoColor",po(ne.info.light,.6)),jt(ne.Alert,"successColor",po(ne.success.light,.6)),jt(ne.Alert,"warningColor",po(ne.warning.light,.6)),jt(ne.Alert,"errorFilledBg",ot("palette-error-main")),jt(ne.Alert,"infoFilledBg",ot("palette-info-main")),jt(ne.Alert,"successFilledBg",ot("palette-success-main")),jt(ne.Alert,"warningFilledBg",ot("palette-warning-main")),jt(ne.Alert,"errorFilledColor",Sd(()=>ne.getContrastText(ne.error.main))),jt(ne.Alert,"infoFilledColor",Sd(()=>ne.getContrastText(ne.info.main))),jt(ne.Alert,"successFilledColor",Sd(()=>ne.getContrastText(ne.success.main))),jt(ne.Alert,"warningFilledColor",Sd(()=>ne.getContrastText(ne.warning.main))),jt(ne.Alert,"errorStandardBg",mo(ne.error.light,.9)),jt(ne.Alert,"infoStandardBg",mo(ne.info.light,.9)),jt(ne.Alert,"successStandardBg",mo(ne.success.light,.9)),jt(ne.Alert,"warningStandardBg",mo(ne.warning.light,.9)),jt(ne.Alert,"errorIconColor",ot("palette-error-main")),jt(ne.Alert,"infoIconColor",ot("palette-info-main")),jt(ne.Alert,"successIconColor",ot("palette-success-main")),jt(ne.Alert,"warningIconColor",ot("palette-warning-main")),jt(ne.AppBar,"defaultBg",ot("palette-grey-100")),jt(ne.Avatar,"defaultBg",ot("palette-grey-400")),jt(ne.Button,"inheritContainedBg",ot("palette-grey-300")),jt(ne.Button,"inheritContainedHoverBg",ot("palette-grey-A100")),jt(ne.Chip,"defaultBorder",ot("palette-grey-400")),jt(ne.Chip,"defaultAvatarColor",ot("palette-grey-700")),jt(ne.Chip,"defaultIconColor",ot("palette-grey-700")),jt(ne.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),jt(ne.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),jt(ne.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),jt(ne.LinearProgress,"primaryBg",mo(ne.primary.main,.62)),jt(ne.LinearProgress,"secondaryBg",mo(ne.secondary.main,.62)),jt(ne.LinearProgress,"errorBg",mo(ne.error.main,.62)),jt(ne.LinearProgress,"infoBg",mo(ne.info.main,.62)),jt(ne.LinearProgress,"successBg",mo(ne.success.main,.62)),jt(ne.LinearProgress,"warningBg",mo(ne.warning.main,.62)),jt(ne.Skeleton,"bg",`rgba(${ot("palette-text-primaryChannel")} / 0.11)`),jt(ne.Slider,"primaryTrack",mo(ne.primary.main,.62)),jt(ne.Slider,"secondaryTrack",mo(ne.secondary.main,.62)),jt(ne.Slider,"errorTrack",mo(ne.error.main,.62)),jt(ne.Slider,"infoTrack",mo(ne.info.main,.62)),jt(ne.Slider,"successTrack",mo(ne.success.main,.62)),jt(ne.Slider,"warningTrack",mo(ne.warning.main,.62));const at=Hg(ne.background.default,.8);jt(ne.SnackbarContent,"bg",at),jt(ne.SnackbarContent,"color",Sd(()=>ne.getContrastText(at))),jt(ne.SpeedDialAction,"fabHoverBg",Hg(ne.background.paper,.15)),jt(ne.StepConnector,"border",ot("palette-grey-400")),jt(ne.StepContent,"border",ot("palette-grey-400")),jt(ne.Switch,"defaultColor",ot("palette-common-white")),jt(ne.Switch,"defaultDisabledColor",ot("palette-grey-100")),jt(ne.Switch,"primaryDisabledColor",mo(ne.primary.main,.62)),jt(ne.Switch,"secondaryDisabledColor",mo(ne.secondary.main,.62)),jt(ne.Switch,"errorDisabledColor",mo(ne.error.main,.62)),jt(ne.Switch,"infoDisabledColor",mo(ne.info.main,.62)),jt(ne.Switch,"successDisabledColor",mo(ne.success.main,.62)),jt(ne.Switch,"warningDisabledColor",mo(ne.warning.main,.62)),jt(ne.TableCell,"border",mo(Wg(ne.divider,1),.88)),jt(ne.Tooltip,"bg",Wg(ne.grey[700],.92))}if(ne.mode==="dark"){jt(ne.Alert,"errorColor",mo(ne.error.light,.6)),jt(ne.Alert,"infoColor",mo(ne.info.light,.6)),jt(ne.Alert,"successColor",mo(ne.success.light,.6)),jt(ne.Alert,"warningColor",mo(ne.warning.light,.6)),jt(ne.Alert,"errorFilledBg",ot("palette-error-dark")),jt(ne.Alert,"infoFilledBg",ot("palette-info-dark")),jt(ne.Alert,"successFilledBg",ot("palette-success-dark")),jt(ne.Alert,"warningFilledBg",ot("palette-warning-dark")),jt(ne.Alert,"errorFilledColor",Sd(()=>ne.getContrastText(ne.error.dark))),jt(ne.Alert,"infoFilledColor",Sd(()=>ne.getContrastText(ne.info.dark))),jt(ne.Alert,"successFilledColor",Sd(()=>ne.getContrastText(ne.success.dark))),jt(ne.Alert,"warningFilledColor",Sd(()=>ne.getContrastText(ne.warning.dark))),jt(ne.Alert,"errorStandardBg",po(ne.error.light,.9)),jt(ne.Alert,"infoStandardBg",po(ne.info.light,.9)),jt(ne.Alert,"successStandardBg",po(ne.success.light,.9)),jt(ne.Alert,"warningStandardBg",po(ne.warning.light,.9)),jt(ne.Alert,"errorIconColor",ot("palette-error-main")),jt(ne.Alert,"infoIconColor",ot("palette-info-main")),jt(ne.Alert,"successIconColor",ot("palette-success-main")),jt(ne.Alert,"warningIconColor",ot("palette-warning-main")),jt(ne.AppBar,"defaultBg",ot("palette-grey-900")),jt(ne.AppBar,"darkBg",ot("palette-background-paper")),jt(ne.AppBar,"darkColor",ot("palette-text-primary")),jt(ne.Avatar,"defaultBg",ot("palette-grey-600")),jt(ne.Button,"inheritContainedBg",ot("palette-grey-800")),jt(ne.Button,"inheritContainedHoverBg",ot("palette-grey-700")),jt(ne.Chip,"defaultBorder",ot("palette-grey-700")),jt(ne.Chip,"defaultAvatarColor",ot("palette-grey-300")),jt(ne.Chip,"defaultIconColor",ot("palette-grey-300")),jt(ne.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),jt(ne.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),jt(ne.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),jt(ne.LinearProgress,"primaryBg",po(ne.primary.main,.5)),jt(ne.LinearProgress,"secondaryBg",po(ne.secondary.main,.5)),jt(ne.LinearProgress,"errorBg",po(ne.error.main,.5)),jt(ne.LinearProgress,"infoBg",po(ne.info.main,.5)),jt(ne.LinearProgress,"successBg",po(ne.success.main,.5)),jt(ne.LinearProgress,"warningBg",po(ne.warning.main,.5)),jt(ne.Skeleton,"bg",`rgba(${ot("palette-text-primaryChannel")} / 0.13)`),jt(ne.Slider,"primaryTrack",po(ne.primary.main,.5)),jt(ne.Slider,"secondaryTrack",po(ne.secondary.main,.5)),jt(ne.Slider,"errorTrack",po(ne.error.main,.5)),jt(ne.Slider,"infoTrack",po(ne.info.main,.5)),jt(ne.Slider,"successTrack",po(ne.success.main,.5)),jt(ne.Slider,"warningTrack",po(ne.warning.main,.5));const at=Hg(ne.background.default,.98);jt(ne.SnackbarContent,"bg",at),jt(ne.SnackbarContent,"color",Sd(()=>ne.getContrastText(at))),jt(ne.SpeedDialAction,"fabHoverBg",Hg(ne.background.paper,.15)),jt(ne.StepConnector,"border",ot("palette-grey-600")),jt(ne.StepContent,"border",ot("palette-grey-600")),jt(ne.Switch,"defaultColor",ot("palette-grey-300")),jt(ne.Switch,"defaultDisabledColor",ot("palette-grey-600")),jt(ne.Switch,"primaryDisabledColor",po(ne.primary.main,.55)),jt(ne.Switch,"secondaryDisabledColor",po(ne.secondary.main,.55)),jt(ne.Switch,"errorDisabledColor",po(ne.error.main,.55)),jt(ne.Switch,"infoDisabledColor",po(ne.info.main,.55)),jt(ne.Switch,"successDisabledColor",po(ne.success.main,.55)),jt(ne.Switch,"warningDisabledColor",po(ne.warning.main,.55)),jt(ne.TableCell,"border",po(Wg(ne.divider,1),.68)),jt(ne.Tooltip,"bg",Wg(ne.grey[700],.92))}of(ne.background,"default"),of(ne.background,"paper"),of(ne.common,"background"),of(ne.common,"onBackground"),of(ne,"divider"),Object.keys(ne).forEach(at=>{const Lt=ne[at];at!=="tonalOffset"&&Lt&&typeof Lt=="object"&&(Lt.main&&jt(ne[at],"mainChannel",Vm(Zm(Lt.main))),Lt.light&&jt(ne[at],"lightChannel",Vm(Zm(Lt.light))),Lt.dark&&jt(ne[at],"darkChannel",Vm(Zm(Lt.dark))),Lt.contrastText&&jt(ne[at],"contrastTextChannel",Vm(Zm(Lt.contrastText))),at==="text"&&(of(ne[at],"primary"),of(ne[at],"secondary")),at==="action"&&(Lt.active&&of(ne[at],"active"),Lt.selected&&of(ne[at],"selected")))})}),et=m.reduce((je,ne)=>Ac(je,ne),et);const Je={prefix:D,disableCssColorScheme:P,shouldSkipGeneratingVar:M,getSelector:vk(et)},{vars:it,generateThemeVars:_t,generateStyleSheets:Le}=ZM(et,Je);return et.vars=it,Object.entries(et.colorSchemes[et.defaultColorScheme]).forEach(([je,ne])=>{et[je]=ne}),et.generateThemeVars=_t,et.generateStyleSheets=Le,et.generateSpacing=function(){return Sb(Y.spacing,Sv(this))},et.getColorSchemeSelector=GM(u),et.spacing=et.generateSpacing(),et.shouldSkipGeneratingVar=M,et.unstable_sxConfig={...hg,...Y==null?void 0:Y.unstable_sxConfig},et.unstable_sx=function(ne){return om({sx:ne,theme:this})},et.toRuntimeSource=Ab,et}function _x(c,m,p){c.colorSchemes&&p&&(c.colorSchemes[m]={...p!==!0&&p,palette:Lv({...p===!0?{}:p.palette,mode:m})})}function Tk(c={},...m){const{palette:p,cssVariables:T=!1,colorSchemes:P=p?void 0:{light:!0},defaultColorScheme:D=p==null?void 0:p.mode,...M}=c,u=D||"light",te=P==null?void 0:P[u],Y={...P,...p?{[u]:{...typeof te!="boolean"&&te,palette:p}}:void 0};if(T===!1){if(!("colorSchemes"in c))return ev(c,...m);let fe=p;"palette"in c||Y[u]&&(Y[u]!==!0?fe=Y[u].palette:u==="dark"&&(fe={mode:"dark"}));const he=ev({...c,palette:fe},...m);return he.defaultColorScheme=u,he.colorSchemes=Y,he.palette.mode==="light"&&(he.colorSchemes.light={...Y.light!==!0&&Y.light,palette:he.palette},_x(he,"dark",Y.dark)),he.palette.mode==="dark"&&(he.colorSchemes.dark={...Y.dark!==!0&&Y.dark,palette:he.palette},_x(he,"light",Y.light)),he}return!p&&!("light"in Y)&&u==="light"&&(Y.light=!0),Sk({...M,colorSchemes:Y,defaultColorScheme:u,...typeof T!="boolean"&&T},...m)}const Ck=Tk(),Pk="$$material";function Ek(c){return c!=="ownerState"&&c!=="theme"&&c!=="sx"&&c!=="as"}const cm=c=>Ek(c)&&c!=="classes",Po=EM({themeId:Pk,defaultTheme:Ck,rootShouldForwardProp:cm});function Ik(){return yI}const hh=$M;function Mk(c){return typeof c.main=="string"}function kk(c,m=[]){if(!Mk(c))return!1;for(const p of m)if(!c.hasOwnProperty(p)||typeof c[p]!="string")return!1;return!0}function am(c=[]){return([,m])=>m&&kk(m,c)}function dh(c){return NM(c)}function Ak(c){return Vu("MuiFormLabel",c)}const iy=kl("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),Rk=c=>{const{classes:m,color:p,focused:T,disabled:P,error:D,filled:M,required:u}=c,te={root:["root",`color${yi(p)}`,P&&"disabled",D&&"error",M&&"filled",T&&"focused",u&&"required"],asterisk:["asterisk",D&&"error"]};return zc(te,Ak,m)},zk=Po("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(c,m)=>{const{ownerState:p}=c;return[m.root,p.color==="secondary"&&m.colorSecondary,p.filled&&m.filled]}})(hh(({theme:c})=>({color:(c.vars||c).palette.text.secondary,...c.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(c.palette).filter(am()).map(([m])=>({props:{color:m},style:{[`&.${iy.focused}`]:{color:(c.vars||c).palette[m].main}}})),{props:{},style:{[`&.${iy.disabled}`]:{color:(c.vars||c).palette.text.disabled},[`&.${iy.error}`]:{color:(c.vars||c).palette.error.main}}}]}))),Lk=Po("span",{name:"MuiFormLabel",slot:"Asterisk"})(hh(({theme:c})=>({[`&.${iy.error}`]:{color:(c.vars||c).palette.error.main}}))),Dk=Gt.forwardRef(function(m,p){const T=dh({props:m,name:"MuiFormLabel"}),{children:P,className:D,color:M,component:u="label",disabled:te,error:Y,filled:fe,focused:he,required:Te,...ge}=T,we=lg(),Ce=xv({props:T,muiFormControl:we,states:["color","required","focused","disabled","error","filled"]}),We={...T,color:Ce.color||"primary",component:u,disabled:Ce.disabled,error:Ce.error,filled:Ce.filled,focused:Ce.focused,required:Ce.required},gt=Rk(We);return wr.jsxs(zk,{as:u,ownerState:We,className:Co(gt.root,D),ref:p,...ge,children:[P,Ce.required&&wr.jsxs(Lk,{ownerState:We,"aria-hidden":!0,className:gt.asterisk,children:["","*"]})]})}),vx=Gt.createContext({});function xx(c){try{return c.matches(":focus-visible")}catch{}return!1}function eg(...c){const m=Gt.useRef(void 0),p=Gt.useCallback(T=>{const P=c.map(D=>{if(D==null)return null;if(typeof D=="function"){const M=D,u=M(T);return typeof u=="function"?u:()=>{M(null)}}return D.current=T,()=>{D.current=null}});return()=>{P.forEach(D=>D==null?void 0:D())}},c);return Gt.useMemo(()=>c.every(T=>T==null)?null:T=>{m.current&&(m.current(),m.current=void 0),T!=null&&(m.current=p(T))},c)}function oy(c){const m=Gt.useRef(c);return Eb(()=>{m.current=c}),Gt.useRef((...p)=>(0,m.current)(...p)).current}const bx={};function Lb(c,m){const p=Gt.useRef(bx);return p.current===bx&&(p.current=c(m)),p}class py{constructor(){Lm(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new py}static use(){const m=Lb(py.create).current,[p,T]=Gt.useState(!1);return m.shouldMount=p,m.setShouldMount=T,Gt.useEffect(m.mountEffect,[p]),m}mount(){return this.mounted||(this.mounted=Fk(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...m){this.mount().then(()=>{var p;return(p=this.ref.current)==null?void 0:p.start(...m)})}stop(...m){this.mount().then(()=>{var p;return(p=this.ref.current)==null?void 0:p.stop(...m)})}pulsate(...m){this.mount().then(()=>{var p;return(p=this.ref.current)==null?void 0:p.pulsate(...m)})}}function Ok(){return py.use()}function Fk(){let c,m;const p=new Promise((T,P)=>{c=T,m=P});return p.resolve=c,p.reject=m,p}function Bk(c,m){if(c==null)return{};var p={};for(var T in c)if({}.hasOwnProperty.call(c,T)){if(m.indexOf(T)!==-1)continue;p[T]=c[T]}return p}function tv(c,m){return tv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(p,T){return p.__proto__=T,p},tv(c,m)}function Nk(c,m){c.prototype=Object.create(m.prototype),c.prototype.constructor=c,tv(c,m)}const wx=pu.createContext(null);function $k(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function Dv(c,m){var p=function(D){return m&&Gt.isValidElement(D)?m(D):D},T=Object.create(null);return c&&Gt.Children.map(c,function(P){return P}).forEach(function(P){T[P.key]=p(P)}),T}function jk(c,m){c=c||{},m=m||{};function p(fe){return fe in m?m[fe]:c[fe]}var T=Object.create(null),P=[];for(var D in c)D in m?P.length&&(T[D]=P,P=[]):P.push(D);var M,u={};for(var te in m){if(T[te])for(M=0;M<T[te].length;M++){var Y=T[te][M];u[T[te][M]]=p(Y)}u[te]=p(te)}for(M=0;M<P.length;M++)u[P[M]]=p(P[M]);return u}function bp(c,m,p){return p[m]!=null?p[m]:c.props[m]}function Uk(c,m){return Dv(c.children,function(p){return Gt.cloneElement(p,{onExited:m.bind(null,p),in:!0,appear:bp(p,"appear",c),enter:bp(p,"enter",c),exit:bp(p,"exit",c)})})}function Vk(c,m,p){var T=Dv(c.children),P=jk(m,T);return Object.keys(P).forEach(function(D){var M=P[D];if(Gt.isValidElement(M)){var u=D in m,te=D in T,Y=m[D],fe=Gt.isValidElement(Y)&&!Y.props.in;te&&(!u||fe)?P[D]=Gt.cloneElement(M,{onExited:p.bind(null,M),in:!0,exit:bp(M,"exit",c),enter:bp(M,"enter",c)}):!te&&u&&!fe?P[D]=Gt.cloneElement(M,{in:!1}):te&&u&&Gt.isValidElement(Y)&&(P[D]=Gt.cloneElement(M,{onExited:p.bind(null,M),in:Y.props.in,exit:bp(M,"exit",c),enter:bp(M,"enter",c)}))}}),P}var Zk=Object.values||function(c){return Object.keys(c).map(function(m){return c[m]})},Gk={component:"div",childFactory:function(m){return m}},Ov=function(c){Nk(m,c);function m(T,P){var D;D=c.call(this,T,P)||this;var M=D.handleExited.bind($k(D));return D.state={contextValue:{isMounting:!0},handleExited:M,firstRender:!0},D}var p=m.prototype;return p.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},p.componentWillUnmount=function(){this.mounted=!1},m.getDerivedStateFromProps=function(P,D){var M=D.children,u=D.handleExited,te=D.firstRender;return{children:te?Uk(P,u):Vk(P,M,u),firstRender:!1}},p.handleExited=function(P,D){var M=Dv(this.props.children);P.key in M||(P.props.onExited&&P.props.onExited(D),this.mounted&&this.setState(function(u){var te=hy({},u.children);return delete te[P.key],{children:te}}))},p.render=function(){var P=this.props,D=P.component,M=P.childFactory,u=Bk(P,["component","childFactory"]),te=this.state.contextValue,Y=Zk(this.state.children).map(M);return delete u.appear,delete u.enter,delete u.exit,D===null?pu.createElement(wx.Provider,{value:te},Y):pu.createElement(wx.Provider,{value:te},pu.createElement(D,u,Y))},m}(pu.Component);Ov.propTypes={};Ov.defaultProps=Gk;const Wk=[];function Hk(c){Gt.useEffect(c,Wk)}class Fv{constructor(){Lm(this,"currentId",null);Lm(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});Lm(this,"disposeEffect",()=>this.clear)}static create(){return new Fv}start(m,p){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,p()},m)}}function qk(){const c=Lb(Fv.create).current;return Hk(c.disposeEffect),c}function Kk(c){const{className:m,classes:p,pulsate:T=!1,rippleX:P,rippleY:D,rippleSize:M,in:u,onExited:te,timeout:Y}=c,[fe,he]=Gt.useState(!1),Te=Co(m,p.ripple,p.rippleVisible,T&&p.ripplePulsate),ge={width:M,height:M,top:-(M/2)+D,left:-(M/2)+P},we=Co(p.child,fe&&p.childLeaving,T&&p.childPulsate);return!u&&!fe&&he(!0),Gt.useEffect(()=>{if(!u&&te!=null){const Ce=setTimeout(te,Y);return()=>{clearTimeout(Ce)}}},[te,u,Y]),wr.jsx("span",{className:Te,style:ge,children:wr.jsx("span",{className:we})})}const sh=kl("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),rv=550,Xk=80,Yk=fg`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,Qk=fg`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,Jk=fg`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,eA=Po("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),tA=Po(Kk,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${sh.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${Yk};
    animation-duration: ${rv}ms;
    animation-timing-function: ${({theme:c})=>c.transitions.easing.easeInOut};
  }

  &.${sh.ripplePulsate} {
    animation-duration: ${({theme:c})=>c.transitions.duration.shorter}ms;
  }

  & .${sh.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${sh.childLeaving} {
    opacity: 0;
    animation-name: ${Qk};
    animation-duration: ${rv}ms;
    animation-timing-function: ${({theme:c})=>c.transitions.easing.easeInOut};
  }

  & .${sh.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${Jk};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:c})=>c.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,rA=Gt.forwardRef(function(m,p){const T=dh({props:m,name:"MuiTouchRipple"}),{center:P=!1,classes:D={},className:M,...u}=T,[te,Y]=Gt.useState([]),fe=Gt.useRef(0),he=Gt.useRef(null);Gt.useEffect(()=>{he.current&&(he.current(),he.current=null)},[te]);const Te=Gt.useRef(!1),ge=qk(),we=Gt.useRef(null),Ce=Gt.useRef(null),We=Gt.useCallback(et=>{const{pulsate:Je,rippleX:it,rippleY:_t,rippleSize:Le,cb:je}=et;Y(ne=>[...ne,wr.jsx(tA,{classes:{ripple:Co(D.ripple,sh.ripple),rippleVisible:Co(D.rippleVisible,sh.rippleVisible),ripplePulsate:Co(D.ripplePulsate,sh.ripplePulsate),child:Co(D.child,sh.child),childLeaving:Co(D.childLeaving,sh.childLeaving),childPulsate:Co(D.childPulsate,sh.childPulsate)},timeout:rv,pulsate:Je,rippleX:it,rippleY:_t,rippleSize:Le},fe.current)]),fe.current+=1,he.current=je},[D]),gt=Gt.useCallback((et={},Je={},it=()=>{})=>{const{pulsate:_t=!1,center:Le=P||Je.pulsate,fakeElement:je=!1}=Je;if((et==null?void 0:et.type)==="mousedown"&&Te.current){Te.current=!1;return}(et==null?void 0:et.type)==="touchstart"&&(Te.current=!0);const ne=je?null:Ce.current,ot=ne?ne.getBoundingClientRect():{width:0,height:0,left:0,top:0};let at,Lt,rr;if(Le||et===void 0||et.clientX===0&&et.clientY===0||!et.clientX&&!et.touches)at=Math.round(ot.width/2),Lt=Math.round(ot.height/2);else{const{clientX:Pr,clientY:xr}=et.touches&&et.touches.length>0?et.touches[0]:et;at=Math.round(Pr-ot.left),Lt=Math.round(xr-ot.top)}if(Le)rr=Math.sqrt((2*ot.width**2+ot.height**2)/3),rr%2===0&&(rr+=1);else{const Pr=Math.max(Math.abs((ne?ne.clientWidth:0)-at),at)*2+2,xr=Math.max(Math.abs((ne?ne.clientHeight:0)-Lt),Lt)*2+2;rr=Math.sqrt(Pr**2+xr**2)}et!=null&&et.touches?we.current===null&&(we.current=()=>{We({pulsate:_t,rippleX:at,rippleY:Lt,rippleSize:rr,cb:it})},ge.start(Xk,()=>{we.current&&(we.current(),we.current=null)})):We({pulsate:_t,rippleX:at,rippleY:Lt,rippleSize:rr,cb:it})},[P,We,ge]),At=Gt.useCallback(()=>{gt({},{pulsate:!0})},[gt]),Ct=Gt.useCallback((et,Je)=>{if(ge.clear(),(et==null?void 0:et.type)==="touchend"&&we.current){we.current(),we.current=null,ge.start(0,()=>{Ct(et,Je)});return}we.current=null,Y(it=>it.length>0?it.slice(1):it),he.current=Je},[ge]);return Gt.useImperativeHandle(p,()=>({pulsate:At,start:gt,stop:Ct}),[At,gt,Ct]),wr.jsx(eA,{className:Co(sh.root,D.root,M),ref:Ce,...u,children:wr.jsx(Ov,{component:null,exit:!0,children:te})})});function nA(c){return Vu("MuiButtonBase",c)}const iA=kl("MuiButtonBase",["root","disabled","focusVisible"]),oA=c=>{const{disabled:m,focusVisible:p,focusVisibleClassName:T,classes:P}=c,M=zc({root:["root",m&&"disabled",p&&"focusVisible"]},nA,P);return p&&T&&(M.root+=` ${T}`),M},sA=Po("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${iA.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),Bv=Gt.forwardRef(function(m,p){const T=dh({props:m,name:"MuiButtonBase"}),{action:P,centerRipple:D=!1,children:M,className:u,component:te="button",disabled:Y=!1,disableRipple:fe=!1,disableTouchRipple:he=!1,focusRipple:Te=!1,focusVisibleClassName:ge,LinkComponent:we="a",onBlur:Ce,onClick:We,onContextMenu:gt,onDragLeave:At,onFocus:Ct,onFocusVisible:et,onKeyDown:Je,onKeyUp:it,onMouseDown:_t,onMouseLeave:Le,onMouseUp:je,onTouchEnd:ne,onTouchMove:ot,onTouchStart:at,tabIndex:Lt=0,TouchRippleProps:rr,touchRippleRef:Pr,type:xr,...sr}=T,bt=Gt.useRef(null),Et=Ok(),Ht=eg(Et.ref,Pr),[Fe,ht]=Gt.useState(!1);Y&&Fe&&ht(!1),Gt.useImperativeHandle(P,()=>({focusVisible:()=>{ht(!0),bt.current.focus()}}),[]);const Vt=Et.shouldMount&&!fe&&!Y;Gt.useEffect(()=>{Fe&&Te&&!fe&&Et.pulsate()},[fe,Te,Fe,Et]);const cr=sf(Et,"start",_t,he),Rt=sf(Et,"stop",gt,he),or=sf(Et,"stop",At,he),Tr=sf(Et,"stop",je,he),pr=sf(Et,"stop",Sr=>{Fe&&Sr.preventDefault(),Le&&Le(Sr)},he),mr=sf(Et,"start",at,he),Jr=sf(Et,"stop",ne,he),Cr=sf(Et,"stop",ot,he),rn=sf(Et,"stop",Sr=>{xx(Sr.target)||ht(!1),Ce&&Ce(Sr)},!1),jr=oy(Sr=>{bt.current||(bt.current=Sr.currentTarget),xx(Sr.target)&&(ht(!0),et&&et(Sr)),Ct&&Ct(Sr)}),br=()=>{const Sr=bt.current;return te&&te!=="button"&&!(Sr.tagName==="A"&&Sr.href)},on=oy(Sr=>{Te&&!Sr.repeat&&Fe&&Sr.key===" "&&Et.stop(Sr,()=>{Et.start(Sr)}),Sr.target===Sr.currentTarget&&br()&&Sr.key===" "&&Sr.preventDefault(),Je&&Je(Sr),Sr.target===Sr.currentTarget&&br()&&Sr.key==="Enter"&&!Y&&(Sr.preventDefault(),We&&We(Sr))}),qr=oy(Sr=>{Te&&Sr.key===" "&&Fe&&!Sr.defaultPrevented&&Et.stop(Sr,()=>{Et.pulsate(Sr)}),it&&it(Sr),We&&Sr.target===Sr.currentTarget&&br()&&Sr.key===" "&&!Sr.defaultPrevented&&We(Sr)});let fn=te;fn==="button"&&(sr.href||sr.to)&&(fn=we);const sn={};fn==="button"?(sn.type=xr===void 0?"button":xr,sn.disabled=Y):(!sr.href&&!sr.to&&(sn.role="button"),Y&&(sn["aria-disabled"]=Y));const wn=eg(p,bt),an={...T,centerRipple:D,component:te,disabled:Y,disableRipple:fe,disableTouchRipple:he,focusRipple:Te,tabIndex:Lt,focusVisible:Fe},An=oA(an);return wr.jsxs(sA,{as:fn,className:Co(An.root,u),ownerState:an,onBlur:rn,onClick:We,onContextMenu:Rt,onFocus:jr,onKeyDown:on,onKeyUp:qr,onMouseDown:cr,onMouseLeave:pr,onMouseUp:Tr,onDragLeave:or,onTouchEnd:Jr,onTouchMove:Cr,onTouchStart:mr,ref:wn,tabIndex:Y?-1:Lt,type:xr,...sn,...sr,children:[M,Vt?wr.jsx(rA,{ref:Ht,center:D,...rr}):null]})});function sf(c,m,p,T=!1){return oy(P=>(p&&p(P),T||c[m](P),!0))}const Sx=kl("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),Tx=kl("MuiListItemIcon",["root","alignItemsFlexStart"]);function aA(c){return Vu("MuiTypography",c)}kl("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const lA={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},uA=Ik(),cA=c=>{const{align:m,gutterBottom:p,noWrap:T,paragraph:P,variant:D,classes:M}=c,u={root:["root",D,c.align!=="inherit"&&`align${yi(m)}`,p&&"gutterBottom",T&&"noWrap",P&&"paragraph"]};return zc(u,aA,M)},hA=Po("span",{name:"MuiTypography",slot:"Root",overridesResolver:(c,m)=>{const{ownerState:p}=c;return[m.root,p.variant&&m[p.variant],p.align!=="inherit"&&m[`align${yi(p.align)}`],p.noWrap&&m.noWrap,p.gutterBottom&&m.gutterBottom,p.paragraph&&m.paragraph]}})(hh(({theme:c})=>{var m;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(c.typography).filter(([p,T])=>p!=="inherit"&&T&&typeof T=="object").map(([p,T])=>({props:{variant:p},style:T})),...Object.entries(c.palette).filter(am()).map(([p])=>({props:{color:p},style:{color:(c.vars||c).palette[p].main}})),...Object.entries(((m=c.palette)==null?void 0:m.text)||{}).filter(([,p])=>typeof p=="string").map(([p])=>({props:{color:`text${yi(p)}`},style:{color:(c.vars||c).palette.text[p]}})),{props:({ownerState:p})=>p.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:p})=>p.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:p})=>p.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:p})=>p.paragraph,style:{marginBottom:16}}]}})),Cx={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Px=Gt.forwardRef(function(m,p){const{color:T,...P}=dh({props:m,name:"MuiTypography"}),D=!lA[T],M=uA({...P,...D&&{color:T}}),{align:u="inherit",className:te,component:Y,gutterBottom:fe=!1,noWrap:he=!1,paragraph:Te=!1,variant:ge="body1",variantMapping:we=Cx,...Ce}=M,We={...M,align:u,color:T,className:te,component:Y,gutterBottom:fe,noWrap:he,paragraph:Te,variant:ge,variantMapping:we},gt=Y||(Te?"p":we[ge]||Cx[ge])||"span",At=cA(We);return wr.jsx(hA,{as:gt,ref:p,className:Co(At.root,te),...Ce,ownerState:We,style:{...u!=="inherit"&&{"--Typography-textAlign":u},...Ce.style}})}),Ex=kl("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function dA(c){return typeof c=="string"}function fA(c,m,p){return c===void 0||dA(c)?m:{...m,ownerState:{...m.ownerState,...p}}}function pA(c,m,p){return typeof c=="function"?c(m,p):c}function mA(c,m=[]){if(c===void 0)return{};const p={};return Object.keys(c).filter(T=>T.match(/^on[A-Z]/)&&typeof c[T]=="function"&&!m.includes(T)).forEach(T=>{p[T]=c[T]}),p}function Ix(c){if(c===void 0)return{};const m={};return Object.keys(c).filter(p=>!(p.match(/^on[A-Z]/)&&typeof c[p]=="function")).forEach(p=>{m[p]=c[p]}),m}function gA(c){const{getSlotProps:m,additionalProps:p,externalSlotProps:T,externalForwardedProps:P,className:D}=c;if(!m){const ge=Co(p==null?void 0:p.className,D,P==null?void 0:P.className,T==null?void 0:T.className),we={...p==null?void 0:p.style,...P==null?void 0:P.style,...T==null?void 0:T.style},Ce={...p,...P,...T};return ge.length>0&&(Ce.className=ge),Object.keys(we).length>0&&(Ce.style=we),{props:Ce,internalRef:void 0}}const M=mA({...P,...T}),u=Ix(T),te=Ix(P),Y=m(M),fe=Co(Y==null?void 0:Y.className,p==null?void 0:p.className,D,P==null?void 0:P.className,T==null?void 0:T.className),he={...Y==null?void 0:Y.style,...p==null?void 0:p.style,...P==null?void 0:P.style,...T==null?void 0:T.style},Te={...Y,...p,...te,...u};return fe.length>0&&(Te.className=fe),Object.keys(he).length>0&&(Te.style=he),{props:Te,internalRef:Y.ref}}function my(c,m){const{className:p,elementType:T,ownerState:P,externalForwardedProps:D,internalForwardedProps:M,shouldForwardComponentProp:u=!1,...te}=m,{component:Y,slots:fe={[c]:void 0},slotProps:he={[c]:void 0},...Te}=D,ge=fe[c]||T,we=pA(he[c],P),{props:{component:Ce,...We},internalRef:gt}=gA({className:p,...te,externalForwardedProps:c==="root"?Te:void 0,externalSlotProps:we}),At=eg(gt,we==null?void 0:we.ref,m.ref),Ct=c==="root"?Ce||Y:Ce,et=fA(ge,{...c==="root"&&!Y&&!fe[c]&&M,...c!=="root"&&!fe[c]&&M,...We,...Ct&&!u&&{as:Ct},...Ct&&u&&{component:Ct},ref:At},P);return[ge,et]}function yA(c){return Vu("MuiMenuItem",c)}const jm=kl("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),_A=(c,m)=>{const{ownerState:p}=c;return[m.root,p.dense&&m.dense,p.divider&&m.divider,!p.disableGutters&&m.gutters]},vA=c=>{const{disabled:m,dense:p,divider:T,disableGutters:P,selected:D,classes:M}=c,te=zc({root:["root",p&&"dense",m&&"disabled",!P&&"gutters",T&&"divider",D&&"selected"]},yA,M);return{...M,...te}},xA=Po(Bv,{shouldForwardProp:c=>cm(c)||c==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:_A})(hh(({theme:c})=>({...c.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(c.vars||c).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${jm.selected}`]:{backgroundColor:c.vars?`rgba(${c.vars.palette.primary.mainChannel} / ${c.vars.palette.action.selectedOpacity})`:lh(c.palette.primary.main,c.palette.action.selectedOpacity),[`&.${jm.focusVisible}`]:{backgroundColor:c.vars?`rgba(${c.vars.palette.primary.mainChannel} / calc(${c.vars.palette.action.selectedOpacity} + ${c.vars.palette.action.focusOpacity}))`:lh(c.palette.primary.main,c.palette.action.selectedOpacity+c.palette.action.focusOpacity)}},[`&.${jm.selected}:hover`]:{backgroundColor:c.vars?`rgba(${c.vars.palette.primary.mainChannel} / calc(${c.vars.palette.action.selectedOpacity} + ${c.vars.palette.action.hoverOpacity}))`:lh(c.palette.primary.main,c.palette.action.selectedOpacity+c.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:c.vars?`rgba(${c.vars.palette.primary.mainChannel} / ${c.vars.palette.action.selectedOpacity})`:lh(c.palette.primary.main,c.palette.action.selectedOpacity)}},[`&.${jm.focusVisible}`]:{backgroundColor:(c.vars||c).palette.action.focus},[`&.${jm.disabled}`]:{opacity:(c.vars||c).palette.action.disabledOpacity},[`& + .${Sx.root}`]:{marginTop:c.spacing(1),marginBottom:c.spacing(1)},[`& + .${Sx.inset}`]:{marginLeft:52},[`& .${Ex.root}`]:{marginTop:0,marginBottom:0},[`& .${Ex.inset}`]:{paddingLeft:36},[`& .${Tx.root}`]:{minWidth:36},variants:[{props:({ownerState:m})=>!m.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:m})=>m.divider,style:{borderBottom:`1px solid ${(c.vars||c).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:m})=>!m.dense,style:{[c.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:m})=>m.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...c.typography.body2,[`& .${Tx.root} svg`]:{fontSize:"1.25rem"}}}]}))),bA=Gt.forwardRef(function(m,p){const T=dh({props:m,name:"MuiMenuItem"}),{autoFocus:P=!1,component:D="li",dense:M=!1,divider:u=!1,disableGutters:te=!1,focusVisibleClassName:Y,role:fe="menuitem",tabIndex:he,className:Te,...ge}=T,we=Gt.useContext(vx),Ce=Gt.useMemo(()=>({dense:M||we.dense||!1,disableGutters:te}),[we.dense,M,te]),We=Gt.useRef(null);Eb(()=>{P&&We.current&&We.current.focus()},[P]);const gt={...T,dense:Ce.dense,divider:u,disableGutters:te},At=vA(T),Ct=eg(We,p);let et;return T.disabled||(et=he!==void 0?he:-1),wr.jsx(vx.Provider,{value:Ce,children:wr.jsx(xA,{ref:Ct,role:fe,tabIndex:et,component:D,focusVisibleClassName:Co(At.focusVisible,Y),className:Co(At.root,Te),...ge,ownerState:gt,classes:At})})});function Mx(c){return c!=null&&!(Array.isArray(c)&&c.length===0)}function kx(c,m=!1){return c&&(Mx(c.value)&&c.value!==""||m&&Mx(c.defaultValue)&&c.defaultValue!=="")}function wA(c){return c.startAdornment}function SA(c){return Vu("MuiFormControl",c)}kl("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const TA=c=>{const{classes:m,margin:p,fullWidth:T}=c,P={root:["root",p!=="none"&&`margin${yi(p)}`,T&&"fullWidth"]};return zc(P,SA,m)},CA=Po("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(c,m)=>{const{ownerState:p}=c;return[m.root,m[`margin${yi(p.margin)}`],p.fullWidth&&m.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),Ax=Gt.forwardRef(function(m,p){const T=dh({props:m,name:"MuiFormControl"}),{children:P,className:D,color:M="primary",component:u="div",disabled:te=!1,error:Y=!1,focused:fe,fullWidth:he=!1,hiddenLabel:Te=!1,margin:ge="none",required:we=!1,size:Ce="medium",variant:We="outlined",...gt}=T,At={...T,color:M,component:u,disabled:te,error:Y,fullWidth:he,hiddenLabel:Te,margin:ge,required:we,size:Ce,variant:We},Ct=TA(At),[et,Je]=Gt.useState(()=>{let Pr=!1;return P&&Gt.Children.forEach(P,xr=>{if(!I_(xr,["Input","Select"]))return;const sr=I_(xr,["Select"])?xr.props.input:xr;sr&&wA(sr.props)&&(Pr=!0)}),Pr}),[it,_t]=Gt.useState(()=>{let Pr=!1;return P&&Gt.Children.forEach(P,xr=>{I_(xr,["Input","Select"])&&(kx(xr.props,!0)||kx(xr.props.inputProps,!0))&&(Pr=!0)}),Pr}),[Le,je]=Gt.useState(!1);te&&Le&&je(!1);const ne=fe!==void 0&&!te?fe:Le;let ot;Gt.useRef(!1);const at=Gt.useCallback(()=>{_t(!0)},[]),Lt=Gt.useCallback(()=>{_t(!1)},[]),rr=Gt.useMemo(()=>({adornedStart:et,setAdornedStart:Je,color:M,disabled:te,error:Y,filled:it,focused:ne,fullWidth:he,hiddenLabel:Te,size:Ce,onBlur:()=>{je(!1)},onFocus:()=>{je(!0)},onEmpty:Lt,onFilled:at,registerEffect:ot,required:we,variant:We}),[et,M,te,Y,it,ne,he,Te,ot,Lt,at,we,Ce,We]);return wr.jsx(ib.Provider,{value:rr,children:wr.jsx(CA,{as:u,ownerState:At,className:Co(Ct.root,D),ref:p,...gt,children:P})})});function PA(c){return Vu("MuiFormControlLabel",c)}const Gm=kl("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),EA=c=>{const{classes:m,disabled:p,labelPlacement:T,error:P,required:D}=c,M={root:["root",p&&"disabled",`labelPlacement${yi(T)}`,P&&"error",D&&"required"],label:["label",p&&"disabled"],asterisk:["asterisk",P&&"error"]};return zc(M,PA,m)},IA=Po("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(c,m)=>{const{ownerState:p}=c;return[{[`& .${Gm.label}`]:m.label},m.root,m[`labelPlacement${yi(p.labelPlacement)}`]]}})(hh(({theme:c})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${Gm.disabled}`]:{cursor:"default"},[`& .${Gm.label}`]:{[`&.${Gm.disabled}`]:{color:(c.vars||c).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:m})=>m==="start"||m==="top"||m==="bottom",style:{marginLeft:16}}]}))),MA=Po("span",{name:"MuiFormControlLabel",slot:"Asterisk"})(hh(({theme:c})=>({[`&.${Gm.error}`]:{color:(c.vars||c).palette.error.main}}))),Rx=Gt.forwardRef(function(m,p){const T=dh({props:m,name:"MuiFormControlLabel"}),{checked:P,className:D,componentsProps:M={},control:u,disabled:te,disableTypography:Y,inputRef:fe,label:he,labelPlacement:Te="end",name:ge,onChange:we,required:Ce,slots:We={},slotProps:gt={},value:At,...Ct}=T,et=lg(),Je=te??u.props.disabled??(et==null?void 0:et.disabled),it=Ce??u.props.required,_t={disabled:Je,required:it};["checked","name","onChange","value","inputRef"].forEach(Pr=>{typeof u.props[Pr]>"u"&&typeof T[Pr]<"u"&&(_t[Pr]=T[Pr])});const Le=xv({props:T,muiFormControl:et,states:["error"]}),je={...T,disabled:Je,labelPlacement:Te,required:it,error:Le.error},ne=EA(je),ot={slots:We,slotProps:{...M,...gt}},[at,Lt]=my("typography",{elementType:Px,externalForwardedProps:ot,ownerState:je});let rr=he;return rr!=null&&rr.type!==Px&&!Y&&(rr=wr.jsx(at,{component:"span",...Lt,className:Co(ne.label,Lt==null?void 0:Lt.className),children:rr})),wr.jsxs(IA,{className:Co(ne.root,D),ownerState:je,ref:p,...Ct,children:[Gt.cloneElement(u,_t),it?wr.jsxs("div",{children:[rr,wr.jsxs(MA,{ownerState:je,"aria-hidden":!0,className:ne.asterisk,children:["","*"]})]}):rr]})});let zx=0;function kA(c){const[m,p]=Gt.useState(c),T=c||m;return Gt.useEffect(()=>{m==null&&(zx+=1,p(`mui-${zx}`))},[m]),T}const AA={...k_},Lx=AA.useId;function Db(c){if(Lx!==void 0){const m=Lx();return c??m}return kA(c)}function RA(...c){return c.reduce((m,p)=>p==null?m:function(...P){m.apply(this,P),p.apply(this,P)},()=>{})}function zA(c){return Vu("MuiSvgIcon",c)}kl("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const LA=c=>{const{color:m,fontSize:p,classes:T}=c,P={root:["root",m!=="inherit"&&`color${yi(m)}`,`fontSize${yi(p)}`]};return zc(P,zA,T)},DA=Po("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(c,m)=>{const{ownerState:p}=c;return[m.root,p.color!=="inherit"&&m[`color${yi(p.color)}`],m[`fontSize${yi(p.fontSize)}`]]}})(hh(({theme:c})=>{var m,p,T,P,D,M,u,te,Y,fe,he,Te,ge,we;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(P=(m=c.transitions)==null?void 0:m.create)==null?void 0:P.call(m,"fill",{duration:(T=(p=(c.vars??c).transitions)==null?void 0:p.duration)==null?void 0:T.shorter}),variants:[{props:Ce=>!Ce.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((M=(D=c.typography)==null?void 0:D.pxToRem)==null?void 0:M.call(D,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((te=(u=c.typography)==null?void 0:u.pxToRem)==null?void 0:te.call(u,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((fe=(Y=c.typography)==null?void 0:Y.pxToRem)==null?void 0:fe.call(Y,35))||"2.1875rem"}},...Object.entries((c.vars??c).palette).filter(([,Ce])=>Ce&&Ce.main).map(([Ce])=>{var We,gt;return{props:{color:Ce},style:{color:(gt=(We=(c.vars??c).palette)==null?void 0:We[Ce])==null?void 0:gt.main}}}),{props:{color:"action"},style:{color:(Te=(he=(c.vars??c).palette)==null?void 0:he.action)==null?void 0:Te.active}},{props:{color:"disabled"},style:{color:(we=(ge=(c.vars??c).palette)==null?void 0:ge.action)==null?void 0:we.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),nv=Gt.forwardRef(function(m,p){const T=dh({props:m,name:"MuiSvgIcon"}),{children:P,className:D,color:M="inherit",component:u="svg",fontSize:te="medium",htmlColor:Y,inheritViewBox:fe=!1,titleAccess:he,viewBox:Te="0 0 24 24",...ge}=T,we=Gt.isValidElement(P)&&P.type==="svg",Ce={...T,color:M,component:u,fontSize:te,instanceFontSize:m.fontSize,inheritViewBox:fe,viewBox:Te,hasSvgAsChild:we},We={};fe||(We.viewBox=Te);const gt=LA(Ce);return wr.jsxs(DA,{as:u,className:Co(gt.root,D),focusable:"false",color:Y,"aria-hidden":he?void 0:!0,role:he?"img":void 0,ref:p,...We,...ge,...we&&P.props,ownerState:Ce,children:[we?P.props.children:P,he?wr.jsx("title",{children:he}):null]})});nv.muiName="SvgIcon";function Ry(c,m){function p(T,P){return wr.jsx(nv,{"data-testid":void 0,ref:P,...T,children:c})}return p.muiName=nv.muiName,Gt.memo(Gt.forwardRef(p))}function Ob(c){const{controlled:m,default:p,name:T,state:P="value"}=c,{current:D}=Gt.useRef(m!==void 0),[M,u]=Gt.useState(p),te=D?m:M,Y=Gt.useCallback(fe=>{D||u(fe)},[]);return[te,Y]}function OA(c){return Vu("PrivateSwitchBase",c)}kl("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const FA=c=>{const{classes:m,checked:p,disabled:T,edge:P}=c,D={root:["root",p&&"checked",T&&"disabled",P&&`edge${yi(P)}`],input:["input"]};return zc(D,OA,m)},BA=Po(Bv)({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:c,ownerState:m})=>c==="start"&&m.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:c,ownerState:m})=>c==="end"&&m.size!=="small",style:{marginRight:-12}}]}),NA=Po("input",{shouldForwardProp:cm})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),$A=Gt.forwardRef(function(m,p){const{autoFocus:T,checked:P,checkedIcon:D,defaultChecked:M,disabled:u,disableFocusRipple:te=!1,edge:Y=!1,icon:fe,id:he,inputProps:Te,inputRef:ge,name:we,onBlur:Ce,onChange:We,onFocus:gt,readOnly:At,required:Ct=!1,tabIndex:et,type:Je,value:it,slots:_t={},slotProps:Le={},...je}=m,[ne,ot]=Ob({controlled:P,default:!!M,name:"SwitchBase",state:"checked"}),at=lg(),Lt=Rt=>{gt&&gt(Rt),at&&at.onFocus&&at.onFocus(Rt)},rr=Rt=>{Ce&&Ce(Rt),at&&at.onBlur&&at.onBlur(Rt)},Pr=Rt=>{if(Rt.nativeEvent.defaultPrevented)return;const or=Rt.target.checked;ot(or),We&&We(Rt,or)};let xr=u;at&&typeof xr>"u"&&(xr=at.disabled);const sr=Je==="checkbox"||Je==="radio",bt={...m,checked:ne,disabled:xr,disableFocusRipple:te,edge:Y},Et=FA(bt),Ht={slots:_t,slotProps:{input:Te,...Le}},[Fe,ht]=my("root",{ref:p,elementType:BA,className:Et.root,shouldForwardComponentProp:!0,externalForwardedProps:{...Ht,component:"span",...je},getSlotProps:Rt=>({...Rt,onFocus:or=>{var Tr;(Tr=Rt.onFocus)==null||Tr.call(Rt,or),Lt(or)},onBlur:or=>{var Tr;(Tr=Rt.onBlur)==null||Tr.call(Rt,or),rr(or)}}),ownerState:bt,additionalProps:{centerRipple:!0,focusRipple:!te,disabled:xr,role:void 0,tabIndex:null}}),[Vt,cr]=my("input",{ref:ge,elementType:NA,className:Et.input,externalForwardedProps:Ht,getSlotProps:Rt=>({...Rt,onChange:or=>{var Tr;(Tr=Rt.onChange)==null||Tr.call(Rt,or),Pr(or)}}),ownerState:bt,additionalProps:{autoFocus:T,checked:P,defaultChecked:M,disabled:xr,id:sr?he:void 0,name:we,readOnly:At,required:Ct,tabIndex:et,type:Je,...Je==="checkbox"&&it===void 0?{}:{value:it}}});return wr.jsxs(Fe,{...ht,children:[wr.jsx(Vt,{...cr}),ne?D:fe]})}),jA=Ry(wr.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),UA=Ry(wr.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"})),VA=Po("span",{shouldForwardProp:cm})({position:"relative",display:"flex"}),ZA=Po(jA)({transform:"scale(1)"}),GA=Po(UA)(hh(({theme:c})=>({left:0,position:"absolute",transform:"scale(0)",transition:c.transitions.create("transform",{easing:c.transitions.easing.easeIn,duration:c.transitions.duration.shortest}),variants:[{props:{checked:!0},style:{transform:"scale(1)",transition:c.transitions.create("transform",{easing:c.transitions.easing.easeOut,duration:c.transitions.duration.shortest})}}]})));function Fb(c){const{checked:m=!1,classes:p={},fontSize:T}=c,P={...c,checked:m};return wr.jsxs(VA,{className:p.root,ownerState:P,children:[wr.jsx(ZA,{fontSize:T,className:p.background,ownerState:P}),wr.jsx(GA,{fontSize:T,className:p.dot,ownerState:P})]})}const Bb=Gt.createContext(void 0);function WA(){return Gt.useContext(Bb)}function HA(c){return Vu("MuiRadio",c)}const Dx=kl("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),qA=c=>{const{classes:m,color:p,size:T}=c,P={root:["root",`color${yi(p)}`,T!=="medium"&&`size${yi(T)}`]};return{...m,...zc(P,HA,m)}},KA=Po($A,{shouldForwardProp:c=>cm(c)||c==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(c,m)=>{const{ownerState:p}=c;return[m.root,p.size!=="medium"&&m[`size${yi(p.size)}`],m[`color${yi(p.color)}`]]}})(hh(({theme:c})=>({color:(c.vars||c).palette.text.secondary,[`&.${Dx.disabled}`]:{color:(c.vars||c).palette.action.disabled},variants:[{props:{color:"default",disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:c.vars?`rgba(${c.vars.palette.action.activeChannel} / ${c.vars.palette.action.hoverOpacity})`:lh(c.palette.action.active,c.palette.action.hoverOpacity)}}},...Object.entries(c.palette).filter(am()).map(([m])=>({props:{color:m,disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:c.vars?`rgba(${c.vars.palette[m].mainChannel} / ${c.vars.palette.action.hoverOpacity})`:lh(c.palette[m].main,c.palette.action.hoverOpacity)}}})),...Object.entries(c.palette).filter(am()).map(([m])=>({props:{color:m,disabled:!1},style:{[`&.${Dx.checked}`]:{color:(c.vars||c).palette[m].main}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]})));function XA(c,m){return typeof m=="object"&&m!==null?c===m:String(c)===String(m)}const YA=wr.jsx(Fb,{checked:!0}),QA=wr.jsx(Fb,{}),Ox=Gt.forwardRef(function(m,p){const T=dh({props:m,name:"MuiRadio"}),{checked:P,checkedIcon:D=YA,color:M="primary",icon:u=QA,name:te,onChange:Y,size:fe="medium",className:he,disabled:Te,disableRipple:ge=!1,slots:we={},slotProps:Ce={},inputProps:We,...gt}=T,At=lg();let Ct=Te;At&&typeof Ct>"u"&&(Ct=At.disabled),Ct??(Ct=!1);const et={...T,disabled:Ct,disableRipple:ge,color:M,size:fe},Je=qA(et),it=WA();let _t=P;const Le=RA(Y,it&&it.onChange);let je=te;it&&(typeof _t>"u"&&(_t=XA(it.value,T.value)),typeof je>"u"&&(je=it.name));const ne=Ce.input??We,[ot,at]=my("root",{ref:p,elementType:KA,className:Co(Je.root,he),shouldForwardComponentProp:!0,externalForwardedProps:{slots:we,slotProps:Ce,...gt},getSlotProps:Lt=>({...Lt,onChange:(rr,...Pr)=>{var xr;(xr=Lt.onChange)==null||xr.call(Lt,rr,...Pr),Le(rr,...Pr)}}),ownerState:et,additionalProps:{type:"radio",icon:Gt.cloneElement(u,{fontSize:u.props.fontSize??fe}),checkedIcon:Gt.cloneElement(D,{fontSize:D.props.fontSize??fe}),disabled:Ct,name:je,checked:_t,slots:we,slotProps:{input:typeof ne=="function"?ne(et):ne}}});return wr.jsx(ot,{...at,classes:Je})});function JA(c){return Vu("MuiFormGroup",c)}kl("MuiFormGroup",["root","row","error"]);const eR=c=>{const{classes:m,row:p,error:T}=c;return zc({root:["root",p&&"row",T&&"error"]},JA,m)},tR=Po("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(c,m)=>{const{ownerState:p}=c;return[m.root,p.row&&m.row]}})({display:"flex",flexDirection:"column",flexWrap:"wrap",variants:[{props:{row:!0},style:{flexDirection:"row"}}]}),rR=Gt.forwardRef(function(m,p){const T=dh({props:m,name:"MuiFormGroup"}),{className:P,row:D=!1,...M}=T,u=lg(),te=xv({props:T,muiFormControl:u,states:["error"]}),Y={...T,row:D,error:te.error},fe=eR(Y);return wr.jsx(tR,{className:Co(fe.root,P),ownerState:Y,ref:p,...M})});function nR(c){return Vu("MuiRadioGroup",c)}kl("MuiRadioGroup",["root","row","error"]);const iR=c=>{const{classes:m,row:p,error:T}=c;return zc({root:["root",p&&"row",T&&"error"]},nR,m)},oR=Gt.forwardRef(function(m,p){const{actions:T,children:P,className:D,defaultValue:M,name:u,onChange:te,value:Y,...fe}=m,he=Gt.useRef(null),Te=iR(m),[ge,we]=Ob({controlled:Y,default:M,name:"RadioGroup"});Gt.useImperativeHandle(T,()=>({focus:()=>{let At=he.current.querySelector("input:not(:disabled):checked");At||(At=he.current.querySelector("input:not(:disabled)")),At&&At.focus()}}),[]);const Ce=eg(p,he),We=Db(u),gt=Gt.useMemo(()=>({name:We,onChange(At){we(At.target.value),te&&te(At,At.target.value)},value:ge}),[We,te,we,ge]);return wr.jsx(Bb.Provider,{value:gt,children:wr.jsx(rR,{role:"radiogroup",ref:Ce,className:Co(Te.root,D),...fe,children:P})})}),sR=Ry(wr.jsx("path",{d:"M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"})),aR=Ry(wr.jsx("path",{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6z"}));function lR(c){return Vu("MuiCircularProgress",c)}kl("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Uf=44,iv=fg`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,ov=fg`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,uR=typeof iv!="string"?kv`
        animation: ${iv} 1.4s linear infinite;
      `:null,cR=typeof ov!="string"?kv`
        animation: ${ov} 1.4s ease-in-out infinite;
      `:null,hR=c=>{const{classes:m,variant:p,color:T,disableShrink:P}=c,D={root:["root",p,`color${yi(T)}`],svg:["svg"],circle:["circle",`circle${yi(p)}`,P&&"circleDisableShrink"]};return zc(D,lR,m)},dR=Po("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(c,m)=>{const{ownerState:p}=c;return[m.root,m[p.variant],m[`color${yi(p.color)}`]]}})(hh(({theme:c})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:c.transitions.create("transform")}},{props:{variant:"indeterminate"},style:uR||{animation:`${iv} 1.4s linear infinite`}},...Object.entries(c.palette).filter(am()).map(([m])=>({props:{color:m},style:{color:(c.vars||c).palette[m].main}}))]}))),fR=Po("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),pR=Po("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(c,m)=>{const{ownerState:p}=c;return[m.circle,m[`circle${yi(p.variant)}`],p.disableShrink&&m.circleDisableShrink]}})(hh(({theme:c})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:c.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:m})=>m.variant==="indeterminate"&&!m.disableShrink,style:cR||{animation:`${ov} 1.4s ease-in-out infinite`}}]}))),mR=Gt.forwardRef(function(m,p){const T=dh({props:m,name:"MuiCircularProgress"}),{className:P,color:D="primary",disableShrink:M=!1,size:u=40,style:te,thickness:Y=3.6,value:fe=0,variant:he="indeterminate",...Te}=T,ge={...T,color:D,disableShrink:M,size:u,thickness:Y,value:fe,variant:he},we=hR(ge),Ce={},We={},gt={};if(he==="determinate"){const At=2*Math.PI*((Uf-Y)/2);Ce.strokeDasharray=At.toFixed(3),gt["aria-valuenow"]=Math.round(fe),Ce.strokeDashoffset=`${((100-fe)/100*At).toFixed(3)}px`,We.transform="rotate(-90deg)"}return wr.jsx(dR,{className:Co(we.root,P),style:{width:u,height:u,...We,...te},ownerState:ge,ref:p,role:"progressbar",...gt,...Te,children:wr.jsx(fR,{className:we.svg,ownerState:ge,viewBox:`${Uf/2} ${Uf/2} ${Uf} ${Uf}`,children:wr.jsx(pR,{className:we.circle,style:Ce,ownerState:ge,cx:Uf,cy:Uf,r:(Uf-Y)/2,fill:"none",strokeWidth:Y})})})});function gR(c){return Vu("MuiButton",c)}const vp=kl("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),yR=Gt.createContext({}),_R=Gt.createContext(void 0),vR=c=>{const{color:m,disableElevation:p,fullWidth:T,size:P,variant:D,loading:M,loadingPosition:u,classes:te}=c,Y={root:["root",M&&"loading",D,`${D}${yi(m)}`,`size${yi(P)}`,`${D}Size${yi(P)}`,`color${yi(m)}`,p&&"disableElevation",T&&"fullWidth",M&&`loadingPosition${yi(u)}`],startIcon:["icon","startIcon",`iconSize${yi(P)}`],endIcon:["icon","endIcon",`iconSize${yi(P)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},fe=zc(Y,gR,te);return{...te,...fe}},Nb=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],xR=Po(Bv,{shouldForwardProp:c=>cm(c)||c==="classes",name:"MuiButton",slot:"Root",overridesResolver:(c,m)=>{const{ownerState:p}=c;return[m.root,m[p.variant],m[`${p.variant}${yi(p.color)}`],m[`size${yi(p.size)}`],m[`${p.variant}Size${yi(p.size)}`],p.color==="inherit"&&m.colorInherit,p.disableElevation&&m.disableElevation,p.fullWidth&&m.fullWidth,p.loading&&m.loading]}})(hh(({theme:c})=>{const m=c.palette.mode==="light"?c.palette.grey[300]:c.palette.grey[800],p=c.palette.mode==="light"?c.palette.grey.A100:c.palette.grey[700];return{...c.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(c.vars||c).shape.borderRadius,transition:c.transitions.create(["background-color","box-shadow","border-color","color"],{duration:c.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${vp.disabled}`]:{color:(c.vars||c).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(c.vars||c).shadows[2],"&:hover":{boxShadow:(c.vars||c).shadows[4],"@media (hover: none)":{boxShadow:(c.vars||c).shadows[2]}},"&:active":{boxShadow:(c.vars||c).shadows[8]},[`&.${vp.focusVisible}`]:{boxShadow:(c.vars||c).shadows[6]},[`&.${vp.disabled}`]:{color:(c.vars||c).palette.action.disabled,boxShadow:(c.vars||c).shadows[0],backgroundColor:(c.vars||c).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${vp.disabled}`]:{border:`1px solid ${(c.vars||c).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(c.palette).filter(am()).map(([T])=>({props:{color:T},style:{"--variant-textColor":(c.vars||c).palette[T].main,"--variant-outlinedColor":(c.vars||c).palette[T].main,"--variant-outlinedBorder":c.vars?`rgba(${c.vars.palette[T].mainChannel} / 0.5)`:lh(c.palette[T].main,.5),"--variant-containedColor":(c.vars||c).palette[T].contrastText,"--variant-containedBg":(c.vars||c).palette[T].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(c.vars||c).palette[T].dark,"--variant-textBg":c.vars?`rgba(${c.vars.palette[T].mainChannel} / ${c.vars.palette.action.hoverOpacity})`:lh(c.palette[T].main,c.palette.action.hoverOpacity),"--variant-outlinedBorder":(c.vars||c).palette[T].main,"--variant-outlinedBg":c.vars?`rgba(${c.vars.palette[T].mainChannel} / ${c.vars.palette.action.hoverOpacity})`:lh(c.palette[T].main,c.palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":c.vars?c.vars.palette.Button.inheritContainedBg:m,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":c.vars?c.vars.palette.Button.inheritContainedHoverBg:p,"--variant-textBg":c.vars?`rgba(${c.vars.palette.text.primaryChannel} / ${c.vars.palette.action.hoverOpacity})`:lh(c.palette.text.primary,c.palette.action.hoverOpacity),"--variant-outlinedBg":c.vars?`rgba(${c.vars.palette.text.primaryChannel} / ${c.vars.palette.action.hoverOpacity})`:lh(c.palette.text.primary,c.palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:c.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:c.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:c.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:c.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:c.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:c.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${vp.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${vp.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:c.transitions.create(["background-color","box-shadow","border-color"],{duration:c.transitions.duration.short}),[`&.${vp.loading}`]:{color:"transparent"}}}]}})),bR=Po("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(c,m)=>{const{ownerState:p}=c;return[m.startIcon,p.loading&&m.startIconLoadingStart,m[`iconSize${yi(p.size)}`]]}})(({theme:c})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:c.transitions.create(["opacity"],{duration:c.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...Nb]})),wR=Po("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(c,m)=>{const{ownerState:p}=c;return[m.endIcon,p.loading&&m.endIconLoadingEnd,m[`iconSize${yi(p.size)}`]]}})(({theme:c})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:c.transitions.create(["opacity"],{duration:c.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...Nb]})),SR=Po("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:c})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(c.vars||c).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),Fx=Po("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),TR=Gt.forwardRef(function(m,p){const T=Gt.useContext(yR),P=Gt.useContext(_R),D=fy(T,m),M=dh({props:D,name:"MuiButton"}),{children:u,color:te="primary",component:Y="button",className:fe,disabled:he=!1,disableElevation:Te=!1,disableFocusRipple:ge=!1,endIcon:we,focusVisibleClassName:Ce,fullWidth:We=!1,id:gt,loading:At=null,loadingIndicator:Ct,loadingPosition:et="center",size:Je="medium",startIcon:it,type:_t,variant:Le="text",...je}=M,ne=Db(gt),ot=Ct??wr.jsx(mR,{"aria-labelledby":ne,color:"inherit",size:16}),at={...M,color:te,component:Y,disabled:he,disableElevation:Te,disableFocusRipple:ge,fullWidth:We,loading:At,loadingIndicator:ot,loadingPosition:et,size:Je,type:_t,variant:Le},Lt=vR(at),rr=(it||At&&et==="start")&&wr.jsx(bR,{className:Lt.startIcon,ownerState:at,children:it||wr.jsx(Fx,{className:Lt.loadingIconPlaceholder,ownerState:at})}),Pr=(we||At&&et==="end")&&wr.jsx(wR,{className:Lt.endIcon,ownerState:at,children:we||wr.jsx(Fx,{className:Lt.loadingIconPlaceholder,ownerState:at})}),xr=P||"",sr=typeof At=="boolean"?wr.jsx("span",{className:Lt.loadingWrapper,style:{display:"contents"},children:At&&wr.jsx(SR,{className:Lt.loadingIndicator,ownerState:at,children:ot})}):null;return wr.jsxs(xR,{ownerState:at,className:Co(T.className,Lt.root,fe,xr),component:Y,disabled:he||At,focusRipple:!ge,focusVisibleClassName:Co(Lt.focusVisible,Ce),ref:p,type:_t,id:At?ne:gt,...je,classes:Lt,children:[rr,et!=="end"&&sr,u,et==="end"&&sr,Pr]})});var Vf={},xp={};/**
 * @license React
 * react-dom-server-legacy.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bx;function CR(){if(Bx)return xp;Bx=1;var c=rg();function m(B){for(var J="https://reactjs.org/docs/error-decoder.html?invariant="+B,de=1;de<arguments.length;de++)J+="&args[]="+encodeURIComponent(arguments[de]);return"Minified React error #"+B+"; visit "+J+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p=Object.prototype.hasOwnProperty,T=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,P={},D={};function M(B){return p.call(D,B)?!0:p.call(P,B)?!1:T.test(B)?D[B]=!0:(P[B]=!0,!1)}function u(B,J,de,Ie,yt,ct,Ot){this.acceptsBooleans=J===2||J===3||J===4,this.attributeName=Ie,this.attributeNamespace=yt,this.mustUseProperty=de,this.propertyName=B,this.type=J,this.sanitizeURL=ct,this.removeEmptyString=Ot}var te={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(B){te[B]=new u(B,0,!1,B,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(B){var J=B[0];te[J]=new u(J,1,!1,B[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(B){te[B]=new u(B,2,!1,B.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(B){te[B]=new u(B,2,!1,B,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(B){te[B]=new u(B,3,!1,B.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(B){te[B]=new u(B,3,!0,B,null,!1,!1)}),["capture","download"].forEach(function(B){te[B]=new u(B,4,!1,B,null,!1,!1)}),["cols","rows","size","span"].forEach(function(B){te[B]=new u(B,6,!1,B,null,!1,!1)}),["rowSpan","start"].forEach(function(B){te[B]=new u(B,5,!1,B.toLowerCase(),null,!1,!1)});var Y=/[\-:]([a-z])/g;function fe(B){return B[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(B){var J=B.replace(Y,fe);te[J]=new u(J,1,!1,B,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(B){var J=B.replace(Y,fe);te[J]=new u(J,1,!1,B,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(B){var J=B.replace(Y,fe);te[J]=new u(J,1,!1,B,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(B){te[B]=new u(B,1,!1,B.toLowerCase(),null,!1,!1)}),te.xlinkHref=new u("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(B){te[B]=new u(B,1,!1,B.toLowerCase(),null,!0,!0)});var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Te=["Webkit","ms","Moz","O"];Object.keys(he).forEach(function(B){Te.forEach(function(J){J=J+B.charAt(0).toUpperCase()+B.substring(1),he[J]=he[B]})});var ge=/["'&<>]/;function we(B){if(typeof B=="boolean"||typeof B=="number")return""+B;B=""+B;var J=ge.exec(B);if(J){var de="",Ie,yt=0;for(Ie=J.index;Ie<B.length;Ie++){switch(B.charCodeAt(Ie)){case 34:J="&quot;";break;case 38:J="&amp;";break;case 39:J="&#x27;";break;case 60:J="&lt;";break;case 62:J="&gt;";break;default:continue}yt!==Ie&&(de+=B.substring(yt,Ie)),yt=Ie+1,de+=J}B=yt!==Ie?de+B.substring(yt,Ie):de}return B}var Ce=/([A-Z])/g,We=/^ms-/,gt=Array.isArray;function At(B,J){return{insertionMode:B,selectedValue:J}}function Ct(B,J,de){switch(J){case"select":return At(1,de.value!=null?de.value:de.defaultValue);case"svg":return At(2,null);case"math":return At(3,null);case"foreignObject":return At(1,null);case"table":return At(4,null);case"thead":case"tbody":case"tfoot":return At(5,null);case"colgroup":return At(7,null);case"tr":return At(6,null)}return 4<=B.insertionMode||B.insertionMode===0?At(1,null):B}var et=new Map;function Je(B,J,de){if(typeof de!="object")throw Error(m(62));J=!0;for(var Ie in de)if(p.call(de,Ie)){var yt=de[Ie];if(yt!=null&&typeof yt!="boolean"&&yt!==""){if(Ie.indexOf("--")===0){var ct=we(Ie);yt=we((""+yt).trim())}else{ct=Ie;var Ot=et.get(ct);Ot!==void 0||(Ot=we(ct.replace(Ce,"-$1").toLowerCase().replace(We,"-ms-")),et.set(ct,Ot)),ct=Ot,yt=typeof yt=="number"?yt===0||p.call(he,Ie)?""+yt:yt+"px":we((""+yt).trim())}J?(J=!1,B.push(' style="',ct,":",yt)):B.push(";",ct,":",yt)}}J||B.push('"')}function it(B,J,de,Ie){switch(de){case"style":Je(B,J,Ie);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<de.length)||de[0]!=="o"&&de[0]!=="O"||de[1]!=="n"&&de[1]!=="N"){if(J=te.hasOwnProperty(de)?te[de]:null,J!==null){switch(typeof Ie){case"function":case"symbol":return;case"boolean":if(!J.acceptsBooleans)return}switch(de=J.attributeName,J.type){case 3:Ie&&B.push(" ",de,'=""');break;case 4:Ie===!0?B.push(" ",de,'=""'):Ie!==!1&&B.push(" ",de,'="',we(Ie),'"');break;case 5:isNaN(Ie)||B.push(" ",de,'="',we(Ie),'"');break;case 6:!isNaN(Ie)&&1<=Ie&&B.push(" ",de,'="',we(Ie),'"');break;default:J.sanitizeURL&&(Ie=""+Ie),B.push(" ",de,'="',we(Ie),'"')}}else if(M(de)){switch(typeof Ie){case"function":case"symbol":return;case"boolean":if(J=de.toLowerCase().slice(0,5),J!=="data-"&&J!=="aria-")return}B.push(" ",de,'="',we(Ie),'"')}}}function _t(B,J,de){if(J!=null){if(de!=null)throw Error(m(60));if(typeof J!="object"||!("__html"in J))throw Error(m(61));J=J.__html,J!=null&&B.push(""+J)}}function Le(B){var J="";return c.Children.forEach(B,function(de){de!=null&&(J+=de)}),J}function je(B,J,de,Ie){B.push(at(de));var yt=de=null,ct;for(ct in J)if(p.call(J,ct)){var Ot=J[ct];if(Ot!=null)switch(ct){case"children":de=Ot;break;case"dangerouslySetInnerHTML":yt=Ot;break;default:it(B,Ie,ct,Ot)}}return B.push(">"),_t(B,yt,de),typeof de=="string"?(B.push(we(de)),null):de}var ne=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,ot=new Map;function at(B){var J=ot.get(B);if(J===void 0){if(!ne.test(B))throw Error(m(65,B));J="<"+B,ot.set(B,J)}return J}function Lt(B,J,de,Ie,yt){switch(J){case"select":B.push(at("select"));var ct=null,Ot=null;for(_r in de)if(p.call(de,_r)){var ar=de[_r];if(ar!=null)switch(_r){case"children":ct=ar;break;case"dangerouslySetInnerHTML":Ot=ar;break;case"defaultValue":case"value":break;default:it(B,Ie,_r,ar)}}return B.push(">"),_t(B,Ot,ct),ct;case"option":Ot=yt.selectedValue,B.push(at("option"));var gr=ar=null,Ar=null,_r=null;for(ct in de)if(p.call(de,ct)){var $n=de[ct];if($n!=null)switch(ct){case"children":ar=$n;break;case"selected":Ar=$n;break;case"dangerouslySetInnerHTML":_r=$n;break;case"value":gr=$n;default:it(B,Ie,ct,$n)}}if(Ot!=null)if(de=gr!==null?""+gr:Le(ar),gt(Ot)){for(Ie=0;Ie<Ot.length;Ie++)if(""+Ot[Ie]===de){B.push(' selected=""');break}}else""+Ot===de&&B.push(' selected=""');else Ar&&B.push(' selected=""');return B.push(">"),_t(B,_r,ar),ar;case"textarea":B.push(at("textarea")),_r=Ot=ct=null;for(ar in de)if(p.call(de,ar)&&(gr=de[ar],gr!=null))switch(ar){case"children":_r=gr;break;case"value":ct=gr;break;case"defaultValue":Ot=gr;break;case"dangerouslySetInnerHTML":throw Error(m(91));default:it(B,Ie,ar,gr)}if(ct===null&&Ot!==null&&(ct=Ot),B.push(">"),_r!=null){if(ct!=null)throw Error(m(92));if(gt(_r)&&1<_r.length)throw Error(m(93));ct=""+_r}return typeof ct=="string"&&ct[0]===`
`&&B.push(`
`),ct!==null&&B.push(we(""+ct)),null;case"input":B.push(at("input")),gr=_r=ar=ct=null;for(Ot in de)if(p.call(de,Ot)&&(Ar=de[Ot],Ar!=null))switch(Ot){case"children":case"dangerouslySetInnerHTML":throw Error(m(399,"input"));case"defaultChecked":gr=Ar;break;case"defaultValue":ar=Ar;break;case"checked":_r=Ar;break;case"value":ct=Ar;break;default:it(B,Ie,Ot,Ar)}return _r!==null?it(B,Ie,"checked",_r):gr!==null&&it(B,Ie,"checked",gr),ct!==null?it(B,Ie,"value",ct):ar!==null&&it(B,Ie,"value",ar),B.push("/>"),null;case"menuitem":B.push(at("menuitem"));for(var _i in de)if(p.call(de,_i)&&(ct=de[_i],ct!=null))switch(_i){case"children":case"dangerouslySetInnerHTML":throw Error(m(400));default:it(B,Ie,_i,ct)}return B.push(">"),null;case"title":B.push(at("title")),ct=null;for($n in de)if(p.call(de,$n)&&(Ot=de[$n],Ot!=null))switch($n){case"children":ct=Ot;break;case"dangerouslySetInnerHTML":throw Error(m(434));default:it(B,Ie,$n,Ot)}return B.push(">"),ct;case"listing":case"pre":B.push(at(J)),Ot=ct=null;for(gr in de)if(p.call(de,gr)&&(ar=de[gr],ar!=null))switch(gr){case"children":ct=ar;break;case"dangerouslySetInnerHTML":Ot=ar;break;default:it(B,Ie,gr,ar)}if(B.push(">"),Ot!=null){if(ct!=null)throw Error(m(60));if(typeof Ot!="object"||!("__html"in Ot))throw Error(m(61));de=Ot.__html,de!=null&&(typeof de=="string"&&0<de.length&&de[0]===`
`?B.push(`
`,de):B.push(""+de))}return typeof ct=="string"&&ct[0]===`
`&&B.push(`
`),ct;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":B.push(at(J));for(var ro in de)if(p.call(de,ro)&&(ct=de[ro],ct!=null))switch(ro){case"children":case"dangerouslySetInnerHTML":throw Error(m(399,J));default:it(B,Ie,ro,ct)}return B.push("/>"),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return je(B,de,J,Ie);case"html":return yt.insertionMode===0&&B.push("<!DOCTYPE html>"),je(B,de,J,Ie);default:if(J.indexOf("-")===-1&&typeof de.is!="string")return je(B,de,J,Ie);B.push(at(J)),Ot=ct=null;for(Ar in de)if(p.call(de,Ar)&&(ar=de[Ar],ar!=null))switch(Ar){case"children":ct=ar;break;case"dangerouslySetInnerHTML":Ot=ar;break;case"style":Je(B,Ie,ar);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:M(Ar)&&typeof ar!="function"&&typeof ar!="symbol"&&B.push(" ",Ar,'="',we(ar),'"')}return B.push(">"),_t(B,Ot,ct),ct}}function rr(B,J,de){if(B.push('<!--$?--><template id="'),de===null)throw Error(m(395));return B.push(de),B.push('"></template>')}function Pr(B,J,de,Ie){switch(de.insertionMode){case 0:case 1:return B.push('<div hidden id="'),B.push(J.segmentPrefix),J=Ie.toString(16),B.push(J),B.push('">');case 2:return B.push('<svg aria-hidden="true" style="display:none" id="'),B.push(J.segmentPrefix),J=Ie.toString(16),B.push(J),B.push('">');case 3:return B.push('<math aria-hidden="true" style="display:none" id="'),B.push(J.segmentPrefix),J=Ie.toString(16),B.push(J),B.push('">');case 4:return B.push('<table hidden id="'),B.push(J.segmentPrefix),J=Ie.toString(16),B.push(J),B.push('">');case 5:return B.push('<table hidden><tbody id="'),B.push(J.segmentPrefix),J=Ie.toString(16),B.push(J),B.push('">');case 6:return B.push('<table hidden><tr id="'),B.push(J.segmentPrefix),J=Ie.toString(16),B.push(J),B.push('">');case 7:return B.push('<table hidden><colgroup id="'),B.push(J.segmentPrefix),J=Ie.toString(16),B.push(J),B.push('">');default:throw Error(m(397))}}function xr(B,J){switch(J.insertionMode){case 0:case 1:return B.push("</div>");case 2:return B.push("</svg>");case 3:return B.push("</math>");case 4:return B.push("</table>");case 5:return B.push("</tbody></table>");case 6:return B.push("</tr></table>");case 7:return B.push("</colgroup></table>");default:throw Error(m(397))}}var sr=/[<\u2028\u2029]/g;function bt(B){return JSON.stringify(B).replace(sr,function(J){switch(J){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}function Et(B,J){return J=J===void 0?"":J,{bootstrapChunks:[],startInlineScript:"<script>",placeholderPrefix:J+"P:",segmentPrefix:J+"S:",boundaryPrefix:J+"B:",idPrefix:J,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1,generateStaticMarkup:B}}function Ht(B,J,de,Ie){return de.generateStaticMarkup?(B.push(we(J)),!1):(J===""?B=Ie:(Ie&&B.push("<!-- -->"),B.push(we(J)),B=!0),B)}var Fe=Object.assign,ht=Symbol.for("react.element"),Vt=Symbol.for("react.portal"),cr=Symbol.for("react.fragment"),Rt=Symbol.for("react.strict_mode"),or=Symbol.for("react.profiler"),Tr=Symbol.for("react.provider"),pr=Symbol.for("react.context"),mr=Symbol.for("react.forward_ref"),Jr=Symbol.for("react.suspense"),Cr=Symbol.for("react.suspense_list"),rn=Symbol.for("react.memo"),jr=Symbol.for("react.lazy"),br=Symbol.for("react.scope"),on=Symbol.for("react.debug_trace_mode"),qr=Symbol.for("react.legacy_hidden"),fn=Symbol.for("react.default_value"),sn=Symbol.iterator;function wn(B){if(B==null)return null;if(typeof B=="function")return B.displayName||B.name||null;if(typeof B=="string")return B;switch(B){case cr:return"Fragment";case Vt:return"Portal";case or:return"Profiler";case Rt:return"StrictMode";case Jr:return"Suspense";case Cr:return"SuspenseList"}if(typeof B=="object")switch(B.$$typeof){case pr:return(B.displayName||"Context")+".Consumer";case Tr:return(B._context.displayName||"Context")+".Provider";case mr:var J=B.render;return B=B.displayName,B||(B=J.displayName||J.name||"",B=B!==""?"ForwardRef("+B+")":"ForwardRef"),B;case rn:return J=B.displayName||null,J!==null?J:wn(B.type)||"Memo";case jr:J=B._payload,B=B._init;try{return wn(B(J))}catch{}}return null}var an={};function An(B,J){if(B=B.contextTypes,!B)return an;var de={},Ie;for(Ie in B)de[Ie]=J[Ie];return de}var Sr=null;function Vn(B,J){if(B!==J){B.context._currentValue2=B.parentValue,B=B.parent;var de=J.parent;if(B===null){if(de!==null)throw Error(m(401))}else{if(de===null)throw Error(m(401));Vn(B,de)}J.context._currentValue2=J.value}}function Hn(B){B.context._currentValue2=B.parentValue,B=B.parent,B!==null&&Hn(B)}function Ti(B){var J=B.parent;J!==null&&Ti(J),B.context._currentValue2=B.value}function ei(B,J){if(B.context._currentValue2=B.parentValue,B=B.parent,B===null)throw Error(m(402));B.depth===J.depth?Vn(B,J):ei(B,J)}function qn(B,J){var de=J.parent;if(de===null)throw Error(m(402));B.depth===de.depth?Vn(B,de):qn(B,de),J.context._currentValue2=J.value}function Nn(B){var J=Sr;J!==B&&(J===null?Ti(B):B===null?Hn(J):J.depth===B.depth?Vn(J,B):J.depth>B.depth?ei(J,B):qn(J,B),Sr=B)}var eo={isMounted:function(){return!1},enqueueSetState:function(B,J){B=B._reactInternals,B.queue!==null&&B.queue.push(J)},enqueueReplaceState:function(B,J){B=B._reactInternals,B.replace=!0,B.queue=[J]},enqueueForceUpdate:function(){}};function Wi(B,J,de,Ie){var yt=B.state!==void 0?B.state:null;B.updater=eo,B.props=de,B.state=yt;var ct={queue:[],replace:!1};B._reactInternals=ct;var Ot=J.contextType;if(B.context=typeof Ot=="object"&&Ot!==null?Ot._currentValue2:Ie,Ot=J.getDerivedStateFromProps,typeof Ot=="function"&&(Ot=Ot(de,yt),yt=Ot==null?yt:Fe({},yt,Ot),B.state=yt),typeof J.getDerivedStateFromProps!="function"&&typeof B.getSnapshotBeforeUpdate!="function"&&(typeof B.UNSAFE_componentWillMount=="function"||typeof B.componentWillMount=="function"))if(J=B.state,typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount(),J!==B.state&&eo.enqueueReplaceState(B,B.state,null),ct.queue!==null&&0<ct.queue.length)if(J=ct.queue,Ot=ct.replace,ct.queue=null,ct.replace=!1,Ot&&J.length===1)B.state=J[0];else{for(ct=Ot?J[0]:B.state,yt=!0,Ot=Ot?1:0;Ot<J.length;Ot++){var ar=J[Ot];ar=typeof ar=="function"?ar.call(B,ct,de,Ie):ar,ar!=null&&(yt?(yt=!1,ct=Fe({},ct,ar)):Fe(ct,ar))}B.state=ct}else ct.queue=null}var Zi={id:1,overflow:""};function ti(B,J,de){var Ie=B.id;B=B.overflow;var yt=32-oi(Ie)-1;Ie&=~(1<<yt),de+=1;var ct=32-oi(J)+yt;if(30<ct){var Ot=yt-yt%5;return ct=(Ie&(1<<Ot)-1).toString(32),Ie>>=Ot,yt-=Ot,{id:1<<32-oi(J)+yt|de<<yt|Ie,overflow:ct+B}}return{id:1<<ct|de<<yt|Ie,overflow:B}}var oi=Math.clz32?Math.clz32:ae,go=Math.log,tt=Math.LN2;function ae(B){return B>>>=0,B===0?32:31-(go(B)/tt|0)|0}function le(B,J){return B===J&&(B!==0||1/B===1/J)||B!==B&&J!==J}var _e=typeof Object.is=="function"?Object.is:le,Me=null,Ve=null,pe=null,Ke=null,He=!1,nt=!1,ft=0,Ye=null,Dt=0;function Yt(){if(Me===null)throw Error(m(321));return Me}function hr(){if(0<Dt)throw Error(m(312));return{memoizedState:null,queue:null,next:null}}function kr(){return Ke===null?pe===null?(He=!1,pe=Ke=hr()):(He=!0,Ke=pe):Ke.next===null?(He=!1,Ke=Ke.next=hr()):(He=!0,Ke=Ke.next),Ke}function Kr(){Ve=Me=null,nt=!1,pe=null,Dt=0,Ke=Ye=null}function $r(B,J){return typeof J=="function"?J(B):J}function Tt(B,J,de){if(Me=Yt(),Ke=kr(),He){var Ie=Ke.queue;if(J=Ie.dispatch,Ye!==null&&(de=Ye.get(Ie),de!==void 0)){Ye.delete(Ie),Ie=Ke.memoizedState;do Ie=B(Ie,de.action),de=de.next;while(de!==null);return Ke.memoizedState=Ie,[Ie,J]}return[Ke.memoizedState,J]}return B=B===$r?typeof J=="function"?J():J:de!==void 0?de(J):J,Ke.memoizedState=B,B=Ke.queue={last:null,dispatch:null},B=B.dispatch=_n.bind(null,Me,B),[Ke.memoizedState,B]}function Sn(B,J){if(Me=Yt(),Ke=kr(),J=J===void 0?null:J,Ke!==null){var de=Ke.memoizedState;if(de!==null&&J!==null){var Ie=de[1];e:if(Ie===null)Ie=!1;else{for(var yt=0;yt<Ie.length&&yt<J.length;yt++)if(!_e(J[yt],Ie[yt])){Ie=!1;break e}Ie=!0}if(Ie)return de[0]}}return B=B(),Ke.memoizedState=[B,J],B}function _n(B,J,de){if(25<=Dt)throw Error(m(301));if(B===Me)if(nt=!0,B={action:de,next:null},Ye===null&&(Ye=new Map),de=Ye.get(J),de===void 0)Ye.set(J,B);else{for(J=de;J.next!==null;)J=J.next;J.next=B}}function Tn(){throw Error(m(394))}function Br(){}var Ft={readContext:function(B){return B._currentValue2},useContext:function(B){return Yt(),B._currentValue2},useMemo:Sn,useReducer:Tt,useRef:function(B){Me=Yt(),Ke=kr();var J=Ke.memoizedState;return J===null?(B={current:B},Ke.memoizedState=B):J},useState:function(B){return Tt($r,B)},useInsertionEffect:Br,useLayoutEffect:function(){},useCallback:function(B,J){return Sn(function(){return B},J)},useImperativeHandle:Br,useEffect:Br,useDebugValue:Br,useDeferredValue:function(B){return Yt(),B},useTransition:function(){return Yt(),[!1,Tn]},useId:function(){var B=Ve.treeContext,J=B.overflow;B=B.id,B=(B&~(1<<32-oi(B)-1)).toString(32)+J;var de=Fr;if(de===null)throw Error(m(404));return J=ft++,B=":"+de.idPrefix+"R"+B,0<J&&(B+="H"+J.toString(32)),B+":"},useMutableSource:function(B,J){return Yt(),J(B._source)},useSyncExternalStore:function(B,J,de){if(de===void 0)throw Error(m(407));return de()}},Fr=null,nn=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function Zn(B){return console.error(B),null}function Gn(){}function Eo(B,J,de,Ie,yt,ct,Ot,ar,gr){var Ar=[],_r=new Set;return J={destination:null,responseState:J,progressiveChunkSize:Ie===void 0?12800:Ie,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:_r,pingedTasks:Ar,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:yt===void 0?Zn:yt,onAllReady:Gn,onShellReady:Ot===void 0?Gn:Ot,onShellError:Gn,onFatalError:Gn},de=Qs(J,0,null,de,!1,!1),de.parentFlushed=!0,B=cn(J,B,null,de,_r,an,null,Zi),Ar.push(B),J}function cn(B,J,de,Ie,yt,ct,Ot,ar){B.allPendingTasks++,de===null?B.pendingRootTasks++:de.pendingTasks++;var gr={node:J,ping:function(){var Ar=B.pingedTasks;Ar.push(gr),Ar.length===1&&ss(B)},blockedBoundary:de,blockedSegment:Ie,abortSet:yt,legacyContext:ct,context:Ot,treeContext:ar};return yt.add(gr),gr}function Qs(B,J,de,Ie,yt,ct){return{status:0,id:-1,index:J,parentFlushed:!1,chunks:[],children:[],formatContext:Ie,boundary:de,lastPushedText:yt,textEmbedded:ct}}function Js(B,J){if(B=B.onError(J),B!=null&&typeof B!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof B+'" instead');return B}function Es(B,J){var de=B.onShellError;de(J),de=B.onFatalError,de(J),B.destination!==null?(B.status=2,B.destination.destroy(J)):(B.status=1,B.fatalError=J)}function tl(B,J,de,Ie,yt){for(Me={},Ve=J,ft=0,B=de(Ie,yt);nt;)nt=!1,ft=0,Dt+=1,Ke=null,B=de(Ie,yt);return Kr(),B}function Go(B,J,de,Ie){var yt=de.render(),ct=Ie.childContextTypes;if(ct!=null){var Ot=J.legacyContext;if(typeof de.getChildContext!="function")Ie=Ot;else{de=de.getChildContext();for(var ar in de)if(!(ar in ct))throw Error(m(108,wn(Ie)||"Unknown",ar));Ie=Fe({},Ot,de)}J.legacyContext=Ie,ui(B,J,yt),J.legacyContext=Ot}else ui(B,J,yt)}function Da(B,J){if(B&&B.defaultProps){J=Fe({},J),B=B.defaultProps;for(var de in B)J[de]===void 0&&(J[de]=B[de]);return J}return J}function hn(B,J,de,Ie,yt){if(typeof de=="function")if(de.prototype&&de.prototype.isReactComponent){yt=An(de,J.legacyContext);var ct=de.contextType;ct=new de(Ie,typeof ct=="object"&&ct!==null?ct._currentValue2:yt),Wi(ct,de,Ie,yt),Go(B,J,ct,de)}else{ct=An(de,J.legacyContext),yt=tl(B,J,de,Ie,ct);var Ot=ft!==0;if(typeof yt=="object"&&yt!==null&&typeof yt.render=="function"&&yt.$$typeof===void 0)Wi(yt,de,Ie,ct),Go(B,J,yt,de);else if(Ot){Ie=J.treeContext,J.treeContext=ti(Ie,1,0);try{ui(B,J,yt)}finally{J.treeContext=Ie}}else ui(B,J,yt)}else if(typeof de=="string"){switch(yt=J.blockedSegment,ct=Lt(yt.chunks,de,Ie,B.responseState,yt.formatContext),yt.lastPushedText=!1,Ot=yt.formatContext,yt.formatContext=Ct(Ot,de,Ie),Oa(B,J,ct),yt.formatContext=Ot,de){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:yt.chunks.push("</",de,">")}yt.lastPushedText=!1}else{switch(de){case qr:case on:case Rt:case or:case cr:ui(B,J,Ie.children);return;case Cr:ui(B,J,Ie.children);return;case br:throw Error(m(343));case Jr:e:{de=J.blockedBoundary,yt=J.blockedSegment,ct=Ie.fallback,Ie=Ie.children,Ot=new Set;var ar={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:Ot,errorDigest:null},gr=Qs(B,yt.chunks.length,ar,yt.formatContext,!1,!1);yt.children.push(gr),yt.lastPushedText=!1;var Ar=Qs(B,0,null,yt.formatContext,!1,!1);Ar.parentFlushed=!0,J.blockedBoundary=ar,J.blockedSegment=Ar;try{if(Oa(B,J,Ie),B.responseState.generateStaticMarkup||Ar.lastPushedText&&Ar.textEmbedded&&Ar.chunks.push("<!-- -->"),Ar.status=1,Oo(ar,Ar),ar.pendingTasks===0)break e}catch(_r){Ar.status=4,ar.forceClientRender=!0,ar.errorDigest=Js(B,_r)}finally{J.blockedBoundary=de,J.blockedSegment=yt}J=cn(B,ct,de,gr,Ot,J.legacyContext,J.context,J.treeContext),B.pingedTasks.push(J)}return}if(typeof de=="object"&&de!==null)switch(de.$$typeof){case mr:if(Ie=tl(B,J,de.render,Ie,yt),ft!==0){de=J.treeContext,J.treeContext=ti(de,1,0);try{ui(B,J,Ie)}finally{J.treeContext=de}}else ui(B,J,Ie);return;case rn:de=de.type,Ie=Da(de,Ie),hn(B,J,de,Ie,yt);return;case Tr:if(yt=Ie.children,de=de._context,Ie=Ie.value,ct=de._currentValue2,de._currentValue2=Ie,Ot=Sr,Sr=Ie={parent:Ot,depth:Ot===null?0:Ot.depth+1,context:de,parentValue:ct,value:Ie},J.context=Ie,ui(B,J,yt),B=Sr,B===null)throw Error(m(403));Ie=B.parentValue,B.context._currentValue2=Ie===fn?B.context._defaultValue:Ie,B=Sr=B.parent,J.context=B;return;case pr:Ie=Ie.children,Ie=Ie(de._currentValue2),ui(B,J,Ie);return;case jr:yt=de._init,de=yt(de._payload),Ie=Da(de,Ie),hn(B,J,de,Ie,void 0);return}throw Error(m(130,de==null?de:typeof de,""))}}function ui(B,J,de){if(J.node=de,typeof de=="object"&&de!==null){switch(de.$$typeof){case ht:hn(B,J,de.type,de.props,de.ref);return;case Vt:throw Error(m(257));case jr:var Ie=de._init;de=Ie(de._payload),ui(B,J,de);return}if(gt(de)){Kn(B,J,de);return}if(de===null||typeof de!="object"?Ie=null:(Ie=sn&&de[sn]||de["@@iterator"],Ie=typeof Ie=="function"?Ie:null),Ie&&(Ie=Ie.call(de))){if(de=Ie.next(),!de.done){var yt=[];do yt.push(de.value),de=Ie.next();while(!de.done);Kn(B,J,yt)}return}throw B=Object.prototype.toString.call(de),Error(m(31,B==="[object Object]"?"object with keys {"+Object.keys(de).join(", ")+"}":B))}typeof de=="string"?(Ie=J.blockedSegment,Ie.lastPushedText=Ht(J.blockedSegment.chunks,de,B.responseState,Ie.lastPushedText)):typeof de=="number"&&(Ie=J.blockedSegment,Ie.lastPushedText=Ht(J.blockedSegment.chunks,""+de,B.responseState,Ie.lastPushedText))}function Kn(B,J,de){for(var Ie=de.length,yt=0;yt<Ie;yt++){var ct=J.treeContext;J.treeContext=ti(ct,Ie,yt);try{Oa(B,J,de[yt])}finally{J.treeContext=ct}}}function Oa(B,J,de){var Ie=J.blockedSegment.formatContext,yt=J.legacyContext,ct=J.context;try{return ui(B,J,de)}catch(gr){if(Kr(),typeof gr=="object"&&gr!==null&&typeof gr.then=="function"){de=gr;var Ot=J.blockedSegment,ar=Qs(B,Ot.chunks.length,null,Ot.formatContext,Ot.lastPushedText,!0);Ot.children.push(ar),Ot.lastPushedText=!1,B=cn(B,J.node,J.blockedBoundary,ar,J.abortSet,J.legacyContext,J.context,J.treeContext).ping,de.then(B,B),J.blockedSegment.formatContext=Ie,J.legacyContext=yt,J.context=ct,Nn(ct)}else throw J.blockedSegment.formatContext=Ie,J.legacyContext=yt,J.context=ct,Nn(ct),gr}}function os(B){var J=B.blockedBoundary;B=B.blockedSegment,B.status=3,to(this,J,B)}function Xl(B,J,de){var Ie=B.blockedBoundary;B.blockedSegment.status=3,Ie===null?(J.allPendingTasks--,J.status!==2&&(J.status=2,J.destination!==null&&J.destination.push(null))):(Ie.pendingTasks--,Ie.forceClientRender||(Ie.forceClientRender=!0,B=de===void 0?Error(m(432)):de,Ie.errorDigest=J.onError(B),Ie.parentFlushed&&J.clientRenderedBoundaries.push(Ie)),Ie.fallbackAbortableTasks.forEach(function(yt){return Xl(yt,J,de)}),Ie.fallbackAbortableTasks.clear(),J.allPendingTasks--,J.allPendingTasks===0&&(Ie=J.onAllReady,Ie()))}function Oo(B,J){if(J.chunks.length===0&&J.children.length===1&&J.children[0].boundary===null){var de=J.children[0];de.id=J.id,de.parentFlushed=!0,de.status===1&&Oo(B,de)}else B.completedSegments.push(J)}function to(B,J,de){if(J===null){if(de.parentFlushed){if(B.completedRootSegment!==null)throw Error(m(389));B.completedRootSegment=de}B.pendingRootTasks--,B.pendingRootTasks===0&&(B.onShellError=Gn,J=B.onShellReady,J())}else J.pendingTasks--,J.forceClientRender||(J.pendingTasks===0?(de.parentFlushed&&de.status===1&&Oo(J,de),J.parentFlushed&&B.completedBoundaries.push(J),J.fallbackAbortableTasks.forEach(os,B),J.fallbackAbortableTasks.clear()):de.parentFlushed&&de.status===1&&(Oo(J,de),J.completedSegments.length===1&&J.parentFlushed&&B.partialBoundaries.push(J)));B.allPendingTasks--,B.allPendingTasks===0&&(B=B.onAllReady,B())}function ss(B){if(B.status!==2){var J=Sr,de=nn.current;nn.current=Ft;var Ie=Fr;Fr=B.responseState;try{var yt=B.pingedTasks,ct;for(ct=0;ct<yt.length;ct++){var Ot=yt[ct],ar=B,gr=Ot.blockedSegment;if(gr.status===0){Nn(Ot.context);try{ui(ar,Ot,Ot.node),ar.responseState.generateStaticMarkup||gr.lastPushedText&&gr.textEmbedded&&gr.chunks.push("<!-- -->"),Ot.abortSet.delete(Ot),gr.status=1,to(ar,Ot.blockedBoundary,gr)}catch(en){if(Kr(),typeof en=="object"&&en!==null&&typeof en.then=="function"){var Ar=Ot.ping;en.then(Ar,Ar)}else{Ot.abortSet.delete(Ot),gr.status=4;var _r=Ot.blockedBoundary,$n=en,_i=Js(ar,$n);if(_r===null?Es(ar,$n):(_r.pendingTasks--,_r.forceClientRender||(_r.forceClientRender=!0,_r.errorDigest=_i,_r.parentFlushed&&ar.clientRenderedBoundaries.push(_r))),ar.allPendingTasks--,ar.allPendingTasks===0){var ro=ar.onAllReady;ro()}}}finally{}}}yt.splice(0,ct),B.destination!==null&&_a(B,B.destination)}catch(en){Js(B,en),Es(B,en)}finally{Fr=Ie,nn.current=de,de===Ft&&Nn(J)}}}function rl(B,J,de){switch(de.parentFlushed=!0,de.status){case 0:var Ie=de.id=B.nextSegmentId++;return de.lastPushedText=!1,de.textEmbedded=!1,B=B.responseState,J.push('<template id="'),J.push(B.placeholderPrefix),B=Ie.toString(16),J.push(B),J.push('"></template>');case 1:de.status=2;var yt=!0;Ie=de.chunks;var ct=0;de=de.children;for(var Ot=0;Ot<de.length;Ot++){for(yt=de[Ot];ct<yt.index;ct++)J.push(Ie[ct]);yt=yo(B,J,yt)}for(;ct<Ie.length-1;ct++)J.push(Ie[ct]);return ct<Ie.length&&(yt=J.push(Ie[ct])),yt;default:throw Error(m(390))}}function yo(B,J,de){var Ie=de.boundary;if(Ie===null)return rl(B,J,de);if(Ie.parentFlushed=!0,Ie.forceClientRender)return B.responseState.generateStaticMarkup||(Ie=Ie.errorDigest,J.push("<!--$!-->"),J.push("<template"),Ie&&(J.push(' data-dgst="'),Ie=we(Ie),J.push(Ie),J.push('"')),J.push("></template>")),rl(B,J,de),B=B.responseState.generateStaticMarkup?!0:J.push("<!--/$-->"),B;if(0<Ie.pendingTasks){Ie.rootSegmentID=B.nextSegmentId++,0<Ie.completedSegments.length&&B.partialBoundaries.push(Ie);var yt=B.responseState,ct=yt.nextSuspenseID++;return yt=yt.boundaryPrefix+ct.toString(16),Ie=Ie.id=yt,rr(J,B.responseState,Ie),rl(B,J,de),J.push("<!--/$-->")}if(Ie.byteSize>B.progressiveChunkSize)return Ie.rootSegmentID=B.nextSegmentId++,B.completedBoundaries.push(Ie),rr(J,B.responseState,Ie.id),rl(B,J,de),J.push("<!--/$-->");if(B.responseState.generateStaticMarkup||J.push("<!--$-->"),de=Ie.completedSegments,de.length!==1)throw Error(m(391));return yo(B,J,de[0]),B=B.responseState.generateStaticMarkup?!0:J.push("<!--/$-->"),B}function ya(B,J,de){return Pr(J,B.responseState,de.formatContext,de.id),yo(B,J,de),xr(J,de.formatContext)}function Yl(B,J,de){for(var Ie=de.completedSegments,yt=0;yt<Ie.length;yt++)mu(B,J,de,Ie[yt]);if(Ie.length=0,B=B.responseState,Ie=de.id,de=de.rootSegmentID,J.push(B.startInlineScript),B.sentCompleteBoundaryFunction?J.push('$RC("'):(B.sentCompleteBoundaryFunction=!0,J.push('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("')),Ie===null)throw Error(m(395));return de=de.toString(16),J.push(Ie),J.push('","'),J.push(B.segmentPrefix),J.push(de),J.push('")<\/script>')}function mu(B,J,de,Ie){if(Ie.status===2)return!0;var yt=Ie.id;if(yt===-1){if((Ie.id=de.rootSegmentID)===-1)throw Error(m(392));return ya(B,J,Ie)}return ya(B,J,Ie),B=B.responseState,J.push(B.startInlineScript),B.sentCompleteSegmentFunction?J.push('$RS("'):(B.sentCompleteSegmentFunction=!0,J.push('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("')),J.push(B.segmentPrefix),yt=yt.toString(16),J.push(yt),J.push('","'),J.push(B.placeholderPrefix),J.push(yt),J.push('")<\/script>')}function _a(B,J){try{var de=B.completedRootSegment;if(de!==null&&B.pendingRootTasks===0){yo(B,J,de),B.completedRootSegment=null;var Ie=B.responseState.bootstrapChunks;for(de=0;de<Ie.length-1;de++)J.push(Ie[de]);de<Ie.length&&J.push(Ie[de])}var yt=B.clientRenderedBoundaries,ct;for(ct=0;ct<yt.length;ct++){var Ot=yt[ct];Ie=J;var ar=B.responseState,gr=Ot.id,Ar=Ot.errorDigest,_r=Ot.errorMessage,$n=Ot.errorComponentStack;if(Ie.push(ar.startInlineScript),ar.sentClientRenderFunction?Ie.push('$RX("'):(ar.sentClientRenderFunction=!0,Ie.push('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("')),gr===null)throw Error(m(395));if(Ie.push(gr),Ie.push('"'),Ar||_r||$n){Ie.push(",");var _i=bt(Ar||"");Ie.push(_i)}if(_r||$n){Ie.push(",");var ro=bt(_r||"");Ie.push(ro)}if($n){Ie.push(",");var en=bt($n);Ie.push(en)}if(!Ie.push(")<\/script>")){B.destination=null,ct++,yt.splice(0,ct);return}}yt.splice(0,ct);var as=B.completedBoundaries;for(ct=0;ct<as.length;ct++)if(!Yl(B,J,as[ct])){B.destination=null,ct++,as.splice(0,ct);return}as.splice(0,ct);var Io=B.partialBoundaries;for(ct=0;ct<Io.length;ct++){var Mo=Io[ct];e:{yt=B,Ot=J;var ci=Mo.completedSegments;for(ar=0;ar<ci.length;ar++)if(!mu(yt,Ot,Mo,ci[ar])){ar++,ci.splice(0,ar);var hi=!1;break e}ci.splice(0,ar),hi=!0}if(!hi){B.destination=null,ct++,Io.splice(0,ct);return}}Io.splice(0,ct);var On=B.completedBoundaries;for(ct=0;ct<On.length;ct++)if(!Yl(B,J,On[ct])){B.destination=null,ct++,On.splice(0,ct);return}On.splice(0,ct)}finally{B.allPendingTasks===0&&B.pingedTasks.length===0&&B.clientRenderedBoundaries.length===0&&B.completedBoundaries.length===0&&J.push(null)}}function Ql(B,J){try{var de=B.abortableTasks;de.forEach(function(Ie){return Xl(Ie,B,J)}),de.clear(),B.destination!==null&&_a(B,B.destination)}catch(Ie){Js(B,Ie),Es(B,Ie)}}function Fa(){}function Is(B,J,de,Ie){var yt=!1,ct=null,Ot="",ar={push:function(Ar){return Ar!==null&&(Ot+=Ar),!0},destroy:function(Ar){yt=!0,ct=Ar}},gr=!1;if(B=Eo(B,Et(de,J?J.identifierPrefix:void 0),{insertionMode:1,selectedValue:null},1/0,Fa,void 0,function(){gr=!0}),ss(B),Ql(B,Ie),B.status===1)B.status=2,ar.destroy(B.fatalError);else if(B.status!==2&&B.destination===null){B.destination=ar;try{_a(B,ar)}catch(Ar){Js(B,Ar),Es(B,Ar)}}if(yt)throw ct;if(!gr)throw Error(m(426));return Ot}return xp.renderToNodeStream=function(){throw Error(m(207))},xp.renderToStaticMarkup=function(B,J){return Is(B,J,!0,'The server used "renderToStaticMarkup" which does not support Suspense. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')},xp.renderToStaticNodeStream=function(){throw Error(m(208))},xp.renderToString=function(B,J){return Is(B,J,!1,'The server used "renderToString" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')},xp.version="18.3.1",xp}var qg={};/**
 * @license React
 * react-dom-server.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nx;function PR(){if(Nx)return qg;Nx=1;var c=rg();function m($){for(var K="https://reactjs.org/docs/error-decoder.html?invariant="+$,ue=1;ue<arguments.length;ue++)K+="&args[]="+encodeURIComponent(arguments[ue]);return"Minified React error #"+$+"; visit "+K+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p=null,T=0;function P($,K){if(K.length!==0)if(512<K.length)0<T&&($.enqueue(new Uint8Array(p.buffer,0,T)),p=new Uint8Array(512),T=0),$.enqueue(K);else{var ue=p.length-T;ue<K.length&&(ue===0?$.enqueue(p):(p.set(K.subarray(0,ue),T),$.enqueue(p),K=K.subarray(ue)),p=new Uint8Array(512),T=0),p.set(K,T),T+=K.length}}function D($,K){return P($,K),!0}function M($){p&&0<T&&($.enqueue(new Uint8Array(p.buffer,0,T)),p=null,T=0)}var u=new TextEncoder;function te($){return u.encode($)}function Y($){return u.encode($)}function fe($,K){typeof $.error=="function"?$.error(K):$.close()}var he=Object.prototype.hasOwnProperty,Te=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ge={},we={};function Ce($){return he.call(we,$)?!0:he.call(ge,$)?!1:Te.test($)?we[$]=!0:(ge[$]=!0,!1)}function We($,K,ue,Ee,vt,st,$t){this.acceptsBooleans=K===2||K===3||K===4,this.attributeName=Ee,this.attributeNamespace=vt,this.mustUseProperty=ue,this.propertyName=$,this.type=K,this.sanitizeURL=st,this.removeEmptyString=$t}var gt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function($){gt[$]=new We($,0,!1,$,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function($){var K=$[0];gt[K]=new We(K,1,!1,$[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function($){gt[$]=new We($,2,!1,$.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function($){gt[$]=new We($,2,!1,$,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function($){gt[$]=new We($,3,!1,$.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function($){gt[$]=new We($,3,!0,$,null,!1,!1)}),["capture","download"].forEach(function($){gt[$]=new We($,4,!1,$,null,!1,!1)}),["cols","rows","size","span"].forEach(function($){gt[$]=new We($,6,!1,$,null,!1,!1)}),["rowSpan","start"].forEach(function($){gt[$]=new We($,5,!1,$.toLowerCase(),null,!1,!1)});var At=/[\-:]([a-z])/g;function Ct($){return $[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function($){var K=$.replace(At,Ct);gt[K]=new We(K,1,!1,$,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function($){var K=$.replace(At,Ct);gt[K]=new We(K,1,!1,$,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function($){var K=$.replace(At,Ct);gt[K]=new We(K,1,!1,$,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function($){gt[$]=new We($,1,!1,$.toLowerCase(),null,!1,!1)}),gt.xlinkHref=new We("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function($){gt[$]=new We($,1,!1,$.toLowerCase(),null,!0,!0)});var et={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Je=["Webkit","ms","Moz","O"];Object.keys(et).forEach(function($){Je.forEach(function(K){K=K+$.charAt(0).toUpperCase()+$.substring(1),et[K]=et[$]})});var it=/["'&<>]/;function _t($){if(typeof $=="boolean"||typeof $=="number")return""+$;$=""+$;var K=it.exec($);if(K){var ue="",Ee,vt=0;for(Ee=K.index;Ee<$.length;Ee++){switch($.charCodeAt(Ee)){case 34:K="&quot;";break;case 38:K="&amp;";break;case 39:K="&#x27;";break;case 60:K="&lt;";break;case 62:K="&gt;";break;default:continue}vt!==Ee&&(ue+=$.substring(vt,Ee)),vt=Ee+1,ue+=K}$=vt!==Ee?ue+$.substring(vt,Ee):ue}return $}var Le=/([A-Z])/g,je=/^ms-/,ne=Array.isArray,ot=Y("<script>"),at=Y("<\/script>"),Lt=Y('<script src="'),rr=Y('<script type="module" src="'),Pr=Y('" async=""><\/script>'),xr=/(<\/|<)(s)(cript)/gi;function sr($,K,ue,Ee){return""+K+(ue==="s"?"\\u0073":"\\u0053")+Ee}function bt($,K,ue,Ee,vt){$=$===void 0?"":$,K=K===void 0?ot:Y('<script nonce="'+_t(K)+'">');var st=[];if(ue!==void 0&&st.push(K,te((""+ue).replace(xr,sr)),at),Ee!==void 0)for(ue=0;ue<Ee.length;ue++)st.push(Lt,te(_t(Ee[ue])),Pr);if(vt!==void 0)for(Ee=0;Ee<vt.length;Ee++)st.push(rr,te(_t(vt[Ee])),Pr);return{bootstrapChunks:st,startInlineScript:K,placeholderPrefix:Y($+"P:"),segmentPrefix:Y($+"S:"),boundaryPrefix:$+"B:",idPrefix:$,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1}}function Et($,K){return{insertionMode:$,selectedValue:K}}function Ht($){return Et($==="http://www.w3.org/2000/svg"?2:$==="http://www.w3.org/1998/Math/MathML"?3:0,null)}function Fe($,K,ue){switch(K){case"select":return Et(1,ue.value!=null?ue.value:ue.defaultValue);case"svg":return Et(2,null);case"math":return Et(3,null);case"foreignObject":return Et(1,null);case"table":return Et(4,null);case"thead":case"tbody":case"tfoot":return Et(5,null);case"colgroup":return Et(7,null);case"tr":return Et(6,null)}return 4<=$.insertionMode||$.insertionMode===0?Et(1,null):$}var ht=Y("<!-- -->");function Vt($,K,ue,Ee){return K===""?Ee:(Ee&&$.push(ht),$.push(te(_t(K))),!0)}var cr=new Map,Rt=Y(' style="'),or=Y(":"),Tr=Y(";");function pr($,K,ue){if(typeof ue!="object")throw Error(m(62));K=!0;for(var Ee in ue)if(he.call(ue,Ee)){var vt=ue[Ee];if(vt!=null&&typeof vt!="boolean"&&vt!==""){if(Ee.indexOf("--")===0){var st=te(_t(Ee));vt=te(_t((""+vt).trim()))}else{st=Ee;var $t=cr.get(st);$t!==void 0||($t=Y(_t(st.replace(Le,"-$1").toLowerCase().replace(je,"-ms-"))),cr.set(st,$t)),st=$t,vt=typeof vt=="number"?vt===0||he.call(et,Ee)?te(""+vt):te(vt+"px"):te(_t((""+vt).trim()))}K?(K=!1,$.push(Rt,st,or,vt)):$.push(Tr,st,or,vt)}}K||$.push(Cr)}var mr=Y(" "),Jr=Y('="'),Cr=Y('"'),rn=Y('=""');function jr($,K,ue,Ee){switch(ue){case"style":pr($,K,Ee);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<ue.length)||ue[0]!=="o"&&ue[0]!=="O"||ue[1]!=="n"&&ue[1]!=="N"){if(K=gt.hasOwnProperty(ue)?gt[ue]:null,K!==null){switch(typeof Ee){case"function":case"symbol":return;case"boolean":if(!K.acceptsBooleans)return}switch(ue=te(K.attributeName),K.type){case 3:Ee&&$.push(mr,ue,rn);break;case 4:Ee===!0?$.push(mr,ue,rn):Ee!==!1&&$.push(mr,ue,Jr,te(_t(Ee)),Cr);break;case 5:isNaN(Ee)||$.push(mr,ue,Jr,te(_t(Ee)),Cr);break;case 6:!isNaN(Ee)&&1<=Ee&&$.push(mr,ue,Jr,te(_t(Ee)),Cr);break;default:K.sanitizeURL&&(Ee=""+Ee),$.push(mr,ue,Jr,te(_t(Ee)),Cr)}}else if(Ce(ue)){switch(typeof Ee){case"function":case"symbol":return;case"boolean":if(K=ue.toLowerCase().slice(0,5),K!=="data-"&&K!=="aria-")return}$.push(mr,te(ue),Jr,te(_t(Ee)),Cr)}}}var br=Y(">"),on=Y("/>");function qr($,K,ue){if(K!=null){if(ue!=null)throw Error(m(60));if(typeof K!="object"||!("__html"in K))throw Error(m(61));K=K.__html,K!=null&&$.push(te(""+K))}}function fn($){var K="";return c.Children.forEach($,function(ue){ue!=null&&(K+=ue)}),K}var sn=Y(' selected=""');function wn($,K,ue,Ee){$.push(Vn(ue));var vt=ue=null,st;for(st in K)if(he.call(K,st)){var $t=K[st];if($t!=null)switch(st){case"children":ue=$t;break;case"dangerouslySetInnerHTML":vt=$t;break;default:jr($,Ee,st,$t)}}return $.push(br),qr($,vt,ue),typeof ue=="string"?($.push(te(_t(ue))),null):ue}var an=Y(`
`),An=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,Sr=new Map;function Vn($){var K=Sr.get($);if(K===void 0){if(!An.test($))throw Error(m(65,$));K=Y("<"+$),Sr.set($,K)}return K}var Hn=Y("<!DOCTYPE html>");function Ti($,K,ue,Ee,vt){switch(K){case"select":$.push(Vn("select"));var st=null,$t=null;for(Yr in ue)if(he.call(ue,Yr)){var lr=ue[Yr];if(lr!=null)switch(Yr){case"children":st=lr;break;case"dangerouslySetInnerHTML":$t=lr;break;case"defaultValue":case"value":break;default:jr($,Ee,Yr,lr)}}return $.push(br),qr($,$t,st),st;case"option":$t=vt.selectedValue,$.push(Vn("option"));var Nr=lr=null,mn=null,Yr=null;for(st in ue)if(he.call(ue,st)){var pi=ue[st];if(pi!=null)switch(st){case"children":lr=pi;break;case"selected":mn=pi;break;case"dangerouslySetInnerHTML":Yr=pi;break;case"value":Nr=pi;default:jr($,Ee,st,pi)}}if($t!=null)if(ue=Nr!==null?""+Nr:fn(lr),ne($t)){for(Ee=0;Ee<$t.length;Ee++)if(""+$t[Ee]===ue){$.push(sn);break}}else""+$t===ue&&$.push(sn);else mn&&$.push(sn);return $.push(br),qr($,Yr,lr),lr;case"textarea":$.push(Vn("textarea")),Yr=$t=st=null;for(lr in ue)if(he.call(ue,lr)&&(Nr=ue[lr],Nr!=null))switch(lr){case"children":Yr=Nr;break;case"value":st=Nr;break;case"defaultValue":$t=Nr;break;case"dangerouslySetInnerHTML":throw Error(m(91));default:jr($,Ee,lr,Nr)}if(st===null&&$t!==null&&(st=$t),$.push(br),Yr!=null){if(st!=null)throw Error(m(92));if(ne(Yr)&&1<Yr.length)throw Error(m(93));st=""+Yr}return typeof st=="string"&&st[0]===`
`&&$.push(an),st!==null&&$.push(te(_t(""+st))),null;case"input":$.push(Vn("input")),Nr=Yr=lr=st=null;for($t in ue)if(he.call(ue,$t)&&(mn=ue[$t],mn!=null))switch($t){case"children":case"dangerouslySetInnerHTML":throw Error(m(399,"input"));case"defaultChecked":Nr=mn;break;case"defaultValue":lr=mn;break;case"checked":Yr=mn;break;case"value":st=mn;break;default:jr($,Ee,$t,mn)}return Yr!==null?jr($,Ee,"checked",Yr):Nr!==null&&jr($,Ee,"checked",Nr),st!==null?jr($,Ee,"value",st):lr!==null&&jr($,Ee,"value",lr),$.push(on),null;case"menuitem":$.push(Vn("menuitem"));for(var Bo in ue)if(he.call(ue,Bo)&&(st=ue[Bo],st!=null))switch(Bo){case"children":case"dangerouslySetInnerHTML":throw Error(m(400));default:jr($,Ee,Bo,st)}return $.push(br),null;case"title":$.push(Vn("title")),st=null;for(pi in ue)if(he.call(ue,pi)&&($t=ue[pi],$t!=null))switch(pi){case"children":st=$t;break;case"dangerouslySetInnerHTML":throw Error(m(434));default:jr($,Ee,pi,$t)}return $.push(br),st;case"listing":case"pre":$.push(Vn(K)),$t=st=null;for(Nr in ue)if(he.call(ue,Nr)&&(lr=ue[Nr],lr!=null))switch(Nr){case"children":st=lr;break;case"dangerouslySetInnerHTML":$t=lr;break;default:jr($,Ee,Nr,lr)}if($.push(br),$t!=null){if(st!=null)throw Error(m(60));if(typeof $t!="object"||!("__html"in $t))throw Error(m(61));ue=$t.__html,ue!=null&&(typeof ue=="string"&&0<ue.length&&ue[0]===`
`?$.push(an,te(ue)):$.push(te(""+ue)))}return typeof st=="string"&&st[0]===`
`&&$.push(an),st;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":$.push(Vn(K));for(var As in ue)if(he.call(ue,As)&&(st=ue[As],st!=null))switch(As){case"children":case"dangerouslySetInnerHTML":throw Error(m(399,K));default:jr($,Ee,As,st)}return $.push(on),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return wn($,ue,K,Ee);case"html":return vt.insertionMode===0&&$.push(Hn),wn($,ue,K,Ee);default:if(K.indexOf("-")===-1&&typeof ue.is!="string")return wn($,ue,K,Ee);$.push(Vn(K)),$t=st=null;for(mn in ue)if(he.call(ue,mn)&&(lr=ue[mn],lr!=null))switch(mn){case"children":st=lr;break;case"dangerouslySetInnerHTML":$t=lr;break;case"style":pr($,Ee,lr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:Ce(mn)&&typeof lr!="function"&&typeof lr!="symbol"&&$.push(mr,te(mn),Jr,te(_t(lr)),Cr)}return $.push(br),qr($,$t,st),st}}var ei=Y("</"),qn=Y(">"),Nn=Y('<template id="'),eo=Y('"></template>'),Wi=Y("<!--$-->"),Zi=Y('<!--$?--><template id="'),ti=Y('"></template>'),oi=Y("<!--$!-->"),go=Y("<!--/$-->"),tt=Y("<template"),ae=Y('"'),le=Y(' data-dgst="');Y(' data-msg="'),Y(' data-stck="');var _e=Y("></template>");function Me($,K,ue){if(P($,Zi),ue===null)throw Error(m(395));return P($,ue),D($,ti)}var Ve=Y('<div hidden id="'),pe=Y('">'),Ke=Y("</div>"),He=Y('<svg aria-hidden="true" style="display:none" id="'),nt=Y('">'),ft=Y("</svg>"),Ye=Y('<math aria-hidden="true" style="display:none" id="'),Dt=Y('">'),Yt=Y("</math>"),hr=Y('<table hidden id="'),kr=Y('">'),Kr=Y("</table>"),$r=Y('<table hidden><tbody id="'),Tt=Y('">'),Sn=Y("</tbody></table>"),_n=Y('<table hidden><tr id="'),Tn=Y('">'),Br=Y("</tr></table>"),Ft=Y('<table hidden><colgroup id="'),Fr=Y('">'),nn=Y("</colgroup></table>");function Zn($,K,ue,Ee){switch(ue.insertionMode){case 0:case 1:return P($,Ve),P($,K.segmentPrefix),P($,te(Ee.toString(16))),D($,pe);case 2:return P($,He),P($,K.segmentPrefix),P($,te(Ee.toString(16))),D($,nt);case 3:return P($,Ye),P($,K.segmentPrefix),P($,te(Ee.toString(16))),D($,Dt);case 4:return P($,hr),P($,K.segmentPrefix),P($,te(Ee.toString(16))),D($,kr);case 5:return P($,$r),P($,K.segmentPrefix),P($,te(Ee.toString(16))),D($,Tt);case 6:return P($,_n),P($,K.segmentPrefix),P($,te(Ee.toString(16))),D($,Tn);case 7:return P($,Ft),P($,K.segmentPrefix),P($,te(Ee.toString(16))),D($,Fr);default:throw Error(m(397))}}function Gn($,K){switch(K.insertionMode){case 0:case 1:return D($,Ke);case 2:return D($,ft);case 3:return D($,Yt);case 4:return D($,Kr);case 5:return D($,Sn);case 6:return D($,Br);case 7:return D($,nn);default:throw Error(m(397))}}var Eo=Y('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'),cn=Y('$RS("'),Qs=Y('","'),Js=Y('")<\/script>'),Es=Y('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("'),tl=Y('$RC("'),Go=Y('","'),Da=Y('")<\/script>'),hn=Y('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("'),ui=Y('$RX("'),Kn=Y('"'),Oa=Y(")<\/script>"),os=Y(","),Xl=/[<\u2028\u2029]/g;function Oo($){return JSON.stringify($).replace(Xl,function(K){switch(K){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}var to=Object.assign,ss=Symbol.for("react.element"),rl=Symbol.for("react.portal"),yo=Symbol.for("react.fragment"),ya=Symbol.for("react.strict_mode"),Yl=Symbol.for("react.profiler"),mu=Symbol.for("react.provider"),_a=Symbol.for("react.context"),Ql=Symbol.for("react.forward_ref"),Fa=Symbol.for("react.suspense"),Is=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),de=Symbol.for("react.scope"),Ie=Symbol.for("react.debug_trace_mode"),yt=Symbol.for("react.legacy_hidden"),ct=Symbol.for("react.default_value"),Ot=Symbol.iterator;function ar($){if($==null)return null;if(typeof $=="function")return $.displayName||$.name||null;if(typeof $=="string")return $;switch($){case yo:return"Fragment";case rl:return"Portal";case Yl:return"Profiler";case ya:return"StrictMode";case Fa:return"Suspense";case Is:return"SuspenseList"}if(typeof $=="object")switch($.$$typeof){case _a:return($.displayName||"Context")+".Consumer";case mu:return($._context.displayName||"Context")+".Provider";case Ql:var K=$.render;return $=$.displayName,$||($=K.displayName||K.name||"",$=$!==""?"ForwardRef("+$+")":"ForwardRef"),$;case B:return K=$.displayName||null,K!==null?K:ar($.type)||"Memo";case J:K=$._payload,$=$._init;try{return ar($(K))}catch{}}return null}var gr={};function Ar($,K){if($=$.contextTypes,!$)return gr;var ue={},Ee;for(Ee in $)ue[Ee]=K[Ee];return ue}var _r=null;function $n($,K){if($!==K){$.context._currentValue=$.parentValue,$=$.parent;var ue=K.parent;if($===null){if(ue!==null)throw Error(m(401))}else{if(ue===null)throw Error(m(401));$n($,ue)}K.context._currentValue=K.value}}function _i($){$.context._currentValue=$.parentValue,$=$.parent,$!==null&&_i($)}function ro($){var K=$.parent;K!==null&&ro(K),$.context._currentValue=$.value}function en($,K){if($.context._currentValue=$.parentValue,$=$.parent,$===null)throw Error(m(402));$.depth===K.depth?$n($,K):en($,K)}function as($,K){var ue=K.parent;if(ue===null)throw Error(m(402));$.depth===ue.depth?$n($,ue):as($,ue),K.context._currentValue=K.value}function Io($){var K=_r;K!==$&&(K===null?ro($):$===null?_i(K):K.depth===$.depth?$n(K,$):K.depth>$.depth?en(K,$):as(K,$),_r=$)}var Mo={isMounted:function(){return!1},enqueueSetState:function($,K){$=$._reactInternals,$.queue!==null&&$.queue.push(K)},enqueueReplaceState:function($,K){$=$._reactInternals,$.replace=!0,$.queue=[K]},enqueueForceUpdate:function(){}};function ci($,K,ue,Ee){var vt=$.state!==void 0?$.state:null;$.updater=Mo,$.props=ue,$.state=vt;var st={queue:[],replace:!1};$._reactInternals=st;var $t=K.contextType;if($.context=typeof $t=="object"&&$t!==null?$t._currentValue:Ee,$t=K.getDerivedStateFromProps,typeof $t=="function"&&($t=$t(ue,vt),vt=$t==null?vt:to({},vt,$t),$.state=vt),typeof K.getDerivedStateFromProps!="function"&&typeof $.getSnapshotBeforeUpdate!="function"&&(typeof $.UNSAFE_componentWillMount=="function"||typeof $.componentWillMount=="function"))if(K=$.state,typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount(),K!==$.state&&Mo.enqueueReplaceState($,$.state,null),st.queue!==null&&0<st.queue.length)if(K=st.queue,$t=st.replace,st.queue=null,st.replace=!1,$t&&K.length===1)$.state=K[0];else{for(st=$t?K[0]:$.state,vt=!0,$t=$t?1:0;$t<K.length;$t++){var lr=K[$t];lr=typeof lr=="function"?lr.call($,st,ue,Ee):lr,lr!=null&&(vt?(vt=!1,st=to({},st,lr)):to(st,lr))}$.state=st}else st.queue=null}var hi={id:1,overflow:""};function On($,K,ue){var Ee=$.id;$=$.overflow;var vt=32-Ei(Ee)-1;Ee&=~(1<<vt),ue+=1;var st=32-Ei(K)+vt;if(30<st){var $t=vt-vt%5;return st=(Ee&(1<<$t)-1).toString(32),Ee>>=$t,vt-=$t,{id:1<<32-Ei(K)+vt|ue<<vt|Ee,overflow:st+$}}return{id:1<<st|ue<<vt|Ee,overflow:$}}var Ei=Math.clz32?Math.clz32:Fo,Fn=Math.log,gu=Math.LN2;function Fo($){return $>>>=0,$===0?32:31-(Fn($)/gu|0)|0}function no($,K){return $===K&&($!==0||1/$===1/K)||$!==$&&K!==K}var ls=typeof Object.is=="function"?Object.is:no,us=null,Dn=null,di=null,Dr=null,yr=!1,En=!1,Xr=0,cs=null,io=0;function nl(){if(us===null)throw Error(m(321));return us}function yu(){if(0<io)throw Error(m(312));return{memoizedState:null,queue:null,next:null}}function Ba(){return Dr===null?di===null?(yr=!1,di=Dr=yu()):(yr=!0,Dr=di):Dr.next===null?(yr=!1,Dr=Dr.next=yu()):(yr=!0,Dr=Dr.next),Dr}function va(){Dn=us=null,En=!1,di=null,io=0,Dr=cs=null}function Jl($,K){return typeof K=="function"?K($):K}function fi($,K,ue){if(us=nl(),Dr=Ba(),yr){var Ee=Dr.queue;if(K=Ee.dispatch,cs!==null&&(ue=cs.get(Ee),ue!==void 0)){cs.delete(Ee),Ee=Dr.memoizedState;do Ee=$(Ee,ue.action),ue=ue.next;while(ue!==null);return Dr.memoizedState=Ee,[Ee,K]}return[Dr.memoizedState,K]}return $=$===Jl?typeof K=="function"?K():K:ue!==void 0?ue(K):K,Dr.memoizedState=$,$=Dr.queue={last:null,dispatch:null},$=$.dispatch=hs.bind(null,us,$),[Dr.memoizedState,$]}function il($,K){if(us=nl(),Dr=Ba(),K=K===void 0?null:K,Dr!==null){var ue=Dr.memoizedState;if(ue!==null&&K!==null){var Ee=ue[1];e:if(Ee===null)Ee=!1;else{for(var vt=0;vt<Ee.length&&vt<K.length;vt++)if(!ls(K[vt],Ee[vt])){Ee=!1;break e}Ee=!0}if(Ee)return ue[0]}}return $=$(),Dr.memoizedState=[$,K],$}function hs($,K,ue){if(25<=io)throw Error(m(301));if($===us)if(En=!0,$={action:ue,next:null},cs===null&&(cs=new Map),ue=cs.get(K),ue===void 0)cs.set(K,$);else{for(K=ue;K.next!==null;)K=K.next;K.next=$}}function ol(){throw Error(m(394))}function vi(){}var Bi={readContext:function($){return $._currentValue},useContext:function($){return nl(),$._currentValue},useMemo:il,useReducer:fi,useRef:function($){us=nl(),Dr=Ba();var K=Dr.memoizedState;return K===null?($={current:$},Dr.memoizedState=$):K},useState:function($){return fi(Jl,$)},useInsertionEffect:vi,useLayoutEffect:function(){},useCallback:function($,K){return il(function(){return $},K)},useImperativeHandle:vi,useEffect:vi,useDebugValue:vi,useDeferredValue:function($){return nl(),$},useTransition:function(){return nl(),[!1,ol]},useId:function(){var $=Dn.treeContext,K=$.overflow;$=$.id,$=($&~(1<<32-Ei($)-1)).toString(32)+K;var ue=Na;if(ue===null)throw Error(m(404));return K=Xr++,$=":"+ue.idPrefix+"R"+$,0<K&&($+="H"+K.toString(32)),$+":"},useMutableSource:function($,K){return nl(),K($._source)},useSyncExternalStore:function($,K,ue){if(ue===void 0)throw Error(m(407));return ue()}},Na=null,Ri=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function Ii($){return console.error($),null}function xa(){}function sl($,K,ue,Ee,vt,st,$t,lr,Nr){var mn=[],Yr=new Set;return K={destination:null,responseState:K,progressiveChunkSize:Ee===void 0?12800:Ee,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:Yr,pingedTasks:mn,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:vt===void 0?Ii:vt,onAllReady:st===void 0?xa:st,onShellReady:$t===void 0?xa:$t,onShellError:lr===void 0?xa:lr,onFatalError:Nr===void 0?xa:Nr},ue=_o(K,0,null,ue,!1,!1),ue.parentFlushed=!0,$=Zu(K,$,null,ue,Yr,gr,null,hi),mn.push($),K}function Zu($,K,ue,Ee,vt,st,$t,lr){$.allPendingTasks++,ue===null?$.pendingRootTasks++:ue.pendingTasks++;var Nr={node:K,ping:function(){var mn=$.pingedTasks;mn.push(Nr),mn.length===1&&vu($)},blockedBoundary:ue,blockedSegment:Ee,abortSet:vt,legacyContext:st,context:$t,treeContext:lr};return vt.add(Nr),Nr}function _o($,K,ue,Ee,vt,st){return{status:0,id:-1,index:K,parentFlushed:!1,chunks:[],children:[],formatContext:Ee,boundary:ue,lastPushedText:vt,textEmbedded:st}}function Ni($,K){if($=$.onError(K),$!=null&&typeof $!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof $+'" instead');return $}function zi($,K){var ue=$.onShellError;ue(K),ue=$.onFatalError,ue(K),$.destination!==null?($.status=2,fe($.destination,K)):($.status=1,$.fatalError=K)}function ds($,K,ue,Ee,vt){for(us={},Dn=K,Xr=0,$=ue(Ee,vt);En;)En=!1,Xr=0,io+=1,Dr=null,$=ue(Ee,vt);return va(),$}function $a($,K,ue,Ee){var vt=ue.render(),st=Ee.childContextTypes;if(st!=null){var $t=K.legacyContext;if(typeof ue.getChildContext!="function")Ee=$t;else{ue=ue.getChildContext();for(var lr in ue)if(!(lr in st))throw Error(m(108,ar(Ee)||"Unknown",lr));Ee=to({},$t,ue)}K.legacyContext=Ee,Gi($,K,vt),K.legacyContext=$t}else Gi($,K,vt)}function Ms($,K){if($&&$.defaultProps){K=to({},K),$=$.defaultProps;for(var ue in $)K[ue]===void 0&&(K[ue]=$[ue]);return K}return K}function ko($,K,ue,Ee,vt){if(typeof ue=="function")if(ue.prototype&&ue.prototype.isReactComponent){vt=Ar(ue,K.legacyContext);var st=ue.contextType;st=new ue(Ee,typeof st=="object"&&st!==null?st._currentValue:vt),ci(st,ue,Ee,vt),$a($,K,st,ue)}else{st=Ar(ue,K.legacyContext),vt=ds($,K,ue,Ee,st);var $t=Xr!==0;if(typeof vt=="object"&&vt!==null&&typeof vt.render=="function"&&vt.$$typeof===void 0)ci(vt,ue,Ee,st),$a($,K,vt,ue);else if($t){Ee=K.treeContext,K.treeContext=On(Ee,1,0);try{Gi($,K,vt)}finally{K.treeContext=Ee}}else Gi($,K,vt)}else if(typeof ue=="string"){switch(vt=K.blockedSegment,st=Ti(vt.chunks,ue,Ee,$.responseState,vt.formatContext),vt.lastPushedText=!1,$t=vt.formatContext,vt.formatContext=Fe($t,ue,Ee),ja($,K,st),vt.formatContext=$t,ue){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:vt.chunks.push(ei,te(ue),qn)}vt.lastPushedText=!1}else{switch(ue){case yt:case Ie:case ya:case Yl:case yo:Gi($,K,Ee.children);return;case Is:Gi($,K,Ee.children);return;case de:throw Error(m(343));case Fa:e:{ue=K.blockedBoundary,vt=K.blockedSegment,st=Ee.fallback,Ee=Ee.children,$t=new Set;var lr={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:$t,errorDigest:null},Nr=_o($,vt.chunks.length,lr,vt.formatContext,!1,!1);vt.children.push(Nr),vt.lastPushedText=!1;var mn=_o($,0,null,vt.formatContext,!1,!1);mn.parentFlushed=!0,K.blockedBoundary=lr,K.blockedSegment=mn;try{if(ja($,K,Ee),mn.lastPushedText&&mn.textEmbedded&&mn.chunks.push(ht),mn.status=1,_u(lr,mn),lr.pendingTasks===0)break e}catch(Yr){mn.status=4,lr.forceClientRender=!0,lr.errorDigest=Ni($,Yr)}finally{K.blockedBoundary=ue,K.blockedSegment=vt}K=Zu($,st,ue,Nr,$t,K.legacyContext,K.context,K.treeContext),$.pingedTasks.push(K)}return}if(typeof ue=="object"&&ue!==null)switch(ue.$$typeof){case Ql:if(Ee=ds($,K,ue.render,Ee,vt),Xr!==0){ue=K.treeContext,K.treeContext=On(ue,1,0);try{Gi($,K,Ee)}finally{K.treeContext=ue}}else Gi($,K,Ee);return;case B:ue=ue.type,Ee=Ms(ue,Ee),ko($,K,ue,Ee,vt);return;case mu:if(vt=Ee.children,ue=ue._context,Ee=Ee.value,st=ue._currentValue,ue._currentValue=Ee,$t=_r,_r=Ee={parent:$t,depth:$t===null?0:$t.depth+1,context:ue,parentValue:st,value:Ee},K.context=Ee,Gi($,K,vt),$=_r,$===null)throw Error(m(403));Ee=$.parentValue,$.context._currentValue=Ee===ct?$.context._defaultValue:Ee,$=_r=$.parent,K.context=$;return;case _a:Ee=Ee.children,Ee=Ee(ue._currentValue),Gi($,K,Ee);return;case J:vt=ue._init,ue=vt(ue._payload),Ee=Ms(ue,Ee),ko($,K,ue,Ee,void 0);return}throw Error(m(130,ue==null?ue:typeof ue,""))}}function Gi($,K,ue){if(K.node=ue,typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case ss:ko($,K,ue.type,ue.props,ue.ref);return;case rl:throw Error(m(257));case J:var Ee=ue._init;ue=Ee(ue._payload),Gi($,K,ue);return}if(ne(ue)){Xn($,K,ue);return}if(ue===null||typeof ue!="object"?Ee=null:(Ee=Ot&&ue[Ot]||ue["@@iterator"],Ee=typeof Ee=="function"?Ee:null),Ee&&(Ee=Ee.call(ue))){if(ue=Ee.next(),!ue.done){var vt=[];do vt.push(ue.value),ue=Ee.next();while(!ue.done);Xn($,K,vt)}return}throw $=Object.prototype.toString.call(ue),Error(m(31,$==="[object Object]"?"object with keys {"+Object.keys(ue).join(", ")+"}":$))}typeof ue=="string"?(Ee=K.blockedSegment,Ee.lastPushedText=Vt(K.blockedSegment.chunks,ue,$.responseState,Ee.lastPushedText)):typeof ue=="number"&&(Ee=K.blockedSegment,Ee.lastPushedText=Vt(K.blockedSegment.chunks,""+ue,$.responseState,Ee.lastPushedText))}function Xn($,K,ue){for(var Ee=ue.length,vt=0;vt<Ee;vt++){var st=K.treeContext;K.treeContext=On(st,Ee,vt);try{ja($,K,ue[vt])}finally{K.treeContext=st}}}function ja($,K,ue){var Ee=K.blockedSegment.formatContext,vt=K.legacyContext,st=K.context;try{return Gi($,K,ue)}catch(Nr){if(va(),typeof Nr=="object"&&Nr!==null&&typeof Nr.then=="function"){ue=Nr;var $t=K.blockedSegment,lr=_o($,$t.chunks.length,null,$t.formatContext,$t.lastPushedText,!0);$t.children.push(lr),$t.lastPushedText=!1,$=Zu($,K.node,K.blockedBoundary,lr,K.abortSet,K.legacyContext,K.context,K.treeContext).ping,ue.then($,$),K.blockedSegment.formatContext=Ee,K.legacyContext=vt,K.context=st,Io(st)}else throw K.blockedSegment.formatContext=Ee,K.legacyContext=vt,K.context=st,Io(st),Nr}}function Gu($){var K=$.blockedBoundary;$=$.blockedSegment,$.status=3,$h(this,K,$)}function Nh($,K,ue){var Ee=$.blockedBoundary;$.blockedSegment.status=3,Ee===null?(K.allPendingTasks--,K.status!==2&&(K.status=2,K.destination!==null&&K.destination.close())):(Ee.pendingTasks--,Ee.forceClientRender||(Ee.forceClientRender=!0,$=ue===void 0?Error(m(432)):ue,Ee.errorDigest=K.onError($),Ee.parentFlushed&&K.clientRenderedBoundaries.push(Ee)),Ee.fallbackAbortableTasks.forEach(function(vt){return Nh(vt,K,ue)}),Ee.fallbackAbortableTasks.clear(),K.allPendingTasks--,K.allPendingTasks===0&&(Ee=K.onAllReady,Ee()))}function _u($,K){if(K.chunks.length===0&&K.children.length===1&&K.children[0].boundary===null){var ue=K.children[0];ue.id=K.id,ue.parentFlushed=!0,ue.status===1&&_u($,ue)}else $.completedSegments.push(K)}function $h($,K,ue){if(K===null){if(ue.parentFlushed){if($.completedRootSegment!==null)throw Error(m(389));$.completedRootSegment=ue}$.pendingRootTasks--,$.pendingRootTasks===0&&($.onShellError=xa,K=$.onShellReady,K())}else K.pendingTasks--,K.forceClientRender||(K.pendingTasks===0?(ue.parentFlushed&&ue.status===1&&_u(K,ue),K.parentFlushed&&$.completedBoundaries.push(K),K.fallbackAbortableTasks.forEach(Gu,$),K.fallbackAbortableTasks.clear()):ue.parentFlushed&&ue.status===1&&(_u(K,ue),K.completedSegments.length===1&&K.parentFlushed&&$.partialBoundaries.push(K)));$.allPendingTasks--,$.allPendingTasks===0&&($=$.onAllReady,$())}function vu($){if($.status!==2){var K=_r,ue=Ri.current;Ri.current=Bi;var Ee=Na;Na=$.responseState;try{var vt=$.pingedTasks,st;for(st=0;st<vt.length;st++){var $t=vt[st],lr=$,Nr=$t.blockedSegment;if(Nr.status===0){Io($t.context);try{Gi(lr,$t,$t.node),Nr.lastPushedText&&Nr.textEmbedded&&Nr.chunks.push(ht),$t.abortSet.delete($t),Nr.status=1,$h(lr,$t.blockedBoundary,Nr)}catch(fs){if(va(),typeof fs=="object"&&fs!==null&&typeof fs.then=="function"){var mn=$t.ping;fs.then(mn,mn)}else{$t.abortSet.delete($t),Nr.status=4;var Yr=$t.blockedBoundary,pi=fs,Bo=Ni(lr,pi);if(Yr===null?zi(lr,pi):(Yr.pendingTasks--,Yr.forceClientRender||(Yr.forceClientRender=!0,Yr.errorDigest=Bo,Yr.parentFlushed&&lr.clientRenderedBoundaries.push(Yr))),lr.allPendingTasks--,lr.allPendingTasks===0){var As=lr.onAllReady;As()}}}finally{}}}vt.splice(0,st),$.destination!==null&&Wu($,$.destination)}catch(fs){Ni($,fs),zi($,fs)}finally{Na=Ee,Ri.current=ue,ue===Bi&&Io(K)}}}function al($,K,ue){switch(ue.parentFlushed=!0,ue.status){case 0:var Ee=ue.id=$.nextSegmentId++;return ue.lastPushedText=!1,ue.textEmbedded=!1,$=$.responseState,P(K,Nn),P(K,$.placeholderPrefix),$=te(Ee.toString(16)),P(K,$),D(K,eo);case 1:ue.status=2;var vt=!0;Ee=ue.chunks;var st=0;ue=ue.children;for(var $t=0;$t<ue.length;$t++){for(vt=ue[$t];st<vt.index;st++)P(K,Ee[st]);vt=Al($,K,vt)}for(;st<Ee.length-1;st++)P(K,Ee[st]);return st<Ee.length&&(vt=D(K,Ee[st])),vt;default:throw Error(m(390))}}function Al($,K,ue){var Ee=ue.boundary;if(Ee===null)return al($,K,ue);if(Ee.parentFlushed=!0,Ee.forceClientRender)Ee=Ee.errorDigest,D(K,oi),P(K,tt),Ee&&(P(K,le),P(K,te(_t(Ee))),P(K,ae)),D(K,_e),al($,K,ue);else if(0<Ee.pendingTasks){Ee.rootSegmentID=$.nextSegmentId++,0<Ee.completedSegments.length&&$.partialBoundaries.push(Ee);var vt=$.responseState,st=vt.nextSuspenseID++;vt=Y(vt.boundaryPrefix+st.toString(16)),Ee=Ee.id=vt,Me(K,$.responseState,Ee),al($,K,ue)}else if(Ee.byteSize>$.progressiveChunkSize)Ee.rootSegmentID=$.nextSegmentId++,$.completedBoundaries.push(Ee),Me(K,$.responseState,Ee.id),al($,K,ue);else{if(D(K,Wi),ue=Ee.completedSegments,ue.length!==1)throw Error(m(391));Al($,K,ue[0])}return D(K,go)}function Rl($,K,ue){return Zn(K,$.responseState,ue.formatContext,ue.id),Al($,K,ue),Gn(K,ue.formatContext)}function Ua($,K,ue){for(var Ee=ue.completedSegments,vt=0;vt<Ee.length;vt++)ks($,K,ue,Ee[vt]);if(Ee.length=0,$=$.responseState,Ee=ue.id,ue=ue.rootSegmentID,P(K,$.startInlineScript),$.sentCompleteBoundaryFunction?P(K,tl):($.sentCompleteBoundaryFunction=!0,P(K,Es)),Ee===null)throw Error(m(395));return ue=te(ue.toString(16)),P(K,Ee),P(K,Go),P(K,$.segmentPrefix),P(K,ue),D(K,Da)}function ks($,K,ue,Ee){if(Ee.status===2)return!0;var vt=Ee.id;if(vt===-1){if((Ee.id=ue.rootSegmentID)===-1)throw Error(m(392));return Rl($,K,Ee)}return Rl($,K,Ee),$=$.responseState,P(K,$.startInlineScript),$.sentCompleteSegmentFunction?P(K,cn):($.sentCompleteSegmentFunction=!0,P(K,Eo)),P(K,$.segmentPrefix),vt=te(vt.toString(16)),P(K,vt),P(K,Qs),P(K,$.placeholderPrefix),P(K,vt),D(K,Js)}function Wu($,K){p=new Uint8Array(512),T=0;try{var ue=$.completedRootSegment;if(ue!==null&&$.pendingRootTasks===0){Al($,K,ue),$.completedRootSegment=null;var Ee=$.responseState.bootstrapChunks;for(ue=0;ue<Ee.length-1;ue++)P(K,Ee[ue]);ue<Ee.length&&D(K,Ee[ue])}var vt=$.clientRenderedBoundaries,st;for(st=0;st<vt.length;st++){var $t=vt[st];Ee=K;var lr=$.responseState,Nr=$t.id,mn=$t.errorDigest,Yr=$t.errorMessage,pi=$t.errorComponentStack;if(P(Ee,lr.startInlineScript),lr.sentClientRenderFunction?P(Ee,ui):(lr.sentClientRenderFunction=!0,P(Ee,hn)),Nr===null)throw Error(m(395));P(Ee,Nr),P(Ee,Kn),(mn||Yr||pi)&&(P(Ee,os),P(Ee,te(Oo(mn||"")))),(Yr||pi)&&(P(Ee,os),P(Ee,te(Oo(Yr||"")))),pi&&(P(Ee,os),P(Ee,te(Oo(pi)))),D(Ee,Oa)}vt.splice(0,st);var Bo=$.completedBoundaries;for(st=0;st<Bo.length;st++)Ua($,K,Bo[st]);Bo.splice(0,st),M(K),p=new Uint8Array(512),T=0;var As=$.partialBoundaries;for(st=0;st<As.length;st++){var fs=As[st];e:{vt=$,$t=K;var ea=fs.completedSegments;for(lr=0;lr<ea.length;lr++)if(!ks(vt,$t,fs,ea[lr])){lr++,ea.splice(0,lr);var Lc=!1;break e}ea.splice(0,lr),Lc=!0}if(!Lc){$.destination=null,st++,As.splice(0,st);return}}As.splice(0,st);var ll=$.completedBoundaries;for(st=0;st<ll.length;st++)Ua($,K,ll[st]);ll.splice(0,st)}finally{M(K),$.allPendingTasks===0&&$.pingedTasks.length===0&&$.clientRenderedBoundaries.length===0&&$.completedBoundaries.length===0&&K.close()}}function Hu($,K){try{var ue=$.abortableTasks;ue.forEach(function(Ee){return Nh(Ee,$,K)}),ue.clear(),$.destination!==null&&Wu($,$.destination)}catch(Ee){Ni($,Ee),zi($,Ee)}}return qg.renderToReadableStream=function($,K){return new Promise(function(ue,Ee){var vt,st,$t=new Promise(function(Yr,pi){st=Yr,vt=pi}),lr=sl($,bt(K?K.identifierPrefix:void 0,K?K.nonce:void 0,K?K.bootstrapScriptContent:void 0,K?K.bootstrapScripts:void 0,K?K.bootstrapModules:void 0),Ht(K?K.namespaceURI:void 0),K?K.progressiveChunkSize:void 0,K?K.onError:void 0,st,function(){var Yr=new ReadableStream({type:"bytes",pull:function(pi){if(lr.status===1)lr.status=2,fe(pi,lr.fatalError);else if(lr.status!==2&&lr.destination===null){lr.destination=pi;try{Wu(lr,pi)}catch(Bo){Ni(lr,Bo),zi(lr,Bo)}}},cancel:function(){Hu(lr)}},{highWaterMark:0});Yr.allReady=$t,ue(Yr)},function(Yr){$t.catch(function(){}),Ee(Yr)},vt);if(K&&K.signal){var Nr=K.signal,mn=function(){Hu(lr,Nr.reason),Nr.removeEventListener("abort",mn)};Nr.addEventListener("abort",mn)}vu(lr)})},qg.version="18.3.1",qg}var $x;function ER(){if($x)return Vf;$x=1;var c,m;return c=CR(),m=PR(),Vf.version=c.version,Vf.renderToString=c.renderToString,Vf.renderToStaticMarkup=c.renderToStaticMarkup,Vf.renderToNodeStream=c.renderToNodeStream,Vf.renderToStaticNodeStream=c.renderToStaticNodeStream,Vf.renderToReadableStream=m.renderToReadableStream,Vf}ER();function IR(c){const{challenges:m,setChallenge:p,challenge:T,colorBy:P,setColorBy:D}=c,[M,u]=pu.useState([]),[te,Y]=pu.useState(!1);return Gt.useEffect(()=>{u(m.map(fe=>wr.jsx(bA,{value:fe.name,children:fe.name})))},[m]),wr.jsxs("div",{style:{position:"absolute",top:20,left:20,zIndex:1e3,width:"300px",backgroundColor:"white",padding:"10px",borderRadius:"8px",height:te?"30px":"auto",overflow:"hidden",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:[wr.jsx("div",{style:{width:"100%",textAlign:"right"},children:wr.jsxs(TR,{onClick:()=>Y(fe=>!fe),children:[!te&&wr.jsx(sR,{}),te&&wr.jsx(aR,{})]})}),wr.jsx("div",{style:{width:"300px",height:"200px",background:"url('/blitz-the-gap-map/logo.png') no-repeat",marginBottom:"10px",backgroundPosition:"center center",backgroundSize:"contain"}}),wr.jsx(Ax,{variant:"standard",sx:{m:1,minWidth:280},children:wr.jsxs(Ax,{sx:{marginTop:"15px"},children:[wr.jsx(Dk,{id:"row-radio-buttons-group-label",children:"Color by:"}),wr.jsxs(oR,{row:!0,"aria-labelledby":"row-radio-buttons-group-label",name:"row-radio-buttons-group",value:P,onChange:fe=>{D(fe.target.value)},children:[wr.jsx(Rx,{value:"obsdens",control:wr.jsx(Ox,{}),label:"Number of observations"}),wr.jsx(Rx,{value:"spdens",control:wr.jsx(Ox,{}),label:"Number of species"})]})]})})]})}const{useEffect:$R,useRef:jR}=pu;function MR(){const[c,m]=pu.useState("https://object-arbutus.cloud.computecanada.ca/bq-io/io/inat_canada_heatmaps/All_density_inat_100m.tif"),[p,T]=Gt.useState("All challenges"),[P,D]=Gt.useState("obsdens"),M=[{name:"All challenges",everywhere:!1},{name:"Conservation priorities (MayBAs)",everywhere:!1},{name:"Make a splash",everywhere:!1},{name:"Trailblazers",everywhere:!1},{name:"99 Percent",everywhere:!1},{name:"Revisit the past",everywhere:!1},{name:"Climate gaps",everywhere:!1},{name:"Birders, don't look up!",everywhere:!0},{name:"Getting Even",everywhere:!0},{name:"More than a Monarch",everywhere:!0},{name:"Missing Canadian Species",everywhere:!0}];return wr.jsxs(wr.Fragment,{children:[wr.jsx(IR,{challenges:M,challenge:p,setChallenge:T,colorBy:P,setColorBy:D}),wr.jsx(bE,{COGUrl:c,opacity:100,challenges:M,challenge:p,colorBy:P}),wr.jsx(zP,{effect:"solid",type:"dark",scrollHide:"true",event:"mousemove",eventOff:"mouseleave",delayHide:1e3})]})}const kR=document.getElementById("root"),AR=jx.createRoot(kR);AR.render(wr.jsx(MR,{}));
